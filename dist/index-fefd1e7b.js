var RNe=Object.defineProperty;var DNe=(t,e,n)=>e in t?RNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Jr=(t,e,n)=>(DNe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uwe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zwe={exports:{}},ZN={},Vwe={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT=Symbol.for("react.element"),ONe=Symbol.for("react.portal"),LNe=Symbol.for("react.fragment"),NNe=Symbol.for("react.strict_mode"),FNe=Symbol.for("react.profiler"),BNe=Symbol.for("react.provider"),UNe=Symbol.for("react.context"),zNe=Symbol.for("react.forward_ref"),VNe=Symbol.for("react.suspense"),jNe=Symbol.for("react.memo"),HNe=Symbol.for("react.lazy"),pve=Symbol.iterator;function GNe(t){return t===null||typeof t!="object"?null:(t=pve&&t[pve]||t["@@iterator"],typeof t=="function"?t:null)}var jwe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hwe=Object.assign,Gwe={};function o1(t,e,n){this.props=t,this.context=e,this.refs=Gwe,this.updater=n||jwe}o1.prototype.isReactComponent={};o1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};o1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wwe(){}Wwe.prototype=o1.prototype;function s$(t,e,n){this.props=t,this.context=e,this.refs=Gwe,this.updater=n||jwe}var o$=s$.prototype=new Wwe;o$.constructor=s$;Hwe(o$,o1.prototype);o$.isPureReactComponent=!0;var fve=Array.isArray,$we=Object.prototype.hasOwnProperty,a$={current:null},Kwe={key:!0,ref:!0,__self:!0,__source:!0};function Xwe(t,e,n){var r,i={},o=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(o=""+e.key),e)$we.call(e,r)&&!Kwe.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var m=Array(h),v=0;v<h;v++)m[v]=arguments[v+2];i.children=m}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:WT,type:t,key:o,ref:u,props:i,_owner:a$.current}}function WNe(t,e){return{$$typeof:WT,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function l$(t){return typeof t=="object"&&t!==null&&t.$$typeof===WT}function $Ne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mve=/\/+/g;function wH(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$Ne(""+t.key):e.toString(36)}function PL(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case WT:case ONe:u=!0}}if(u)return u=t,i=i(u),t=r===""?"."+wH(u,0):r,fve(i)?(n="",t!=null&&(n=t.replace(mve,"$&/")+"/"),PL(i,e,n,"",function(v){return v})):i!=null&&(l$(i)&&(i=WNe(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(mve,"$&/")+"/")+t)),e.push(i)),1;if(u=0,r=r===""?".":r+":",fve(t))for(var h=0;h<t.length;h++){o=t[h];var m=r+wH(o,h);u+=PL(o,e,n,m,i)}else if(m=GNe(t),typeof m=="function")for(t=m.call(t),h=0;!(o=t.next()).done;)o=o.value,m=r+wH(o,h++),u+=PL(o,e,n,m,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function S3(t,e,n){if(t==null)return t;var r=[],i=0;return PL(t,r,"","",function(o){return e.call(n,o,i++)}),r}function KNe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ka={current:null},TL={transition:null},XNe={ReactCurrentDispatcher:ka,ReactCurrentBatchConfig:TL,ReactCurrentOwner:a$};xr.Children={map:S3,forEach:function(t,e,n){S3(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return S3(t,function(){e++}),e},toArray:function(t){return S3(t,function(e){return e})||[]},only:function(t){if(!l$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xr.Component=o1;xr.Fragment=LNe;xr.Profiler=FNe;xr.PureComponent=s$;xr.StrictMode=NNe;xr.Suspense=VNe;xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XNe;xr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hwe({},t.props),i=t.key,o=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,u=a$.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(m in e)$we.call(e,m)&&!Kwe.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){h=Array(m);for(var v=0;v<m;v++)h[v]=arguments[v+2];r.children=h}return{$$typeof:WT,type:t.type,key:i,ref:o,props:r,_owner:u}};xr.createContext=function(t){return t={$$typeof:UNe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BNe,_context:t},t.Consumer=t};xr.createElement=Xwe;xr.createFactory=function(t){var e=Xwe.bind(null,t);return e.type=t,e};xr.createRef=function(){return{current:null}};xr.forwardRef=function(t){return{$$typeof:zNe,render:t}};xr.isValidElement=l$;xr.lazy=function(t){return{$$typeof:HNe,_payload:{_status:-1,_result:t},_init:KNe}};xr.memo=function(t,e){return{$$typeof:jNe,type:t,compare:e===void 0?null:e}};xr.startTransition=function(t){var e=TL.transition;TL.transition={};try{t()}finally{TL.transition=e}};xr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xr.useCallback=function(t,e){return ka.current.useCallback(t,e)};xr.useContext=function(t){return ka.current.useContext(t)};xr.useDebugValue=function(){};xr.useDeferredValue=function(t){return ka.current.useDeferredValue(t)};xr.useEffect=function(t,e){return ka.current.useEffect(t,e)};xr.useId=function(){return ka.current.useId()};xr.useImperativeHandle=function(t,e,n){return ka.current.useImperativeHandle(t,e,n)};xr.useInsertionEffect=function(t,e){return ka.current.useInsertionEffect(t,e)};xr.useLayoutEffect=function(t,e){return ka.current.useLayoutEffect(t,e)};xr.useMemo=function(t,e){return ka.current.useMemo(t,e)};xr.useReducer=function(t,e,n){return ka.current.useReducer(t,e,n)};xr.useRef=function(t){return ka.current.useRef(t)};xr.useState=function(t){return ka.current.useState(t)};xr.useSyncExternalStore=function(t,e,n){return ka.current.useSyncExternalStore(t,e,n)};xr.useTransition=function(){return ka.current.useTransition()};xr.version="18.2.0";Vwe.exports=xr;var Gt=Vwe.exports;const qwe=Uwe(Gt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qNe=Gt,YNe=Symbol.for("react.element"),ZNe=Symbol.for("react.fragment"),QNe=Object.prototype.hasOwnProperty,JNe=qNe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eFe={key:!0,ref:!0,__self:!0,__source:!0};function Ywe(t,e,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)QNe.call(e,r)&&!eFe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:YNe,type:t,key:o,ref:u,props:i,_owner:JNe.current}}ZN.Fragment=ZNe;ZN.jsx=Ywe;ZN.jsxs=Ywe;zwe.exports=ZN;var _t=zwe.exports,y9={},Zwe={exports:{}},Tl={},Qwe={exports:{}},Jwe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ne,Xe){var qe=Ne.length;Ne.push(Xe);e:for(;0<qe;){var ft=qe-1>>>1,Ct=Ne[ft];if(0<i(Ct,Xe))Ne[ft]=Xe,Ne[qe]=Ct,qe=ft;else break e}}function n(Ne){return Ne.length===0?null:Ne[0]}function r(Ne){if(Ne.length===0)return null;var Xe=Ne[0],qe=Ne.pop();if(qe!==Xe){Ne[0]=qe;e:for(var ft=0,Ct=Ne.length,mt=Ct>>>1;ft<mt;){var Pt=2*(ft+1)-1,Rt=Ne[Pt],Jt=Pt+1,Yt=Ne[Jt];if(0>i(Rt,qe))Jt<Ct&&0>i(Yt,Rt)?(Ne[ft]=Yt,Ne[Jt]=qe,ft=Jt):(Ne[ft]=Rt,Ne[Pt]=qe,ft=Pt);else if(Jt<Ct&&0>i(Yt,qe))Ne[ft]=Yt,Ne[Jt]=qe,ft=Jt;else break e}}return Xe}function i(Ne,Xe){var qe=Ne.sortIndex-Xe.sortIndex;return qe!==0?qe:Ne.id-Xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],v=[],x=1,E=null,k=3,D=!1,G=!1,N=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(Ne){for(var Xe=n(v);Xe!==null;){if(Xe.callback===null)r(v);else if(Xe.startTime<=Ne)r(v),Xe.sortIndex=Xe.expirationTime,e(m,Xe);else break;Xe=n(v)}}function Q(Ne){if(N=!1,$(Ne),!G)if(n(m)!==null)G=!0,Te(ye);else{var Xe=n(v);Xe!==null&&it(Q,Xe.startTime-Ne)}}function ye(Ne,Xe){G=!1,N&&(N=!1,U(pe),pe=-1),D=!0;var qe=k;try{for($(Xe),E=n(m);E!==null&&(!(E.expirationTime>Xe)||Ne&&!Ye());){var ft=E.callback;if(typeof ft=="function"){E.callback=null,k=E.priorityLevel;var Ct=ft(E.expirationTime<=Xe);Xe=t.unstable_now(),typeof Ct=="function"?E.callback=Ct:E===n(m)&&r(m),$(Xe)}else r(m);E=n(m)}if(E!==null)var mt=!0;else{var Pt=n(v);Pt!==null&&it(Q,Pt.startTime-Xe),mt=!1}return mt}finally{E=null,k=qe,D=!1}}var q=!1,ie=null,pe=-1,W=5,he=-1;function Ye(){return!(t.unstable_now()-he<W)}function at(){if(ie!==null){var Ne=t.unstable_now();he=Ne;var Xe=!0;try{Xe=ie(!0,Ne)}finally{Xe?Et():(q=!1,ie=null)}}else q=!1}var Et;if(typeof P=="function")Et=function(){P(at)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Ge=ue.port2;ue.port1.onmessage=at,Et=function(){Ge.postMessage(null)}}else Et=function(){z(at,0)};function Te(Ne){ie=Ne,q||(q=!0,Et())}function it(Ne,Xe){pe=z(function(){Ne(t.unstable_now())},Xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ne){Ne.callback=null},t.unstable_continueExecution=function(){G||D||(G=!0,Te(ye))},t.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<Ne?Math.floor(1e3/Ne):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(Ne){switch(k){case 1:case 2:case 3:var Xe=3;break;default:Xe=k}var qe=k;k=Xe;try{return Ne()}finally{k=qe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ne,Xe){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var qe=k;k=Ne;try{return Xe()}finally{k=qe}},t.unstable_scheduleCallback=function(Ne,Xe,qe){var ft=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?ft+qe:ft):qe=ft,Ne){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=qe+Ct,Ne={id:x++,callback:Xe,priorityLevel:Ne,startTime:qe,expirationTime:Ct,sortIndex:-1},qe>ft?(Ne.sortIndex=qe,e(v,Ne),n(m)===null&&Ne===n(v)&&(N?(U(pe),pe=-1):N=!0,it(Q,qe-ft))):(Ne.sortIndex=Ct,e(m,Ne),G||D||(G=!0,Te(ye))),Ne},t.unstable_shouldYield=Ye,t.unstable_wrapCallback=function(Ne){var Xe=k;return function(){var qe=k;k=Xe;try{return Ne.apply(this,arguments)}finally{k=qe}}}})(Jwe);Qwe.exports=Jwe;var tFe=Qwe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1e=Gt,El=tFe;function $t(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t1e=new Set,nT={};function G0(t,e){Ww(t,e),Ww(t+"Capture",e)}function Ww(t,e){for(nT[t]=e,t=0;t<e.length;t++)t1e.add(e[t])}var hp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b9=Object.prototype.hasOwnProperty,nFe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gve={},vve={};function rFe(t){return b9.call(vve,t)?!0:b9.call(gve,t)?!1:nFe.test(t)?vve[t]=!0:(gve[t]=!0,!1)}function iFe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sFe(t,e,n,r){if(e===null||typeof e>"u"||iFe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Aa(t,e,n,r,i,o,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=u}var To={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){To[t]=new Aa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];To[e]=new Aa(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){To[t]=new Aa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){To[t]=new Aa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){To[t]=new Aa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){To[t]=new Aa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){To[t]=new Aa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){To[t]=new Aa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){To[t]=new Aa(t,5,!1,t.toLowerCase(),null,!1,!1)});var u$=/[\-:]([a-z])/g;function c$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(u$,c$);To[e]=new Aa(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(u$,c$);To[e]=new Aa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(u$,c$);To[e]=new Aa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){To[t]=new Aa(t,1,!1,t.toLowerCase(),null,!1,!1)});To.xlinkHref=new Aa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){To[t]=new Aa(t,1,!1,t.toLowerCase(),null,!0,!0)});function d$(t,e,n,r){var i=To.hasOwnProperty(e)?To[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sFe(e,n,i,r)&&(n=null),r||i===null?rFe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xp=e1e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E3=Symbol.for("react.element"),dw=Symbol.for("react.portal"),hw=Symbol.for("react.fragment"),h$=Symbol.for("react.strict_mode"),_9=Symbol.for("react.profiler"),n1e=Symbol.for("react.provider"),r1e=Symbol.for("react.context"),p$=Symbol.for("react.forward_ref"),w9=Symbol.for("react.suspense"),x9=Symbol.for("react.suspense_list"),f$=Symbol.for("react.memo"),bm=Symbol.for("react.lazy"),i1e=Symbol.for("react.offscreen"),yve=Symbol.iterator;function oP(t){return t===null||typeof t!="object"?null:(t=yve&&t[yve]||t["@@iterator"],typeof t=="function"?t:null)}var qi=Object.assign,xH;function IP(t){if(xH===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xH=e&&e[1]||""}return`
`+xH+t}var SH=!1;function EH(t,e){if(!t||SH)return"";SH=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var r=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){r=v}t.call(e.prototype)}else{try{throw Error()}catch(v){r=v}t()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,h=o.length-1;1<=u&&0<=h&&i[u]!==o[h];)h--;for(;1<=u&&0<=h;u--,h--)if(i[u]!==o[h]){if(u!==1||h!==1)do if(u--,h--,0>h||i[u]!==o[h]){var m=`
`+i[u].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=u&&0<=h);break}}}finally{SH=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?IP(t):""}function oFe(t){switch(t.tag){case 5:return IP(t.type);case 16:return IP("Lazy");case 13:return IP("Suspense");case 19:return IP("SuspenseList");case 0:case 2:case 15:return t=EH(t.type,!1),t;case 11:return t=EH(t.type.render,!1),t;case 1:return t=EH(t.type,!0),t;default:return""}}function S9(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hw:return"Fragment";case dw:return"Portal";case _9:return"Profiler";case h$:return"StrictMode";case w9:return"Suspense";case x9:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r1e:return(t.displayName||"Context")+".Consumer";case n1e:return(t._context.displayName||"Context")+".Provider";case p$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case f$:return e=t.displayName||null,e!==null?e:S9(t.type)||"Memo";case bm:e=t._payload,t=t._init;try{return S9(t(e))}catch{}}return null}function aFe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S9(e);case 8:return e===h$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function s1e(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lFe(t){var e=s1e(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function C3(t){t._valueTracker||(t._valueTracker=lFe(t))}function o1e(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=s1e(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function XL(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function E9(t,e){var n=e.checked;return qi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bve(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wm(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a1e(t,e){e=e.checked,e!=null&&d$(t,"checked",e,!1)}function C9(t,e){a1e(t,e);var n=Wm(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?P9(t,e.type,n):e.hasOwnProperty("defaultValue")&&P9(t,e.type,Wm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _ve(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function P9(t,e,n){(e!=="number"||XL(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var RP=Array.isArray;function Rw(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wm(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function T9(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($t(91));return qi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wve(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($t(92));if(RP(n)){if(1<n.length)throw Error($t(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wm(n)}}function l1e(t,e){var n=Wm(e.value),r=Wm(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xve(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u1e(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M9(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u1e(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var P3,c1e=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(P3=P3||document.createElement("div"),P3.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=P3.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rT(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var FP={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uFe=["Webkit","ms","Moz","O"];Object.keys(FP).forEach(function(t){uFe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),FP[e]=FP[t]})});function d1e(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||FP.hasOwnProperty(t)&&FP[t]?(""+e).trim():e+"px"}function h1e(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=d1e(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cFe=qi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k9(t,e){if(e){if(cFe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($t(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($t(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($t(61))}if(e.style!=null&&typeof e.style!="object")throw Error($t(62))}}function A9(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I9=null;function m$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var R9=null,Dw=null,Ow=null;function Sve(t){if(t=XT(t)){if(typeof R9!="function")throw Error($t(280));var e=t.stateNode;e&&(e=nF(e),R9(t.stateNode,t.type,e))}}function p1e(t){Dw?Ow?Ow.push(t):Ow=[t]:Dw=t}function f1e(){if(Dw){var t=Dw,e=Ow;if(Ow=Dw=null,Sve(t),e)for(t=0;t<e.length;t++)Sve(e[t])}}function m1e(t,e){return t(e)}function g1e(){}var CH=!1;function v1e(t,e,n){if(CH)return t(e,n);CH=!0;try{return m1e(t,e,n)}finally{CH=!1,(Dw!==null||Ow!==null)&&(g1e(),f1e())}}function iT(t,e){var n=t.stateNode;if(n===null)return null;var r=nF(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($t(231,e,typeof n));return n}var D9=!1;if(hp)try{var aP={};Object.defineProperty(aP,"passive",{get:function(){D9=!0}}),window.addEventListener("test",aP,aP),window.removeEventListener("test",aP,aP)}catch{D9=!1}function dFe(t,e,n,r,i,o,u,h,m){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(x){this.onError(x)}}var BP=!1,qL=null,YL=!1,O9=null,hFe={onError:function(t){BP=!0,qL=t}};function pFe(t,e,n,r,i,o,u,h,m){BP=!1,qL=null,dFe.apply(hFe,arguments)}function fFe(t,e,n,r,i,o,u,h,m){if(pFe.apply(this,arguments),BP){if(BP){var v=qL;BP=!1,qL=null}else throw Error($t(198));YL||(YL=!0,O9=v)}}function W0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function y1e(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Eve(t){if(W0(t)!==t)throw Error($t(188))}function mFe(t){var e=t.alternate;if(!e){if(e=W0(t),e===null)throw Error($t(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Eve(i),t;if(o===r)return Eve(i),e;o=o.sibling}throw Error($t(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,h=i.child;h;){if(h===n){u=!0,n=i,r=o;break}if(h===r){u=!0,r=i,n=o;break}h=h.sibling}if(!u){for(h=o.child;h;){if(h===n){u=!0,n=o,r=i;break}if(h===r){u=!0,r=o,n=i;break}h=h.sibling}if(!u)throw Error($t(189))}}if(n.alternate!==r)throw Error($t(190))}if(n.tag!==3)throw Error($t(188));return n.stateNode.current===n?t:e}function b1e(t){return t=mFe(t),t!==null?_1e(t):null}function _1e(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_1e(t);if(e!==null)return e;t=t.sibling}return null}var w1e=El.unstable_scheduleCallback,Cve=El.unstable_cancelCallback,gFe=El.unstable_shouldYield,vFe=El.unstable_requestPaint,ys=El.unstable_now,yFe=El.unstable_getCurrentPriorityLevel,g$=El.unstable_ImmediatePriority,x1e=El.unstable_UserBlockingPriority,ZL=El.unstable_NormalPriority,bFe=El.unstable_LowPriority,S1e=El.unstable_IdlePriority,QN=null,Td=null;function _Fe(t){if(Td&&typeof Td.onCommitFiberRoot=="function")try{Td.onCommitFiberRoot(QN,t,void 0,(t.current.flags&128)===128)}catch{}}var wc=Math.clz32?Math.clz32:SFe,wFe=Math.log,xFe=Math.LN2;function SFe(t){return t>>>=0,t===0?32:31-(wFe(t)/xFe|0)|0}var T3=64,M3=4194304;function DP(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function QL(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,u=n&268435455;if(u!==0){var h=u&~i;h!==0?r=DP(h):(o&=u,o!==0&&(r=DP(o)))}else u=n&~i,u!==0?r=DP(u):o!==0&&(r=DP(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wc(e),i=1<<n,r|=t[n],e&=~i;return r}function EFe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CFe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var u=31-wc(o),h=1<<u,m=i[u];m===-1?(!(h&n)||h&r)&&(i[u]=EFe(h,e)):m<=e&&(t.expiredLanes|=h),o&=~h}}function L9(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E1e(){var t=T3;return T3<<=1,!(T3&4194240)&&(T3=64),t}function PH(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $T(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wc(e),t[e]=n}function PFe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wc(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function v$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ei=0;function C1e(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P1e,y$,T1e,M1e,k1e,N9=!1,k3=[],Im=null,Rm=null,Dm=null,sT=new Map,oT=new Map,Sm=[],TFe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pve(t,e){switch(t){case"focusin":case"focusout":Im=null;break;case"dragenter":case"dragleave":Rm=null;break;case"mouseover":case"mouseout":Dm=null;break;case"pointerover":case"pointerout":sT.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oT.delete(e.pointerId)}}function lP(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=XT(e),e!==null&&y$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MFe(t,e,n,r,i){switch(e){case"focusin":return Im=lP(Im,t,e,n,r,i),!0;case"dragenter":return Rm=lP(Rm,t,e,n,r,i),!0;case"mouseover":return Dm=lP(Dm,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return sT.set(o,lP(sT.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,oT.set(o,lP(oT.get(o)||null,t,e,n,r,i)),!0}return!1}function A1e(t){var e=v0(t.target);if(e!==null){var n=W0(e);if(n!==null){if(e=n.tag,e===13){if(e=y1e(n),e!==null){t.blockedOn=e,k1e(t.priority,function(){T1e(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ML(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=F9(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);I9=r,n.target.dispatchEvent(r),I9=null}else return e=XT(n),e!==null&&y$(e),t.blockedOn=n,!1;e.shift()}return!0}function Tve(t,e,n){ML(t)&&n.delete(e)}function kFe(){N9=!1,Im!==null&&ML(Im)&&(Im=null),Rm!==null&&ML(Rm)&&(Rm=null),Dm!==null&&ML(Dm)&&(Dm=null),sT.forEach(Tve),oT.forEach(Tve)}function uP(t,e){t.blockedOn===e&&(t.blockedOn=null,N9||(N9=!0,El.unstable_scheduleCallback(El.unstable_NormalPriority,kFe)))}function aT(t){function e(i){return uP(i,t)}if(0<k3.length){uP(k3[0],t);for(var n=1;n<k3.length;n++){var r=k3[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Im!==null&&uP(Im,t),Rm!==null&&uP(Rm,t),Dm!==null&&uP(Dm,t),sT.forEach(e),oT.forEach(e),n=0;n<Sm.length;n++)r=Sm[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sm.length&&(n=Sm[0],n.blockedOn===null);)A1e(n),n.blockedOn===null&&Sm.shift()}var Lw=xp.ReactCurrentBatchConfig,JL=!0;function AFe(t,e,n,r){var i=ei,o=Lw.transition;Lw.transition=null;try{ei=1,b$(t,e,n,r)}finally{ei=i,Lw.transition=o}}function IFe(t,e,n,r){var i=ei,o=Lw.transition;Lw.transition=null;try{ei=4,b$(t,e,n,r)}finally{ei=i,Lw.transition=o}}function b$(t,e,n,r){if(JL){var i=F9(t,e,n,r);if(i===null)NH(t,e,r,eN,n),Pve(t,r);else if(MFe(i,t,e,n,r))r.stopPropagation();else if(Pve(t,r),e&4&&-1<TFe.indexOf(t)){for(;i!==null;){var o=XT(i);if(o!==null&&P1e(o),o=F9(t,e,n,r),o===null&&NH(t,e,r,eN,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else NH(t,e,r,null,n)}}var eN=null;function F9(t,e,n,r){if(eN=null,t=m$(r),t=v0(t),t!==null)if(e=W0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=y1e(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eN=t,null}function I1e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yFe()){case g$:return 1;case x1e:return 4;case ZL:case bFe:return 16;case S1e:return 536870912;default:return 16}default:return 16}}var Pm=null,_$=null,kL=null;function R1e(){if(kL)return kL;var t,e=_$,n=e.length,r,i="value"in Pm?Pm.value:Pm.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===i[o-r];r++);return kL=i.slice(t,1<r?1-r:void 0)}function AL(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function A3(){return!0}function Mve(){return!1}function Ml(t){function e(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?A3:Mve,this.isPropagationStopped=Mve,this}return qi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=A3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=A3)},persist:function(){},isPersistent:A3}),e}var a1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w$=Ml(a1),KT=qi({},a1,{view:0,detail:0}),RFe=Ml(KT),TH,MH,cP,JN=qi({},KT,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cP&&(cP&&t.type==="mousemove"?(TH=t.screenX-cP.screenX,MH=t.screenY-cP.screenY):MH=TH=0,cP=t),TH)},movementY:function(t){return"movementY"in t?t.movementY:MH}}),kve=Ml(JN),DFe=qi({},JN,{dataTransfer:0}),OFe=Ml(DFe),LFe=qi({},KT,{relatedTarget:0}),kH=Ml(LFe),NFe=qi({},a1,{animationName:0,elapsedTime:0,pseudoElement:0}),FFe=Ml(NFe),BFe=qi({},a1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UFe=Ml(BFe),zFe=qi({},a1,{data:0}),Ave=Ml(zFe),VFe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jFe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HFe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GFe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HFe[t])?!!e[t]:!1}function x$(){return GFe}var WFe=qi({},KT,{key:function(t){if(t.key){var e=VFe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=AL(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jFe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x$,charCode:function(t){return t.type==="keypress"?AL(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?AL(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$Fe=Ml(WFe),KFe=qi({},JN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ive=Ml(KFe),XFe=qi({},KT,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x$}),qFe=Ml(XFe),YFe=qi({},a1,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZFe=Ml(YFe),QFe=qi({},JN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JFe=Ml(QFe),eBe=[9,13,27,32],S$=hp&&"CompositionEvent"in window,UP=null;hp&&"documentMode"in document&&(UP=document.documentMode);var tBe=hp&&"TextEvent"in window&&!UP,D1e=hp&&(!S$||UP&&8<UP&&11>=UP),Rve=String.fromCharCode(32),Dve=!1;function O1e(t,e){switch(t){case"keyup":return eBe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L1e(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pw=!1;function nBe(t,e){switch(t){case"compositionend":return L1e(e);case"keypress":return e.which!==32?null:(Dve=!0,Rve);case"textInput":return t=e.data,t===Rve&&Dve?null:t;default:return null}}function rBe(t,e){if(pw)return t==="compositionend"||!S$&&O1e(t,e)?(t=R1e(),kL=_$=Pm=null,pw=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D1e&&e.locale!=="ko"?null:e.data;default:return null}}var iBe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ove(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iBe[t.type]:e==="textarea"}function N1e(t,e,n,r){p1e(r),e=tN(e,"onChange"),0<e.length&&(n=new w$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zP=null,lT=null;function sBe(t){K1e(t,0)}function eF(t){var e=gw(t);if(o1e(e))return t}function oBe(t,e){if(t==="change")return e}var F1e=!1;if(hp){var AH;if(hp){var IH="oninput"in document;if(!IH){var Lve=document.createElement("div");Lve.setAttribute("oninput","return;"),IH=typeof Lve.oninput=="function"}AH=IH}else AH=!1;F1e=AH&&(!document.documentMode||9<document.documentMode)}function Nve(){zP&&(zP.detachEvent("onpropertychange",B1e),lT=zP=null)}function B1e(t){if(t.propertyName==="value"&&eF(lT)){var e=[];N1e(e,lT,t,m$(t)),v1e(sBe,e)}}function aBe(t,e,n){t==="focusin"?(Nve(),zP=e,lT=n,zP.attachEvent("onpropertychange",B1e)):t==="focusout"&&Nve()}function lBe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eF(lT)}function uBe(t,e){if(t==="click")return eF(e)}function cBe(t,e){if(t==="input"||t==="change")return eF(e)}function dBe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ec=typeof Object.is=="function"?Object.is:dBe;function uT(t,e){if(Ec(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!b9.call(e,i)||!Ec(t[i],e[i]))return!1}return!0}function Fve(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bve(t,e){var n=Fve(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fve(n)}}function U1e(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?U1e(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function z1e(){for(var t=window,e=XL();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=XL(t.document)}return e}function E$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hBe(t){var e=z1e(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&U1e(n.ownerDocument.documentElement,n)){if(r!==null&&E$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Bve(n,o);var u=Bve(n,r);i&&u&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pBe=hp&&"documentMode"in document&&11>=document.documentMode,fw=null,B9=null,VP=null,U9=!1;function Uve(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;U9||fw==null||fw!==XL(r)||(r=fw,"selectionStart"in r&&E$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),VP&&uT(VP,r)||(VP=r,r=tN(B9,"onSelect"),0<r.length&&(e=new w$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fw)))}function I3(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mw={animationend:I3("Animation","AnimationEnd"),animationiteration:I3("Animation","AnimationIteration"),animationstart:I3("Animation","AnimationStart"),transitionend:I3("Transition","TransitionEnd")},RH={},V1e={};hp&&(V1e=document.createElement("div").style,"AnimationEvent"in window||(delete mw.animationend.animation,delete mw.animationiteration.animation,delete mw.animationstart.animation),"TransitionEvent"in window||delete mw.transitionend.transition);function tF(t){if(RH[t])return RH[t];if(!mw[t])return t;var e=mw[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in V1e)return RH[t]=e[n];return t}var j1e=tF("animationend"),H1e=tF("animationiteration"),G1e=tF("animationstart"),W1e=tF("transitionend"),$1e=new Map,zve="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qm(t,e){$1e.set(t,e),G0(e,[t])}for(var DH=0;DH<zve.length;DH++){var OH=zve[DH],fBe=OH.toLowerCase(),mBe=OH[0].toUpperCase()+OH.slice(1);Qm(fBe,"on"+mBe)}Qm(j1e,"onAnimationEnd");Qm(H1e,"onAnimationIteration");Qm(G1e,"onAnimationStart");Qm("dblclick","onDoubleClick");Qm("focusin","onFocus");Qm("focusout","onBlur");Qm(W1e,"onTransitionEnd");Ww("onMouseEnter",["mouseout","mouseover"]);Ww("onMouseLeave",["mouseout","mouseover"]);Ww("onPointerEnter",["pointerout","pointerover"]);Ww("onPointerLeave",["pointerout","pointerover"]);G0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));G0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));G0("onBeforeInput",["compositionend","keypress","textInput","paste"]);G0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));G0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));G0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var OP="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gBe=new Set("cancel close invalid load scroll toggle".split(" ").concat(OP));function Vve(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fFe(r,e,void 0,t),t.currentTarget=null}function K1e(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var u=r.length-1;0<=u;u--){var h=r[u],m=h.instance,v=h.currentTarget;if(h=h.listener,m!==o&&i.isPropagationStopped())break e;Vve(i,h,v),o=m}else for(u=0;u<r.length;u++){if(h=r[u],m=h.instance,v=h.currentTarget,h=h.listener,m!==o&&i.isPropagationStopped())break e;Vve(i,h,v),o=m}}}if(YL)throw t=O9,YL=!1,O9=null,t}function Ci(t,e){var n=e[G9];n===void 0&&(n=e[G9]=new Set);var r=t+"__bubble";n.has(r)||(X1e(e,t,2,!1),n.add(r))}function LH(t,e,n){var r=0;e&&(r|=4),X1e(n,t,r,e)}var R3="_reactListening"+Math.random().toString(36).slice(2);function cT(t){if(!t[R3]){t[R3]=!0,t1e.forEach(function(n){n!=="selectionchange"&&(gBe.has(n)||LH(n,!1,t),LH(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[R3]||(e[R3]=!0,LH("selectionchange",!1,e))}}function X1e(t,e,n,r){switch(I1e(e)){case 1:var i=AFe;break;case 4:i=IFe;break;default:i=b$}n=i.bind(null,e,n,t),i=void 0,!D9||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function NH(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;u=u.return}for(;h!==null;){if(u=v0(h),u===null)return;if(m=u.tag,m===5||m===6){r=o=u;continue e}h=h.parentNode}}r=r.return}v1e(function(){var v=o,x=m$(n),E=[];e:{var k=$1e.get(t);if(k!==void 0){var D=w$,G=t;switch(t){case"keypress":if(AL(n)===0)break e;case"keydown":case"keyup":D=$Fe;break;case"focusin":G="focus",D=kH;break;case"focusout":G="blur",D=kH;break;case"beforeblur":case"afterblur":D=kH;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=kve;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=OFe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=qFe;break;case j1e:case H1e:case G1e:D=FFe;break;case W1e:D=ZFe;break;case"scroll":D=RFe;break;case"wheel":D=JFe;break;case"copy":case"cut":case"paste":D=UFe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Ive}var N=(e&4)!==0,z=!N&&t==="scroll",U=N?k!==null?k+"Capture":null:k;N=[];for(var P=v,$;P!==null;){$=P;var Q=$.stateNode;if($.tag===5&&Q!==null&&($=Q,U!==null&&(Q=iT(P,U),Q!=null&&N.push(dT(P,Q,$)))),z)break;P=P.return}0<N.length&&(k=new D(k,G,null,n,x),E.push({event:k,listeners:N}))}}if(!(e&7)){e:{if(k=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",k&&n!==I9&&(G=n.relatedTarget||n.fromElement)&&(v0(G)||G[pp]))break e;if((D||k)&&(k=x.window===x?x:(k=x.ownerDocument)?k.defaultView||k.parentWindow:window,D?(G=n.relatedTarget||n.toElement,D=v,G=G?v0(G):null,G!==null&&(z=W0(G),G!==z||G.tag!==5&&G.tag!==6)&&(G=null)):(D=null,G=v),D!==G)){if(N=kve,Q="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(N=Ive,Q="onPointerLeave",U="onPointerEnter",P="pointer"),z=D==null?k:gw(D),$=G==null?k:gw(G),k=new N(Q,P+"leave",D,n,x),k.target=z,k.relatedTarget=$,Q=null,v0(x)===v&&(N=new N(U,P+"enter",G,n,x),N.target=$,N.relatedTarget=z,Q=N),z=Q,D&&G)t:{for(N=D,U=G,P=0,$=N;$;$=F_($))P++;for($=0,Q=U;Q;Q=F_(Q))$++;for(;0<P-$;)N=F_(N),P--;for(;0<$-P;)U=F_(U),$--;for(;P--;){if(N===U||U!==null&&N===U.alternate)break t;N=F_(N),U=F_(U)}N=null}else N=null;D!==null&&jve(E,k,D,N,!1),G!==null&&z!==null&&jve(E,z,G,N,!0)}}e:{if(k=v?gw(v):window,D=k.nodeName&&k.nodeName.toLowerCase(),D==="select"||D==="input"&&k.type==="file")var ye=oBe;else if(Ove(k))if(F1e)ye=cBe;else{ye=lBe;var q=aBe}else(D=k.nodeName)&&D.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(ye=uBe);if(ye&&(ye=ye(t,v))){N1e(E,ye,n,x);break e}q&&q(t,k,v),t==="focusout"&&(q=k._wrapperState)&&q.controlled&&k.type==="number"&&P9(k,"number",k.value)}switch(q=v?gw(v):window,t){case"focusin":(Ove(q)||q.contentEditable==="true")&&(fw=q,B9=v,VP=null);break;case"focusout":VP=B9=fw=null;break;case"mousedown":U9=!0;break;case"contextmenu":case"mouseup":case"dragend":U9=!1,Uve(E,n,x);break;case"selectionchange":if(pBe)break;case"keydown":case"keyup":Uve(E,n,x)}var ie;if(S$)e:{switch(t){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else pw?O1e(t,n)&&(pe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(pe="onCompositionStart");pe&&(D1e&&n.locale!=="ko"&&(pw||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&pw&&(ie=R1e()):(Pm=x,_$="value"in Pm?Pm.value:Pm.textContent,pw=!0)),q=tN(v,pe),0<q.length&&(pe=new Ave(pe,t,null,n,x),E.push({event:pe,listeners:q}),ie?pe.data=ie:(ie=L1e(n),ie!==null&&(pe.data=ie)))),(ie=tBe?nBe(t,n):rBe(t,n))&&(v=tN(v,"onBeforeInput"),0<v.length&&(x=new Ave("onBeforeInput","beforeinput",null,n,x),E.push({event:x,listeners:v}),x.data=ie))}K1e(E,e)})}function dT(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tN(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=iT(t,n),o!=null&&r.unshift(dT(t,o,i)),o=iT(t,e),o!=null&&r.push(dT(t,o,i))),t=t.return}return r}function F_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jve(t,e,n,r,i){for(var o=e._reactName,u=[];n!==null&&n!==r;){var h=n,m=h.alternate,v=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&v!==null&&(h=v,i?(m=iT(n,o),m!=null&&u.unshift(dT(n,m,h))):i||(m=iT(n,o),m!=null&&u.push(dT(n,m,h)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var vBe=/\r\n?/g,yBe=/\u0000|\uFFFD/g;function Hve(t){return(typeof t=="string"?t:""+t).replace(vBe,`
`).replace(yBe,"")}function D3(t,e,n){if(e=Hve(e),Hve(t)!==e&&n)throw Error($t(425))}function nN(){}var z9=null,V9=null;function j9(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var H9=typeof setTimeout=="function"?setTimeout:void 0,bBe=typeof clearTimeout=="function"?clearTimeout:void 0,Gve=typeof Promise=="function"?Promise:void 0,_Be=typeof queueMicrotask=="function"?queueMicrotask:typeof Gve<"u"?function(t){return Gve.resolve(null).then(t).catch(wBe)}:H9;function wBe(t){setTimeout(function(){throw t})}function FH(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),aT(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);aT(e)}function Om(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wve(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var l1=Math.random().toString(36).slice(2),Cd="__reactFiber$"+l1,hT="__reactProps$"+l1,pp="__reactContainer$"+l1,G9="__reactEvents$"+l1,xBe="__reactListeners$"+l1,SBe="__reactHandles$"+l1;function v0(t){var e=t[Cd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pp]||n[Cd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wve(t);t!==null;){if(n=t[Cd])return n;t=Wve(t)}return e}t=n,n=t.parentNode}return null}function XT(t){return t=t[Cd]||t[pp],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gw(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($t(33))}function nF(t){return t[hT]||null}var W9=[],vw=-1;function Jm(t){return{current:t}}function Ai(t){0>vw||(t.current=W9[vw],W9[vw]=null,vw--)}function mi(t,e){vw++,W9[vw]=t.current,t.current=e}var $m={},ta=Jm($m),Za=Jm(!1),M0=$m;function $w(t,e){var n=t.type.contextTypes;if(!n)return $m;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qa(t){return t=t.childContextTypes,t!=null}function rN(){Ai(Za),Ai(ta)}function $ve(t,e,n){if(ta.current!==$m)throw Error($t(168));mi(ta,e),mi(Za,n)}function q1e(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($t(108,aFe(t)||"Unknown",i));return qi({},n,r)}function iN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$m,M0=ta.current,mi(ta,t),mi(Za,Za.current),!0}function Kve(t,e,n){var r=t.stateNode;if(!r)throw Error($t(169));n?(t=q1e(t,e,M0),r.__reactInternalMemoizedMergedChildContext=t,Ai(Za),Ai(ta),mi(ta,t)):Ai(Za),mi(Za,n)}var Zh=null,rF=!1,BH=!1;function Y1e(t){Zh===null?Zh=[t]:Zh.push(t)}function EBe(t){rF=!0,Y1e(t)}function eg(){if(!BH&&Zh!==null){BH=!0;var t=0,e=ei;try{var n=Zh;for(ei=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zh=null,rF=!1}catch(i){throw Zh!==null&&(Zh=Zh.slice(t+1)),w1e(g$,eg),i}finally{ei=e,BH=!1}}return null}var yw=[],bw=0,sN=null,oN=0,du=[],hu=0,k0=null,Qh=1,Jh="";function c0(t,e){yw[bw++]=oN,yw[bw++]=sN,sN=t,oN=e}function Z1e(t,e,n){du[hu++]=Qh,du[hu++]=Jh,du[hu++]=k0,k0=t;var r=Qh;t=Jh;var i=32-wc(r)-1;r&=~(1<<i),n+=1;var o=32-wc(e)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Qh=1<<32-wc(e)+i|n<<i|r,Jh=o+t}else Qh=1<<o|n<<i|r,Jh=t}function C$(t){t.return!==null&&(c0(t,1),Z1e(t,1,0))}function P$(t){for(;t===sN;)sN=yw[--bw],yw[bw]=null,oN=yw[--bw],yw[bw]=null;for(;t===k0;)k0=du[--hu],du[hu]=null,Jh=du[--hu],du[hu]=null,Qh=du[--hu],du[hu]=null}var wl=null,_l=null,Ri=!1,bc=null;function Q1e(t,e){var n=gu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xve(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wl=t,_l=Om(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wl=t,_l=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=k0!==null?{id:Qh,overflow:Jh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gu(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wl=t,_l=null,!0):!1;default:return!1}}function $9(t){return(t.mode&1)!==0&&(t.flags&128)===0}function K9(t){if(Ri){var e=_l;if(e){var n=e;if(!Xve(t,e)){if($9(t))throw Error($t(418));e=Om(n.nextSibling);var r=wl;e&&Xve(t,e)?Q1e(r,n):(t.flags=t.flags&-4097|2,Ri=!1,wl=t)}}else{if($9(t))throw Error($t(418));t.flags=t.flags&-4097|2,Ri=!1,wl=t}}}function qve(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wl=t}function O3(t){if(t!==wl)return!1;if(!Ri)return qve(t),Ri=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!j9(t.type,t.memoizedProps)),e&&(e=_l)){if($9(t))throw J1e(),Error($t(418));for(;e;)Q1e(t,e),e=Om(e.nextSibling)}if(qve(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($t(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_l=Om(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_l=null}}else _l=wl?Om(t.stateNode.nextSibling):null;return!0}function J1e(){for(var t=_l;t;)t=Om(t.nextSibling)}function Kw(){_l=wl=null,Ri=!1}function T$(t){bc===null?bc=[t]:bc.push(t)}var CBe=xp.ReactCurrentBatchConfig;function vc(t,e){if(t&&t.defaultProps){e=qi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var aN=Jm(null),lN=null,_w=null,M$=null;function k$(){M$=_w=lN=null}function A$(t){var e=aN.current;Ai(aN),t._currentValue=e}function X9(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Nw(t,e){lN=t,M$=_w=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xa=!0),t.firstContext=null)}function wu(t){var e=t._currentValue;if(M$!==t)if(t={context:t,memoizedValue:e,next:null},_w===null){if(lN===null)throw Error($t(308));_w=t,lN.dependencies={lanes:0,firstContext:t}}else _w=_w.next=t;return e}var y0=null;function I$(t){y0===null?y0=[t]:y0.push(t)}function exe(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,I$(e)):(n.next=i.next,i.next=n),e.interleaved=n,fp(t,r)}function fp(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _m=!1;function R$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function txe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ap(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lm(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Or&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fp(t,n)}return i=r.interleaved,i===null?(e.next=e,I$(r)):(e.next=i.next,i.next=e),r.interleaved=e,fp(t,n)}function IL(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,v$(t,n)}}function Yve(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uN(t,e,n,r){var i=t.updateQueue;_m=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var m=h,v=m.next;m.next=null,u===null?o=v:u.next=v,u=m;var x=t.alternate;x!==null&&(x=x.updateQueue,h=x.lastBaseUpdate,h!==u&&(h===null?x.firstBaseUpdate=v:h.next=v,x.lastBaseUpdate=m))}if(o!==null){var E=i.baseState;u=0,x=v=m=null,h=o;do{var k=h.lane,D=h.eventTime;if((r&k)===k){x!==null&&(x=x.next={eventTime:D,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var G=t,N=h;switch(k=e,D=n,N.tag){case 1:if(G=N.payload,typeof G=="function"){E=G.call(D,E,k);break e}E=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=N.payload,k=typeof G=="function"?G.call(D,E,k):G,k==null)break e;E=qi({},E,k);break e;case 2:_m=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,k=i.effects,k===null?i.effects=[h]:k.push(h))}else D={eventTime:D,lane:k,tag:h.tag,payload:h.payload,callback:h.callback,next:null},x===null?(v=x=D,m=E):x=x.next=D,u|=k;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;k=h,h=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(1);if(x===null&&(m=E),i.baseState=m,i.firstBaseUpdate=v,i.lastBaseUpdate=x,e=i.shared.interleaved,e!==null){i=e;do u|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);I0|=u,t.lanes=u,t.memoizedState=E}}function Zve(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($t(191,i));i.call(r)}}}var nxe=new e1e.Component().refs;function q9(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iF={isMounted:function(t){return(t=t._reactInternals)?W0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ca(),i=Fm(t),o=ap(r,i);o.payload=e,n!=null&&(o.callback=n),e=Lm(t,o,i),e!==null&&(xc(e,t,i,r),IL(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ca(),i=Fm(t),o=ap(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Lm(t,o,i),e!==null&&(xc(e,t,i,r),IL(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ca(),r=Fm(t),i=ap(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lm(t,i,r),e!==null&&(xc(e,t,r,n),IL(e,t,r))}};function Qve(t,e,n,r,i,o,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,u):e.prototype&&e.prototype.isPureReactComponent?!uT(n,r)||!uT(i,o):!0}function rxe(t,e,n){var r=!1,i=$m,o=e.contextType;return typeof o=="object"&&o!==null?o=wu(o):(i=Qa(e)?M0:ta.current,r=e.contextTypes,o=(r=r!=null)?$w(t,i):$m),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iF,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Jve(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&iF.enqueueReplaceState(e,e.state,null)}function Y9(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=nxe,R$(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=wu(o):(o=Qa(e)?M0:ta.current,i.context=$w(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(q9(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&iF.enqueueReplaceState(i,i.state,null),uN(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dP(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($t(309));var r=n.stateNode}if(!r)throw Error($t(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(u){var h=i.refs;h===nxe&&(h=i.refs={}),u===null?delete h[o]:h[o]=u},e._stringRef=o,e)}if(typeof t!="string")throw Error($t(284));if(!n._owner)throw Error($t(290,t))}return t}function L3(t,e){throw t=Object.prototype.toString.call(e),Error($t(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e0e(t){var e=t._init;return e(t._payload)}function ixe(t){function e(U,P){if(t){var $=U.deletions;$===null?(U.deletions=[P],U.flags|=16):$.push(P)}}function n(U,P){if(!t)return null;for(;P!==null;)e(U,P),P=P.sibling;return null}function r(U,P){for(U=new Map;P!==null;)P.key!==null?U.set(P.key,P):U.set(P.index,P),P=P.sibling;return U}function i(U,P){return U=Bm(U,P),U.index=0,U.sibling=null,U}function o(U,P,$){return U.index=$,t?($=U.alternate,$!==null?($=$.index,$<P?(U.flags|=2,P):$):(U.flags|=2,P)):(U.flags|=1048576,P)}function u(U){return t&&U.alternate===null&&(U.flags|=2),U}function h(U,P,$,Q){return P===null||P.tag!==6?(P=WH($,U.mode,Q),P.return=U,P):(P=i(P,$),P.return=U,P)}function m(U,P,$,Q){var ye=$.type;return ye===hw?x(U,P,$.props.children,Q,$.key):P!==null&&(P.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===bm&&e0e(ye)===P.type)?(Q=i(P,$.props),Q.ref=dP(U,P,$),Q.return=U,Q):(Q=FL($.type,$.key,$.props,null,U.mode,Q),Q.ref=dP(U,P,$),Q.return=U,Q)}function v(U,P,$,Q){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=$H($,U.mode,Q),P.return=U,P):(P=i(P,$.children||[]),P.return=U,P)}function x(U,P,$,Q,ye){return P===null||P.tag!==7?(P=S0($,U.mode,Q,ye),P.return=U,P):(P=i(P,$),P.return=U,P)}function E(U,P,$){if(typeof P=="string"&&P!==""||typeof P=="number")return P=WH(""+P,U.mode,$),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case E3:return $=FL(P.type,P.key,P.props,null,U.mode,$),$.ref=dP(U,null,P),$.return=U,$;case dw:return P=$H(P,U.mode,$),P.return=U,P;case bm:var Q=P._init;return E(U,Q(P._payload),$)}if(RP(P)||oP(P))return P=S0(P,U.mode,$,null),P.return=U,P;L3(U,P)}return null}function k(U,P,$,Q){var ye=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ye!==null?null:h(U,P,""+$,Q);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E3:return $.key===ye?m(U,P,$,Q):null;case dw:return $.key===ye?v(U,P,$,Q):null;case bm:return ye=$._init,k(U,P,ye($._payload),Q)}if(RP($)||oP($))return ye!==null?null:x(U,P,$,Q,null);L3(U,$)}return null}function D(U,P,$,Q,ye){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return U=U.get($)||null,h(P,U,""+Q,ye);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case E3:return U=U.get(Q.key===null?$:Q.key)||null,m(P,U,Q,ye);case dw:return U=U.get(Q.key===null?$:Q.key)||null,v(P,U,Q,ye);case bm:var q=Q._init;return D(U,P,$,q(Q._payload),ye)}if(RP(Q)||oP(Q))return U=U.get($)||null,x(P,U,Q,ye,null);L3(P,Q)}return null}function G(U,P,$,Q){for(var ye=null,q=null,ie=P,pe=P=0,W=null;ie!==null&&pe<$.length;pe++){ie.index>pe?(W=ie,ie=null):W=ie.sibling;var he=k(U,ie,$[pe],Q);if(he===null){ie===null&&(ie=W);break}t&&ie&&he.alternate===null&&e(U,ie),P=o(he,P,pe),q===null?ye=he:q.sibling=he,q=he,ie=W}if(pe===$.length)return n(U,ie),Ri&&c0(U,pe),ye;if(ie===null){for(;pe<$.length;pe++)ie=E(U,$[pe],Q),ie!==null&&(P=o(ie,P,pe),q===null?ye=ie:q.sibling=ie,q=ie);return Ri&&c0(U,pe),ye}for(ie=r(U,ie);pe<$.length;pe++)W=D(ie,U,pe,$[pe],Q),W!==null&&(t&&W.alternate!==null&&ie.delete(W.key===null?pe:W.key),P=o(W,P,pe),q===null?ye=W:q.sibling=W,q=W);return t&&ie.forEach(function(Ye){return e(U,Ye)}),Ri&&c0(U,pe),ye}function N(U,P,$,Q){var ye=oP($);if(typeof ye!="function")throw Error($t(150));if($=ye.call($),$==null)throw Error($t(151));for(var q=ye=null,ie=P,pe=P=0,W=null,he=$.next();ie!==null&&!he.done;pe++,he=$.next()){ie.index>pe?(W=ie,ie=null):W=ie.sibling;var Ye=k(U,ie,he.value,Q);if(Ye===null){ie===null&&(ie=W);break}t&&ie&&Ye.alternate===null&&e(U,ie),P=o(Ye,P,pe),q===null?ye=Ye:q.sibling=Ye,q=Ye,ie=W}if(he.done)return n(U,ie),Ri&&c0(U,pe),ye;if(ie===null){for(;!he.done;pe++,he=$.next())he=E(U,he.value,Q),he!==null&&(P=o(he,P,pe),q===null?ye=he:q.sibling=he,q=he);return Ri&&c0(U,pe),ye}for(ie=r(U,ie);!he.done;pe++,he=$.next())he=D(ie,U,pe,he.value,Q),he!==null&&(t&&he.alternate!==null&&ie.delete(he.key===null?pe:he.key),P=o(he,P,pe),q===null?ye=he:q.sibling=he,q=he);return t&&ie.forEach(function(at){return e(U,at)}),Ri&&c0(U,pe),ye}function z(U,P,$,Q){if(typeof $=="object"&&$!==null&&$.type===hw&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case E3:e:{for(var ye=$.key,q=P;q!==null;){if(q.key===ye){if(ye=$.type,ye===hw){if(q.tag===7){n(U,q.sibling),P=i(q,$.props.children),P.return=U,U=P;break e}}else if(q.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===bm&&e0e(ye)===q.type){n(U,q.sibling),P=i(q,$.props),P.ref=dP(U,q,$),P.return=U,U=P;break e}n(U,q);break}else e(U,q);q=q.sibling}$.type===hw?(P=S0($.props.children,U.mode,Q,$.key),P.return=U,U=P):(Q=FL($.type,$.key,$.props,null,U.mode,Q),Q.ref=dP(U,P,$),Q.return=U,U=Q)}return u(U);case dw:e:{for(q=$.key;P!==null;){if(P.key===q)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){n(U,P.sibling),P=i(P,$.children||[]),P.return=U,U=P;break e}else{n(U,P);break}else e(U,P);P=P.sibling}P=$H($,U.mode,Q),P.return=U,U=P}return u(U);case bm:return q=$._init,z(U,P,q($._payload),Q)}if(RP($))return G(U,P,$,Q);if(oP($))return N(U,P,$,Q);L3(U,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,P!==null&&P.tag===6?(n(U,P.sibling),P=i(P,$),P.return=U,U=P):(n(U,P),P=WH($,U.mode,Q),P.return=U,U=P),u(U)):n(U,P)}return z}var Xw=ixe(!0),sxe=ixe(!1),qT={},Md=Jm(qT),pT=Jm(qT),fT=Jm(qT);function b0(t){if(t===qT)throw Error($t(174));return t}function D$(t,e){switch(mi(fT,e),mi(pT,t),mi(Md,qT),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:M9(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=M9(e,t)}Ai(Md),mi(Md,e)}function qw(){Ai(Md),Ai(pT),Ai(fT)}function oxe(t){b0(fT.current);var e=b0(Md.current),n=M9(e,t.type);e!==n&&(mi(pT,t),mi(Md,n))}function O$(t){pT.current===t&&(Ai(Md),Ai(pT))}var Wi=Jm(0);function cN(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var UH=[];function L$(){for(var t=0;t<UH.length;t++)UH[t]._workInProgressVersionPrimary=null;UH.length=0}var RL=xp.ReactCurrentDispatcher,zH=xp.ReactCurrentBatchConfig,A0=0,Xi=null,Fs=null,eo=null,dN=!1,jP=!1,mT=0,PBe=0;function jo(){throw Error($t(321))}function N$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ec(t[n],e[n]))return!1;return!0}function F$(t,e,n,r,i,o){if(A0=o,Xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,RL.current=t===null||t.memoizedState===null?ABe:IBe,t=n(r,i),jP){o=0;do{if(jP=!1,mT=0,25<=o)throw Error($t(301));o+=1,eo=Fs=null,e.updateQueue=null,RL.current=RBe,t=n(r,i)}while(jP)}if(RL.current=hN,e=Fs!==null&&Fs.next!==null,A0=0,eo=Fs=Xi=null,dN=!1,e)throw Error($t(300));return t}function B$(){var t=mT!==0;return mT=0,t}function xd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return eo===null?Xi.memoizedState=eo=t:eo=eo.next=t,eo}function xu(){if(Fs===null){var t=Xi.alternate;t=t!==null?t.memoizedState:null}else t=Fs.next;var e=eo===null?Xi.memoizedState:eo.next;if(e!==null)eo=e,Fs=t;else{if(t===null)throw Error($t(310));Fs=t,t={memoizedState:Fs.memoizedState,baseState:Fs.baseState,baseQueue:Fs.baseQueue,queue:Fs.queue,next:null},eo===null?Xi.memoizedState=eo=t:eo=eo.next=t}return eo}function gT(t,e){return typeof e=="function"?e(t):e}function VH(t){var e=xu(),n=e.queue;if(n===null)throw Error($t(311));n.lastRenderedReducer=t;var r=Fs,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var h=u=null,m=null,v=o;do{var x=v.lane;if((A0&x)===x)m!==null&&(m=m.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:t(r,v.action);else{var E={lane:x,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};m===null?(h=m=E,u=r):m=m.next=E,Xi.lanes|=x,I0|=x}v=v.next}while(v!==null&&v!==o);m===null?u=r:m.next=h,Ec(r,e.memoizedState)||(Xa=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=m,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Xi.lanes|=o,I0|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jH(t){var e=xu(),n=e.queue;if(n===null)throw Error($t(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=t(o,u.action),u=u.next;while(u!==i);Ec(o,e.memoizedState)||(Xa=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function axe(){}function lxe(t,e){var n=Xi,r=xu(),i=e(),o=!Ec(r.memoizedState,i);if(o&&(r.memoizedState=i,Xa=!0),r=r.queue,U$(dxe.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||eo!==null&&eo.memoizedState.tag&1){if(n.flags|=2048,vT(9,cxe.bind(null,n,r,i,e),void 0,null),io===null)throw Error($t(349));A0&30||uxe(n,e,i)}return i}function uxe(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xi.updateQueue,e===null?(e={lastEffect:null,stores:null},Xi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cxe(t,e,n,r){e.value=n,e.getSnapshot=r,hxe(e)&&pxe(t)}function dxe(t,e,n){return n(function(){hxe(e)&&pxe(t)})}function hxe(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ec(t,n)}catch{return!0}}function pxe(t){var e=fp(t,1);e!==null&&xc(e,t,1,-1)}function t0e(t){var e=xd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gT,lastRenderedState:t},e.queue=t,t=t.dispatch=kBe.bind(null,Xi,t),[e.memoizedState,t]}function vT(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xi.updateQueue,e===null?(e={lastEffect:null,stores:null},Xi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fxe(){return xu().memoizedState}function DL(t,e,n,r){var i=xd();Xi.flags|=t,i.memoizedState=vT(1|e,n,void 0,r===void 0?null:r)}function sF(t,e,n,r){var i=xu();r=r===void 0?null:r;var o=void 0;if(Fs!==null){var u=Fs.memoizedState;if(o=u.destroy,r!==null&&N$(r,u.deps)){i.memoizedState=vT(e,n,o,r);return}}Xi.flags|=t,i.memoizedState=vT(1|e,n,o,r)}function n0e(t,e){return DL(8390656,8,t,e)}function U$(t,e){return sF(2048,8,t,e)}function mxe(t,e){return sF(4,2,t,e)}function gxe(t,e){return sF(4,4,t,e)}function vxe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yxe(t,e,n){return n=n!=null?n.concat([t]):null,sF(4,4,vxe.bind(null,e,t),n)}function z$(){}function bxe(t,e){var n=xu();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _xe(t,e){var n=xu();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wxe(t,e,n){return A0&21?(Ec(n,e)||(n=E1e(),Xi.lanes|=n,I0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xa=!0),t.memoizedState=n)}function TBe(t,e){var n=ei;ei=n!==0&&4>n?n:4,t(!0);var r=zH.transition;zH.transition={};try{t(!1),e()}finally{ei=n,zH.transition=r}}function xxe(){return xu().memoizedState}function MBe(t,e,n){var r=Fm(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sxe(t))Exe(e,n);else if(n=exe(t,e,n,r),n!==null){var i=Ca();xc(n,t,r,i),Cxe(n,e,r)}}function kBe(t,e,n){var r=Fm(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sxe(t))Exe(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var u=e.lastRenderedState,h=o(u,n);if(i.hasEagerState=!0,i.eagerState=h,Ec(h,u)){var m=e.interleaved;m===null?(i.next=i,I$(e)):(i.next=m.next,m.next=i),e.interleaved=i;return}}catch{}finally{}n=exe(t,e,i,r),n!==null&&(i=Ca(),xc(n,t,r,i),Cxe(n,e,r))}}function Sxe(t){var e=t.alternate;return t===Xi||e!==null&&e===Xi}function Exe(t,e){jP=dN=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cxe(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,v$(t,n)}}var hN={readContext:wu,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useInsertionEffect:jo,useLayoutEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useMutableSource:jo,useSyncExternalStore:jo,useId:jo,unstable_isNewReconciler:!1},ABe={readContext:wu,useCallback:function(t,e){return xd().memoizedState=[t,e===void 0?null:e],t},useContext:wu,useEffect:n0e,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,DL(4194308,4,vxe.bind(null,e,t),n)},useLayoutEffect:function(t,e){return DL(4194308,4,t,e)},useInsertionEffect:function(t,e){return DL(4,2,t,e)},useMemo:function(t,e){var n=xd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xd();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MBe.bind(null,Xi,t),[r.memoizedState,t]},useRef:function(t){var e=xd();return t={current:t},e.memoizedState=t},useState:t0e,useDebugValue:z$,useDeferredValue:function(t){return xd().memoizedState=t},useTransition:function(){var t=t0e(!1),e=t[0];return t=TBe.bind(null,t[1]),xd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xi,i=xd();if(Ri){if(n===void 0)throw Error($t(407));n=n()}else{if(n=e(),io===null)throw Error($t(349));A0&30||uxe(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,n0e(dxe.bind(null,r,o,t),[t]),r.flags|=2048,vT(9,cxe.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=xd(),e=io.identifierPrefix;if(Ri){var n=Jh,r=Qh;n=(r&~(1<<32-wc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=mT++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PBe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IBe={readContext:wu,useCallback:bxe,useContext:wu,useEffect:U$,useImperativeHandle:yxe,useInsertionEffect:mxe,useLayoutEffect:gxe,useMemo:_xe,useReducer:VH,useRef:fxe,useState:function(){return VH(gT)},useDebugValue:z$,useDeferredValue:function(t){var e=xu();return wxe(e,Fs.memoizedState,t)},useTransition:function(){var t=VH(gT)[0],e=xu().memoizedState;return[t,e]},useMutableSource:axe,useSyncExternalStore:lxe,useId:xxe,unstable_isNewReconciler:!1},RBe={readContext:wu,useCallback:bxe,useContext:wu,useEffect:U$,useImperativeHandle:yxe,useInsertionEffect:mxe,useLayoutEffect:gxe,useMemo:_xe,useReducer:jH,useRef:fxe,useState:function(){return jH(gT)},useDebugValue:z$,useDeferredValue:function(t){var e=xu();return Fs===null?e.memoizedState=t:wxe(e,Fs.memoizedState,t)},useTransition:function(){var t=jH(gT)[0],e=xu().memoizedState;return[t,e]},useMutableSource:axe,useSyncExternalStore:lxe,useId:xxe,unstable_isNewReconciler:!1};function Yw(t,e){try{var n="",r=e;do n+=oFe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function HH(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Z9(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DBe=typeof WeakMap=="function"?WeakMap:Map;function Pxe(t,e,n){n=ap(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fN||(fN=!0,aW=r),Z9(t,e)},n}function Txe(t,e,n){n=ap(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Z9(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Z9(t,e),typeof r!="function"&&(Nm===null?Nm=new Set([this]):Nm.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function r0e(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DBe;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KBe.bind(null,t,e,n),e.then(t,t))}function i0e(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function s0e(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ap(-1,1),e.tag=2,Lm(n,e,1))),n.lanes|=1),t)}var OBe=xp.ReactCurrentOwner,Xa=!1;function xa(t,e,n,r){e.child=t===null?sxe(e,null,n,r):Xw(e,t.child,n,r)}function o0e(t,e,n,r,i){n=n.render;var o=e.ref;return Nw(e,i),r=F$(t,e,n,r,o,i),n=B$(),t!==null&&!Xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mp(t,e,i)):(Ri&&n&&C$(e),e.flags|=1,xa(t,e,r,i),e.child)}function a0e(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!X$(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Mxe(t,e,o,r,i)):(t=FL(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:uT,n(u,r)&&t.ref===e.ref)return mp(t,e,i)}return e.flags|=1,t=Bm(o,r),t.ref=e.ref,t.return=e,e.child=t}function Mxe(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(uT(o,r)&&t.ref===e.ref)if(Xa=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Xa=!0);else return e.lanes=t.lanes,mp(t,e,i)}return Q9(t,e,n,r,i)}function kxe(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(xw,yl),yl|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mi(xw,yl),yl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,mi(xw,yl),yl|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,mi(xw,yl),yl|=r;return xa(t,e,i,n),e.child}function Axe(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Q9(t,e,n,r,i){var o=Qa(n)?M0:ta.current;return o=$w(e,o),Nw(e,i),n=F$(t,e,n,r,o,i),r=B$(),t!==null&&!Xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mp(t,e,i)):(Ri&&r&&C$(e),e.flags|=1,xa(t,e,n,i),e.child)}function l0e(t,e,n,r,i){if(Qa(n)){var o=!0;iN(e)}else o=!1;if(Nw(e,i),e.stateNode===null)OL(t,e),rxe(e,n,r),Y9(e,n,r,i),r=!0;else if(t===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var m=u.context,v=n.contextType;typeof v=="object"&&v!==null?v=wu(v):(v=Qa(n)?M0:ta.current,v=$w(e,v));var x=n.getDerivedStateFromProps,E=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";E||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||m!==v)&&Jve(e,u,r,v),_m=!1;var k=e.memoizedState;u.state=k,uN(e,r,u,i),m=e.memoizedState,h!==r||k!==m||Za.current||_m?(typeof x=="function"&&(q9(e,n,x,r),m=e.memoizedState),(h=_m||Qve(e,n,h,r,k,m,v))?(E||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=m),u.props=r,u.state=m,u.context=v,r=h):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,txe(t,e),h=e.memoizedProps,v=e.type===e.elementType?h:vc(e.type,h),u.props=v,E=e.pendingProps,k=u.context,m=n.contextType,typeof m=="object"&&m!==null?m=wu(m):(m=Qa(n)?M0:ta.current,m=$w(e,m));var D=n.getDerivedStateFromProps;(x=typeof D=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==E||k!==m)&&Jve(e,u,r,m),_m=!1,k=e.memoizedState,u.state=k,uN(e,r,u,i);var G=e.memoizedState;h!==E||k!==G||Za.current||_m?(typeof D=="function"&&(q9(e,n,D,r),G=e.memoizedState),(v=_m||Qve(e,n,v,r,k,G,m)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,G,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,G,m)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&k===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&k===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=G),u.props=r,u.state=G,u.context=m,r=v):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&k===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&k===t.memoizedState||(e.flags|=1024),r=!1)}return J9(t,e,n,r,o,i)}function J9(t,e,n,r,i,o){Axe(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return i&&Kve(e,n,!1),mp(t,e,o);r=e.stateNode,OBe.current=e;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=Xw(e,t.child,null,o),e.child=Xw(e,null,h,o)):xa(t,e,h,o),e.memoizedState=r.state,i&&Kve(e,n,!0),e.child}function Ixe(t){var e=t.stateNode;e.pendingContext?$ve(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$ve(t,e.context,!1),D$(t,e.containerInfo)}function u0e(t,e,n,r,i){return Kw(),T$(i),e.flags|=256,xa(t,e,n,r),e.child}var eW={dehydrated:null,treeContext:null,retryLane:0};function tW(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rxe(t,e,n){var r=e.pendingProps,i=Wi.current,o=!1,u=(e.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),mi(Wi,i&1),t===null)return K9(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,o?(r=e.mode,o=e.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=lF(u,r,0,null),t=S0(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=tW(n),e.memoizedState=eW,t):V$(e,u));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return LBe(t,e,u,r,h,i,n);if(o){o=r.fallback,u=e.mode,i=t.child,h=i.sibling;var m={mode:"hidden",children:r.children};return!(u&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=m,e.deletions=null):(r=Bm(i,m),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?o=Bm(h,o):(o=S0(o,u,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,u=t.child.memoizedState,u=u===null?tW(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=eW,r}return o=t.child,t=o.sibling,r=Bm(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function V$(t,e){return e=lF({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function N3(t,e,n,r){return r!==null&&T$(r),Xw(e,t.child,null,n),t=V$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LBe(t,e,n,r,i,o,u){if(n)return e.flags&256?(e.flags&=-257,r=HH(Error($t(422))),N3(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=lF({mode:"visible",children:r.children},i,0,null),o=S0(o,i,u,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Xw(e,t.child,null,u),e.child.memoizedState=tW(u),e.memoizedState=eW,o);if(!(e.mode&1))return N3(t,e,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error($t(419)),r=HH(o,r,void 0),N3(t,e,u,r)}if(h=(u&t.childLanes)!==0,Xa||h){if(r=io,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,fp(t,i),xc(r,t,i,-1))}return K$(),r=HH(Error($t(421))),N3(t,e,u,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XBe.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,_l=Om(i.nextSibling),wl=e,Ri=!0,bc=null,t!==null&&(du[hu++]=Qh,du[hu++]=Jh,du[hu++]=k0,Qh=t.id,Jh=t.overflow,k0=e),e=V$(e,r.children),e.flags|=4096,e)}function c0e(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),X9(t.return,e,n)}function GH(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Dxe(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xa(t,e,r.children,n),r=Wi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&c0e(t,n,e);else if(t.tag===19)c0e(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mi(Wi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&cN(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),GH(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&cN(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}GH(e,!0,n,null,o);break;case"together":GH(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function OL(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mp(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),I0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($t(153));if(e.child!==null){for(t=e.child,n=Bm(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bm(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NBe(t,e,n){switch(e.tag){case 3:Ixe(e),Kw();break;case 5:oxe(e);break;case 1:Qa(e.type)&&iN(e);break;case 4:D$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;mi(aN,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mi(Wi,Wi.current&1),e.flags|=128,null):n&e.child.childLanes?Rxe(t,e,n):(mi(Wi,Wi.current&1),t=mp(t,e,n),t!==null?t.sibling:null);mi(Wi,Wi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Dxe(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mi(Wi,Wi.current),r)break;return null;case 22:case 23:return e.lanes=0,kxe(t,e,n)}return mp(t,e,n)}var Oxe,nW,Lxe,Nxe;Oxe=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nW=function(){};Lxe=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,b0(Md.current);var o=null;switch(n){case"input":i=E9(t,i),r=E9(t,r),o=[];break;case"select":i=qi({},i,{value:void 0}),r=qi({},r,{value:void 0}),o=[];break;case"textarea":i=T9(t,i),r=T9(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nN)}k9(n,r);var u;n=null;for(v in i)if(!r.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var h=i[v];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(nT.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in r){var m=r[v];if(h=i!=null?i[v]:void 0,r.hasOwnProperty(v)&&m!==h&&(m!=null||h!=null))if(v==="style")if(h){for(u in h)!h.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in m)m.hasOwnProperty(u)&&h[u]!==m[u]&&(n||(n={}),n[u]=m[u])}else n||(o||(o=[]),o.push(v,n)),n=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(o=o||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(nT.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&Ci("scroll",t),o||h===m||(o=[])):(o=o||[]).push(v,m))}n&&(o=o||[]).push("style",n);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};Nxe=function(t,e,n,r){n!==r&&(e.flags|=4)};function hP(t,e){if(!Ri)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ho(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FBe(t,e,n){var r=e.pendingProps;switch(P$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(e),null;case 1:return Qa(e.type)&&rN(),Ho(e),null;case 3:return r=e.stateNode,qw(),Ai(Za),Ai(ta),L$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(O3(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bc!==null&&(cW(bc),bc=null))),nW(t,e),Ho(e),null;case 5:O$(e);var i=b0(fT.current);if(n=e.type,t!==null&&e.stateNode!=null)Lxe(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($t(166));return Ho(e),null}if(t=b0(Md.current),O3(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Cd]=e,r[hT]=o,t=(e.mode&1)!==0,n){case"dialog":Ci("cancel",r),Ci("close",r);break;case"iframe":case"object":case"embed":Ci("load",r);break;case"video":case"audio":for(i=0;i<OP.length;i++)Ci(OP[i],r);break;case"source":Ci("error",r);break;case"img":case"image":case"link":Ci("error",r),Ci("load",r);break;case"details":Ci("toggle",r);break;case"input":bve(r,o),Ci("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ci("invalid",r);break;case"textarea":wve(r,o),Ci("invalid",r)}k9(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var h=o[u];u==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&D3(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&D3(r.textContent,h,t),i=["children",""+h]):nT.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Ci("scroll",r)}switch(n){case"input":C3(r),_ve(r,o,!0);break;case"textarea":C3(r),xve(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=nN)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u1e(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[Cd]=e,t[hT]=r,Oxe(t,e,!1,!1),e.stateNode=t;e:{switch(u=A9(n,r),n){case"dialog":Ci("cancel",t),Ci("close",t),i=r;break;case"iframe":case"object":case"embed":Ci("load",t),i=r;break;case"video":case"audio":for(i=0;i<OP.length;i++)Ci(OP[i],t);i=r;break;case"source":Ci("error",t),i=r;break;case"img":case"image":case"link":Ci("error",t),Ci("load",t),i=r;break;case"details":Ci("toggle",t),i=r;break;case"input":bve(t,r),i=E9(t,r),Ci("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qi({},r,{value:void 0}),Ci("invalid",t);break;case"textarea":wve(t,r),i=T9(t,r),Ci("invalid",t);break;default:i=r}k9(n,i),h=i;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];o==="style"?h1e(t,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&c1e(t,m)):o==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&rT(t,m):typeof m=="number"&&rT(t,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nT.hasOwnProperty(o)?m!=null&&o==="onScroll"&&Ci("scroll",t):m!=null&&d$(t,o,m,u))}switch(n){case"input":C3(t),_ve(t,r,!1);break;case"textarea":C3(t),xve(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wm(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Rw(t,!!r.multiple,o,!1):r.defaultValue!=null&&Rw(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nN)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ho(e),null;case 6:if(t&&e.stateNode!=null)Nxe(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($t(166));if(n=b0(fT.current),b0(Md.current),O3(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cd]=e,(o=r.nodeValue!==n)&&(t=wl,t!==null))switch(t.tag){case 3:D3(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&D3(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cd]=e,e.stateNode=r}return Ho(e),null;case 13:if(Ai(Wi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ri&&_l!==null&&e.mode&1&&!(e.flags&128))J1e(),Kw(),e.flags|=98560,o=!1;else if(o=O3(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($t(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($t(317));o[Cd]=e}else Kw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ho(e),o=!1}else bc!==null&&(cW(bc),bc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Wi.current&1?zs===0&&(zs=3):K$())),e.updateQueue!==null&&(e.flags|=4),Ho(e),null);case 4:return qw(),nW(t,e),t===null&&cT(e.stateNode.containerInfo),Ho(e),null;case 10:return A$(e.type._context),Ho(e),null;case 17:return Qa(e.type)&&rN(),Ho(e),null;case 19:if(Ai(Wi),o=e.memoizedState,o===null)return Ho(e),null;if(r=(e.flags&128)!==0,u=o.rendering,u===null)if(r)hP(o,!1);else{if(zs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=cN(t),u!==null){for(e.flags|=128,hP(o,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mi(Wi,Wi.current&1|2),e.child}t=t.sibling}o.tail!==null&&ys()>Zw&&(e.flags|=128,r=!0,hP(o,!1),e.lanes=4194304)}else{if(!r)if(t=cN(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hP(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Ri)return Ho(e),null}else 2*ys()-o.renderingStartTime>Zw&&n!==1073741824&&(e.flags|=128,r=!0,hP(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(n=o.last,n!==null?n.sibling=u:e.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ys(),e.sibling=null,n=Wi.current,mi(Wi,r?n&1|2:n&1),e):(Ho(e),null);case 22:case 23:return $$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yl&1073741824&&(Ho(e),e.subtreeFlags&6&&(e.flags|=8192)):Ho(e),null;case 24:return null;case 25:return null}throw Error($t(156,e.tag))}function BBe(t,e){switch(P$(e),e.tag){case 1:return Qa(e.type)&&rN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qw(),Ai(Za),Ai(ta),L$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return O$(e),null;case 13:if(Ai(Wi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($t(340));Kw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ai(Wi),null;case 4:return qw(),null;case 10:return A$(e.type._context),null;case 22:case 23:return $$(),null;case 24:return null;default:return null}}var F3=!1,Yo=!1,UBe=typeof WeakSet=="function"?WeakSet:Set,hn=null;function ww(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ts(t,e,r)}else n.current=null}function rW(t,e,n){try{n()}catch(r){ts(t,e,r)}}var d0e=!1;function zBe(t,e){if(z9=JL,t=z1e(),E$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,h=-1,m=-1,v=0,x=0,E=t,k=null;t:for(;;){for(var D;E!==n||i!==0&&E.nodeType!==3||(h=u+i),E!==o||r!==0&&E.nodeType!==3||(m=u+r),E.nodeType===3&&(u+=E.nodeValue.length),(D=E.firstChild)!==null;)k=E,E=D;for(;;){if(E===t)break t;if(k===n&&++v===i&&(h=u),k===o&&++x===r&&(m=u),(D=E.nextSibling)!==null)break;E=k,k=E.parentNode}E=D}n=h===-1||m===-1?null:{start:h,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(V9={focusedElem:t,selectionRange:n},JL=!1,hn=e;hn!==null;)if(e=hn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,hn=t;else for(;hn!==null;){e=hn;try{var G=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var N=G.memoizedProps,z=G.memoizedState,U=e.stateNode,P=U.getSnapshotBeforeUpdate(e.elementType===e.type?N:vc(e.type,N),z);U.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var $=e.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($t(163))}}catch(Q){ts(e,e.return,Q)}if(t=e.sibling,t!==null){t.return=e.return,hn=t;break}hn=e.return}return G=d0e,d0e=!1,G}function HP(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&rW(e,n,o)}i=i.next}while(i!==r)}}function oF(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iW(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fxe(t){var e=t.alternate;e!==null&&(t.alternate=null,Fxe(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cd],delete e[hT],delete e[G9],delete e[xBe],delete e[SBe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bxe(t){return t.tag===5||t.tag===3||t.tag===4}function h0e(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bxe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sW(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nN));else if(r!==4&&(t=t.child,t!==null))for(sW(t,e,n),t=t.sibling;t!==null;)sW(t,e,n),t=t.sibling}function oW(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oW(t,e,n),t=t.sibling;t!==null;)oW(t,e,n),t=t.sibling}var So=null,yc=!1;function nm(t,e,n){for(n=n.child;n!==null;)Uxe(t,e,n),n=n.sibling}function Uxe(t,e,n){if(Td&&typeof Td.onCommitFiberUnmount=="function")try{Td.onCommitFiberUnmount(QN,n)}catch{}switch(n.tag){case 5:Yo||ww(n,e);case 6:var r=So,i=yc;So=null,nm(t,e,n),So=r,yc=i,So!==null&&(yc?(t=So,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):So.removeChild(n.stateNode));break;case 18:So!==null&&(yc?(t=So,n=n.stateNode,t.nodeType===8?FH(t.parentNode,n):t.nodeType===1&&FH(t,n),aT(t)):FH(So,n.stateNode));break;case 4:r=So,i=yc,So=n.stateNode.containerInfo,yc=!0,nm(t,e,n),So=r,yc=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&rW(n,e,u),i=i.next}while(i!==r)}nm(t,e,n);break;case 1:if(!Yo&&(ww(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){ts(n,e,h)}nm(t,e,n);break;case 21:nm(t,e,n);break;case 22:n.mode&1?(Yo=(r=Yo)||n.memoizedState!==null,nm(t,e,n),Yo=r):nm(t,e,n);break;default:nm(t,e,n)}}function p0e(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UBe),e.forEach(function(r){var i=qBe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,u=e,h=u;e:for(;h!==null;){switch(h.tag){case 5:So=h.stateNode,yc=!1;break e;case 3:So=h.stateNode.containerInfo,yc=!0;break e;case 4:So=h.stateNode.containerInfo,yc=!0;break e}h=h.return}if(So===null)throw Error($t(160));Uxe(o,u,i),So=null,yc=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(v){ts(i,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zxe(e,t),e=e.sibling}function zxe(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hc(e,t),wd(t),r&4){try{HP(3,t,t.return),oF(3,t)}catch(N){ts(t,t.return,N)}try{HP(5,t,t.return)}catch(N){ts(t,t.return,N)}}break;case 1:hc(e,t),wd(t),r&512&&n!==null&&ww(n,n.return);break;case 5:if(hc(e,t),wd(t),r&512&&n!==null&&ww(n,n.return),t.flags&32){var i=t.stateNode;try{rT(i,"")}catch(N){ts(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,u=n!==null?n.memoizedProps:o,h=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&a1e(i,o),A9(h,u);var v=A9(h,o);for(u=0;u<m.length;u+=2){var x=m[u],E=m[u+1];x==="style"?h1e(i,E):x==="dangerouslySetInnerHTML"?c1e(i,E):x==="children"?rT(i,E):d$(i,x,E,v)}switch(h){case"input":C9(i,o);break;case"textarea":l1e(i,o);break;case"select":var k=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?Rw(i,!!o.multiple,D,!1):k!==!!o.multiple&&(o.defaultValue!=null?Rw(i,!!o.multiple,o.defaultValue,!0):Rw(i,!!o.multiple,o.multiple?[]:"",!1))}i[hT]=o}catch(N){ts(t,t.return,N)}}break;case 6:if(hc(e,t),wd(t),r&4){if(t.stateNode===null)throw Error($t(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(N){ts(t,t.return,N)}}break;case 3:if(hc(e,t),wd(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aT(e.containerInfo)}catch(N){ts(t,t.return,N)}break;case 4:hc(e,t),wd(t);break;case 13:hc(e,t),wd(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(G$=ys())),r&4&&p0e(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(Yo=(v=Yo)||x,hc(e,t),Yo=v):hc(e,t),wd(t),r&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!x&&t.mode&1)for(hn=t,x=t.child;x!==null;){for(E=hn=x;hn!==null;){switch(k=hn,D=k.child,k.tag){case 0:case 11:case 14:case 15:HP(4,k,k.return);break;case 1:ww(k,k.return);var G=k.stateNode;if(typeof G.componentWillUnmount=="function"){r=k,n=k.return;try{e=r,G.props=e.memoizedProps,G.state=e.memoizedState,G.componentWillUnmount()}catch(N){ts(r,n,N)}}break;case 5:ww(k,k.return);break;case 22:if(k.memoizedState!==null){m0e(E);continue}}D!==null?(D.return=k,hn=D):m0e(E)}x=x.sibling}e:for(x=null,E=t;;){if(E.tag===5){if(x===null){x=E;try{i=E.stateNode,v?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=E.stateNode,m=E.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=d1e("display",u))}catch(N){ts(t,t.return,N)}}}else if(E.tag===6){if(x===null)try{E.stateNode.nodeValue=v?"":E.memoizedProps}catch(N){ts(t,t.return,N)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;x===E&&(x=null),E=E.return}x===E&&(x=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:hc(e,t),wd(t),r&4&&p0e(t);break;case 21:break;default:hc(e,t),wd(t)}}function wd(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bxe(n)){var r=n;break e}n=n.return}throw Error($t(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rT(i,""),r.flags&=-33);var o=h0e(t);oW(t,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,h=h0e(t);sW(t,h,u);break;default:throw Error($t(161))}}catch(m){ts(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VBe(t,e,n){hn=t,Vxe(t)}function Vxe(t,e,n){for(var r=(t.mode&1)!==0;hn!==null;){var i=hn,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||F3;if(!u){var h=i.alternate,m=h!==null&&h.memoizedState!==null||Yo;h=F3;var v=Yo;if(F3=u,(Yo=m)&&!v)for(hn=i;hn!==null;)u=hn,m=u.child,u.tag===22&&u.memoizedState!==null?g0e(i):m!==null?(m.return=u,hn=m):g0e(i);for(;o!==null;)hn=o,Vxe(o),o=o.sibling;hn=i,F3=h,Yo=v}f0e(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,hn=o):f0e(t)}}function f0e(t){for(;hn!==null;){var e=hn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yo||oF(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yo)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Zve(e,o,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zve(e,u,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var x=v.memoizedState;if(x!==null){var E=x.dehydrated;E!==null&&aT(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($t(163))}Yo||e.flags&512&&iW(e)}catch(k){ts(e,e.return,k)}}if(e===t){hn=null;break}if(n=e.sibling,n!==null){n.return=e.return,hn=n;break}hn=e.return}}function m0e(t){for(;hn!==null;){var e=hn;if(e===t){hn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,hn=n;break}hn=e.return}}function g0e(t){for(;hn!==null;){var e=hn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oF(4,e)}catch(m){ts(e,n,m)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(m){ts(e,i,m)}}var o=e.return;try{iW(e)}catch(m){ts(e,o,m)}break;case 5:var u=e.return;try{iW(e)}catch(m){ts(e,u,m)}}}catch(m){ts(e,e.return,m)}if(e===t){hn=null;break}var h=e.sibling;if(h!==null){h.return=e.return,hn=h;break}hn=e.return}}var jBe=Math.ceil,pN=xp.ReactCurrentDispatcher,j$=xp.ReactCurrentOwner,bu=xp.ReactCurrentBatchConfig,Or=0,io=null,As=null,Po=0,yl=0,xw=Jm(0),zs=0,yT=null,I0=0,aF=0,H$=0,GP=null,$a=null,G$=0,Zw=1/0,Yh=null,fN=!1,aW=null,Nm=null,B3=!1,Tm=null,mN=0,WP=0,lW=null,LL=-1,NL=0;function Ca(){return Or&6?ys():LL!==-1?LL:LL=ys()}function Fm(t){return t.mode&1?Or&2&&Po!==0?Po&-Po:CBe.transition!==null?(NL===0&&(NL=E1e()),NL):(t=ei,t!==0||(t=window.event,t=t===void 0?16:I1e(t.type)),t):1}function xc(t,e,n,r){if(50<WP)throw WP=0,lW=null,Error($t(185));$T(t,n,r),(!(Or&2)||t!==io)&&(t===io&&(!(Or&2)&&(aF|=n),zs===4&&Em(t,Po)),Ja(t,r),n===1&&Or===0&&!(e.mode&1)&&(Zw=ys()+500,rF&&eg()))}function Ja(t,e){var n=t.callbackNode;CFe(t,e);var r=QL(t,t===io?Po:0);if(r===0)n!==null&&Cve(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cve(n),e===1)t.tag===0?EBe(v0e.bind(null,t)):Y1e(v0e.bind(null,t)),_Be(function(){!(Or&6)&&eg()}),n=null;else{switch(C1e(r)){case 1:n=g$;break;case 4:n=x1e;break;case 16:n=ZL;break;case 536870912:n=S1e;break;default:n=ZL}n=qxe(n,jxe.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jxe(t,e){if(LL=-1,NL=0,Or&6)throw Error($t(327));var n=t.callbackNode;if(Fw()&&t.callbackNode!==n)return null;var r=QL(t,t===io?Po:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gN(t,r);else{e=r;var i=Or;Or|=2;var o=Gxe();(io!==t||Po!==e)&&(Yh=null,Zw=ys()+500,x0(t,e));do try{WBe();break}catch(h){Hxe(t,h)}while(1);k$(),pN.current=o,Or=i,As!==null?e=0:(io=null,Po=0,e=zs)}if(e!==0){if(e===2&&(i=L9(t),i!==0&&(r=i,e=uW(t,i))),e===1)throw n=yT,x0(t,0),Em(t,r),Ja(t,ys()),n;if(e===6)Em(t,r);else{if(i=t.current.alternate,!(r&30)&&!HBe(i)&&(e=gN(t,r),e===2&&(o=L9(t),o!==0&&(r=o,e=uW(t,o))),e===1))throw n=yT,x0(t,0),Em(t,r),Ja(t,ys()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($t(345));case 2:d0(t,$a,Yh);break;case 3:if(Em(t,r),(r&130023424)===r&&(e=G$+500-ys(),10<e)){if(QL(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ca(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=H9(d0.bind(null,t,$a,Yh),e);break}d0(t,$a,Yh);break;case 4:if(Em(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var u=31-wc(r);o=1<<u,u=e[u],u>i&&(i=u),r&=~o}if(r=i,r=ys()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jBe(r/1960))-r,10<r){t.timeoutHandle=H9(d0.bind(null,t,$a,Yh),r);break}d0(t,$a,Yh);break;case 5:d0(t,$a,Yh);break;default:throw Error($t(329))}}}return Ja(t,ys()),t.callbackNode===n?jxe.bind(null,t):null}function uW(t,e){var n=GP;return t.current.memoizedState.isDehydrated&&(x0(t,e).flags|=256),t=gN(t,e),t!==2&&(e=$a,$a=n,e!==null&&cW(e)),t}function cW(t){$a===null?$a=t:$a.push.apply($a,t)}function HBe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ec(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Em(t,e){for(e&=~H$,e&=~aF,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wc(e),r=1<<n;t[n]=-1,e&=~r}}function v0e(t){if(Or&6)throw Error($t(327));Fw();var e=QL(t,0);if(!(e&1))return Ja(t,ys()),null;var n=gN(t,e);if(t.tag!==0&&n===2){var r=L9(t);r!==0&&(e=r,n=uW(t,r))}if(n===1)throw n=yT,x0(t,0),Em(t,e),Ja(t,ys()),n;if(n===6)throw Error($t(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,d0(t,$a,Yh),Ja(t,ys()),null}function W$(t,e){var n=Or;Or|=1;try{return t(e)}finally{Or=n,Or===0&&(Zw=ys()+500,rF&&eg())}}function R0(t){Tm!==null&&Tm.tag===0&&!(Or&6)&&Fw();var e=Or;Or|=1;var n=bu.transition,r=ei;try{if(bu.transition=null,ei=1,t)return t()}finally{ei=r,bu.transition=n,Or=e,!(Or&6)&&eg()}}function $$(){yl=xw.current,Ai(xw)}function x0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bBe(n)),As!==null)for(n=As.return;n!==null;){var r=n;switch(P$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rN();break;case 3:qw(),Ai(Za),Ai(ta),L$();break;case 5:O$(r);break;case 4:qw();break;case 13:Ai(Wi);break;case 19:Ai(Wi);break;case 10:A$(r.type._context);break;case 22:case 23:$$()}n=n.return}if(io=t,As=t=Bm(t.current,null),Po=yl=e,zs=0,yT=null,H$=aF=I0=0,$a=GP=null,y0!==null){for(e=0;e<y0.length;e++)if(n=y0[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}y0=null}return t}function Hxe(t,e){do{var n=As;try{if(k$(),RL.current=hN,dN){for(var r=Xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dN=!1}if(A0=0,eo=Fs=Xi=null,jP=!1,mT=0,j$.current=null,n===null||n.return===null){zs=1,yT=e,As=null;break}e:{var o=t,u=n.return,h=n,m=e;if(e=Po,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m,x=h,E=x.tag;if(!(x.mode&1)&&(E===0||E===11||E===15)){var k=x.alternate;k?(x.updateQueue=k.updateQueue,x.memoizedState=k.memoizedState,x.lanes=k.lanes):(x.updateQueue=null,x.memoizedState=null)}var D=i0e(u);if(D!==null){D.flags&=-257,s0e(D,u,h,o,e),D.mode&1&&r0e(o,v,e),e=D,m=v;var G=e.updateQueue;if(G===null){var N=new Set;N.add(m),e.updateQueue=N}else G.add(m);break e}else{if(!(e&1)){r0e(o,v,e),K$();break e}m=Error($t(426))}}else if(Ri&&h.mode&1){var z=i0e(u);if(z!==null){!(z.flags&65536)&&(z.flags|=256),s0e(z,u,h,o,e),T$(Yw(m,h));break e}}o=m=Yw(m,h),zs!==4&&(zs=2),GP===null?GP=[o]:GP.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var U=Pxe(o,m,e);Yve(o,U);break e;case 1:h=m;var P=o.type,$=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Nm===null||!Nm.has($)))){o.flags|=65536,e&=-e,o.lanes|=e;var Q=Txe(o,h,e);Yve(o,Q);break e}}o=o.return}while(o!==null)}$xe(n)}catch(ye){e=ye,As===n&&n!==null&&(As=n=n.return);continue}break}while(1)}function Gxe(){var t=pN.current;return pN.current=hN,t===null?hN:t}function K$(){(zs===0||zs===3||zs===2)&&(zs=4),io===null||!(I0&268435455)&&!(aF&268435455)||Em(io,Po)}function gN(t,e){var n=Or;Or|=2;var r=Gxe();(io!==t||Po!==e)&&(Yh=null,x0(t,e));do try{GBe();break}catch(i){Hxe(t,i)}while(1);if(k$(),Or=n,pN.current=r,As!==null)throw Error($t(261));return io=null,Po=0,zs}function GBe(){for(;As!==null;)Wxe(As)}function WBe(){for(;As!==null&&!gFe();)Wxe(As)}function Wxe(t){var e=Xxe(t.alternate,t,yl);t.memoizedProps=t.pendingProps,e===null?$xe(t):As=e,j$.current=null}function $xe(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BBe(n,e),n!==null){n.flags&=32767,As=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zs=6,As=null;return}}else if(n=FBe(n,e,yl),n!==null){As=n;return}if(e=e.sibling,e!==null){As=e;return}As=e=t}while(e!==null);zs===0&&(zs=5)}function d0(t,e,n){var r=ei,i=bu.transition;try{bu.transition=null,ei=1,$Be(t,e,n,r)}finally{bu.transition=i,ei=r}return null}function $Be(t,e,n,r){do Fw();while(Tm!==null);if(Or&6)throw Error($t(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($t(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(PFe(t,o),t===io&&(As=io=null,Po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||B3||(B3=!0,qxe(ZL,function(){return Fw(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bu.transition,bu.transition=null;var u=ei;ei=1;var h=Or;Or|=4,j$.current=null,zBe(t,n),zxe(n,t),hBe(V9),JL=!!z9,V9=z9=null,t.current=n,VBe(n),vFe(),Or=h,ei=u,bu.transition=o}else t.current=n;if(B3&&(B3=!1,Tm=t,mN=i),o=t.pendingLanes,o===0&&(Nm=null),_Fe(n.stateNode),Ja(t,ys()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fN)throw fN=!1,t=aW,aW=null,t;return mN&1&&t.tag!==0&&Fw(),o=t.pendingLanes,o&1?t===lW?WP++:(WP=0,lW=t):WP=0,eg(),null}function Fw(){if(Tm!==null){var t=C1e(mN),e=bu.transition,n=ei;try{if(bu.transition=null,ei=16>t?16:t,Tm===null)var r=!1;else{if(t=Tm,Tm=null,mN=0,Or&6)throw Error($t(331));var i=Or;for(Or|=4,hn=t.current;hn!==null;){var o=hn,u=o.child;if(hn.flags&16){var h=o.deletions;if(h!==null){for(var m=0;m<h.length;m++){var v=h[m];for(hn=v;hn!==null;){var x=hn;switch(x.tag){case 0:case 11:case 15:HP(8,x,o)}var E=x.child;if(E!==null)E.return=x,hn=E;else for(;hn!==null;){x=hn;var k=x.sibling,D=x.return;if(Fxe(x),x===v){hn=null;break}if(k!==null){k.return=D,hn=k;break}hn=D}}}var G=o.alternate;if(G!==null){var N=G.child;if(N!==null){G.child=null;do{var z=N.sibling;N.sibling=null,N=z}while(N!==null)}}hn=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,hn=u;else e:for(;hn!==null;){if(o=hn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:HP(9,o,o.return)}var U=o.sibling;if(U!==null){U.return=o.return,hn=U;break e}hn=o.return}}var P=t.current;for(hn=P;hn!==null;){u=hn;var $=u.child;if(u.subtreeFlags&2064&&$!==null)$.return=u,hn=$;else e:for(u=P;hn!==null;){if(h=hn,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:oF(9,h)}}catch(ye){ts(h,h.return,ye)}if(h===u){hn=null;break e}var Q=h.sibling;if(Q!==null){Q.return=h.return,hn=Q;break e}hn=h.return}}if(Or=i,eg(),Td&&typeof Td.onPostCommitFiberRoot=="function")try{Td.onPostCommitFiberRoot(QN,t)}catch{}r=!0}return r}finally{ei=n,bu.transition=e}}return!1}function y0e(t,e,n){e=Yw(n,e),e=Pxe(t,e,1),t=Lm(t,e,1),e=Ca(),t!==null&&($T(t,1,e),Ja(t,e))}function ts(t,e,n){if(t.tag===3)y0e(t,t,n);else for(;e!==null;){if(e.tag===3){y0e(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nm===null||!Nm.has(r))){t=Yw(n,t),t=Txe(e,t,1),e=Lm(e,t,1),t=Ca(),e!==null&&($T(e,1,t),Ja(e,t));break}}e=e.return}}function KBe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ca(),t.pingedLanes|=t.suspendedLanes&n,io===t&&(Po&n)===n&&(zs===4||zs===3&&(Po&130023424)===Po&&500>ys()-G$?x0(t,0):H$|=n),Ja(t,e)}function Kxe(t,e){e===0&&(t.mode&1?(e=M3,M3<<=1,!(M3&130023424)&&(M3=4194304)):e=1);var n=Ca();t=fp(t,e),t!==null&&($T(t,e,n),Ja(t,n))}function XBe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kxe(t,n)}function qBe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($t(314))}r!==null&&r.delete(e),Kxe(t,n)}var Xxe;Xxe=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Za.current)Xa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xa=!1,NBe(t,e,n);Xa=!!(t.flags&131072)}else Xa=!1,Ri&&e.flags&1048576&&Z1e(e,oN,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;OL(t,e),t=e.pendingProps;var i=$w(e,ta.current);Nw(e,n),i=F$(null,e,r,t,i,n);var o=B$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qa(r)?(o=!0,iN(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,R$(e),i.updater=iF,e.stateNode=i,i._reactInternals=e,Y9(e,r,t,n),e=J9(null,e,r,!0,o,n)):(e.tag=0,Ri&&o&&C$(e),xa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(OL(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ZBe(r),t=vc(r,t),i){case 0:e=Q9(null,e,r,t,n);break e;case 1:e=l0e(null,e,r,t,n);break e;case 11:e=o0e(null,e,r,t,n);break e;case 14:e=a0e(null,e,r,vc(r.type,t),n);break e}throw Error($t(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vc(r,i),Q9(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vc(r,i),l0e(t,e,r,i,n);case 3:e:{if(Ixe(e),t===null)throw Error($t(387));r=e.pendingProps,o=e.memoizedState,i=o.element,txe(t,e),uN(e,r,null,n);var u=e.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Yw(Error($t(423)),e),e=u0e(t,e,r,n,i);break e}else if(r!==i){i=Yw(Error($t(424)),e),e=u0e(t,e,r,n,i);break e}else for(_l=Om(e.stateNode.containerInfo.firstChild),wl=e,Ri=!0,bc=null,n=sxe(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kw(),r===i){e=mp(t,e,n);break e}xa(t,e,r,n)}e=e.child}return e;case 5:return oxe(e),t===null&&K9(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,u=i.children,j9(r,i)?u=null:o!==null&&j9(r,o)&&(e.flags|=32),Axe(t,e),xa(t,e,u,n),e.child;case 6:return t===null&&K9(e),null;case 13:return Rxe(t,e,n);case 4:return D$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xw(e,null,r,n):xa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vc(r,i),o0e(t,e,r,i,n);case 7:return xa(t,e,e.pendingProps,n),e.child;case 8:return xa(t,e,e.pendingProps.children,n),e.child;case 12:return xa(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,u=i.value,mi(aN,r._currentValue),r._currentValue=u,o!==null)if(Ec(o.value,u)){if(o.children===i.children&&!Za.current){e=mp(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){u=o.child;for(var m=h.firstContext;m!==null;){if(m.context===r){if(o.tag===1){m=ap(-1,n&-n),m.tag=2;var v=o.updateQueue;if(v!==null){v=v.shared;var x=v.pending;x===null?m.next=m:(m.next=x.next,x.next=m),v.pending=m}}o.lanes|=n,m=o.alternate,m!==null&&(m.lanes|=n),X9(o.return,n,e),h.lanes|=n;break}m=m.next}}else if(o.tag===10)u=o.type===e.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error($t(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),X9(u,n,e),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===e){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}xa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Nw(e,n),i=wu(i),r=r(i),e.flags|=1,xa(t,e,r,n),e.child;case 14:return r=e.type,i=vc(r,e.pendingProps),i=vc(r.type,i),a0e(t,e,r,i,n);case 15:return Mxe(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vc(r,i),OL(t,e),e.tag=1,Qa(r)?(t=!0,iN(e)):t=!1,Nw(e,n),rxe(e,r,i),Y9(e,r,i,n),J9(null,e,r,!0,t,n);case 19:return Dxe(t,e,n);case 22:return kxe(t,e,n)}throw Error($t(156,e.tag))};function qxe(t,e){return w1e(t,e)}function YBe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gu(t,e,n,r){return new YBe(t,e,n,r)}function X$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZBe(t){if(typeof t=="function")return X$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===p$)return 11;if(t===f$)return 14}return 2}function Bm(t,e){var n=t.alternate;return n===null?(n=gu(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function FL(t,e,n,r,i,o){var u=2;if(r=t,typeof t=="function")X$(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case hw:return S0(n.children,i,o,e);case h$:u=8,i|=8;break;case _9:return t=gu(12,n,e,i|2),t.elementType=_9,t.lanes=o,t;case w9:return t=gu(13,n,e,i),t.elementType=w9,t.lanes=o,t;case x9:return t=gu(19,n,e,i),t.elementType=x9,t.lanes=o,t;case i1e:return lF(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n1e:u=10;break e;case r1e:u=9;break e;case p$:u=11;break e;case f$:u=14;break e;case bm:u=16,r=null;break e}throw Error($t(130,t==null?t:typeof t,""))}return e=gu(u,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function S0(t,e,n,r){return t=gu(7,t,r,e),t.lanes=n,t}function lF(t,e,n,r){return t=gu(22,t,r,e),t.elementType=i1e,t.lanes=n,t.stateNode={isHidden:!1},t}function WH(t,e,n){return t=gu(6,t,null,e),t.lanes=n,t}function $H(t,e,n){return e=gu(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QBe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=PH(0),this.expirationTimes=PH(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=PH(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function q$(t,e,n,r,i,o,u,h,m){return t=new QBe(t,e,n,h,m),e===1?(e=1,o===!0&&(e|=8)):e=0,o=gu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R$(o),t}function JBe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dw,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yxe(t){if(!t)return $m;t=t._reactInternals;e:{if(W0(t)!==t||t.tag!==1)throw Error($t(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($t(171))}if(t.tag===1){var n=t.type;if(Qa(n))return q1e(t,n,e)}return e}function Zxe(t,e,n,r,i,o,u,h,m){return t=q$(n,r,!0,t,i,o,u,h,m),t.context=Yxe(null),n=t.current,r=Ca(),i=Fm(n),o=ap(r,i),o.callback=e??null,Lm(n,o,i),t.current.lanes=i,$T(t,i,r),Ja(t,r),t}function uF(t,e,n,r){var i=e.current,o=Ca(),u=Fm(i);return n=Yxe(n),e.context===null?e.context=n:e.pendingContext=n,e=ap(o,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lm(i,e,u),t!==null&&(xc(t,i,u,o),IL(t,i,u)),u}function vN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b0e(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Y$(t,e){b0e(t,e),(t=t.alternate)&&b0e(t,e)}function eUe(){return null}var Qxe=typeof reportError=="function"?reportError:function(t){console.error(t)};function Z$(t){this._internalRoot=t}cF.prototype.render=Z$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($t(409));uF(t,e,null,null)};cF.prototype.unmount=Z$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;R0(function(){uF(null,t,null,null)}),e[pp]=null}};function cF(t){this._internalRoot=t}cF.prototype.unstable_scheduleHydration=function(t){if(t){var e=M1e();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sm.length&&e!==0&&e<Sm[n].priority;n++);Sm.splice(n,0,t),n===0&&A1e(t)}};function Q$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _0e(){}function tUe(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var v=vN(u);o.call(v)}}var u=Zxe(e,r,t,0,null,!1,!1,"",_0e);return t._reactRootContainer=u,t[pp]=u.current,cT(t.nodeType===8?t.parentNode:t),R0(),u}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var v=vN(m);h.call(v)}}var m=q$(t,0,!1,null,null,!1,!1,"",_0e);return t._reactRootContainer=m,t[pp]=m.current,cT(t.nodeType===8?t.parentNode:t),R0(function(){uF(e,m,n,r)}),m}function hF(t,e,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var h=i;i=function(){var m=vN(u);h.call(m)}}uF(e,u,t,i)}else u=tUe(n,e,t,i,r);return vN(u)}P1e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=DP(e.pendingLanes);n!==0&&(v$(e,n|1),Ja(e,ys()),!(Or&6)&&(Zw=ys()+500,eg()))}break;case 13:R0(function(){var r=fp(t,1);if(r!==null){var i=Ca();xc(r,t,1,i)}}),Y$(t,1)}};y$=function(t){if(t.tag===13){var e=fp(t,134217728);if(e!==null){var n=Ca();xc(e,t,134217728,n)}Y$(t,134217728)}};T1e=function(t){if(t.tag===13){var e=Fm(t),n=fp(t,e);if(n!==null){var r=Ca();xc(n,t,e,r)}Y$(t,e)}};M1e=function(){return ei};k1e=function(t,e){var n=ei;try{return ei=t,e()}finally{ei=n}};R9=function(t,e,n){switch(e){case"input":if(C9(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nF(r);if(!i)throw Error($t(90));o1e(r),C9(r,i)}}}break;case"textarea":l1e(t,n);break;case"select":e=n.value,e!=null&&Rw(t,!!n.multiple,e,!1)}};m1e=W$;g1e=R0;var nUe={usingClientEntryPoint:!1,Events:[XT,gw,nF,p1e,f1e,W$]},pP={findFiberByHostInstance:v0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rUe={bundleType:pP.bundleType,version:pP.version,rendererPackageName:pP.rendererPackageName,rendererConfig:pP.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xp.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b1e(t),t===null?null:t.stateNode},findFiberByHostInstance:pP.findFiberByHostInstance||eUe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U3.isDisabled&&U3.supportsFiber)try{QN=U3.inject(rUe),Td=U3}catch{}}Tl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nUe;Tl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q$(e))throw Error($t(200));return JBe(t,e,null,n)};Tl.createRoot=function(t,e){if(!Q$(t))throw Error($t(299));var n=!1,r="",i=Qxe;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=q$(t,1,!1,null,null,n,!1,r,i),t[pp]=e.current,cT(t.nodeType===8?t.parentNode:t),new Z$(e)};Tl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($t(188)):(t=Object.keys(t).join(","),Error($t(268,t)));return t=b1e(e),t=t===null?null:t.stateNode,t};Tl.flushSync=function(t){return R0(t)};Tl.hydrate=function(t,e,n){if(!dF(e))throw Error($t(200));return hF(null,t,e,!0,n)};Tl.hydrateRoot=function(t,e,n){if(!Q$(t))throw Error($t(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=Qxe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=Zxe(e,null,t,1,n??null,i,!1,o,u),t[pp]=e.current,cT(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cF(e)};Tl.render=function(t,e,n){if(!dF(e))throw Error($t(200));return hF(null,t,e,!1,n)};Tl.unmountComponentAtNode=function(t){if(!dF(t))throw Error($t(40));return t._reactRootContainer?(R0(function(){hF(null,null,t,!1,function(){t._reactRootContainer=null,t[pp]=null})}),!0):!1};Tl.unstable_batchedUpdates=W$;Tl.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dF(n))throw Error($t(200));if(t==null||t._reactInternals===void 0)throw Error($t(38));return hF(t,e,n,!1,r)};Tl.version="18.2.0-next-9e3b772b8-20220608";function Jxe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jxe)}catch(t){console.error(t)}}Jxe(),Zwe.exports=Tl;var iUe=Zwe.exports,w0e=iUe;y9.createRoot=w0e.createRoot,y9.hydrateRoot=w0e.hydrateRoot;function z3(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yN={exports:{}},Ft={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(te,_e,Ue)=>_e in te?e(te,_e,{enumerable:!0,configurable:!0,writable:!0,value:Ue}):te[_e]=Ue,m=(te,_e)=>{for(var Ue in _e||(_e={}))o.call(_e,Ue)&&h(te,Ue,_e[Ue]);if(i)for(var Ue of i(_e))u.call(_e,Ue)&&h(te,Ue,_e[Ue]);return te},v=(te,_e)=>n(te,r(_e)),x=te=>e(te,"__esModule",{value:!0}),E=(te,_e)=>{x(te);for(var Ue in _e)e(te,Ue,{get:_e[Ue],enumerable:!0})};E(t,{Atom:()=>Eg,PointerProxy:()=>H1,Ticker:()=>$d,getPointerParts:()=>jd,isPointer:()=>Ll,isPrism:()=>Gd,iterateAndCountTicks:()=>j1,iterateOver:()=>Cg,pointer:()=>ku,pointerToPrism:()=>Fc,prism:()=>Nc,val:()=>Fp});var k=Array.isArray,D=k,G=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,N=G,z=typeof self=="object"&&self&&self.Object===Object&&self,U=N||z||Function("return this")(),P=U,$=P.Symbol,Q=$,ye=Object.prototype,q=ye.hasOwnProperty,ie=ye.toString,pe=Q?Q.toStringTag:void 0;function W(te){var _e=q.call(te,pe),Ue=te[pe];try{te[pe]=void 0;var yt=!0}catch{}var jn=ie.call(te);return yt&&(_e?te[pe]=Ue:delete te[pe]),jn}var he=W,Ye=Object.prototype,at=Ye.toString;function Et(te){return at.call(te)}var ue=Et,Ge="[object Null]",Te="[object Undefined]",it=Q?Q.toStringTag:void 0;function Ne(te){return te==null?te===void 0?Te:Ge:it&&it in Object(te)?he(te):ue(te)}var Xe=Ne;function qe(te){return te!=null&&typeof te=="object"}var ft=qe,Ct="[object Symbol]";function mt(te){return typeof te=="symbol"||ft(te)&&Xe(te)==Ct}var Pt=mt,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jt=/^\w*$/;function Yt(te,_e){if(D(te))return!1;var Ue=typeof te;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||te==null||Pt(te)?!0:Jt.test(te)||!Rt.test(te)||_e!=null&&te in Object(_e)}var In=Yt;function Tn(te){var _e=typeof te;return te!=null&&(_e=="object"||_e=="function")}var bn=Tn,On="[object AsyncFunction]",lt="[object Function]",ti="[object GeneratorFunction]",Mn="[object Proxy]";function _n(te){if(!bn(te))return!1;var _e=Xe(te);return _e==lt||_e==ti||_e==On||_e==Mn}var rn=_n,Nr=P["__core-js_shared__"],En=Nr,xe=function(){var te=/[^.]+$/.exec(En&&En.keys&&En.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}();function fe(te){return!!xe&&xe in te}var dt=fe,Dt=Function.prototype,Nt=Dt.toString;function kt(te){if(te!=null){try{return Nt.call(te)}catch{}try{return te+""}catch{}}return""}var fn=kt,en=/[\\^$.*+?()[\]{}|]/g,sn=/^\[object .+?Constructor\]$/,Dn=Function.prototype,qn=Object.prototype,Lt=Dn.toString,sr=qn.hasOwnProperty,Ae=RegExp("^"+Lt.call(sr).replace(en,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tt(te){if(!bn(te)||dt(te))return!1;var _e=rn(te)?Ae:sn;return _e.test(fn(te))}var qt=Tt;function Vt(te,_e){return te==null?void 0:te[_e]}var ln=Vt;function $n(te,_e){var Ue=ln(te,_e);return qt(Ue)?Ue:void 0}var lr=$n,Fn=lr(Object,"create"),jt=Fn;function Fe(){this.__data__=jt?jt(null):{},this.size=0}var Kt=Fe;function Wt(te){var _e=this.has(te)&&delete this.__data__[te];return this.size-=_e?1:0,_e}var Cn=Wt,xn="__lodash_hash_undefined__",or=Object.prototype,pr=or.hasOwnProperty;function Wr(te){var _e=this.__data__;if(jt){var Ue=_e[te];return Ue===xn?void 0:Ue}return pr.call(_e,te)?_e[te]:void 0}var Tr=Wr,ur=Object.prototype,Zi=ur.hasOwnProperty;function so(te){var _e=this.__data__;return jt?_e[te]!==void 0:Zi.call(_e,te)}var kc=so,Ld="__lodash_hash_undefined__";function Pu(te,_e){var Ue=this.__data__;return this.size+=this.has(te)?0:1,Ue[te]=jt&&_e===void 0?Ld:_e,this}var Ep=Pu;function ra(te){var _e=-1,Ue=te==null?0:te.length;for(this.clear();++_e<Ue;){var yt=te[_e];this.set(yt[0],yt[1])}}ra.prototype.clear=Kt,ra.prototype.delete=Cn,ra.prototype.get=Tr,ra.prototype.has=kc,ra.prototype.set=Ep;var Ac=ra;function Nd(){this.__data__=[],this.size=0}var og=Nd;function nl(te,_e){return te===_e||te!==te&&_e!==_e}var Cp=nl;function be(te,_e){for(var Ue=te.length;Ue--;)if(Cp(te[Ue][0],_e))return Ue;return-1}var Ze=be,vt=Array.prototype,pt=vt.splice;function ut(te){var _e=this.__data__,Ue=Ze(_e,te);if(Ue<0)return!1;var yt=_e.length-1;return Ue==yt?_e.pop():pt.call(_e,Ue,1),--this.size,!0}var on=ut;function vn(te){var _e=this.__data__,Ue=Ze(_e,te);return Ue<0?void 0:_e[Ue][1]}var Ln=vn;function Vn(te){return Ze(this.__data__,te)>-1}var tr=Vn;function Kn(te,_e){var Ue=this.__data__,yt=Ze(Ue,te);return yt<0?(++this.size,Ue.push([te,_e])):Ue[yt][1]=_e,this}var Nn=Kn;function yr(te){var _e=-1,Ue=te==null?0:te.length;for(this.clear();++_e<Ue;){var yt=te[_e];this.set(yt[0],yt[1])}}yr.prototype.clear=og,yr.prototype.delete=on,yr.prototype.get=Ln,yr.prototype.has=tr,yr.prototype.set=Nn;var Rs=yr,li=lr(P,"Map"),ko=li;function Fr(){this.size=0,this.__data__={hash:new Ac,map:new(ko||Rs),string:new Ac}}var Wn=Fr;function Ic(te){var _e=typeof te;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?te!=="__proto__":te===null}var Br=Ic;function Ao(te,_e){var Ue=te.__data__;return Br(_e)?Ue[typeof _e=="string"?"string":"hash"]:Ue.map}var Tu=Ao;function oo(te){var _e=Tu(this,te).delete(te);return this.size-=_e?1:0,_e}var Il=oo;function vi(te){return Tu(this,te).get(te)}var Ra=vi;function Rc(te){return Tu(this,te).has(te)}var Ds=Rc;function Dc(te,_e){var Ue=Tu(this,te),yt=Ue.size;return Ue.set(te,_e),this.size+=Ue.size==yt?0:1,this}var Fd=Dc;function Da(te){var _e=-1,Ue=te==null?0:te.length;for(this.clear();++_e<Ue;){var yt=te[_e];this.set(yt[0],yt[1])}}Da.prototype.clear=Wn,Da.prototype.delete=Il,Da.prototype.get=Ra,Da.prototype.has=Ds,Da.prototype.set=Fd;var ag=Da,Pp="Expected a function";function lg(te,_e){if(typeof te!="function"||_e!=null&&typeof _e!="function")throw new TypeError(Pp);var Ue=function(){var yt=arguments,jn=_e?_e.apply(this,yt):yt[0],Er=Ue.cache;if(Er.has(jn))return Er.get(jn);var _s=te.apply(this,yt);return Ue.cache=Er.set(jn,_s)||Er,_s};return Ue.cache=new(lg.Cache||ag),Ue}lg.Cache=ag;var S1=lg,Rl=500;function Bd(te){var _e=S1(te,function(yt){return Ue.size===Rl&&Ue.clear(),yt}),Ue=_e.cache;return _e}var E1=Bd,Ud=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ey=/\\(\\)?/g,ty=E1(function(te){var _e=[];return te.charCodeAt(0)===46&&_e.push(""),te.replace(Ud,function(Ue,yt,jn,Er){_e.push(jn?Er.replace(ey,"$1"):yt||Ue)}),_e}),Dl=ty;function ny(te,_e){for(var Ue=-1,yt=te==null?0:te.length,jn=Array(yt);++Ue<yt;)jn[Ue]=_e(te[Ue],Ue,te);return jn}var C1=ny,zd=1/0,ug=Q?Q.prototype:void 0,cg=ug?ug.toString:void 0;function dg(te){if(typeof te=="string")return te;if(D(te))return C1(te,dg)+"";if(Pt(te))return cg?cg.call(te):"";var _e=te+"";return _e=="0"&&1/te==-zd?"-0":_e}var ry=dg;function iy(te){return te==null?"":ry(te)}var sy=iy;function oy(te,_e){return D(te)?te:In(te,_e)?[te]:Dl(sy(te))}var P1=oy,Oc=1/0;function Vd(te){if(typeof te=="string"||Pt(te))return te;var _e=te+"";return _e=="0"&&1/te==-Oc?"-0":_e}var T1=Vd;function hg(te,_e){_e=P1(_e,te);for(var Ue=0,yt=_e.length;te!=null&&Ue<yt;)te=te[T1(_e[Ue++])];return Ue&&Ue==yt?te:void 0}var Ol=hg;function Mu(te,_e,Ue){var yt=te==null?void 0:Ol(te,_e);return yt===void 0?Ue:yt}var ay=Mu;function Tp(te,_e){return function(Ue){return te(_e(Ue))}}var M1=Tp,k1=M1(Object.getPrototypeOf,Object),ly=k1,A1="[object Object]",I1=Function.prototype,uy=Object.prototype,cy=I1.toString,dy=uy.hasOwnProperty,pg=cy.call(Object);function hy(te){if(!ft(te)||Xe(te)!=A1)return!1;var _e=ly(te);if(_e===null)return!0;var Ue=dy.call(_e,"constructor")&&_e.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&cy.call(Ue)==pg}var py=hy;function fy(te){var _e=te==null?0:te.length;return _e?te[_e-1]:void 0}var fg=fy,Mp=new WeakMap,Lc=new WeakMap,my=Symbol("pointerMeta"),R1={get(te,_e){if(_e===my)return Mp.get(te);let Ue=Lc.get(te);Ue||(Ue=new Map,Lc.set(te,Ue));const yt=Ue.get(_e);if(yt!==void 0)return yt;const jn=Mp.get(te),Er=Hd({root:jn.root,path:[...jn.path,_e]});return Ue.set(_e,Er),Er}},Oa=te=>te[my],jd=te=>{const{root:_e,path:Ue}=Oa(te);return{root:_e,path:Ue}};function Hd(te){var _e;const Ue={root:te.root,path:(_e=te.path)!=null?_e:[]},yt={};return Mp.set(yt,Ue),new Proxy(yt,R1)}var ku=Hd,Ll=te=>te&&!!Oa(te);function mg(te,_e,Ue){return _e.length===0?Ue(te):Au(te,_e,Ue)}var Au=(te,_e,Ue)=>{if(_e.length===0)return Ue(te);if(Array.isArray(te)){let[yt,...jn]=_e;yt=parseInt(String(yt),10),isNaN(yt)&&(yt=0);const Er=te[yt],_s=Au(Er,jn,Ue);if(Er===_s)return te;const ia=[...te];return ia.splice(yt,1,_s),ia}else if(typeof te=="object"&&te!==null){const[yt,...jn]=_e,Er=te[yt],_s=Au(Er,jn,Ue);return Er===_s?te:v(m({},te),{[yt]:_s})}else{const[yt,...jn]=_e;return{[yt]:Au(void 0,jn,Ue)}}},as=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const te=this._head;if(te)return this._head=te.next,te.data}push(te){const _e={next:this._head,data:te};this._head=_e}};function Gd(te){return!!(te&&te.isPrism&&te.isPrism===!0)}function kp(){const te=()=>{},_e=new as,Ue=te;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{_e.push(Ue)},stopIgnoringDependencies:()=>{_e.peek()!==Ue||_e.pop()},reportResolutionStart:Bc=>{const Uc=_e.peek();Uc&&Uc(Bc),_e.push(Ue)},reportResolutionEnd:Bc=>{_e.pop()},pushCollector:Bc=>{_e.push(Bc)},popCollector:Bc=>{if(_e.peek()!==Bc)throw new Error("Popped collector is not on top of the stack");_e.pop()}}}function D1(){const te="__dataverse_discoveryMechanism_sharedStack",_e=typeof window<"u"?window:typeof Gi<"u"?Gi:{};if(_e){const Ue=_e[te];if(Ue&&typeof Ue=="object"&&Ue.type==="Dataverse_discoveryMechanism")return Ue;{const yt=kp();return _e[te]=yt,yt}}else return kp()}var{startIgnoringDependencies:Iu,stopIgnoringDependencies:Nl,reportResolutionEnd:gg,reportResolutionStart:O1,pushCollector:Ap,popCollector:L1}=D1(),gy=()=>{},vy=class{constructor(te,_e){this._fn=te,this._prismInstance=_e,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Ip(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=Ue=>{this._possiblyStaleDeps.add(Ue),this._markAsStale()};for(const Ue of this._dependencies)Ue._addDependent(this._reactToDependencyGoingStale);Iu(),this.getValue(),Nl()}get hasDependents(){return this._dependents.size>0}removeDependent(te){this._dependents.delete(te)}addDependent(te){this._dependents.add(te)}destroy(){for(const te of this._dependencies)te._removeDependent(this._reactToDependencyGoingStale);yg(this._scope)}getValue(){if(!this._isFresh){const te=this._recalculate();this._lastValue=te,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let te;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let yt=!1;Iu();for(const jn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(jn)!==jn.getValue()){yt=!0;break}if(Nl(),this._possiblyStaleDeps.clear(),!yt)return this._lastValue}const _e=new Set;this._cacheOfDendencyValues.clear();const Ue=yt=>{_e.add(yt),this._addDependency(yt)};Ap(Ue),ls.push(this._scope);try{te=this._fn()}catch(yt){console.error(yt)}finally{ls.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}L1(Ue);for(const yt of this._dependencies)_e.has(yt)||this._removeDependency(yt);this._dependencies=_e,Iu();for(const yt of _e)this._cacheOfDendencyValues.set(yt,yt.getValue());return Nl(),te}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const te of this._dependents)te(this._prismInstance)}}_addDependency(te){this._dependencies.has(te)||(this._dependencies.add(te),te._addDependent(this._reactToDependencyGoingStale))}_removeDependency(te){this._dependencies.has(te)&&(this._dependencies.delete(te),te._removeDependent(this._reactToDependencyGoingStale))}},vg={},N1=class{constructor(te){this._fn=te,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(te,_e,Ue=!1){const yt=()=>{te.onThisOrNextTick(Er)};let jn=vg;const Er=()=>{const ia=this.getValue();ia!==jn&&(jn=ia,_e(ia))};return this._addDependent(yt),Ue&&(jn=this.getValue(),_e(jn)),()=>{this._removeDependent(yt),te.offThisOrNextTick(Er),te.offNextTick(Er)}}onStale(te){const _e=()=>{this._removeDependent(Ue)},Ue=()=>te();return this._addDependent(Ue),_e}keepHot(){return this.onStale(()=>{})}_addDependent(te){this._state.hot||this._goHot(),this._state.handle.addDependent(te)}_goHot(){const te=new vy(this._fn,this);this._state={hot:!0,handle:te}}_removeDependent(te){const _e=this._state;if(!_e.hot)return;const Ue=_e.handle;Ue.removeDependent(te),Ue.hasDependents||(this._state={hot:!1,handle:void 0},Ue.destroy())}getValue(){O1(this);const te=this._state;let _e;return te.hot?_e=te.handle.getValue():_e=Wd(this._fn),gg(this),_e}},Ip=class{constructor(te){this._hotHandle=te,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(te,_e){let Ue=this._refs.get(te);if(Ue!==void 0)return Ue;{const yt={current:_e};return this._refs.set(te,yt),yt}}effect(te,_e,Ue){let yt=this.effects.get(te);yt===void 0&&(yt={cleanup:gy,deps:void 0},this.effects.set(te,yt)),_g(yt.deps,Ue)&&(yt.cleanup(),Iu(),yt.cleanup=Rp(_e,gy).value,Nl(),yt.deps=Ue)}memo(te,_e,Ue){let yt=this.memos.get(te);return yt===void 0&&(yt={cachedValue:null,deps:void 0},this.memos.set(te,yt)),_g(yt.deps,Ue)&&(Iu(),yt.cachedValue=Rp(_e,void 0).value,Nl(),yt.deps=Ue),yt.cachedValue}state(te,_e){const{value:Ue,setValue:yt}=this.memo("state/"+te,()=>{const jn={current:_e};return{value:jn,setValue:_s=>{jn.current=_s,this._hotHandle.forceStale()}}},[]);return[Ue.current,yt]}sub(te){return this.subs[te]||(this.subs[te]=new Ip(this._hotHandle)),this.subs[te]}cleanupEffects(){for(const te of this.effects.values())Rp(te.cleanup,void 0);this.effects.clear()}source(te,_e){const Ue="$$source/blah";return this.effect(Ue,()=>te(()=>{this._hotHandle.forceStale()}),[te]),_e()}};function yg(te){for(const _e of Object.values(te.subs))yg(_e);te.cleanupEffects()}function Rp(te,_e){try{return{value:te(),ok:!0}}catch(Ue){return setTimeout(function(){throw Ue}),{value:_e,ok:!1}}}var ls=new as;function F1(te,_e){const Ue=ls.peek();if(!Ue)throw new Error("prism.ref() is called outside of a prism() call.");return Ue.ref(te,_e)}function bg(te,_e,Ue){const yt=ls.peek();if(!yt)throw new Error("prism.effect() is called outside of a prism() call.");return yt.effect(te,_e,Ue)}function _g(te,_e){if(te===void 0||_e===void 0)return!0;const Ue=te.length;if(Ue!==_e.length)return!0;for(let yt=0;yt<Ue;yt++)if(te[yt]!==_e[yt])return!0;return!1}function wg(te,_e,Ue){const yt=ls.peek();if(!yt)throw new Error("prism.memo() is called outside of a prism() call.");return yt.memo(te,_e,Ue)}function us(te,_e){const Ue=ls.peek();if(!Ue)throw new Error("prism.state() is called outside of a prism() call.");return Ue.state(te,_e)}function Dp(){if(!ls.peek())throw new Error("The parent function is called outside of a prism() call.")}function B1(te,_e){const Ue=ls.peek();if(!Ue)throw new Error("prism.scope() is called outside of a prism() call.");const yt=Ue.sub(te);ls.push(yt);const jn=Rp(_e,void 0).value;return ls.pop(),jn}function Op(te,_e,Ue){return wg(te,()=>yi(_e),Ue).getValue()}function Lp(){return!!ls.peek()}function U1(te,_e){const Ue=ls.peek();if(!Ue)throw new Error("prism.source() is called outside of a prism() call.");return Ue.source(te,_e)}var yi=te=>new N1(te),Fl=class{effect(te,_e,Ue){console.warn("prism.effect() does not run in cold prisms")}memo(te,_e,Ue){return _e()}state(te,_e){return[_e,()=>{}]}ref(te,_e){return{current:_e}}sub(te){return new Fl}source(te,_e){return _e()}};function Wd(te){const _e=new Fl;ls.push(_e);let Ue;try{Ue=te()}catch(yt){console.error(yt)}finally{ls.pop()!==_e&&console.warn("The Prism hook stack has slipped. This is a bug.")}return Ue}yi.ref=F1,yi.effect=bg,yi.memo=wg,yi.ensurePrism=Dp,yi.state=us,yi.scope=B1,yi.sub=Op,yi.inPrism=Lp,yi.source=U1;var Nc=yi,xg;(function(te){te[te.Dict=0]="Dict",te[te.Array=1]="Array",te[te.Other=2]="Other"})(xg||(xg={}));var Ur=te=>Array.isArray(te)?1:py(te)?0:2,Sg=(te,_e,Ue=Ur(te))=>Ue===0&&typeof _e=="string"||Ue===1&&z1(_e)?te[_e]:void 0,z1=te=>{const _e=typeof te=="number"?te:parseInt(te,10);return!isNaN(_e)&&_e>=0&&_e<1/0&&(_e|0)===_e},Np=class{constructor(te,_e){this._parent=te,this._path=_e,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(te){this.identityChangeListeners.add(te)}removeIdentityChangeListener(te){this.identityChangeListeners.delete(te),this._checkForGC()}removeChild(te){this.children.delete(te),this._checkForGC()}getChild(te){return this.children.get(te)}getOrCreateChild(te){let _e=this.children.get(te);return _e||(_e=_e=new Np(this,this._path.concat([te])),this.children.set(te,_e)),_e}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(fg(this._path))}},Eg=class{constructor(te){this.$$isPointerToPrismProvider=!0,this.pointer=ku({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(_e,Ue)=>{const{path:yt}=jd(_e),jn=this._getOrCreateScopeForPath(yt);return jn.identityChangeListeners.add(Ue),()=>{jn.identityChangeListeners.delete(Ue)}},this._currentState=te,this._rootScope=new Np(void 0,[])}set(te){const _e=this._currentState;this._currentState=te,this._checkUpdates(this._rootScope,_e,te)}get(){return this._currentState}getByPointer(te){const _e=Ll(te)?te:te(this.pointer),Ue=jd(_e).path;return this._getIn(Ue)}_getIn(te){return te.length===0?this.get():ay(this.get(),te)}reduce(te){this.set(te(this.get()))}reduceByPointer(te,_e){const Ue=Ll(te)?te:te(this.pointer),yt=jd(Ue).path,jn=mg(this.get(),yt,_e);this.set(jn)}setByPointer(te,_e){this.reduceByPointer(te,()=>_e)}_checkUpdates(te,_e,Ue){if(_e===Ue)return;for(const Er of te.identityChangeListeners)Er(Ue);if(te.children.size===0)return;const yt=Ur(_e),jn=Ur(Ue);if(!(yt===2&&yt===jn))for(const[Er,_s]of te.children){const ia=Sg(_e,Er,yt),_y=Sg(Ue,Er,jn);this._checkUpdates(_s,ia,_y)}}_getOrCreateScopeForPath(te){let _e=this._rootScope;for(const Ue of te)_e=_e.getOrCreateChild(Ue);return _e}pointerToPrism(te){const{path:_e}=jd(te),Ue=jn=>this._onPointerValueChange(te,jn),yt=()=>this._getIn(_e);return Nc(()=>Nc.source(Ue,yt))}},yy=new WeakMap;function V1(te){return typeof te=="object"&&te!==null&&te.$$isPointerToPrismProvider===!0}var Fc=te=>{const _e=Oa(te);let Ue=yy.get(_e);if(!Ue){const yt=_e.root;if(!V1(yt))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");Ue=yt.pointerToPrism(te),yy.set(_e,Ue)}return Ue},Fp=te=>Ll(te)?Fc(te).getValue():Gd(te)?te.getValue():te;function*j1(te){let _e;if(Ll(te))_e=Fc(te);else if(Gd(te))_e=te;else throw new Error("Only pointers and prisms are supported");let Ue=0;const yt=_e.onStale(()=>{Ue++});try{for(;;){const jn=Ue;Ue=0,yield{value:_e.getValue(),ticks:jn}}}finally{yt()}}var by=60*3,$d=class{constructor(te){this._conf=te,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(te){this._scheduledForThisOrNextTick.add(te),this._dormant&&this._goActive()}onNextTick(te){this._scheduledForNextTick.add(te),this._dormant&&this._goActive()}offThisOrNextTick(te){this._scheduledForThisOrNextTick.delete(te)}offNextTick(te){this._scheduledForNextTick.delete(te)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var te,_e;this._dormant&&(this._dormant=!1,(_e=(te=this._conf)==null?void 0:te.onActive)==null||_e.call(te))}_goDormant(){var te,_e;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(_e=(te=this._conf)==null?void 0:te.onDormant)==null||_e.call(te))}tick(te=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=by)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=te;for(const _e of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(_e);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(te){const _e=this.time;if(te>10&&console.warn("_tick() recursing for 10 times"),te>100)throw new Error("Maximum recursion limit for _tick()");const Ue=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const yt of Ue)yt(_e);if(this._scheduledForThisOrNextTick.size>0)return this._tick(te+1)}};function*Cg(te){let _e;if(Ll(te))_e=Fc(te);else if(Gd(te))_e=te;else throw new Error("Only pointers and prisms are supported");const Ue=new $d,yt=_e.onChange(Ue,jn=>{});try{for(;;)Ue.tick(),yield _e.getValue()}finally{yt()}}var H1=class{constructor(te){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Eg(te),this.pointer=ku({root:this,path:[]})}setPointer(te){this._currentPointerBox.set(te)}pointerToPrism(te){const{path:_e}=Oa(te);return Nc(()=>{const Ue=this._currentPointerBox.prism.getValue(),yt=_e.reduce((jn,Er)=>jn[Er],Ue);return Fp(yt)})}}})(Ft);yN.exports;(function(t,e){var n=Object.create,r=Object.freeze,i=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,D=(s,a)=>{if(a=Symbol[s])return a;throw Error("Symbol."+s+" is not defined")},G=(s,a,l)=>a in s?i(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,N=(s,a)=>{for(var l in a||(a={}))E.call(a,l)&&G(s,l,a[l]);if(v)for(var l of v(a))k.call(a,l)&&G(s,l,a[l]);return s},z=(s,a)=>o(s,h(a)),U=(s,a)=>{var l={};for(var d in s)E.call(s,d)&&a.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&v)for(var d of v(s))a.indexOf(d)<0&&k.call(s,d)&&(l[d]=s[d]);return l},P=(s,a)=>()=>(s&&(a=s(s=0)),a),$=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),Q=(s,a)=>{for(var l in a)i(s,l,{get:a[l],enumerable:!0})},ye=(s,a,l,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let f of m(a))!E.call(s,f)&&f!==l&&i(s,f,{get:()=>a[f],enumerable:!(d=u(a,f))||d.enumerable});return s},q=(s,a,l)=>(l=s!=null?n(x(s)):{},ye(a||!s||!s.__esModule?i(l,"default",{value:s,enumerable:!0}):l,s)),ie=s=>ye(i({},"__esModule",{value:!0}),s),pe=(s,a,l)=>(G(s,typeof a!="symbol"?a+"":a,l),l),W=(s,a)=>r(i(s,"raw",{value:r(a||s.slice())})),he=(s,a,l)=>new Promise((d,f)=>{var g=S=>{try{_(l.next(S))}catch(C){f(C)}},b=S=>{try{_(l.throw(S))}catch(C){f(C)}},_=S=>S.done?d(S.value):Promise.resolve(S.value).then(g,b);_((l=l.apply(s,a)).next())}),Ye=function(s,a){this[0]=s,this[1]=a},at=s=>{var a=s[D("asyncIterator")],l=!1,d,f={};return a==null?(a=s[D("iterator")](),d=g=>f[g]=b=>a[g](b)):(a=a.call(s),d=g=>f[g]=b=>{if(l){if(l=!1,g==="throw")throw b;return b}return l=!0,{done:!1,value:new Ye(new Promise(_=>{var S=a[g](b);if(!(S instanceof Object))throw TypeError("Object expected");_(S)}),1)}}),f[D("iterator")]=()=>f,d("next"),"throw"in a?d("throw"):f.throw=g=>{throw g},"return"in a&&d("return"),f};function Et(s){Ge=s}function ue(){return Ge}var Ge,Te=P(()=>{});function it(s,a,l=[]){if(typeof s=="object"&&s){if(Ne(s)||Xe(s)){a(s,l);return}for(let[d,f]of Object.entries(s))it(f,a,[...l,d])}else{if(s==null)return;a(s,l)}}var Ne,Xe,qe=P(()=>{Ne=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"type")&&s.type==="image"&&Object.hasOwnProperty.call(s,"id")&&typeof s.id=="string"&&s.id!=="",Xe=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"r")&&Object.hasOwnProperty.call(s,"g")&&Object.hasOwnProperty.call(s,"b")&&Object.hasOwnProperty.call(s,"a")&&typeof s.r=="number"&&typeof s.g=="number"&&typeof s.b=="number"&&typeof s.a=="number"});function ft(s){return a=>typeof a=="object"&&!!a&&a.type===s}var Ct,mt,Pt,Rt,Jt,Yt,In,Tn=P(()=>{Ct=ft("Theatre_Project"),mt=ft("Theatre_Sheet"),Pt=ft("Theatre_SheetTemplate"),Rt=ft("Theatre_SheetObject"),Jt=ft("Theatre_SheetObjectTemplate"),Yt=ft("Theatre_Sheet_PublicAPI"),In=ft("Theatre_SheetObject_PublicAPI")}),bn,On,lt=P(()=>{bn=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,On=bn}),ti,Mn,_n,rn=P(()=>{lt(),ti=typeof self=="object"&&self&&self.Object===Object&&self,Mn=On||ti||Function("return this")(),_n=Mn}),Nr,En,xe=P(()=>{rn(),Nr=_n.Symbol,En=Nr});function fe(s){var a=Dt.call(s,kt),l=s[kt];try{s[kt]=void 0;var d=!0}catch{}var f=Nt.call(s);return d&&(a?s[kt]=l:delete s[kt]),f}var dt,Dt,Nt,kt,fn,en=P(()=>{xe(),dt=Object.prototype,Dt=dt.hasOwnProperty,Nt=dt.toString,kt=En?En.toStringTag:void 0,fn=fe});function sn(s){return qn.call(s)}var Dn,qn,Lt,sr=P(()=>{Dn=Object.prototype,qn=Dn.toString,Lt=sn});function Ae(s){return s==null?s===void 0?qt:Tt:Vt&&Vt in Object(s)?fn(s):Lt(s)}var Tt,qt,Vt,ln,$n=P(()=>{xe(),en(),sr(),Tt="[object Null]",qt="[object Undefined]",Vt=En?En.toStringTag:void 0,ln=Ae});function lr(s){return s!=null&&typeof s=="object"}var Fn,jt=P(()=>{Fn=lr});function Fe(s){return typeof s=="symbol"||Fn(s)&&ln(s)==Kt}var Kt,Wt,Cn=P(()=>{$n(),jt(),Kt="[object Symbol]",Wt=Fe});function xn(s,a){for(var l=-1,d=s==null?0:s.length,f=Array(d);++l<d;)f[l]=a(s[l],l,s);return f}var or,pr=P(()=>{or=xn}),Wr,Tr,ur=P(()=>{Wr=Array.isArray,Tr=Wr});function Zi(s){if(typeof s=="string")return s;if(Tr(s))return or(s,Zi)+"";if(Wt(s))return Ld?Ld.call(s):"";var a=s+"";return a=="0"&&1/s==-so?"-0":a}var so,kc,Ld,Pu,Ep=P(()=>{xe(),pr(),ur(),Cn(),so=1/0,kc=En?En.prototype:void 0,Ld=kc?kc.toString:void 0,Pu=Zi});function ra(s){for(var a=s.length;a--&&Ac.test(s.charAt(a)););return a}var Ac,Nd,og=P(()=>{Ac=/\s/,Nd=ra});function nl(s){return s&&s.slice(0,Nd(s)+1).replace(Cp,"")}var Cp,be,Ze=P(()=>{og(),Cp=/^\s+/,be=nl});function vt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var pt,ut=P(()=>{pt=vt});function on(s){if(typeof s=="number")return s;if(Wt(s))return vn;if(pt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=pt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=be(s);var l=Vn.test(s);return l||tr.test(s)?Kn(s.slice(2),l?2:8):Ln.test(s)?vn:+s}var vn,Ln,Vn,tr,Kn,Nn,yr=P(()=>{Ze(),ut(),Cn(),vn=0/0,Ln=/^[-+]0x[0-9a-f]+$/i,Vn=/^0b[01]+$/i,tr=/^0o[0-7]+$/i,Kn=parseInt,Nn=on});function Rs(s){if(!s)return s===0?s:0;if(s=Nn(s),s===li||s===-li){var a=s<0?-1:1;return a*ko}return s===s?s:0}var li,ko,Fr,Wn=P(()=>{yr(),li=1/0,ko=17976931348623157e292,Fr=Rs});function Ic(s){var a=Fr(s),l=a%1;return a===a?l?a-l:a:0}var Br,Ao=P(()=>{Wn(),Br=Ic});function Tu(s){return s}var oo,Il=P(()=>{oo=Tu});function vi(s){if(!pt(s))return!1;var a=ln(s);return a==Rc||a==Ds||a==Ra||a==Dc}var Ra,Rc,Ds,Dc,Fd,Da=P(()=>{$n(),ut(),Ra="[object AsyncFunction]",Rc="[object Function]",Ds="[object GeneratorFunction]",Dc="[object Proxy]",Fd=vi}),ag,Pp,lg=P(()=>{rn(),ag=_n["__core-js_shared__"],Pp=ag});function S1(s){return!!Rl&&Rl in s}var Rl,Bd,E1=P(()=>{lg(),Rl=function(){var s=/[^.]+$/.exec(Pp&&Pp.keys&&Pp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Bd=S1});function Ud(s){if(s!=null){try{return ty.call(s)}catch{}try{return s+""}catch{}}return""}var ey,ty,Dl,ny=P(()=>{ey=Function.prototype,ty=ey.toString,Dl=Ud});function C1(s){if(!pt(s)||Bd(s))return!1;var a=Fd(s)?sy:ug;return a.test(Dl(s))}var zd,ug,cg,dg,ry,iy,sy,oy,P1=P(()=>{Da(),E1(),ut(),ny(),zd=/[\\^$.*+?()[\]{}|]/g,ug=/^\[object .+?Constructor\]$/,cg=Function.prototype,dg=Object.prototype,ry=cg.toString,iy=dg.hasOwnProperty,sy=RegExp("^"+ry.call(iy).replace(zd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oy=C1});function Oc(s,a){return s==null?void 0:s[a]}var Vd,T1=P(()=>{Vd=Oc});function hg(s,a){var l=Vd(s,a);return oy(l)?l:void 0}var Ol,Mu=P(()=>{P1(),T1(),Ol=hg}),ay,Tp,M1=P(()=>{Mu(),rn(),ay=Ol(_n,"WeakMap"),Tp=ay});function k1(s,a,l){switch(l.length){case 0:return s.call(a);case 1:return s.call(a,l[0]);case 2:return s.call(a,l[0],l[1]);case 3:return s.call(a,l[0],l[1],l[2])}return s.apply(a,l)}var ly,A1=P(()=>{ly=k1});function I1(){}var uy,cy=P(()=>{uy=I1});function dy(s,a){var l=-1,d=s.length;for(a||(a=Array(d));++l<d;)a[l]=s[l];return a}var pg,hy=P(()=>{pg=dy});function py(s){var a=0,l=0;return function(){var d=Mp(),f=fg-(d-l);if(l=d,f>0){if(++a>=fy)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var fy,fg,Mp,Lc,my=P(()=>{fy=800,fg=16,Mp=Date.now,Lc=py});function R1(s){return function(){return s}}var Oa,jd=P(()=>{Oa=R1}),Hd,ku,Ll=P(()=>{Mu(),Hd=function(){try{var s=Ol(Object,"defineProperty");return s({},"",{}),s}catch{}}(),ku=Hd}),mg,Au,as=P(()=>{jd(),Ll(),Il(),mg=ku?function(s,a){return ku(s,"toString",{configurable:!0,enumerable:!1,value:Oa(a),writable:!0})}:oo,Au=mg}),Gd,kp,D1=P(()=>{as(),my(),Gd=Lc(Au),kp=Gd});function Iu(s,a,l,d){for(var f=s.length,g=l+(d?1:-1);d?g--:++g<f;)if(a(s[g],g,s))return g;return-1}var Nl,gg=P(()=>{Nl=Iu});function O1(s){return s!==s}var Ap,L1=P(()=>{Ap=O1});function gy(s,a,l){for(var d=l-1,f=s.length;++d<f;)if(s[d]===a)return d;return-1}var vy,vg=P(()=>{vy=gy});function N1(s,a,l){return a===a?vy(s,a,l):Nl(s,Ap,l)}var Ip,yg=P(()=>{gg(),L1(),vg(),Ip=N1});function Rp(s,a){var l=s==null?0:s.length;return!!l&&Ip(s,a,0)>-1}var ls,F1=P(()=>{yg(),ls=Rp});function bg(s,a){var l=typeof s;return a=a??_g,!!a&&(l=="number"||l!="symbol"&&wg.test(s))&&s>-1&&s%1==0&&s<a}var _g,wg,us,Dp=P(()=>{_g=9007199254740991,wg=/^(?:0|[1-9]\d*)$/,us=bg});function B1(s,a,l){a=="__proto__"&&ku?ku(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}var Op,Lp=P(()=>{Ll(),Op=B1});function U1(s,a){return s===a||s!==s&&a!==a}var yi,Fl=P(()=>{yi=U1});function Wd(s,a,l){var d=s[a];(!(xg.call(s,a)&&yi(d,l))||l===void 0&&!(a in s))&&Op(s,a,l)}var Nc,xg,Ur,Sg=P(()=>{Lp(),Fl(),Nc=Object.prototype,xg=Nc.hasOwnProperty,Ur=Wd});function z1(s,a,l){return a=Np(a===void 0?s.length-1:a,0),function(){for(var d=arguments,f=-1,g=Np(d.length-a,0),b=Array(g);++f<g;)b[f]=d[a+f];f=-1;for(var _=Array(a+1);++f<a;)_[f]=d[f];return _[a]=l(b),ly(s,this,_)}}var Np,Eg,yy=P(()=>{A1(),Np=Math.max,Eg=z1});function V1(s,a){return kp(Eg(s,a,oo),s+"")}var Fc,Fp=P(()=>{Il(),yy(),D1(),Fc=V1});function j1(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=by}var by,$d,Cg=P(()=>{by=9007199254740991,$d=j1});function H1(s){return s!=null&&$d(s.length)&&!Fd(s)}var te,_e=P(()=>{Da(),Cg(),te=H1});function Ue(s,a,l){if(!pt(l))return!1;var d=typeof a;return(d=="number"?te(l)&&us(a,l.length):d=="string"&&a in l)?yi(l[a],s):!1}var yt,jn=P(()=>{Fl(),_e(),Dp(),ut(),yt=Ue});function Er(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||_s;return s===l}var _s,ia,_y=P(()=>{_s=Object.prototype,ia=Er});function Bc(s,a){for(var l=-1,d=Array(s);++l<s;)d[l]=a(l);return d}var Uc,EM=P(()=>{Uc=Bc});function ZF(s){return Fn(s)&&ln(s)==CM}var CM,G1,QF=P(()=>{$n(),jt(),CM="[object Arguments]",G1=ZF}),W1,PM,TM,Pg,wy,$1=P(()=>{QF(),jt(),W1=Object.prototype,PM=W1.hasOwnProperty,TM=W1.propertyIsEnumerable,Pg=G1(function(){return arguments}())?G1:function(s){return Fn(s)&&PM.call(s,"callee")&&!TM.call(s,"callee")},wy=Pg});function K1(){return!1}var MM,kM=P(()=>{MM=K1}),X1,q1,xy,Y1,AM,IM,Sy,Z1=P(()=>{rn(),kM(),X1=e&&!e.nodeType&&e,q1=X1&&!0&&t&&!t.nodeType&&t,xy=q1&&q1.exports===X1,Y1=xy?_n.Buffer:void 0,AM=Y1?Y1.isBuffer:void 0,IM=AM||MM,Sy=IM});function RM(s){return Fn(s)&&$d(s.length)&&!!ni[ln(s)]}var DM,OM,LM,Q1,NM,FM,J1,ex,BM,tx,UM,zM,Tg,VM,jM,HM,GM,WM,$M,KM,XM,qM,YM,ZM,ni,QM,JF=P(()=>{$n(),Cg(),jt(),DM="[object Arguments]",OM="[object Array]",LM="[object Boolean]",Q1="[object Date]",NM="[object Error]",FM="[object Function]",J1="[object Map]",ex="[object Number]",BM="[object Object]",tx="[object RegExp]",UM="[object Set]",zM="[object String]",Tg="[object WeakMap]",VM="[object ArrayBuffer]",jM="[object DataView]",HM="[object Float32Array]",GM="[object Float64Array]",WM="[object Int8Array]",$M="[object Int16Array]",KM="[object Int32Array]",XM="[object Uint8Array]",qM="[object Uint8ClampedArray]",YM="[object Uint16Array]",ZM="[object Uint32Array]",ni={},ni[HM]=ni[GM]=ni[WM]=ni[$M]=ni[KM]=ni[XM]=ni[qM]=ni[YM]=ni[ZM]=!0,ni[DM]=ni[OM]=ni[VM]=ni[LM]=ni[jM]=ni[Q1]=ni[NM]=ni[FM]=ni[J1]=ni[ex]=ni[BM]=ni[tx]=ni[UM]=ni[zM]=ni[Tg]=!1,QM=RM});function eB(s){return function(a){return s(a)}}var Ey,nx=P(()=>{Ey=eB}),rx,Bp,JM,Cy,ek,ix,tB=P(()=>{lt(),rx=e&&!e.nodeType&&e,Bp=rx&&!0&&t&&!t.nodeType&&t,JM=Bp&&Bp.exports===rx,Cy=JM&&On.process,ek=function(){try{var s=Bp&&Bp.require&&Bp.require("util").types;return s||Cy&&Cy.binding&&Cy.binding("util")}catch{}}(),ix=ek}),qr,tk,sx,nk=P(()=>{JF(),nx(),tB(),qr=ix&&ix.isTypedArray,tk=qr?Ey(qr):QM,sx=tk});function ox(s,a){var l=Tr(s),d=!l&&wy(s),f=!l&&!d&&Sy(s),g=!l&&!d&&!f&&sx(s),b=l||d||f||g,_=b?Uc(s.length,String):[],S=_.length;for(var C in s)(a||Up.call(s,C))&&!(b&&(C=="length"||f&&(C=="offset"||C=="parent")||g&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||us(C,S)))&&_.push(C);return _}var ax,Up,rk,lx=P(()=>{EM(),$1(),ur(),Z1(),Dp(),nk(),ax=Object.prototype,Up=ax.hasOwnProperty,rk=ox});function nB(s,a){return function(l){return s(a(l))}}var zc,ux=P(()=>{zc=nB}),ik,cx,rB=P(()=>{ux(),ik=zc(Object.keys,Object),cx=ik});function iB(s){if(!ia(s))return cx(s);var a=[];for(var l in Object(s))dx.call(s,l)&&l!="constructor"&&a.push(l);return a}var sk,dx,ok,ak=P(()=>{_y(),rB(),sk=Object.prototype,dx=sk.hasOwnProperty,ok=iB});function sB(s){return te(s)?rk(s):ok(s)}var Py,hx=P(()=>{lx(),ak(),_e(),Py=sB});function oB(s,a){if(Tr(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||Wt(s)?!0:uk.test(s)||!lk.test(s)||a!=null&&s in Object(a)}var lk,uk,Ty,Kd=P(()=>{ur(),Cn(),lk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uk=/^\w*$/,Ty=oB}),ck,zp,My=P(()=>{Mu(),ck=Ol(Object,"create"),zp=ck});function aB(){this.__data__=zp?zp(null):{},this.size=0}var dk,lB=P(()=>{My(),dk=aB});function uB(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var ky,cB=P(()=>{ky=uB});function hk(s){var a=this.__data__;if(zp){var l=a[s];return l===pk?void 0:l}return fk.call(a,s)?a[s]:void 0}var pk,Ay,fk,mk,dB=P(()=>{My(),pk="__lodash_hash_undefined__",Ay=Object.prototype,fk=Ay.hasOwnProperty,mk=hk});function gk(s){var a=this.__data__;return zp?a[s]!==void 0:yk.call(a,s)}var vk,yk,bk,hB=P(()=>{My(),vk=Object.prototype,yk=vk.hasOwnProperty,bk=gk});function pB(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=zp&&a===void 0?px:a,this}var px,_k,fB=P(()=>{My(),px="__lodash_hash_undefined__",_k=pB});function Vp(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var d=s[a];this.set(d[0],d[1])}}var fx,mB=P(()=>{lB(),cB(),dB(),hB(),fB(),Vp.prototype.clear=dk,Vp.prototype.delete=ky,Vp.prototype.get=mk,Vp.prototype.has=bk,Vp.prototype.set=_k,fx=Vp});function gB(){this.__data__=[],this.size=0}var wk,vB=P(()=>{wk=gB});function yB(s,a){for(var l=s.length;l--;)if(yi(s[l][0],a))return l;return-1}var Mg,Iy=P(()=>{Fl(),Mg=yB});function mx(s){var a=this.__data__,l=Mg(a,s);if(l<0)return!1;var d=a.length-1;return l==d?a.pop():Sk.call(a,l,1),--this.size,!0}var xk,Sk,gx,bB=P(()=>{Iy(),xk=Array.prototype,Sk=xk.splice,gx=mx});function _B(s){var a=this.__data__,l=Mg(a,s);return l<0?void 0:a[l][1]}var Ek,wB=P(()=>{Iy(),Ek=_B});function xB(s){return Mg(this.__data__,s)>-1}var Ck,vx=P(()=>{Iy(),Ck=xB});function yx(s,a){var l=this.__data__,d=Mg(l,s);return d<0?(++this.size,l.push([s,a])):l[d][1]=a,this}var Pk,Tk=P(()=>{Iy(),Pk=yx});function Xd(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var d=s[a];this.set(d[0],d[1])}}var jp,Ry=P(()=>{vB(),bB(),wB(),vx(),Tk(),Xd.prototype.clear=wk,Xd.prototype.delete=gx,Xd.prototype.get=Ek,Xd.prototype.has=Ck,Xd.prototype.set=Pk,jp=Xd}),bx,qd,_x=P(()=>{Mu(),rn(),bx=Ol(_n,"Map"),qd=bx});function SB(){this.size=0,this.__data__={hash:new fx,map:new(qd||jp),string:new fx}}var Mk,EB=P(()=>{mB(),Ry(),_x(),Mk=SB});function CB(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}var kk,PB=P(()=>{kk=CB});function TB(s,a){var l=s.__data__;return kk(a)?l[typeof a=="string"?"string":"hash"]:l.map}var kg,Dy=P(()=>{PB(),kg=TB});function MB(s){var a=kg(this,s).delete(s);return this.size-=a?1:0,a}var wx,kB=P(()=>{Dy(),wx=MB});function AB(s){return kg(this,s).get(s)}var Ak,IB=P(()=>{Dy(),Ak=AB});function RB(s){return kg(this,s).has(s)}var Ik,DB=P(()=>{Dy(),Ik=RB});function OB(s,a){var l=kg(this,s),d=l.size;return l.set(s,a),this.size+=l.size==d?0:1,this}var Rk,LB=P(()=>{Dy(),Rk=OB});function Hp(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var d=s[a];this.set(d[0],d[1])}}var Bl,Yd=P(()=>{EB(),kB(),IB(),DB(),LB(),Hp.prototype.clear=Mk,Hp.prototype.delete=wx,Hp.prototype.get=Ak,Hp.prototype.has=Ik,Hp.prototype.set=Rk,Bl=Hp});function xx(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(Dk);var l=function(){var d=arguments,f=a?a.apply(this,d):d[0],g=l.cache;if(g.has(f))return g.get(f);var b=s.apply(this,d);return l.cache=g.set(f,b)||g,b};return l.cache=new(xx.Cache||Bl),l}var Dk,Sx,Ok=P(()=>{Yd(),Dk="Expected a function",xx.Cache=Bl,Sx=xx});function Lk(s){var a=Sx(s,function(d){return l.size===Ex&&l.clear(),d}),l=a.cache;return a}var Ex,Nk,Fk=P(()=>{Ok(),Ex=500,Nk=Lk}),Cx,Bk,Uk,zk,NB=P(()=>{Fk(),Cx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bk=/\\(\\)?/g,Uk=Nk(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Cx,function(l,d,f,g){a.push(f?g.replace(Bk,"$1"):d||l)}),a}),zk=Uk});function FB(s){return s==null?"":Pu(s)}var Ag,Vk=P(()=>{Ep(),Ag=FB});function BB(s,a){return Tr(s)?s:Ty(s,a)?[s]:zk(Ag(s))}var Ig,Px=P(()=>{ur(),Kd(),NB(),Vk(),Ig=BB});function Tx(s){if(typeof s=="string"||Wt(s))return s;var a=s+"";return a=="0"&&1/s==-jk?"-0":a}var jk,Gp,Rg=P(()=>{Cn(),jk=1/0,Gp=Tx});function UB(s,a){a=Ig(a,s);for(var l=0,d=a.length;s!=null&&l<d;)s=s[Gp(a[l++])];return l&&l==d?s:void 0}var Dg,Mx=P(()=>{Px(),Rg(),Dg=UB});function zB(s,a,l){var d=s==null?void 0:Dg(s,a);return d===void 0?l:d}var Zd,Wp=P(()=>{Mx(),Zd=zB});function VB(s,a){for(var l=-1,d=a.length,f=s.length;++l<d;)s[f+l]=a[l];return s}var Og,Hk=P(()=>{Og=VB});function jB(s){return Tr(s)||wy(s)||!!(kx&&s&&s[kx])}var kx,Oy,HB=P(()=>{xe(),$1(),ur(),kx=En?En.isConcatSpreadable:void 0,Oy=jB});function Ly(s,a,l,d,f){var g=-1,b=s.length;for(l||(l=Oy),f||(f=[]);++g<b;){var _=s[g];a>0&&l(_)?a>1?Ly(_,a-1,l,d,f):Og(f,_):d||(f[f.length]=_)}return f}var Gk,Ax=P(()=>{Hk(),HB(),Gk=Ly}),Ix,Wk,$k=P(()=>{ux(),Ix=zc(Object.getPrototypeOf,Object),Wk=Ix});function Kk(s){if(!Fn(s)||ln(s)!=Rx)return!1;var a=Wk(s);if(a===null)return!0;var l=qk.call(a,"constructor")&&a.constructor;return typeof l=="function"&&l instanceof l&&Ox.call(l)==Yk}var Rx,Dx,Xk,Ox,qk,Yk,Ny,Vc=P(()=>{$n(),$k(),jt(),Rx="[object Object]",Dx=Function.prototype,Xk=Object.prototype,Ox=Dx.toString,qk=Xk.hasOwnProperty,Yk=Ox.call(Object),Ny=Kk});function Lg(s){var a=Math[s];return function(l,d){if(l=Nn(l),d=d==null?0:Qk(Br(d),292),d&&Zk(l)){var f=(Ag(l)+"e").split("e"),g=a(f[0]+"e"+(+f[1]+d));return f=(Ag(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-d))}return a(l)}}var Zk,Qk,Jk,GB=P(()=>{rn(),Ao(),yr(),Vk(),Zk=_n.isFinite,Qk=Math.min,Jk=Lg});function WB(s,a,l){return s===s&&(l!==void 0&&(s=s<=l?s:l),a!==void 0&&(s=s>=a?s:a)),s}var Ng,$B=P(()=>{Ng=WB});function Lx(s,a,l){return l===void 0&&(l=a,a=void 0),l!==void 0&&(l=Nn(l),l=l===l?l:0),a!==void 0&&(a=Nn(a),a=a===a?a:0),Ng(Nn(s),a,l)}var bi,Fy=P(()=>{$B(),yr(),bi=Lx});function KB(){this.__data__=new jp,this.size=0}var eA,XB=P(()=>{Ry(),eA=KB});function tA(s){var a=this.__data__,l=a.delete(s);return this.size=a.size,l}var Nx,qB=P(()=>{Nx=tA});function YB(s){return this.__data__.get(s)}var nA,ZB=P(()=>{nA=YB});function QB(s){return this.__data__.has(s)}var rA,JB=P(()=>{rA=QB});function eU(s,a){var l=this.__data__;if(l instanceof jp){var d=l.__data__;if(!qd||d.length<iA-1)return d.push([s,a]),this.size=++l.size,this;l=this.__data__=new Bl(d)}return l.set(s,a),this.size=l.size,this}var iA,sA,tU=P(()=>{Ry(),_x(),Yd(),iA=200,sA=eU});function $p(s){var a=this.__data__=new jp(s);this.size=a.size}var Fg,oA=P(()=>{Ry(),XB(),qB(),ZB(),JB(),tU(),$p.prototype.clear=eA,$p.prototype.delete=Nx,$p.prototype.get=nA,$p.prototype.has=rA,$p.prototype.set=sA,Fg=$p});function nU(s,a){for(var l=-1,d=s==null?0:s.length,f=0,g=[];++l<d;){var b=s[l];a(b,l,s)&&(g[f++]=b)}return g}var aA,rU=P(()=>{aA=nU});function iU(){return[]}var lA,sU=P(()=>{lA=iU}),uA,cA,Fx,dA,hA,oU=P(()=>{rU(),sU(),uA=Object.prototype,cA=uA.propertyIsEnumerable,Fx=Object.getOwnPropertySymbols,dA=Fx?function(s){return s==null?[]:(s=Object(s),aA(Fx(s),function(a){return cA.call(s,a)}))}:lA,hA=dA});function aU(s,a,l){var d=a(s);return Tr(s)?d:Og(d,l(s))}var pA,lU=P(()=>{Hk(),ur(),pA=aU});function uU(s){return pA(s,Py,hA)}var By,cU=P(()=>{lU(),oU(),hx(),By=uU}),fA,Uy,dU=P(()=>{Mu(),rn(),fA=Ol(_n,"DataView"),Uy=fA}),mA,Bg,hU=P(()=>{Mu(),rn(),mA=Ol(_n,"Promise"),Bg=mA}),gA,Qd,vA=P(()=>{Mu(),rn(),gA=Ol(_n,"Set"),Qd=gA}),Bx,Ux,zx,Vx,jx,Hx,Gx,yA,bA,_A,Wx,jc,$x,pU=P(()=>{dU(),_x(),hU(),vA(),M1(),$n(),ny(),Bx="[object Map]",Ux="[object Object]",zx="[object Promise]",Vx="[object Set]",jx="[object WeakMap]",Hx="[object DataView]",Gx=Dl(Uy),yA=Dl(qd),bA=Dl(Bg),_A=Dl(Qd),Wx=Dl(Tp),jc=ln,(Uy&&jc(new Uy(new ArrayBuffer(1)))!=Hx||qd&&jc(new qd)!=Bx||Bg&&jc(Bg.resolve())!=zx||Qd&&jc(new Qd)!=Vx||Tp&&jc(new Tp)!=jx)&&(jc=function(s){var a=ln(s),l=a==Ux?s.constructor:void 0,d=l?Dl(l):"";if(d)switch(d){case Gx:return Hx;case yA:return Bx;case bA:return zx;case _A:return Vx;case Wx:return jx}return a}),$x=jc}),wA,Kx,fU=P(()=>{rn(),wA=_n.Uint8Array,Kx=wA});function mU(s){return this.__data__.set(s,xA),this}var xA,SA,gU=P(()=>{xA="__lodash_hash_undefined__",SA=mU});function vU(s){return this.__data__.has(s)}var EA,yU=P(()=>{EA=vU});function zy(s){var a=-1,l=s==null?0:s.length;for(this.__data__=new Bl;++a<l;)this.add(s[a])}var Xx,CA=P(()=>{Yd(),gU(),yU(),zy.prototype.add=zy.prototype.push=SA,zy.prototype.has=EA,Xx=zy});function ri(s,a){for(var l=-1,d=s==null?0:s.length;++l<d;)if(a(s[l],l,s))return!0;return!1}var Ug,bU=P(()=>{Ug=ri});function _U(s,a){return s.has(a)}var qx,PA=P(()=>{qx=_U});function wU(s,a,l,d,f,g){var b=l&TA,_=s.length,S=a.length;if(_!=S&&!(b&&S>_))return!1;var C=g.get(s),I=g.get(a);if(C&&I)return C==a&&I==s;var O=-1,R=!0,A=l&MA?new Xx:void 0;for(g.set(s,a),g.set(a,s);++O<_;){var F=s[O],L=a[O];if(d)var V=b?d(L,F,O,a,s,g):d(F,L,O,s,a,g);if(V!==void 0){if(V)continue;R=!1;break}if(A){if(!Ug(a,function(H,K){if(!qx(A,K)&&(F===H||f(F,H,l,d,g)))return A.push(K)})){R=!1;break}}else if(!(F===L||f(F,L,l,d,g))){R=!1;break}}return g.delete(s),g.delete(a),R}var TA,MA,Yx,kA=P(()=>{CA(),bU(),PA(),TA=1,MA=2,Yx=wU});function xU(s){var a=-1,l=Array(s.size);return s.forEach(function(d,f){l[++a]=[f,d]}),l}var zg,SU=P(()=>{zg=xU});function EU(s){var a=-1,l=Array(s.size);return s.forEach(function(d){l[++a]=d}),l}var Vy,Zx=P(()=>{Vy=EU});function CU(s,a,l,d,f,g,b){switch(l){case VA:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case zA:return!(s.byteLength!=a.byteLength||!g(new Kx(s),new Kx(a)));case RA:case Qx:case LA:return yi(+s,+a);case DA:return s.name==a.name&&s.message==a.message;case NA:case BA:return s==a+"";case OA:var _=zg;case FA:var S=d&AA;if(_||(_=Vy),s.size!=a.size&&!S)return!1;var C=b.get(s);if(C)return C==a;d|=IA,b.set(s,a);var I=Yx(_(s),_(a),d,f,g,b);return b.delete(s),I;case UA:if(jy)return jy.call(s)==jy.call(a)}return!1}var AA,IA,RA,Qx,DA,OA,LA,NA,FA,BA,UA,zA,VA,Jx,jy,jA,PU=P(()=>{xe(),fU(),Fl(),kA(),SU(),Zx(),AA=1,IA=2,RA="[object Boolean]",Qx="[object Date]",DA="[object Error]",OA="[object Map]",LA="[object Number]",NA="[object RegExp]",FA="[object Set]",BA="[object String]",UA="[object Symbol]",zA="[object ArrayBuffer]",VA="[object DataView]",Jx=En?En.prototype:void 0,jy=Jx?Jx.valueOf:void 0,jA=CU});function TU(s,a,l,d,f,g){var b=l&HA,_=By(s),S=_.length,C=By(a),I=C.length;if(S!=I&&!b)return!1;for(var O=S;O--;){var R=_[O];if(!(b?R in a:WA.call(a,R)))return!1}var A=g.get(s),F=g.get(a);if(A&&F)return A==a&&F==s;var L=!0;g.set(s,a),g.set(a,s);for(var V=b;++O<S;){R=_[O];var H=s[R],K=a[R];if(d)var Z=b?d(K,H,R,a,s,g):d(H,K,R,s,a,g);if(!(Z===void 0?H===K||f(H,K,l,d,g):Z)){L=!1;break}V||(V=R=="constructor")}if(L&&!V){var re=s.constructor,ne=a.constructor;re!=ne&&"constructor"in s&&"constructor"in a&&!(typeof re=="function"&&re instanceof re&&typeof ne=="function"&&ne instanceof ne)&&(L=!1)}return g.delete(s),g.delete(a),L}var HA,GA,WA,eS,tS=P(()=>{cU(),HA=1,GA=Object.prototype,WA=GA.hasOwnProperty,eS=TU});function MU(s,a,l,d,f,g){var b=Tr(s),_=Tr(a),S=b?rS:$x(s),C=_?rS:$x(a);S=S==nS?Vg:S,C=C==nS?Vg:C;var I=S==Vg,O=C==Vg,R=S==C;if(R&&Sy(s)){if(!Sy(a))return!1;b=!0,I=!1}if(R&&!I)return g||(g=new Fg),b||sx(s)?Yx(s,a,l,d,f,g):jA(s,a,S,l,d,f,g);if(!(l&$A)){var A=I&&iS.call(s,"__wrapped__"),F=O&&iS.call(a,"__wrapped__");if(A||F){var L=A?s.value():s,V=F?a.value():a;return g||(g=new Fg),f(L,V,l,d,g)}}return R?(g||(g=new Fg),eS(s,a,l,d,f,g)):!1}var $A,nS,rS,Vg,KA,iS,XA,qA=P(()=>{oA(),kA(),PU(),tS(),pU(),ur(),Z1(),nk(),$A=1,nS="[object Arguments]",rS="[object Array]",Vg="[object Object]",KA=Object.prototype,iS=KA.hasOwnProperty,XA=MU});function sS(s,a,l,d,f){return s===a?!0:s==null||a==null||!Fn(s)&&!Fn(a)?s!==s&&a!==a:XA(s,a,l,d,sS,f)}var Kp,YA=P(()=>{qA(),jt(),Kp=sS});function ZA(s,a,l,d){var f=l.length,g=f,b=!d;if(s==null)return!g;for(s=Object(s);f--;){var _=l[f];if(b&&_[2]?_[1]!==s[_[0]]:!(_[0]in s))return!1}for(;++f<g;){_=l[f];var S=_[0],C=s[S],I=_[1];if(b&&_[2]){if(C===void 0&&!(S in s))return!1}else{var O=new Fg;if(d)var R=d(C,I,S,s,a,O);if(!(R===void 0?Kp(I,C,QA|JA,d,O):R))return!1}}return!0}var QA,JA,oS,e2=P(()=>{oA(),YA(),QA=1,JA=2,oS=ZA});function kU(s){return s===s&&!pt(s)}var aS,t2=P(()=>{ut(),aS=kU});function AU(s){for(var a=Py(s),l=a.length;l--;){var d=a[l],f=s[d];a[l]=[d,f,aS(f)]}return a}var n2,r2=P(()=>{t2(),hx(),n2=AU});function IU(s,a){return function(l){return l==null?!1:l[s]===a&&(a!==void 0||s in Object(l))}}var lS,i2=P(()=>{lS=IU});function s2(s){var a=n2(s);return a.length==1&&a[0][2]?lS(a[0][0],a[0][1]):function(l){return l===s||oS(l,s,a)}}var o2,RU=P(()=>{e2(),r2(),i2(),o2=s2});function DU(s,a){return s!=null&&a in Object(s)}var a2,OU=P(()=>{a2=DU});function LU(s,a,l){a=Ig(a,s);for(var d=-1,f=a.length,g=!1;++d<f;){var b=Gp(a[d]);if(!(g=s!=null&&l(s,b)))break;s=s[b]}return g||++d!=f?g:(f=s==null?0:s.length,!!f&&$d(f)&&us(b,f)&&(Tr(s)||wy(s)))}var l2,NU=P(()=>{Px(),$1(),ur(),Dp(),Cg(),Rg(),l2=LU});function FU(s,a){return s!=null&&l2(s,a,a2)}var u2,BU=P(()=>{OU(),NU(),u2=FU});function UU(s,a){return Ty(s)&&aS(a)?lS(Gp(s),a):function(l){var d=Zd(l,s);return d===void 0&&d===a?u2(l,s):Kp(a,d,c2|uS)}}var c2,uS,d2,zU=P(()=>{YA(),Wp(),BU(),Kd(),t2(),i2(),Rg(),c2=1,uS=2,d2=UU});function VU(s){return function(a){return a==null?void 0:a[s]}}var h2,jU=P(()=>{h2=VU});function HU(s){return function(a){return Dg(a,s)}}var p2,GU=P(()=>{Mx(),p2=HU});function WU(s){return Ty(s)?h2(Gp(s)):p2(s)}var f2,$U=P(()=>{jU(),GU(),Kd(),Rg(),f2=WU});function KU(s){return typeof s=="function"?s:s==null?oo:typeof s=="object"?Tr(s)?d2(s[0],s[1]):o2(s):f2(s)}var Xp,Jd=P(()=>{RU(),zU(),Il(),ur(),$U(),Xp=KU});function XU(s,a,l,d){for(var f=-1,g=s==null?0:s.length;++f<g;){var b=s[f];a(d,b,l(b),s)}return d}var m2,qU=P(()=>{m2=XU});function YU(s){return function(a,l,d){for(var f=-1,g=Object(a),b=d(a),_=b.length;_--;){var S=b[s?_:++f];if(l(g[S],S,g)===!1)break}return a}}var g2,ZU=P(()=>{g2=YU}),v2,y2,QU=P(()=>{ZU(),v2=g2(),y2=v2});function JU(s,a){return s&&y2(s,a,Py)}var cS,b2=P(()=>{QU(),hx(),cS=JU});function e5(s,a){return function(l,d){if(l==null)return l;if(!te(l))return s(l,d);for(var f=l.length,g=a?f:-1,b=Object(l);(a?g--:++g<f)&&d(b[g],g,b)!==!1;);return l}}var _2,t5=P(()=>{_e(),_2=e5}),w2,dS,x2=P(()=>{b2(),t5(),w2=_2(cS),dS=w2});function S2(s,a,l,d){return dS(s,function(f,g,b){a(d,f,l(f),b)}),d}var E2,n5=P(()=>{x2(),E2=S2});function C2(s,a){return function(l,d){var f=Tr(l)?m2:E2,g=a?a():{};return f(l,s,Xp(d,2),g)}}var P2,r5=P(()=>{qU(),n5(),Jd(),ur(),P2=C2}),T2,Hy,i5=P(()=>{rn(),T2=function(){return _n.Date.now()},Hy=T2});function s5(s,a,l){var d,f,g,b,_,S,C=0,I=!1,O=!1,R=!0;if(typeof s!="function")throw new TypeError(Gy);a=Nn(a)||0,pt(l)&&(I=!!l.leading,O="maxWait"in l,g=O?Wy(Nn(l.maxWait)||0,a):g,R="trailing"in l?!!l.trailing:R);function A(le){var Ce=d,ve=f;return d=f=void 0,C=le,b=s.apply(ve,Ce),b}function F(le){return C=le,_=setTimeout(H,a),I?A(le):b}function L(le){var Ce=le-S,ve=le-C,we=a-Ce;return O?M2(we,g-ve):we}function V(le){var Ce=le-S,ve=le-C;return S===void 0||Ce>=a||Ce<0||O&&ve>=g}function H(){var le=Hy();if(V(le))return K(le);_=setTimeout(H,L(le))}function K(le){return _=void 0,R&&d?A(le):(d=f=void 0,b)}function Z(){_!==void 0&&clearTimeout(_),C=0,d=S=f=_=void 0}function re(){return _===void 0?b:K(Hy())}function ne(){var le=Hy(),Ce=V(le);if(d=arguments,f=this,S=le,Ce){if(_===void 0)return F(S);if(O)return clearTimeout(_),_=setTimeout(H,a),A(S)}return _===void 0&&(_=setTimeout(H,a)),b}return ne.cancel=Z,ne.flush=re,ne}var Gy,Wy,M2,$y,hS=P(()=>{ut(),i5(),yr(),Gy="Expected a function",Wy=Math.max,M2=Math.min,$y=s5});function k2(s,a,l){for(var d=-1,f=s==null?0:s.length;++d<f;)if(l(a,s[d]))return!0;return!1}var A2,I2=P(()=>{A2=k2});function R2(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}var eh,Ky=P(()=>{eh=R2});function o5(s,a,l){var d=s==null?0:s.length;if(!d)return-1;var f=l==null?0:Br(l);return f<0&&(f=pS(d+f,0)),Nl(s,Xp(a,3),f)}var pS,fS,a5=P(()=>{gg(),Jd(),Ao(),pS=Math.max,fS=o5});function l5(s,a,l){var d=s==null?0:s.length;if(!d)return-1;var f=d-1;return l!==void 0&&(f=Br(l),f=l<0?mS(d+f,0):D2(f,d-1)),Nl(s,Xp(a,3),f,!0)}var mS,D2,O2,u5=P(()=>{gg(),Jd(),Ao(),mS=Math.max,D2=Math.min,O2=l5});function c5(s,a){var l=-1,d=te(s)?Array(s.length):[];return dS(s,function(f,g,b){d[++l]=a(f,g,b)}),d}var qp,d5=P(()=>{x2(),_e(),qp=c5});function L2(s,a,l){return s>=F2(a,l)&&s<N2(a,l)}var N2,F2,B2,Xy=P(()=>{N2=Math.max,F2=Math.min,B2=L2});function gS(s,a,l){return a=Fr(a),l===void 0?(l=a,a=0):l=Fr(l),s=Nn(s),B2(s,a,l)}var vS,h5=P(()=>{Xy(),Wn(),yr(),vS=gS});function ii(s){return typeof s=="number"&&s==Br(s)}var Io,sa=P(()=>{Ao(),Io=ii}),Hc,zr,Ru=P(()=>{Lp(),r5(),Hc=P2(function(s,a,l){Op(s,l,a)}),zr=Hc});function U2(s,a){var l={};return a=Xp(a,3),cS(s,function(d,f,g){Op(l,f,a(d,f,g))}),l}var th,z2=P(()=>{Lp(),b2(),Jd(),th=U2});function p5(s,a,l,d){if(!pt(s))return s;a=Ig(a,s);for(var f=-1,g=a.length,b=g-1,_=s;_!=null&&++f<g;){var S=Gp(a[f]),C=l;if(S==="__proto__"||S==="constructor"||S==="prototype")return s;if(f!=b){var I=_[S];C=d?d(I,S,_):void 0,C===void 0&&(C=pt(I)?I:us(a[f+1])?[]:{})}Ur(_,S,C),_=_[S]}return s}var V2,f5=P(()=>{Sg(),Px(),Dp(),ut(),Rg(),V2=p5});function j2(s,a){var l=s.length;for(s.sort(a);l--;)s[l]=s[l].value;return s}var yS,qy=P(()=>{yS=j2});function H2(s,a){if(s!==a){var l=s!==void 0,d=s===null,f=s===s,g=Wt(s),b=a!==void 0,_=a===null,S=a===a,C=Wt(a);if(!_&&!C&&!g&&s>a||g&&b&&S&&!_&&!C||d&&b&&S||!l&&S||!f)return 1;if(!d&&!g&&!C&&s<a||C&&l&&f&&!d&&!g||_&&l&&f||!b&&f||!S)return-1}return 0}var G2,W2=P(()=>{Cn(),G2=H2});function $2(s,a,l){for(var d=-1,f=s.criteria,g=a.criteria,b=f.length,_=l.length;++d<b;){var S=G2(f[d],g[d]);if(S){if(d>=_)return S;var C=l[d];return S*(C=="desc"?-1:1)}}return s.index-a.index}var bS,m5=P(()=>{W2(),bS=$2});function g5(s,a,l){a.length?a=or(a,function(g){return Tr(g)?function(b){return Dg(b,g.length===1?g[0]:g)}:g}):a=[oo];var d=-1;a=or(a,Ey(Xp));var f=qp(s,function(g,b,_){var S=or(a,function(C){return C(g)});return{criteria:S,index:++d,value:g}});return yS(f,function(g,b){return bS(g,b,l)})}var _S,v5=P(()=>{pr(),Mx(),Jd(),d5(),qy(),nx(),m5(),Il(),ur(),_S=g5});function y5(s,a,l,d){for(var f=l-1,g=s.length;++f<g;)if(d(s[f],a))return f;return-1}var Yp,K2=P(()=>{Yp=y5});function b5(s,a,l,d){var f=d?Yp:Ip,g=-1,b=a.length,_=s;for(s===a&&(a=pg(a)),l&&(_=or(s,Ey(l)));++g<b;)for(var S=0,C=a[g],I=l?l(C):C;(S=f(_,I,S,d))>-1;)_!==s&&cs.call(_,S,1),cs.call(s,S,1);return s}var X2,cs,Du,_5=P(()=>{pr(),yg(),K2(),nx(),hy(),X2=Array.prototype,cs=X2.splice,Du=b5});function Yy(s,a){return s&&s.length&&a&&a.length?Du(s,a):s}var q2,w5=P(()=>{_5(),q2=Yy}),Y2,Z2,wS=P(()=>{Fp(),w5(),Y2=Fc(q2),Z2=Y2}),Q2,jg,Zp=P(()=>{GB(),Q2=Jk("round"),jg=Q2});function x5(s,a,l){return s==null?s:V2(s,a,l)}var Qp,Zy=P(()=>{f5(),Qp=x5}),Qy,J2,Jy=P(()=>{Ax(),v5(),Fp(),jn(),Qy=Fc(function(s,a){if(s==null)return[];var l=a.length;return l>1&&yt(s,a[0],a[1])?a=[]:l>2&&yt(a[0],a[1],a[2])&&(a=[a[0]]),_S(s,Gk(a,1),[])}),J2=Qy}),xS,SS,eI,S5=P(()=>{vA(),cy(),Zx(),xS=1/0,SS=Qd&&1/Vy(new Qd([,-0]))[1]==xS?function(s){return new Qd(s)}:uy,eI=SS});function E5(s,a,l){var d=-1,f=ls,g=s.length,b=!0,_=[],S=_;if(l)b=!1,f=A2;else if(g>=tI){var C=a?null:eI(s);if(C)return Vy(C);b=!1,f=qx,S=new Xx}else S=a?[]:_;e:for(;++d<g;){var I=s[d],O=a?a(I):I;if(I=l||I!==0?I:0,b&&O===O){for(var R=S.length;R--;)if(S[R]===O)continue e;a&&S.push(O),_.push(I)}else f(S,O,l)||(S!==_&&S.push(O),_.push(I))}return _}var tI,nI,C5=P(()=>{CA(),F1(),I2(),PA(),S5(),Zx(),tI=200,nI=E5});function P5(s){return s&&s.length?nI(s):[]}var Ro,nh=P(()=>{C5(),Ro=P5}),ui=P(()=>{Fy(),hS(),a5(),h5(),sa(),Vc(),Ky(),z2(),Ok(),Zp(),nh()}),ES=$((s,a)=>{var l;a.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Gi):d=>(l||(l=Promise.resolve())).then(d).catch(f=>setTimeout(()=>{throw f},0))}),rI=$(s=>{var a=Symbol.for("react.element"),l=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),R=Symbol.iterator;function A(de){return de===null||typeof de!="object"?null:(de=R&&de[R]||de["@@iterator"],typeof de=="function"?de:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function H(de,ge,Je){this.props=de,this.context=ge,this.refs=V,this.updater=Je||F}H.prototype.isReactComponent={},H.prototype.setState=function(de,ge){if(typeof de!="object"&&typeof de!="function"&&de!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,de,ge,"setState")},H.prototype.forceUpdate=function(de){this.updater.enqueueForceUpdate(this,de,"forceUpdate")};function K(){}K.prototype=H.prototype;function Z(de,ge,Je){this.props=de,this.context=ge,this.refs=V,this.updater=Je||F}var re=Z.prototype=new K;re.constructor=Z,L(re,H.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,le=Object.prototype.hasOwnProperty,Ce={current:null},ve={key:!0,ref:!0,__self:!0,__source:!0};function we(de,ge,Je){var nt,ot={},We=null,nn=null;if(ge!=null)for(nt in ge.ref!==void 0&&(nn=ge.ref),ge.key!==void 0&&(We=""+ge.key),ge)le.call(ge,nt)&&!ve.hasOwnProperty(nt)&&(ot[nt]=ge[nt]);var wt=arguments.length-2;if(wt===1)ot.children=Je;else if(1<wt){for(var Qt=Array(wt),mn=0;mn<wt;mn++)Qt[mn]=arguments[mn+2];ot.children=Qt}if(de&&de.defaultProps)for(nt in wt=de.defaultProps,wt)ot[nt]===void 0&&(ot[nt]=wt[nt]);return{$$typeof:a,type:de,key:We,ref:nn,props:ot,_owner:Ce.current}}function De(de,ge){return{$$typeof:a,type:de.type,key:ge,ref:de.ref,props:de.props,_owner:de._owner}}function rt(de){return typeof de=="object"&&de!==null&&de.$$typeof===a}function ce(de){var ge={"=":"=0",":":"=2"};return"$"+de.replace(/[=:]/g,function(Je){return ge[Je]})}var Re=/\/+/g;function J(de,ge){return typeof de=="object"&&de!==null&&de.key!=null?ce(""+de.key):ge.toString(36)}function Ve(de,ge,Je,nt,ot){var We=typeof de;(We==="undefined"||We==="boolean")&&(de=null);var nn=!1;if(de===null)nn=!0;else switch(We){case"string":case"number":nn=!0;break;case"object":switch(de.$$typeof){case a:case l:nn=!0}}if(nn)return nn=de,ot=ot(nn),de=nt===""?"."+J(nn,0):nt,ne(ot)?(Je="",de!=null&&(Je=de.replace(Re,"$&/")+"/"),Ve(ot,ge,Je,"",function(mn){return mn})):ot!=null&&(rt(ot)&&(ot=De(ot,Je+(!ot.key||nn&&nn.key===ot.key?"":(""+ot.key).replace(Re,"$&/")+"/")+de)),ge.push(ot)),1;if(nn=0,nt=nt===""?".":nt+":",ne(de))for(var wt=0;wt<de.length;wt++){We=de[wt];var Qt=nt+J(We,wt);nn+=Ve(We,ge,Je,Qt,ot)}else if(Qt=A(de),typeof Qt=="function")for(de=Qt.call(de),wt=0;!(We=de.next()).done;)We=We.value,Qt=nt+J(We,wt++),nn+=Ve(We,ge,Je,Qt,ot);else if(We==="object")throw ge=String(de),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(de).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.");return nn}function Ot(de,ge,Je){if(de==null)return de;var nt=[],ot=0;return Ve(de,nt,"","",function(We){return ge.call(Je,We,ot++)}),nt}function Me(de){if(de._status===-1){var ge=de._result;ge=ge(),ge.then(function(Je){(de._status===0||de._status===-1)&&(de._status=1,de._result=Je)},function(Je){(de._status===0||de._status===-1)&&(de._status=2,de._result=Je)}),de._status===-1&&(de._status=0,de._result=ge)}if(de._status===1)return de._result.default;throw de._result}var ke={current:null},He={transition:null},xt={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:He,ReactCurrentOwner:Ce};s.Children={map:Ot,forEach:function(de,ge,Je){Ot(de,function(){ge.apply(this,arguments)},Je)},count:function(de){var ge=0;return Ot(de,function(){ge++}),ge},toArray:function(de){return Ot(de,function(ge){return ge})||[]},only:function(de){if(!rt(de))throw Error("React.Children.only expected to receive a single React element child.");return de}},s.Component=H,s.Fragment=d,s.Profiler=g,s.PureComponent=Z,s.StrictMode=f,s.Suspense=C,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xt,s.cloneElement=function(de,ge,Je){if(de==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+de+".");var nt=L({},de.props),ot=de.key,We=de.ref,nn=de._owner;if(ge!=null){if(ge.ref!==void 0&&(We=ge.ref,nn=Ce.current),ge.key!==void 0&&(ot=""+ge.key),de.type&&de.type.defaultProps)var wt=de.type.defaultProps;for(Qt in ge)le.call(ge,Qt)&&!ve.hasOwnProperty(Qt)&&(nt[Qt]=ge[Qt]===void 0&&wt!==void 0?wt[Qt]:ge[Qt])}var Qt=arguments.length-2;if(Qt===1)nt.children=Je;else if(1<Qt){wt=Array(Qt);for(var mn=0;mn<Qt;mn++)wt[mn]=arguments[mn+2];nt.children=wt}return{$$typeof:a,type:de.type,key:ot,ref:We,props:nt,_owner:nn}},s.createContext=function(de){return de={$$typeof:_,_currentValue:de,_currentValue2:de,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},de.Provider={$$typeof:b,_context:de},de.Consumer=de},s.createElement=we,s.createFactory=function(de){var ge=we.bind(null,de);return ge.type=de,ge},s.createRef=function(){return{current:null}},s.forwardRef=function(de){return{$$typeof:S,render:de}},s.isValidElement=rt,s.lazy=function(de){return{$$typeof:O,_payload:{_status:-1,_result:de},_init:Me}},s.memo=function(de,ge){return{$$typeof:I,type:de,compare:ge===void 0?null:ge}},s.startTransition=function(de){var ge=He.transition;He.transition={};try{de()}finally{He.transition=ge}},s.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},s.useCallback=function(de,ge){return ke.current.useCallback(de,ge)},s.useContext=function(de){return ke.current.useContext(de)},s.useDebugValue=function(){},s.useDeferredValue=function(de){return ke.current.useDeferredValue(de)},s.useEffect=function(de,ge){return ke.current.useEffect(de,ge)},s.useId=function(){return ke.current.useId()},s.useImperativeHandle=function(de,ge,Je){return ke.current.useImperativeHandle(de,ge,Je)},s.useInsertionEffect=function(de,ge){return ke.current.useInsertionEffect(de,ge)},s.useLayoutEffect=function(de,ge){return ke.current.useLayoutEffect(de,ge)},s.useMemo=function(de,ge){return ke.current.useMemo(de,ge)},s.useReducer=function(de,ge,Je){return ke.current.useReducer(de,ge,Je)},s.useRef=function(de){return ke.current.useRef(de)},s.useState=function(de){return ke.current.useState(de)},s.useSyncExternalStore=function(de,ge,Je){return ke.current.useSyncExternalStore(de,ge,Je)},s.useTransition=function(){return ke.current.useTransition()},s.version="18.2.0"}),Oe=$((s,a)=>{a.exports=rI()}),iI=$(s=>{function a(ke,He){var xt=ke.length;ke.push(He);e:for(;0<xt;){var de=xt-1>>>1,ge=ke[de];if(0<f(ge,He))ke[de]=He,ke[xt]=ge,xt=de;else break e}}function l(ke){return ke.length===0?null:ke[0]}function d(ke){if(ke.length===0)return null;var He=ke[0],xt=ke.pop();if(xt!==He){ke[0]=xt;e:for(var de=0,ge=ke.length,Je=ge>>>1;de<Je;){var nt=2*(de+1)-1,ot=ke[nt],We=nt+1,nn=ke[We];if(0>f(ot,xt))We<ge&&0>f(nn,ot)?(ke[de]=nn,ke[We]=xt,de=We):(ke[de]=ot,ke[nt]=xt,de=nt);else if(We<ge&&0>f(nn,xt))ke[de]=nn,ke[We]=xt,de=We;else break e}}return He}function f(ke,He){var xt=ke.sortIndex-He.sortIndex;return xt!==0?xt:ke.id-He.id}typeof performance=="object"&&typeof performance.now=="function"?(g=performance,s.unstable_now=function(){return g.now()}):(b=Date,_=b.now(),s.unstable_now=function(){return b.now()-_});var g,b,_,S=[],C=[],I=1,O=null,R=3,A=!1,F=!1,L=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ke){for(var He=l(C);He!==null;){if(He.callback===null)d(C);else if(He.startTime<=ke)d(C),He.sortIndex=He.expirationTime,a(S,He);else break;He=l(C)}}function re(ke){if(L=!1,Z(ke),!F)if(l(S)!==null)F=!0,Ot(ne);else{var He=l(C);He!==null&&Me(re,He.startTime-ke)}}function ne(ke,He){F=!1,L&&(L=!1,H(ve),ve=-1),A=!0;var xt=R;try{for(Z(He),O=l(S);O!==null&&(!(O.expirationTime>He)||ke&&!rt());){var de=O.callback;if(typeof de=="function"){O.callback=null,R=O.priorityLevel;var ge=de(O.expirationTime<=He);He=s.unstable_now(),typeof ge=="function"?O.callback=ge:O===l(S)&&d(S),Z(He)}else d(S);O=l(S)}if(O!==null)var Je=!0;else{var nt=l(C);nt!==null&&Me(re,nt.startTime-He),Je=!1}return Je}finally{O=null,R=xt,A=!1}}var le=!1,Ce=null,ve=-1,we=5,De=-1;function rt(){return!(s.unstable_now()-De<we)}function ce(){if(Ce!==null){var ke=s.unstable_now();De=ke;var He=!0;try{He=Ce(!0,ke)}finally{He?Re():(le=!1,Ce=null)}}else le=!1}var Re;typeof K=="function"?Re=function(){K(ce)}:typeof MessageChannel<"u"?(J=new MessageChannel,Ve=J.port2,J.port1.onmessage=ce,Re=function(){Ve.postMessage(null)}):Re=function(){V(ce,0)};var J,Ve;function Ot(ke){Ce=ke,le||(le=!0,Re())}function Me(ke,He){ve=V(function(){ke(s.unstable_now())},He)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ke){ke.callback=null},s.unstable_continueExecution=function(){F||A||(F=!0,Ot(ne))},s.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<ke?Math.floor(1e3/ke):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return l(S)},s.unstable_next=function(ke){switch(R){case 1:case 2:case 3:var He=3;break;default:He=R}var xt=R;R=He;try{return ke()}finally{R=xt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ke,He){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var xt=R;R=ke;try{return He()}finally{R=xt}},s.unstable_scheduleCallback=function(ke,He,xt){var de=s.unstable_now();switch(typeof xt=="object"&&xt!==null?(xt=xt.delay,xt=typeof xt=="number"&&0<xt?de+xt:de):xt=de,ke){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=xt+ge,ke={id:I++,callback:He,priorityLevel:ke,startTime:xt,expirationTime:ge,sortIndex:-1},xt>de?(ke.sortIndex=xt,a(C,ke),l(S)===null&&ke===l(C)&&(L?(H(ve),ve=-1):L=!0,Me(re,xt-de))):(ke.sortIndex=ge,a(S,ke),F||A||(F=!0,Ot(ne))),ke},s.unstable_shouldYield=rt,s.unstable_wrapCallback=function(ke){var He=R;return function(){var xt=R;R=He;try{return ke.apply(this,arguments)}finally{R=xt}}}}),T5=$((s,a)=>{a.exports=iI()}),CS=$(s=>{var a=Oe(),l=T5();function d(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,g={};function b(c,p){_(c,p),_(c+"Capture",p)}function _(c,p){for(g[c]=p,c=0;c<p.length;c++)f.add(p[c])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},R={};function A(c){return C.call(R,c)?!0:C.call(O,c)?!1:I.test(c)?R[c]=!0:(O[c]=!0,!1)}function F(c,p,w,M){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return M?!1:w!==null?!w.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function L(c,p,w,M){if(p===null||typeof p>"u"||F(c,p,w,M))return!0;if(M)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function V(c,p,w,M,j,X,oe){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=M,this.attributeNamespace=j,this.mustUseProperty=w,this.propertyName=c,this.type=p,this.sanitizeURL=X,this.removeEmptyString=oe}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){H[c]=new V(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];H[p]=new V(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){H[c]=new V(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){H[c]=new V(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){H[c]=new V(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){H[c]=new V(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){H[c]=new V(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){H[c]=new V(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){H[c]=new V(c,5,!1,c.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function Z(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace(K,Z);H[p]=new V(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace(K,Z);H[p]=new V(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace(K,Z);H[p]=new V(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){H[c]=new V(c,1,!1,c.toLowerCase(),null,!1,!1)}),H.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){H[c]=new V(c,1,!1,c.toLowerCase(),null,!0,!0)});function re(c,p,w,M){var j=H.hasOwnProperty(p)?H[p]:null;(j!==null?j.type!==0:M||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(L(p,w,j,M)&&(w=null),M||j===null?A(p)&&(w===null?c.removeAttribute(p):c.setAttribute(p,""+w)):j.mustUseProperty?c[j.propertyName]=w===null?j.type===3?!1:"":w:(p=j.attributeName,M=j.attributeNamespace,w===null?c.removeAttribute(p):(j=j.type,w=j===3||j===4&&w===!0?"":""+w,M?c.setAttributeNS(M,p,w):c.setAttribute(p,w))))}var ne=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),ve=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),rt=Symbol.for("react.provider"),ce=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),He=Symbol.iterator;function xt(c){return c===null||typeof c!="object"?null:(c=He&&c[He]||c["@@iterator"],typeof c=="function"?c:null)}var de=Object.assign,ge;function Je(c){if(ge===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);ge=p&&p[1]||""}return`
`+ge+c}var nt=!1;function ot(c,p){if(!c||nt)return"";nt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(gt){var M=gt}Reflect.construct(c,[],p)}else{try{p.call()}catch(gt){M=gt}c.call(p.prototype)}else{try{throw Error()}catch(gt){M=gt}c()}}catch(gt){if(gt&&M&&typeof gt.stack=="string"){for(var j=gt.stack.split(`
`),X=M.stack.split(`
`),oe=j.length-1,Pe=X.length-1;1<=oe&&0<=Pe&&j[oe]!==X[Pe];)Pe--;for(;1<=oe&&0<=Pe;oe--,Pe--)if(j[oe]!==X[Pe]){if(oe!==1||Pe!==1)do if(oe--,Pe--,0>Pe||j[oe]!==X[Pe]){var Be=`
`+j[oe].replace(" at new "," at ");return c.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",c.displayName)),Be}while(1<=oe&&0<=Pe);break}}}finally{nt=!1,Error.prepareStackTrace=w}return(c=c?c.displayName||c.name:"")?Je(c):""}function We(c){switch(c.tag){case 5:return Je(c.type);case 16:return Je("Lazy");case 13:return Je("Suspense");case 19:return Je("SuspenseList");case 0:case 2:case 15:return c=ot(c.type,!1),c;case 11:return c=ot(c.type.render,!1),c;case 1:return c=ot(c.type,!0),c;default:return""}}function nn(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case ve:return"Fragment";case Ce:return"Portal";case De:return"Profiler";case we:return"StrictMode";case J:return"Suspense";case Ve:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case ce:return(c.displayName||"Context")+".Consumer";case rt:return(c._context.displayName||"Context")+".Provider";case Re:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Ot:return p=c.displayName||null,p!==null?p:nn(c.type)||"Memo";case Me:p=c._payload,c=c._init;try{return nn(c(p))}catch{}}return null}function wt(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nn(p);case 8:return p===we?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Qt(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function mn(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Un(c){var p=mn(c)?"checked":"value",w=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),M=""+c[p];if(!c.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var j=w.get,X=w.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return j.call(this)},set:function(oe){M=""+oe,X.call(this,oe)}}),Object.defineProperty(c,p,{enumerable:w.enumerable}),{getValue:function(){return M},setValue:function(oe){M=""+oe},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function Rn(c){c._valueTracker||(c._valueTracker=Un(c))}function Vr(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var w=p.getValue(),M="";return c&&(M=mn(c)?c.checked?"true":"false":c.value),c=M,c!==w?(p.setValue(c),!0):!1}function ee(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function ht(c,p){var w=p.checked;return de({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??c._wrapperState.initialChecked})}function ct(c,p){var w=p.defaultValue==null?"":p.defaultValue,M=p.checked!=null?p.checked:p.defaultChecked;w=Qt(p.value!=null?p.value:w),c._wrapperState={initialChecked:M,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ee(c,p){p=p.checked,p!=null&&re(c,"checked",p,!1)}function Se(c,p){Ee(c,p);var w=Qt(p.value),M=p.type;if(w!=null)M==="number"?(w===0&&c.value===""||c.value!=w)&&(c.value=""+w):c.value!==""+w&&(c.value=""+w);else if(M==="submit"||M==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?St(c,p.type,w):p.hasOwnProperty("defaultValue")&&St(c,p.type,Qt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function $e(c,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var M=p.type;if(!(M!=="submit"&&M!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,w||p===c.value||(c.value=p),c.defaultValue=p}w=c.name,w!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,w!==""&&(c.name=w)}function St(c,p,w){(p!=="number"||ee(c.ownerDocument)!==c)&&(w==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+w&&(c.defaultValue=""+w))}var At=Array.isArray;function et(c,p,w,M){if(c=c.options,p){p={};for(var j=0;j<w.length;j++)p["$"+w[j]]=!0;for(w=0;w<c.length;w++)j=p.hasOwnProperty("$"+c[w].value),c[w].selected!==j&&(c[w].selected=j),j&&M&&(c[w].defaultSelected=!0)}else{for(w=""+Qt(w),p=null,j=0;j<c.length;j++){if(c[j].value===w){c[j].selected=!0,M&&(c[j].defaultSelected=!0);return}p!==null||c[j].disabled||(p=c[j])}p!==null&&(p.selected=!0)}}function Bt(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(d(91));return de({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Mt(c,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(d(92));if(At(w)){if(1<w.length)throw Error(d(93));w=w[0]}p=w}p==null&&(p=""),w=p}c._wrapperState={initialValue:Qt(w)}}function It(c,p){var w=Qt(p.value),M=Qt(p.defaultValue);w!=null&&(w=""+w,w!==c.value&&(c.value=w),p.defaultValue==null&&c.defaultValue!==w&&(c.defaultValue=w)),M!=null&&(c.defaultValue=""+M)}function An(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function Ir(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jn(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?Ir(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var _o,Nf=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,M,j){MSApp.execUnsafeLocalFunction(function(){return c(p,w,M,j)})}:c}(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=_o.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function Fo(c,p){if(p){var w=c.firstChild;if(w&&w===c.lastChild&&w.nodeType===3){w.nodeValue=p;return}}c.textContent=p}var nc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ui=["Webkit","ms","Moz","O"];Object.keys(nc).forEach(function(c){Ui.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),nc[p]=nc[c]})});function Lv(c,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||nc.hasOwnProperty(c)&&nc[c]?(""+p).trim():p+"px"}function d_(c,p){c=c.style;for(var w in p)if(p.hasOwnProperty(w)){var M=w.indexOf("--")===0,j=Lv(w,p[w],M);w==="float"&&(w="cssFloat"),M?c.setProperty(w,j):c[w]=j}}var rc=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function h_(c,p){if(p){if(rc[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(d(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(d(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(d(61))}if(p.style!=null&&typeof p.style!="object")throw Error(d(62))}}function wC(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xC=null;function SC(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var p_=null,Ql=null,ic=null;function Tfe(c){if(c=GC(c)){if(typeof p_!="function")throw Error(d(280));var p=c.stateNode;p&&(p=UO(p),p_(c.stateNode,c.type,p))}}function Mfe(c){Ql?ic?ic.push(c):ic=[c]:Ql=c}function kfe(){if(Ql){var c=Ql,p=ic;if(ic=Ql=null,Tfe(c),p)for(c=0;c<p.length;c++)Tfe(p[c])}}function Afe(c,p){return c(p)}function Ife(){}var V6=!1;function Rfe(c,p,w){if(V6)return c(p,w);V6=!0;try{return Afe(c,p,w)}finally{V6=!1,(Ql!==null||ic!==null)&&(Ife(),kfe())}}function EC(c,p){var w=c.stateNode;if(w===null)return null;var M=UO(w);if(M===null)return null;w=M[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(c=c.type,M=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!M;break e;default:c=!1}if(c)return null;if(w&&typeof w!="function")throw Error(d(231,p,typeof w));return w}var j6=!1;if(S)try{f_={},Object.defineProperty(f_,"passive",{get:function(){j6=!0}}),window.addEventListener("test",f_,f_),window.removeEventListener("test",f_,f_)}catch{j6=!1}var f_;function z3e(c,p,w,M,j,X,oe,Pe,Be){var gt=Array.prototype.slice.call(arguments,3);try{p.apply(w,gt)}catch(zt){this.onError(zt)}}var CC=!1,fO=null,mO=!1,H6=null,V3e={onError:function(c){CC=!0,fO=c}};function j3e(c,p,w,M,j,X,oe,Pe,Be){CC=!1,fO=null,z3e.apply(V3e,arguments)}function H3e(c,p,w,M,j,X,oe,Pe,Be){if(j3e.apply(this,arguments),CC){if(CC){var gt=fO;CC=!1,fO=null}else throw Error(d(198));mO||(mO=!0,H6=gt)}}function Nv(c){var p=c,w=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,p.flags&4098&&(w=p.return),c=p.return;while(c)}return p.tag===3?w:null}function Dfe(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function Ofe(c){if(Nv(c)!==c)throw Error(d(188))}function G3e(c){var p=c.alternate;if(!p){if(p=Nv(c),p===null)throw Error(d(188));return p!==c?null:c}for(var w=c,M=p;;){var j=w.return;if(j===null)break;var X=j.alternate;if(X===null){if(M=j.return,M!==null){w=M;continue}break}if(j.child===X.child){for(X=j.child;X;){if(X===w)return Ofe(j),c;if(X===M)return Ofe(j),p;X=X.sibling}throw Error(d(188))}if(w.return!==M.return)w=j,M=X;else{for(var oe=!1,Pe=j.child;Pe;){if(Pe===w){oe=!0,w=j,M=X;break}if(Pe===M){oe=!0,M=j,w=X;break}Pe=Pe.sibling}if(!oe){for(Pe=X.child;Pe;){if(Pe===w){oe=!0,w=X,M=j;break}if(Pe===M){oe=!0,M=X,w=j;break}Pe=Pe.sibling}if(!oe)throw Error(d(189))}}if(w.alternate!==M)throw Error(d(190))}if(w.tag!==3)throw Error(d(188));return w.stateNode.current===w?c:p}function Lfe(c){return c=G3e(c),c!==null?Nfe(c):null}function Nfe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=Nfe(c);if(p!==null)return p;c=c.sibling}return null}var Ffe=l.unstable_scheduleCallback,Bfe=l.unstable_cancelCallback,W3e=l.unstable_shouldYield,$3e=l.unstable_requestPaint,fs=l.unstable_now,K3e=l.unstable_getCurrentPriorityLevel,G6=l.unstable_ImmediatePriority,Ufe=l.unstable_UserBlockingPriority,gO=l.unstable_NormalPriority,X3e=l.unstable_LowPriority,zfe=l.unstable_IdlePriority,vO=null,gd=null;function q3e(c){if(gd&&typeof gd.onCommitFiberRoot=="function")try{gd.onCommitFiberRoot(vO,c,void 0,(c.current.flags&128)===128)}catch{}}var sc=Math.clz32?Math.clz32:Q3e,Y3e=Math.log,Z3e=Math.LN2;function Q3e(c){return c>>>=0,c===0?32:31-(Y3e(c)/Z3e|0)|0}var yO=64,bO=4194304;function PC(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function _O(c,p){var w=c.pendingLanes;if(w===0)return 0;var M=0,j=c.suspendedLanes,X=c.pingedLanes,oe=w&268435455;if(oe!==0){var Pe=oe&~j;Pe!==0?M=PC(Pe):(X&=oe,X!==0&&(M=PC(X)))}else oe=w&~j,oe!==0?M=PC(oe):X!==0&&(M=PC(X));if(M===0)return 0;if(p!==0&&p!==M&&!(p&j)&&(j=M&-M,X=p&-p,j>=X||j===16&&(X&4194240)!==0))return p;if(M&4&&(M|=w&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=M;0<p;)w=31-sc(p),j=1<<w,M|=c[w],p&=~j;return M}function J3e(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eLe(c,p){for(var w=c.suspendedLanes,M=c.pingedLanes,j=c.expirationTimes,X=c.pendingLanes;0<X;){var oe=31-sc(X),Pe=1<<oe,Be=j[oe];Be===-1?(!(Pe&w)||Pe&M)&&(j[oe]=J3e(Pe,p)):Be<=p&&(c.expiredLanes|=Pe),X&=~Pe}}function W6(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Vfe(){var c=yO;return yO<<=1,!(yO&4194240)&&(yO=64),c}function $6(c){for(var p=[],w=0;31>w;w++)p.push(c);return p}function TC(c,p,w){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-sc(p),c[p]=w}function tLe(c,p){var w=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<w;){var j=31-sc(w),X=1<<j;p[j]=0,M[j]=-1,c[j]=-1,w&=~X}}function K6(c,p){var w=c.entangledLanes|=p;for(c=c.entanglements;w;){var M=31-sc(w),j=1<<M;j&p|c[M]&p&&(c[M]|=p),w&=~j}}var Qr=0;function jfe(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Hfe,X6,Gfe,Wfe,$fe,q6=!1,wO=[],Ff=null,Bf=null,Uf=null,MC=new Map,kC=new Map,zf=[],nLe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kfe(c,p){switch(c){case"focusin":case"focusout":Ff=null;break;case"dragenter":case"dragleave":Bf=null;break;case"mouseover":case"mouseout":Uf=null;break;case"pointerover":case"pointerout":MC.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":kC.delete(p.pointerId)}}function AC(c,p,w,M,j,X){return c===null||c.nativeEvent!==X?(c={blockedOn:p,domEventName:w,eventSystemFlags:M,nativeEvent:X,targetContainers:[j]},p!==null&&(p=GC(p),p!==null&&X6(p)),c):(c.eventSystemFlags|=M,p=c.targetContainers,j!==null&&p.indexOf(j)===-1&&p.push(j),c)}function rLe(c,p,w,M,j){switch(p){case"focusin":return Ff=AC(Ff,c,p,w,M,j),!0;case"dragenter":return Bf=AC(Bf,c,p,w,M,j),!0;case"mouseover":return Uf=AC(Uf,c,p,w,M,j),!0;case"pointerover":var X=j.pointerId;return MC.set(X,AC(MC.get(X)||null,c,p,w,M,j)),!0;case"gotpointercapture":return X=j.pointerId,kC.set(X,AC(kC.get(X)||null,c,p,w,M,j)),!0}return!1}function Xfe(c){var p=Fv(c.target);if(p!==null){var w=Nv(p);if(w!==null){if(p=w.tag,p===13){if(p=Dfe(w),p!==null){c.blockedOn=p,$fe(c.priority,function(){Gfe(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){c.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}c.blockedOn=null}function xO(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var w=Z6(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(w===null){w=c.nativeEvent;var M=new w.constructor(w.type,w);xC=M,w.target.dispatchEvent(M),xC=null}else return p=GC(w),p!==null&&X6(p),c.blockedOn=w,!1;p.shift()}return!0}function qfe(c,p,w){xO(c)&&w.delete(p)}function iLe(){q6=!1,Ff!==null&&xO(Ff)&&(Ff=null),Bf!==null&&xO(Bf)&&(Bf=null),Uf!==null&&xO(Uf)&&(Uf=null),MC.forEach(qfe),kC.forEach(qfe)}function IC(c,p){c.blockedOn===p&&(c.blockedOn=null,q6||(q6=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,iLe)))}function RC(c){function p(j){return IC(j,c)}if(0<wO.length){IC(wO[0],c);for(var w=1;w<wO.length;w++){var M=wO[w];M.blockedOn===c&&(M.blockedOn=null)}}for(Ff!==null&&IC(Ff,c),Bf!==null&&IC(Bf,c),Uf!==null&&IC(Uf,c),MC.forEach(p),kC.forEach(p),w=0;w<zf.length;w++)M=zf[w],M.blockedOn===c&&(M.blockedOn=null);for(;0<zf.length&&(w=zf[0],w.blockedOn===null);)Xfe(w),w.blockedOn===null&&zf.shift()}var m_=ne.ReactCurrentBatchConfig,SO=!0;function sLe(c,p,w,M){var j=Qr,X=m_.transition;m_.transition=null;try{Qr=1,Y6(c,p,w,M)}finally{Qr=j,m_.transition=X}}function oLe(c,p,w,M){var j=Qr,X=m_.transition;m_.transition=null;try{Qr=4,Y6(c,p,w,M)}finally{Qr=j,m_.transition=X}}function Y6(c,p,w,M){if(SO){var j=Z6(c,p,w,M);if(j===null)h8(c,p,M,EO,w),Kfe(c,M);else if(rLe(j,c,p,w,M))M.stopPropagation();else if(Kfe(c,M),p&4&&-1<nLe.indexOf(c)){for(;j!==null;){var X=GC(j);if(X!==null&&Hfe(X),X=Z6(c,p,w,M),X===null&&h8(c,p,M,EO,w),X===j)break;j=X}j!==null&&M.stopPropagation()}else h8(c,p,M,null,w)}}var EO=null;function Z6(c,p,w,M){if(EO=null,c=SC(M),c=Fv(c),c!==null)if(p=Nv(c),p===null)c=null;else if(w=p.tag,w===13){if(c=Dfe(p),c!==null)return c;c=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return EO=c,null}function Yfe(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K3e()){case G6:return 1;case Ufe:return 4;case gO:case X3e:return 16;case zfe:return 536870912;default:return 16}default:return 16}}var Vf=null,Q6=null,CO=null;function Zfe(){if(CO)return CO;var c,p=Q6,w=p.length,M,j="value"in Vf?Vf.value:Vf.textContent,X=j.length;for(c=0;c<w&&p[c]===j[c];c++);var oe=w-c;for(M=1;M<=oe&&p[w-M]===j[X-M];M++);return CO=j.slice(c,1<M?1-M:void 0)}function PO(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function TO(){return!0}function Qfe(){return!1}function hl(c){function p(w,M,j,X,oe){this._reactName=w,this._targetInst=j,this.type=M,this.nativeEvent=X,this.target=oe,this.currentTarget=null;for(var Pe in c)c.hasOwnProperty(Pe)&&(w=c[Pe],this[Pe]=w?w(X):X[Pe]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?TO:Qfe,this.isPropagationStopped=Qfe,this}return de(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=TO)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=TO)},persist:function(){},isPersistent:TO}),p}var g_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J6=hl(g_),DC=de({},g_,{view:0,detail:0}),aLe=hl(DC),e8,t8,OC,MO=de({},DC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r8,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==OC&&(OC&&c.type==="mousemove"?(e8=c.screenX-OC.screenX,t8=c.screenY-OC.screenY):t8=e8=0,OC=c),e8)},movementY:function(c){return"movementY"in c?c.movementY:t8}}),Jfe=hl(MO),lLe=de({},MO,{dataTransfer:0}),uLe=hl(lLe),cLe=de({},DC,{relatedTarget:0}),n8=hl(cLe),dLe=de({},g_,{animationName:0,elapsedTime:0,pseudoElement:0}),hLe=hl(dLe),pLe=de({},g_,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),fLe=hl(pLe),mLe=de({},g_,{data:0}),eme=hl(mLe),gLe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vLe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yLe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bLe(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=yLe[c])?!!p[c]:!1}function r8(){return bLe}var _Le=de({},DC,{key:function(c){if(c.key){var p=gLe[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=PO(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?vLe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r8,charCode:function(c){return c.type==="keypress"?PO(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?PO(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),wLe=hl(_Le),xLe=de({},MO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tme=hl(xLe),SLe=de({},DC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r8}),ELe=hl(SLe),CLe=de({},g_,{propertyName:0,elapsedTime:0,pseudoElement:0}),PLe=hl(CLe),TLe=de({},MO,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),MLe=hl(TLe),kLe=[9,13,27,32],i8=S&&"CompositionEvent"in window,LC=null;S&&"documentMode"in document&&(LC=document.documentMode);var ALe=S&&"TextEvent"in window&&!LC,nme=S&&(!i8||LC&&8<LC&&11>=LC),rme=String.fromCharCode(32),ime=!1;function sme(c,p){switch(c){case"keyup":return kLe.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ome(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var v_=!1;function ILe(c,p){switch(c){case"compositionend":return ome(p);case"keypress":return p.which!==32?null:(ime=!0,rme);case"textInput":return c=p.data,c===rme&&ime?null:c;default:return null}}function RLe(c,p){if(v_)return c==="compositionend"||!i8&&sme(c,p)?(c=Zfe(),CO=Q6=Vf=null,v_=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return nme&&p.locale!=="ko"?null:p.data;default:return null}}var DLe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ame(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!DLe[c.type]:p==="textarea"}function lme(c,p,w,M){Mfe(M),p=NO(p,"onChange"),0<p.length&&(w=new J6("onChange","change",null,w,M),c.push({event:w,listeners:p}))}var NC=null,FC=null;function OLe(c){Tme(c,0)}function kO(c){var p=x_(c);if(Vr(p))return c}function LLe(c,p){if(c==="change")return p}var ume=!1;S&&(S?(AO="oninput"in document,AO||(o8=document.createElement("div"),o8.setAttribute("oninput","return;"),AO=typeof o8.oninput=="function"),s8=AO):s8=!1,ume=s8&&(!document.documentMode||9<document.documentMode));var s8,AO,o8;function cme(){NC&&(NC.detachEvent("onpropertychange",dme),FC=NC=null)}function dme(c){if(c.propertyName==="value"&&kO(FC)){var p=[];lme(p,FC,c,SC(c)),Rfe(OLe,p)}}function NLe(c,p,w){c==="focusin"?(cme(),NC=p,FC=w,NC.attachEvent("onpropertychange",dme)):c==="focusout"&&cme()}function FLe(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return kO(FC)}function BLe(c,p){if(c==="click")return kO(p)}function ULe(c,p){if(c==="input"||c==="change")return kO(p)}function zLe(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var oc=typeof Object.is=="function"?Object.is:zLe;function BC(c,p){if(oc(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var w=Object.keys(c),M=Object.keys(p);if(w.length!==M.length)return!1;for(M=0;M<w.length;M++){var j=w[M];if(!C.call(p,j)||!oc(c[j],p[j]))return!1}return!0}function hme(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function pme(c,p){var w=hme(c);c=0;for(var M;w;){if(w.nodeType===3){if(M=c+w.textContent.length,c<=p&&M>=p)return{node:w,offset:p-c};c=M}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=hme(w)}}function fme(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?fme(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function mme(){for(var c=window,p=ee();p instanceof c.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)c=p.contentWindow;else break;p=ee(c.document)}return p}function a8(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function VLe(c){var p=mme(),w=c.focusedElem,M=c.selectionRange;if(p!==w&&w&&w.ownerDocument&&fme(w.ownerDocument.documentElement,w)){if(M!==null&&a8(w)){if(p=M.start,c=M.end,c===void 0&&(c=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(c,w.value.length);else if(c=(p=w.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var j=w.textContent.length,X=Math.min(M.start,j);M=M.end===void 0?X:Math.min(M.end,j),!c.extend&&X>M&&(j=M,M=X,X=j),j=pme(w,X);var oe=pme(w,M);j&&oe&&(c.rangeCount!==1||c.anchorNode!==j.node||c.anchorOffset!==j.offset||c.focusNode!==oe.node||c.focusOffset!==oe.offset)&&(p=p.createRange(),p.setStart(j.node,j.offset),c.removeAllRanges(),X>M?(c.addRange(p),c.extend(oe.node,oe.offset)):(p.setEnd(oe.node,oe.offset),c.addRange(p)))}}for(p=[],c=w;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)c=p[w],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var jLe=S&&"documentMode"in document&&11>=document.documentMode,y_=null,l8=null,UC=null,u8=!1;function gme(c,p,w){var M=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;u8||y_==null||y_!==ee(M)||(M=y_,"selectionStart"in M&&a8(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),UC&&BC(UC,M)||(UC=M,M=NO(l8,"onSelect"),0<M.length&&(p=new J6("onSelect","select",null,p,w),c.push({event:p,listeners:M}),p.target=y_)))}function IO(c,p){var w={};return w[c.toLowerCase()]=p.toLowerCase(),w["Webkit"+c]="webkit"+p,w["Moz"+c]="moz"+p,w}var b_={animationend:IO("Animation","AnimationEnd"),animationiteration:IO("Animation","AnimationIteration"),animationstart:IO("Animation","AnimationStart"),transitionend:IO("Transition","TransitionEnd")},c8={},vme={};S&&(vme=document.createElement("div").style,"AnimationEvent"in window||(delete b_.animationend.animation,delete b_.animationiteration.animation,delete b_.animationstart.animation),"TransitionEvent"in window||delete b_.transitionend.transition);function RO(c){if(c8[c])return c8[c];if(!b_[c])return c;var p=b_[c],w;for(w in p)if(p.hasOwnProperty(w)&&w in vme)return c8[c]=p[w];return c}var yme=RO("animationend"),bme=RO("animationiteration"),_me=RO("animationstart"),wme=RO("transitionend"),xme=new Map,Sme="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jf(c,p){xme.set(c,p),b(p,[c])}for(OO=0;OO<Sme.length;OO++)DO=Sme[OO],Eme=DO.toLowerCase(),Cme=DO[0].toUpperCase()+DO.slice(1),jf(Eme,"on"+Cme);var DO,Eme,Cme,OO;jf(yme,"onAnimationEnd"),jf(bme,"onAnimationIteration"),jf(_me,"onAnimationStart"),jf("dblclick","onDoubleClick"),jf("focusin","onFocus"),jf("focusout","onBlur"),jf(wme,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HLe=new Set("cancel close invalid load scroll toggle".split(" ").concat(zC));function Pme(c,p,w){var M=c.type||"unknown-event";c.currentTarget=w,H3e(M,p,void 0,c),c.currentTarget=null}function Tme(c,p){p=(p&4)!==0;for(var w=0;w<c.length;w++){var M=c[w],j=M.event;M=M.listeners;e:{var X=void 0;if(p)for(var oe=M.length-1;0<=oe;oe--){var Pe=M[oe],Be=Pe.instance,gt=Pe.currentTarget;if(Pe=Pe.listener,Be!==X&&j.isPropagationStopped())break e;Pme(j,Pe,gt),X=Be}else for(oe=0;oe<M.length;oe++){if(Pe=M[oe],Be=Pe.instance,gt=Pe.currentTarget,Pe=Pe.listener,Be!==X&&j.isPropagationStopped())break e;Pme(j,Pe,gt),X=Be}}}if(mO)throw c=H6,mO=!1,H6=null,c}function Si(c,p){var w=p[y8];w===void 0&&(w=p[y8]=new Set);var M=c+"__bubble";w.has(M)||(Mme(p,c,2,!1),w.add(M))}function d8(c,p,w){var M=0;p&&(M|=4),Mme(w,c,M,p)}var LO="_reactListening"+Math.random().toString(36).slice(2);function VC(c){if(!c[LO]){c[LO]=!0,f.forEach(function(w){w!=="selectionchange"&&(HLe.has(w)||d8(w,!1,c),d8(w,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[LO]||(p[LO]=!0,d8("selectionchange",!1,p))}}function Mme(c,p,w,M){switch(Yfe(p)){case 1:var j=sLe;break;case 4:j=oLe;break;default:j=Y6}w=j.bind(null,p,w,c),j=void 0,!j6||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(j=!0),M?j!==void 0?c.addEventListener(p,w,{capture:!0,passive:j}):c.addEventListener(p,w,!0):j!==void 0?c.addEventListener(p,w,{passive:j}):c.addEventListener(p,w,!1)}function h8(c,p,w,M,j){var X=M;if(!(p&1)&&!(p&2)&&M!==null)e:for(;;){if(M===null)return;var oe=M.tag;if(oe===3||oe===4){var Pe=M.stateNode.containerInfo;if(Pe===j||Pe.nodeType===8&&Pe.parentNode===j)break;if(oe===4)for(oe=M.return;oe!==null;){var Be=oe.tag;if((Be===3||Be===4)&&(Be=oe.stateNode.containerInfo,Be===j||Be.nodeType===8&&Be.parentNode===j))return;oe=oe.return}for(;Pe!==null;){if(oe=Fv(Pe),oe===null)return;if(Be=oe.tag,Be===5||Be===6){M=X=oe;continue e}Pe=Pe.parentNode}}M=M.return}Rfe(function(){var gt=X,zt=SC(w),Ht=[];e:{var Ut=xme.get(c);if(Ut!==void 0){var an=J6,gn=c;switch(c){case"keypress":if(PO(w)===0)break e;case"keydown":case"keyup":an=wLe;break;case"focusin":gn="focus",an=n8;break;case"focusout":gn="blur",an=n8;break;case"beforeblur":case"afterblur":an=n8;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":an=Jfe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":an=uLe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":an=ELe;break;case yme:case bme:case _me:an=hLe;break;case wme:an=PLe;break;case"scroll":an=aLe;break;case"wheel":an=MLe;break;case"copy":case"cut":case"paste":an=fLe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":an=tme}var wn=(p&4)!==0,ms=!wn&&c==="scroll",tt=wn?Ut!==null?Ut+"Capture":null:Ut;wn=[];for(var je=gt,st;je!==null;){st=je;var Xt=st.stateNode;if(st.tag===5&&Xt!==null&&(st=Xt,tt!==null&&(Xt=EC(je,tt),Xt!=null&&wn.push(jC(je,Xt,st)))),ms)break;je=je.return}0<wn.length&&(Ut=new an(Ut,gn,null,w,zt),Ht.push({event:Ut,listeners:wn}))}}if(!(p&7)){e:{if(Ut=c==="mouseover"||c==="pointerover",an=c==="mouseout"||c==="pointerout",Ut&&w!==xC&&(gn=w.relatedTarget||w.fromElement)&&(Fv(gn)||gn[Ih]))break e;if((an||Ut)&&(Ut=zt.window===zt?zt:(Ut=zt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,an?(gn=w.relatedTarget||w.toElement,an=gt,gn=gn?Fv(gn):null,gn!==null&&(ms=Nv(gn),gn!==ms||gn.tag!==5&&gn.tag!==6)&&(gn=null)):(an=null,gn=gt),an!==gn)){if(wn=Jfe,Xt="onMouseLeave",tt="onMouseEnter",je="mouse",(c==="pointerout"||c==="pointerover")&&(wn=tme,Xt="onPointerLeave",tt="onPointerEnter",je="pointer"),ms=an==null?Ut:x_(an),st=gn==null?Ut:x_(gn),Ut=new wn(Xt,je+"leave",an,w,zt),Ut.target=ms,Ut.relatedTarget=st,Xt=null,Fv(zt)===gt&&(wn=new wn(tt,je+"enter",gn,w,zt),wn.target=st,wn.relatedTarget=ms,Xt=wn),ms=Xt,an&&gn)t:{for(wn=an,tt=gn,je=0,st=wn;st;st=__(st))je++;for(st=0,Xt=tt;Xt;Xt=__(Xt))st++;for(;0<je-st;)wn=__(wn),je--;for(;0<st-je;)tt=__(tt),st--;for(;je--;){if(wn===tt||tt!==null&&wn===tt.alternate)break t;wn=__(wn),tt=__(tt)}wn=null}else wn=null;an!==null&&kme(Ht,Ut,an,wn,!1),gn!==null&&ms!==null&&kme(Ht,ms,gn,wn,!0)}}e:{if(Ut=gt?x_(gt):window,an=Ut.nodeName&&Ut.nodeName.toLowerCase(),an==="select"||an==="input"&&Ut.type==="file")var Pn=LLe;else if(ame(Ut))if(ume)Pn=ULe;else{Pn=FLe;var Hn=NLe}else(an=Ut.nodeName)&&an.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(Pn=BLe);if(Pn&&(Pn=Pn(c,gt))){lme(Ht,Pn,w,zt);break e}Hn&&Hn(c,Ut,gt),c==="focusout"&&(Hn=Ut._wrapperState)&&Hn.controlled&&Ut.type==="number"&&St(Ut,"number",Ut.value)}switch(Hn=gt?x_(gt):window,c){case"focusin":(ame(Hn)||Hn.contentEditable==="true")&&(y_=Hn,l8=gt,UC=null);break;case"focusout":UC=l8=y_=null;break;case"mousedown":u8=!0;break;case"contextmenu":case"mouseup":case"dragend":u8=!1,gme(Ht,w,zt);break;case"selectionchange":if(jLe)break;case"keydown":case"keyup":gme(Ht,w,zt)}var Gn;if(i8)e:{switch(c){case"compositionstart":var er="onCompositionStart";break e;case"compositionend":er="onCompositionEnd";break e;case"compositionupdate":er="onCompositionUpdate";break e}er=void 0}else v_?sme(c,w)&&(er="onCompositionEnd"):c==="keydown"&&w.keyCode===229&&(er="onCompositionStart");er&&(nme&&w.locale!=="ko"&&(v_||er!=="onCompositionStart"?er==="onCompositionEnd"&&v_&&(Gn=Zfe()):(Vf=zt,Q6="value"in Vf?Vf.value:Vf.textContent,v_=!0)),Hn=NO(gt,er),0<Hn.length&&(er=new eme(er,c,null,w,zt),Ht.push({event:er,listeners:Hn}),Gn?er.data=Gn:(Gn=ome(w),Gn!==null&&(er.data=Gn)))),(Gn=ALe?ILe(c,w):RLe(c,w))&&(gt=NO(gt,"onBeforeInput"),0<gt.length&&(zt=new eme("onBeforeInput","beforeinput",null,w,zt),Ht.push({event:zt,listeners:gt}),zt.data=Gn))}Tme(Ht,p)})}function jC(c,p,w){return{instance:c,listener:p,currentTarget:w}}function NO(c,p){for(var w=p+"Capture",M=[];c!==null;){var j=c,X=j.stateNode;j.tag===5&&X!==null&&(j=X,X=EC(c,w),X!=null&&M.unshift(jC(c,X,j)),X=EC(c,p),X!=null&&M.push(jC(c,X,j))),c=c.return}return M}function __(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function kme(c,p,w,M,j){for(var X=p._reactName,oe=[];w!==null&&w!==M;){var Pe=w,Be=Pe.alternate,gt=Pe.stateNode;if(Be!==null&&Be===M)break;Pe.tag===5&&gt!==null&&(Pe=gt,j?(Be=EC(w,X),Be!=null&&oe.unshift(jC(w,Be,Pe))):j||(Be=EC(w,X),Be!=null&&oe.push(jC(w,Be,Pe)))),w=w.return}oe.length!==0&&c.push({event:p,listeners:oe})}var GLe=/\r\n?/g,WLe=/\u0000|\uFFFD/g;function Ame(c){return(typeof c=="string"?c:""+c).replace(GLe,`
`).replace(WLe,"")}function FO(c,p,w){if(p=Ame(p),Ame(c)!==p&&w)throw Error(d(425))}function BO(){}var p8=null,f8=null;function m8(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var g8=typeof setTimeout=="function"?setTimeout:void 0,$Le=typeof clearTimeout=="function"?clearTimeout:void 0,Ime=typeof Promise=="function"?Promise:void 0,KLe=typeof queueMicrotask=="function"?queueMicrotask:typeof Ime<"u"?function(c){return Ime.resolve(null).then(c).catch(XLe)}:g8;function XLe(c){setTimeout(function(){throw c})}function v8(c,p){var w=p,M=0;do{var j=w.nextSibling;if(c.removeChild(w),j&&j.nodeType===8)if(w=j.data,w==="/$"){if(M===0){c.removeChild(j),RC(p);return}M--}else w!=="$"&&w!=="$?"&&w!=="$!"||M++;w=j}while(w);RC(p)}function Hf(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function Rme(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return c;p--}else w==="/$"&&p++}c=c.previousSibling}return null}var w_=Math.random().toString(36).slice(2),vd="__reactFiber$"+w_,HC="__reactProps$"+w_,Ih="__reactContainer$"+w_,y8="__reactEvents$"+w_,qLe="__reactListeners$"+w_,YLe="__reactHandles$"+w_;function Fv(c){var p=c[vd];if(p)return p;for(var w=c.parentNode;w;){if(p=w[Ih]||w[vd]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(c=Rme(c);c!==null;){if(w=c[vd])return w;c=Rme(c)}return p}c=w,w=c.parentNode}return null}function GC(c){return c=c[vd]||c[Ih],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function x_(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(d(33))}function UO(c){return c[HC]||null}var b8=[],S_=-1;function Gf(c){return{current:c}}function Ei(c){0>S_||(c.current=b8[S_],b8[S_]=null,S_--)}function pi(c,p){S_++,b8[S_]=c.current,c.current=p}var Wf={},Bo=Gf(Wf),Va=Gf(!1),Bv=Wf;function E_(c,p){var w=c.type.contextTypes;if(!w)return Wf;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var j={},X;for(X in w)j[X]=p[X];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=j),j}function ja(c){return c=c.childContextTypes,c!=null}function zO(){Ei(Va),Ei(Bo)}function Dme(c,p,w){if(Bo.current!==Wf)throw Error(d(168));pi(Bo,p),pi(Va,w)}function Ome(c,p,w){var M=c.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return w;M=M.getChildContext();for(var j in M)if(!(j in p))throw Error(d(108,wt(c)||"Unknown",j));return de({},w,M)}function VO(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Wf,Bv=Bo.current,pi(Bo,c),pi(Va,Va.current),!0}function Lme(c,p,w){var M=c.stateNode;if(!M)throw Error(d(169));w?(c=Ome(c,p,Bv),M.__reactInternalMemoizedMergedChildContext=c,Ei(Va),Ei(Bo),pi(Bo,c)):Ei(Va),pi(Va,w)}var Rh=null,jO=!1,_8=!1;function Nme(c){Rh===null?Rh=[c]:Rh.push(c)}function ZLe(c){jO=!0,Nme(c)}function $f(){if(!_8&&Rh!==null){_8=!0;var c=0,p=Qr;try{var w=Rh;for(Qr=1;c<w.length;c++){var M=w[c];do M=M(!0);while(M!==null)}Rh=null,jO=!1}catch(j){throw Rh!==null&&(Rh=Rh.slice(c+1)),Ffe(G6,$f),j}finally{Qr=p,_8=!1}}return null}var C_=[],P_=0,HO=null,GO=0,Jl=[],eu=0,Uv=null,Dh=1,Oh="";function zv(c,p){C_[P_++]=GO,C_[P_++]=HO,HO=c,GO=p}function Fme(c,p,w){Jl[eu++]=Dh,Jl[eu++]=Oh,Jl[eu++]=Uv,Uv=c;var M=Dh;c=Oh;var j=32-sc(M)-1;M&=~(1<<j),w+=1;var X=32-sc(p)+j;if(30<X){var oe=j-j%5;X=(M&(1<<oe)-1).toString(32),M>>=oe,j-=oe,Dh=1<<32-sc(p)+j|w<<j|M,Oh=X+c}else Dh=1<<X|w<<j|M,Oh=c}function w8(c){c.return!==null&&(zv(c,1),Fme(c,1,0))}function x8(c){for(;c===HO;)HO=C_[--P_],C_[P_]=null,GO=C_[--P_],C_[P_]=null;for(;c===Uv;)Uv=Jl[--eu],Jl[eu]=null,Oh=Jl[--eu],Jl[eu]=null,Dh=Jl[--eu],Jl[eu]=null}var pl=null,fl=null,Ii=!1,ac=null;function Bme(c,p){var w=iu(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=c,p=c.deletions,p===null?(c.deletions=[w],c.flags|=16):p.push(w)}function Ume(c,p){switch(c.tag){case 5:var w=c.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,pl=c,fl=Hf(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,pl=c,fl=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=Uv!==null?{id:Dh,overflow:Oh}:null,c.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=iu(18,null,null,0),w.stateNode=p,w.return=c,c.child=w,pl=c,fl=null,!0):!1;default:return!1}}function S8(c){return(c.mode&1)!==0&&(c.flags&128)===0}function E8(c){if(Ii){var p=fl;if(p){var w=p;if(!Ume(c,p)){if(S8(c))throw Error(d(418));p=Hf(w.nextSibling);var M=pl;p&&Ume(c,p)?Bme(M,w):(c.flags=c.flags&-4097|2,Ii=!1,pl=c)}}else{if(S8(c))throw Error(d(418));c.flags=c.flags&-4097|2,Ii=!1,pl=c}}}function zme(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;pl=c}function WO(c){if(c!==pl)return!1;if(!Ii)return zme(c),Ii=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!m8(c.type,c.memoizedProps)),p&&(p=fl)){if(S8(c))throw Vme(),Error(d(418));for(;p;)Bme(c,p),p=Hf(p.nextSibling)}if(zme(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(d(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="/$"){if(p===0){fl=Hf(c.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}c=c.nextSibling}fl=null}}else fl=pl?Hf(c.stateNode.nextSibling):null;return!0}function Vme(){for(var c=fl;c;)c=Hf(c.nextSibling)}function T_(){fl=pl=null,Ii=!1}function C8(c){ac===null?ac=[c]:ac.push(c)}var QLe=ne.ReactCurrentBatchConfig;function lc(c,p){if(c&&c.defaultProps){p=de({},p),c=c.defaultProps;for(var w in c)p[w]===void 0&&(p[w]=c[w]);return p}return p}var $O=Gf(null),KO=null,M_=null,P8=null;function T8(){P8=M_=KO=null}function M8(c){var p=$O.current;Ei($O),c._currentValue=p}function k8(c,p,w){for(;c!==null;){var M=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),c===w)break;c=c.return}}function k_(c,p){KO=c,P8=M_=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&p&&(Ha=!0),c.firstContext=null)}function tu(c){var p=c._currentValue;if(P8!==c)if(c={context:c,memoizedValue:p,next:null},M_===null){if(KO===null)throw Error(d(308));M_=c,KO.dependencies={lanes:0,firstContext:c}}else M_=M_.next=c;return p}var Vv=null;function A8(c){Vv===null?Vv=[c]:Vv.push(c)}function jme(c,p,w,M){var j=p.interleaved;return j===null?(w.next=w,A8(p)):(w.next=j.next,j.next=w),p.interleaved=w,Lh(c,M)}function Lh(c,p){c.lanes|=p;var w=c.alternate;for(w!==null&&(w.lanes|=p),w=c,c=c.return;c!==null;)c.childLanes|=p,w=c.alternate,w!==null&&(w.childLanes|=p),w=c,c=c.return;return w.tag===3?w.stateNode:null}var Kf=!1;function I8(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hme(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Nh(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function Xf(c,p,w){var M=c.updateQueue;if(M===null)return null;if(M=M.shared,Rr&2){var j=M.pending;return j===null?p.next=p:(p.next=j.next,j.next=p),M.pending=p,Lh(c,w)}return j=M.interleaved,j===null?(p.next=p,A8(M)):(p.next=j.next,j.next=p),M.interleaved=p,Lh(c,w)}function XO(c,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var M=p.lanes;M&=c.pendingLanes,w|=M,p.lanes=w,K6(c,w)}}function Gme(c,p){var w=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,w===M)){var j=null,X=null;if(w=w.firstBaseUpdate,w!==null){do{var oe={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};X===null?j=X=oe:X=X.next=oe,w=w.next}while(w!==null);X===null?j=X=p:X=X.next=p}else j=X=p;w={baseState:M.baseState,firstBaseUpdate:j,lastBaseUpdate:X,shared:M.shared,effects:M.effects},c.updateQueue=w;return}c=w.lastBaseUpdate,c===null?w.firstBaseUpdate=p:c.next=p,w.lastBaseUpdate=p}function qO(c,p,w,M){var j=c.updateQueue;Kf=!1;var X=j.firstBaseUpdate,oe=j.lastBaseUpdate,Pe=j.shared.pending;if(Pe!==null){j.shared.pending=null;var Be=Pe,gt=Be.next;Be.next=null,oe===null?X=gt:oe.next=gt,oe=Be;var zt=c.alternate;zt!==null&&(zt=zt.updateQueue,Pe=zt.lastBaseUpdate,Pe!==oe&&(Pe===null?zt.firstBaseUpdate=gt:Pe.next=gt,zt.lastBaseUpdate=Be))}if(X!==null){var Ht=j.baseState;oe=0,zt=gt=Be=null,Pe=X;do{var Ut=Pe.lane,an=Pe.eventTime;if((M&Ut)===Ut){zt!==null&&(zt=zt.next={eventTime:an,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var gn=c,wn=Pe;switch(Ut=p,an=w,wn.tag){case 1:if(gn=wn.payload,typeof gn=="function"){Ht=gn.call(an,Ht,Ut);break e}Ht=gn;break e;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=wn.payload,Ut=typeof gn=="function"?gn.call(an,Ht,Ut):gn,Ut==null)break e;Ht=de({},Ht,Ut);break e;case 2:Kf=!0}}Pe.callback!==null&&Pe.lane!==0&&(c.flags|=64,Ut=j.effects,Ut===null?j.effects=[Pe]:Ut.push(Pe))}else an={eventTime:an,lane:Ut,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},zt===null?(gt=zt=an,Be=Ht):zt=zt.next=an,oe|=Ut;if(Pe=Pe.next,Pe===null){if(Pe=j.shared.pending,Pe===null)break;Ut=Pe,Pe=Ut.next,Ut.next=null,j.lastBaseUpdate=Ut,j.shared.pending=null}}while(1);if(zt===null&&(Be=Ht),j.baseState=Be,j.firstBaseUpdate=gt,j.lastBaseUpdate=zt,p=j.shared.interleaved,p!==null){j=p;do oe|=j.lane,j=j.next;while(j!==p)}else X===null&&(j.shared.lanes=0);Gv|=oe,c.lanes=oe,c.memoizedState=Ht}}function Wme(c,p,w){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var M=c[p],j=M.callback;if(j!==null){if(M.callback=null,M=w,typeof j!="function")throw Error(d(191,j));j.call(M)}}}var $me=new a.Component().refs;function R8(c,p,w,M){p=c.memoizedState,w=w(M,p),w=w==null?p:de({},p,w),c.memoizedState=w,c.lanes===0&&(c.updateQueue.baseState=w)}var YO={isMounted:function(c){return(c=c._reactInternals)?Nv(c)===c:!1},enqueueSetState:function(c,p,w){c=c._reactInternals;var M=va(),j=Qf(c),X=Nh(M,j);X.payload=p,w!=null&&(X.callback=w),p=Xf(c,X,j),p!==null&&(dc(p,c,j,M),XO(p,c,j))},enqueueReplaceState:function(c,p,w){c=c._reactInternals;var M=va(),j=Qf(c),X=Nh(M,j);X.tag=1,X.payload=p,w!=null&&(X.callback=w),p=Xf(c,X,j),p!==null&&(dc(p,c,j,M),XO(p,c,j))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var w=va(),M=Qf(c),j=Nh(w,M);j.tag=2,p!=null&&(j.callback=p),p=Xf(c,j,M),p!==null&&(dc(p,c,M,w),XO(p,c,M))}};function Kme(c,p,w,M,j,X,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,X,oe):p.prototype&&p.prototype.isPureReactComponent?!BC(w,M)||!BC(j,X):!0}function Xme(c,p,w){var M=!1,j=Wf,X=p.contextType;return typeof X=="object"&&X!==null?X=tu(X):(j=ja(p)?Bv:Bo.current,M=p.contextTypes,X=(M=M!=null)?E_(c,j):Wf),p=new p(w,X),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=YO,c.stateNode=p,p._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=j,c.__reactInternalMemoizedMaskedChildContext=X),p}function qme(c,p,w,M){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,M),p.state!==c&&YO.enqueueReplaceState(p,p.state,null)}function D8(c,p,w,M){var j=c.stateNode;j.props=w,j.state=c.memoizedState,j.refs=$me,I8(c);var X=p.contextType;typeof X=="object"&&X!==null?j.context=tu(X):(X=ja(p)?Bv:Bo.current,j.context=E_(c,X)),j.state=c.memoizedState,X=p.getDerivedStateFromProps,typeof X=="function"&&(R8(c,p,X,w),j.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(p=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),p!==j.state&&YO.enqueueReplaceState(j,j.state,null),qO(c,w,j,M),j.state=c.memoizedState),typeof j.componentDidMount=="function"&&(c.flags|=4194308)}function WC(c,p,w){if(c=w.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(d(309));var M=w.stateNode}if(!M)throw Error(d(147,c));var j=M,X=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===X?p.ref:(p=function(oe){var Pe=j.refs;Pe===$me&&(Pe=j.refs={}),oe===null?delete Pe[X]:Pe[X]=oe},p._stringRef=X,p)}if(typeof c!="string")throw Error(d(284));if(!w._owner)throw Error(d(290,c))}return c}function ZO(c,p){throw c=Object.prototype.toString.call(p),Error(d(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function Yme(c){var p=c._init;return p(c._payload)}function Zme(c){function p(tt,je){if(c){var st=tt.deletions;st===null?(tt.deletions=[je],tt.flags|=16):st.push(je)}}function w(tt,je){if(!c)return null;for(;je!==null;)p(tt,je),je=je.sibling;return null}function M(tt,je){for(tt=new Map;je!==null;)je.key!==null?tt.set(je.key,je):tt.set(je.index,je),je=je.sibling;return tt}function j(tt,je){return tt=em(tt,je),tt.index=0,tt.sibling=null,tt}function X(tt,je,st){return tt.index=st,c?(st=tt.alternate,st!==null?(st=st.index,st<je?(tt.flags|=2,je):st):(tt.flags|=2,je)):(tt.flags|=1048576,je)}function oe(tt){return c&&tt.alternate===null&&(tt.flags|=2),tt}function Pe(tt,je,st,Xt){return je===null||je.tag!==6?(je=mH(st,tt.mode,Xt),je.return=tt,je):(je=j(je,st),je.return=tt,je)}function Be(tt,je,st,Xt){var Pn=st.type;return Pn===ve?zt(tt,je,st.props.children,Xt,st.key):je!==null&&(je.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===Me&&Yme(Pn)===je.type)?(Xt=j(je,st.props),Xt.ref=WC(tt,je,st),Xt.return=tt,Xt):(Xt=g3(st.type,st.key,st.props,null,tt.mode,Xt),Xt.ref=WC(tt,je,st),Xt.return=tt,Xt)}function gt(tt,je,st,Xt){return je===null||je.tag!==4||je.stateNode.containerInfo!==st.containerInfo||je.stateNode.implementation!==st.implementation?(je=gH(st,tt.mode,Xt),je.return=tt,je):(je=j(je,st.children||[]),je.return=tt,je)}function zt(tt,je,st,Xt,Pn){return je===null||je.tag!==7?(je=Xv(st,tt.mode,Xt,Pn),je.return=tt,je):(je=j(je,st),je.return=tt,je)}function Ht(tt,je,st){if(typeof je=="string"&&je!==""||typeof je=="number")return je=mH(""+je,tt.mode,st),je.return=tt,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case le:return st=g3(je.type,je.key,je.props,null,tt.mode,st),st.ref=WC(tt,null,je),st.return=tt,st;case Ce:return je=gH(je,tt.mode,st),je.return=tt,je;case Me:var Xt=je._init;return Ht(tt,Xt(je._payload),st)}if(At(je)||xt(je))return je=Xv(je,tt.mode,st,null),je.return=tt,je;ZO(tt,je)}return null}function Ut(tt,je,st,Xt){var Pn=je!==null?je.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return Pn!==null?null:Pe(tt,je,""+st,Xt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case le:return st.key===Pn?Be(tt,je,st,Xt):null;case Ce:return st.key===Pn?gt(tt,je,st,Xt):null;case Me:return Pn=st._init,Ut(tt,je,Pn(st._payload),Xt)}if(At(st)||xt(st))return Pn!==null?null:zt(tt,je,st,Xt,null);ZO(tt,st)}return null}function an(tt,je,st,Xt,Pn){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return tt=tt.get(st)||null,Pe(je,tt,""+Xt,Pn);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case le:return tt=tt.get(Xt.key===null?st:Xt.key)||null,Be(je,tt,Xt,Pn);case Ce:return tt=tt.get(Xt.key===null?st:Xt.key)||null,gt(je,tt,Xt,Pn);case Me:var Hn=Xt._init;return an(tt,je,st,Hn(Xt._payload),Pn)}if(At(Xt)||xt(Xt))return tt=tt.get(st)||null,zt(je,tt,Xt,Pn,null);ZO(je,Xt)}return null}function gn(tt,je,st,Xt){for(var Pn=null,Hn=null,Gn=je,er=je=0,Qs=null;Gn!==null&&er<st.length;er++){Gn.index>er?(Qs=Gn,Gn=null):Qs=Gn.sibling;var jr=Ut(tt,Gn,st[er],Xt);if(jr===null){Gn===null&&(Gn=Qs);break}c&&Gn&&jr.alternate===null&&p(tt,Gn),je=X(jr,je,er),Hn===null?Pn=jr:Hn.sibling=jr,Hn=jr,Gn=Qs}if(er===st.length)return w(tt,Gn),Ii&&zv(tt,er),Pn;if(Gn===null){for(;er<st.length;er++)Gn=Ht(tt,st[er],Xt),Gn!==null&&(je=X(Gn,je,er),Hn===null?Pn=Gn:Hn.sibling=Gn,Hn=Gn);return Ii&&zv(tt,er),Pn}for(Gn=M(tt,Gn);er<st.length;er++)Qs=an(Gn,tt,er,st[er],Xt),Qs!==null&&(c&&Qs.alternate!==null&&Gn.delete(Qs.key===null?er:Qs.key),je=X(Qs,je,er),Hn===null?Pn=Qs:Hn.sibling=Qs,Hn=Qs);return c&&Gn.forEach(function(tm){return p(tt,tm)}),Ii&&zv(tt,er),Pn}function wn(tt,je,st,Xt){var Pn=xt(st);if(typeof Pn!="function")throw Error(d(150));if(st=Pn.call(st),st==null)throw Error(d(151));for(var Hn=Pn=null,Gn=je,er=je=0,Qs=null,jr=st.next();Gn!==null&&!jr.done;er++,jr=st.next()){Gn.index>er?(Qs=Gn,Gn=null):Qs=Gn.sibling;var tm=Ut(tt,Gn,jr.value,Xt);if(tm===null){Gn===null&&(Gn=Qs);break}c&&Gn&&tm.alternate===null&&p(tt,Gn),je=X(tm,je,er),Hn===null?Pn=tm:Hn.sibling=tm,Hn=tm,Gn=Qs}if(jr.done)return w(tt,Gn),Ii&&zv(tt,er),Pn;if(Gn===null){for(;!jr.done;er++,jr=st.next())jr=Ht(tt,jr.value,Xt),jr!==null&&(je=X(jr,je,er),Hn===null?Pn=jr:Hn.sibling=jr,Hn=jr);return Ii&&zv(tt,er),Pn}for(Gn=M(tt,Gn);!jr.done;er++,jr=st.next())jr=an(Gn,tt,er,jr.value,Xt),jr!==null&&(c&&jr.alternate!==null&&Gn.delete(jr.key===null?er:jr.key),je=X(jr,je,er),Hn===null?Pn=jr:Hn.sibling=jr,Hn=jr);return c&&Gn.forEach(function(INe){return p(tt,INe)}),Ii&&zv(tt,er),Pn}function ms(tt,je,st,Xt){if(typeof st=="object"&&st!==null&&st.type===ve&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case le:e:{for(var Pn=st.key,Hn=je;Hn!==null;){if(Hn.key===Pn){if(Pn=st.type,Pn===ve){if(Hn.tag===7){w(tt,Hn.sibling),je=j(Hn,st.props.children),je.return=tt,tt=je;break e}}else if(Hn.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===Me&&Yme(Pn)===Hn.type){w(tt,Hn.sibling),je=j(Hn,st.props),je.ref=WC(tt,Hn,st),je.return=tt,tt=je;break e}w(tt,Hn);break}else p(tt,Hn);Hn=Hn.sibling}st.type===ve?(je=Xv(st.props.children,tt.mode,Xt,st.key),je.return=tt,tt=je):(Xt=g3(st.type,st.key,st.props,null,tt.mode,Xt),Xt.ref=WC(tt,je,st),Xt.return=tt,tt=Xt)}return oe(tt);case Ce:e:{for(Hn=st.key;je!==null;){if(je.key===Hn)if(je.tag===4&&je.stateNode.containerInfo===st.containerInfo&&je.stateNode.implementation===st.implementation){w(tt,je.sibling),je=j(je,st.children||[]),je.return=tt,tt=je;break e}else{w(tt,je);break}else p(tt,je);je=je.sibling}je=gH(st,tt.mode,Xt),je.return=tt,tt=je}return oe(tt);case Me:return Hn=st._init,ms(tt,je,Hn(st._payload),Xt)}if(At(st))return gn(tt,je,st,Xt);if(xt(st))return wn(tt,je,st,Xt);ZO(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,je!==null&&je.tag===6?(w(tt,je.sibling),je=j(je,st),je.return=tt,tt=je):(w(tt,je),je=mH(st,tt.mode,Xt),je.return=tt,tt=je),oe(tt)):w(tt,je)}return ms}var A_=Zme(!0),Qme=Zme(!1),$C={},yd=Gf($C),KC=Gf($C),XC=Gf($C);function jv(c){if(c===$C)throw Error(d(174));return c}function O8(c,p){switch(pi(XC,p),pi(KC,c),pi(yd,$C),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Jn(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=Jn(p,c)}Ei(yd),pi(yd,p)}function I_(){Ei(yd),Ei(KC),Ei(XC)}function Jme(c){jv(XC.current);var p=jv(yd.current),w=Jn(p,c.type);p!==w&&(pi(KC,c),pi(yd,w))}function L8(c){KC.current===c&&(Ei(yd),Ei(KC))}var zi=Gf(0);function QO(c){for(var p=c;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var N8=[];function F8(){for(var c=0;c<N8.length;c++)N8[c]._workInProgressVersionPrimary=null;N8.length=0}var JO=ne.ReactCurrentDispatcher,B8=ne.ReactCurrentBatchConfig,Hv=0,Vi=null,Ls=null,Ys=null,e3=!1,qC=!1,YC=0,JLe=0;function Uo(){throw Error(d(321))}function U8(c,p){if(p===null)return!1;for(var w=0;w<p.length&&w<c.length;w++)if(!oc(c[w],p[w]))return!1;return!0}function z8(c,p,w,M,j,X){if(Hv=X,Vi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,JO.current=c===null||c.memoizedState===null?rNe:iNe,c=w(M,j),qC){X=0;do{if(qC=!1,YC=0,25<=X)throw Error(d(301));X+=1,Ys=Ls=null,p.updateQueue=null,JO.current=sNe,c=w(M,j)}while(qC)}if(JO.current=r3,p=Ls!==null&&Ls.next!==null,Hv=0,Ys=Ls=Vi=null,e3=!1,p)throw Error(d(300));return c}function V8(){var c=YC!==0;return YC=0,c}function bd(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ys===null?Vi.memoizedState=Ys=c:Ys=Ys.next=c,Ys}function nu(){if(Ls===null){var c=Vi.alternate;c=c!==null?c.memoizedState:null}else c=Ls.next;var p=Ys===null?Vi.memoizedState:Ys.next;if(p!==null)Ys=p,Ls=c;else{if(c===null)throw Error(d(310));Ls=c,c={memoizedState:Ls.memoizedState,baseState:Ls.baseState,baseQueue:Ls.baseQueue,queue:Ls.queue,next:null},Ys===null?Vi.memoizedState=Ys=c:Ys=Ys.next=c}return Ys}function ZC(c,p){return typeof p=="function"?p(c):p}function j8(c){var p=nu(),w=p.queue;if(w===null)throw Error(d(311));w.lastRenderedReducer=c;var M=Ls,j=M.baseQueue,X=w.pending;if(X!==null){if(j!==null){var oe=j.next;j.next=X.next,X.next=oe}M.baseQueue=j=X,w.pending=null}if(j!==null){X=j.next,M=M.baseState;var Pe=oe=null,Be=null,gt=X;do{var zt=gt.lane;if((Hv&zt)===zt)Be!==null&&(Be=Be.next={lane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),M=gt.hasEagerState?gt.eagerState:c(M,gt.action);else{var Ht={lane:zt,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null};Be===null?(Pe=Be=Ht,oe=M):Be=Be.next=Ht,Vi.lanes|=zt,Gv|=zt}gt=gt.next}while(gt!==null&&gt!==X);Be===null?oe=M:Be.next=Pe,oc(M,p.memoizedState)||(Ha=!0),p.memoizedState=M,p.baseState=oe,p.baseQueue=Be,w.lastRenderedState=M}if(c=w.interleaved,c!==null){j=c;do X=j.lane,Vi.lanes|=X,Gv|=X,j=j.next;while(j!==c)}else j===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function H8(c){var p=nu(),w=p.queue;if(w===null)throw Error(d(311));w.lastRenderedReducer=c;var M=w.dispatch,j=w.pending,X=p.memoizedState;if(j!==null){w.pending=null;var oe=j=j.next;do X=c(X,oe.action),oe=oe.next;while(oe!==j);oc(X,p.memoizedState)||(Ha=!0),p.memoizedState=X,p.baseQueue===null&&(p.baseState=X),w.lastRenderedState=X}return[X,M]}function ege(){}function tge(c,p){var w=Vi,M=nu(),j=p(),X=!oc(M.memoizedState,j);if(X&&(M.memoizedState=j,Ha=!0),M=M.queue,G8(ige.bind(null,w,M,c),[c]),M.getSnapshot!==p||X||Ys!==null&&Ys.memoizedState.tag&1){if(w.flags|=2048,QC(9,rge.bind(null,w,M,j,p),void 0,null),Zs===null)throw Error(d(349));Hv&30||nge(w,p,j)}return j}function nge(c,p,w){c.flags|=16384,c={getSnapshot:p,value:w},p=Vi.updateQueue,p===null?(p={lastEffect:null,stores:null},Vi.updateQueue=p,p.stores=[c]):(w=p.stores,w===null?p.stores=[c]:w.push(c))}function rge(c,p,w,M){p.value=w,p.getSnapshot=M,sge(p)&&oge(c)}function ige(c,p,w){return w(function(){sge(p)&&oge(c)})}function sge(c){var p=c.getSnapshot;c=c.value;try{var w=p();return!oc(c,w)}catch{return!0}}function oge(c){var p=Lh(c,1);p!==null&&dc(p,c,1,-1)}function age(c){var p=bd();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ZC,lastRenderedState:c},p.queue=c,c=c.dispatch=nNe.bind(null,Vi,c),[p.memoizedState,c]}function QC(c,p,w,M){return c={tag:c,create:p,destroy:w,deps:M,next:null},p=Vi.updateQueue,p===null?(p={lastEffect:null,stores:null},Vi.updateQueue=p,p.lastEffect=c.next=c):(w=p.lastEffect,w===null?p.lastEffect=c.next=c:(M=w.next,w.next=c,c.next=M,p.lastEffect=c)),c}function lge(){return nu().memoizedState}function t3(c,p,w,M){var j=bd();Vi.flags|=c,j.memoizedState=QC(1|p,w,void 0,M===void 0?null:M)}function n3(c,p,w,M){var j=nu();M=M===void 0?null:M;var X=void 0;if(Ls!==null){var oe=Ls.memoizedState;if(X=oe.destroy,M!==null&&U8(M,oe.deps)){j.memoizedState=QC(p,w,X,M);return}}Vi.flags|=c,j.memoizedState=QC(1|p,w,X,M)}function uge(c,p){return t3(8390656,8,c,p)}function G8(c,p){return n3(2048,8,c,p)}function cge(c,p){return n3(4,2,c,p)}function dge(c,p){return n3(4,4,c,p)}function hge(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function pge(c,p,w){return w=w!=null?w.concat([c]):null,n3(4,4,hge.bind(null,p,c),w)}function W8(){}function fge(c,p){var w=nu();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&U8(p,M[1])?M[0]:(w.memoizedState=[c,p],c)}function mge(c,p){var w=nu();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&U8(p,M[1])?M[0]:(c=c(),w.memoizedState=[c,p],c)}function gge(c,p,w){return Hv&21?(oc(w,p)||(w=Vfe(),Vi.lanes|=w,Gv|=w,c.baseState=!0),p):(c.baseState&&(c.baseState=!1,Ha=!0),c.memoizedState=w)}function eNe(c,p){var w=Qr;Qr=w!==0&&4>w?w:4,c(!0);var M=B8.transition;B8.transition={};try{c(!1),p()}finally{Qr=w,B8.transition=M}}function vge(){return nu().memoizedState}function tNe(c,p,w){var M=Qf(c);if(w={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null},yge(c))bge(p,w);else if(w=jme(c,p,w,M),w!==null){var j=va();dc(w,c,M,j),_ge(w,p,M)}}function nNe(c,p,w){var M=Qf(c),j={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null};if(yge(c))bge(p,j);else{var X=c.alternate;if(c.lanes===0&&(X===null||X.lanes===0)&&(X=p.lastRenderedReducer,X!==null))try{var oe=p.lastRenderedState,Pe=X(oe,w);if(j.hasEagerState=!0,j.eagerState=Pe,oc(Pe,oe)){var Be=p.interleaved;Be===null?(j.next=j,A8(p)):(j.next=Be.next,Be.next=j),p.interleaved=j;return}}catch{}finally{}w=jme(c,p,j,M),w!==null&&(j=va(),dc(w,c,M,j),_ge(w,p,M))}}function yge(c){var p=c.alternate;return c===Vi||p!==null&&p===Vi}function bge(c,p){qC=e3=!0;var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}function _ge(c,p,w){if(w&4194240){var M=p.lanes;M&=c.pendingLanes,w|=M,p.lanes=w,K6(c,w)}}var r3={readContext:tu,useCallback:Uo,useContext:Uo,useEffect:Uo,useImperativeHandle:Uo,useInsertionEffect:Uo,useLayoutEffect:Uo,useMemo:Uo,useReducer:Uo,useRef:Uo,useState:Uo,useDebugValue:Uo,useDeferredValue:Uo,useTransition:Uo,useMutableSource:Uo,useSyncExternalStore:Uo,useId:Uo,unstable_isNewReconciler:!1},rNe={readContext:tu,useCallback:function(c,p){return bd().memoizedState=[c,p===void 0?null:p],c},useContext:tu,useEffect:uge,useImperativeHandle:function(c,p,w){return w=w!=null?w.concat([c]):null,t3(4194308,4,hge.bind(null,p,c),w)},useLayoutEffect:function(c,p){return t3(4194308,4,c,p)},useInsertionEffect:function(c,p){return t3(4,2,c,p)},useMemo:function(c,p){var w=bd();return p=p===void 0?null:p,c=c(),w.memoizedState=[c,p],c},useReducer:function(c,p,w){var M=bd();return p=w!==void 0?w(p):p,M.memoizedState=M.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},M.queue=c,c=c.dispatch=tNe.bind(null,Vi,c),[M.memoizedState,c]},useRef:function(c){var p=bd();return c={current:c},p.memoizedState=c},useState:age,useDebugValue:W8,useDeferredValue:function(c){return bd().memoizedState=c},useTransition:function(){var c=age(!1),p=c[0];return c=eNe.bind(null,c[1]),bd().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,w){var M=Vi,j=bd();if(Ii){if(w===void 0)throw Error(d(407));w=w()}else{if(w=p(),Zs===null)throw Error(d(349));Hv&30||nge(M,p,w)}j.memoizedState=w;var X={value:w,getSnapshot:p};return j.queue=X,uge(ige.bind(null,M,X,c),[c]),M.flags|=2048,QC(9,rge.bind(null,M,X,w,p),void 0,null),w},useId:function(){var c=bd(),p=Zs.identifierPrefix;if(Ii){var w=Oh,M=Dh;w=(M&~(1<<32-sc(M)-1)).toString(32)+w,p=":"+p+"R"+w,w=YC++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=JLe++,p=":"+p+"r"+w.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},iNe={readContext:tu,useCallback:fge,useContext:tu,useEffect:G8,useImperativeHandle:pge,useInsertionEffect:cge,useLayoutEffect:dge,useMemo:mge,useReducer:j8,useRef:lge,useState:function(){return j8(ZC)},useDebugValue:W8,useDeferredValue:function(c){var p=nu();return gge(p,Ls.memoizedState,c)},useTransition:function(){var c=j8(ZC)[0],p=nu().memoizedState;return[c,p]},useMutableSource:ege,useSyncExternalStore:tge,useId:vge,unstable_isNewReconciler:!1},sNe={readContext:tu,useCallback:fge,useContext:tu,useEffect:G8,useImperativeHandle:pge,useInsertionEffect:cge,useLayoutEffect:dge,useMemo:mge,useReducer:H8,useRef:lge,useState:function(){return H8(ZC)},useDebugValue:W8,useDeferredValue:function(c){var p=nu();return Ls===null?p.memoizedState=c:gge(p,Ls.memoizedState,c)},useTransition:function(){var c=H8(ZC)[0],p=nu().memoizedState;return[c,p]},useMutableSource:ege,useSyncExternalStore:tge,useId:vge,unstable_isNewReconciler:!1};function R_(c,p){try{var w="",M=p;do w+=We(M),M=M.return;while(M);var j=w}catch(X){j=`
Error generating stack: `+X.message+`
`+X.stack}return{value:c,source:p,stack:j,digest:null}}function $8(c,p,w){return{value:c,source:null,stack:w??null,digest:p??null}}function K8(c,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var oNe=typeof WeakMap=="function"?WeakMap:Map;function wge(c,p,w){w=Nh(-1,w),w.tag=3,w.payload={element:null};var M=p.value;return w.callback=function(){c3||(c3=!0,aH=M),K8(c,p)},w}function xge(c,p,w){w=Nh(-1,w),w.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var j=p.value;w.payload=function(){return M(j)},w.callback=function(){K8(c,p)}}var X=c.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(w.callback=function(){K8(c,p),typeof M!="function"&&(Yf===null?Yf=new Set([this]):Yf.add(this));var oe=p.stack;this.componentDidCatch(p.value,{componentStack:oe!==null?oe:""})}),w}function Sge(c,p,w){var M=c.pingCache;if(M===null){M=c.pingCache=new oNe;var j=new Set;M.set(p,j)}else j=M.get(p),j===void 0&&(j=new Set,M.set(p,j));j.has(w)||(j.add(w),c=_Ne.bind(null,c,p,w),p.then(c,c))}function Ege(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function Cge(c,p,w,M,j){return c.mode&1?(c.flags|=65536,c.lanes=j,c):(c===p?c.flags|=65536:(c.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Nh(-1,1),p.tag=2,Xf(w,p,1))),w.lanes|=1),c)}var aNe=ne.ReactCurrentOwner,Ha=!1;function ga(c,p,w,M){p.child=c===null?Qme(p,null,w,M):A_(p,c.child,w,M)}function Pge(c,p,w,M,j){w=w.render;var X=p.ref;return k_(p,j),M=z8(c,p,w,M,X,j),w=V8(),c!==null&&!Ha?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~j,Fh(c,p,j)):(Ii&&w&&w8(p),p.flags|=1,ga(c,p,M,j),p.child)}function Tge(c,p,w,M,j){if(c===null){var X=w.type;return typeof X=="function"&&!fH(X)&&X.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=X,Mge(c,p,X,M,j)):(c=g3(w.type,null,M,p,p.mode,j),c.ref=p.ref,c.return=p,p.child=c)}if(X=c.child,!(c.lanes&j)){var oe=X.memoizedProps;if(w=w.compare,w=w!==null?w:BC,w(oe,M)&&c.ref===p.ref)return Fh(c,p,j)}return p.flags|=1,c=em(X,M),c.ref=p.ref,c.return=p,p.child=c}function Mge(c,p,w,M,j){if(c!==null){var X=c.memoizedProps;if(BC(X,M)&&c.ref===p.ref)if(Ha=!1,p.pendingProps=M=X,(c.lanes&j)!==0)c.flags&131072&&(Ha=!0);else return p.lanes=c.lanes,Fh(c,p,j)}return X8(c,p,w,M,j)}function kge(c,p,w){var M=p.pendingProps,j=M.children,X=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},pi(O_,ml),ml|=w;else{if(!(w&1073741824))return c=X!==null?X.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,pi(O_,ml),ml|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=X!==null?X.baseLanes:w,pi(O_,ml),ml|=M}else X!==null?(M=X.baseLanes|w,p.memoizedState=null):M=w,pi(O_,ml),ml|=M;return ga(c,p,j,w),p.child}function Age(c,p){var w=p.ref;(c===null&&w!==null||c!==null&&c.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function X8(c,p,w,M,j){var X=ja(w)?Bv:Bo.current;return X=E_(p,X),k_(p,j),w=z8(c,p,w,M,X,j),M=V8(),c!==null&&!Ha?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~j,Fh(c,p,j)):(Ii&&M&&w8(p),p.flags|=1,ga(c,p,w,j),p.child)}function Ige(c,p,w,M,j){if(ja(w)){var X=!0;VO(p)}else X=!1;if(k_(p,j),p.stateNode===null)s3(c,p),Xme(p,w,M),D8(p,w,M,j),M=!0;else if(c===null){var oe=p.stateNode,Pe=p.memoizedProps;oe.props=Pe;var Be=oe.context,gt=w.contextType;typeof gt=="object"&&gt!==null?gt=tu(gt):(gt=ja(w)?Bv:Bo.current,gt=E_(p,gt));var zt=w.getDerivedStateFromProps,Ht=typeof zt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Ht||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Pe!==M||Be!==gt)&&qme(p,oe,M,gt),Kf=!1;var Ut=p.memoizedState;oe.state=Ut,qO(p,M,oe,j),Be=p.memoizedState,Pe!==M||Ut!==Be||Va.current||Kf?(typeof zt=="function"&&(R8(p,w,zt,M),Be=p.memoizedState),(Pe=Kf||Kme(p,w,Pe,M,Ut,Be,gt))?(Ht||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Be),oe.props=M,oe.state=Be,oe.context=gt,M=Pe):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{oe=p.stateNode,Hme(c,p),Pe=p.memoizedProps,gt=p.type===p.elementType?Pe:lc(p.type,Pe),oe.props=gt,Ht=p.pendingProps,Ut=oe.context,Be=w.contextType,typeof Be=="object"&&Be!==null?Be=tu(Be):(Be=ja(w)?Bv:Bo.current,Be=E_(p,Be));var an=w.getDerivedStateFromProps;(zt=typeof an=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Pe!==Ht||Ut!==Be)&&qme(p,oe,M,Be),Kf=!1,Ut=p.memoizedState,oe.state=Ut,qO(p,M,oe,j);var gn=p.memoizedState;Pe!==Ht||Ut!==gn||Va.current||Kf?(typeof an=="function"&&(R8(p,w,an,M),gn=p.memoizedState),(gt=Kf||Kme(p,w,gt,M,Ut,gn,Be)||!1)?(zt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(M,gn,Be),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(M,gn,Be)),typeof oe.componentDidUpdate=="function"&&(p.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Pe===c.memoizedProps&&Ut===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Pe===c.memoizedProps&&Ut===c.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=gn),oe.props=M,oe.state=gn,oe.context=Be,M=gt):(typeof oe.componentDidUpdate!="function"||Pe===c.memoizedProps&&Ut===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Pe===c.memoizedProps&&Ut===c.memoizedState||(p.flags|=1024),M=!1)}return q8(c,p,w,M,X,j)}function q8(c,p,w,M,j,X){Age(c,p);var oe=(p.flags&128)!==0;if(!M&&!oe)return j&&Lme(p,w,!1),Fh(c,p,X);M=p.stateNode,aNe.current=p;var Pe=oe&&typeof w.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,c!==null&&oe?(p.child=A_(p,c.child,null,X),p.child=A_(p,null,Pe,X)):ga(c,p,Pe,X),p.memoizedState=M.state,j&&Lme(p,w,!0),p.child}function Rge(c){var p=c.stateNode;p.pendingContext?Dme(c,p.pendingContext,p.pendingContext!==p.context):p.context&&Dme(c,p.context,!1),O8(c,p.containerInfo)}function Dge(c,p,w,M,j){return T_(),C8(j),p.flags|=256,ga(c,p,w,M),p.child}var Y8={dehydrated:null,treeContext:null,retryLane:0};function Z8(c){return{baseLanes:c,cachePool:null,transitions:null}}function Oge(c,p,w){var M=p.pendingProps,j=zi.current,X=!1,oe=(p.flags&128)!==0,Pe;if((Pe=oe)||(Pe=c!==null&&c.memoizedState===null?!1:(j&2)!==0),Pe?(X=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(j|=1),pi(zi,j&1),c===null)return E8(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(p.mode&1?c.data==="$!"?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(oe=M.children,c=M.fallback,X?(M=p.mode,X=p.child,oe={mode:"hidden",children:oe},!(M&1)&&X!==null?(X.childLanes=0,X.pendingProps=oe):X=v3(oe,M,0,null),c=Xv(c,M,w,null),X.return=p,c.return=p,X.sibling=c,p.child=X,p.child.memoizedState=Z8(w),p.memoizedState=Y8,c):Q8(p,oe));if(j=c.memoizedState,j!==null&&(Pe=j.dehydrated,Pe!==null))return lNe(c,p,oe,M,Pe,j,w);if(X){X=M.fallback,oe=p.mode,j=c.child,Pe=j.sibling;var Be={mode:"hidden",children:M.children};return!(oe&1)&&p.child!==j?(M=p.child,M.childLanes=0,M.pendingProps=Be,p.deletions=null):(M=em(j,Be),M.subtreeFlags=j.subtreeFlags&14680064),Pe!==null?X=em(Pe,X):(X=Xv(X,oe,w,null),X.flags|=2),X.return=p,M.return=p,M.sibling=X,p.child=M,M=X,X=p.child,oe=c.child.memoizedState,oe=oe===null?Z8(w):{baseLanes:oe.baseLanes|w,cachePool:null,transitions:oe.transitions},X.memoizedState=oe,X.childLanes=c.childLanes&~w,p.memoizedState=Y8,M}return X=c.child,c=X.sibling,M=em(X,{mode:"visible",children:M.children}),!(p.mode&1)&&(M.lanes=w),M.return=p,M.sibling=null,c!==null&&(w=p.deletions,w===null?(p.deletions=[c],p.flags|=16):w.push(c)),p.child=M,p.memoizedState=null,M}function Q8(c,p){return p=v3({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function i3(c,p,w,M){return M!==null&&C8(M),A_(p,c.child,null,w),c=Q8(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function lNe(c,p,w,M,j,X,oe){if(w)return p.flags&256?(p.flags&=-257,M=$8(Error(d(422))),i3(c,p,oe,M)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(X=M.fallback,j=p.mode,M=v3({mode:"visible",children:M.children},j,0,null),X=Xv(X,j,oe,null),X.flags|=2,M.return=p,X.return=p,M.sibling=X,p.child=M,p.mode&1&&A_(p,c.child,null,oe),p.child.memoizedState=Z8(oe),p.memoizedState=Y8,X);if(!(p.mode&1))return i3(c,p,oe,null);if(j.data==="$!"){if(M=j.nextSibling&&j.nextSibling.dataset,M)var Pe=M.dgst;return M=Pe,X=Error(d(419)),M=$8(X,M,void 0),i3(c,p,oe,M)}if(Pe=(oe&c.childLanes)!==0,Ha||Pe){if(M=Zs,M!==null){switch(oe&-oe){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(M.suspendedLanes|oe)?0:j,j!==0&&j!==X.retryLane&&(X.retryLane=j,Lh(c,j),dc(M,c,j,-1))}return pH(),M=$8(Error(d(421))),i3(c,p,oe,M)}return j.data==="$?"?(p.flags|=128,p.child=c.child,p=wNe.bind(null,c),j._reactRetry=p,null):(c=X.treeContext,fl=Hf(j.nextSibling),pl=p,Ii=!0,ac=null,c!==null&&(Jl[eu++]=Dh,Jl[eu++]=Oh,Jl[eu++]=Uv,Dh=c.id,Oh=c.overflow,Uv=p),p=Q8(p,M.children),p.flags|=4096,p)}function Lge(c,p,w){c.lanes|=p;var M=c.alternate;M!==null&&(M.lanes|=p),k8(c.return,p,w)}function J8(c,p,w,M,j){var X=c.memoizedState;X===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:w,tailMode:j}:(X.isBackwards=p,X.rendering=null,X.renderingStartTime=0,X.last=M,X.tail=w,X.tailMode=j)}function Nge(c,p,w){var M=p.pendingProps,j=M.revealOrder,X=M.tail;if(ga(c,p,M.children,w),M=zi.current,M&2)M=M&1|2,p.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Lge(c,w,p);else if(c.tag===19)Lge(c,w,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(pi(zi,M),!(p.mode&1))p.memoizedState=null;else switch(j){case"forwards":for(w=p.child,j=null;w!==null;)c=w.alternate,c!==null&&QO(c)===null&&(j=w),w=w.sibling;w=j,w===null?(j=p.child,p.child=null):(j=w.sibling,w.sibling=null),J8(p,!1,j,w,X);break;case"backwards":for(w=null,j=p.child,p.child=null;j!==null;){if(c=j.alternate,c!==null&&QO(c)===null){p.child=j;break}c=j.sibling,j.sibling=w,w=j,j=c}J8(p,!0,w,null,X);break;case"together":J8(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function s3(c,p){!(p.mode&1)&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function Fh(c,p,w){if(c!==null&&(p.dependencies=c.dependencies),Gv|=p.lanes,!(w&p.childLanes))return null;if(c!==null&&p.child!==c.child)throw Error(d(153));if(p.child!==null){for(c=p.child,w=em(c,c.pendingProps),p.child=w,w.return=p;c.sibling!==null;)c=c.sibling,w=w.sibling=em(c,c.pendingProps),w.return=p;w.sibling=null}return p.child}function uNe(c,p,w){switch(p.tag){case 3:Rge(p),T_();break;case 5:Jme(p);break;case 1:ja(p.type)&&VO(p);break;case 4:O8(p,p.stateNode.containerInfo);break;case 10:var M=p.type._context,j=p.memoizedProps.value;pi($O,M._currentValue),M._currentValue=j;break;case 13:if(M=p.memoizedState,M!==null)return M.dehydrated!==null?(pi(zi,zi.current&1),p.flags|=128,null):w&p.child.childLanes?Oge(c,p,w):(pi(zi,zi.current&1),c=Fh(c,p,w),c!==null?c.sibling:null);pi(zi,zi.current&1);break;case 19:if(M=(w&p.childLanes)!==0,c.flags&128){if(M)return Nge(c,p,w);p.flags|=128}if(j=p.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),pi(zi,zi.current),M)break;return null;case 22:case 23:return p.lanes=0,kge(c,p,w)}return Fh(c,p,w)}var Fge,eH,Bge,Uge;Fge=function(c,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)c.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},eH=function(){},Bge=function(c,p,w,M){var j=c.memoizedProps;if(j!==M){c=p.stateNode,jv(yd.current);var X=null;switch(w){case"input":j=ht(c,j),M=ht(c,M),X=[];break;case"select":j=de({},j,{value:void 0}),M=de({},M,{value:void 0}),X=[];break;case"textarea":j=Bt(c,j),M=Bt(c,M),X=[];break;default:typeof j.onClick!="function"&&typeof M.onClick=="function"&&(c.onclick=BO)}h_(w,M);var oe;w=null;for(gt in j)if(!M.hasOwnProperty(gt)&&j.hasOwnProperty(gt)&&j[gt]!=null)if(gt==="style"){var Pe=j[gt];for(oe in Pe)Pe.hasOwnProperty(oe)&&(w||(w={}),w[oe]="")}else gt!=="dangerouslySetInnerHTML"&&gt!=="children"&&gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(g.hasOwnProperty(gt)?X||(X=[]):(X=X||[]).push(gt,null));for(gt in M){var Be=M[gt];if(Pe=j!=null?j[gt]:void 0,M.hasOwnProperty(gt)&&Be!==Pe&&(Be!=null||Pe!=null))if(gt==="style")if(Pe){for(oe in Pe)!Pe.hasOwnProperty(oe)||Be&&Be.hasOwnProperty(oe)||(w||(w={}),w[oe]="");for(oe in Be)Be.hasOwnProperty(oe)&&Pe[oe]!==Be[oe]&&(w||(w={}),w[oe]=Be[oe])}else w||(X||(X=[]),X.push(gt,w)),w=Be;else gt==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,Pe=Pe?Pe.__html:void 0,Be!=null&&Pe!==Be&&(X=X||[]).push(gt,Be)):gt==="children"?typeof Be!="string"&&typeof Be!="number"||(X=X||[]).push(gt,""+Be):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&(g.hasOwnProperty(gt)?(Be!=null&&gt==="onScroll"&&Si("scroll",c),X||Pe===Be||(X=[])):(X=X||[]).push(gt,Be))}w&&(X=X||[]).push("style",w);var gt=X;(p.updateQueue=gt)&&(p.flags|=4)}},Uge=function(c,p,w,M){w!==M&&(p.flags|=4)};function JC(c,p){if(!Ii)switch(c.tailMode){case"hidden":p=c.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var M=null;w!==null;)w.alternate!==null&&(M=w),w=w.sibling;M===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function zo(c){var p=c.alternate!==null&&c.alternate.child===c.child,w=0,M=0;if(p)for(var j=c.child;j!==null;)w|=j.lanes|j.childLanes,M|=j.subtreeFlags&14680064,M|=j.flags&14680064,j.return=c,j=j.sibling;else for(j=c.child;j!==null;)w|=j.lanes|j.childLanes,M|=j.subtreeFlags,M|=j.flags,j.return=c,j=j.sibling;return c.subtreeFlags|=M,c.childLanes=w,p}function cNe(c,p,w){var M=p.pendingProps;switch(x8(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zo(p),null;case 1:return ja(p.type)&&zO(),zo(p),null;case 3:return M=p.stateNode,I_(),Ei(Va),Ei(Bo),F8(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(WO(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,ac!==null&&(cH(ac),ac=null))),eH(c,p),zo(p),null;case 5:L8(p);var j=jv(XC.current);if(w=p.type,c!==null&&p.stateNode!=null)Bge(c,p,w,M,j),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(d(166));return zo(p),null}if(c=jv(yd.current),WO(p)){M=p.stateNode,w=p.type;var X=p.memoizedProps;switch(M[vd]=p,M[HC]=X,c=(p.mode&1)!==0,w){case"dialog":Si("cancel",M),Si("close",M);break;case"iframe":case"object":case"embed":Si("load",M);break;case"video":case"audio":for(j=0;j<zC.length;j++)Si(zC[j],M);break;case"source":Si("error",M);break;case"img":case"image":case"link":Si("error",M),Si("load",M);break;case"details":Si("toggle",M);break;case"input":ct(M,X),Si("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!X.multiple},Si("invalid",M);break;case"textarea":Mt(M,X),Si("invalid",M)}h_(w,X),j=null;for(var oe in X)if(X.hasOwnProperty(oe)){var Pe=X[oe];oe==="children"?typeof Pe=="string"?M.textContent!==Pe&&(X.suppressHydrationWarning!==!0&&FO(M.textContent,Pe,c),j=["children",Pe]):typeof Pe=="number"&&M.textContent!==""+Pe&&(X.suppressHydrationWarning!==!0&&FO(M.textContent,Pe,c),j=["children",""+Pe]):g.hasOwnProperty(oe)&&Pe!=null&&oe==="onScroll"&&Si("scroll",M)}switch(w){case"input":Rn(M),$e(M,X,!0);break;case"textarea":Rn(M),An(M);break;case"select":case"option":break;default:typeof X.onClick=="function"&&(M.onclick=BO)}M=j,p.updateQueue=M,M!==null&&(p.flags|=4)}else{oe=j.nodeType===9?j:j.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Ir(w)),c==="http://www.w3.org/1999/xhtml"?w==="script"?(c=oe.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof M.is=="string"?c=oe.createElement(w,{is:M.is}):(c=oe.createElement(w),w==="select"&&(oe=c,M.multiple?oe.multiple=!0:M.size&&(oe.size=M.size))):c=oe.createElementNS(c,w),c[vd]=p,c[HC]=M,Fge(c,p,!1,!1),p.stateNode=c;e:{switch(oe=wC(w,M),w){case"dialog":Si("cancel",c),Si("close",c),j=M;break;case"iframe":case"object":case"embed":Si("load",c),j=M;break;case"video":case"audio":for(j=0;j<zC.length;j++)Si(zC[j],c);j=M;break;case"source":Si("error",c),j=M;break;case"img":case"image":case"link":Si("error",c),Si("load",c),j=M;break;case"details":Si("toggle",c),j=M;break;case"input":ct(c,M),j=ht(c,M),Si("invalid",c);break;case"option":j=M;break;case"select":c._wrapperState={wasMultiple:!!M.multiple},j=de({},M,{value:void 0}),Si("invalid",c);break;case"textarea":Mt(c,M),j=Bt(c,M),Si("invalid",c);break;default:j=M}h_(w,j),Pe=j;for(X in Pe)if(Pe.hasOwnProperty(X)){var Be=Pe[X];X==="style"?d_(c,Be):X==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,Be!=null&&Nf(c,Be)):X==="children"?typeof Be=="string"?(w!=="textarea"||Be!=="")&&Fo(c,Be):typeof Be=="number"&&Fo(c,""+Be):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(g.hasOwnProperty(X)?Be!=null&&X==="onScroll"&&Si("scroll",c):Be!=null&&re(c,X,Be,oe))}switch(w){case"input":Rn(c),$e(c,M,!1);break;case"textarea":Rn(c),An(c);break;case"option":M.value!=null&&c.setAttribute("value",""+Qt(M.value));break;case"select":c.multiple=!!M.multiple,X=M.value,X!=null?et(c,!!M.multiple,X,!1):M.defaultValue!=null&&et(c,!!M.multiple,M.defaultValue,!0);break;default:typeof j.onClick=="function"&&(c.onclick=BO)}switch(w){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return zo(p),null;case 6:if(c&&p.stateNode!=null)Uge(c,p,c.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(d(166));if(w=jv(XC.current),jv(yd.current),WO(p)){if(M=p.stateNode,w=p.memoizedProps,M[vd]=p,(X=M.nodeValue!==w)&&(c=pl,c!==null))switch(c.tag){case 3:FO(M.nodeValue,w,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&FO(M.nodeValue,w,(c.mode&1)!==0)}X&&(p.flags|=4)}else M=(w.nodeType===9?w:w.ownerDocument).createTextNode(M),M[vd]=p,p.stateNode=M}return zo(p),null;case 13:if(Ei(zi),M=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Ii&&fl!==null&&p.mode&1&&!(p.flags&128))Vme(),T_(),p.flags|=98560,X=!1;else if(X=WO(p),M!==null&&M.dehydrated!==null){if(c===null){if(!X)throw Error(d(318));if(X=p.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(d(317));X[vd]=p}else T_(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;zo(p),X=!1}else ac!==null&&(cH(ac),ac=null),X=!0;if(!X)return p.flags&65536?p:null}return p.flags&128?(p.lanes=w,p):(M=M!==null,M!==(c!==null&&c.memoizedState!==null)&&M&&(p.child.flags|=8192,p.mode&1&&(c===null||zi.current&1?Ns===0&&(Ns=3):pH())),p.updateQueue!==null&&(p.flags|=4),zo(p),null);case 4:return I_(),eH(c,p),c===null&&VC(p.stateNode.containerInfo),zo(p),null;case 10:return M8(p.type._context),zo(p),null;case 17:return ja(p.type)&&zO(),zo(p),null;case 19:if(Ei(zi),X=p.memoizedState,X===null)return zo(p),null;if(M=(p.flags&128)!==0,oe=X.rendering,oe===null)if(M)JC(X,!1);else{if(Ns!==0||c!==null&&c.flags&128)for(c=p.child;c!==null;){if(oe=QO(c),oe!==null){for(p.flags|=128,JC(X,!1),M=oe.updateQueue,M!==null&&(p.updateQueue=M,p.flags|=4),p.subtreeFlags=0,M=w,w=p.child;w!==null;)X=w,c=M,X.flags&=14680066,oe=X.alternate,oe===null?(X.childLanes=0,X.lanes=c,X.child=null,X.subtreeFlags=0,X.memoizedProps=null,X.memoizedState=null,X.updateQueue=null,X.dependencies=null,X.stateNode=null):(X.childLanes=oe.childLanes,X.lanes=oe.lanes,X.child=oe.child,X.subtreeFlags=0,X.deletions=null,X.memoizedProps=oe.memoizedProps,X.memoizedState=oe.memoizedState,X.updateQueue=oe.updateQueue,X.type=oe.type,c=oe.dependencies,X.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),w=w.sibling;return pi(zi,zi.current&1|2),p.child}c=c.sibling}X.tail!==null&&fs()>L_&&(p.flags|=128,M=!0,JC(X,!1),p.lanes=4194304)}else{if(!M)if(c=QO(oe),c!==null){if(p.flags|=128,M=!0,w=c.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),JC(X,!0),X.tail===null&&X.tailMode==="hidden"&&!oe.alternate&&!Ii)return zo(p),null}else 2*fs()-X.renderingStartTime>L_&&w!==1073741824&&(p.flags|=128,M=!0,JC(X,!1),p.lanes=4194304);X.isBackwards?(oe.sibling=p.child,p.child=oe):(w=X.last,w!==null?w.sibling=oe:p.child=oe,X.last=oe)}return X.tail!==null?(p=X.tail,X.rendering=p,X.tail=p.sibling,X.renderingStartTime=fs(),p.sibling=null,w=zi.current,pi(zi,M?w&1|2:w&1),p):(zo(p),null);case 22:case 23:return hH(),M=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(p.flags|=8192),M&&p.mode&1?ml&1073741824&&(zo(p),p.subtreeFlags&6&&(p.flags|=8192)):zo(p),null;case 24:return null;case 25:return null}throw Error(d(156,p.tag))}function dNe(c,p){switch(x8(p),p.tag){case 1:return ja(p.type)&&zO(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return I_(),Ei(Va),Ei(Bo),F8(),c=p.flags,c&65536&&!(c&128)?(p.flags=c&-65537|128,p):null;case 5:return L8(p),null;case 13:if(Ei(zi),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(d(340));T_()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return Ei(zi),null;case 4:return I_(),null;case 10:return M8(p.type._context),null;case 22:case 23:return hH(),null;case 24:return null;default:return null}}var o3=!1,Vo=!1,hNe=typeof WeakSet=="function"?WeakSet:Set,dn=null;function D_(c,p){var w=c.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(M){Ji(c,p,M)}else w.current=null}function zge(c,p,w){try{w()}catch(M){Ji(c,p,M)}}var Vge=!1;function pNe(c,p){if(p8=SO,c=mme(),a8(c)){if("selectionStart"in c)var w={start:c.selectionStart,end:c.selectionEnd};else e:{w=(w=c.ownerDocument)&&w.defaultView||window;var M=w.getSelection&&w.getSelection();if(M&&M.rangeCount!==0){w=M.anchorNode;var j=M.anchorOffset,X=M.focusNode;M=M.focusOffset;try{w.nodeType,X.nodeType}catch{w=null;break e}var oe=0,Pe=-1,Be=-1,gt=0,zt=0,Ht=c,Ut=null;t:for(;;){for(var an;Ht!==w||j!==0&&Ht.nodeType!==3||(Pe=oe+j),Ht!==X||M!==0&&Ht.nodeType!==3||(Be=oe+M),Ht.nodeType===3&&(oe+=Ht.nodeValue.length),(an=Ht.firstChild)!==null;)Ut=Ht,Ht=an;for(;;){if(Ht===c)break t;if(Ut===w&&++gt===j&&(Pe=oe),Ut===X&&++zt===M&&(Be=oe),(an=Ht.nextSibling)!==null)break;Ht=Ut,Ut=Ht.parentNode}Ht=an}w=Pe===-1||Be===-1?null:{start:Pe,end:Be}}else w=null}w=w||{start:0,end:0}}else w=null;for(f8={focusedElem:c,selectionRange:w},SO=!1,dn=p;dn!==null;)if(p=dn,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,dn=c;else for(;dn!==null;){p=dn;try{var gn=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(gn!==null){var wn=gn.memoizedProps,ms=gn.memoizedState,tt=p.stateNode,je=tt.getSnapshotBeforeUpdate(p.elementType===p.type?wn:lc(p.type,wn),ms);tt.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var st=p.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(Xt){Ji(p,p.return,Xt)}if(c=p.sibling,c!==null){c.return=p.return,dn=c;break}dn=p.return}return gn=Vge,Vge=!1,gn}function eP(c,p,w){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var j=M=M.next;do{if((j.tag&c)===c){var X=j.destroy;j.destroy=void 0,X!==void 0&&zge(p,w,X)}j=j.next}while(j!==M)}}function a3(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&c)===c){var M=w.create;w.destroy=M()}w=w.next}while(w!==p)}}function tH(c){var p=c.ref;if(p!==null){var w=c.stateNode;switch(c.tag){case 5:c=w;break;default:c=w}typeof p=="function"?p(c):p.current=c}}function jge(c){var p=c.alternate;p!==null&&(c.alternate=null,jge(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[vd],delete p[HC],delete p[y8],delete p[qLe],delete p[YLe])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Hge(c){return c.tag===5||c.tag===3||c.tag===4}function Gge(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Hge(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function nH(c,p,w){var M=c.tag;if(M===5||M===6)c=c.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(c,p):w.insertBefore(c,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(c,w)):(p=w,p.appendChild(c)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=BO));else if(M!==4&&(c=c.child,c!==null))for(nH(c,p,w),c=c.sibling;c!==null;)nH(c,p,w),c=c.sibling}function rH(c,p,w){var M=c.tag;if(M===5||M===6)c=c.stateNode,p?w.insertBefore(c,p):w.appendChild(c);else if(M!==4&&(c=c.child,c!==null))for(rH(c,p,w),c=c.sibling;c!==null;)rH(c,p,w),c=c.sibling}var wo=null,uc=!1;function qf(c,p,w){for(w=w.child;w!==null;)Wge(c,p,w),w=w.sibling}function Wge(c,p,w){if(gd&&typeof gd.onCommitFiberUnmount=="function")try{gd.onCommitFiberUnmount(vO,w)}catch{}switch(w.tag){case 5:Vo||D_(w,p);case 6:var M=wo,j=uc;wo=null,qf(c,p,w),wo=M,uc=j,wo!==null&&(uc?(c=wo,w=w.stateNode,c.nodeType===8?c.parentNode.removeChild(w):c.removeChild(w)):wo.removeChild(w.stateNode));break;case 18:wo!==null&&(uc?(c=wo,w=w.stateNode,c.nodeType===8?v8(c.parentNode,w):c.nodeType===1&&v8(c,w),RC(c)):v8(wo,w.stateNode));break;case 4:M=wo,j=uc,wo=w.stateNode.containerInfo,uc=!0,qf(c,p,w),wo=M,uc=j;break;case 0:case 11:case 14:case 15:if(!Vo&&(M=w.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){j=M=M.next;do{var X=j,oe=X.destroy;X=X.tag,oe!==void 0&&(X&2||X&4)&&zge(w,p,oe),j=j.next}while(j!==M)}qf(c,p,w);break;case 1:if(!Vo&&(D_(w,p),M=w.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=w.memoizedProps,M.state=w.memoizedState,M.componentWillUnmount()}catch(Pe){Ji(w,p,Pe)}qf(c,p,w);break;case 21:qf(c,p,w);break;case 22:w.mode&1?(Vo=(M=Vo)||w.memoizedState!==null,qf(c,p,w),Vo=M):qf(c,p,w);break;default:qf(c,p,w)}}function $ge(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var w=c.stateNode;w===null&&(w=c.stateNode=new hNe),p.forEach(function(M){var j=xNe.bind(null,c,M);w.has(M)||(w.add(M),M.then(j,j))})}}function cc(c,p){var w=p.deletions;if(w!==null)for(var M=0;M<w.length;M++){var j=w[M];try{var X=c,oe=p,Pe=oe;e:for(;Pe!==null;){switch(Pe.tag){case 5:wo=Pe.stateNode,uc=!1;break e;case 3:wo=Pe.stateNode.containerInfo,uc=!0;break e;case 4:wo=Pe.stateNode.containerInfo,uc=!0;break e}Pe=Pe.return}if(wo===null)throw Error(d(160));Wge(X,oe,j),wo=null,uc=!1;var Be=j.alternate;Be!==null&&(Be.return=null),j.return=null}catch(gt){Ji(j,p,gt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Kge(p,c),p=p.sibling}function Kge(c,p){var w=c.alternate,M=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(cc(p,c),_d(c),M&4){try{eP(3,c,c.return),a3(3,c)}catch(wn){Ji(c,c.return,wn)}try{eP(5,c,c.return)}catch(wn){Ji(c,c.return,wn)}}break;case 1:cc(p,c),_d(c),M&512&&w!==null&&D_(w,w.return);break;case 5:if(cc(p,c),_d(c),M&512&&w!==null&&D_(w,w.return),c.flags&32){var j=c.stateNode;try{Fo(j,"")}catch(wn){Ji(c,c.return,wn)}}if(M&4&&(j=c.stateNode,j!=null)){var X=c.memoizedProps,oe=w!==null?w.memoizedProps:X,Pe=c.type,Be=c.updateQueue;if(c.updateQueue=null,Be!==null)try{Pe==="input"&&X.type==="radio"&&X.name!=null&&Ee(j,X),wC(Pe,oe);var gt=wC(Pe,X);for(oe=0;oe<Be.length;oe+=2){var zt=Be[oe],Ht=Be[oe+1];zt==="style"?d_(j,Ht):zt==="dangerouslySetInnerHTML"?Nf(j,Ht):zt==="children"?Fo(j,Ht):re(j,zt,Ht,gt)}switch(Pe){case"input":Se(j,X);break;case"textarea":It(j,X);break;case"select":var Ut=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!X.multiple;var an=X.value;an!=null?et(j,!!X.multiple,an,!1):Ut!==!!X.multiple&&(X.defaultValue!=null?et(j,!!X.multiple,X.defaultValue,!0):et(j,!!X.multiple,X.multiple?[]:"",!1))}j[HC]=X}catch(wn){Ji(c,c.return,wn)}}break;case 6:if(cc(p,c),_d(c),M&4){if(c.stateNode===null)throw Error(d(162));j=c.stateNode,X=c.memoizedProps;try{j.nodeValue=X}catch(wn){Ji(c,c.return,wn)}}break;case 3:if(cc(p,c),_d(c),M&4&&w!==null&&w.memoizedState.isDehydrated)try{RC(p.containerInfo)}catch(wn){Ji(c,c.return,wn)}break;case 4:cc(p,c),_d(c);break;case 13:cc(p,c),_d(c),j=c.child,j.flags&8192&&(X=j.memoizedState!==null,j.stateNode.isHidden=X,!X||j.alternate!==null&&j.alternate.memoizedState!==null||(oH=fs())),M&4&&$ge(c);break;case 22:if(zt=w!==null&&w.memoizedState!==null,c.mode&1?(Vo=(gt=Vo)||zt,cc(p,c),Vo=gt):cc(p,c),_d(c),M&8192){if(gt=c.memoizedState!==null,(c.stateNode.isHidden=gt)&&!zt&&c.mode&1)for(dn=c,zt=c.child;zt!==null;){for(Ht=dn=zt;dn!==null;){switch(Ut=dn,an=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:eP(4,Ut,Ut.return);break;case 1:D_(Ut,Ut.return);var gn=Ut.stateNode;if(typeof gn.componentWillUnmount=="function"){M=Ut,w=Ut.return;try{p=M,gn.props=p.memoizedProps,gn.state=p.memoizedState,gn.componentWillUnmount()}catch(wn){Ji(M,w,wn)}}break;case 5:D_(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){Yge(Ht);continue}}an!==null?(an.return=Ut,dn=an):Yge(Ht)}zt=zt.sibling}e:for(zt=null,Ht=c;;){if(Ht.tag===5){if(zt===null){zt=Ht;try{j=Ht.stateNode,gt?(X=j.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none"):(Pe=Ht.stateNode,Be=Ht.memoizedProps.style,oe=Be!=null&&Be.hasOwnProperty("display")?Be.display:null,Pe.style.display=Lv("display",oe))}catch(wn){Ji(c,c.return,wn)}}}else if(Ht.tag===6){if(zt===null)try{Ht.stateNode.nodeValue=gt?"":Ht.memoizedProps}catch(wn){Ji(c,c.return,wn)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===c)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===c)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===c)break e;zt===Ht&&(zt=null),Ht=Ht.return}zt===Ht&&(zt=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}break;case 19:cc(p,c),_d(c),M&4&&$ge(c);break;case 21:break;default:cc(p,c),_d(c)}}function _d(c){var p=c.flags;if(p&2){try{e:{for(var w=c.return;w!==null;){if(Hge(w)){var M=w;break e}w=w.return}throw Error(d(160))}switch(M.tag){case 5:var j=M.stateNode;M.flags&32&&(Fo(j,""),M.flags&=-33);var X=Gge(c);rH(c,X,j);break;case 3:case 4:var oe=M.stateNode.containerInfo,Pe=Gge(c);nH(c,Pe,oe);break;default:throw Error(d(161))}}catch(Be){Ji(c,c.return,Be)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function fNe(c,p,w){dn=c,Xge(c)}function Xge(c,p,w){for(var M=(c.mode&1)!==0;dn!==null;){var j=dn,X=j.child;if(j.tag===22&&M){var oe=j.memoizedState!==null||o3;if(!oe){var Pe=j.alternate,Be=Pe!==null&&Pe.memoizedState!==null||Vo;Pe=o3;var gt=Vo;if(o3=oe,(Vo=Be)&&!gt)for(dn=j;dn!==null;)oe=dn,Be=oe.child,oe.tag===22&&oe.memoizedState!==null?Zge(j):Be!==null?(Be.return=oe,dn=Be):Zge(j);for(;X!==null;)dn=X,Xge(X),X=X.sibling;dn=j,o3=Pe,Vo=gt}qge(c)}else j.subtreeFlags&8772&&X!==null?(X.return=j,dn=X):qge(c)}}function qge(c){for(;dn!==null;){var p=dn;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Vo||a3(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!Vo)if(w===null)M.componentDidMount();else{var j=p.elementType===p.type?w.memoizedProps:lc(p.type,w.memoizedProps);M.componentDidUpdate(j,w.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var X=p.updateQueue;X!==null&&Wme(p,X,M);break;case 3:var oe=p.updateQueue;if(oe!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}Wme(p,oe,w)}break;case 5:var Pe=p.stateNode;if(w===null&&p.flags&4){w=Pe;var Be=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Be.autoFocus&&w.focus();break;case"img":Be.src&&(w.src=Be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var gt=p.alternate;if(gt!==null){var zt=gt.memoizedState;if(zt!==null){var Ht=zt.dehydrated;Ht!==null&&RC(Ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(d(163))}Vo||p.flags&512&&tH(p)}catch(Ut){Ji(p,p.return,Ut)}}if(p===c){dn=null;break}if(w=p.sibling,w!==null){w.return=p.return,dn=w;break}dn=p.return}}function Yge(c){for(;dn!==null;){var p=dn;if(p===c){dn=null;break}var w=p.sibling;if(w!==null){w.return=p.return,dn=w;break}dn=p.return}}function Zge(c){for(;dn!==null;){var p=dn;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{a3(4,p)}catch(Be){Ji(p,w,Be)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var j=p.return;try{M.componentDidMount()}catch(Be){Ji(p,j,Be)}}var X=p.return;try{tH(p)}catch(Be){Ji(p,X,Be)}break;case 5:var oe=p.return;try{tH(p)}catch(Be){Ji(p,oe,Be)}}}catch(Be){Ji(p,p.return,Be)}if(p===c){dn=null;break}var Pe=p.sibling;if(Pe!==null){Pe.return=p.return,dn=Pe;break}dn=p.return}}var mNe=Math.ceil,l3=ne.ReactCurrentDispatcher,iH=ne.ReactCurrentOwner,ru=ne.ReactCurrentBatchConfig,Rr=0,Zs=null,Es=null,xo=0,ml=0,O_=Gf(0),Ns=0,tP=null,Gv=0,u3=0,sH=0,nP=null,Ga=null,oH=0,L_=1/0,Bh=null,c3=!1,aH=null,Yf=null,d3=!1,Zf=null,h3=0,rP=0,lH=null,p3=-1,f3=0;function va(){return Rr&6?fs():p3!==-1?p3:p3=fs()}function Qf(c){return c.mode&1?Rr&2&&xo!==0?xo&-xo:QLe.transition!==null?(f3===0&&(f3=Vfe()),f3):(c=Qr,c!==0||(c=window.event,c=c===void 0?16:Yfe(c.type)),c):1}function dc(c,p,w,M){if(50<rP)throw rP=0,lH=null,Error(d(185));TC(c,w,M),(!(Rr&2)||c!==Zs)&&(c===Zs&&(!(Rr&2)&&(u3|=w),Ns===4&&Jf(c,xo)),Wa(c,M),w===1&&Rr===0&&!(p.mode&1)&&(L_=fs()+500,jO&&$f()))}function Wa(c,p){var w=c.callbackNode;eLe(c,p);var M=_O(c,c===Zs?xo:0);if(M===0)w!==null&&Bfe(w),c.callbackNode=null,c.callbackPriority=0;else if(p=M&-M,c.callbackPriority!==p){if(w!=null&&Bfe(w),p===1)c.tag===0?ZLe(Jge.bind(null,c)):Nme(Jge.bind(null,c)),KLe(function(){!(Rr&6)&&$f()}),w=null;else{switch(jfe(M)){case 1:w=G6;break;case 4:w=Ufe;break;case 16:w=gO;break;case 536870912:w=zfe;break;default:w=gO}w=ave(w,Qge.bind(null,c))}c.callbackPriority=p,c.callbackNode=w}}function Qge(c,p){if(p3=-1,f3=0,Rr&6)throw Error(d(327));var w=c.callbackNode;if(N_()&&c.callbackNode!==w)return null;var M=_O(c,c===Zs?xo:0);if(M===0)return null;if(M&30||M&c.expiredLanes||p)p=m3(c,M);else{p=M;var j=Rr;Rr|=2;var X=tve();(Zs!==c||xo!==p)&&(Bh=null,L_=fs()+500,$v(c,p));do try{yNe();break}catch(Pe){eve(c,Pe)}while(1);T8(),l3.current=X,Rr=j,Es!==null?p=0:(Zs=null,xo=0,p=Ns)}if(p!==0){if(p===2&&(j=W6(c),j!==0&&(M=j,p=uH(c,j))),p===1)throw w=tP,$v(c,0),Jf(c,M),Wa(c,fs()),w;if(p===6)Jf(c,M);else{if(j=c.current.alternate,!(M&30)&&!gNe(j)&&(p=m3(c,M),p===2&&(X=W6(c),X!==0&&(M=X,p=uH(c,X))),p===1))throw w=tP,$v(c,0),Jf(c,M),Wa(c,fs()),w;switch(c.finishedWork=j,c.finishedLanes=M,p){case 0:case 1:throw Error(d(345));case 2:Kv(c,Ga,Bh);break;case 3:if(Jf(c,M),(M&130023424)===M&&(p=oH+500-fs(),10<p)){if(_O(c,0)!==0)break;if(j=c.suspendedLanes,(j&M)!==M){va(),c.pingedLanes|=c.suspendedLanes&j;break}c.timeoutHandle=g8(Kv.bind(null,c,Ga,Bh),p);break}Kv(c,Ga,Bh);break;case 4:if(Jf(c,M),(M&4194240)===M)break;for(p=c.eventTimes,j=-1;0<M;){var oe=31-sc(M);X=1<<oe,oe=p[oe],oe>j&&(j=oe),M&=~X}if(M=j,M=fs()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*mNe(M/1960))-M,10<M){c.timeoutHandle=g8(Kv.bind(null,c,Ga,Bh),M);break}Kv(c,Ga,Bh);break;case 5:Kv(c,Ga,Bh);break;default:throw Error(d(329))}}}return Wa(c,fs()),c.callbackNode===w?Qge.bind(null,c):null}function uH(c,p){var w=nP;return c.current.memoizedState.isDehydrated&&($v(c,p).flags|=256),c=m3(c,p),c!==2&&(p=Ga,Ga=w,p!==null&&cH(p)),c}function cH(c){Ga===null?Ga=c:Ga.push.apply(Ga,c)}function gNe(c){for(var p=c;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var M=0;M<w.length;M++){var j=w[M],X=j.getSnapshot;j=j.value;try{if(!oc(X(),j))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Jf(c,p){for(p&=~sH,p&=~u3,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var w=31-sc(p),M=1<<w;c[w]=-1,p&=~M}}function Jge(c){if(Rr&6)throw Error(d(327));N_();var p=_O(c,0);if(!(p&1))return Wa(c,fs()),null;var w=m3(c,p);if(c.tag!==0&&w===2){var M=W6(c);M!==0&&(p=M,w=uH(c,M))}if(w===1)throw w=tP,$v(c,0),Jf(c,p),Wa(c,fs()),w;if(w===6)throw Error(d(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,Kv(c,Ga,Bh),Wa(c,fs()),null}function dH(c,p){var w=Rr;Rr|=1;try{return c(p)}finally{Rr=w,Rr===0&&(L_=fs()+500,jO&&$f())}}function Wv(c){Zf!==null&&Zf.tag===0&&!(Rr&6)&&N_();var p=Rr;Rr|=1;var w=ru.transition,M=Qr;try{if(ru.transition=null,Qr=1,c)return c()}finally{Qr=M,ru.transition=w,Rr=p,!(Rr&6)&&$f()}}function hH(){ml=O_.current,Ei(O_)}function $v(c,p){c.finishedWork=null,c.finishedLanes=0;var w=c.timeoutHandle;if(w!==-1&&(c.timeoutHandle=-1,$Le(w)),Es!==null)for(w=Es.return;w!==null;){var M=w;switch(x8(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&zO();break;case 3:I_(),Ei(Va),Ei(Bo),F8();break;case 5:L8(M);break;case 4:I_();break;case 13:Ei(zi);break;case 19:Ei(zi);break;case 10:M8(M.type._context);break;case 22:case 23:hH()}w=w.return}if(Zs=c,Es=c=em(c.current,null),xo=ml=p,Ns=0,tP=null,sH=u3=Gv=0,Ga=nP=null,Vv!==null){for(p=0;p<Vv.length;p++)if(w=Vv[p],M=w.interleaved,M!==null){w.interleaved=null;var j=M.next,X=w.pending;if(X!==null){var oe=X.next;X.next=j,M.next=oe}w.pending=M}Vv=null}return c}function eve(c,p){do{var w=Es;try{if(T8(),JO.current=r3,e3){for(var M=Vi.memoizedState;M!==null;){var j=M.queue;j!==null&&(j.pending=null),M=M.next}e3=!1}if(Hv=0,Ys=Ls=Vi=null,qC=!1,YC=0,iH.current=null,w===null||w.return===null){Ns=1,tP=p,Es=null;break}e:{var X=c,oe=w.return,Pe=w,Be=p;if(p=xo,Pe.flags|=32768,Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var gt=Be,zt=Pe,Ht=zt.tag;if(!(zt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Ut=zt.alternate;Ut?(zt.updateQueue=Ut.updateQueue,zt.memoizedState=Ut.memoizedState,zt.lanes=Ut.lanes):(zt.updateQueue=null,zt.memoizedState=null)}var an=Ege(oe);if(an!==null){an.flags&=-257,Cge(an,oe,Pe,X,p),an.mode&1&&Sge(X,gt,p),p=an,Be=gt;var gn=p.updateQueue;if(gn===null){var wn=new Set;wn.add(Be),p.updateQueue=wn}else gn.add(Be);break e}else{if(!(p&1)){Sge(X,gt,p),pH();break e}Be=Error(d(426))}}else if(Ii&&Pe.mode&1){var ms=Ege(oe);if(ms!==null){!(ms.flags&65536)&&(ms.flags|=256),Cge(ms,oe,Pe,X,p),C8(R_(Be,Pe));break e}}X=Be=R_(Be,Pe),Ns!==4&&(Ns=2),nP===null?nP=[X]:nP.push(X),X=oe;do{switch(X.tag){case 3:X.flags|=65536,p&=-p,X.lanes|=p;var tt=wge(X,Be,p);Gme(X,tt);break e;case 1:Pe=Be;var je=X.type,st=X.stateNode;if(!(X.flags&128)&&(typeof je.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Yf===null||!Yf.has(st)))){X.flags|=65536,p&=-p,X.lanes|=p;var Xt=xge(X,Pe,p);Gme(X,Xt);break e}}X=X.return}while(X!==null)}rve(w)}catch(Pn){p=Pn,Es===w&&w!==null&&(Es=w=w.return);continue}break}while(1)}function tve(){var c=l3.current;return l3.current=r3,c===null?r3:c}function pH(){(Ns===0||Ns===3||Ns===2)&&(Ns=4),Zs===null||!(Gv&268435455)&&!(u3&268435455)||Jf(Zs,xo)}function m3(c,p){var w=Rr;Rr|=2;var M=tve();(Zs!==c||xo!==p)&&(Bh=null,$v(c,p));do try{vNe();break}catch(j){eve(c,j)}while(1);if(T8(),Rr=w,l3.current=M,Es!==null)throw Error(d(261));return Zs=null,xo=0,Ns}function vNe(){for(;Es!==null;)nve(Es)}function yNe(){for(;Es!==null&&!W3e();)nve(Es)}function nve(c){var p=ove(c.alternate,c,ml);c.memoizedProps=c.pendingProps,p===null?rve(c):Es=p,iH.current=null}function rve(c){var p=c;do{var w=p.alternate;if(c=p.return,p.flags&32768){if(w=dNe(w,p),w!==null){w.flags&=32767,Es=w;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Ns=6,Es=null;return}}else if(w=cNe(w,p,ml),w!==null){Es=w;return}if(p=p.sibling,p!==null){Es=p;return}Es=p=c}while(p!==null);Ns===0&&(Ns=5)}function Kv(c,p,w){var M=Qr,j=ru.transition;try{ru.transition=null,Qr=1,bNe(c,p,w,M)}finally{ru.transition=j,Qr=M}return null}function bNe(c,p,w,M){do N_();while(Zf!==null);if(Rr&6)throw Error(d(327));w=c.finishedWork;var j=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(d(177));c.callbackNode=null,c.callbackPriority=0;var X=w.lanes|w.childLanes;if(tLe(c,X),c===Zs&&(Es=Zs=null,xo=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||d3||(d3=!0,ave(gO,function(){return N_(),null})),X=(w.flags&15990)!==0,w.subtreeFlags&15990||X){X=ru.transition,ru.transition=null;var oe=Qr;Qr=1;var Pe=Rr;Rr|=4,iH.current=null,pNe(c,w),Kge(w,c),VLe(f8),SO=!!p8,f8=p8=null,c.current=w,fNe(w),$3e(),Rr=Pe,Qr=oe,ru.transition=X}else c.current=w;if(d3&&(d3=!1,Zf=c,h3=j),X=c.pendingLanes,X===0&&(Yf=null),q3e(w.stateNode),Wa(c,fs()),p!==null)for(M=c.onRecoverableError,w=0;w<p.length;w++)j=p[w],M(j.value,{componentStack:j.stack,digest:j.digest});if(c3)throw c3=!1,c=aH,aH=null,c;return h3&1&&c.tag!==0&&N_(),X=c.pendingLanes,X&1?c===lH?rP++:(rP=0,lH=c):rP=0,$f(),null}function N_(){if(Zf!==null){var c=jfe(h3),p=ru.transition,w=Qr;try{if(ru.transition=null,Qr=16>c?16:c,Zf===null)var M=!1;else{if(c=Zf,Zf=null,h3=0,Rr&6)throw Error(d(331));var j=Rr;for(Rr|=4,dn=c.current;dn!==null;){var X=dn,oe=X.child;if(dn.flags&16){var Pe=X.deletions;if(Pe!==null){for(var Be=0;Be<Pe.length;Be++){var gt=Pe[Be];for(dn=gt;dn!==null;){var zt=dn;switch(zt.tag){case 0:case 11:case 15:eP(8,zt,X)}var Ht=zt.child;if(Ht!==null)Ht.return=zt,dn=Ht;else for(;dn!==null;){zt=dn;var Ut=zt.sibling,an=zt.return;if(jge(zt),zt===gt){dn=null;break}if(Ut!==null){Ut.return=an,dn=Ut;break}dn=an}}}var gn=X.alternate;if(gn!==null){var wn=gn.child;if(wn!==null){gn.child=null;do{var ms=wn.sibling;wn.sibling=null,wn=ms}while(wn!==null)}}dn=X}}if(X.subtreeFlags&2064&&oe!==null)oe.return=X,dn=oe;else e:for(;dn!==null;){if(X=dn,X.flags&2048)switch(X.tag){case 0:case 11:case 15:eP(9,X,X.return)}var tt=X.sibling;if(tt!==null){tt.return=X.return,dn=tt;break e}dn=X.return}}var je=c.current;for(dn=je;dn!==null;){oe=dn;var st=oe.child;if(oe.subtreeFlags&2064&&st!==null)st.return=oe,dn=st;else e:for(oe=je;dn!==null;){if(Pe=dn,Pe.flags&2048)try{switch(Pe.tag){case 0:case 11:case 15:a3(9,Pe)}}catch(Pn){Ji(Pe,Pe.return,Pn)}if(Pe===oe){dn=null;break e}var Xt=Pe.sibling;if(Xt!==null){Xt.return=Pe.return,dn=Xt;break e}dn=Pe.return}}if(Rr=j,$f(),gd&&typeof gd.onPostCommitFiberRoot=="function")try{gd.onPostCommitFiberRoot(vO,c)}catch{}M=!0}return M}finally{Qr=w,ru.transition=p}}return!1}function ive(c,p,w){p=R_(w,p),p=wge(c,p,1),c=Xf(c,p,1),p=va(),c!==null&&(TC(c,1,p),Wa(c,p))}function Ji(c,p,w){if(c.tag===3)ive(c,c,w);else for(;p!==null;){if(p.tag===3){ive(p,c,w);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Yf===null||!Yf.has(M))){c=R_(w,c),c=xge(p,c,1),p=Xf(p,c,1),c=va(),p!==null&&(TC(p,1,c),Wa(p,c));break}}p=p.return}}function _Ne(c,p,w){var M=c.pingCache;M!==null&&M.delete(p),p=va(),c.pingedLanes|=c.suspendedLanes&w,Zs===c&&(xo&w)===w&&(Ns===4||Ns===3&&(xo&130023424)===xo&&500>fs()-oH?$v(c,0):sH|=w),Wa(c,p)}function sve(c,p){p===0&&(c.mode&1?(p=bO,bO<<=1,!(bO&130023424)&&(bO=4194304)):p=1);var w=va();c=Lh(c,p),c!==null&&(TC(c,p,w),Wa(c,w))}function wNe(c){var p=c.memoizedState,w=0;p!==null&&(w=p.retryLane),sve(c,w)}function xNe(c,p){var w=0;switch(c.tag){case 13:var M=c.stateNode,j=c.memoizedState;j!==null&&(w=j.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(d(314))}M!==null&&M.delete(p),sve(c,w)}var ove;ove=function(c,p,w){if(c!==null)if(c.memoizedProps!==p.pendingProps||Va.current)Ha=!0;else{if(!(c.lanes&w)&&!(p.flags&128))return Ha=!1,uNe(c,p,w);Ha=!!(c.flags&131072)}else Ha=!1,Ii&&p.flags&1048576&&Fme(p,GO,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;s3(c,p),c=p.pendingProps;var j=E_(p,Bo.current);k_(p,w),j=z8(null,p,M,c,j,w);var X=V8();return p.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ja(M)?(X=!0,VO(p)):X=!1,p.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,I8(p),j.updater=YO,p.stateNode=j,j._reactInternals=p,D8(p,M,c,w),p=q8(null,p,M,!0,X,w)):(p.tag=0,Ii&&X&&w8(p),ga(null,p,j,w),p=p.child),p;case 16:M=p.elementType;e:{switch(s3(c,p),c=p.pendingProps,j=M._init,M=j(M._payload),p.type=M,j=p.tag=ENe(M),c=lc(M,c),j){case 0:p=X8(null,p,M,c,w);break e;case 1:p=Ige(null,p,M,c,w);break e;case 11:p=Pge(null,p,M,c,w);break e;case 14:p=Tge(null,p,M,lc(M.type,c),w);break e}throw Error(d(306,M,""))}return p;case 0:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:lc(M,j),X8(c,p,M,j,w);case 1:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:lc(M,j),Ige(c,p,M,j,w);case 3:e:{if(Rge(p),c===null)throw Error(d(387));M=p.pendingProps,X=p.memoizedState,j=X.element,Hme(c,p),qO(p,M,null,w);var oe=p.memoizedState;if(M=oe.element,X.isDehydrated)if(X={element:M,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},p.updateQueue.baseState=X,p.memoizedState=X,p.flags&256){j=R_(Error(d(423)),p),p=Dge(c,p,M,w,j);break e}else if(M!==j){j=R_(Error(d(424)),p),p=Dge(c,p,M,w,j);break e}else for(fl=Hf(p.stateNode.containerInfo.firstChild),pl=p,Ii=!0,ac=null,w=Qme(p,null,M,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(T_(),M===j){p=Fh(c,p,w);break e}ga(c,p,M,w)}p=p.child}return p;case 5:return Jme(p),c===null&&E8(p),M=p.type,j=p.pendingProps,X=c!==null?c.memoizedProps:null,oe=j.children,m8(M,j)?oe=null:X!==null&&m8(M,X)&&(p.flags|=32),Age(c,p),ga(c,p,oe,w),p.child;case 6:return c===null&&E8(p),null;case 13:return Oge(c,p,w);case 4:return O8(p,p.stateNode.containerInfo),M=p.pendingProps,c===null?p.child=A_(p,null,M,w):ga(c,p,M,w),p.child;case 11:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:lc(M,j),Pge(c,p,M,j,w);case 7:return ga(c,p,p.pendingProps,w),p.child;case 8:return ga(c,p,p.pendingProps.children,w),p.child;case 12:return ga(c,p,p.pendingProps.children,w),p.child;case 10:e:{if(M=p.type._context,j=p.pendingProps,X=p.memoizedProps,oe=j.value,pi($O,M._currentValue),M._currentValue=oe,X!==null)if(oc(X.value,oe)){if(X.children===j.children&&!Va.current){p=Fh(c,p,w);break e}}else for(X=p.child,X!==null&&(X.return=p);X!==null;){var Pe=X.dependencies;if(Pe!==null){oe=X.child;for(var Be=Pe.firstContext;Be!==null;){if(Be.context===M){if(X.tag===1){Be=Nh(-1,w&-w),Be.tag=2;var gt=X.updateQueue;if(gt!==null){gt=gt.shared;var zt=gt.pending;zt===null?Be.next=Be:(Be.next=zt.next,zt.next=Be),gt.pending=Be}}X.lanes|=w,Be=X.alternate,Be!==null&&(Be.lanes|=w),k8(X.return,w,p),Pe.lanes|=w;break}Be=Be.next}}else if(X.tag===10)oe=X.type===p.type?null:X.child;else if(X.tag===18){if(oe=X.return,oe===null)throw Error(d(341));oe.lanes|=w,Pe=oe.alternate,Pe!==null&&(Pe.lanes|=w),k8(oe,w,p),oe=X.sibling}else oe=X.child;if(oe!==null)oe.return=X;else for(oe=X;oe!==null;){if(oe===p){oe=null;break}if(X=oe.sibling,X!==null){X.return=oe.return,oe=X;break}oe=oe.return}X=oe}ga(c,p,j.children,w),p=p.child}return p;case 9:return j=p.type,M=p.pendingProps.children,k_(p,w),j=tu(j),M=M(j),p.flags|=1,ga(c,p,M,w),p.child;case 14:return M=p.type,j=lc(M,p.pendingProps),j=lc(M.type,j),Tge(c,p,M,j,w);case 15:return Mge(c,p,p.type,p.pendingProps,w);case 17:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:lc(M,j),s3(c,p),p.tag=1,ja(M)?(c=!0,VO(p)):c=!1,k_(p,w),Xme(p,M,j),D8(p,M,j,w),q8(null,p,M,!0,c,w);case 19:return Nge(c,p,w);case 22:return kge(c,p,w)}throw Error(d(156,p.tag))};function ave(c,p){return Ffe(c,p)}function SNe(c,p,w,M){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function iu(c,p,w,M){return new SNe(c,p,w,M)}function fH(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ENe(c){if(typeof c=="function")return fH(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Re)return 11;if(c===Ot)return 14}return 2}function em(c,p){var w=c.alternate;return w===null?(w=iu(c.tag,p,c.key,c.mode),w.elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=p,w.type=c.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=c.flags&14680064,w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,p=c.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function g3(c,p,w,M,j,X){var oe=2;if(M=c,typeof c=="function")fH(c)&&(oe=1);else if(typeof c=="string")oe=5;else e:switch(c){case ve:return Xv(w.children,j,X,p);case we:oe=8,j|=8;break;case De:return c=iu(12,w,p,j|2),c.elementType=De,c.lanes=X,c;case J:return c=iu(13,w,p,j),c.elementType=J,c.lanes=X,c;case Ve:return c=iu(19,w,p,j),c.elementType=Ve,c.lanes=X,c;case ke:return v3(w,j,X,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case rt:oe=10;break e;case ce:oe=9;break e;case Re:oe=11;break e;case Ot:oe=14;break e;case Me:oe=16,M=null;break e}throw Error(d(130,c==null?c:typeof c,""))}return p=iu(oe,w,p,j),p.elementType=c,p.type=M,p.lanes=X,p}function Xv(c,p,w,M){return c=iu(7,c,M,p),c.lanes=w,c}function v3(c,p,w,M){return c=iu(22,c,M,p),c.elementType=ke,c.lanes=w,c.stateNode={isHidden:!1},c}function mH(c,p,w){return c=iu(6,c,null,p),c.lanes=w,c}function gH(c,p,w){return p=iu(4,c.children!==null?c.children:[],c.key,p),p.lanes=w,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function CNe(c,p,w,M,j){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$6(0),this.expirationTimes=$6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$6(0),this.identifierPrefix=M,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function vH(c,p,w,M,j,X,oe,Pe,Be){return c=new CNe(c,p,w,Pe,Be),p===1?(p=1,X===!0&&(p|=8)):p=0,X=iu(3,null,null,p),c.current=X,X.stateNode=c,X.memoizedState={element:M,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},I8(X),c}function PNe(c,p,w){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ce,key:M==null?null:""+M,children:c,containerInfo:p,implementation:w}}function lve(c){if(!c)return Wf;c=c._reactInternals;e:{if(Nv(c)!==c||c.tag!==1)throw Error(d(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ja(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(d(171))}if(c.tag===1){var w=c.type;if(ja(w))return Ome(c,w,p)}return p}function uve(c,p,w,M,j,X,oe,Pe,Be){return c=vH(w,M,!0,c,j,X,oe,Pe,Be),c.context=lve(null),w=c.current,M=va(),j=Qf(w),X=Nh(M,j),X.callback=p??null,Xf(w,X,j),c.current.lanes=j,TC(c,j,M),Wa(c,M),c}function y3(c,p,w,M){var j=p.current,X=va(),oe=Qf(j);return w=lve(w),p.context===null?p.context=w:p.pendingContext=w,p=Nh(X,oe),p.payload={element:c},M=M===void 0?null:M,M!==null&&(p.callback=M),c=Xf(j,p,oe),c!==null&&(dc(c,j,oe,X),XO(c,j,oe)),oe}function b3(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function cve(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var w=c.retryLane;c.retryLane=w!==0&&w<p?w:p}}function yH(c,p){cve(c,p),(c=c.alternate)&&cve(c,p)}function TNe(){return null}var dve=typeof reportError=="function"?reportError:function(c){console.error(c)};function bH(c){this._internalRoot=c}_3.prototype.render=bH.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(d(409));y3(c,p,null,null)},_3.prototype.unmount=bH.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;Wv(function(){y3(null,c,null,null)}),p[Ih]=null}};function _3(c){this._internalRoot=c}_3.prototype.unstable_scheduleHydration=function(c){if(c){var p=Wfe();c={blockedOn:null,target:c,priority:p};for(var w=0;w<zf.length&&p!==0&&p<zf[w].priority;w++);zf.splice(w,0,c),w===0&&Xfe(c)}};function _H(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function w3(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function hve(){}function MNe(c,p,w,M,j){if(j){if(typeof M=="function"){var X=M;M=function(){var gt=b3(oe);X.call(gt)}}var oe=uve(p,M,c,0,null,!1,!1,"",hve);return c._reactRootContainer=oe,c[Ih]=oe.current,VC(c.nodeType===8?c.parentNode:c),Wv(),oe}for(;j=c.lastChild;)c.removeChild(j);if(typeof M=="function"){var Pe=M;M=function(){var gt=b3(Be);Pe.call(gt)}}var Be=vH(c,0,!1,null,null,!1,!1,"",hve);return c._reactRootContainer=Be,c[Ih]=Be.current,VC(c.nodeType===8?c.parentNode:c),Wv(function(){y3(p,Be,w,M)}),Be}function x3(c,p,w,M,j){var X=w._reactRootContainer;if(X){var oe=X;if(typeof j=="function"){var Pe=j;j=function(){var Be=b3(oe);Pe.call(Be)}}y3(p,oe,c,j)}else oe=MNe(w,p,c,j,M);return b3(oe)}Hfe=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var w=PC(p.pendingLanes);w!==0&&(K6(p,w|1),Wa(p,fs()),!(Rr&6)&&(L_=fs()+500,$f()))}break;case 13:Wv(function(){var M=Lh(c,1);if(M!==null){var j=va();dc(M,c,1,j)}}),yH(c,1)}},X6=function(c){if(c.tag===13){var p=Lh(c,134217728);if(p!==null){var w=va();dc(p,c,134217728,w)}yH(c,134217728)}},Gfe=function(c){if(c.tag===13){var p=Qf(c),w=Lh(c,p);if(w!==null){var M=va();dc(w,c,p,M)}yH(c,p)}},Wfe=function(){return Qr},$fe=function(c,p){var w=Qr;try{return Qr=c,p()}finally{Qr=w}},p_=function(c,p,w){switch(p){case"input":if(Se(c,w),p=w.name,w.type==="radio"&&p!=null){for(w=c;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var M=w[p];if(M!==c&&M.form===c.form){var j=UO(M);if(!j)throw Error(d(90));Vr(M),Se(M,j)}}}break;case"textarea":It(c,w);break;case"select":p=w.value,p!=null&&et(c,!!w.multiple,p,!1)}},Afe=dH,Ife=Wv;var kNe={usingClientEntryPoint:!1,Events:[GC,x_,UO,Mfe,kfe,dH]},iP={findFiberByHostInstance:Fv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ANe={bundleType:iP.bundleType,version:iP.version,rendererPackageName:iP.rendererPackageName,rendererConfig:iP.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Lfe(c),c===null?null:c.stateNode},findFiberByHostInstance:iP.findFiberByHostInstance||TNe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(sP=__REACT_DEVTOOLS_GLOBAL_HOOK__,!sP.isDisabled&&sP.supportsFiber))try{vO=sP.inject(ANe),gd=sP}catch{}var sP;s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kNe,s.createPortal=function(c,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_H(p))throw Error(d(200));return PNe(c,p,null,w)},s.createRoot=function(c,p){if(!_H(c))throw Error(d(299));var w=!1,M="",j=dve;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onRecoverableError!==void 0&&(j=p.onRecoverableError)),p=vH(c,1,!1,null,null,w,!1,M,j),c[Ih]=p.current,VC(c.nodeType===8?c.parentNode:c),new bH(p)},s.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(d(188)):(c=Object.keys(c).join(","),Error(d(268,c)));return c=Lfe(p),c=c===null?null:c.stateNode,c},s.flushSync=function(c){return Wv(c)},s.hydrate=function(c,p,w){if(!w3(p))throw Error(d(200));return x3(null,c,p,!0,w)},s.hydrateRoot=function(c,p,w){if(!_H(c))throw Error(d(405));var M=w!=null&&w.hydratedSources||null,j=!1,X="",oe=dve;if(w!=null&&(w.unstable_strictMode===!0&&(j=!0),w.identifierPrefix!==void 0&&(X=w.identifierPrefix),w.onRecoverableError!==void 0&&(oe=w.onRecoverableError)),p=uve(p,null,c,1,w??null,j,!1,X,oe),c[Ih]=p.current,VC(c),M)for(c=0;c<M.length;c++)w=M[c],j=w._getVersion,j=j(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,j]:p.mutableSourceEagerHydrationData.push(w,j);return new _3(p)},s.render=function(c,p,w){if(!w3(p))throw Error(d(200));return x3(null,c,p,!1,w)},s.unmountComponentAtNode=function(c){if(!w3(c))throw Error(d(40));return c._reactRootContainer?(Wv(function(){x3(null,null,c,!1,function(){c._reactRootContainer=null,c[Ih]=null})}),!0):!1},s.unstable_batchedUpdates=dH,s.unstable_renderSubtreeIntoContainer=function(c,p,w,M){if(!w3(w))throw Error(d(200));if(c==null||c._reactInternals===void 0)throw Error(d(38));return x3(c,p,w,!1,M)},s.version="18.2.0-next-9e3b772b8-20220608"}),Ou=$((s,a)=>{function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(d){console.error(d)}}l(),a.exports=CS()});function M5(s){let[,a]=(0,Gc.useState)(0);return(0,Gc.useCallback)(()=>{a(l=>l+1)},[])}function Yn(s,a,l){let d=(0,Gc.useCallback)(s,a),f=(0,Gc.useRef)(null);f.current?f.current.set(d):f.current=new La.Atom(d);let g=(0,Gc.useRef)(null);return g.current||(g.current=(0,La.prism)(()=>f.current.prism.getValue()())),eb(g.current,l)}function sI(){Hg||(Hg=!0,(0,PS.default)(()=>{(0,oI.unstable_batchedUpdates)(function(){for(var s,a;rl.length>0;){let l=rl.shift();Jp.delete(l);let d;Lu&&((s=l.debug)==null||s.history.push("queue reached"));try{d=l.der.getValue()}catch(f){Lu&&((a=l.debug)==null||a.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(f),l.runUpdate();continue}d!==l.lastValue&&(l.lastValue=d,l.runUpdate())}Hg=!1},1)}))}function eb(s,a){var l;let d=M5(),f=(0,Gc.useRef)(void 0);f.current||(TS++,f.current={order:TS,runUpdate:()=>{f.current.unmounted||d()},der:s,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var b;Lu&&((b=f.current.debug)==null||b.history.push("queueUpdate()")),aI(f.current)},untap:s.onStale(()=>{Lu&&f.current.debug.history.push("onStale(cb)"),f.current.queueUpdate()})},Lu&&(f.current.debug={label:a,traceOfFirstTimeRender:new Error,history:[]})),(0,Gc.useLayoutEffect)(()=>function(){f.current.unmounted=!0,f.current.untap(),MS(f.current)},[]),MS(f.current);let g=f.current.der.getValue();return f.current.lastValue=g,Lu&&((l=f.current.debug)==null||l.history.push("rendered")),g}var La,PS,Gc,oI,Lu,nr,TS,rl,Jp,Hg,aI,lI,MS,yn=P(()=>{La=Ft,ui(),PS=q(ES()),Gc=q(Oe()),oI=q(Ou()),Lu=!1,nr=(s,a)=>Yn(()=>(0,La.val)(s),[s],a),TS=0,rl=[],Jp=new Set,Hg=!1,aI=s=>{lI(s),sI()},lI=s=>{if(!Jp.has(s))if(Jp.add(s),rl.length===0)rl.push(s);else{let a=fS(rl,l=>l.order>=s.order);a===-1?rl.push(s):rl[a].order>s.order&&rl.splice(a,0,s)}},MS=s=>{if(!Jp.has(s))return;Jp.delete(s);let a=fS(rl,l=>l===s);rl.splice(a,1)}}),k5=$(s=>{var a=60103,l=60106,d=60107,f=60108,g=60114,b=60109,_=60110,S=60112,C=60113,I=60120,O=60115,R=60116,A=60121,F=60122,L=60117,V=60129,H=60131;typeof Symbol=="function"&&Symbol.for&&(K=Symbol.for,a=K("react.element"),l=K("react.portal"),d=K("react.fragment"),f=K("react.strict_mode"),g=K("react.profiler"),b=K("react.provider"),_=K("react.context"),S=K("react.forward_ref"),C=K("react.suspense"),I=K("react.suspense_list"),O=K("react.memo"),R=K("react.lazy"),A=K("react.block"),F=K("react.server.block"),L=K("react.fundamental"),V=K("react.debug_trace_mode"),H=K("react.legacy_hidden"));var K;function Z(J){if(typeof J=="object"&&J!==null){var Ve=J.$$typeof;switch(Ve){case a:switch(J=J.type,J){case d:case g:case f:case C:case I:return J;default:switch(J=J&&J.$$typeof,J){case _:case S:case R:case O:case b:return J;default:return Ve}}case l:return Ve}}}var re=b,ne=a,le=S,Ce=d,ve=R,we=O,De=l,rt=g,ce=f,Re=C;s.ContextConsumer=_,s.ContextProvider=re,s.Element=ne,s.ForwardRef=le,s.Fragment=Ce,s.Lazy=ve,s.Memo=we,s.Portal=De,s.Profiler=rt,s.StrictMode=ce,s.Suspense=Re,s.isAsyncMode=function(){return!1},s.isConcurrentMode=function(){return!1},s.isContextConsumer=function(J){return Z(J)===_},s.isContextProvider=function(J){return Z(J)===b},s.isElement=function(J){return typeof J=="object"&&J!==null&&J.$$typeof===a},s.isForwardRef=function(J){return Z(J)===S},s.isFragment=function(J){return Z(J)===d},s.isLazy=function(J){return Z(J)===R},s.isMemo=function(J){return Z(J)===O},s.isPortal=function(J){return Z(J)===l},s.isProfiler=function(J){return Z(J)===g},s.isStrictMode=function(J){return Z(J)===f},s.isSuspense=function(J){return Z(J)===C},s.isValidElementType=function(J){return typeof J=="string"||typeof J=="function"||J===d||J===g||J===V||J===f||J===C||J===I||J===H||typeof J=="object"&&J!==null&&(J.$$typeof===R||J.$$typeof===O||J.$$typeof===b||J.$$typeof===_||J.$$typeof===S||J.$$typeof===L||J.$$typeof===A||J[0]===F)},s.typeOf=Z}),A5=$((s,a)=>{a.exports=k5()}),kS=$((s,a)=>{a.exports=function(l,d,f,g){var b=f?f.call(g,l,d):void 0;if(b!==void 0)return!!b;if(l===d)return!0;if(typeof l!="object"||!l||typeof d!="object"||!d)return!1;var _=Object.keys(l),S=Object.keys(d);if(_.length!==S.length)return!1;for(var C=Object.prototype.hasOwnProperty.bind(d),I=0;I<_.length;I++){var O=_[I];if(!C(O))return!1;var R=l[O],A=d[O];if(b=f?f.call(g,R,A,O):void 0,b===!1||b===void 0&&R!==A)return!1}return!0}});function I5(s){function a(ge,Je,nt,ot,We){for(var nn=0,wt=0,Qt=0,mn=0,Un,Rn,Vr=0,ee=0,ht,ct=ht=Un=0,Ee=0,Se=0,$e=0,St=0,At=nt.length,et=At-1,Bt,Mt="",It="",An="",Ir="",Jn;Ee<At;){if(Rn=nt.charCodeAt(Ee),Ee===et&&wt+mn+Qt+nn!==0&&(wt!==0&&(Rn=wt===47?10:47),mn=Qt=nn=0,At++,et++),wt+mn+Qt+nn===0){if(Ee===et&&(0<Se&&(Mt=Mt.replace(R,"")),0<Mt.trim().length)){switch(Rn){case 32:case 9:case 59:case 13:case 10:break;default:Mt+=nt.charAt(Ee)}Rn=59}switch(Rn){case 123:for(Mt=Mt.trim(),Un=Mt.charCodeAt(0),ht=1,St=++Ee;Ee<At;){switch(Rn=nt.charCodeAt(Ee)){case 123:ht++;break;case 125:ht--;break;case 47:switch(Rn=nt.charCodeAt(Ee+1)){case 42:case 47:e:{for(ct=Ee+1;ct<et;++ct)switch(nt.charCodeAt(ct)){case 47:if(Rn===42&&nt.charCodeAt(ct-1)===42&&Ee+2!==ct){Ee=ct+1;break e}break;case 10:if(Rn===47){Ee=ct+1;break e}}Ee=ct}}break;case 91:Rn++;case 40:Rn++;case 34:case 39:for(;Ee++<et&&nt.charCodeAt(Ee)!==Rn;);}if(ht===0)break;Ee++}switch(ht=nt.substring(St,Ee),Un===0&&(Un=(Mt=Mt.replace(O,"").trim()).charCodeAt(0)),Un){case 64:switch(0<Se&&(Mt=Mt.replace(R,"")),Rn=Mt.charCodeAt(1),Rn){case 100:case 109:case 115:case 45:Se=Je;break;default:Se=Ot}if(ht=a(Je,Se,ht,Rn,We+1),St=ht.length,0<ke&&(Se=l(Ot,Mt,$e),Jn=_(3,ht,Se,Je,Re,ce,St,Rn,We,ot),Mt=Se.join(""),Jn!==void 0&&(St=(ht=Jn.trim()).length)===0&&(Rn=0,ht="")),0<St)switch(Rn){case 115:Mt=Mt.replace(le,b);case 100:case 109:case 45:ht=Mt+"{"+ht+"}";break;case 107:Mt=Mt.replace(K,"$1 $2"),ht=Mt+"{"+ht+"}",ht=Ve===1||Ve===2&&g("@"+ht,3)?"@-webkit-"+ht+"@"+ht:"@"+ht;break;default:ht=Mt+ht,ot===112&&(ht=(It+=ht,""))}else ht="";break;default:ht=a(Je,l(Je,Mt,$e),ht,ot,We+1)}An+=ht,ht=$e=Se=ct=Un=0,Mt="",Rn=nt.charCodeAt(++Ee);break;case 125:case 59:if(Mt=(0<Se?Mt.replace(R,""):Mt).trim(),1<(St=Mt.length))switch(ct===0&&(Un=Mt.charCodeAt(0),Un===45||96<Un&&123>Un)&&(St=(Mt=Mt.replace(" ",":")).length),0<ke&&(Jn=_(1,Mt,Je,ge,Re,ce,It.length,ot,We,ot))!==void 0&&(St=(Mt=Jn.trim()).length)===0&&(Mt="\0\0"),Un=Mt.charCodeAt(0),Rn=Mt.charCodeAt(1),Un){case 0:break;case 64:if(Rn===105||Rn===99){Ir+=Mt+nt.charAt(Ee);break}default:Mt.charCodeAt(St-1)!==58&&(It+=f(Mt,Un,Rn,Mt.charCodeAt(2)))}$e=Se=ct=Un=0,Mt="",Rn=nt.charCodeAt(++Ee)}}switch(Rn){case 13:case 10:wt===47?wt=0:1+Un===0&&ot!==107&&0<Mt.length&&(Se=1,Mt+="\0"),0<ke*xt&&_(0,Mt,Je,ge,Re,ce,It.length,ot,We,ot),ce=1,Re++;break;case 59:case 125:if(wt+mn+Qt+nn===0){ce++;break}default:switch(ce++,Bt=nt.charAt(Ee),Rn){case 9:case 32:if(mn+nn+wt===0)switch(Vr){case 44:case 58:case 9:case 32:Bt="";break;default:Rn!==32&&(Bt=" ")}break;case 0:Bt="\\0";break;case 12:Bt="\\f";break;case 11:Bt="\\v";break;case 38:mn+wt+nn===0&&(Se=$e=1,Bt="\f"+Bt);break;case 108:if(mn+wt+nn+J===0&&0<ct)switch(Ee-ct){case 2:Vr===112&&nt.charCodeAt(Ee-3)===58&&(J=Vr);case 8:ee===111&&(J=ee)}break;case 58:mn+wt+nn===0&&(ct=Ee);break;case 44:wt+Qt+mn+nn===0&&(Se=1,Bt+="\r");break;case 34:case 39:wt===0&&(mn=mn===Rn?0:mn===0?Rn:mn);break;case 91:mn+wt+Qt===0&&nn++;break;case 93:mn+wt+Qt===0&&nn--;break;case 41:mn+wt+nn===0&&Qt--;break;case 40:if(mn+wt+nn===0){if(Un===0)switch(2*Vr+3*ee){case 533:break;default:Un=1}Qt++}break;case 64:wt+Qt+mn+nn+ct+ht===0&&(ht=1);break;case 42:case 47:if(!(0<mn+nn+Qt))switch(wt){case 0:switch(2*Rn+3*nt.charCodeAt(Ee+1)){case 235:wt=47;break;case 220:St=Ee,wt=42}break;case 42:Rn===47&&Vr===42&&St+2!==Ee&&(nt.charCodeAt(St+2)===33&&(It+=nt.substring(St,Ee+1)),Bt="",wt=0)}}wt===0&&(Mt+=Bt)}ee=Vr,Vr=Rn,Ee++}if(St=It.length,0<St){if(Se=Je,0<ke&&(Jn=_(2,It,Se,ge,Re,ce,St,ot,We,ot),Jn!==void 0&&(It=Jn).length===0))return Ir+It+An;if(It=Se.join(",")+"{"+It+"}",Ve*J!==0){switch(Ve!==2||g(It,2)||(J=0),J){case 111:It=It.replace(re,":-moz-$1")+It;break;case 112:It=It.replace(Z,"::-webkit-input-$1")+It.replace(Z,"::-moz-$1")+It.replace(Z,":-ms-input-$1")+It}J=0}}return Ir+It+An}function l(ge,Je,nt){var ot=Je.trim().split(V);Je=ot;var We=ot.length,nn=ge.length;switch(nn){case 0:case 1:var wt=0;for(ge=nn===0?"":ge[0]+" ";wt<We;++wt)Je[wt]=d(ge,Je[wt],nt).trim();break;default:var Qt=wt=0;for(Je=[];wt<We;++wt)for(var mn=0;mn<nn;++mn)Je[Qt++]=d(ge[mn]+" ",ot[wt],nt).trim()}return Je}function d(ge,Je,nt){var ot=Je.charCodeAt(0);switch(33>ot&&(ot=(Je=Je.trim()).charCodeAt(0)),ot){case 38:return Je.replace(H,"$1"+ge.trim());case 58:return ge.trim()+Je.replace(H,"$1"+ge.trim());default:if(0<1*nt&&0<Je.indexOf("\f"))return Je.replace(H,(ge.charCodeAt(0)===58?"":"$1")+ge.trim())}return ge+Je}function f(ge,Je,nt,ot){var We=ge+";",nn=2*Je+3*nt+4*ot;if(nn===944){ge=We.indexOf(":",9)+1;var wt=We.substring(ge,We.length-1).trim();return wt=We.substring(0,ge).trim()+wt+";",Ve===1||Ve===2&&g(wt,1)?"-webkit-"+wt+wt:wt}if(Ve===0||Ve===2&&!g(We,1))return We;switch(nn){case 1015:return We.charCodeAt(10)===97?"-webkit-"+We+We:We;case 951:return We.charCodeAt(3)===116?"-webkit-"+We+We:We;case 963:return We.charCodeAt(5)===110?"-webkit-"+We+We:We;case 1009:if(We.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+We+We;case 978:return"-webkit-"+We+"-moz-"+We+We;case 1019:case 983:return"-webkit-"+We+"-moz-"+We+"-ms-"+We+We;case 883:if(We.charCodeAt(8)===45)return"-webkit-"+We+We;if(0<We.indexOf("image-set(",11))return We.replace(rt,"$1-webkit-$2")+We;break;case 932:if(We.charCodeAt(4)===45)switch(We.charCodeAt(5)){case 103:return"-webkit-box-"+We.replace("-grow","")+"-webkit-"+We+"-ms-"+We.replace("grow","positive")+We;case 115:return"-webkit-"+We+"-ms-"+We.replace("shrink","negative")+We;case 98:return"-webkit-"+We+"-ms-"+We.replace("basis","preferred-size")+We}return"-webkit-"+We+"-ms-"+We+We;case 964:return"-webkit-"+We+"-ms-flex-"+We+We;case 1023:if(We.charCodeAt(8)!==99)break;return wt=We.substring(We.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+wt+"-webkit-"+We+"-ms-flex-pack"+wt+We;case 1005:return F.test(We)?We.replace(A,":-webkit-")+We.replace(A,":-moz-")+We:We;case 1e3:switch(wt=We.substring(13).trim(),Je=wt.indexOf("-")+1,wt.charCodeAt(0)+wt.charCodeAt(Je)){case 226:wt=We.replace(ne,"tb");break;case 232:wt=We.replace(ne,"tb-rl");break;case 220:wt=We.replace(ne,"lr");break;default:return We}return"-webkit-"+We+"-ms-"+wt+We;case 1017:if(We.indexOf("sticky",9)===-1)break;case 975:switch(Je=(We=ge).length-10,wt=(We.charCodeAt(Je)===33?We.substring(0,Je):We).substring(ge.indexOf(":",7)+1).trim(),nn=wt.charCodeAt(0)+(wt.charCodeAt(7)|0)){case 203:if(111>wt.charCodeAt(8))break;case 115:We=We.replace(wt,"-webkit-"+wt)+";"+We;break;case 207:case 102:We=We.replace(wt,"-webkit-"+(102<nn?"inline-":"")+"box")+";"+We.replace(wt,"-webkit-"+wt)+";"+We.replace(wt,"-ms-"+wt+"box")+";"+We}return We+";";case 938:if(We.charCodeAt(5)===45)switch(We.charCodeAt(6)){case 105:return wt=We.replace("-items",""),"-webkit-"+We+"-webkit-box-"+wt+"-ms-flex-"+wt+We;case 115:return"-webkit-"+We+"-ms-flex-item-"+We.replace(ve,"")+We;default:return"-webkit-"+We+"-ms-flex-line-pack"+We.replace("align-content","").replace(ve,"")+We}break;case 973:case 989:if(We.charCodeAt(3)!==45||We.charCodeAt(4)===122)break;case 931:case 953:if(De.test(ge)===!0)return(wt=ge.substring(ge.indexOf(":")+1)).charCodeAt(0)===115?f(ge.replace("stretch","fill-available"),Je,nt,ot).replace(":fill-available",":stretch"):We.replace(wt,"-webkit-"+wt)+We.replace(wt,"-moz-"+wt.replace("fill-",""))+We;break;case 962:if(We="-webkit-"+We+(We.charCodeAt(5)===102?"-ms-"+We:"")+We,nt+ot===211&&We.charCodeAt(13)===105&&0<We.indexOf("transform",10))return We.substring(0,We.indexOf(";",27)+1).replace(L,"$1-webkit-$2")+We}return We}function g(ge,Je){var nt=ge.indexOf(Je===1?":":"{"),ot=ge.substring(0,Je!==3?nt:10);return nt=ge.substring(nt+1,ge.length-1),He(Je!==2?ot:ot.replace(we,"$1"),nt,Je)}function b(ge,Je){var nt=f(Je,Je.charCodeAt(0),Je.charCodeAt(1),Je.charCodeAt(2));return nt!==Je+";"?nt.replace(Ce," or ($1)").substring(4):"("+Je+")"}function _(ge,Je,nt,ot,We,nn,wt,Qt,mn,Un){for(var Rn=0,Vr=Je,ee;Rn<ke;++Rn)switch(ee=Me[Rn].call(I,ge,Vr,nt,ot,We,nn,wt,Qt,mn,Un)){case void 0:case!1:case!0:case null:break;default:Vr=ee}if(Vr!==Je)return Vr}function S(ge){switch(ge){case void 0:case null:ke=Me.length=0;break;default:if(typeof ge=="function")Me[ke++]=ge;else if(typeof ge=="object")for(var Je=0,nt=ge.length;Je<nt;++Je)S(ge[Je]);else xt=!!ge|0}return S}function C(ge){return ge=ge.prefix,ge!==void 0&&(He=null,ge?typeof ge!="function"?Ve=1:(Ve=2,He=ge):Ve=0),C}function I(ge,Je){var nt=ge;if(33>nt.charCodeAt(0)&&(nt=nt.trim()),de=nt,nt=[de],0<ke){var ot=_(-1,Je,nt,nt,Re,ce,0,0,0,0);ot!==void 0&&typeof ot=="string"&&(Je=ot)}var We=a(Ot,nt,Je,0,0);return 0<ke&&(ot=_(-2,We,nt,nt,Re,ce,We.length,0,0,0),ot!==void 0&&(We=ot)),de="",J=0,ce=Re=1,We}var O=/^\0+/g,R=/[\0\r\f]/g,A=/: */g,F=/zoo|gra/,L=/([,: ])(transform)/g,V=/,\r+?/g,H=/([\t\r\n ])*\f?&/g,K=/@(k\w+)\s*(\S*)\s*/,Z=/::(place)/g,re=/:(read-only)/g,ne=/[svh]\w+-[tblr]{2}/,le=/\(\s*(.*)\s*\)/g,Ce=/([\s\S]*?);/g,ve=/-self|flex-/g,we=/[^]*?(:[rp][el]a[\w-]+)[^]*/,De=/stretch|:\s*\w+\-(?:conte|avail)/,rt=/([^-])(image-set\()/,ce=1,Re=1,J=0,Ve=1,Ot=[],Me=[],ke=0,He=null,xt=0,de="";return I.use=S,I.set=C,s!==void 0&&C(s),I}var ef,uI=P(()=>{ef=I5}),cI,dI,R5=P(()=>{cI={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dI=cI});function D5(s){var a=Object.create(null);return function(l){return a[l]===void 0&&(a[l]=s(l)),a[l]}}var tb,O5=P(()=>{tb=D5}),tf,hI,AS,L5=P(()=>{O5(),tf=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,hI=tb(function(s){return tf.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),AS=hI}),N5=$(s=>{var a=typeof Symbol=="function"&&Symbol.for,l=a?Symbol.for("react.element"):60103,d=a?Symbol.for("react.portal"):60106,f=a?Symbol.for("react.fragment"):60107,g=a?Symbol.for("react.strict_mode"):60108,b=a?Symbol.for("react.profiler"):60114,_=a?Symbol.for("react.provider"):60109,S=a?Symbol.for("react.context"):60110,C=a?Symbol.for("react.async_mode"):60111,I=a?Symbol.for("react.concurrent_mode"):60111,O=a?Symbol.for("react.forward_ref"):60112,R=a?Symbol.for("react.suspense"):60113,A=a?Symbol.for("react.suspense_list"):60120,F=a?Symbol.for("react.memo"):60115,L=a?Symbol.for("react.lazy"):60116,V=a?Symbol.for("react.block"):60121,H=a?Symbol.for("react.fundamental"):60117,K=a?Symbol.for("react.responder"):60118,Z=a?Symbol.for("react.scope"):60119;function re(le){if(typeof le=="object"&&le!==null){var Ce=le.$$typeof;switch(Ce){case l:switch(le=le.type,le){case C:case I:case f:case b:case g:case R:return le;default:switch(le=le&&le.$$typeof,le){case S:case O:case L:case F:case _:return le;default:return Ce}}case d:return Ce}}}function ne(le){return re(le)===I}s.AsyncMode=C,s.ConcurrentMode=I,s.ContextConsumer=S,s.ContextProvider=_,s.Element=l,s.ForwardRef=O,s.Fragment=f,s.Lazy=L,s.Memo=F,s.Portal=d,s.Profiler=b,s.StrictMode=g,s.Suspense=R,s.isAsyncMode=function(le){return ne(le)||re(le)===C},s.isConcurrentMode=ne,s.isContextConsumer=function(le){return re(le)===S},s.isContextProvider=function(le){return re(le)===_},s.isElement=function(le){return typeof le=="object"&&le!==null&&le.$$typeof===l},s.isForwardRef=function(le){return re(le)===O},s.isFragment=function(le){return re(le)===f},s.isLazy=function(le){return re(le)===L},s.isMemo=function(le){return re(le)===F},s.isPortal=function(le){return re(le)===d},s.isProfiler=function(le){return re(le)===b},s.isStrictMode=function(le){return re(le)===g},s.isSuspense=function(le){return re(le)===R},s.isValidElementType=function(le){return typeof le=="string"||typeof le=="function"||le===f||le===I||le===b||le===g||le===R||le===A||typeof le=="object"&&le!==null&&(le.$$typeof===L||le.$$typeof===F||le.$$typeof===_||le.$$typeof===S||le.$$typeof===O||le.$$typeof===H||le.$$typeof===K||le.$$typeof===Z||le.$$typeof===V)},s.typeOf=re}),IS=$((s,a)=>{a.exports=N5()}),pI=$((s,a)=>{var l=IS(),d={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_={};_[l.ForwardRef]=g,_[l.Memo]=b;function S(V){return l.isMemo(V)?b:_[V.$$typeof]||d}var C=Object.defineProperty,I=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,R=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,F=Object.prototype;function L(V,H,K){if(typeof H!="string"){if(F){var Z=A(H);Z&&Z!==F&&L(V,Z,K)}var re=I(H);O&&(re=re.concat(O(H)));for(var ne=S(V),le=S(H),Ce=0;Ce<re.length;++Ce){var ve=re[Ce];if(!f[ve]&&!(K&&K[ve])&&!(le&&le[ve])&&!(ne&&ne[ve])){var we=R(H,ve);try{C(V,ve,we)}catch{}}}}return V}a.exports=L});function il(){return(il=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s}).apply(this,arguments)}function Gg(s){return typeof s=="function"}function oa(s){return s.displayName||s.name||"Component"}function Nu(s){return s&&typeof s.styledComponentId=="string"}function ao(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];throw new Error("An error occurred. See https://git.io/JUIaE#"+s+" for more information."+(l.length>0?" Args: "+l.join(", "):""))}function RS(s){var a,l="";for(a=Math.abs(s);a>52;a=a/52|0)l=US(a%52)+l;return(US(a%52)+l).replace(Xg,"$1-$2")}function nf(s){for(var a=0;a<s.length;a+=1){var l=s[a];if(Gg(l)&&!Nu(l))return!1}return!0}function rh(s){var a,l,d,f,g=s===void 0?Na:s,b=g.options,_=b===void 0?Na:b,S=g.plugins,C=S===void 0?ih:S,I=new ef(_),O=[],R=function(L){function V(H){if(H)try{L(H+"}")}catch{}}return function(H,K,Z,re,ne,le,Ce,ve,we,De){switch(H){case 1:if(we===0&&K.charCodeAt(0)===64)return L(K+";"),"";break;case 2:if(ve===0)return K+"/*|*/";break;case 3:switch(ve){case 102:case 112:return L(Z[0]+K),"";default:return K+(De===0?"/*|*/":"")}case-2:K.split("/*|*/}").forEach(V)}}}(function(L){O.push(L)}),A=function(L,V,H){return V===0&&jS.indexOf(H[l.length])!==-1||H.match(f)?L:"."+a};function F(L,V,H,K){K===void 0&&(K="&");var Z=L.replace(VS,""),re=V&&H?H+" "+V+" { "+Z+" }":Z;return a=K,l=V,d=new RegExp("\\"+l+"\\b","g"),f=new RegExp("(\\"+l+"\\b){2,}"),I(H||!V?"":V,re)}return I.use([].concat(C,[function(L,V,H){L===2&&H.length&&H[0].lastIndexOf(l)>0&&(H[0]=H[0].replace(d,A))},R,function(L){if(L===-2){var V=O;return O=[],V}}])),F.hash=C.length?C.reduce(function(L,V){return V.name||ao(15),ds(L,V.name)},5381).toString():"",F}function Wg(){return(0,_i.useContext)(pb)||HS}function fI(){return(0,_i.useContext)(fb)||lf}function DS(s){var a=(0,_i.useState)(s.stylisPlugins),l=a[0],d=a[1],f=Wg(),g=(0,_i.useMemo)(function(){var _=f;return s.sheet?_=s.sheet:s.target&&(_=_.reconstructWithOptions({target:s.target},!1)),s.disableCSSOMInjection&&(_=_.reconstructWithOptions({useCSSOMInjection:!1})),_},[s.disableCSSOMInjection,s.sheet,s.target]),b=(0,_i.useMemo)(function(){return rh({options:{prefix:!s.disableVendorPrefixes},plugins:l})},[s.disableVendorPrefixes,l]);return(0,_i.useEffect)(function(){(0,$g.default)(l,s.stylisPlugins)||d(s.stylisPlugins)},[s.stylisPlugins]),_i.default.createElement(pb.Provider,{value:g},_i.default.createElement(fb.Provider,{value:b},s.children))}function mI(s){return xI.test(s)?s.replace(SI,WS).replace(mb,"-ms-"):s}function Fu(s,a,l,d){if(Array.isArray(s)){for(var f,g=[],b=0,_=s.length;b<_;b+=1)(f=Fu(s[b],a,l,d))!==""&&(Array.isArray(f)?g.push.apply(g,f):g.push(f));return g}if($S(s))return"";if(Nu(s))return"."+s.styledComponentId;if(Gg(s)){if(typeof(C=s)!="function"||C.prototype&&C.prototype.isReactComponent||!a)return s;var S=s(a);return Fu(S,a,l,d)}var C;return s instanceof GS?l?(s.inject(l,d),s.getName(d)):s:ob(s)?function I(O,R){var A,F,L=[];for(var V in O)O.hasOwnProperty(V)&&!$S(O[V])&&(Array.isArray(O[V])&&O[V].isCss||Gg(O[V])?L.push(mI(V)+":",O[V],";"):ob(O[V])?L.push.apply(L,I(O[V],V)):L.push(mI(V)+": "+(A=V,(F=O[V])==null||typeof F=="boolean"||F===""?"":typeof F!="number"||F===0||A in dI||A.startsWith("--")?String(F).trim():F+"px")+";"));return R?[R+" {"].concat(L,["}"]):L}(s):s.toString()}function lo(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return Gg(s)||ob(s)?KS(Fu(sb(ih,[s].concat(l)))):l.length===0&&s.length===1&&typeof s[0]=="string"?s:KS(Fu(sb(s,l)))}function Bu(s){return s.replace(T,"-").replace(B,"")}function rf(s){return typeof s=="string"&&!0}function OS(s,a,l){var d=s[l];se(a)&&se(d)?gI(d,a):s[l]=a}function gI(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];for(var f=0,g=l;f<g.length;f++){var b=g[f];if(se(b))for(var _ in b)me(_)&&OS(s,b[_],_)}return s}function nb(s,a,l){var d=Nu(s),f=!rf(s),g=a.attrs,b=g===void 0?ih:g,_=a.componentId,S=_===void 0?function(K,Z){var re=typeof K!="string"?"sc":Bu(K);Ke[re]=(Ke[re]||0)+1;var ne=re+"-"+Y("5.3.11"+re+Ke[re]);return Z?Z+"-"+ne:ne}(a.displayName,a.parentComponentId):_,C=a.displayName,I=C===void 0?function(K){return rf(K)?"styled."+K:"Styled("+oa(K)+")"}(s):C,O=a.displayName&&a.componentId?Bu(a.displayName)+"-"+a.componentId:a.componentId||S,R=d&&s.attrs?Array.prototype.concat(s.attrs,b).filter(Boolean):b,A=a.shouldForwardProp;d&&s.shouldForwardProp&&(A=a.shouldForwardProp?function(K,Z,re){return s.shouldForwardProp(K,Z,re)&&a.shouldForwardProp(K,Z,re)}:s.shouldForwardProp);var F,L=new wI(l,O,d?s.componentStyle:void 0),V=L.isStatic&&b.length===0,H=function(K,Z){return function(re,ne,le,Ce){var ve=re.attrs,we=re.componentStyle,De=re.defaultProps,rt=re.foldedComponentIds,ce=re.shouldForwardProp,Re=re.styledComponentId,J=re.target,Ve=function(ot,We,nn){ot===void 0&&(ot=Na);var wt=il({},We,{theme:ot}),Qt={};return nn.forEach(function(mn){var Un,Rn,Vr,ee=mn;for(Un in Gg(ee)&&(ee=ee(wt)),ee)wt[Un]=Qt[Un]=Un==="className"?(Rn=Qt[Un],Vr=ee[Un],Rn&&Vr?Rn+" "+Vr:Rn||Vr):ee[Un]}),[wt,Qt]}(y(ne,(0,_i.useContext)(Ie),De)||Na,ne,ve),Ot=Ve[0],Me=Ve[1],ke=function(ot,We,nn,wt){var Qt=Wg(),mn=fI(),Un=We?ot.generateAndInjectStyles(Na,Qt,mn):ot.generateAndInjectStyles(nn,Qt,mn);return Un}(we,Ce,Ot),He=le,xt=Me.$as||ne.$as||Me.as||ne.as||J,de=rf(xt),ge=Me!==ne?il({},ne,{},Me):ne,Je={};for(var nt in ge)nt[0]!=="$"&&nt!=="as"&&(nt==="forwardedAs"?Je.as=ge[nt]:(ce?ce(nt,AS,xt):!de||AS(nt))&&(Je[nt]=ge[nt]));return ne.style&&Me.style!==ne.style&&(Je.style=il({},ne.style,{},Me.style)),Je.className=Array.prototype.concat(rt,Re,ke!==Re?ke:null,ne.className,Me.className).filter(Boolean).join(" "),Je.ref=He,(0,_i.createElement)(xt,Je)}(F,K,Z,V)};return H.displayName=I,(F=_i.default.forwardRef(H)).attrs=R,F.componentStyle=L,F.displayName=I,F.shouldForwardProp=A,F.foldedComponentIds=d?Array.prototype.concat(s.foldedComponentIds,s.styledComponentId):ih,F.styledComponentId=O,F.target=d?s.target:s,F.withComponent=function(K){var Z=a.componentId,re=function(le,Ce){if(le==null)return{};var ve,we,De={},rt=Object.keys(le);for(we=0;we<rt.length;we++)ve=rt[we],Ce.indexOf(ve)>=0||(De[ve]=le[ve]);return De}(a,["componentId"]),ne=Z&&Z+"-"+(rf(K)?K:Bu(oa(K)));return nb(K,il({},re,{attrs:R,componentId:ne}),l)},Object.defineProperty(F,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(K){this._foldedDefaultProps=d?gI({},s.defaultProps,K):K}}),Object.defineProperty(F,"toString",{value:function(){return"."+F.styledComponentId}}),f&&(0,ib.default)(F,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),F}function Ul(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];var f=lo.apply(void 0,[s].concat(l)),g="sc-global-"+Y(JSON.stringify(f)),b=new bt(f,g);function _(C){var I=Wg(),O=fI(),R=(0,_i.useContext)(Ie),A=(0,_i.useRef)(I.allocateGSInstance(g)).current;return I.server&&S(A,C,I,R,O),(0,_i.useLayoutEffect)(function(){if(!I.server)return S(A,C,I,R,O),function(){return b.removeStyles(A,I)}},[A,C,I,R,O]),null}function S(C,I,O,R,A){if(b.isStatic)b.renderStyles(C,LS,O,A);else{var F=il({},I,{theme:y(I,R,_.defaultProps)});b.renderStyles(C,F,O,A)}}return _i.default.memo(_)}var rb,_i,$g,ib,sb,ob,ih,Na,zl,sh,ab,LS,lb,oh,ah,sf,of,NS,af,ub,vI,yI,FS,Kg,cb,uo,bI,db,BS,_I,Uu,Xg,US,ds,zS,hb,wI,VS,jS,pb,fb,HS,lf,GS,xI,SI,mb,WS,$S,KS,y,T,B,Y,se,me,Ie,Ke,Qe,bt,ae,ze=P(()=>{rb=q(A5()),_i=q(Oe()),$g=q(kS()),uI(),R5(),L5(),ib=q(pI()),sb=function(s,a){for(var l=[s[0]],d=0,f=a.length;d<f;d+=1)l.push(a[d],s[d+1]);return l},ob=function(s){return s!==null&&typeof s=="object"&&(s.toString?s.toString():Object.prototype.toString.call(s))==="[object Object]"&&!(0,rb.typeOf)(s)},ih=Object.freeze([]),Na=Object.freeze({}),zl=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",sh=typeof window<"u"&&"HTMLElement"in window,ab=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),LS={},lb=function(){function s(l){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=l}var a=s.prototype;return a.indexOfGroup=function(l){for(var d=0,f=0;f<l;f++)d+=this.groupSizes[f];return d},a.insertRules=function(l,d){if(l>=this.groupSizes.length){for(var f=this.groupSizes,g=f.length,b=g;l>=b;)(b<<=1)<0&&ao(16,""+l);this.groupSizes=new Uint32Array(b),this.groupSizes.set(f),this.length=b;for(var _=g;_<b;_++)this.groupSizes[_]=0}for(var S=this.indexOfGroup(l+1),C=0,I=d.length;C<I;C++)this.tag.insertRule(S,d[C])&&(this.groupSizes[l]++,S++)},a.clearGroup=function(l){if(l<this.length){var d=this.groupSizes[l],f=this.indexOfGroup(l),g=f+d;this.groupSizes[l]=0;for(var b=f;b<g;b++)this.tag.deleteRule(f)}},a.getGroup=function(l){var d="";if(l>=this.length||this.groupSizes[l]===0)return d;for(var f=this.groupSizes[l],g=this.indexOfGroup(l),b=g+f,_=g;_<b;_++)d+=this.tag.getRule(_)+`/*!sc*/
`;return d},s}(),oh=new Map,ah=new Map,sf=1,of=function(s){if(oh.has(s))return oh.get(s);for(;ah.has(sf);)sf++;var a=sf++;return oh.set(s,a),ah.set(a,s),a},NS=function(s){return ah.get(s)},af=function(s,a){a>=sf&&(sf=a+1),oh.set(s,a),ah.set(a,s)},ub="style["+zl+'][data-styled-version="5.3.11"]',vI=new RegExp("^"+zl+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),yI=function(s,a,l){for(var d,f=l.split(","),g=0,b=f.length;g<b;g++)(d=f[g])&&s.registerName(a,d)},FS=function(s,a){for(var l=(a.textContent||"").split(`/*!sc*/
`),d=[],f=0,g=l.length;f<g;f++){var b=l[f].trim();if(b){var _=b.match(vI);if(_){var S=0|parseInt(_[1],10),C=_[2];S!==0&&(af(C,S),yI(s,C,_[3]),s.getTag().insertRules(S,d)),d.length=0}else d.push(b)}}},Kg=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},cb=function(s){var a=document.head,l=s||a,d=document.createElement("style"),f=function(_){for(var S=_.childNodes,C=S.length;C>=0;C--){var I=S[C];if(I&&I.nodeType===1&&I.hasAttribute(zl))return I}}(l),g=f!==void 0?f.nextSibling:null;d.setAttribute(zl,"active"),d.setAttribute("data-styled-version","5.3.11");var b=Kg();return b&&d.setAttribute("nonce",b),l.insertBefore(d,g),d},uo=function(){function s(l){var d=this.element=cb(l);d.appendChild(document.createTextNode("")),this.sheet=function(f){if(f.sheet)return f.sheet;for(var g=document.styleSheets,b=0,_=g.length;b<_;b++){var S=g[b];if(S.ownerNode===f)return S}ao(17)}(d),this.length=0}var a=s.prototype;return a.insertRule=function(l,d){try{return this.sheet.insertRule(d,l),this.length++,!0}catch{return!1}},a.deleteRule=function(l){this.sheet.deleteRule(l),this.length--},a.getRule=function(l){var d=this.sheet.cssRules[l];return d!==void 0&&typeof d.cssText=="string"?d.cssText:""},s}(),bI=function(){function s(l){var d=this.element=cb(l);this.nodes=d.childNodes,this.length=0}var a=s.prototype;return a.insertRule=function(l,d){if(l<=this.length&&l>=0){var f=document.createTextNode(d),g=this.nodes[l];return this.element.insertBefore(f,g||null),this.length++,!0}return!1},a.deleteRule=function(l){this.element.removeChild(this.nodes[l]),this.length--},a.getRule=function(l){return l<this.length?this.nodes[l].textContent:""},s}(),db=function(){function s(l){this.rules=[],this.length=0}var a=s.prototype;return a.insertRule=function(l,d){return l<=this.length&&(this.rules.splice(l,0,d),this.length++,!0)},a.deleteRule=function(l){this.rules.splice(l,1),this.length--},a.getRule=function(l){return l<this.length?this.rules[l]:""},s}(),BS=sh,_I={isServer:!sh,useCSSOMInjection:!ab},Uu=function(){function s(l,d,f){l===void 0&&(l=Na),d===void 0&&(d={}),this.options=il({},_I,{},l),this.gs=d,this.names=new Map(f),this.server=!!l.isServer,!this.server&&sh&&BS&&(BS=!1,function(g){for(var b=document.querySelectorAll(ub),_=0,S=b.length;_<S;_++){var C=b[_];C&&C.getAttribute(zl)!=="active"&&(FS(g,C),C.parentNode&&C.parentNode.removeChild(C))}}(this))}s.registerId=function(l){return of(l)};var a=s.prototype;return a.reconstructWithOptions=function(l,d){return d===void 0&&(d=!0),new s(il({},this.options,{},l),this.gs,d&&this.names||void 0)},a.allocateGSInstance=function(l){return this.gs[l]=(this.gs[l]||0)+1},a.getTag=function(){return this.tag||(this.tag=(f=(d=this.options).isServer,g=d.useCSSOMInjection,b=d.target,l=f?new db(b):g?new uo(b):new bI(b),new lb(l)));var l,d,f,g,b},a.hasNameForId=function(l,d){return this.names.has(l)&&this.names.get(l).has(d)},a.registerName=function(l,d){if(of(l),this.names.has(l))this.names.get(l).add(d);else{var f=new Set;f.add(d),this.names.set(l,f)}},a.insertRules=function(l,d,f){this.registerName(l,d),this.getTag().insertRules(of(l),f)},a.clearNames=function(l){this.names.has(l)&&this.names.get(l).clear()},a.clearRules=function(l){this.getTag().clearGroup(of(l)),this.clearNames(l)},a.clearTag=function(){this.tag=void 0},a.toString=function(){return function(l){for(var d=l.getTag(),f=d.length,g="",b=0;b<f;b++){var _=NS(b);if(_!==void 0){var S=l.names.get(_),C=d.getGroup(b);if(S&&C&&S.size){var I=zl+".g"+b+'[id="'+_+'"]',O="";S!==void 0&&S.forEach(function(R){R.length>0&&(O+=R+",")}),g+=""+C+I+'{content:"'+O+`"}/*!sc*/
`}}}return g}(this)},s}(),Xg=/(a)(d)/gi,US=function(s){return String.fromCharCode(s+(s>25?39:97))},ds=function(s,a){for(var l=a.length;l;)s=33*s^a.charCodeAt(--l);return s},zS=function(s){return ds(5381,s)},hb=zS("5.3.11"),wI=function(){function s(a,l,d){this.rules=a,this.staticRulesId="",this.isStatic=(d===void 0||d.isStatic)&&nf(a),this.componentId=l,this.baseHash=ds(hb,l),this.baseStyle=d,Uu.registerId(l)}return s.prototype.generateAndInjectStyles=function(a,l,d){var f=this.componentId,g=[];if(this.baseStyle&&g.push(this.baseStyle.generateAndInjectStyles(a,l,d)),this.isStatic&&!d.hash)if(this.staticRulesId&&l.hasNameForId(f,this.staticRulesId))g.push(this.staticRulesId);else{var b=Fu(this.rules,a,l,d).join(""),_=RS(ds(this.baseHash,b)>>>0);if(!l.hasNameForId(f,_)){var S=d(b,"."+_,void 0,f);l.insertRules(f,_,S)}g.push(_),this.staticRulesId=_}else{for(var C=this.rules.length,I=ds(this.baseHash,d.hash),O="",R=0;R<C;R++){var A=this.rules[R];if(typeof A=="string")O+=A;else if(A){var F=Fu(A,a,l,d),L=Array.isArray(F)?F.join(""):F;I=ds(I,L+R),O+=L}}if(O){var V=RS(I>>>0);if(!l.hasNameForId(f,V)){var H=d(O,"."+V,void 0,f);l.insertRules(f,V,H)}g.push(V)}}return g.join(" ")},s}(),VS=/^\s*\/\/.*$/gm,jS=[":","[",".","#"],pb=_i.default.createContext(),pb.Consumer,fb=_i.default.createContext(),HS=(fb.Consumer,new Uu),lf=rh(),GS=function(){function s(a,l){var d=this;this.inject=function(f,g){g===void 0&&(g=lf);var b=d.name+g.hash;f.hasNameForId(d.id,b)||f.insertRules(d.id,b,g(d.rules,b,"@keyframes"))},this.toString=function(){return ao(12,String(d.name))},this.name=a,this.id="sc-keyframes-"+a,this.rules=l}return s.prototype.getName=function(a){return a===void 0&&(a=lf),this.name+a.hash},s}(),xI=/([A-Z])/,SI=/([A-Z])/g,mb=/^ms-/,WS=function(s){return"-"+s.toLowerCase()},$S=function(s){return s==null||s===!1||s===""},KS=function(s){return Array.isArray(s)&&(s.isCss=!0),s},y=function(s,a,l){return l===void 0&&(l=Na),s.theme!==l.theme&&s.theme||a||l.theme},T=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,B=/(^-|-$)/g,Y=function(s){return RS(zS(s)>>>0)},se=function(s){return typeof s=="function"||typeof s=="object"&&s!==null&&!Array.isArray(s)},me=function(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"},Ie=_i.default.createContext(),Ie.Consumer,Ke={},Qe=function(s){return function a(l,d,f){if(f===void 0&&(f=Na),!(0,rb.isValidElementType)(d))return ao(1,String(d));var g=function(){return l(d,f,lo.apply(void 0,arguments))};return g.withConfig=function(b){return a(l,d,il({},f,{},b))},g.attrs=function(b){return a(l,d,il({},f,{attrs:Array.prototype.concat(f.attrs,b).filter(Boolean)}))},g}(nb,s)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(s){Qe[s]=Qe(s)}),bt=function(){function s(l,d){this.rules=l,this.componentId=d,this.isStatic=nf(l),Uu.registerId(this.componentId+1)}var a=s.prototype;return a.createStyles=function(l,d,f,g){var b=g(Fu(this.rules,d,f,g).join(""),""),_=this.componentId+l;f.insertRules(_,_,b)},a.removeStyles=function(l,d){d.clearRules(this.componentId+l)},a.renderStyles=function(l,d,f,g){l>2&&Uu.registerId(this.componentId+l),this.removeStyles(l,f),this.createStyles(l,d,f,g)},s}(),function(){function s(){var l=this;this._emitSheetCSS=function(){var d=l.instance.toString();if(!d)return"";var f=Kg();return"<style "+[f&&'nonce="'+f+'"',zl+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+d+"</style>"},this.getStyleTags=function(){return l.sealed?ao(2):l._emitSheetCSS()},this.getStyleElement=function(){var d;if(l.sealed)return ao(2);var f=((d={})[zl]="",d["data-styled-version"]="5.3.11",d.dangerouslySetInnerHTML={__html:l.instance.toString()},d),g=Kg();return g&&(f.nonce=g),[_i.default.createElement("style",il({},f,{key:"sc-0-0"}))]},this.seal=function(){l.sealed=!0},this.instance=new Uu({isServer:!0}),this.sealed=!1}var a=s.prototype;return a.collectStyles=function(l){return this.sealed?ao(2):_i.default.createElement(DS,{sheet:this.instance},l)},a.interleaveWithNodeStream=function(l){return ao(3)},s}(),ae=Qe});function Zt(){return Zt=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s},Zt.apply(this,arguments)}var kn=P(()=>{});function pn(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}var rr=P(()=>{});function ir(s,a){return ir=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},ir(s,a)}var Qn=P(()=>{});function Mr(s,a){s.prototype=Object.create(a.prototype),s.prototype.constructor=s,ir(s,a)}var Ws=P(()=>{Qn()});function $s(s){return $s=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},$s(s)}var Ks=P(()=>{});function Yr(s){return Function.toString.call(s).indexOf("[native code]")!==-1}var Xs=P(()=>{});function aa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vl=P(()=>{});function jl(s,a,l){return aa()?jl=Reflect.construct:jl=function(d,f,g){var b=[null];b.push.apply(b,f);var _=Function.bind.apply(d,b),S=new _;return g&&ir(S,g.prototype),S},jl.apply(null,arguments)}var lh=P(()=>{Qn(),Vl()});function zu(s){var a=typeof Map=="function"?new Map:void 0;return zu=function(l){if(l===null||!Yr(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(l))return a.get(l);a.set(l,d)}function d(){return jl(l,arguments,$s(this).constructor)}return d.prototype=Object.create(l.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),ir(d,l)},zu(s)}var uh=P(()=>{Ks(),Qn(),Xs(),lh()}),ch=P(()=>{});function Qi(s){return s.charAt(0).toUpperCase()+s.slice(1)}function la(s,a){if(!s)return a.toLowerCase();var l=s.split("-");if(l.length>1)return l.splice(1,0,a),l.reduce(function(f,g){return""+f+Qi(g)});var d=s.replace(/([a-z])([A-Z])/g,"$1"+a+"$2");return s===d?""+s+a:d}function si(s,a){for(var l={},d=0;d<a.length;d+=1)(a[d]||a[d]===0)&&(l[la(s,ZK[d])]=a[d]);return l}function Hl(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];var f=l[0],g=l[1],b=g===void 0?f:g,_=l[2],S=_===void 0?f:_,C=l[3],I=C===void 0?b:C,O=[f,b,S,I];return si(s,O)}function sl(s){return Math.round(s*255)}function nMe(s,a,l){return sl(s)+","+sl(a)+","+sl(l)}function XS(s,a,l,d){if(d===void 0&&(d=nMe),a===0)return d(l,l,l);var f=(s%360+360)%360/60,g=(1-Math.abs(2*l-1))*a,b=g*(1-Math.abs(f%2-1)),_=0,S=0,C=0;f>=0&&f<1?(_=g,S=b):f>=1&&f<2?(_=b,S=g):f>=2&&f<3?(S=g,C=b):f>=3&&f<4?(S=b,C=g):f>=4&&f<5?(_=b,C=g):f>=5&&f<6&&(_=g,C=b);var I=l-g/2,O=_+I,R=S+I,A=C+I;return d(O,R,A)}function rMe(s){if(typeof s!="string")return s;var a=s.toLowerCase();return H5[a]?"#"+H5[a]:s}function F5(s){if(typeof s!="string")throw new Vu(3);var a=rMe(s);if(a.match(QK))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(JK)){var l=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:l}}if(a.match(eX))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(tX)){var d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d}}var f=TI.exec(a);if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)};var g=nX.exec(a.substring(0,50));if(g)return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:parseFloat(""+g[4])};var b=rX.exec(a);if(b){var _=parseInt(""+b[1],10),S=parseInt(""+b[2],10)/100,C=parseInt(""+b[3],10)/100,I="rgb("+XS(_,S,C)+")",O=TI.exec(I);if(!O)throw new Vu(4,a,I);return{red:parseInt(""+O[1],10),green:parseInt(""+O[2],10),blue:parseInt(""+O[3],10)}}var R=iX.exec(a.substring(0,50));if(R){var A=parseInt(""+R[1],10),F=parseInt(""+R[2],10)/100,L=parseInt(""+R[3],10)/100,V="rgb("+XS(A,F,L)+")",H=TI.exec(V);if(!H)throw new Vu(4,a,V);return{red:parseInt(""+H[1],10),green:parseInt(""+H[2],10),blue:parseInt(""+H[3],10),alpha:parseFloat(""+R[4])}}throw new Vu(5)}function iMe(s){var a=s.red/255,l=s.green/255,d=s.blue/255,f=Math.max(a,l,d),g=Math.min(a,l,d),b=(f+g)/2;if(f===g)return s.alpha!==void 0?{hue:0,saturation:0,lightness:b,alpha:s.alpha}:{hue:0,saturation:0,lightness:b};var _,S=f-g,C=b>.5?S/(2-f-g):S/(f+g);switch(f){case a:_=(l-d)/S+(l<d?6:0);break;case l:_=(d-a)/S+2;break;default:_=(a-l)/S+4;break}return _*=60,s.alpha!==void 0?{hue:_,saturation:C,lightness:b,alpha:s.alpha}:{hue:_,saturation:C,lightness:b}}function B5(s){return iMe(F5(s))}function qg(s){var a=s.toString(16);return a.length===1?"0"+a:a}function U5(s){return qg(Math.round(s*255))}function sMe(s,a,l){return MI("#"+U5(s)+U5(a)+U5(l))}function EI(s,a,l){return XS(s,a,l,sMe)}function oMe(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return EI(s,a,l);if(typeof s=="object"&&a===void 0&&l===void 0)return EI(s.hue,s.saturation,s.lightness);throw new Vu(1)}function aMe(s,a,l,d){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof d=="number")return d>=1?EI(s,a,l):"rgba("+XS(s,a,l)+","+d+")";if(typeof s=="object"&&a===void 0&&l===void 0&&d===void 0)return s.alpha>=1?EI(s.hue,s.saturation,s.lightness):"rgba("+XS(s.hue,s.saturation,s.lightness)+","+s.alpha+")";throw new Vu(2)}function z5(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return MI("#"+qg(s)+qg(a)+qg(l));if(typeof s=="object"&&a===void 0&&l===void 0)return MI("#"+qg(s.red)+qg(s.green)+qg(s.blue));throw new Vu(6)}function qK(s,a,l,d){if(typeof s=="string"&&typeof a=="number"){var f=F5(s);return"rgba("+f.red+","+f.green+","+f.blue+","+a+")"}else{if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof d=="number")return d>=1?z5(s,a,l):"rgba("+s+","+a+","+l+","+d+")";if(typeof s=="object"&&a===void 0&&l===void 0&&d===void 0)return s.alpha>=1?z5(s.red,s.green,s.blue):"rgba("+s.red+","+s.green+","+s.blue+","+s.alpha+")"}throw new Vu(7)}function V5(s){if(typeof s!="object")throw new Vu(8);if(oX(s))return qK(s);if(sX(s))return z5(s);if(lX(s))return aMe(s);if(aX(s))return oMe(s);throw new Vu(8)}function YK(s,a,l){return function(){var d=l.concat(Array.prototype.slice.call(arguments));return d.length>=a?s.apply(this,d):YK(s,a,d)}}function CI(s){return YK(s,s.length,[])}function PI(s,a,l){return Math.max(s,Math.min(a,l))}function lMe(s,a){if(a==="transparent")return a;var l=B5(a);return V5(Zt({},l,{lightness:PI(0,1,l.lightness-parseFloat(s))}))}function uMe(s,a){if(a==="transparent")return a;var l=B5(a);return V5(Zt({},l,{lightness:PI(0,1,l.lightness+parseFloat(s))}))}function cMe(s,a){if(a==="transparent")return a;var l=B5(a);return V5(Zt({},l,{saturation:PI(0,1,l.saturation+parseFloat(s))}))}function dMe(s,a){if(a==="transparent")return a;var l=F5(a),d=typeof l.alpha=="number"?l.alpha:1,f=Zt({},l,{alpha:PI(0,1,+(d*100-parseFloat(s)*100).toFixed(2)/100)});return qK(f)}function j5(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return uX.indexOf(s)>=0&&s?Zt({},Hl.apply(void 0,[""].concat(l)),{position:s}):Hl.apply(void 0,["",s].concat(l))}var Vu,ZK,H5,QK,JK,eX,tX,TI,nX,rX,iX,MI,sX,oX,aX,lX,qS,gb,kI,ju,uX,ol=P(()=>{kn(),rr(),Ws(),uh(),ch(),Vu=function(s){Mr(a,s);function a(l){var d;return d=s.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+l+" for more information.")||this,pn(d)}return a}(zu(Error)),ZK=["Top","Right","Bottom","Left"],H5={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},QK=/^#[a-fA-F0-9]{6}$/,JK=/^#[a-fA-F0-9]{8}$/,eX=/^#[a-fA-F0-9]{3}$/,tX=/^#[a-fA-F0-9]{4}$/,TI=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,nX=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,rX=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,iX=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,MI=function(s){return s.length===7&&s[1]===s[2]&&s[3]===s[4]&&s[5]===s[6]?"#"+s[1]+s[3]+s[5]:s},sX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},oX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&typeof s.alpha=="number"},aX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},lX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&typeof s.alpha=="number"},qS=CI(lMe),gb=CI(uMe),kI=CI(cMe),ju=CI(dMe),uX=["absolute","fixed","relative","static","sticky"]});function hMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function cX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,d)}return l}function Yg(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?cX(Object(l),!0).forEach(function(d){hMe(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):cX(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function vb(s,a){if(s==null)return{};var l={},d=Object.keys(s),f,g;for(g=0;g<d.length;g++)f=d[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}var YS=P(()=>{}),dX,G5,hX=P(()=>{dX=q(Oe()),G5=(0,dX.createContext)({})});function pMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function pX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,d)}return l}function yb(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?pX(Object(l),!0).forEach(function(d){pMe(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):pX(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function W5(s,a){if(s==null)return{};var l={},d=Object.keys(s),f,g;for(g=0;g<d.length;g++)f=d[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}function fMe(s,a){if(s){if(typeof s=="string")return fX(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return fX(s,a)}}function fX(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,d=new Array(a);l<a;l++)d[l]=s[l];return d}function mX(s,a){var l;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(l=fMe(s))||a&&s&&typeof s.length=="number"){l&&(s=l);var d=0;return function(){return d>=s.length?{done:!0}:{done:!1,value:s[d++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return l=s[Symbol.iterator](),l.next.bind(l)}var AI=P(()=>{});function mMe(s){return typeof s=="function"}var $5,gX,gMe=P(()=>{$5=q(Oe()),hX(),AI(),gX=function(s,a,l){l===void 0&&(l=a.children);var d=(0,$5.useContext)(G5);if(d.useCreateElement)return d.useCreateElement(s,a,l);if(typeof s=="string"&&mMe(l)){a.children;var f=W5(a,["children"]);return l(f)}return(0,$5.createElement)(s,a,l)}});function vMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function vX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,d)}return l}function bb(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?vX(Object(l),!0).forEach(function(d){vMe(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):vX(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function yMe(s,a){if(s==null)return{};var l={},d=Object.keys(s),f,g;for(g=0;g<d.length;g++)f=d[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}var yX=P(()=>{});function bMe(s){return typeof s=="object"&&s!=null}var _Me=P(()=>{});function K5(s){var a;if(!bMe(s))return!1;var l=Object.getPrototypeOf(s);return l==null?!0:((a=l.constructor)===null||a===void 0?void 0:a.toString())===Object.toString()}var bX=P(()=>{_Me()});function _X(s,a){for(var l=Object.keys(s),d={},f={},g=0,b=l;g<b.length;g++){var _=b[g];a.indexOf(_)>=0?d[_]=s[_]:f[_]=s[_]}return[d,f]}function wX(s,a){if(a===void 0&&(a=[]),!K5(s.state))return _X(s,a);var l=_X(s,[].concat(a,["state"])),d=l[0],f=l[1],g=d.state,b=yMe(d,["state"]);return[bb(bb({},g),b),f]}var wMe=P(()=>{yX(),bX()});function II(s,a){if(s===a)return!0;if(!s||!a||typeof s!="object"||typeof a!="object")return!1;var l=Object.keys(s),d=Object.keys(a),f=l.length;if(d.length!==f)return!1;for(var g=0,b=l;g<b.length;g++){var _=b[g];if(s[_]!==a[_])return!1}return!0}var X5=P(()=>{});function xX(s){return s.name==="normalizePropsAreEqualInner"?s:function(a,l){return!K5(a.state)||!K5(l.state)?s(a,l):s(bb(bb({},a.state),a),bb(bb({},l.state),l))}}var xMe=P(()=>{yX(),bX()});function SMe(s){return(0,q5.forwardRef)(s)}function EMe(s,a){return(0,q5.memo)(s,a)}function ZS(s){var a=s.as,l=s.useHook,d=s.memo,f=s.propsAreEqual,g=f===void 0?l==null?void 0:l.unstable_propsAreEqual:f,b=s.keys,_=b===void 0?(l==null?void 0:l.__keys)||[]:b,S=s.useCreateElement,C=S===void 0?gX:S,I=function(O,R){var A=O.as,F=A===void 0?a:A,L=W5(O,["as"]);if(l){var V,H=wX(L,_),K=H[0],Z=H[1],re=l(K,yb({ref:R},Z)),ne=re.wrapElement,le=W5(re,["wrapElement"]),Ce=((V=F.render)===null||V===void 0?void 0:V.__keys)||F.__keys,ve=Ce&&wX(L,Ce)[0],we=ve?yb(yb({},le),ve):le,De=C(F,we);return ne?ne(De):De}return C(F,yb({ref:R},L))};return I=SMe(I),d&&(I=EMe(I,g&&xX(g))),I.__keys=_,I.unstable_propsAreEqual=xX(g||II),I}var q5,QS=P(()=>{q5=q(Oe()),AI(),gMe(),wMe(),X5(),xMe()});function SX(s,a){(0,Y5.useDebugValue)(s);var l=(0,Y5.useContext)(G5);return l[s]!=null?l[s]:a}var Y5,EX=P(()=>{Y5=q(Oe()),hX()});function CMe(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var d="use"+s+"Props";(0,CX.useDebugValue)(d);var f=SX(d);return f?f(a,l):l}var CX,PMe=P(()=>{CX=q(Oe()),EX()});function TMe(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var d="use"+s+"Options";(0,PX.useDebugValue)(d);var f=SX(d);return f?yb(yb({},a),f(a,l)):a}var PX,MMe=P(()=>{PX=q(Oe()),EX(),AI()});function kMe(s){return Array.isArray(s)?s:typeof s<"u"?[s]:[]}var AMe=P(()=>{});function JS(s){var a,l,d=kMe(s.compose),f=function(_,S){if(s.useOptions&&(_=s.useOptions(_,S)),s.name&&(_=TMe(s.name,_,S)),s.compose)for(var C=mX(d),I;!(I=C()).done;){var O=I.value;_=O.__useOptions(_,S)}return _},g=function(_,S,C){if(_===void 0&&(_={}),S===void 0&&(S={}),C===void 0&&(C=!1),C||(_=f(_,S)),s.useProps&&(S=s.useProps(_,S)),s.name&&(S=CMe(s.name,_,S)),s.compose)if(s.useComposeOptions&&(_=s.useComposeOptions(_,S)),s.useComposeProps)S=s.useComposeProps(_,S);else for(var I=mX(d),O;!(O=I()).done;){var R=O.value;S=R(_,S,!0)}var A={},F=S||{};for(var L in F)F[L]!==void 0&&(A[L]=F[L]);return A};g.__useOptions=f;var b=d.reduce(function(_,S){return _.push.apply(_,S.__keys||[]),_},[]);return g.__keys=[].concat(b,((a=s.useState)===null||a===void 0?void 0:a.__keys)||[],s.keys||[]),g.unstable_propsAreEqual=s.propsAreEqual||((l=d[0])===null||l===void 0?void 0:l.unstable_propsAreEqual)||II,g}var eE=P(()=>{q(Oe()),PMe(),AI(),MMe(),X5(),AMe()});function TX(s,a){a===void 0&&(a=null),s&&(typeof s=="function"?s(a):s.current=a)}function MX(s,a){return(0,kX.useMemo)(function(){return s==null&&a==null?null:function(l){TX(s,l),TX(a,l)}},[s,a])}var kX,AX=P(()=>{kX=q(Oe())});function Z5(s){if(s.tagName==="BUTTON")return!0;if(s.tagName==="INPUT"){var a=s;return IX.indexOf(a.type)!==-1}return!1}var IX,Q5=P(()=>{IX=["button","color","file","image","reset","submit"]}),J5=P(()=>{}),IMe=P(()=>{J5(),q(Oe())}),RI=P(()=>{J5(),q(Oe()),IMe()});function RX(s){return s?s.ownerDocument||s:document}var DX=P(()=>{});function RMe(s){return s&&RX(s).defaultView||OX}var OX,DMe=P(()=>{DX();try{OX=window}catch{}});function OMe(){var s=RMe();return!!(typeof s<"u"&&s.document&&s.document.createElement)}var DI,e4=P(()=>{DMe(),DI=OMe()}),t4,n4,r4=P(()=>{t4=q(Oe()),e4(),n4=DI?t4.useLayoutEffect:t4.useEffect});function _b(s){var a=(0,LX.useRef)(s);return n4(function(){a.current=s}),a}var LX,NX=P(()=>{LX=q(Oe()),r4()});function LMe(s){return s.target===s.currentTarget}var NMe=P(()=>{});function FMe(s){var a=RX(s),l=a.activeElement;return l!=null&&l.nodeName?l:null}var BMe=P(()=>{DX()});function FX(s,a){return s===a||s.contains(a)}var BX=P(()=>{});function UMe(s){var a=FMe(s);if(!a)return!1;if(FX(s,a))return!0;var l=a.getAttribute("aria-activedescendant");return l?l===s.id?!0:!!s.querySelector("#"+l):!1}var zMe=P(()=>{BMe(),BX()});function VMe(s){return!FX(s.currentTarget,s.target)}var jMe=P(()=>{BX()});function OI(s){return DI?window.navigator.userAgent.indexOf(s)!==-1:!1}var HMe=P(()=>{e4()});function GMe(s,a){return"matches"in s?s.matches(a):"msMatchesSelector"in s?s.msMatchesSelector(a):s.webkitMatchesSelector(a)}var WMe=P(()=>{});function $Me(s){var a=s;return a.offsetWidth>0||a.offsetHeight>0||s.getClientRects().length>0}function KMe(s){return GMe(s,UX)&&$Me(s)}var UX,XMe=P(()=>{WMe(),UX="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),zX,LI,VX=P(()=>{YS(),QS(),eE(),X5(),zX=["unstable_system"],LI=JS({name:"Role",keys:zX,propsAreEqual:function(s,a){var l=s.unstable_system,d=vb(s,["unstable_system"]),f=a.unstable_system,g=vb(a,["unstable_system"]);return l!==f&&!II(l,f)?!1:II(d,g)}}),ZS({as:"div",useHook:LI})});function jX(s){!UMe(s)&&KMe(s)&&s.focus()}function qMe(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.tagName==="A"}function YMe(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"}function ZMe(s,a,l,d){return s?a&&!l?-1:void 0:a?d:d||0}function i4(s,a){return(0,wb.useCallback)(function(l){var d;(d=s.current)===null||d===void 0||d.call(s,l),!l.defaultPrevented&&a&&(l.stopPropagation(),l.preventDefault())},[s,a])}var wb,HX,GX,s4,QMe=P(()=>{YS(),QS(),eE(),wb=q(Oe()),AX(),Q5(),RI(),NX(),r4(),zMe(),jMe(),HMe(),XMe(),VX(),HX=["disabled","focusable"],GX=OI("Mac")&&!OI("Chrome")&&(OI("Safari")||OI("Firefox")),s4=JS({name:"Tabbable",compose:LI,keys:HX,useOptions:function(s,a){var l=a.disabled;return Yg({disabled:l},s)},useProps:function(s,a){var l=a.ref,d=a.tabIndex,f=a.onClickCapture,g=a.onMouseDownCapture,b=a.onMouseDown,_=a.onKeyPressCapture,S=a.style,C=vb(a,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),I=(0,wb.useRef)(null),O=_b(f),R=_b(g),A=_b(b),F=_b(_),L=!!s.disabled&&!s.focusable,V=(0,wb.useState)(!0),H=V[0],K=V[1],Z=(0,wb.useState)(!0),re=Z[0],ne=Z[1],le=s.disabled?Yg({pointerEvents:"none"},S):S;n4(function(){var rt=I.current;rt&&(qMe(rt)||K(!1),YMe(rt)||ne(!1))},[]);var Ce=i4(O,s.disabled),ve=i4(R,s.disabled),we=i4(F,s.disabled),De=(0,wb.useCallback)(function(rt){var ce;(ce=A.current)===null||ce===void 0||ce.call(A,rt);var Re=rt.currentTarget;if(!rt.defaultPrevented&&GX&&!VMe(rt)&&Z5(Re)){var J=requestAnimationFrame(function(){Re.removeEventListener("mouseup",Ve,!0),jX(Re)}),Ve=function(){cancelAnimationFrame(J),jX(Re)};Re.addEventListener("mouseup",Ve,{once:!0,capture:!0})}},[]);return Yg({ref:MX(I,l),style:le,tabIndex:ZMe(L,H,re,d),disabled:L&&re?!0:void 0,"aria-disabled":s.disabled?!0:void 0,onClickCapture:Ce,onMouseDownCapture:ve,onMouseDown:De,onKeyPressCapture:we},C)}}),ZS({as:"div",useHook:s4})});function JMe(s){var a=s.currentTarget;return s.isTrusted?Z5(a)||a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.tagName==="A"||a.tagName==="SELECT":!1}var NI,WX,o4,eke=P(()=>{YS(),QS(),eE(),NI=q(Oe()),Q5(),RI(),NX(),NMe(),QMe(),WX=["unstable_clickOnEnter","unstable_clickOnSpace"],o4=JS({name:"Clickable",compose:s4,keys:WX,useOptions:function(s){var a=s.unstable_clickOnEnter,l=a===void 0?!0:a,d=s.unstable_clickOnSpace,f=d===void 0?!0:d,g=vb(s,["unstable_clickOnEnter","unstable_clickOnSpace"]);return Yg({unstable_clickOnEnter:l,unstable_clickOnSpace:f},g)},useProps:function(s,a){var l=a.onKeyDown,d=a.onKeyUp,f=vb(a,["onKeyDown","onKeyUp"]),g=(0,NI.useState)(!1),b=g[0],_=g[1],S=_b(l),C=_b(d),I=(0,NI.useCallback)(function(R){var A;if((A=S.current)===null||A===void 0||A.call(S,R),!R.defaultPrevented&&!s.disabled&&!R.metaKey&&LMe(R)){var F=s.unstable_clickOnEnter&&R.key==="Enter",L=s.unstable_clickOnSpace&&R.key===" ";if(F||L){if(JMe(R))return;R.preventDefault(),F?R.currentTarget.click():L&&_(!0)}}},[s.disabled,s.unstable_clickOnEnter,s.unstable_clickOnSpace]),O=(0,NI.useCallback)(function(R){var A;if((A=C.current)===null||A===void 0||A.call(C,R),!R.defaultPrevented&&!s.disabled&&!R.metaKey){var F=s.unstable_clickOnSpace&&R.key===" ";b&&F&&(_(!1),R.currentTarget.click())}},[s.disabled,s.unstable_clickOnSpace,b]);return Yg({"data-active":b||void 0,onKeyDown:I,onKeyUp:O},f)}}),ZS({as:"button",memo:!0,useHook:o4})}),tE,$X,KX,XX,tke=P(()=>{YS(),QS(),eE(),tE=q(Oe()),AX(),Q5(),RI(),eke(),$X=[],KX=JS({name:"Button",compose:o4,keys:$X,useProps:function(s,a){var l=a.ref,d=vb(a,["ref"]),f=(0,tE.useRef)(null),g=(0,tE.useState)(void 0),b=g[0],_=g[1],S=(0,tE.useState)("button"),C=S[0],I=S[1];return(0,tE.useEffect)(function(){var O=f.current;O&&(Z5(O)||(O.tagName!=="A"&&_("button"),I(void 0)))},[]),Yg({ref:MX(f,l),role:b,type:C},d)}}),XX=ZS({as:"button",memo:!0,useHook:KX})}),qX,YX,ZX,nke=P(()=>{YS(),QS(),eE(),VX(),qX=[],YX=JS({name:"Group",compose:LI,keys:qX,useProps:function(s,a){return Yg({role:"group"},a)}}),ZX=ZS({as:"div",useHook:YX})});function rke(){return DI?document.body:null}var QX,xb,ike=P(()=>{QX=q(Oe()),r4(),e4(),q(Ou()),xb=(0,QX.createContext)(rke())}),a4,ske=P(()=>{typeof window<"u"&&(a4={get passive(){}},window.addEventListener("testPassive",null,a4),window.removeEventListener("testPassive",null,a4))}),Zg=P(()=>{q(Oe()),RI(),tke(),nke(),q(Ou()),ike(),ske(),J5()});function br(s){let a=(0,l4.useMemo)(()=>{let f=s;return{get current(){return f},set current(g){f=g,d(g)}}},[]),[l,d]=(0,l4.useState)(()=>s);return[a,l]}var l4,kr=P(()=>{l4=q(Oe())});function oke(s){return a=>Do.default.createElement(iq,null,Do.default.createElement(s,N({},a)))}var Do,JX,eq,Cr,Sb,tq,nq,rq,u4,c4,iq,Ar=P(()=>{ol(),ze(),ze(),Do=q(Oe()),JX=q(Ou()),Zg(),kr(),Cr=lo(eq||(eq=W([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),Sb={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return gb(.6,Sb.panel.bg)}}}}}},nq=typeof window<"u"?Ul(tq||(tq=W([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},u4=ae.div(rq||(rq=W([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),c4=s=>Do.default.createElement(DS,{disableVendorPrefixes:!0,target:s.target},Do.default.createElement(Do.default.Fragment,null,Do.default.createElement(nq,null),s.children)),iq=s=>{let[a,l]=(0,Do.useState)(null),[d,f]=(0,Do.useState)(null);(0,Do.useLayoutEffect)(()=>{if(!a)return;let{parentNode:_}=a;if(!_)return;let S=_.shadowRoot?parent.shadowRoot:_.attachShadow({mode:"open"});f(S)},[a]);let[g,b]=br(void 0);return d?JX.default.createPortal(Do.default.createElement(c4,{target:d},Do.default.createElement(Do.default.Fragment,null,Do.default.createElement(u4,{ref:g}),Do.default.createElement(xb.Provider,{value:b},s.children))),d):Do.default.createElement("template",{ref:l,"shadow-root":"open"},s.children)}}),Eb,sq,oq,uf,aq,nE,lq,uq,FI,cq,d4,Wc,dh=P(()=>{Ar(),ze(),Eb={get outlinePanel(){return 1},get propsPanel(){return Eb.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},sq=Sb.panel.bg,uf=ae.span(oq||(oq=W([`
  white-space: nowrap;
`]))),nE=ae.span(aq||(aq=W([`
  white-space: nowrap;
  color: `,`;
`])),Sb.panel.head.punctuation.color),uq=ae.div(lq||(lq=W([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),sq),FI=18,d4=ae.div(cq||(cq=W([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),FI),Wc=100}),dq,Hu,Cb=P(()=>{dq=()=>{},Hu=dq});function ake(s){return h4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),h4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var h4,p4,lke=P(()=>{h4=q(Oe()),p4=ake});function uke(s){return f4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),f4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var f4,hq,cke=P(()=>{f4=q(Oe()),hq=uke});function dke(s){return m4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),m4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var m4,pq,hke=P(()=>{m4=q(Oe()),pq=dke});function pke(s){return g4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),g4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var g4,fq,fke=P(()=>{g4=q(Oe()),fq=pke});function mke(s){return v4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),v4.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var v4,y4,gke=P(()=>{v4=q(Oe()),y4=mke});function vke(s){return b4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),b4.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var b4,BI,yke=P(()=>{b4=q(Oe()),BI=vke});function bke(s){return _4.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),_4.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var _4,w4,_ke=P(()=>{_4=q(Oe()),w4=bke}),rE=P(()=>{lke(),cke(),hke(),fke(),gke(),yke(),_ke()}),$c,mq,UI,gq,vq,yq,bq,_q,wq,xq,Sq,Eq,Cq,Pq,Tq,Mq,kq,Aq,iE,zI=P(()=>{$c=q(Oe()),ze(),Cb(),Ar(),rE(),UI=ae.li(mq||(mq=W([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),vq=ae.div(gq||(gq=W([""]))),bq=ae(vq)(yq||(yq=W([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Cr),wq=lo(_q||(_q=W([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),Sq=ae.span(xq||(xq=W([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),wq,Cr),Cq=ae.div(Eq||(Eq=W([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),Tq=ae.span(Pq||(Pq=W([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),UI),kq=ae.ul(Mq||(Mq=W([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),UI),Aq=({label:s,children:a,depth:l,select:d,selectionStatus:f,labelDecoration:g,collapsed:b=!1,setIsCollapsed:_})=>{let S=a!==void 0;return $c.default.createElement(UI,{style:{"--depth":l},className:b?"collapsed":""},$c.default.createElement(bq,{className:f,onClick:d??Hu,"data-header":!0},$c.default.createElement(Cq,null,S?$c.default.createElement(Tq,{onClick:C=>{C.stopPropagation(),C.preventDefault(),_==null||_(!b)}},$c.default.createElement(hq,null)):$c.default.createElement(y4,null)),$c.default.createElement(Sq,null,$c.default.createElement("span",null,s)),g),S&&$c.default.createElement(kq,null,a))},iE=Aq});function wke(s){return Object.keys(s)}function xke(s){return Object.keys((0,Kc.val)(s.sheetTemplatesP))}function Ske(){let s=Ro(cf().filter(a=>mt(a)||Rt(a)).map(a=>Rt(a)?a.sheet:a))[0];if(s)return s.getSequence()}var Kc,cf,Iq,df=P(()=>{Kc=Ft,Tn(),ui(),Te(),cf=()=>{var s;let a=(0,Kc.val)(ue().projectsP),l=((s=(0,Kc.val)(ue().atomP.historic.panels.outlinePanel.selection))!=null?s:[]).map(d=>{let f=a[d.projectId];if(!f)return;if(d.type==="Project")return f;if(!(0,Kc.val)(f.sheetTemplatesP[d.sheetId]))return;let g=Iq(f,d.sheetId);if(!g)return;if(d.type==="Sheet")return g;let b=(0,Kc.val)(g.objectsP[d.objectKey]);if(b)return b});return Ro(l.filter(d=>typeof d<"u"))},Iq=(s,a)=>{let l=ue().atomP.historic.projects.stateByProjectId[s.address.projectId],d=(0,Kc.val)(l.stateBySheetId[a].selectedInstanceId),f=(0,Kc.val)(s.sheetTemplatesP[a]);if(f){if(d)return(0,Kc.val)(f.instancesP[d]);{let g=(0,Kc.val)(f.instancesP);return g[wke(g)[0]]}}}}),Rq,Dq,Eke=P(()=>{Te(),Rq=q(Oe()),zI(),yn(),df(),Dq=({sheetObject:s,depth:a,overrideLabel:l})=>{let d=()=>{ue().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},f=Yn(()=>cf(),[]);return Rq.default.createElement(iE,{select:d,label:l??s.address.objectKey,depth:a,selectionStatus:f.includes(s)?"selected":"not-selected"})}});function x4(s){var a;let l=s.type==="namespace"?"namespace:".concat(s.sheet.address.sheetId,":").concat(s.path.join("/")):s.type==="Theatre_Project"?"project":s.type==="Theatre_Sheet"?"sheetInstance:".concat(s.address.sheetId,":").concat(s.address.sheetInstanceId):"unknown",d=s.type==="namespace"?s.sheet.address.projectId:s.address.projectId,f=(a=nr(ue().atomP.ahistoric.projects.stateByProjectId[d].collapsedItemsInOutline[l]))!=null?a:!1,g=(0,Oq.useCallback)(b=>{ue().transaction(({stateEditors:_})=>{_.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:d,isCollapsed:b,itemKey:l})})},[l]);return{collapsed:f,setCollapsed:g}}var Oq,S4=P(()=>{Oq=q(Oe()),Te(),yn()});function Lq(s){return Xc.default.createElement(Xc.default.Fragment,null,[...s.namespace.entries()].map(([a,{object:l,nested:d}])=>Xc.default.createElement(Cke,{key:a,label:a,object:l,nested:d,visualIndentation:s.visualIndentation,path:s.path,sheet:s.sheet})))}function Cke(s){let{nested:a,label:l,object:d,sheet:f}=s,{collapsed:g,setCollapsed:b}=x4({type:"namespace",sheet:f,path:[...s.path,l]}),_=a&&Xc.default.createElement(Lq,{namespace:a,path:[...s.path,l],key:"namespaceTree("+l+")",visualIndentation:s.visualIndentation+1,sheet:f}),S=d&&Xc.default.createElement(Dq,{depth:s.visualIndentation,key:"objectPath("+d.address.objectKey+")",sheetObject:d,overrideLabel:l});return Xc.default.createElement(Xc.default.Fragment,{key:"".concat(l," - ").concat(s.visualIndentation)},S,_&&Xc.default.createElement(iE,{selectionStatus:"not-selectable",label:l,key:"baseItem(".concat(l,")"),depth:s.visualIndentation,children:_,collapsed:g,setIsCollapsed:b}))}function Nq(s,a,l=Pke(a)){let[d,...f]=l,g=s.get(d);g||(g={nested:void 0,object:void 0,path:[...l]},s.set(d,g)),f.length===0?(console.assert(!g.object,"expect not to have existing object with same name",{existing:g,object:a}),g.object=a):(g.nested||(g.nested=new Map),Nq(g.nested,a,f))}function Pke(s){let a=E4.get(s);return a||(a=s.address.objectKey.split(Vq),console.assert(a.length>0,"expected not empty"),E4.set(s,a)),a}var Fq,Xc,Bq,Uq,zq,Vq,E4,Tke=P(()=>{yn(),Fq=Ft,Xc=q(Oe()),ze(),Eke(),zI(),S4(),ae.li(Bq||(Bq=W([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),Uq=({sheet:s,depth:a})=>Yn(()=>{let l=(0,Fq.val)(s.objectsP),d=Object.values(l).filter(g=>g!=null),f=new Map;return d.forEach(g=>{Nq(f,g)}),Xc.default.createElement(Lq,{namespace:f,visualIndentation:a,path:[],sheet:s})},[s,a]),zq=Uq,Vq=/\s*\/\s*/g,E4=new WeakMap}),Pb,jq,Hq,Gq,Wq,$q,Kq,Mke=P(()=>{Te(),df(),yn(),Pb=q(Oe()),ze(),Tke(),zI(),S4(),Hq=ae.div(jq||(jq=W([`
  display: flex;
`]))),ae.li(Gq||(Gq=W([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),$q=ae.div(Wq||(Wq=W([""]))),Kq=({sheet:s,depth:a})=>{let{collapsed:l,setCollapsed:d}=x4(s),f=(0,Pb.useCallback)(()=>{ue().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},[s]);return Yn(()=>{let g=cf();return Pb.default.createElement(iE,{depth:a,select:f,setIsCollapsed:d,collapsed:l,selectionStatus:g.some(b=>b===s)?"selected":g.some(b=>b.type==="Theatre_SheetObject"&&b.sheet===s)?"descendant-is-selected":"not-selected",label:Pb.default.createElement(Hq,null,s.address.sheetId,": ",s.address.sheetInstanceId)},Pb.default.createElement($q,null,Pb.default.createElement(zq,{depth:a+1,sheet:s,key:"objectList"+s.address.sheetInstanceId})))},[a,l])}}),C4,Tb,Xq,qq,Yq,Zq,kke=P(()=>{yn(),C4=Ft,Tb=q(Oe()),ze(),Mke(),ae.div(Xq||(Xq=W([`
  display: flex;
`]))),ae.li(qq||(qq=W([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),ae.div(Yq||(Yq=W([""]))),Zq=({sheetId:s,depth:a,project:l})=>Yn(()=>{let d=(0,C4.val)(l.sheetTemplatesP[s]);if(!d)return Tb.default.createElement(Tb.default.Fragment,null);let f=(0,C4.val)(d.instancesP);return Tb.default.createElement(Tb.default.Fragment,null,Object.entries(f).map(([g,b])=>Tb.default.createElement(Kq,{key:b.address.sheetInstanceId,sheet:b,depth:a})))},[a,s,l])}),VI,Qq,Jq,Ake=P(()=>{df(),yn(),VI=q(Oe()),kke(),Qq=({project:s,depth:a})=>Yn(()=>{if(!s)return null;let l=xke(s);return VI.default.createElement(VI.default.Fragment,null,l.map(d=>VI.default.createElement(Zq,{depth:a,sheetId:d,key:"sheet-".concat(d),project:s})))},[s,a]),Jq=Qq}),sE,eY,tY,nY,rY,iY,Ike=P(()=>{sE=q(Oe()),zI(),Ake(),Te(),yn(),df(),eY=Ft,ze(),S4(),nY=ae.div(tY||(tY=W([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),rY=({depth:s,project:a})=>{let l=Yn(()=>cf(),[]),d=Yn(()=>{let _=a.address.projectId,S=(0,eY.val)(ue().atomP.ephemeral.coreByProject[_].loadingState);return(S==null?void 0:S.type)==="browserStateIsNotBasedOnDiskState"},[a]),f=(0,sE.useCallback)(()=>{ue().transaction(({stateEditors:_})=>{_.studio.historic.panels.outline.selection.set([a])})},[a]),{collapsed:g,setCollapsed:b}=x4(a);return sE.default.createElement(iE,{depth:s,label:a.address.projectId,setIsCollapsed:b,collapsed:g,labelDecoration:d?sE.default.createElement(nY,null,"Has Conflicts"):null,children:sE.default.createElement(Jq,{project:a,depth:s+1}),selectionStatus:l.includes(a)?"selected":l.some(_=>_.address.projectId===a.address.projectId)?"descendant-is-selected":"not-selected",select:f})},iY=rY}),sY,P4,oY,aY,lY,uY,Rke=P(()=>{sY=Ft,yn(),Te(),P4=q(Oe()),ze(),Ike(),aY=ae.ul(oY||(oY=W([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),lY=s=>Yn(()=>{let a=(0,sY.val)(ue().projectsP);return P4.default.createElement(aY,null,Object.keys(a).map(l=>{let d=a[l];return P4.default.createElement(iY,{depth:0,project:d,key:"projectListItem-".concat(l)})}))},[]),uY=lY});function cY(s){let[a,l]=(0,T4.useState)(!1);return(0,T4.useEffect)(()=>{let d=g=>{let b=a?200:50,_=56,S=s==="left"?g.x<b:g.x>window.innerWidth-b;S&&(S=g.y>_),l(!!S)};document.addEventListener("mousemove",d);let f=()=>{l(!1)};return document.addEventListener("mouseleave",f),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseleave",f)}},[a]),a}var T4,dY=P(()=>{T4=q(Oe())}),oE,Mb,M4,hY,pY,fY,mY,jI,aE,gY,Dke=P(()=>{oE=q(Oe()),ze(),dh(),Rke(),yn(),Te(),dY(),Mb=Ft,Ar(),M4="44px",pY=ae.div(hY||(hY=W([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),Cr,Eb.outlinePanel,M4,M4,({pin:s})=>s?"block":"none"),fY=()=>{var s;let a=(s=nr(ue().atomP.ahistoric.pinOutline))!=null?s:!0,l=nr(gY),d=cY("left");return(0,oE.useLayoutEffect)(()=>{jI.set(d)},[d]),(0,oE.useEffect)(()=>()=>{aE.set(!1),jI.set(!1)},[]),oE.default.createElement(pY,{pin:a||l,onMouseEnter:()=>{aE.set(!0)},onMouseLeave:()=>{aE.set(!1)}},oE.default.createElement(uY,null))},mY=fY,jI=new Mb.Atom(!1),aE=new Mb.Atom(!1),gY=(0,Mb.prism)(()=>{let s=(0,Mb.val)(aE.prism),a=(0,Mb.val)(jI.prism);return s||a})}),vY,yY,bY,Oke=P(()=>{ze(),yY=ae.input.attrs({type:"checkbox"})(vY||(vY=W([`
  outline: none;
`]))),bY=yY});function Lke({propConfig:s,editingTools:a,value:l,autoFocus:d}){let f=(0,k4.useCallback)(g=>{a.permanentlySetValue(!!g.target.checked)},[s,a]);return k4.default.createElement(wY,{checked:l,onChange:f,autoFocus:d})}var k4,_Y,wY,xY,Nke=P(()=>{k4=q(Oe()),ze(),Oke(),wY=ae(bY)(_Y||(_Y=W([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),xY=Lke});function HI(s){return a=>{s.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var GI=P(()=>{});function A4(s,a,l){(0,SY.useEffect)(()=>{if(!s||l===!1)return;let d=Array.isArray(s)?s.filter(g=>g):[s],f=g=>{d.every(b=>!g.composedPath().includes(b))&&a(g)};return window.addEventListener("mousedown",f,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",f,{capture:!0,passive:!1})}},[s,l])}var SY,I4=P(()=>{SY=q(Oe())}),hh,EY,ph,CY,PY,TY,MY,R4,kY,Gl,AY,al=P(()=>{hh=q(Oe()),ze(),EY="pointer-root",ph="--lockedCursor",PY=ae.div(CY||(CY=W([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),MY=ae.div(TY||(TY=W([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),R4=(0,hh.createContext)({}),kY=s=>{var a,l,d,f;let[g,b]=(0,hh.useState)([]),_=(0,hh.useMemo)(()=>({getLock:(C,I)=>{let O={className:C,cursor:I};return b(R=>[...R,O]),()=>{b(R=>R.filter(A=>A!==O))}}}),[]),S=(l=(a=g[0])==null?void 0:a.cursor)!=null?l:"";return hh.default.createElement(R4.Provider,{value:_},hh.default.createElement(PY,{id:EY,className:((f=(d=g[0])==null?void 0:d.className)!=null?f:"normal")+" "+s.className},hh.default.createElement(MY,{style:{cursor:S,[ph]:S}},s.children)))},Gl=(s,a,l)=>{let d=(0,hh.useContext)(R4);(0,hh.useLayoutEffect)(()=>{if(s)return d.getLock(a,l)},[s,a,l])},AY=kY});function IY(s){return lE.default.createElement(D4.Provider,{value:s.logger},s.children)}function hf(s,a){let l=(0,lE.useContext)(D4);return(0,lE.useMemo)(()=>s?l.named(s,a):l,[l,s,a])}var lE,D4,pf=P(()=>{lE=q(Oe()),D4=lE.default.createContext(null)});function Fke(){let s=hf("PointerCapturing"),a=Gu.default.useRef(null),l=()=>a.current!=null;return d=>{let f,g=b=>(f=b,a.current=b,b);return{capturing:{capturePointer(b){if(s._debug("Capturing pointer",{forDebugName:d,reason:b}),a.current!=null)throw new Error('"'.concat(d,'" attempted capturing pointer for "').concat(b,'" while already captured by "').concat(a.current.debugOwnerName,'" for "').concat(a.current.debugReason,'"'));let _=g({debugOwnerName:d,debugReason:b});return{isCapturing(){return _===a.current},release(){return _===a.current?(s._debug("Releasing pointer",{forDebugName:d,reason:b}),g(null),!0):!1}}},isPointerBeingCaptured:l},forceRelease(){f&&a.current===f&&(s._debug("Force releasing pointer",{localCapture:f}),g(null))}}}}function Bke(s){let a=Fke();return Gu.default.createElement(O4.Provider,{value:a},Gu.default.createElement(DY,{children:s.children}))}function RY(s){let a=(0,Gu.useContext)(O4),l=(0,Gu.useMemo)(()=>a(s),[s,a]);return(0,Gu.useEffect)(()=>()=>{l.forceRelease()},[l]),l.capturing}var Gu,O4,DY,L4=P(()=>{Gu=q(Oe()),pf(),O4=Gu.default.createContext(null),DY=Gu.default.memo(({children:s})=>Gu.default.createElement(Gu.default.Fragment,null,s))}),N4,Uke=P(()=>{N4=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function Fi(s,a){let l=(0,kb.useRef)(a);l.current=a;let d=a.shouldPointerLock&&!N4,f=(0,kb.useRef)({domDragStarted:!1}),{capturePointer:g}=RY("useDrag for ".concat(a.debugName)),b=(0,kb.useRef)({onDrag:Hu,onDragEnd:Hu,onClick:Hu}),_=(0,kb.useRef)(),[S,C]=br(!1);return(0,kb.useLayoutEffect)(()=>{if(!s)return;let I=()=>{let K=f.current.domDragStarted&&f.current.detection.detected;S.current!==K&&(S.current=K)},O=K=>{if(!f.current.domDragStarted)return;let Z=f.current;if(!zke(K,Z)&&(Z.detection.detected||(Z.detection.totalDistanceMoved+=Math.abs(K.movementY)+Math.abs(K.movementX),Z.detection.totalDistanceMoved>OY&&(d&&s.requestPointerLock(),Z.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},I())),Z.detection.detected)){Z.detection.dragEventCount+=1;let{dragMovement:re}=Z.detection;if(d)re.x+=K.movementX,re.y+=K.movementY;else{let{startPos:ne}=Z;re.x=K.screenX-ne.x,re.y=K.screenY-ne.y}b.current.onDrag(re.x,re.y,K,K.movementX,K.movementY)}},R=K=>{if(F(),!f.current.domDragStarted)return;let Z=f.current.detection.detected;f.current={domDragStarted:!1},a.shouldPointerLock&&!N4&&document.exitPointerLock(),b.current.onDragEnd(Z),window.focus(),Z||b.current.onClick(K),I()},A=()=>{document.addEventListener("mousemove",O),document.addEventListener("mouseup",R)},F=()=>{var K;(K=_.current)==null||K.release(),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",R)},L=K=>{l.current.disabled||f.current.domDragStarted&&f.current.detection.detected&&(l.current.dontBlockMouseDown||(K.stopPropagation(),K.preventDefault()),f.current.detection={detected:!1,totalDistanceMoved:0},I())},V=K=>{var Z,re,ne,le;(Z=_.current)==null||Z.release();let Ce=l.current;if(Ce.disabled===!0||!((re=Ce.buttons)!=null?re:[0]).includes(K.button))return;let ve=Ce.onDragStart(K);ve!==!1&&(b.current.onDrag=ve.onDrag,b.current.onDragEnd=(ne=ve.onDragEnd)!=null?ne:Hu,b.current.onClick=(le=ve.onClick)!=null?le:Hu,_.current=g("Drag start"),Ce.dontBlockMouseDown||(K.stopPropagation(),K.preventDefault()),f.current={domDragStarted:!0,startPos:{x:K.screenX,y:K.screenY},detection:{detected:!1,totalDistanceMoved:0}},I(),A())},H=K=>{V(K)};return s.addEventListener("mousedown",H),s.addEventListener("click",L),()=>{var K,Z;F(),s.removeEventListener("mousedown",H),s.removeEventListener("click",L),f.current.domDragStarted&&((Z=(K=b.current).onDragEnd)==null||Z.call(K,f.current.detection.detected)),f.current={domDragStarted:!1},I()}},[s]),Gl(C&&!!a.lockCSSCursorTo,"dragging",a.lockCSSCursorTo),[C]}function zke(s,a){return(!a.detection.detected||a.detection.detected&&a.detection.dragEventCount<3)&&(Math.abs(s.movementX)>F4||Math.abs(s.movementY)>F4)}var kb,OY,F4,ws=P(()=>{kb=q(Oe()),al(),L4(),Cb(),Uke(),kr(),OY=3,F4=100});function Vke(s){return isNaN(s)?"NaN":Io(s)?s.toFixed(0):jg(s,3).toString()}var LY,NY,fh,FY,WI,BY,UY,zY,VY,jY,HY,GY,WY,$I,B4=P(()=>{ui(),LY=q(Oe()),NY=q(Oe()),fh=q(Oe()),ze(),GI(),kr(),I4(),ws(),WI=ae.div(FY||(FY=W([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),UY=ae.input(BY||(BY=W([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),VY=ae.div(zY||(zY=W([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),WI,WI),HY=ae.div(jY||(jY=W([`
  display: contents;
`]))),GY=s=>!0,WY=s=>{var a;let[l]=br({mode:"noFocus"}),d=(a=s.isValid)!=null?a:GY,f=(0,fh.useRef)(s);f.current=s;let g=(0,fh.useRef)(null);A4(g.current,()=>{g.current.blur()},l.current.mode==="editingViaKeyboard");let b=(0,fh.useRef)(null),_=(0,fh.useMemo)(()=>{let V=ve=>{let we=ve.target,{value:De}=we,rt=l.current;l.current=z(N({},rt),{currentEditedValueInString:De});let ce=parseFloat(De);!isFinite(ce)||!d(ce)||f.current.temporarilySetValue(ce)},H=()=>{l.current.mode==="editingViaKeyboard"&&(K(),l.current={mode:"noFocus"}),s.onBlur&&s.onBlur()},K=()=>{let ve=l.current,we=parseFloat(ve.currentEditedValueInString);!isFinite(we)||!d(we)||ve.valueBeforeEditing===we?f.current.discardTemporaryValue():f.current.permanentlySetValue(we)},Z=ve=>{ve.key==="Escape"?(f.current.discardTemporaryValue(),l.current={mode:"noFocus"},g.current.blur()):(ve.key==="Enter"||ve.key==="Tab")&&(K(),g.current.blur())},re=ve=>{l.current.mode==="noFocus"&&(g.current.focus(),ve.preventDefault()),ve.stopPropagation()},ne=()=>{l.current.mode==="noFocus"?le():l.current.mode},le=()=>{let ve=f.current.value;l.current={mode:"editingViaKeyboard",currentEditedValueInString:String(ve),valueBeforeEditing:ve},setTimeout(()=>{g.current.focus(),g.current.setSelectionRange(0,100)})},Ce;return{inputChange:V,onBlur:H,transitionToDraggingMode:()=>{var ve;let we=f.current.value;Ce=(ve=g.current)==null?void 0:ve.getBoundingClientRect().width,l.current={mode:"dragging"};let De=we,rt=we;return b.current=document.body.style.cursor,{onDrag(ce,Re,J,Ve){let Ot=J.altKey?Ve/10:Ve,Me=rt+s.nudge({deltaX:Ot,deltaFraction:Ot/Ce,magnitude:1});rt=s.range?bi(Me,s.range[0],s.range[1]):Me,f.current.temporarilySetValue(rt)},onDragEnd(ce){ce?(De===rt?f.current.discardTemporaryValue():f.current.permanentlySetValue(rt),l.current={mode:"noFocus"}):(f.current.discardTemporaryValue(),l.current={mode:"noFocus"})},onClick(){g.current.focus(),g.current.setSelectionRange(0,100)}}},onInputKeyDown:Z,onClick:re,onFocus:ne}},[]);(0,LY.useEffect)(()=>()=>{_.onBlur()},[]);let S=l.current.mode!=="editingViaKeyboard"?Vke(s.value):l.current.currentEditedValueInString;typeof S=="number"&&isNaN(S)&&(S="NaN");let C=[g];s.inputRef&&C.push(s.inputRef);let I=fh.default.createElement(UY,{key:"input",type:"text",onChange:_.inputChange,value:S,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:HI(C),onMouseDown:V=>{V.stopPropagation()},onDoubleClick:V=>{V.preventDefault(),V.stopPropagation()},autoFocus:s.autoFocus}),{range:O}=s,R=parseFloat(S),A=O?fh.default.createElement(VY,{style:{"--percentage":bi((R-O[0])/(O[1]-O[0]),0,1)}}):null,[F,L]=(0,NY.useState)(null);return Fi(F,{debugName:"form/BasicNumberInput",onDragStart:_.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:l.current.mode==="editingViaKeyboard"}),fh.default.createElement(WI,{className:s.className+" "+l.current.mode},fh.default.createElement(HY,{ref:L},I),A)},$I=WY});function jke({propConfig:s,editingTools:a,value:l,autoFocus:d}){let f=(0,U4.useCallback)(g=>s.nudgeFn(z(N({},g),{config:s})),[s]);return U4.default.createElement($I,{value:l,temporarilySetValue:a.temporarilySetValue,discardTemporaryValue:a.discardTemporaryValue,permanentlySetValue:a.permanentlySetValue,range:s.range,nudge:f,autoFocus:d})}var U4,z4,$Y=P(()=>{B4(),U4=q(Oe()),z4=jke});function Hke({value:s,onChange:a,options:l,autoFocus:d}){let f=(0,uE.useCallback)(g=>{a(String(g.target.value))},[a]);return uE.default.createElement(V4,{role:"radiogroup"},Object.keys(l).map((g,b)=>uE.default.createElement(qY,{key:"label-"+b,"data-checked":s===g},l[g],uE.default.createElement(ZY,{type:"radio",checked:s===g,value:g,onChange:f,name:"switchbox",autoFocus:d}))))}var uE,KY,V4,XY,qY,YY,ZY,QY,Gke=P(()=>{ol(),uE=q(Oe()),ze(),V4=ae.form(KY||(KY=W([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),qY=ae.label(XY||(XY=W([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),V4,qS(.1,"white")),ZY=ae.input(YY||(YY=W([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),QY=Hke}),Wke=P(()=>{}),j4,H4,G4,JY=P(()=>{j4=q(Oe()),H4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},G4=j4.default.createContext&&j4.default.createContext(H4)});function eZ(s){return s&&s.map(function(a,l){return Ib.default.createElement(a.tag,mh({key:l},a.attr),eZ(a.child))})}function Ab(s){return function(a){return Ib.default.createElement($ke,mh({attr:mh({},s.attr)},a),eZ(s.child))}}function $ke(s){var a=function(l){var d=s.attr,f=s.size,g=s.title,b=tZ(s,["attr","size","title"]),_=f||l.size||"1em",S;return l.className&&(S=l.className),s.className&&(S=(S?S+" ":"")+s.className),Ib.default.createElement("svg",mh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,d,b,{className:S,style:mh(mh({color:s.color||l.color},l.style),s.style),height:_,width:_,xmlns:"http://www.w3.org/2000/svg"}),g&&Ib.default.createElement("title",null,g),s.children)};return G4!==void 0?Ib.default.createElement(G4.Consumer,null,function(l){return a(l)}):a(H4)}var Ib,mh,tZ,Kke=P(()=>{Ib=q(Oe()),JY(),mh=function(){return mh=Object.assign||function(s){for(var a,l=1,d=arguments.length;l<d;l++){a=arguments[l];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(s[f]=a[f])}return s},mh.apply(this,arguments)},tZ=function(s,a){var l={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&a.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,d=Object.getOwnPropertySymbols(s);f<d.length;f++)a.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(s,d[f])&&(l[d[f]]=s[d[f]]);return l}}),hs=P(()=>{Wke(),Kke(),JY()}),Xke=P(()=>{hs()}),qke=P(()=>{hs()});function Yke(s){return Ab({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(s)}var Zke=P(()=>{hs()}),Qke=P(()=>{hs()}),Jke=P(()=>{hs()});function eAe(s){return Ab({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(s)}function tAe(s){return Ab({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(s)}var nAe=P(()=>{hs()}),rAe=P(()=>{hs()}),iAe=P(()=>{hs()}),sAe=P(()=>{hs()}),oAe=P(()=>{hs()}),aAe=P(()=>{hs()}),lAe=P(()=>{hs()}),uAe=P(()=>{hs()}),cAe=P(()=>{hs()}),dAe=P(()=>{hs()});function nZ(s){return Ab({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(s)}var hAe=P(()=>{hs()}),pAe=P(()=>{hs()}),fAe=P(()=>{hs()}),mAe=P(()=>{hs()});function gAe(s){return Ab({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(s)}var vAe=P(()=>{hs()});function yAe(s){return Ab({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(s)}var bAe=P(()=>{hs()}),Rb=P(()=>{Xke(),qke(),Zke(),Qke(),Jke(),nAe(),rAe(),iAe(),sAe(),oAe(),aAe(),lAe(),uAe(),cAe(),dAe(),hAe(),pAe(),fAe(),mAe(),vAe(),bAe()});function _Ae({value:s,onChange:a,options:l,className:d,autoFocus:f}){let g=(0,Qg.useCallback)(b=>{a(String(b.target.value))},[a]);return Qg.default.createElement(iZ,null,Qg.default.createElement(lZ,{className:d,value:s,onChange:g,autoFocus:f},Object.keys(l).map((b,_)=>Qg.default.createElement("option",{key:"option-"+_,value:b},l[b]))),Qg.default.createElement(oZ,null,Qg.default.createElement(gAe,null)))}var Qg,rZ,iZ,sZ,oZ,aZ,lZ,uZ,wAe=P(()=>{Qg=q(Oe()),ze(),Rb(),iZ=ae.div(rZ||(rZ=W([`
  width: 100%;
  position: relative;
`]))),oZ=ae.div(sZ||(sZ=W([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),lZ=ae.select(aZ||(aZ=W([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),uZ=_Ae});function xAe({propConfig:s,editingTools:a,value:l,autoFocus:d}){let f=(0,KI.useCallback)(g=>{a.permanentlySetValue(g)},[s,a]);return s.as==="menu"?KI.default.createElement(uZ,{value:l,onChange:f,options:s.valuesAndLabels,autoFocus:d}):KI.default.createElement(QY,{value:l,onChange:f,options:s.valuesAndLabels,autoFocus:d})}var KI,cZ,SAe=P(()=>{KI=q(Oe()),Gke(),wAe(),cZ=xAe}),dZ,cE,hZ,pZ,fZ,mZ,XI,W4=P(()=>{ze(),dZ=q(Oe()),cE=q(Oe()),GI(),kr(),I4(),pZ=ae.input.attrs({type:"text"})(hZ||(hZ=W([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),fZ=s=>!0,mZ=s=>{var a,l;let[d]=br({mode:"noFocus"}),f=(a=s.isValid)!=null?a:fZ,g=(0,cE.useRef)(s);g.current=s;let b=(0,cE.useRef)(null);A4(b.current,()=>{b.current.blur()},d.current.mode==="editingViaKeyboard");let _=(0,cE.useMemo)(()=>{let I=H=>{let K=H.target,{value:Z}=K,re=d.current;d.current=z(N({},re),{currentEditedValueInString:Z}),f(Z)&&g.current.temporarilySetValue(Z)},O=()=>{var H,K;d.current.mode==="editingViaKeyboard"&&(R(),d.current={mode:"noFocus"}),(K=(H=g.current).onBlur)==null||K.call(H)},R=()=>{let H=d.current,K=H.currentEditedValueInString;f(K)?H.valueBeforeEditing===K?g.current.discardTemporaryValue():g.current.permanentlySetValue(K):g.current.discardTemporaryValue()},A=H=>{H.key==="Escape"?(g.current.discardTemporaryValue(),d.current={mode:"noFocus"},b.current.blur()):(H.key==="Enter"||H.key==="Tab")&&(R(),b.current.blur())},F=H=>{d.current.mode==="noFocus"&&(b.current.focus(),H.preventDefault()),H.stopPropagation()},L=()=>{d.current.mode==="noFocus"?V():d.current.mode},V=()=>{let H=g.current.value;d.current={mode:"editingViaKeyboard",currentEditedValueInString:String(H),valueBeforeEditing:H},setTimeout(()=>{b.current.focus()})};return{inputChange:I,onBlur:O,onInputKeyDown:A,onClick:F,onFocus:L}},[]);(0,dZ.useEffect)(()=>()=>{_.onBlur()},[]);let S=d.current.mode!=="editingViaKeyboard"?s.value:d.current.currentEditedValueInString,C=[b];return s.inputRef&&C.push(s.inputRef),cE.default.createElement(pZ,{key:"input",type:"text",className:"".concat((l=s.className)!=null?l:""," ").concat(f(S)?"":"invalid"),onChange:_.inputChange,value:S,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:HI(C),onMouseDown:I=>{I.stopPropagation()},onDoubleClick:I=>{I.preventDefault(),I.stopPropagation()},autoFocus:s.autoFocus})},XI=mZ});function EAe({editingTools:s,value:a,autoFocus:l}){return gZ.default.createElement(XI,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,autoFocus:l})}var gZ,vZ,CAe=P(()=>{gZ=q(Oe()),W4(),vZ=EAe});function PAe(s){s=s.trim().toLowerCase();let a=s.match(X4);if(!a)return{r:0,g:0,b:0,a:1};let l=TAe(a[1]);return{r:parseInt(l.substr(0,2),16)/255,g:parseInt(l.substr(2,2),16)/255,b:parseInt(l.substr(4,2),16)/255,a:parseInt(l.substr(6,2),16)/255}}function $4(s,{removeAlphaIfOpaque:a=!1}={}){let l=(s.a*255|256).toString(16).slice(1),d=(s.r*255|256).toString(16).slice(1)+(s.g*255|256).toString(16).slice(1)+(s.b*255|256).toString(16).slice(1)+(a&&l==="ff"?"":l);return"#".concat(d)}function K4(s){return z(N({},s),{toString(){return $4(this,{removeAlphaIfOpaque:!0})}})}function TAe(s){switch(s.length){case 3:return"".concat(s.repeat(2),"ff");case 4:let a=s.substr(0,3),l=s[3];return"".concat(a.repeat(2)).concat(l.repeat(2));case 6:return"".concat(s,"ff")}return s}var X4,yZ=P(()=>{X4=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function qI(s){let a=(0,q4.useRef)(s),l=(0,q4.useRef)(d=>{a.current&&a.current(d)});return a.current=s,l.current}var q4,bZ=P(()=>{q4=q(Oe())}),Jg,YI=P(()=>{Jg=(s,a=0,l=1)=>s>l?l:s<a?a:s}),dE,Y4,_Z,Z4,Q4=P(()=>{dE=q(Oe()),Y4=(0,dE.createContext)(void 0),_Z=({children:s})=>{let[a,l]=(0,dE.useState)(!1);return dE.default.createElement(Y4.Provider,{value:{editing:a,setEditing:l}},s)},Z4=()=>(0,dE.useContext)(Y4)}),ff,Db,wZ,ZI,J4,ez,xZ,SZ,EZ,CZ,hE,QI=P(()=>{ff=q(Oe()),bZ(),YI(),ze(),Q4(),Db=s=>"touches"in s,wZ=(s,a)=>{for(let l=0;l<s.length;l++)if(s[l].identifier===a)return s[l];return s[0]},ZI=s=>s&&s.ownerDocument.defaultView||self,J4=(s,a,l)=>{let d=s.getBoundingClientRect(),f=Db(a)?wZ(a.touches,l):a;return{left:Jg((f.pageX-(d.left+ZI(s).pageXOffset))/d.width),top:Jg((f.pageY-(d.top+ZI(s).pageYOffset))/d.height)}},ez=s=>{!Db(s)&&s.preventDefault()},xZ=(s,a)=>a&&!Db(s),EZ=ae.div(SZ||(SZ=W([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),CZ=s=>{var a=s,{onMove:l,onKey:d}=a,f=U(a,["onMove","onKey"]);let g=(0,ff.useRef)(null),b=qI(l),_=qI(d),S=(0,ff.useRef)(null),C=(0,ff.useRef)(!1),{setEditing:I}=Z4(),[O,R,A]=(0,ff.useMemo)(()=>{let F=({nativeEvent:Z})=>{let re=g.current;if(re&&(ez(Z),!(xZ(Z,C.current)||!re))){if(Db(Z)){C.current=!0;let ne=Z.changedTouches||[];ne.length&&(S.current=ne[0].identifier)}re.focus(),I(!0),b(J4(re,Z,S.current)),K(!0)}},L=Z=>{ez(Z),(Db(Z)?Z.touches.length>0:Z.buttons>0)&&g.current?b(J4(g.current,Z,S.current)):(I(!1),K(!1))},V=Z=>{I(!1),K(!1)},H=Z=>{let re=Z.which||Z.keyCode;re<37||re>40||(Z.preventDefault(),_({left:re===39?.05:re===37?-.05:0,top:re===40?.05:re===38?-.05:0}))};function K(Z){let re=C.current,ne=g.current,le=ZI(ne),Ce=Z?le.addEventListener:le.removeEventListener;Ce(re?"touchmove":"mousemove",L),Ce(re?"touchend":"mouseup",V)}return[F,H,K]},[_,b]);return(0,ff.useEffect)(()=>A,[A]),ff.default.createElement(EZ,z(N({},f),{onTouchStart:O,onMouseDown:O,ref:g,onKeyDown:R,tabIndex:0,role:"slider"}))},hE=ff.default.memo(CZ)}),tz,PZ,TZ,MZ,kZ,AZ,IZ,JI,nz=P(()=>{tz=q(Oe()),ze(),QI(),TZ=ae(hE)(PZ||(PZ=W([""]))),kZ=ae.div(MZ||(MZ=W([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),TZ),IZ=ae.div(AZ||(AZ=W([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),JI=({className:s,color:a,left:l,top:d=.5})=>{let f={top:"".concat(d*100,"%"),left:"".concat(l*100,"%")};return tz.default.createElement(kZ,{style:f,className:s},tz.default.createElement(IZ,{style:{backgroundColor:a}}))}}),Oo,eR=P(()=>{Oo=(s,a=0,l=Math.pow(10,a))=>Math.round(l*s)/l}),rz,tR,nR,RZ,DZ,rR=P(()=>{eR(),rz=({h:s,s:a,v:l,a:d})=>{let f=(200-a)*l/100;return{h:Oo(s),s:Oo(f>0&&f<200?a*l/100/(f<=100?f:200-f)*100:0),l:Oo(f/2),a:Oo(d,2)}},tR=s=>{let{h:a,s:l,l:d}=rz(s);return"hsl(".concat(a,", ").concat(l,"%, ").concat(d,"%)")},nR=s=>{let{h:a,s:l,l:d,a:f}=rz(s);return"hsla(".concat(a,", ").concat(l,"%, ").concat(d,"%, ").concat(f,")")},RZ=({h:s,s:a,v:l,a:d})=>{s=s/360*6,a=a/100,l=l/100;let f=Math.floor(s),g=l*(1-a),b=l*(1-(s-f)*a),_=l*(1-(1-s+f)*a),S=f%6;return{r:Oo([l,b,g,g,_,l][S]*255),g:Oo([_,l,l,b,g,g][S]*255),b:Oo([g,g,_,l,l,b][S]*255),a:Oo(d,2)}},DZ=({r:s,g:a,b:l,a:d})=>{let f=Math.max(s,a,l),g=f-Math.min(s,a,l),b=g?f===s?(a-l)/g:f===a?2+(l-s)/g:4+(s-a)/g:0;return{h:Oo(60*(b<0?b+6:b)),s:Oo(f?g/f*100:0),v:Oo(f/255*100),a:d}}}),pE,OZ,LZ,NZ,FZ,BZ,UZ,MAe=P(()=>{pE=q(Oe()),QI(),nz(),rR(),YI(),eR(),ze(),LZ=ae.div(OZ||(OZ=W([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),FZ=ae(JI)(NZ||(NZ=W([`
  z-index: 2;
`]))),BZ=({className:s,hue:a,onChange:l})=>pE.default.createElement(LZ,{className:s},pE.default.createElement(hE,{onMove:d=>{l({h:360*d.left})},onKey:d=>{l({h:Jg(a+d.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":Oo(a)},pE.default.createElement(FZ,{left:a/360,color:tR({h:a,s:100,v:100,a:1})}))),UZ=pE.default.memo(BZ)}),fE,zZ,VZ,jZ,HZ,GZ,WZ,kAe=P(()=>{fE=q(Oe()),QI(),nz(),rR(),YI(),eR(),ze(),VZ=ae.div(zZ||(zZ=W([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),HZ=ae(JI)(jZ||(jZ=W([`
  z-index: 3;
`]))),GZ=({hsva:s,onChange:a})=>{let l=g=>{a({s:g.left*100,v:100-g.top*100})},d=g=>{a({s:Jg(s.s+g.left*100,0,100),v:Jg(s.v-g.top*100,0,100)})},f={backgroundColor:tR({h:s.h,s:100,v:100,a:1})};return fE.default.createElement(VZ,{style:f},fE.default.createElement(hE,{onMove:l,onKey:d,"aria-label":"Color","aria-valuetext":"Saturation ".concat(Oo(s.s),"%, Brightness ").concat(Oo(s.v),"%")},fE.default.createElement(HZ,{top:1-s.v/100,left:s.s/100,color:tR(s)})))},WZ=fE.default.memo(GZ)}),mE,$Z,KZ,XZ,qZ,YZ,ZZ,QZ,AAe=P(()=>{mE=q(Oe()),QI(),nz(),rR(),YI(),eR(),ze(),KZ=ae.div($Z||($Z=W([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),qZ=ae.div.attrs(({colorFrom:s,colorTo:a})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(s,", ").concat(a,")")}}))(XZ||(XZ=W([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),ZZ=ae(JI)(YZ||(YZ=W([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),QZ=({className:s,hsva:a,onChange:l})=>{let d=_=>{l({a:_.left})},f=_=>{l({a:Jg(a.a+_.left)})},g=nR(Object.assign({},a,{a:0})),b=nR(Object.assign({},a,{a:1}));return mE.default.createElement(KZ,{className:s},mE.default.createElement(qZ,{colorFrom:g,colorTo:b}),mE.default.createElement(hE,{onMove:d,onKey:f,"aria-label":"Alpha","aria-valuetext":"".concat(Oo(a.a*100),"%")},mE.default.createElement(ZZ,{left:a.a,color:nR(a)})))}}),iR,JZ=P(()=>{iR=(s,a)=>{if(s===a)return!0;for(let l in s)if(s[l]!==a[l])return!1;return!0}});function IAe(s,a,l,d){let{editing:f}=Z4(),[g,b]=(0,gh.useState)(a),_=qI(l),S=qI(d),C=f?g:a,[I,O]=(0,gh.useState)(()=>s.toHsva(C)),R=(0,gh.useRef)({color:C,hsva:I}),A=(0,gh.useRef)({color:C,hsva:I});(0,gh.useEffect)(()=>{f&&b(R.current.color)},[f]),(0,gh.useEffect)(()=>{let L=s.fromHsva(I);f?!iR(I,R.current.hsva)&&!s.equal(L,R.current.color)&&(R.current={hsva:I,color:L},b(L),_(L)):!iR(I,A.current.hsva)&&!s.equal(L,A.current.color)&&(A.current={hsva:I,color:L},R.current={hsva:I,color:L},S(L))},[f,I,s,_,S]),(0,gh.useEffect)(()=>{if(!f&&!s.equal(C,A.current.color)){let L=s.toHsva(C);A.current={hsva:L,color:C},O(L)}},[f,C,s]);let F=(0,gh.useCallback)(L=>{O(V=>Object.assign({},V,L))},[]);return[I,F]}var gh,RAe=P(()=>{gh=q(Oe()),JZ(),bZ(),Q4()}),Ob,eQ,tQ,nQ,DAe=P(()=>{Ob=q(Oe()),MAe(),kAe(),AAe(),RAe(),ze(),tQ=ae.div(eQ||(eQ=W([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),nQ=s=>{var a=s,{className:l,colorModel:d,color:f=d.defaultColor,temporarilySetValue:g,permanentlySetValue:b,discardTemporaryValue:_}=a,S=U(a,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[C,I]=IAe(d,f,g,b);return(0,Ob.useEffect)(()=>()=>{_()},[]),Ob.default.createElement(tQ,N({},S),Ob.default.createElement(WZ,{hsva:C,onChange:I}),Ob.default.createElement(UZ,{hue:C.h,onChange:I}),Ob.default.createElement(QZ,{hsva:C,onChange:I}))}}),iz,rQ,iQ,sQ,oQ,OAe=P(()=>{iz=q(Oe()),DAe(),JZ(),rR(),Q4(),rQ=s=>({r:s.r/255,g:s.g/255,b:s.b/255,a:s.a}),iQ=s=>({r:s.r*255,g:s.g*255,b:s.b*255,a:s.a}),sQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:s=>DZ(iQ(s)),fromHsva:s=>rQ(RZ(s)),equal:iR},oQ=s=>iz.default.createElement(_Z,null,iz.default.createElement(nQ,z(N({},s),{permanentlySetValue:a=>{s.permanentlySetValue(a)},colorModel:sQ})))}),LAe=P(()=>{OAe()}),aQ,lQ,uQ,NAe=P(()=>{aQ=q(Oe()),lQ=function(s){(0,aQ.useEffect)(s,[])},uQ=lQ}),cQ,dQ,hQ,FAe=P(()=>{cQ=q(Oe()),NAe(),dQ=function(s){var a=(0,cQ.useRef)(s);a.current=s,uQ(function(){return function(){return a.current()}})},hQ=dQ}),sR,pQ,fQ,BAe=P(()=>{sR=q(Oe()),FAe(),pQ=function(s){var a=(0,sR.useRef)(0),l=(0,sR.useState)(s),d=l[0],f=l[1],g=(0,sR.useCallback)(function(b){cancelAnimationFrame(a.current),a.current=requestAnimationFrame(function(){f(b)})},[]);return hQ(function(){cancelAnimationFrame(a.current)}),[d,g]},fQ=pQ});function UAe(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.addEventListener&&s.addEventListener.apply(s,a)}function zAe(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.removeEventListener&&s.removeEventListener.apply(s,a)}var oR,VAe=P(()=>{oR=typeof window<"u"}),mQ,gQ,aR,sz=P(()=>{mQ=q(Oe()),BAe(),VAe(),gQ=function(s,a){s===void 0&&(s=1/0),a===void 0&&(a=1/0);var l=fQ({width:oR?window.innerWidth:s,height:oR?window.innerHeight:a}),d=l[0],f=l[1];return(0,mQ.useEffect)(function(){if(oR){var g=function(){f({width:window.innerWidth,height:window.innerHeight})};return UAe(window,"resize",g),function(){zAe(window,"resize",g)}}},[]),d},aR=gQ});function oz(s){let[a,l]=(0,az.useState)(null);return(0,az.useLayoutEffect)(()=>(s&&l(s.getBoundingClientRect()),()=>{l(null)}),[s]),a}var az,vQ=P(()=>{az=q(Oe())}),yQ,bQ,lz,_Q=P(()=>{yQ=q(Oe()),bQ=(0,yQ.createContext)({}),lz=bQ});function jAe(s,a,l){let d=s.getBoundingClientRect(),f=g=>{(g.clientX<d.left-a||g.clientX>d.left+d.width+a||g.clientY<d.top-a||g.clientY>d.top+d.height+a)&&l(g)};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}}var HAe=P(()=>{}),wQ,lR,uz,xQ,cz,SQ=P(()=>{wQ=q(Oe()),lR=q(Oe()),sz(),vQ(),_Q(),kr(),I4(),HAe(),Cb(),ui(),uz=8,xQ=s=>{var a,l;let d=s.children(),[f,g]=br(null),b=d.props.style?N({},d.props.style):{};b.position="absolute";let _=oz(g),S=oz(s.target),C=aR(),[I,O]=(0,lR.useState)({});return(0,lR.useLayoutEffect)(()=>{var R,A,F;if(!_||!g||!S)return;let L=(R=s.verticalGap)!=null?R:8,V={},H=(A=s.verticalPlacement)!=null?A:"bottom",K=0,Z=0;H==="bottom"?S.bottom+_.height+L<C.height?(H="bottom",K=S.bottom+L,V.top="0px"):S.top>_.height+L?(H="top",K=S.top-(_.height+L),V.bottom="0px",V.transform="rotateZ(180deg)"):H="overlay":H==="top"&&(S.top>_.height+L?(H="top",K=S.top-(_.height+L),V.bottom="0px",V.transform="rotateZ(180deg)"):S.bottom+_.height+L<C.height?(H="bottom",K=S.bottom+L,V.top="0px"):H="overlay");let re=0;if(H!=="overlay"){let De=S.left+S.width/2;De<_.width/2?(Z=L,re=Math.max(De-L,uz)):De+_.width/2>C.width?(Z=C.width-(L+_.width),re=Math.min(De-Z,_.width-uz)):(Z=De-_.width/2,re=_.width/2),V.left=re+"px"}let{minX:ne=-1/0,maxX:le=1/0,minY:Ce=-1/0,maxY:ve=1/0}=(F=s.constraints)!=null?F:{},we={left:bi(Z,ne,le-_.width),top:bi(K,Ce,ve+_.height)};if(g.style.left=we.left+"px",g.style.top=we.top+"px",O(V),s.onPointerOutside)return jAe(g,s.onPointerOutside.threshold,s.onPointerOutside.callback)},[_,g,s.target,S,C,s.onPointerOutside]),A4([g,(a=s.target)!=null?a:null],(l=s.onClickOutside)!=null?l:Hu),wQ.default.createElement(lz.Provider,{value:I},(0,lR.cloneElement)(d,{ref:f,style:b}))},cz=xQ});function qc(s,a){let l=(...A)=>{},{isPointerBeingCaptured:d}=RY("usePopover"),[f,g]=br({isOpen:!1}),b=(0,Lo.useRef)(s),_=(0,Lo.useCallback)(A=>{f.current={isOpen:!1}},[]),S=(0,Lo.useCallback)((A,F)=>{var L;let V=typeof b.current=="function"?b.current():b.current;function H(){I.childHasFocusRef.current||V.closeOnClickOutside!==!1&&_("clicked outside popover")}f.current={isOpen:!0,clickPoint:{clientX:A.clientX,clientY:A.clientY},target:F,opts:V,onClickOutside:H,onPointerOutside:V.closeWhenPointerIsDistant===!1?void 0:{threshold:(L=V.pointerDistanceThreshold)!=null?L:100,callback:()=>{I.childHasFocusRef.current||d()||_("pointer outside")}}}},[]),C=(0,Lo.useCallback)((...A)=>{f.current.isOpen?_("toggled"):S(...A)},[]),I=GAe({_debug:l,state:g}),[,O]=(0,Lo.useContext)(HE);(0,Lo.useEffect)(()=>{let A;return g.isOpen&&(A=O()),()=>A==null?void 0:A()},[g.isOpen]);let R=(0,Lo.useContext)(xb);return{node:g.isOpen?(0,EQ.createPortal)(Lo.default.createElement(dz.Provider,{value:I.childPopoverLock},Lo.default.createElement(cz,{children:a,target:g.target,onClickOutside:g.onClickOutside,onPointerOutside:g.onPointerOutside,constraints:g.opts.constraints,verticalGap:g.opts.verticalGap})),R):Lo.default.createElement(Lo.default.Fragment,null),open:S,close:_,toggle:C,isOpen:g.isOpen}}function GAe(s){let a=(0,Lo.useContext)(dz);(0,Lo.useEffect)(()=>{if(s.state.isOpen){let d=a.takeFocus();return s._debug("take focus"),()=>{s._debug("release focus"),d.releaseFocus()}}},[s.state.isOpen]);let l=(0,Lo.useRef)(!1);return{childHasFocusRef:l,childPopoverLock:{takeFocus(){return l.current=!0,{releaseFocus(){l.current=!1}}}}}}var Lo,EQ,dz,Yc=P(()=>{L4(),kr(),Lo=q(Oe()),EQ=q(Ou()),Zg(),SQ(),eV(),dz=Lo.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),vh,CQ,PQ,TQ,MQ,kQ,AQ,IQ,RQ,DQ,OQ,LQ,NQ,WAe=P(()=>{vh=q(Oe()),ze(),_Q(),PQ=ae.div(CQ||(CQ=W([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),MQ=ae.div(TQ||(TQ=W([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),AQ=ae.path(kQ||(kQ=W([`
  fill: var(--popover-bg);
`]))),RQ=ae.path(IQ||(IQ=W([`
  fill: var(--popover-inner-stroke);
`]))),OQ=ae.path(DQ||(DQ=W([`
  fill: var(--popover-outer-stroke);
`]))),LQ=(0,vh.forwardRef)(({className:s},a)=>{let l=(0,vh.useContext)(lz);return vh.default.createElement(PQ,{className:s,ref:a,style:N({},l)},vh.default.createElement(MQ,null,vh.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vh.default.createElement(OQ,{d:"M6 0L0 6H12L6 0Z"}),vh.default.createElement(RQ,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),vh.default.createElement(AQ,{d:"M6 3L0 9H12L6 3Z"}))))}),NQ=LQ}),uR,hz,FQ,BQ,UQ,Zc,Qc=P(()=>{Ar(),ol(),uR=q(Oe()),ze(),WAe(),hz=ju(.05,"#2a2a31"),BQ=ae.div(FQ||(FQ=W([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),hz,Cr),UQ=uR.default.forwardRef(({children:s,className:a,showPopoverEdgeTriangle:l=!0},d)=>uR.default.createElement(BQ,{className:a,ref:d},l?uR.default.createElement(NQ,null):void 0,s)),Zc=UQ});function $Ae({editingTools:s,value:a,autoFocus:l}){let d=(0,Jc.useRef)(null),f=(0,Jc.useCallback)(b=>{let _=K4(PAe(b));s.permanentlySetValue(_)},[s]),g=qc({debugName:"RgbaPropEditor"},()=>Jc.default.createElement(KQ,null,Jc.default.createElement(oQ,{color:{r:a.r,g:a.g,b:a.b,a:a.a},temporarilySetValue:b=>{let _=K4(b);s.temporarilySetValue(_)},permanentlySetValue:b=>{let _=K4(b);s.permanentlySetValue(_)},discardTemporaryValue:s.discardTemporaryValue})));return Jc.default.createElement(Jc.default.Fragment,null,Jc.default.createElement(VQ,null,Jc.default.createElement(HQ,{rgbaColor:a,ref:d,onClick:b=>{g.toggle(b,d.current)}}),Jc.default.createElement(WQ,{value:$4(a,{removeAlphaIfOpaque:!0}),temporarilySetValue:pz,discardTemporaryValue:pz,permanentlySetValue:f,isValid:b=>!!b.match(X4),autoFocus:l})),g.node)}var Jc,zQ,VQ,jQ,HQ,GQ,WQ,pz,$Q,KQ,XQ,KAe=P(()=>{yZ(),yZ(),Jc=q(Oe()),LAe(),ze(),Yc(),W4(),Qc(),VQ=ae.div(zQ||(zQ=W([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),HQ=ae.div.attrs(s=>({style:{background:$4(s.rgbaColor)}}))(jQ||(jQ=W([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),WQ=ae(XI)(GQ||(GQ=W([`
  flex: 1;
`]))),pz=()=>{},KQ=ae.div($Q||($Q=W([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),hz),XQ=$Ae});function XAe({propConfig:s,editingTools:a,value:l,autoFocus:d}){let[f,g]=Wu.default.useState();(0,Wu.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,Wu.useCallback)(S=>he(this,null,function*(){let C=S.target.files[0];a.permanentlySetValue({type:"image",id:void 0});let I=yield a.createAsset(C);I?a.permanentlySetValue({type:"image",id:I}):a.permanentlySetValue(l),S.target.value=null}),[a,l]),_=!(l!=null&&l.id);return Wu.default.createElement(fz,{empty:_},Wu.default.createElement(tJ,{empty:_,title:_?"Upload image":'"'.concat(l.id,'" (Click to upload new image)')},Wu.default.createElement(rJ,{type:"file",onChange:b,accept:"image/*,.hdr",autoFocus:d}),f?Wu.default.createElement(sJ,{src:f}):Wu.default.createElement(ZQ,null)),!_&&Wu.default.createElement(aJ,{title:"Delete image",onClick:()=>{a.permanentlySetValue({type:"image",id:void 0})}},Wu.default.createElement(w4,null)))}var Wu,qQ,fz,YQ,ZQ,QQ,JQ,eJ,tJ,nJ,rJ,iJ,sJ,oJ,aJ,lJ,qAe=P(()=>{rE(),Wu=q(Oe()),ze(),fz=ae.div(qQ||(qQ=W([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),ZQ=ae.div(YQ||(YQ=W([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),tJ=ae.label(eJ||(eJ=W([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?lo(QQ||(QQ=W([""]))):lo(JQ||(JQ=W([""])))),rJ=ae.input.attrs({type:"file"})(nJ||(nJ=W([`
  display: none;
`]))),sJ=ae.img(iJ||(iJ=W([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),aJ=ae.button(oJ||(oJ=W([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),fz),lJ=XAe});function YAe({propConfig:s,editingTools:a,value:l,autoFocus:d}){let[f,g]=$u.default.useState();(0,$u.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,$u.useCallback)(S=>he(this,null,function*(){let C=S.target.files[0];a.permanentlySetValue({type:"file",id:void 0});let I=yield a.createAsset(C);I?a.permanentlySetValue({type:"file",id:I}):a.permanentlySetValue(l),S.target.value=null}),[a,l]),_=!(l!=null&&l.id);return $u.default.createElement(mz,{empty:_},$u.default.createElement(mJ,{empty:_,title:_?"Upload file":'"'.concat(l.id,'" (Click to upload new file)')},$u.default.createElement(vJ,{type:"file",onChange:b,autoFocus:d}),f?$u.default.createElement(y4,null):$u.default.createElement(dJ,null)),!_&&$u.default.createElement(bJ,{title:"Delete file",onClick:()=>{a.permanentlySetValue({type:"file",id:void 0})}},$u.default.createElement(w4,null)))}var $u,uJ,mz,cJ,dJ,hJ,pJ,fJ,mJ,gJ,vJ,yJ,bJ,_J,ZAe=P(()=>{rE(),$u=q(Oe()),ze(),mz=ae.div(uJ||(uJ=W([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),dJ=ae.div(cJ||(cJ=W([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),mJ=ae.label(fJ||(fJ=W([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?lo(hJ||(hJ=W([""]))):lo(pJ||(pJ=W([""])))),vJ=ae.input.attrs({type:"file"})(gJ||(gJ=W([`
  display: none;
`]))),bJ=ae.button(yJ||(yJ=W([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),mz),_J=YAe}),gz,wJ=P(()=>{Nke(),$Y(),SAe(),CAe(),KAe(),qAe(),ZAe(),gz={number:z4,string:vZ,boolean:xY,stringLiteral:cZ,rgba:XQ,image:lJ,file:_J}});function gE(s){let a=new WeakMap;return l=>(a.has(l)||a.set(l,s(l)),a.get(l))}var cR=P(()=>{});function ed(s){return s.type==="compound"||s.type==="enum"}function dR(s,a){if(!s)return;let[l,...d]=a;if(l===void 0)return s;if(!ed(s))return;let f=s.type==="enum"?s.cases[l]:s.props[l];return dR(f,d)}function hR(s,a){let l=a.deserializeAndSanitize(s);return l===void 0?a.default:l}function QAe(s){return!ed(s)}function*vE(s,a){if(s.type==="compound")for(let l in s.props)yield*at(vE(s.props[l],[...a,l]));else{if(s.type==="enum")throw new Error("Not implemented yet");return yield{path:a,conf:s}}}var vz,mf=P(()=>{cR(),vz=gE(s=>{if(s.type==="enum")throw new Error("Not implemented yet for enums");for(let a in s.props){let l=s.props[a];if(ed(l)){if(vz(l))return!0}else return!0}return!1})}),yz,xJ=P(()=>{yz="calc(var(--left-pad) + var(--depth) * var(--step))"}),SJ,gf,ev=P(()=>{ze(),gf=lo(SJ||(SJ=W([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),s=>s.isHighlighted==="self"?"#CCC":"#919191")}),yE,pR,EJ,CJ,PJ,TJ,MJ,kJ,AJ=P(()=>{Cb(),yE=q(Oe()),ze(),pR=26,CJ=ae.li(EJ||(EJ=W([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),pR,s=>s.enabled?"white":"#8f8f8f",s=>s.enabled?"normal":"not-allowed",s=>s.enabled?"rgba(63, 174, 191, 0.75)":"initial"),TJ=ae.span(PJ||(PJ=W([""]))),MJ=s=>yE.default.createElement(CJ,{onClick:s.enabled?s.onClick:Hu,enabled:s.enabled,title:s.enabled?void 0:"Disabled"},yE.default.createElement(TJ,null,yE.default.createElement(yE.default.Fragment,null,s.label))),kJ=MJ});function JAe(s){let a=(0,bz.useRef)(s);a.current=s,(0,bz.useEffect)(()=>{let l=d=>a.current(d);return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[])}var bz,e2e=P(()=>{bz=q(Oe())}),bE,IJ,RJ,DJ,OJ,LJ,NJ,FJ,_z,BJ=P(()=>{bE=q(Oe()),AJ(),ze(),ol(),Ar(),IJ=190,RJ=!0,OJ=ae.ul(DJ||(DJ=W([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),IJ,ju(.2,"#111"),Cr),NJ=ae.div(LJ||(LJ=W([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),FJ=bE.default.forwardRef((s,a)=>bE.default.createElement(OJ,{ref:a},RJ&&s.displayName?bE.default.createElement(NJ,null,s.displayName):null,s.items.map((l,d)=>bE.default.createElement(kJ,{key:"item-".concat(d),label:l.label,enabled:l.enabled!==!1,onClick:f=>{l.callback&&l.callback(f),s.onRequestClose()}})))),_z=FJ}),UJ,zJ,fR,VJ,_E,jJ,HJ,t2e=P(()=>{vQ(),UJ=q(Oe()),zJ=q(Oe()),fR=q(Oe()),VJ=q(Ou()),sz(),AJ(),Zg(),e2e(),BJ(),_E=20,jJ=s=>{let[a,l]=(0,fR.useState)(null),d=oz(a),f=aR();(0,fR.useLayoutEffect)(()=>{if(!d||!a)return;let _={left:d.width/2,top:pR/2+(s.displayName?pR:0)},S={left:s.clickPoint.clientX-_.left,top:s.clickPoint.clientY-_.top};S.left<0?S.left=0:S.left+d.width>f.width&&(S.left=f.width-d.width),S.top<0?S.top=0:S.top+d.height>f.height&&(S.top=f.height-d.height),a.style.left=S.left+"px",a.style.top=S.top+"px";let C=I=>{(I.clientX<S.left-_E||I.clientX>S.left+d.width+_E||I.clientY<S.top-_E||I.clientY>S.top+d.height+_E)&&s.onRequestClose()};return window.addEventListener("mousemove",C),()=>{window.removeEventListener("mousemove",C)}},[d,a,s.clickPoint,f,s.onRequestClose]);let g=(0,zJ.useContext)(xb);JAe(_=>{_.key==="Escape"&&s.onRequestClose()});let b=(0,UJ.useMemo)(()=>{let _=Array.isArray(s.items)?s.items:s.items();return _.length>0?_:[{label:s.displayName?"No actions for ".concat(s.displayName):"No actions found",enabled:!1}]},[s.items]);return(0,VJ.createPortal)(fR.default.createElement(_z,{items:b,onRequestClose:s.onRequestClose,displayName:s.displayName,ref:l}),g)},HJ=jJ}),mR,GJ,WJ,n2e=P(()=>{mR=q(Oe()),GJ=(s,a)=>{let[l,d]=(0,mR.useState)({isOpen:!1}),f=(0,mR.useCallback)(()=>d({isOpen:!1}),[]);return(0,mR.useEffect)(()=>{if(!s||a.disabled===!0){d({isOpen:!1});return}let g=b=>{d({isOpen:!0,event:b}),b.preventDefault(),b.stopPropagation()};return s.addEventListener("contextmenu",g),()=>{s.removeEventListener("contextmenu",g)}},[s,a.disabled]),[l,f]},WJ=GJ});function ua(s,a){let[l,d]=WJ(s,a),[,f]=(0,Lb.useContext)(HE);return(0,Lb.useEffect)(()=>{var g;let b;return l.isOpen&&((g=a.onOpen)==null||g.call(a),b=f()),()=>b==null?void 0:b()},[l.isOpen,a.onOpen]),[l.isOpen?Lb.default.createElement(HJ,{items:a.menuItems,displayName:a.displayName,clickPoint:l.event,onRequestClose:d}):$J,d,l.isOpen]}var Lb,$J,ca=P(()=>{Lb=q(Oe()),t2e(),n2e(),eV(),$J=Lb.default.createElement(Lb.default.Fragment,null)});function vf(s,a){return a.length===0?s:Zd(s,a)}var gR=P(()=>{Wp()});function KJ(s,a){return s==null?null:s instanceof Element&&s.matches(a)?s:KJ(s.parentElement,a)}var r2e=P(()=>{});function wE(s,a){let l=s;for(let d of a)l=l[d];return l}var vR=P(()=>{});function i2e(s){let a=new yR.Atom(void 0),l=new yR.Atom({}),d=new yR.Atom({}),f=0;return{addRelatedFlags(g,b){let _=String(++f),S=b.map(C=>{let I={flag:C.flag},O=[C.affects,g,_];return d.setByPointer(R=>wE(R,O),I),O});return()=>{for(let C of S)d.setByPointer(I=>wE(I,C),void 0)}},usePresenceFlag(g){if(!s.enabled)return;let b=(0,xE.useMemo)(()=>{if(!g)return xz;let _=a.prism,S=(0,SE.pointerToPrism)(l.pointer[g]),C=(0,SE.pointerToPrism)(d.pointer[g]);return(0,SE.prism)(()=>{if(S.getValue())return 2;{let I=C.getValue(),O=_.getValue(),R=I&&O&&I[O];if(R){let A;for(let F of Object.values(R))F&&(A&&A>=F.flag||(A=F.flag));return A}return}})},[g]);return eb(b)},setUserHover(g){let b=a.get();b!==g&&(b&&l.setByPointer(_=>_[b],!1),a.set(g),g&&l.setByPointer(_=>_[g],!0))}}}function tv(s){let a=xE.default.useContext(Sz),l=a.usePresenceFlag(s);return{attrs:{[bR]:s},flag:l,useRelations(d,f){(0,wz.useEffect)(()=>s&&a.addRelatedFlags(s,d()),[s,...f])}}}function XJ(s){let a=xE.default.useContext(Sz),l=hf("PresenceListeners");(0,wz.useEffect)(()=>{let d;if(!s)return;let f=g=>{if(g.target instanceof Node){let b=KJ(g.target,"[".concat(bR,"]"));if(b){let _=b.getAttribute(bR);d!==_&&(d=_,a.setUserHover(_||void 0),l._debug("Updated current hover",{itemKey:_}));return}d!=null&&(d=null,a.setUserHover(void 0),l._debug("Cleared current hover"))}};return s.addEventListener("mouseover",f),()=>{s.removeEventListener("mouseover",f),d!=null&&(d=null,l._debug("Cleared current hover as part of cleanup"))}},[s,a])}var xE,wz,SE,yR,xz,Sz,bR,nv=P(()=>{xE=q(Oe()),wz=q(Oe()),pf(),SE=Ft,yR=Ft,yn(),r2e(),vR(),xz=(0,SE.prism)(()=>{}),xz.keepHot(),Sz=xE.default.createContext(i2e({enabled:!1})),bR="data-pi-key"}),co,qJ,EE,YJ,Ez,yf,ZJ,Cz,QJ,JJ,eee,_R,tee,nee,ree,iee,see,oee,CE,aee,Pz,wR=P(()=>{Ar(),ol(),co=q(Oe()),ze(),nv(),EE=ae.div(qJ||(qJ=W([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),ju(.2,"black")),Ez=ae.div(YJ||(YJ=W([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),EE),yf={offColor:"#555",onColor:"#e0c917"},Cz=ae(Ez)(ZJ||(ZJ=W([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),s=>s.presence===2?"white":s.isOn?yf.onColor:yf.offColor),JJ=lo(QJ||(QJ=W([`
  pointer-events: none !important;
`]))),_R=ae(Ez)(eee||(eee=W([`
  color: `,`;

  `,`;
`])),s=>s.flag===2?"white":s.available?yf.onColor:yf.offColor,s=>s.available?Cr:JJ),nee=ae(_R)(tee||(tee=W([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),EE),iee=ae(_R)(ree||(ree=W([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),EE),(s=>{let a=ae.g(see||(see=W([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),_R);s.Prev=()=>co.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement(a,{transform:"translate(6 3)"},co.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),s.Next=()=>co.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement(a,{transform:"translate(1 3)"},co.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let l=ae.g(oee||(oee=W([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),Cz);s.Cur=()=>co.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement(l,{transform:"translate(1 4)"},co.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(CE||(CE={})),aee=s=>{var a,l,d,f,g;let b=tv((a=s.prev)==null?void 0:a.itemKey),_=tv(((l=s.cur)==null?void 0:l.type)==="on"?s.cur.itemKey:void 0),S=tv((d=s.next)==null?void 0:d.itemKey);return co.default.createElement(EE,null,co.default.createElement(nee,N({available:!!s.prev,onClick:(f=s.prev)==null?void 0:f.jump,flag:b.flag},b.attrs),co.default.createElement(CE.Prev,null)),co.default.createElement(Cz,N({isOn:s.cur.type==="on",onClick:s.cur.toggle,presence:_.flag},_.attrs),co.default.createElement(CE.Cur,null)),co.default.createElement(iee,N({available:!!s.next,onClick:(g=s.next)==null?void 0:g.jump,flag:S.flag},S.attrs),co.default.createElement(CE.Next,null)))},Pz=aee}),xR,PE,lee,uee,cee,dee,hee,pee,fee,TE,mee=P(()=>{ol(),xR=q(Oe()),ze(),Te(),wR(),mf(),PE={defaultState:{color:ju(.95,"#C4C4C4"),hoverColor:ju(.15,yf.onColor)},withStaticOverride:{color:ju(.85,"#C4C4C4"),hoverColor:ju(.15,yf.onColor)}},uee=ae.div(lee||(lee=W([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),s=>s.hasStaticOverride?PE.withStaticOverride.color:PE.defaultState.color,s=>s.hasStaticOverride?PE.withStaticOverride.hoverColor:PE.defaultState.hoverColor),dee=ae.div(cee||(cee=W([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),pee=ae.div(hee||(hee=W([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),fee=s=>{let{hasStaticOverride:a,obj:l,propConfig:d,pathToProp:f}=s;return xR.default.createElement(uee,{hasStaticOverride:a,onClick:()=>{ue().transaction(({stateEditors:g})=>{for(let{path:b,conf:_}of vE(d,f)){if(ed(_))continue;let S=z(N({},l.address),{pathToProp:b});g.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(S,d)}})},title:"Sequence this prop"},a?xR.default.createElement(pee,{title:"The default value is overridden"}):xR.default.createElement(dee,{title:"This is the default value for this prop"}))},TE=fee});function ME(s){return JSON.stringify(Tz(s))}function Tz(s){return Ny(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=Tz(s[l]),a),{}):Array.isArray(s)?s.map(Tz):s}var s2e=P(()=>{ui()}),gee,kE,vee=P(()=>{gee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",kE=(s=21)=>{let a="",l=s;for(;l--;)a+=gee[Math.random()*64|0];return a}});function yee(){return kE(10)}function o2e(){return kE(10)}function a2e(){return kE(10)}var Os,yh=P(()=>{s2e(),vee(),Os={forSheet(){return"sheet"},forSheetObject(s){return ME({o:s.address.objectKey})},forSheetObjectProp(s,a){return ME({o:s.address.objectKey,p:a})},forTrackKeyframe(s,a,l){return ME({o:s.address.objectKey,t:a,k:l})},forSheetObjectAggregateKeyframe(s,a){return Os.forCompoundPropAggregateKeyframe(s,[],a)},forSheetAggregateKeyframe(s,a){return ME({o:s.address.sheetId,pos:a})},forCompoundPropAggregateKeyframe(s,a,l){return ME({o:s.address.objectKey,p:a,pos:l})}}});function bee(s,a,l){if(!a||a.data.keyframes.length===0)return _ee;let d=Mz.get(a.data);if(d&&d[0]===l)return d[1];function f(b){if(!a)return;let _=a.data.keyframes[b];return _&&{kf:_,track:a,itemKey:Os.forTrackKeyframe(s,a.id,_.id)}}let g=(()=>{let b=a.data.keyframes.findIndex(S=>S.position>=l);if(b===-1)return{prev:f(a.data.keyframes.length-1)};let _=f(b);return _.kf.position===l?{prev:f(b-1),cur:_,next:f(b+1)}:{next:_,prev:f(b-1)}})();return Mz.set(a.data,[l,g]),g}var Mz,_ee,wee=P(()=>{yh(),Mz=new WeakMap,_ee={}}),kz,xee=P(()=>{kz={}});function l2e(s,a,l){let d=(0,Wl.getPointerParts)(s).path;return Yn(()=>{if(!vz(l))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:rv.default.createElement(TE,{hasStaticOverride:!1,obj:a,pathToProp:d,propConfig:l})};let f=!!(0,Wl.val)(Zd(ue().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,Wl.getPointerParts)(s).path)),g=[],b={beingScrubbed:f,contextMenuItems:g,controlIndicators:rv.default.createElement(rv.default.Fragment,null)},_=(0,Wl.val)(a.template.getMapOfValidSequenceTracks_forStudio()),S=vf(_,d),C=S!==void 0&&Object.keys(S).length!==0,I=[],O=(0,Wl.val)(a.template.getStaticButNotSequencedOverrides()),R=vf(O??kz,d)!==void 0;if(C)for(let A of vE(l,[])){if(ed(A.conf))continue;let F=vf(S,A.path);typeof F!="string"?R=!0:I.push(F)}if((R||C)&&g.push({label:"Reset all to default",callback:()=>{ue().transaction(({unset:A})=>{A(s)})}}),C&&g.push({label:"Make all static",callback:()=>{ue().transaction(({stateEditors:A})=>{for(let{path:F,conf:L}of vE(l,[])){if(ed(L))continue;let V=z(N({},a.address),{pathToProp:[...d,...F]}),H=wE(s,F);A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(N({},V),{value:a.getValueByPointer(H)}))}})}}),(!C||C&&R)&&g.push({label:"Sequence all",callback:()=>{ue().transaction(({stateEditors:A})=>{for(let{path:F,conf:L}of vE(l,d)){if(ed(L))continue;let V=z(N({},a.address),{pathToProp:F});A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(V,l)}})}}),C){let A=Wl.prism.memo("controlIndicators",()=>rv.default.createElement(u2e,{pointerToProp:s,obj:a,possibleSequenceTrackIds:S,listOfDescendantTrackIds:I}),[S,I]);return z(N({},b),{type:"HasSequences",controlIndicators:A})}else return z(N({},b),{type:"AllStatic",controlIndicators:rv.default.createElement(TE,{hasStaticOverride:R,obj:a,pathToProp:d,propConfig:l})})},[])}function u2e({pointerToProp:s,obj:a,possibleSequenceTrackIds:l,listOfDescendantTrackIds:d}){return Yn(()=>{let f=(0,Wl.getPointerParts)(s).path,g=(0,Wl.val)(a.sheet.getSequence().positionPrism),b=d.map(A=>({trackId:A,track:(0,Wl.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[A])})).filter(({track:A})=>!!A).map(A=>z(N({},A),{nearbies:bee(a,{id:A.trackId,data:A.track,sheetObject:a},g)})),_=b.find(({nearbies:A})=>!!A.cur),S=b.every(({nearbies:A})=>!!A.cur),C=b.reduce((A,F)=>F.nearbies.prev&&(A===void 0||F.nearbies.prev.kf.position>A.kf.position)?F.nearbies.prev:A,void 0),I=b.reduce((A,F)=>F.nearbies.next&&(A===void 0||F.nearbies.next.kf.position<A.kf.position)?F.nearbies.next:A,void 0),O=()=>{S?ue().transaction(A=>{A.unset(s)}):_?ue().transaction(A=>{A.set(s,(0,Wl.val)(s))}):ue().transaction(A=>{A.set(s,(0,Wl.val)(s))})},R={cur:_?{type:"on",itemKey:Os.forCompoundPropAggregateKeyframe(a,f,g),toggle:O}:{toggle:O,type:"off"},prev:C!==void 0?{position:C.kf.position,itemKey:Os.forCompoundPropAggregateKeyframe(a,f,C.kf.position),jump:()=>{a.sheet.getSequence().position=C.kf.position}}:void 0,next:I!==void 0?{position:I.kf.position,itemKey:Os.forCompoundPropAggregateKeyframe(a,f,I.kf.position),jump:()=>{a.sheet.getSequence().position=I.kf.position}}:void 0};return rv.default.createElement(Pz,N({},R))},[s,a,l,d])}var Wl,rv,c2e=P(()=>{Te(),gR(),yn(),Wl=Ft,Wp(),rv=q(Oe()),mee(),mf(),yh(),vR(),wR(),wee(),xee()});function d2e(){let s=0,a=new Cee.Atom({hasLock:!1});return{replaceLock(l,d){let f=s++,g=a.get();return g.hasLock&&g.cleanup(),a.set({hasLock:!0,lockId:f,cleanup:d,deepPath:h2e(See(l))}),function(){let b=a.get();b.hasLock&&b.lockId===f&&(b.cleanup(),a.set({hasLock:!1}))}},getIsPropHighlightedD(l){let d=wE(a.pointer.deepPath,See(l));return(0,Pee.prism)(()=>{let f=(0,Eee.val)(d);return f===!0?"self":f?"descendent":null})}}}function See(s){return[s.projectId,s.sheetId,s.objectKey,...s.pathToProp]}function h2e(s){let a={};return Qp(a,s,!0),a}var Eee,Cee,Pee,SR,Az=P(()=>{Eee=Ft,Cee=Ft,Pee=Ft,vR(),Zy(),SR=d2e()});function p2e(s,a){return JSON.stringify(s,a,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var f2e=P(()=>{});function Tee(s,a=!0){try{return typeof s=="string"?s:typeof s=="function"||s instanceof Error?s.toString():a?p2e(s):JSON.stringify(s)}catch{return(s==null?void 0:s.name)||String(s)}}var m2e=P(()=>{f2e()});function g2e(s,a,l){s||(arguments.length>2?Mee(a,l):Mee(a))}function Mee(s,a){let l=arguments.length>1,d=Tee(typeof s=="function"?s():s),f=l?`
Instead found: `.concat(Tee(a)):"";throw new Dee("Invariant: ".concat(d).concat(f),a)}var kee,Aee,Iee,Ree,Dee,v2e=P(()=>{m2e(),kee=/^\s*at.+node:internal.+/gm,Aee=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,Iee=/^\s*(at|[^@]+@).+test\-helpers.+/gm,Ree=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,Dee=class extends Error{constructor(s,a){var l;super(s),pe(this,"found"),a!==void 0&&(this.found=a),this.stack=(l=this.stack)==null?void 0:l.replace(Aee,"").replace(Ree,"").replace(Iee,"").replace(kee,"")}}});function y2e(s){return(0,ER.prism)(()=>{if(Array.isArray(s)){let a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l].getValue();return a}else{let a={};for(let l in s)a[l]=(0,ER.val)(s[l]);return a}})}function Iz(s){let a=Nb.default.memo(Nb.default.forwardRef(function(l,d){let f=[],g={},b={ref:d};for(let I in l){let O=l[I];(0,ER.isPrism)(O)?(f.push(O),g[I]=O):b[I]=O}let _=(0,Nb.useRef)(f.length);g2e(_.current===f.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:_.current,count:f.length});let S=(0,Nb.useMemo)(()=>y2e(g),f),C=eb(S);return C&&Nb.default.createElement(s,N(N({},b),C))}));return a.displayName="deriver(".concat(s.displayName,")"),a}var ER,Nb,Oee=P(()=>{ER=Ft,yn(),Nb=q(Oe()),v2e()});function b2e(s,a,l){return(0,Ku.prism)(()=>{var d;let f=(0,Ku.getPointerParts)(s).path,g=a.getValueByPointer(s),b=Ku.prism.memo("editPropValue",()=>{let F=null;return{temporarilySetValue(L){F||(F=ue().scrub()),F.capture(V=>{V.set(s,L)})},discardTemporaryValue(){F&&(F.discard(),F=null)},permanentlySetValue(L){F?(F.capture(V=>{V.set(s,L)}),F.commit(),F=null):ue().transaction(V=>{V.set(s,L)})}}},[]),_={createAsset:F=>a.sheet.project.assetStorage.createAsset(F),getAssetUrl:F=>F.id?a.sheet.project.assetStorage.getAssetUrl(F.id):void 0},S=(0,Ku.val)(Zd(ue().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,Ku.getPointerParts)(s).path))===!0,C=[],I=z(N(N({},b),_),{value:g,beingScrubbed:S,contextMenuItems:C,controlIndicators:Fb.default.createElement(Fb.default.Fragment,null)}),O=QAe(l);if(O){let F=(0,Ku.val)(a.template.getMapOfValidSequenceTracks_forStudio()),L=vf(F,f);if(typeof L=="string"){C.push({label:"Make static",callback:()=>{ue().transaction(({stateEditors:le})=>{let Ce=z(N({},a.address),{pathToProp:f});le.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(N({},Ce),{value:a.getValueByPointer(s)}))})}});let V=L,H=Ku.prism.sub("lcr",()=>{let le=(0,Ku.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[V]),Ce=(0,Ku.val)(a.sheet.getSequence().positionPrism);return bee(a,le&&{data:le,id:V,sheetObject:a},Ce)},[V]),K;I.beingScrubbed?K="Sequenced_OnKeyframe_BeingScrubbed":H.cur?K="Sequenced_OnKeyframe":((d=H.prev)==null?void 0:d.kf.connectedRight)===!0?K="Sequenced_BeingInterpolated":K="Sequened_NotBeingInterpolated";let Z=()=>{H.cur?ue().transaction(le=>{le.unset(s)}):ue().transaction(le=>{le.set(s,I.value)})},re={cur:H.cur?{type:"on",itemKey:H.cur.itemKey,toggle:Z}:{type:"off",toggle:Z},prev:H.prev!==void 0?{itemKey:H.prev.itemKey,position:H.prev.kf.position,jump:()=>{a.sheet.getSequence().position=H.prev.kf.position}}:void 0,next:H.next!==void 0?{itemKey:H.next.itemKey,position:H.next.kf.position,jump:()=>{a.sheet.getSequence().position=H.next.kf.position}}:void 0},ne=Fb.default.createElement(Pz,N({},re));return z(N({},I),{type:"Sequenced",shade:K,nearbyKeyframes:H,controlIndicators:ne})}}let R=(0,Ku.val)(a.template.getStaticValues()),A=vf(R,f);return typeof A<"u"&&C.push({label:"Reset to default",callback:()=>{ue().transaction(({unset:F})=>{F(s)})}}),O&&C.push({label:"Sequence",callback:()=>{ue().transaction(({stateEditors:F})=>{let L=z(N({},a.address),{pathToProp:f});F.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(L,l)})}}),typeof A<"u"?z(N({},I),{type:"Static",shade:I.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Fb.default.createElement(TE,{hasStaticOverride:!0,obj:a,pathToProp:f,propConfig:l})}):z(N({},I),{type:"Default",shade:"Default",controlIndicators:Fb.default.createElement(TE,{hasStaticOverride:!0,obj:a,pathToProp:f,propConfig:l})})})}function _2e(s,a,l){if(CR.has(s))return CR.get(s);{let d=b2e(s,a,l);return CR.set(s,d),d}}function Rz(s,a,l){let d=_2e(s,a,l);return eb(d)}var Fb,Ku,CR,Dz=P(()=>{Wp(),Fb=q(Oe()),Ku=Ft,Te(),gR(),yn(),mf(),mee(),wee(),wR(),CR=new WeakMap});function w2e({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:d}){let f=Rz(a,l,s);return ho.default.createElement(z4,{editingTools:f,propConfig:s,value:f.value})}function x2e({pointerToProp:s,obj:a,propConfig:l,visualIndentation:d}){var f;let g=(f=l.label)!=null?f:eh((0,AE.getPointerParts)(s).path),b=Object.entries(l.props),_=b.filter(([Z,re])=>ed(re)),S=b.filter(([Z,re])=>!ed(re)),[C,I]=br(null),O=l2e(s,a,l),[R]=ua(I,{menuItems:O.contextMenuItems}),A=_.length>0,F=(0,ho.useMemo)(()=>SR.getIsPropHighlightedD(z(N({},a.address),{pathToProp:(0,AE.getPointerParts)(s).path})),[s]),L="".concat(a.address.projectId,",").concat(a.address.sheetId,",").concat(a.address.sheetInstanceId,",").concat(a.address.objectKey,",").concat((0,AE.getPointerParts)(s).path.join()),V=Yee(l);(0,ho.useLayoutEffect)(()=>{PR.has(L)||PR.set(L,new AE.Atom(V))},[L,l]);let H=PR.get(L),K=Yn(()=>H?(0,Lee.val)(H.pointer):V,[H]);return ho.default.createElement(Fee,null,R,ho.default.createElement(Oz,{style:{"--depth":d-1}},ho.default.createElement(zee,{isVectorProp:V},ho.default.createElement(jee,null,O.controlIndicators),ho.default.createElement(Gee,{isHighlighted:F,ref:C},ho.default.createElement("span",null,g||"Props")),ho.default.createElement($ee,{isCollapsed:K,isVector:V,onClick:()=>{H==null||H.set(!H.get())}},ho.default.createElement(nZ,null))),V&&K&&ho.default.createElement(Qee,null,[...b].map(([Z,re])=>ho.default.createElement(w2e,{key:"prop-"+Z,propConfig:re,pointerToProp:s[Z],obj:a})))),!K&&ho.default.createElement(qee,{style:{"--depth":d},depth:d,lastSubIsComposite:A},[...S,..._].map(([Z,re])=>ho.default.createElement(Nz,{key:"prop-"+Z,propConfig:re,pointerToProp:s[Z],obj:a,visualIndentation:d+1}))))}var AE,ho,Lee,Nee,Fee,Bee,Oz,Uee,zee,Vee,jee,Hee,Gee,Wee,$ee,Kee,Xee,qee,Yee,Zee,Qee,Jee,PR,S2e=P(()=>{mf(),AE=Ft,Ky(),ol(),ho=q(Oe()),ze(),xJ(),ev(),Ar(),kr(),pte(),ca(),c2e(),Az(),Oee(),$Y(),Dz(),yn(),Lee=Ft,Rb(),cR(),Fee=ae.div(Nee||(Nee=W([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),Cr),Oz=ae.div(Bee||(Bee=W([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),zee=ae.div(Uee||(Uee=W([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),yz,({isVectorProp:s})=>s?"width: calc(100% - var(--right-width))":""),jee=ae.div(Vee||(Vee=W([`
  flexshrink: 0;
`]))),Gee=Iz(ae.div(Hee||(Hee=W([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>gf)),$ee=ae.span(Wee||(Wee=W([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>!s.isVector&&s.isCollapsed||s.isVector&&!s.isCollapsed?"visible":"hidden",Oz,s=>s.isCollapsed?15:75),Kee=ju(.05,"#282b2f"),qee=ae.div(Xee||(Xee=W([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:s})=>qS(s*.03,Kee),s=>s.lastSubIsComposite?0:"4px"),Yee=gE(s=>{let a=Object.entries(s.props);return a.length<=3&&a.every(([l,d])=>d.type==="number"&&["x","y","z"].includes(l))}),Qee=ae.div(Zee||(Zee=W([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),Jee=ho.default.memo(x2e),PR=new Map});function E2e({isHighlighted:s}){return s==="self"?"#1857a4":s==="descendent"?"#0a2f5c":"initial"}var C2e=P(()=>{});function P2e({propConfig:s,pointerToProp:a,editingTools:l,children:d,isPropHighlightedD:f}){var g;let b=(g=s.label)!=null?g:eh((0,Lz.getPointerParts)(a).path),[_,S]=br(null),[C]=ua(S,{menuItems:l.contextMenuItems});return Bb.default.createElement(tte,{isHighlighted:f},C,Bb.default.createElement(rte,null,Bb.default.createElement(ate,null,l.controlIndicators),Bb.default.createElement(ste,{isHighlighted:f,ref:_,title:["obj","props",...(0,Lz.getPointerParts)(a).path].join(".")},b)),Bb.default.createElement(ute,null,d))}var Lz,Bb,ete,tte,nte,rte,ite,ste,ote,ate,lte,ute,T2e=P(()=>{Lz=Ft,ca(),kr(),ui(),Bb=q(Oe()),ze(),Ar(),ev(),Oee(),xJ(),C2e(),tte=Iz(ae.div(ete||(ete=W([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),Cr,E2e)),rte=ae.div(nte||(nte=W([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),yz),ste=Iz(ae.div(ite||(ite=W([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),gf)),ate=ae.div(ote||(ote=W([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),ute=ae.div(lte||(lte=W([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function M2e({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:d}){let f=Rz(a,l,s),g=(0,IE.useMemo)(()=>SR.getIsPropHighlightedD(z(N({},l.address),{pathToProp:(0,cte.getPointerParts)(a).path})),[a]);return IE.default.createElement(P2e,{editingTools:f,propConfig:s,pointerToProp:a,isPropHighlightedD:g},IE.default.createElement(d,{editingTools:f,propConfig:s,value:f.value}))}var IE,cte,dte,k2e=P(()=>{IE=q(Oe()),Dz(),T2e(),cte=Ft,Az(),dte=IE.default.memo(M2e)}),RE,hte,Nz,pte=P(()=>{RE=q(Oe()),wJ(),S2e(),k2e(),hte=({propConfig:s,visualIndentation:a,pointerToProp:l,obj:d})=>{if(s.type==="compound")return RE.default.createElement(Jee,{obj:d,visualIndentation:a,pointerToProp:l,propConfig:s});if(s.type==="enum")return RE.default.createElement(RE.default.Fragment,null);{let f=gz[s.type];return RE.default.createElement(dte,{SimpleEditorComponent:f,obj:d,visualIndentation:a,pointerToProp:l,propConfig:s})}},Nz=hte});function fte(s){return TR.has(s)||TR.set(s,(mte++).toString()),TR.get(s)}var TR,mte,gte=P(()=>{TR=new WeakMap,mte=0}),Ub,vte,yte,bte,_te,wte,xte,A2e=P(()=>{Ub=q(Oe()),pte(),yn(),gte(),ze(),yte=ae.div(vte||(vte=W([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),_te=ae.button(bte||(bte=W([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),wte=({objects:s})=>{let a=s[0],l=nr(a.template.configPointer),d=nr(a.template._temp_actionsPointer);return Ub.default.createElement(Ub.default.Fragment,null,Ub.default.createElement(Nz,{key:fte(a),obj:a,pointerToProp:a.propsP,propConfig:l,visualIndentation:1}),Ub.default.createElement(yte,null,d&&Object.entries(d).map(([f,g])=>Ub.default.createElement(_te,{key:f,onClick:()=>{g(a.publicApi)}},f))))},xte=wte}),Ste,Ete,MR,Cte=P(()=>{ze(),Ete=ae.button(Ste||(Ste=W([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),s=>s.disabled?"none":"pointer",s=>s.disabled?.4:1),MR=Ete}),I2e=P(()=>{}),Pte,R2e=P(()=>{I2e(),Pte=(s=21)=>{let a="",l=crypto.getRandomValues(new Uint8Array(s));for(;s--;){let d=l[s]&63;d<36?a+=d.toString(36):d<62?a+=(d-26).toString(36).toUpperCase():d<63?a+="_":a+="-"}return a}});function Tte(){return Pte(16)}var Mte=P(()=>{R2e()}),kte,bh,Fz,Ate,Ite,Rte,Dte,Ote=P(()=>{kte=Ft,kr(),bh=q(Oe()),Fz=(0,bh.createContext)(null),Ate=0,Ite=()=>{let s=(0,bh.useMemo)(()=>Ate++,[]),{cur:a,set:l}=(0,bh.useContext)(Fz),[d,f]=br(!1),g=(0,bh.useCallback)((b,_)=>{l(b?s:-1,_)},[]);return(0,bh.useEffect)(()=>a.onStale(()=>{let b=a.getValue()===s;d.current!==b&&(d.current=b)}),[a,s]),[f,g]},Rte=({children:s})=>{let a=(0,bh.useMemo)(()=>new kte.Atom(-1),[]),l=a.prism,d=(0,bh.useMemo)(()=>{let f;return(g,b)=>{let _=f!==void 0;f!==void 0&&(clearTimeout(f),f=void 0),b===0||_?a.set(g):f=setTimeout(()=>{a.set(g),f=void 0},b)}},[]);return bh.default.createElement(Fz.Provider,{value:{cur:l,set:d}},s)},Dte=Rte});function zb(s,a){let l=s.enabled!==!1,[d,f]=Ite(),[g,b]=br(null);(0,Nte.useEffect)(()=>{if(!l)return;let S=g.current;if(!S)return;let C=()=>{var O;return f(!0,(O=s.enterDelay)!=null?O:400)},I=()=>{var O;return f(!1,(O=s.exitDelay)!=null?O:200)};return S.addEventListener("mouseenter",C),S.addEventListener("mouseleave",I),()=>{S.removeEventListener("mouseenter",C),S.removeEventListener("mouseleave",I)}},[g,l,s.enterDelay,s.exitDelay]);let _=(0,Lte.useContext)(xb);return[l&&d&&b?(0,Fte.createPortal)(kR.default.createElement(cz,{children:a,target:b,onClickOutside:Hu,verticalPlacement:s.verticalPlacement,verticalGap:s.verticalGap}),_):kR.default.createElement(kR.default.Fragment,null),g,d]}var Lte,Nte,kR,Fte,DE=P(()=>{kr(),Lte=q(Oe()),Nte=q(Oe()),kR=q(Oe()),SQ(),Fte=q(Ou()),Ote(),Zg(),Cb()}),Bte,Ute,Vb,AR=P(()=>{ze(),Qc(),Ute=ae(Zc)(Bte||(Bte=W([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),Vb=Ute}),td,zte,Vte,jte,Hte,Gte,Wte,$te,Kte,Xte,D2e=P(()=>{yn(),Te(),td=q(Oe()),ze(),Mte(),DE(),AR(),Cte(),Vte=ae.div(zte||(zte=W([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),Hte=ae.div(jte||(jte=W([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),Wte=ae.div(Gte||(Gte=W([`
  display: flex;
  gap: 8px;
`]))),$te=({projectId:s})=>{let a=nr(ue().atomP.ephemeral.coreByProject[s].loadingState);return a&&a.type==="browserStateIsNotBasedOnDiskState"?td.default.createElement(Kte,{loadingState:a,projectId:s}):null},Kte=({projectId:s,loadingState:a})=>{let l=()=>{ue().transaction(({drafts:S,stateEditors:C})=>{C.coreByProject.historic.revisionHistory.add({projectId:s,revision:a.onDiskState.revisionHistory[0]}),C.coreByProject.historic.revisionHistory.add({projectId:s,revision:Tte()}),S.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},d=()=>{ue().transaction(({drafts:S})=>{S.historic.coreByProject[s]=a.onDiskState,S.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},[f,g]=zb({},()=>td.default.createElement(Vb,null,"The browser's state will override the disk state.")),[b,_]=zb({},()=>td.default.createElement(Vb,null,"The disk's state will override the browser's state."));return td.default.createElement(Vte,null,td.default.createElement(Hte,null,"Browser state is not based on disk state."," ",td.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),td.default.createElement(Wte,null,f,td.default.createElement(MR,{onClick:l,ref:g},"Use browser's state"),b,td.default.createElement(MR,{onClick:d,ref:_},"Use disk state")))},Xte=$te}),O2e=$((s,a)=>{(function(l){typeof s=="object"&&typeof a<"u"?a.exports=l():(typeof window<"u"?window:typeof Gi<"u"?Gi:typeof self<"u"?self:this).JSZip=l()})(function(){return function l(d,f,g){function b(C,I){if(!f[C]){if(!d[C]){var O=typeof z3=="function"&&z3;if(!I&&O)return O(C,!0);if(_)return _(C,!0);var R=new Error("Cannot find module '"+C+"'");throw R.code="MODULE_NOT_FOUND",R}var A=f[C]={exports:{}};d[C][0].call(A.exports,function(F){var L=d[C][1][F];return b(L||F)},A,A.exports,l,d,f,g)}return f[C].exports}for(var _=typeof z3=="function"&&z3,S=0;S<g.length;S++)b(g[S]);return b}({1:[function(l,d,f){var g=l("./utils"),b=l("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(S){for(var C,I,O,R,A,F,L,V=[],H=0,K=S.length,Z=K,re=g.getTypeOf(S)!=="string";H<S.length;)Z=K-H,O=re?(C=S[H++],I=H<K?S[H++]:0,H<K?S[H++]:0):(C=S.charCodeAt(H++),I=H<K?S.charCodeAt(H++):0,H<K?S.charCodeAt(H++):0),R=C>>2,A=(3&C)<<4|I>>4,F=1<Z?(15&I)<<2|O>>6:64,L=2<Z?63&O:64,V.push(_.charAt(R)+_.charAt(A)+_.charAt(F)+_.charAt(L));return V.join("")},f.decode=function(S){var C,I,O,R,A,F,L=0,V=0,H="data:";if(S.substr(0,H.length)===H)throw new Error("Invalid base64 input, it looks like a data url.");var K,Z=3*(S=S.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(S.charAt(S.length-1)===_.charAt(64)&&Z--,S.charAt(S.length-2)===_.charAt(64)&&Z--,Z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(K=b.uint8array?new Uint8Array(0|Z):new Array(0|Z);L<S.length;)C=_.indexOf(S.charAt(L++))<<2|(R=_.indexOf(S.charAt(L++)))>>4,I=(15&R)<<4|(A=_.indexOf(S.charAt(L++)))>>2,O=(3&A)<<6|(F=_.indexOf(S.charAt(L++))),K[V++]=C,A!==64&&(K[V++]=I),F!==64&&(K[V++]=O);return K}},{"./support":30,"./utils":32}],2:[function(l,d,f){var g=l("./external"),b=l("./stream/DataWorker"),_=l("./stream/Crc32Probe"),S=l("./stream/DataLengthProbe");function C(I,O,R,A,F){this.compressedSize=I,this.uncompressedSize=O,this.crc32=R,this.compression=A,this.compressedContent=F}C.prototype={getContentWorker:function(){var I=new b(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new S("data_length")),O=this;return I.on("end",function(){if(this.streamInfo.data_length!==O.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new b(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},C.createWorkerFrom=function(I,O,R){return I.pipe(new _).pipe(new S("uncompressedSize")).pipe(O.compressWorker(R)).pipe(new S("compressedSize")).withStreamInfo("compression",O)},d.exports=C},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(l,d,f){var g=l("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},f.DEFLATE=l("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(l,d,f){var g=l("./utils"),b=function(){for(var _,S=[],C=0;C<256;C++){_=C;for(var I=0;I<8;I++)_=1&_?3988292384^_>>>1:_>>>1;S[C]=_}return S}();d.exports=function(_,S){return _!==void 0&&_.length?g.getTypeOf(_)!=="string"?function(C,I,O,R){var A=b,F=R+O;C^=-1;for(var L=R;L<F;L++)C=C>>>8^A[255&(C^I[L])];return-1^C}(0|S,_,_.length,0):function(C,I,O,R){var A=b,F=R+O;C^=-1;for(var L=R;L<F;L++)C=C>>>8^A[255&(C^I.charCodeAt(L))];return-1^C}(0|S,_,_.length,0):0}},{"./utils":32}],5:[function(l,d,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(l,d,f){var g=null;g=typeof Promise<"u"?Promise:l("lie"),d.exports={Promise:g}},{lie:37}],7:[function(l,d,f){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=l("pako"),_=l("./utils"),S=l("./stream/GenericWorker"),C=g?"uint8array":"array";function I(O,R){S.call(this,"FlateWorker/"+O),this._pako=null,this._pakoAction=O,this._pakoOptions=R,this.meta={}}f.magic="\b\0",_.inherits(I,S),I.prototype.processChunk=function(O){this.meta=O.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(C,O.data),!1)},I.prototype.flush=function(){S.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var O=this;this._pako.onData=function(R){O.push({data:R,meta:O.meta})}},f.compressWorker=function(O){return new I("Deflate",O)},f.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(l,d,f){function g(A,F){var L,V="";for(L=0;L<F;L++)V+=String.fromCharCode(255&A),A>>>=8;return V}function b(A,F,L,V,H,K){var Z,re,ne=A.file,le=A.compression,Ce=K!==C.utf8encode,ve=_.transformTo("string",K(ne.name)),we=_.transformTo("string",C.utf8encode(ne.name)),De=ne.comment,rt=_.transformTo("string",K(De)),ce=_.transformTo("string",C.utf8encode(De)),Re=we.length!==ne.name.length,J=ce.length!==De.length,Ve="",Ot="",Me="",ke=ne.dir,He=ne.date,xt={crc32:0,compressedSize:0,uncompressedSize:0};F&&!L||(xt.crc32=A.crc32,xt.compressedSize=A.compressedSize,xt.uncompressedSize=A.uncompressedSize);var de=0;F&&(de|=8),Ce||!Re&&!J||(de|=2048);var ge=0,Je=0;ke&&(ge|=16),H==="UNIX"?(Je=798,ge|=function(ot,We){var nn=ot;return ot||(nn=We?16893:33204),(65535&nn)<<16}(ne.unixPermissions,ke)):(Je=20,ge|=function(ot){return 63&(ot||0)}(ne.dosPermissions)),Z=He.getUTCHours(),Z<<=6,Z|=He.getUTCMinutes(),Z<<=5,Z|=He.getUTCSeconds()/2,re=He.getUTCFullYear()-1980,re<<=4,re|=He.getUTCMonth()+1,re<<=5,re|=He.getUTCDate(),Re&&(Ot=g(1,1)+g(I(ve),4)+we,Ve+="up"+g(Ot.length,2)+Ot),J&&(Me=g(1,1)+g(I(rt),4)+ce,Ve+="uc"+g(Me.length,2)+Me);var nt="";return nt+=`
\0`,nt+=g(de,2),nt+=le.magic,nt+=g(Z,2),nt+=g(re,2),nt+=g(xt.crc32,4),nt+=g(xt.compressedSize,4),nt+=g(xt.uncompressedSize,4),nt+=g(ve.length,2),nt+=g(Ve.length,2),{fileRecord:O.LOCAL_FILE_HEADER+nt+ve+Ve,dirRecord:O.CENTRAL_FILE_HEADER+g(Je,2)+nt+g(rt.length,2)+"\0\0\0\0"+g(ge,4)+g(V,4)+ve+Ve+rt}}var _=l("../utils"),S=l("../stream/GenericWorker"),C=l("../utf8"),I=l("../crc32"),O=l("../signature");function R(A,F,L,V){S.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=F,this.zipPlatform=L,this.encodeFileName=V,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(R,S),R.prototype.push=function(A){var F=A.meta.percent||0,L=this.entriesCount,V=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,S.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:L?(F+100*(L-V-1))/L:100}}))},R.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var F=this.streamFiles&&!A.file.dir;if(F){var L=b(A,F,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:L.fileRecord,meta:{percent:0}})}else this.accumulate=!0},R.prototype.closedSource=function(A){this.accumulate=!1;var F=this.streamFiles&&!A.file.dir,L=b(A,F,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(L.dirRecord),F)this.push({data:function(V){return O.DATA_DESCRIPTOR+g(V.crc32,4)+g(V.compressedSize,4)+g(V.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:L.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},R.prototype.flush=function(){for(var A=this.bytesWritten,F=0;F<this.dirRecords.length;F++)this.push({data:this.dirRecords[F],meta:{percent:100}});var L=this.bytesWritten-A,V=function(H,K,Z,re,ne){var le=_.transformTo("string",ne(re));return O.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(H,2)+g(H,2)+g(K,4)+g(Z,4)+g(le.length,2)+le}(this.dirRecords.length,L,A,this.zipComment,this.encodeFileName);this.push({data:V,meta:{percent:100}})},R.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},R.prototype.registerPrevious=function(A){this._sources.push(A);var F=this;return A.on("data",function(L){F.processChunk(L)}),A.on("end",function(){F.closedSource(F.previous.streamInfo),F._sources.length?F.prepareNextSource():F.end()}),A.on("error",function(L){F.error(L)}),this},R.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},R.prototype.error=function(A){var F=this._sources;if(!S.prototype.error.call(this,A))return!1;for(var L=0;L<F.length;L++)try{F[L].error(A)}catch{}return!0},R.prototype.lock=function(){S.prototype.lock.call(this);for(var A=this._sources,F=0;F<A.length;F++)A[F].lock()},d.exports=R},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(l,d,f){var g=l("../compressions"),b=l("./ZipFileWorker");f.generateWorker=function(_,S,C){var I=new b(S.streamFiles,C,S.platform,S.encodeFileName),O=0;try{_.forEach(function(R,A){O++;var F=function(K,Z){var re=K||Z,ne=g[re];if(!ne)throw new Error(re+" is not a valid compression method !");return ne}(A.options.compression,S.compression),L=A.options.compressionOptions||S.compressionOptions||{},V=A.dir,H=A.date;A._compressWorker(F,L).withStreamInfo("file",{name:R,dir:V,date:H,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(I)}),I.entriesCount=O}catch(R){I.error(R)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(l,d,f){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new g;for(var _ in this)typeof this[_]!="function"&&(b[_]=this[_]);return b}}(g.prototype=l("./object")).loadAsync=l("./load"),g.support=l("./support"),g.defaults=l("./defaults"),g.version="3.10.1",g.loadAsync=function(b,_){return new g().loadAsync(b,_)},g.external=l("./external"),d.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(l,d,f){var g=l("./utils"),b=l("./external"),_=l("./utf8"),S=l("./zipEntries"),C=l("./stream/Crc32Probe"),I=l("./nodejsUtils");function O(R){return new b.Promise(function(A,F){var L=R.decompressed.getContentWorker().pipe(new C);L.on("error",function(V){F(V)}).on("end",function(){L.streamInfo.crc32!==R.decompressed.crc32?F(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}d.exports=function(R,A){var F=this;return A=g.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),I.isNode&&I.isStream(R)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",R,!0,A.optimizedBinaryString,A.base64).then(function(L){var V=new S(A);return V.load(L),V}).then(function(L){var V=[b.Promise.resolve(L)],H=L.files;if(A.checkCRC32)for(var K=0;K<H.length;K++)V.push(O(H[K]));return b.Promise.all(V)}).then(function(L){for(var V=L.shift(),H=V.files,K=0;K<H.length;K++){var Z=H[K],re=Z.fileNameStr,ne=g.resolve(Z.fileNameStr);F.file(ne,Z.decompressed,{binary:!0,optimizedBinaryString:!0,date:Z.date,dir:Z.dir,comment:Z.fileCommentStr.length?Z.fileCommentStr:null,unixPermissions:Z.unixPermissions,dosPermissions:Z.dosPermissions,createFolders:A.createFolders}),Z.dir||(F.file(ne).unsafeOriginalName=re)}return V.zipComment.length&&(F.comment=V.zipComment),F})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(l,d,f){var g=l("../utils"),b=l("../stream/GenericWorker");function _(S,C){b.call(this,"Nodejs stream input adapter for "+S),this._upstreamEnded=!1,this._bindStream(C)}g.inherits(_,b),_.prototype._bindStream=function(S){var C=this;(this._stream=S).pause(),S.on("data",function(I){C.push({data:I,meta:{percent:0}})}).on("error",function(I){C.isPaused?this.generatedError=I:C.error(I)}).on("end",function(){C.isPaused?C._upstreamEnded=!0:C.end()})},_.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(l,d,f){var g=l("readable-stream").Readable;function b(_,S,C){g.call(this,S),this._helper=_;var I=this;_.on("data",function(O,R){I.push(O)||I._helper.pause(),C&&C(R)}).on("error",function(O){I.emit("error",O)}).on("end",function(){I.push(null)})}l("../utils").inherits(b,g),b.prototype._read=function(){this._helper.resume()},d.exports=b},{"../utils":32,"readable-stream":16}],14:[function(l,d,f){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,b);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,b)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var b=new Buffer(g);return b.fill(0),b},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(l,d,f){function g(ne,le,Ce){var ve,we=_.getTypeOf(le),De=_.extend(Ce||{},I);De.date=De.date||new Date,De.compression!==null&&(De.compression=De.compression.toUpperCase()),typeof De.unixPermissions=="string"&&(De.unixPermissions=parseInt(De.unixPermissions,8)),De.unixPermissions&&16384&De.unixPermissions&&(De.dir=!0),De.dosPermissions&&16&De.dosPermissions&&(De.dir=!0),De.dir&&(ne=H(ne)),De.createFolders&&(ve=V(ne))&&K.call(this,ve,!0);var rt=we==="string"&&De.binary===!1&&De.base64===!1;Ce&&Ce.binary!==void 0||(De.binary=!rt),(le instanceof O&&le.uncompressedSize===0||De.dir||!le||le.length===0)&&(De.base64=!1,De.binary=!0,le="",De.compression="STORE",we="string");var ce=null;ce=le instanceof O||le instanceof S?le:F.isNode&&F.isStream(le)?new L(ne,le):_.prepareContent(ne,le,De.binary,De.optimizedBinaryString,De.base64);var Re=new R(ne,ce,De);this.files[ne]=Re}var b=l("./utf8"),_=l("./utils"),S=l("./stream/GenericWorker"),C=l("./stream/StreamHelper"),I=l("./defaults"),O=l("./compressedObject"),R=l("./zipObject"),A=l("./generate"),F=l("./nodejsUtils"),L=l("./nodejs/NodejsStreamInputAdapter"),V=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var le=ne.lastIndexOf("/");return 0<le?ne.substring(0,le):""},H=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},K=function(ne,le){return le=le!==void 0?le:I.createFolders,ne=H(ne),this.files[ne]||g.call(this,ne,null,{dir:!0,createFolders:le}),this.files[ne]};function Z(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var le,Ce,ve;for(le in this.files)ve=this.files[le],(Ce=le.slice(this.root.length,le.length))&&le.slice(0,this.root.length)===this.root&&ne(Ce,ve)},filter:function(ne){var le=[];return this.forEach(function(Ce,ve){ne(Ce,ve)&&le.push(ve)}),le},file:function(ne,le,Ce){if(arguments.length!==1)return ne=this.root+ne,g.call(this,ne,le,Ce),this;if(Z(ne)){var ve=ne;return this.filter(function(De,rt){return!rt.dir&&ve.test(De)})}var we=this.files[this.root+ne];return we&&!we.dir?we:null},folder:function(ne){if(!ne)return this;if(Z(ne))return this.filter(function(we,De){return De.dir&&ne.test(we)});var le=this.root+ne,Ce=K.call(this,le),ve=this.clone();return ve.root=Ce.name,ve},remove:function(ne){ne=this.root+ne;var le=this.files[ne];if(le||(ne.slice(-1)!=="/"&&(ne+="/"),le=this.files[ne]),le&&!le.dir)delete this.files[ne];else for(var Ce=this.filter(function(we,De){return De.name.slice(0,ne.length)===ne}),ve=0;ve<Ce.length;ve++)delete this.files[Ce[ve].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var le,Ce={};try{if((Ce=_.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=Ce.type.toLowerCase(),Ce.compression=Ce.compression.toUpperCase(),Ce.type==="binarystring"&&(Ce.type="string"),!Ce.type)throw new Error("No output type specified.");_.checkSupport(Ce.type),Ce.platform!=="darwin"&&Ce.platform!=="freebsd"&&Ce.platform!=="linux"&&Ce.platform!=="sunos"||(Ce.platform="UNIX"),Ce.platform==="win32"&&(Ce.platform="DOS");var ve=Ce.comment||this.comment||"";le=A.generateWorker(this,Ce,ve)}catch(we){(le=new S("error")).error(we)}return new C(le,Ce.type||"string",Ce.mimeType)},generateAsync:function(ne,le){return this.generateInternalStream(ne).accumulate(le)},generateNodeStream:function(ne,le){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(le)}};d.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(l,d,f){d.exports=l("stream")},{stream:void 0}],17:[function(l,d,f){var g=l("./DataReader");function b(_){g.call(this,_);for(var S=0;S<this.data.length;S++)_[S]=255&_[S]}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data[this.zero+_]},b.prototype.lastIndexOfSignature=function(_){for(var S=_.charCodeAt(0),C=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),R=this.length-4;0<=R;--R)if(this.data[R]===S&&this.data[R+1]===C&&this.data[R+2]===I&&this.data[R+3]===O)return R-this.zero;return-1},b.prototype.readAndCheckSignature=function(_){var S=_.charCodeAt(0),C=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),R=this.readData(4);return S===R[0]&&C===R[1]&&I===R[2]&&O===R[3]},b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./DataReader":18}],18:[function(l,d,f){var g=l("../utils");function b(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var S,C=0;for(this.checkOffset(_),S=this.index+_-1;S>=this.index;S--)C=(C<<8)+this.byteAt(S);return this.index+=_,C},readString:function(_){return g.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},d.exports=b},{"../utils":32}],19:[function(l,d,f){var g=l("./Uint8ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(l,d,f){var g=l("./DataReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},b.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},b.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},b.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./DataReader":18}],21:[function(l,d,f){var g=l("./ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var S=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(l,d,f){var g=l("../utils"),b=l("../support"),_=l("./ArrayReader"),S=l("./StringReader"),C=l("./NodeBufferReader"),I=l("./Uint8ArrayReader");d.exports=function(O){var R=g.getTypeOf(O);return g.checkSupport(R),R!=="string"||b.uint8array?R==="nodebuffer"?new C(O):b.uint8array?new I(g.transformTo("uint8array",O)):new _(g.transformTo("array",O)):new S(O)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(l,d,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(l,d,f){var g=l("./GenericWorker"),b=l("../utils");function _(S){g.call(this,"ConvertWorker to "+S),this.destType=S}b.inherits(_,g),_.prototype.processChunk=function(S){this.push({data:b.transformTo(this.destType,S.data),meta:S.meta})},d.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(l,d,f){var g=l("./GenericWorker"),b=l("../crc32");function _(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l("../utils").inherits(_,g),_.prototype.processChunk=function(S){this.streamInfo.crc32=b(S.data,this.streamInfo.crc32||0),this.push(S)},d.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(l,d,f){var g=l("../utils"),b=l("./GenericWorker");function _(S){b.call(this,"DataLengthProbe for "+S),this.propName=S,this.withStreamInfo(S,0)}g.inherits(_,b),_.prototype.processChunk=function(S){if(S){var C=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=C+S.data.length}b.prototype.processChunk.call(this,S)},d.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(l,d,f){var g=l("../utils"),b=l("./GenericWorker");function _(S){b.call(this,"DataWorker");var C=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,S.then(function(I){C.dataIsReady=!0,C.data=I,C.max=I&&I.length||0,C.type=g.getTypeOf(I),C.isPaused||C._tickAndRepeat()},function(I){C.error(I)})}g.inherits(_,b),_.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var S=null,C=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":S=this.data.substring(this.index,C);break;case"uint8array":S=this.data.subarray(this.index,C);break;case"array":case"nodebuffer":S=this.data.slice(this.index,C)}return this.index=C,this.push({data:S,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(l,d,f){function g(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,_){return this._listeners[b].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,_){if(this._listeners[b])for(var S=0;S<this._listeners[b].length;S++)this._listeners[b][S].call(this,_)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var _=this;return b.on("data",function(S){_.processChunk(S)}),b.on("end",function(){_.end()}),b.on("error",function(S){_.error(S)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,_){return this.extraStreamInfo[b]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},d.exports=g},{}],29:[function(l,d,f){var g=l("../utils"),b=l("./ConvertWorker"),_=l("./GenericWorker"),S=l("../base64"),C=l("../support"),I=l("../external"),O=null;if(C.nodestream)try{O=l("../nodejs/NodejsStreamOutputAdapter")}catch{}function R(F,L){return new I.Promise(function(V,H){var K=[],Z=F._internalType,re=F._outputType,ne=F._mimeType;F.on("data",function(le,Ce){K.push(le),L&&L(Ce)}).on("error",function(le){K=[],H(le)}).on("end",function(){try{var le=function(Ce,ve,we){switch(Ce){case"blob":return g.newBlob(g.transformTo("arraybuffer",ve),we);case"base64":return S.encode(ve);default:return g.transformTo(Ce,ve)}}(re,function(Ce,ve){var we,De=0,rt=null,ce=0;for(we=0;we<ve.length;we++)ce+=ve[we].length;switch(Ce){case"string":return ve.join("");case"array":return Array.prototype.concat.apply([],ve);case"uint8array":for(rt=new Uint8Array(ce),we=0;we<ve.length;we++)rt.set(ve[we],De),De+=ve[we].length;return rt;case"nodebuffer":return Buffer.concat(ve);default:throw new Error("concat : unsupported type '"+Ce+"'")}}(Z,K),ne);V(le)}catch(Ce){H(Ce)}K=[]}).resume()})}function A(F,L,V){var H=L;switch(L){case"blob":case"arraybuffer":H="uint8array";break;case"base64":H="string"}try{this._internalType=H,this._outputType=L,this._mimeType=V,g.checkSupport(H),this._worker=F.pipe(new b(H)),F.lock()}catch(K){this._worker=new _("error"),this._worker.error(K)}}A.prototype={accumulate:function(F){return R(this,F)},on:function(F,L){var V=this;return F==="data"?this._worker.on(F,function(H){L.call(V,H.data,H.meta)}):this._worker.on(F,function(){g.delay(L,arguments,V)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(F){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new O(this,{objectMode:this._outputType!=="nodebuffer"},F)}},d.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(l,d,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=typeof Buffer<"u",f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var g=new ArrayBuffer(0);try{f.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(g),f.blob=b.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!l("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(l,d,f){for(var g=l("./utils"),b=l("./support"),_=l("./nodejsUtils"),S=l("./stream/GenericWorker"),C=new Array(256),I=0;I<256;I++)C[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;C[254]=C[254]=1;function O(){S.call(this,"utf-8 decode"),this.leftOver=null}function R(){S.call(this,"utf-8 encode")}f.utf8encode=function(A){return b.nodebuffer?_.newBufferFrom(A,"utf-8"):function(F){var L,V,H,K,Z,re=F.length,ne=0;for(K=0;K<re;K++)(64512&(V=F.charCodeAt(K)))==55296&&K+1<re&&(64512&(H=F.charCodeAt(K+1)))==56320&&(V=65536+(V-55296<<10)+(H-56320),K++),ne+=V<128?1:V<2048?2:V<65536?3:4;for(L=b.uint8array?new Uint8Array(ne):new Array(ne),K=Z=0;Z<ne;K++)(64512&(V=F.charCodeAt(K)))==55296&&K+1<re&&(64512&(H=F.charCodeAt(K+1)))==56320&&(V=65536+(V-55296<<10)+(H-56320),K++),V<128?L[Z++]=V:(V<2048?L[Z++]=192|V>>>6:(V<65536?L[Z++]=224|V>>>12:(L[Z++]=240|V>>>18,L[Z++]=128|V>>>12&63),L[Z++]=128|V>>>6&63),L[Z++]=128|63&V);return L}(A)},f.utf8decode=function(A){return b.nodebuffer?g.transformTo("nodebuffer",A).toString("utf-8"):function(F){var L,V,H,K,Z=F.length,re=new Array(2*Z);for(L=V=0;L<Z;)if((H=F[L++])<128)re[V++]=H;else if(4<(K=C[H]))re[V++]=65533,L+=K-1;else{for(H&=K===2?31:K===3?15:7;1<K&&L<Z;)H=H<<6|63&F[L++],K--;1<K?re[V++]=65533:H<65536?re[V++]=H:(H-=65536,re[V++]=55296|H>>10&1023,re[V++]=56320|1023&H)}return re.length!==V&&(re.subarray?re=re.subarray(0,V):re.length=V),g.applyFromCharCode(re)}(A=g.transformTo(b.uint8array?"uint8array":"array",A))},g.inherits(O,S),O.prototype.processChunk=function(A){var F=g.transformTo(b.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var L=F;(F=new Uint8Array(L.length+this.leftOver.length)).set(this.leftOver,0),F.set(L,this.leftOver.length)}else F=this.leftOver.concat(F);this.leftOver=null}var V=function(K,Z){var re;for((Z=Z||K.length)>K.length&&(Z=K.length),re=Z-1;0<=re&&(192&K[re])==128;)re--;return re<0||re===0?Z:re+C[K[re]]>Z?re:Z}(F),H=F;V!==F.length&&(b.uint8array?(H=F.subarray(0,V),this.leftOver=F.subarray(V,F.length)):(H=F.slice(0,V),this.leftOver=F.slice(V,F.length))),this.push({data:f.utf8decode(H),meta:A.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=O,g.inherits(R,S),R.prototype.processChunk=function(A){this.push({data:f.utf8encode(A.data),meta:A.meta})},f.Utf8EncodeWorker=R},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(l,d,f){var g=l("./support"),b=l("./base64"),_=l("./nodejsUtils"),S=l("./external");function C(L){return L}function I(L,V){for(var H=0;H<L.length;++H)V[H]=255&L.charCodeAt(H);return V}l("setimmediate"),f.newBlob=function(L,V){f.checkSupport("blob");try{return new Blob([L],{type:V})}catch{try{var H=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return H.append(L),H.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var O={stringifyByChunk:function(L,V,H){var K=[],Z=0,re=L.length;if(re<=H)return String.fromCharCode.apply(null,L);for(;Z<re;)V==="array"||V==="nodebuffer"?K.push(String.fromCharCode.apply(null,L.slice(Z,Math.min(Z+H,re)))):K.push(String.fromCharCode.apply(null,L.subarray(Z,Math.min(Z+H,re)))),Z+=H;return K.join("")},stringifyByChar:function(L){for(var V="",H=0;H<L.length;H++)V+=String.fromCharCode(L[H]);return V},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}}()}};function R(L){var V=65536,H=f.getTypeOf(L),K=!0;if(H==="uint8array"?K=O.applyCanBeUsed.uint8array:H==="nodebuffer"&&(K=O.applyCanBeUsed.nodebuffer),K)for(;1<V;)try{return O.stringifyByChunk(L,H,V)}catch{V=Math.floor(V/2)}return O.stringifyByChar(L)}function A(L,V){for(var H=0;H<L.length;H++)V[H]=L[H];return V}f.applyFromCharCode=R;var F={};F.string={string:C,array:function(L){return I(L,new Array(L.length))},arraybuffer:function(L){return F.string.uint8array(L).buffer},uint8array:function(L){return I(L,new Uint8Array(L.length))},nodebuffer:function(L){return I(L,_.allocBuffer(L.length))}},F.array={string:R,array:C,arraybuffer:function(L){return new Uint8Array(L).buffer},uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(L)}},F.arraybuffer={string:function(L){return R(new Uint8Array(L))},array:function(L){return A(new Uint8Array(L),new Array(L.byteLength))},arraybuffer:C,uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(new Uint8Array(L))}},F.uint8array={string:R,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return L.buffer},uint8array:C,nodebuffer:function(L){return _.newBufferFrom(L)}},F.nodebuffer={string:R,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return F.nodebuffer.uint8array(L).buffer},uint8array:function(L){return A(L,new Uint8Array(L.length))},nodebuffer:C},f.transformTo=function(L,V){if(V=V||"",!L)return V;f.checkSupport(L);var H=f.getTypeOf(V);return F[H][L](V)},f.resolve=function(L){for(var V=L.split("/"),H=[],K=0;K<V.length;K++){var Z=V[K];Z==="."||Z===""&&K!==0&&K!==V.length-1||(Z===".."?H.pop():H.push(Z))}return H.join("/")},f.getTypeOf=function(L){return typeof L=="string"?"string":Object.prototype.toString.call(L)==="[object Array]"?"array":g.nodebuffer&&_.isBuffer(L)?"nodebuffer":g.uint8array&&L instanceof Uint8Array?"uint8array":g.arraybuffer&&L instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(L){if(!g[L.toLowerCase()])throw new Error(L+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(L){var V,H,K="";for(H=0;H<(L||"").length;H++)K+="\\x"+((V=L.charCodeAt(H))<16?"0":"")+V.toString(16).toUpperCase();return K},f.delay=function(L,V,H){setImmediate(function(){L.apply(H||null,V||[])})},f.inherits=function(L,V){function H(){}H.prototype=V.prototype,L.prototype=new H},f.extend=function(){var L,V,H={};for(L=0;L<arguments.length;L++)for(V in arguments[L])Object.prototype.hasOwnProperty.call(arguments[L],V)&&H[V]===void 0&&(H[V]=arguments[L][V]);return H},f.prepareContent=function(L,V,H,K,Z){return S.Promise.resolve(V).then(function(re){return g.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new S.Promise(function(ne,le){var Ce=new FileReader;Ce.onload=function(ve){ne(ve.target.result)},Ce.onerror=function(ve){le(ve.target.error)},Ce.readAsArrayBuffer(re)}):re}).then(function(re){var ne=f.getTypeOf(re);return ne?(ne==="arraybuffer"?re=f.transformTo("uint8array",re):ne==="string"&&(Z?re=b.decode(re):H&&K!==!0&&(re=function(le){return I(le,g.uint8array?new Uint8Array(le.length):new Array(le.length))}(re))),re):S.Promise.reject(new Error("Can't read the data of '"+L+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(l,d,f){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./signature"),S=l("./zipEntry"),C=l("./support");function I(O){this.files=[],this.loadOptions=O}I.prototype={checkSignature:function(O){if(!this.reader.readAndCheckSignature(O)){this.reader.index-=4;var R=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(R)+", expected "+b.pretty(O)+")")}},isSignature:function(O,R){var A=this.reader.index;this.reader.setIndex(O);var F=this.reader.readString(4)===R;return this.reader.setIndex(A),F},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var O=this.reader.readData(this.zipCommentLength),R=C.uint8array?"uint8array":"array",A=b.transformTo(R,O);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var O,R,A,F=this.zip64EndOfCentralSize-44;0<F;)O=this.reader.readInt(2),R=this.reader.readInt(4),A=this.reader.readData(R),this.zip64ExtensibleData[O]={id:O,length:R,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var O,R;for(O=0;O<this.files.length;O++)R=this.files[O],this.reader.setIndex(R.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),R.readLocalPart(this.reader),R.handleUTF8(),R.processAttributes()},readCentralDir:function(){var O;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(O=new S({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(O);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var O=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(O<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(O);var R=O;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(O=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(O),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var F=R-A;if(0<F)this.isSignature(R,_.CENTRAL_FILE_HEADER)||(this.reader.zero=F);else if(F<0)throw new Error("Corrupted zip: missing "+Math.abs(F)+" bytes.")},prepareReader:function(O){this.reader=g(O)},load:function(O){this.prepareReader(O),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(l,d,f){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./compressedObject"),S=l("./crc32"),C=l("./utf8"),I=l("./compressions"),O=l("./support");function R(A,F){this.options=A,this.loadOptions=F}R.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var F,L;if(A.skip(22),this.fileNameLength=A.readInt(2),L=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(L),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((F=function(V){for(var H in I)if(Object.prototype.hasOwnProperty.call(I,H)&&I[H].magic===V)return I[H];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,F,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var F=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(F),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=g(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var F,L,V,H=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<H;)F=A.readInt(2),L=A.readInt(2),V=A.readData(L),this.extraFields[F]={id:F,length:L,value:V};A.setIndex(H)},handleUTF8:function(){var A=O.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=C.utf8decode(this.fileName),this.fileCommentStr=C.utf8decode(this.fileComment);else{var F=this.findExtraFieldUnicodePath();if(F!==null)this.fileNameStr=F;else{var L=b.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(L)}var V=this.findExtraFieldUnicodeComment();if(V!==null)this.fileCommentStr=V;else{var H=b.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(H)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var F=g(A.value);return F.readInt(1)!==1||S(this.fileName)!==F.readInt(4)?null:C.utf8decode(F.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var F=g(A.value);return F.readInt(1)!==1||S(this.fileComment)!==F.readInt(4)?null:C.utf8decode(F.readData(A.length-5))}return null}},d.exports=R},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(l,d,f){function g(F,L,V){this.name=F,this.dir=V.dir,this.date=V.date,this.comment=V.comment,this.unixPermissions=V.unixPermissions,this.dosPermissions=V.dosPermissions,this._data=L,this._dataBinary=V.binary,this.options={compression:V.compression,compressionOptions:V.compressionOptions}}var b=l("./stream/StreamHelper"),_=l("./stream/DataWorker"),S=l("./utf8"),C=l("./compressedObject"),I=l("./stream/GenericWorker");g.prototype={internalStream:function(F){var L=null,V="string";try{if(!F)throw new Error("No output type specified.");var H=(V=F.toLowerCase())==="string"||V==="text";V!=="binarystring"&&V!=="text"||(V="string"),L=this._decompressWorker();var K=!this._dataBinary;K&&!H&&(L=L.pipe(new S.Utf8EncodeWorker)),!K&&H&&(L=L.pipe(new S.Utf8DecodeWorker))}catch(Z){(L=new I("error")).error(Z)}return new b(L,V,"")},async:function(F,L){return this.internalStream(F).accumulate(L)},nodeStream:function(F,L){return this.internalStream(F||"nodebuffer").toNodejsStream(L)},_compressWorker:function(F,L){if(this._data instanceof C&&this._data.compression.magic===F.magic)return this._data.getCompressedWorker();var V=this._decompressWorker();return this._dataBinary||(V=V.pipe(new S.Utf8EncodeWorker)),C.createWorkerFrom(V,F,L)},_decompressWorker:function(){return this._data instanceof C?this._data.getContentWorker():this._data instanceof I?this._data:new _(this._data)}};for(var O=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],R=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<O.length;A++)g.prototype[O[A]]=R;d.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(l,d,f){(function(g){var b,_,S=g.MutationObserver||g.WebKitMutationObserver;if(S){var C=0,I=new S(F),O=g.document.createTextNode("");I.observe(O,{characterData:!0}),b=function(){O.data=C=++C%2}}else if(g.setImmediate||g.MessageChannel===void 0)b="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var L=g.document.createElement("script");L.onreadystatechange=function(){F(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},g.document.documentElement.appendChild(L)}:function(){setTimeout(F,0)};else{var R=new g.MessageChannel;R.port1.onmessage=F,b=function(){R.port2.postMessage(0)}}var A=[];function F(){var L,V;_=!0;for(var H=A.length;H;){for(V=A,A=[],L=-1;++L<H;)V[L]();H=A.length}_=!1}d.exports=function(L){A.push(L)!==1||_||b()}}).call(this,typeof Gi<"u"?Gi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(l,d,f){var g=l("immediate");function b(){}var _={},S=["REJECTED"],C=["FULFILLED"],I=["PENDING"];function O(H){if(typeof H!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,H!==b&&L(this,H)}function R(H,K,Z){this.promise=H,typeof K=="function"&&(this.onFulfilled=K,this.callFulfilled=this.otherCallFulfilled),typeof Z=="function"&&(this.onRejected=Z,this.callRejected=this.otherCallRejected)}function A(H,K,Z){g(function(){var re;try{re=K(Z)}catch(ne){return _.reject(H,ne)}re===H?_.reject(H,new TypeError("Cannot resolve promise with itself")):_.resolve(H,re)})}function F(H){var K=H&&H.then;if(H&&(typeof H=="object"||typeof H=="function")&&typeof K=="function")return function(){K.apply(H,arguments)}}function L(H,K){var Z=!1;function re(Ce){Z||(Z=!0,_.reject(H,Ce))}function ne(Ce){Z||(Z=!0,_.resolve(H,Ce))}var le=V(function(){K(ne,re)});le.status==="error"&&re(le.value)}function V(H,K){var Z={};try{Z.value=H(K),Z.status="success"}catch(re){Z.status="error",Z.value=re}return Z}(d.exports=O).prototype.finally=function(H){if(typeof H!="function")return this;var K=this.constructor;return this.then(function(Z){return K.resolve(H()).then(function(){return Z})},function(Z){return K.resolve(H()).then(function(){throw Z})})},O.prototype.catch=function(H){return this.then(null,H)},O.prototype.then=function(H,K){if(typeof H!="function"&&this.state===C||typeof K!="function"&&this.state===S)return this;var Z=new this.constructor(b);return this.state!==I?A(Z,this.state===C?H:K,this.outcome):this.queue.push(new R(Z,H,K)),Z},R.prototype.callFulfilled=function(H){_.resolve(this.promise,H)},R.prototype.otherCallFulfilled=function(H){A(this.promise,this.onFulfilled,H)},R.prototype.callRejected=function(H){_.reject(this.promise,H)},R.prototype.otherCallRejected=function(H){A(this.promise,this.onRejected,H)},_.resolve=function(H,K){var Z=V(F,K);if(Z.status==="error")return _.reject(H,Z.value);var re=Z.value;if(re)L(H,re);else{H.state=C,H.outcome=K;for(var ne=-1,le=H.queue.length;++ne<le;)H.queue[ne].callFulfilled(K)}return H},_.reject=function(H,K){H.state=S,H.outcome=K;for(var Z=-1,re=H.queue.length;++Z<re;)H.queue[Z].callRejected(K);return H},O.resolve=function(H){return H instanceof this?H:_.resolve(new this(b),H)},O.reject=function(H){var K=new this(b);return _.reject(K,H)},O.all=function(H){var K=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=H.length,re=!1;if(!Z)return this.resolve([]);for(var ne=new Array(Z),le=0,Ce=-1,ve=new this(b);++Ce<Z;)we(H[Ce],Ce);return ve;function we(De,rt){K.resolve(De).then(function(ce){ne[rt]=ce,++le!==Z||re||(re=!0,_.resolve(ve,ne))},function(ce){re||(re=!0,_.reject(ve,ce))})}},O.race=function(H){var K=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=H.length,re=!1;if(!Z)return this.resolve([]);for(var ne=-1,le=new this(b);++ne<Z;)Ce=H[ne],K.resolve(Ce).then(function(ve){re||(re=!0,_.resolve(le,ve))},function(ve){re||(re=!0,_.reject(le,ve))});var Ce;return le}},{immediate:36}],38:[function(l,d,f){var g={};(0,l("./lib/utils/common").assign)(g,l("./lib/deflate"),l("./lib/inflate"),l("./lib/zlib/constants")),d.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(l,d,f){var g=l("./zlib/deflate"),b=l("./utils/common"),_=l("./utils/strings"),S=l("./zlib/messages"),C=l("./zlib/zstream"),I=Object.prototype.toString,O=0,R=-1,A=0,F=8;function L(H){if(!(this instanceof L))return new L(H);this.options=b.assign({level:R,method:F,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},H||{});var K=this.options;K.raw&&0<K.windowBits?K.windowBits=-K.windowBits:K.gzip&&0<K.windowBits&&K.windowBits<16&&(K.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var Z=g.deflateInit2(this.strm,K.level,K.method,K.windowBits,K.memLevel,K.strategy);if(Z!==O)throw new Error(S[Z]);if(K.header&&g.deflateSetHeader(this.strm,K.header),K.dictionary){var re;if(re=typeof K.dictionary=="string"?_.string2buf(K.dictionary):I.call(K.dictionary)==="[object ArrayBuffer]"?new Uint8Array(K.dictionary):K.dictionary,(Z=g.deflateSetDictionary(this.strm,re))!==O)throw new Error(S[Z]);this._dict_set=!0}}function V(H,K){var Z=new L(K);if(Z.push(H,!0),Z.err)throw Z.msg||S[Z.err];return Z.result}L.prototype.push=function(H,K){var Z,re,ne=this.strm,le=this.options.chunkSize;if(this.ended)return!1;re=K===~~K?K:K===!0?4:0,typeof H=="string"?ne.input=_.string2buf(H):I.call(H)==="[object ArrayBuffer]"?ne.input=new Uint8Array(H):ne.input=H,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new b.Buf8(le),ne.next_out=0,ne.avail_out=le),(Z=g.deflate(ne,re))!==1&&Z!==O)return this.onEnd(Z),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(b.shrinkBuf(ne.output,ne.next_out))):this.onData(b.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&Z!==1);return re===4?(Z=g.deflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===O):re!==2||(this.onEnd(O),!(ne.avail_out=0))},L.prototype.onData=function(H){this.chunks.push(H)},L.prototype.onEnd=function(H){H===O&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=H,this.msg=this.strm.msg},f.Deflate=L,f.deflate=V,f.deflateRaw=function(H,K){return(K=K||{}).raw=!0,V(H,K)},f.gzip=function(H,K){return(K=K||{}).gzip=!0,V(H,K)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(l,d,f){var g=l("./zlib/inflate"),b=l("./utils/common"),_=l("./utils/strings"),S=l("./zlib/constants"),C=l("./zlib/messages"),I=l("./zlib/zstream"),O=l("./zlib/gzheader"),R=Object.prototype.toString;function A(L){if(!(this instanceof A))return new A(L);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},L||{});var V=this.options;V.raw&&0<=V.windowBits&&V.windowBits<16&&(V.windowBits=-V.windowBits,V.windowBits===0&&(V.windowBits=-15)),!(0<=V.windowBits&&V.windowBits<16)||L&&L.windowBits||(V.windowBits+=32),15<V.windowBits&&V.windowBits<48&&!(15&V.windowBits)&&(V.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var H=g.inflateInit2(this.strm,V.windowBits);if(H!==S.Z_OK)throw new Error(C[H]);this.header=new O,g.inflateGetHeader(this.strm,this.header)}function F(L,V){var H=new A(V);if(H.push(L,!0),H.err)throw H.msg||C[H.err];return H.result}A.prototype.push=function(L,V){var H,K,Z,re,ne,le,Ce=this.strm,ve=this.options.chunkSize,we=this.options.dictionary,De=!1;if(this.ended)return!1;K=V===~~V?V:V===!0?S.Z_FINISH:S.Z_NO_FLUSH,typeof L=="string"?Ce.input=_.binstring2buf(L):R.call(L)==="[object ArrayBuffer]"?Ce.input=new Uint8Array(L):Ce.input=L,Ce.next_in=0,Ce.avail_in=Ce.input.length;do{if(Ce.avail_out===0&&(Ce.output=new b.Buf8(ve),Ce.next_out=0,Ce.avail_out=ve),(H=g.inflate(Ce,S.Z_NO_FLUSH))===S.Z_NEED_DICT&&we&&(le=typeof we=="string"?_.string2buf(we):R.call(we)==="[object ArrayBuffer]"?new Uint8Array(we):we,H=g.inflateSetDictionary(this.strm,le)),H===S.Z_BUF_ERROR&&De===!0&&(H=S.Z_OK,De=!1),H!==S.Z_STREAM_END&&H!==S.Z_OK)return this.onEnd(H),!(this.ended=!0);Ce.next_out&&(Ce.avail_out!==0&&H!==S.Z_STREAM_END&&(Ce.avail_in!==0||K!==S.Z_FINISH&&K!==S.Z_SYNC_FLUSH)||(this.options.to==="string"?(Z=_.utf8border(Ce.output,Ce.next_out),re=Ce.next_out-Z,ne=_.buf2string(Ce.output,Z),Ce.next_out=re,Ce.avail_out=ve-re,re&&b.arraySet(Ce.output,Ce.output,Z,re,0),this.onData(ne)):this.onData(b.shrinkBuf(Ce.output,Ce.next_out)))),Ce.avail_in===0&&Ce.avail_out===0&&(De=!0)}while((0<Ce.avail_in||Ce.avail_out===0)&&H!==S.Z_STREAM_END);return H===S.Z_STREAM_END&&(K=S.Z_FINISH),K===S.Z_FINISH?(H=g.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===S.Z_OK):K!==S.Z_SYNC_FLUSH||(this.onEnd(S.Z_OK),!(Ce.avail_out=0))},A.prototype.onData=function(L){this.chunks.push(L)},A.prototype.onEnd=function(L){L===S.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},f.Inflate=A,f.inflate=F,f.inflateRaw=function(L,V){return(V=V||{}).raw=!0,F(L,V)},f.ungzip=F},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(l,d,f){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(S){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var I=C.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var O in I)I.hasOwnProperty(O)&&(S[O]=I[O])}}return S},f.shrinkBuf=function(S,C){return S.length===C?S:S.subarray?S.subarray(0,C):(S.length=C,S)};var b={arraySet:function(S,C,I,O,R){if(C.subarray&&S.subarray)S.set(C.subarray(I,I+O),R);else for(var A=0;A<O;A++)S[R+A]=C[I+A]},flattenChunks:function(S){var C,I,O,R,A,F;for(C=O=0,I=S.length;C<I;C++)O+=S[C].length;for(F=new Uint8Array(O),C=R=0,I=S.length;C<I;C++)A=S[C],F.set(A,R),R+=A.length;return F}},_={arraySet:function(S,C,I,O,R){for(var A=0;A<O;A++)S[R+A]=C[I+A]},flattenChunks:function(S){return[].concat.apply([],S)}};f.setTyped=function(S){S?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,b)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,_))},f.setTyped(g)},{}],42:[function(l,d,f){var g=l("./common"),b=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var S=new g.Buf8(256),C=0;C<256;C++)S[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function I(O,R){if(R<65537&&(O.subarray&&_||!O.subarray&&b))return String.fromCharCode.apply(null,g.shrinkBuf(O,R));for(var A="",F=0;F<R;F++)A+=String.fromCharCode(O[F]);return A}S[254]=S[254]=1,f.string2buf=function(O){var R,A,F,L,V,H=O.length,K=0;for(L=0;L<H;L++)(64512&(A=O.charCodeAt(L)))==55296&&L+1<H&&(64512&(F=O.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(F-56320),L++),K+=A<128?1:A<2048?2:A<65536?3:4;for(R=new g.Buf8(K),L=V=0;V<K;L++)(64512&(A=O.charCodeAt(L)))==55296&&L+1<H&&(64512&(F=O.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(F-56320),L++),A<128?R[V++]=A:(A<2048?R[V++]=192|A>>>6:(A<65536?R[V++]=224|A>>>12:(R[V++]=240|A>>>18,R[V++]=128|A>>>12&63),R[V++]=128|A>>>6&63),R[V++]=128|63&A);return R},f.buf2binstring=function(O){return I(O,O.length)},f.binstring2buf=function(O){for(var R=new g.Buf8(O.length),A=0,F=R.length;A<F;A++)R[A]=O.charCodeAt(A);return R},f.buf2string=function(O,R){var A,F,L,V,H=R||O.length,K=new Array(2*H);for(A=F=0;A<H;)if((L=O[A++])<128)K[F++]=L;else if(4<(V=S[L]))K[F++]=65533,A+=V-1;else{for(L&=V===2?31:V===3?15:7;1<V&&A<H;)L=L<<6|63&O[A++],V--;1<V?K[F++]=65533:L<65536?K[F++]=L:(L-=65536,K[F++]=55296|L>>10&1023,K[F++]=56320|1023&L)}return I(K,F)},f.utf8border=function(O,R){var A;for((R=R||O.length)>O.length&&(R=O.length),A=R-1;0<=A&&(192&O[A])==128;)A--;return A<0||A===0?R:A+S[O[A]]>R?A:R}},{"./common":41}],43:[function(l,d,f){d.exports=function(g,b,_,S){for(var C=65535&g|0,I=g>>>16&65535|0,O=0;_!==0;){for(_-=O=2e3<_?2e3:_;I=I+(C=C+b[S++]|0)|0,--O;);C%=65521,I%=65521}return C|I<<16|0}},{}],44:[function(l,d,f){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(l,d,f){var g=function(){for(var b,_=[],S=0;S<256;S++){b=S;for(var C=0;C<8;C++)b=1&b?3988292384^b>>>1:b>>>1;_[S]=b}return _}();d.exports=function(b,_,S,C){var I=g,O=C+S;b^=-1;for(var R=C;R<O;R++)b=b>>>8^I[255&(b^_[R])];return-1^b}},{}],46:[function(l,d,f){var g,b=l("../utils/common"),_=l("./trees"),S=l("./adler32"),C=l("./crc32"),I=l("./messages"),O=0,R=4,A=0,F=-2,L=-1,V=4,H=2,K=8,Z=9,re=286,ne=30,le=19,Ce=2*re+1,ve=15,we=3,De=258,rt=De+we+1,ce=42,Re=113,J=1,Ve=2,Ot=3,Me=4;function ke(ee,ht){return ee.msg=I[ht],ht}function He(ee){return(ee<<1)-(4<ee?9:0)}function xt(ee){for(var ht=ee.length;0<=--ht;)ee[ht]=0}function de(ee){var ht=ee.state,ct=ht.pending;ct>ee.avail_out&&(ct=ee.avail_out),ct!==0&&(b.arraySet(ee.output,ht.pending_buf,ht.pending_out,ct,ee.next_out),ee.next_out+=ct,ht.pending_out+=ct,ee.total_out+=ct,ee.avail_out-=ct,ht.pending-=ct,ht.pending===0&&(ht.pending_out=0))}function ge(ee,ht){_._tr_flush_block(ee,0<=ee.block_start?ee.block_start:-1,ee.strstart-ee.block_start,ht),ee.block_start=ee.strstart,de(ee.strm)}function Je(ee,ht){ee.pending_buf[ee.pending++]=ht}function nt(ee,ht){ee.pending_buf[ee.pending++]=ht>>>8&255,ee.pending_buf[ee.pending++]=255&ht}function ot(ee,ht){var ct,Ee,Se=ee.max_chain_length,$e=ee.strstart,St=ee.prev_length,At=ee.nice_match,et=ee.strstart>ee.w_size-rt?ee.strstart-(ee.w_size-rt):0,Bt=ee.window,Mt=ee.w_mask,It=ee.prev,An=ee.strstart+De,Ir=Bt[$e+St-1],Jn=Bt[$e+St];ee.prev_length>=ee.good_match&&(Se>>=2),At>ee.lookahead&&(At=ee.lookahead);do if(Bt[(ct=ht)+St]===Jn&&Bt[ct+St-1]===Ir&&Bt[ct]===Bt[$e]&&Bt[++ct]===Bt[$e+1]){$e+=2,ct++;do;while(Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&Bt[++$e]===Bt[++ct]&&$e<An);if(Ee=De-(An-$e),$e=An-De,St<Ee){if(ee.match_start=ht,At<=(St=Ee))break;Ir=Bt[$e+St-1],Jn=Bt[$e+St]}}while((ht=It[ht&Mt])>et&&--Se!=0);return St<=ee.lookahead?St:ee.lookahead}function We(ee){var ht,ct,Ee,Se,$e,St,At,et,Bt,Mt,It=ee.w_size;do{if(Se=ee.window_size-ee.lookahead-ee.strstart,ee.strstart>=It+(It-rt)){for(b.arraySet(ee.window,ee.window,It,It,0),ee.match_start-=It,ee.strstart-=It,ee.block_start-=It,ht=ct=ee.hash_size;Ee=ee.head[--ht],ee.head[ht]=It<=Ee?Ee-It:0,--ct;);for(ht=ct=It;Ee=ee.prev[--ht],ee.prev[ht]=It<=Ee?Ee-It:0,--ct;);Se+=It}if(ee.strm.avail_in===0)break;if(St=ee.strm,At=ee.window,et=ee.strstart+ee.lookahead,Bt=Se,Mt=void 0,Mt=St.avail_in,Bt<Mt&&(Mt=Bt),ct=Mt===0?0:(St.avail_in-=Mt,b.arraySet(At,St.input,St.next_in,Mt,et),St.state.wrap===1?St.adler=S(St.adler,At,Mt,et):St.state.wrap===2&&(St.adler=C(St.adler,At,Mt,et)),St.next_in+=Mt,St.total_in+=Mt,Mt),ee.lookahead+=ct,ee.lookahead+ee.insert>=we)for($e=ee.strstart-ee.insert,ee.ins_h=ee.window[$e],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[$e+1])&ee.hash_mask;ee.insert&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[$e+we-1])&ee.hash_mask,ee.prev[$e&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=$e,$e++,ee.insert--,!(ee.lookahead+ee.insert<we)););}while(ee.lookahead<rt&&ee.strm.avail_in!==0)}function nn(ee,ht){for(var ct,Ee;;){if(ee.lookahead<rt){if(We(ee),ee.lookahead<rt&&ht===O)return J;if(ee.lookahead===0)break}if(ct=0,ee.lookahead>=we&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,ct=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ct!==0&&ee.strstart-ct<=ee.w_size-rt&&(ee.match_length=ot(ee,ct)),ee.match_length>=we)if(Ee=_._tr_tally(ee,ee.strstart-ee.match_start,ee.match_length-we),ee.lookahead-=ee.match_length,ee.match_length<=ee.max_lazy_match&&ee.lookahead>=we){for(ee.match_length--;ee.strstart++,ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,ct=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart,--ee.match_length!=0;);ee.strstart++}else ee.strstart+=ee.match_length,ee.match_length=0,ee.ins_h=ee.window[ee.strstart],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+1])&ee.hash_mask;else Ee=_._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++;if(Ee&&(ge(ee,!1),ee.strm.avail_out===0))return J}return ee.insert=ee.strstart<we-1?ee.strstart:we-1,ht===R?(ge(ee,!0),ee.strm.avail_out===0?Ot:Me):ee.last_lit&&(ge(ee,!1),ee.strm.avail_out===0)?J:Ve}function wt(ee,ht){for(var ct,Ee,Se;;){if(ee.lookahead<rt){if(We(ee),ee.lookahead<rt&&ht===O)return J;if(ee.lookahead===0)break}if(ct=0,ee.lookahead>=we&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,ct=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ee.prev_length=ee.match_length,ee.prev_match=ee.match_start,ee.match_length=we-1,ct!==0&&ee.prev_length<ee.max_lazy_match&&ee.strstart-ct<=ee.w_size-rt&&(ee.match_length=ot(ee,ct),ee.match_length<=5&&(ee.strategy===1||ee.match_length===we&&4096<ee.strstart-ee.match_start)&&(ee.match_length=we-1)),ee.prev_length>=we&&ee.match_length<=ee.prev_length){for(Se=ee.strstart+ee.lookahead-we,Ee=_._tr_tally(ee,ee.strstart-1-ee.prev_match,ee.prev_length-we),ee.lookahead-=ee.prev_length-1,ee.prev_length-=2;++ee.strstart<=Se&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,ct=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),--ee.prev_length!=0;);if(ee.match_available=0,ee.match_length=we-1,ee.strstart++,Ee&&(ge(ee,!1),ee.strm.avail_out===0))return J}else if(ee.match_available){if((Ee=_._tr_tally(ee,0,ee.window[ee.strstart-1]))&&ge(ee,!1),ee.strstart++,ee.lookahead--,ee.strm.avail_out===0)return J}else ee.match_available=1,ee.strstart++,ee.lookahead--}return ee.match_available&&(Ee=_._tr_tally(ee,0,ee.window[ee.strstart-1]),ee.match_available=0),ee.insert=ee.strstart<we-1?ee.strstart:we-1,ht===R?(ge(ee,!0),ee.strm.avail_out===0?Ot:Me):ee.last_lit&&(ge(ee,!1),ee.strm.avail_out===0)?J:Ve}function Qt(ee,ht,ct,Ee,Se){this.good_length=ee,this.max_lazy=ht,this.nice_length=ct,this.max_chain=Ee,this.func=Se}function mn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*Ce),this.dyn_dtree=new b.Buf16(2*(2*ne+1)),this.bl_tree=new b.Buf16(2*(2*le+1)),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(ve+1),this.heap=new b.Buf16(2*re+1),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*re+1),xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Un(ee){var ht;return ee&&ee.state?(ee.total_in=ee.total_out=0,ee.data_type=H,(ht=ee.state).pending=0,ht.pending_out=0,ht.wrap<0&&(ht.wrap=-ht.wrap),ht.status=ht.wrap?ce:Re,ee.adler=ht.wrap===2?0:1,ht.last_flush=O,_._tr_init(ht),A):ke(ee,F)}function Rn(ee){var ht=Un(ee);return ht===A&&function(ct){ct.window_size=2*ct.w_size,xt(ct.head),ct.max_lazy_match=g[ct.level].max_lazy,ct.good_match=g[ct.level].good_length,ct.nice_match=g[ct.level].nice_length,ct.max_chain_length=g[ct.level].max_chain,ct.strstart=0,ct.block_start=0,ct.lookahead=0,ct.insert=0,ct.match_length=ct.prev_length=we-1,ct.match_available=0,ct.ins_h=0}(ee.state),ht}function Vr(ee,ht,ct,Ee,Se,$e){if(!ee)return F;var St=1;if(ht===L&&(ht=6),Ee<0?(St=0,Ee=-Ee):15<Ee&&(St=2,Ee-=16),Se<1||Z<Se||ct!==K||Ee<8||15<Ee||ht<0||9<ht||$e<0||V<$e)return ke(ee,F);Ee===8&&(Ee=9);var At=new mn;return(ee.state=At).strm=ee,At.wrap=St,At.gzhead=null,At.w_bits=Ee,At.w_size=1<<At.w_bits,At.w_mask=At.w_size-1,At.hash_bits=Se+7,At.hash_size=1<<At.hash_bits,At.hash_mask=At.hash_size-1,At.hash_shift=~~((At.hash_bits+we-1)/we),At.window=new b.Buf8(2*At.w_size),At.head=new b.Buf16(At.hash_size),At.prev=new b.Buf16(At.w_size),At.lit_bufsize=1<<Se+6,At.pending_buf_size=4*At.lit_bufsize,At.pending_buf=new b.Buf8(At.pending_buf_size),At.d_buf=1*At.lit_bufsize,At.l_buf=3*At.lit_bufsize,At.level=ht,At.strategy=$e,At.method=ct,Rn(ee)}g=[new Qt(0,0,0,0,function(ee,ht){var ct=65535;for(ct>ee.pending_buf_size-5&&(ct=ee.pending_buf_size-5);;){if(ee.lookahead<=1){if(We(ee),ee.lookahead===0&&ht===O)return J;if(ee.lookahead===0)break}ee.strstart+=ee.lookahead,ee.lookahead=0;var Ee=ee.block_start+ct;if((ee.strstart===0||ee.strstart>=Ee)&&(ee.lookahead=ee.strstart-Ee,ee.strstart=Ee,ge(ee,!1),ee.strm.avail_out===0)||ee.strstart-ee.block_start>=ee.w_size-rt&&(ge(ee,!1),ee.strm.avail_out===0))return J}return ee.insert=0,ht===R?(ge(ee,!0),ee.strm.avail_out===0?Ot:Me):(ee.strstart>ee.block_start&&(ge(ee,!1),ee.strm.avail_out),J)}),new Qt(4,4,8,4,nn),new Qt(4,5,16,8,nn),new Qt(4,6,32,32,nn),new Qt(4,4,16,16,wt),new Qt(8,16,32,32,wt),new Qt(8,16,128,128,wt),new Qt(8,32,128,256,wt),new Qt(32,128,258,1024,wt),new Qt(32,258,258,4096,wt)],f.deflateInit=function(ee,ht){return Vr(ee,ht,K,15,8,0)},f.deflateInit2=Vr,f.deflateReset=Rn,f.deflateResetKeep=Un,f.deflateSetHeader=function(ee,ht){return ee&&ee.state?ee.state.wrap!==2?F:(ee.state.gzhead=ht,A):F},f.deflate=function(ee,ht){var ct,Ee,Se,$e;if(!ee||!ee.state||5<ht||ht<0)return ee?ke(ee,F):F;if(Ee=ee.state,!ee.output||!ee.input&&ee.avail_in!==0||Ee.status===666&&ht!==R)return ke(ee,ee.avail_out===0?-5:F);if(Ee.strm=ee,ct=Ee.last_flush,Ee.last_flush=ht,Ee.status===ce)if(Ee.wrap===2)ee.adler=0,Je(Ee,31),Je(Ee,139),Je(Ee,8),Ee.gzhead?(Je(Ee,(Ee.gzhead.text?1:0)+(Ee.gzhead.hcrc?2:0)+(Ee.gzhead.extra?4:0)+(Ee.gzhead.name?8:0)+(Ee.gzhead.comment?16:0)),Je(Ee,255&Ee.gzhead.time),Je(Ee,Ee.gzhead.time>>8&255),Je(Ee,Ee.gzhead.time>>16&255),Je(Ee,Ee.gzhead.time>>24&255),Je(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),Je(Ee,255&Ee.gzhead.os),Ee.gzhead.extra&&Ee.gzhead.extra.length&&(Je(Ee,255&Ee.gzhead.extra.length),Je(Ee,Ee.gzhead.extra.length>>8&255)),Ee.gzhead.hcrc&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending,0)),Ee.gzindex=0,Ee.status=69):(Je(Ee,0),Je(Ee,0),Je(Ee,0),Je(Ee,0),Je(Ee,0),Je(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),Je(Ee,3),Ee.status=Re);else{var St=K+(Ee.w_bits-8<<4)<<8;St|=(2<=Ee.strategy||Ee.level<2?0:Ee.level<6?1:Ee.level===6?2:3)<<6,Ee.strstart!==0&&(St|=32),St+=31-St%31,Ee.status=Re,nt(Ee,St),Ee.strstart!==0&&(nt(Ee,ee.adler>>>16),nt(Ee,65535&ee.adler)),ee.adler=1}if(Ee.status===69)if(Ee.gzhead.extra){for(Se=Ee.pending;Ee.gzindex<(65535&Ee.gzhead.extra.length)&&(Ee.pending!==Ee.pending_buf_size||(Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),de(ee),Se=Ee.pending,Ee.pending!==Ee.pending_buf_size));)Je(Ee,255&Ee.gzhead.extra[Ee.gzindex]),Ee.gzindex++;Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),Ee.gzindex===Ee.gzhead.extra.length&&(Ee.gzindex=0,Ee.status=73)}else Ee.status=73;if(Ee.status===73)if(Ee.gzhead.name){Se=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),de(ee),Se=Ee.pending,Ee.pending===Ee.pending_buf_size)){$e=1;break}$e=Ee.gzindex<Ee.gzhead.name.length?255&Ee.gzhead.name.charCodeAt(Ee.gzindex++):0,Je(Ee,$e)}while($e!==0);Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),$e===0&&(Ee.gzindex=0,Ee.status=91)}else Ee.status=91;if(Ee.status===91)if(Ee.gzhead.comment){Se=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),de(ee),Se=Ee.pending,Ee.pending===Ee.pending_buf_size)){$e=1;break}$e=Ee.gzindex<Ee.gzhead.comment.length?255&Ee.gzhead.comment.charCodeAt(Ee.gzindex++):0,Je(Ee,$e)}while($e!==0);Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=C(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),$e===0&&(Ee.status=103)}else Ee.status=103;if(Ee.status===103&&(Ee.gzhead.hcrc?(Ee.pending+2>Ee.pending_buf_size&&de(ee),Ee.pending+2<=Ee.pending_buf_size&&(Je(Ee,255&ee.adler),Je(Ee,ee.adler>>8&255),ee.adler=0,Ee.status=Re)):Ee.status=Re),Ee.pending!==0){if(de(ee),ee.avail_out===0)return Ee.last_flush=-1,A}else if(ee.avail_in===0&&He(ht)<=He(ct)&&ht!==R)return ke(ee,-5);if(Ee.status===666&&ee.avail_in!==0)return ke(ee,-5);if(ee.avail_in!==0||Ee.lookahead!==0||ht!==O&&Ee.status!==666){var At=Ee.strategy===2?function(et,Bt){for(var Mt;;){if(et.lookahead===0&&(We(et),et.lookahead===0)){if(Bt===O)return J;break}if(et.match_length=0,Mt=_._tr_tally(et,0,et.window[et.strstart]),et.lookahead--,et.strstart++,Mt&&(ge(et,!1),et.strm.avail_out===0))return J}return et.insert=0,Bt===R?(ge(et,!0),et.strm.avail_out===0?Ot:Me):et.last_lit&&(ge(et,!1),et.strm.avail_out===0)?J:Ve}(Ee,ht):Ee.strategy===3?function(et,Bt){for(var Mt,It,An,Ir,Jn=et.window;;){if(et.lookahead<=De){if(We(et),et.lookahead<=De&&Bt===O)return J;if(et.lookahead===0)break}if(et.match_length=0,et.lookahead>=we&&0<et.strstart&&(It=Jn[An=et.strstart-1])===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]){Ir=et.strstart+De;do;while(It===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]&&It===Jn[++An]&&An<Ir);et.match_length=De-(Ir-An),et.match_length>et.lookahead&&(et.match_length=et.lookahead)}if(et.match_length>=we?(Mt=_._tr_tally(et,1,et.match_length-we),et.lookahead-=et.match_length,et.strstart+=et.match_length,et.match_length=0):(Mt=_._tr_tally(et,0,et.window[et.strstart]),et.lookahead--,et.strstart++),Mt&&(ge(et,!1),et.strm.avail_out===0))return J}return et.insert=0,Bt===R?(ge(et,!0),et.strm.avail_out===0?Ot:Me):et.last_lit&&(ge(et,!1),et.strm.avail_out===0)?J:Ve}(Ee,ht):g[Ee.level].func(Ee,ht);if(At!==Ot&&At!==Me||(Ee.status=666),At===J||At===Ot)return ee.avail_out===0&&(Ee.last_flush=-1),A;if(At===Ve&&(ht===1?_._tr_align(Ee):ht!==5&&(_._tr_stored_block(Ee,0,0,!1),ht===3&&(xt(Ee.head),Ee.lookahead===0&&(Ee.strstart=0,Ee.block_start=0,Ee.insert=0))),de(ee),ee.avail_out===0))return Ee.last_flush=-1,A}return ht!==R?A:Ee.wrap<=0?1:(Ee.wrap===2?(Je(Ee,255&ee.adler),Je(Ee,ee.adler>>8&255),Je(Ee,ee.adler>>16&255),Je(Ee,ee.adler>>24&255),Je(Ee,255&ee.total_in),Je(Ee,ee.total_in>>8&255),Je(Ee,ee.total_in>>16&255),Je(Ee,ee.total_in>>24&255)):(nt(Ee,ee.adler>>>16),nt(Ee,65535&ee.adler)),de(ee),0<Ee.wrap&&(Ee.wrap=-Ee.wrap),Ee.pending!==0?A:1)},f.deflateEnd=function(ee){var ht;return ee&&ee.state?(ht=ee.state.status)!==ce&&ht!==69&&ht!==73&&ht!==91&&ht!==103&&ht!==Re&&ht!==666?ke(ee,F):(ee.state=null,ht===Re?ke(ee,-3):A):F},f.deflateSetDictionary=function(ee,ht){var ct,Ee,Se,$e,St,At,et,Bt,Mt=ht.length;if(!ee||!ee.state||($e=(ct=ee.state).wrap)===2||$e===1&&ct.status!==ce||ct.lookahead)return F;for($e===1&&(ee.adler=S(ee.adler,ht,Mt,0)),ct.wrap=0,Mt>=ct.w_size&&($e===0&&(xt(ct.head),ct.strstart=0,ct.block_start=0,ct.insert=0),Bt=new b.Buf8(ct.w_size),b.arraySet(Bt,ht,Mt-ct.w_size,ct.w_size,0),ht=Bt,Mt=ct.w_size),St=ee.avail_in,At=ee.next_in,et=ee.input,ee.avail_in=Mt,ee.next_in=0,ee.input=ht,We(ct);ct.lookahead>=we;){for(Ee=ct.strstart,Se=ct.lookahead-(we-1);ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[Ee+we-1])&ct.hash_mask,ct.prev[Ee&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=Ee,Ee++,--Se;);ct.strstart=Ee,ct.lookahead=we-1,We(ct)}return ct.strstart+=ct.lookahead,ct.block_start=ct.strstart,ct.insert=ct.lookahead,ct.lookahead=0,ct.match_length=ct.prev_length=we-1,ct.match_available=0,ee.next_in=At,ee.input=et,ee.avail_in=St,ct.wrap=$e,A},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(l,d,f){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(l,d,f){d.exports=function(g,b){var _,S,C,I,O,R,A,F,L,V,H,K,Z,re,ne,le,Ce,ve,we,De,rt,ce,Re,J,Ve;_=g.state,S=g.next_in,J=g.input,C=S+(g.avail_in-5),I=g.next_out,Ve=g.output,O=I-(b-g.avail_out),R=I+(g.avail_out-257),A=_.dmax,F=_.wsize,L=_.whave,V=_.wnext,H=_.window,K=_.hold,Z=_.bits,re=_.lencode,ne=_.distcode,le=(1<<_.lenbits)-1,Ce=(1<<_.distbits)-1;e:do{Z<15&&(K+=J[S++]<<Z,Z+=8,K+=J[S++]<<Z,Z+=8),ve=re[K&le];t:for(;;){if(K>>>=we=ve>>>24,Z-=we,(we=ve>>>16&255)===0)Ve[I++]=65535&ve;else{if(!(16&we)){if(!(64&we)){ve=re[(65535&ve)+(K&(1<<we)-1)];continue t}if(32&we){_.mode=12;break e}g.msg="invalid literal/length code",_.mode=30;break e}De=65535&ve,(we&=15)&&(Z<we&&(K+=J[S++]<<Z,Z+=8),De+=K&(1<<we)-1,K>>>=we,Z-=we),Z<15&&(K+=J[S++]<<Z,Z+=8,K+=J[S++]<<Z,Z+=8),ve=ne[K&Ce];n:for(;;){if(K>>>=we=ve>>>24,Z-=we,!(16&(we=ve>>>16&255))){if(!(64&we)){ve=ne[(65535&ve)+(K&(1<<we)-1)];continue n}g.msg="invalid distance code",_.mode=30;break e}if(rt=65535&ve,Z<(we&=15)&&(K+=J[S++]<<Z,(Z+=8)<we&&(K+=J[S++]<<Z,Z+=8)),A<(rt+=K&(1<<we)-1)){g.msg="invalid distance too far back",_.mode=30;break e}if(K>>>=we,Z-=we,(we=I-O)<rt){if(L<(we=rt-we)&&_.sane){g.msg="invalid distance too far back",_.mode=30;break e}if(Re=H,(ce=0)===V){if(ce+=F-we,we<De){for(De-=we;Ve[I++]=H[ce++],--we;);ce=I-rt,Re=Ve}}else if(V<we){if(ce+=F+V-we,(we-=V)<De){for(De-=we;Ve[I++]=H[ce++],--we;);if(ce=0,V<De){for(De-=we=V;Ve[I++]=H[ce++],--we;);ce=I-rt,Re=Ve}}}else if(ce+=V-we,we<De){for(De-=we;Ve[I++]=H[ce++],--we;);ce=I-rt,Re=Ve}for(;2<De;)Ve[I++]=Re[ce++],Ve[I++]=Re[ce++],Ve[I++]=Re[ce++],De-=3;De&&(Ve[I++]=Re[ce++],1<De&&(Ve[I++]=Re[ce++]))}else{for(ce=I-rt;Ve[I++]=Ve[ce++],Ve[I++]=Ve[ce++],Ve[I++]=Ve[ce++],2<(De-=3););De&&(Ve[I++]=Ve[ce++],1<De&&(Ve[I++]=Ve[ce++]))}break}}break}}while(S<C&&I<R);S-=De=Z>>3,K&=(1<<(Z-=De<<3))-1,g.next_in=S,g.next_out=I,g.avail_in=S<C?C-S+5:5-(S-C),g.avail_out=I<R?R-I+257:257-(I-R),_.hold=K,_.bits=Z}},{}],49:[function(l,d,f){var g=l("../utils/common"),b=l("./adler32"),_=l("./crc32"),S=l("./inffast"),C=l("./inftrees"),I=1,O=2,R=0,A=-2,F=1,L=852,V=592;function H(ce){return(ce>>>24&255)+(ce>>>8&65280)+((65280&ce)<<8)+((255&ce)<<24)}function K(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Z(ce){var Re;return ce&&ce.state?(Re=ce.state,ce.total_in=ce.total_out=Re.total=0,ce.msg="",Re.wrap&&(ce.adler=1&Re.wrap),Re.mode=F,Re.last=0,Re.havedict=0,Re.dmax=32768,Re.head=null,Re.hold=0,Re.bits=0,Re.lencode=Re.lendyn=new g.Buf32(L),Re.distcode=Re.distdyn=new g.Buf32(V),Re.sane=1,Re.back=-1,R):A}function re(ce){var Re;return ce&&ce.state?((Re=ce.state).wsize=0,Re.whave=0,Re.wnext=0,Z(ce)):A}function ne(ce,Re){var J,Ve;return ce&&ce.state?(Ve=ce.state,Re<0?(J=0,Re=-Re):(J=1+(Re>>4),Re<48&&(Re&=15)),Re&&(Re<8||15<Re)?A:(Ve.window!==null&&Ve.wbits!==Re&&(Ve.window=null),Ve.wrap=J,Ve.wbits=Re,re(ce))):A}function le(ce,Re){var J,Ve;return ce?(Ve=new K,(ce.state=Ve).window=null,(J=ne(ce,Re))!==R&&(ce.state=null),J):A}var Ce,ve,we=!0;function De(ce){if(we){var Re;for(Ce=new g.Buf32(512),ve=new g.Buf32(32),Re=0;Re<144;)ce.lens[Re++]=8;for(;Re<256;)ce.lens[Re++]=9;for(;Re<280;)ce.lens[Re++]=7;for(;Re<288;)ce.lens[Re++]=8;for(C(I,ce.lens,0,288,Ce,0,ce.work,{bits:9}),Re=0;Re<32;)ce.lens[Re++]=5;C(O,ce.lens,0,32,ve,0,ce.work,{bits:5}),we=!1}ce.lencode=Ce,ce.lenbits=9,ce.distcode=ve,ce.distbits=5}function rt(ce,Re,J,Ve){var Ot,Me=ce.state;return Me.window===null&&(Me.wsize=1<<Me.wbits,Me.wnext=0,Me.whave=0,Me.window=new g.Buf8(Me.wsize)),Ve>=Me.wsize?(g.arraySet(Me.window,Re,J-Me.wsize,Me.wsize,0),Me.wnext=0,Me.whave=Me.wsize):(Ve<(Ot=Me.wsize-Me.wnext)&&(Ot=Ve),g.arraySet(Me.window,Re,J-Ve,Ot,Me.wnext),(Ve-=Ot)?(g.arraySet(Me.window,Re,J-Ve,Ve,0),Me.wnext=Ve,Me.whave=Me.wsize):(Me.wnext+=Ot,Me.wnext===Me.wsize&&(Me.wnext=0),Me.whave<Me.wsize&&(Me.whave+=Ot))),0}f.inflateReset=re,f.inflateReset2=ne,f.inflateResetKeep=Z,f.inflateInit=function(ce){return le(ce,15)},f.inflateInit2=le,f.inflate=function(ce,Re){var J,Ve,Ot,Me,ke,He,xt,de,ge,Je,nt,ot,We,nn,wt,Qt,mn,Un,Rn,Vr,ee,ht,ct,Ee,Se=0,$e=new g.Buf8(4),St=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ce||!ce.state||!ce.output||!ce.input&&ce.avail_in!==0)return A;(J=ce.state).mode===12&&(J.mode=13),ke=ce.next_out,Ot=ce.output,xt=ce.avail_out,Me=ce.next_in,Ve=ce.input,He=ce.avail_in,de=J.hold,ge=J.bits,Je=He,nt=xt,ht=R;e:for(;;)switch(J.mode){case F:if(J.wrap===0){J.mode=13;break}for(;ge<16;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(2&J.wrap&&de===35615){$e[J.check=0]=255&de,$e[1]=de>>>8&255,J.check=_(J.check,$e,2,0),ge=de=0,J.mode=2;break}if(J.flags=0,J.head&&(J.head.done=!1),!(1&J.wrap)||(((255&de)<<8)+(de>>8))%31){ce.msg="incorrect header check",J.mode=30;break}if((15&de)!=8){ce.msg="unknown compression method",J.mode=30;break}if(ge-=4,ee=8+(15&(de>>>=4)),J.wbits===0)J.wbits=ee;else if(ee>J.wbits){ce.msg="invalid window size",J.mode=30;break}J.dmax=1<<ee,ce.adler=J.check=1,J.mode=512&de?10:12,ge=de=0;break;case 2:for(;ge<16;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(J.flags=de,(255&J.flags)!=8){ce.msg="unknown compression method",J.mode=30;break}if(57344&J.flags){ce.msg="unknown header flags set",J.mode=30;break}J.head&&(J.head.text=de>>8&1),512&J.flags&&($e[0]=255&de,$e[1]=de>>>8&255,J.check=_(J.check,$e,2,0)),ge=de=0,J.mode=3;case 3:for(;ge<32;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}J.head&&(J.head.time=de),512&J.flags&&($e[0]=255&de,$e[1]=de>>>8&255,$e[2]=de>>>16&255,$e[3]=de>>>24&255,J.check=_(J.check,$e,4,0)),ge=de=0,J.mode=4;case 4:for(;ge<16;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}J.head&&(J.head.xflags=255&de,J.head.os=de>>8),512&J.flags&&($e[0]=255&de,$e[1]=de>>>8&255,J.check=_(J.check,$e,2,0)),ge=de=0,J.mode=5;case 5:if(1024&J.flags){for(;ge<16;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}J.length=de,J.head&&(J.head.extra_len=de),512&J.flags&&($e[0]=255&de,$e[1]=de>>>8&255,J.check=_(J.check,$e,2,0)),ge=de=0}else J.head&&(J.head.extra=null);J.mode=6;case 6:if(1024&J.flags&&(He<(ot=J.length)&&(ot=He),ot&&(J.head&&(ee=J.head.extra_len-J.length,J.head.extra||(J.head.extra=new Array(J.head.extra_len)),g.arraySet(J.head.extra,Ve,Me,ot,ee)),512&J.flags&&(J.check=_(J.check,Ve,ot,Me)),He-=ot,Me+=ot,J.length-=ot),J.length))break e;J.length=0,J.mode=7;case 7:if(2048&J.flags){if(He===0)break e;for(ot=0;ee=Ve[Me+ot++],J.head&&ee&&J.length<65536&&(J.head.name+=String.fromCharCode(ee)),ee&&ot<He;);if(512&J.flags&&(J.check=_(J.check,Ve,ot,Me)),He-=ot,Me+=ot,ee)break e}else J.head&&(J.head.name=null);J.length=0,J.mode=8;case 8:if(4096&J.flags){if(He===0)break e;for(ot=0;ee=Ve[Me+ot++],J.head&&ee&&J.length<65536&&(J.head.comment+=String.fromCharCode(ee)),ee&&ot<He;);if(512&J.flags&&(J.check=_(J.check,Ve,ot,Me)),He-=ot,Me+=ot,ee)break e}else J.head&&(J.head.comment=null);J.mode=9;case 9:if(512&J.flags){for(;ge<16;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(de!==(65535&J.check)){ce.msg="header crc mismatch",J.mode=30;break}ge=de=0}J.head&&(J.head.hcrc=J.flags>>9&1,J.head.done=!0),ce.adler=J.check=0,J.mode=12;break;case 10:for(;ge<32;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}ce.adler=J.check=H(de),ge=de=0,J.mode=11;case 11:if(J.havedict===0)return ce.next_out=ke,ce.avail_out=xt,ce.next_in=Me,ce.avail_in=He,J.hold=de,J.bits=ge,2;ce.adler=J.check=1,J.mode=12;case 12:if(Re===5||Re===6)break e;case 13:if(J.last){de>>>=7&ge,ge-=7&ge,J.mode=27;break}for(;ge<3;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}switch(J.last=1&de,ge-=1,3&(de>>>=1)){case 0:J.mode=14;break;case 1:if(De(J),J.mode=20,Re!==6)break;de>>>=2,ge-=2;break e;case 2:J.mode=17;break;case 3:ce.msg="invalid block type",J.mode=30}de>>>=2,ge-=2;break;case 14:for(de>>>=7&ge,ge-=7&ge;ge<32;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if((65535&de)!=(de>>>16^65535)){ce.msg="invalid stored block lengths",J.mode=30;break}if(J.length=65535&de,ge=de=0,J.mode=15,Re===6)break e;case 15:J.mode=16;case 16:if(ot=J.length){if(He<ot&&(ot=He),xt<ot&&(ot=xt),ot===0)break e;g.arraySet(Ot,Ve,Me,ot,ke),He-=ot,Me+=ot,xt-=ot,ke+=ot,J.length-=ot;break}J.mode=12;break;case 17:for(;ge<14;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(J.nlen=257+(31&de),de>>>=5,ge-=5,J.ndist=1+(31&de),de>>>=5,ge-=5,J.ncode=4+(15&de),de>>>=4,ge-=4,286<J.nlen||30<J.ndist){ce.msg="too many length or distance symbols",J.mode=30;break}J.have=0,J.mode=18;case 18:for(;J.have<J.ncode;){for(;ge<3;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}J.lens[St[J.have++]]=7&de,de>>>=3,ge-=3}for(;J.have<19;)J.lens[St[J.have++]]=0;if(J.lencode=J.lendyn,J.lenbits=7,ct={bits:J.lenbits},ht=C(0,J.lens,0,19,J.lencode,0,J.work,ct),J.lenbits=ct.bits,ht){ce.msg="invalid code lengths set",J.mode=30;break}J.have=0,J.mode=19;case 19:for(;J.have<J.nlen+J.ndist;){for(;Qt=(Se=J.lencode[de&(1<<J.lenbits)-1])>>>16&255,mn=65535&Se,!((wt=Se>>>24)<=ge);){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(mn<16)de>>>=wt,ge-=wt,J.lens[J.have++]=mn;else{if(mn===16){for(Ee=wt+2;ge<Ee;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(de>>>=wt,ge-=wt,J.have===0){ce.msg="invalid bit length repeat",J.mode=30;break}ee=J.lens[J.have-1],ot=3+(3&de),de>>>=2,ge-=2}else if(mn===17){for(Ee=wt+3;ge<Ee;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}ge-=wt,ee=0,ot=3+(7&(de>>>=wt)),de>>>=3,ge-=3}else{for(Ee=wt+7;ge<Ee;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}ge-=wt,ee=0,ot=11+(127&(de>>>=wt)),de>>>=7,ge-=7}if(J.have+ot>J.nlen+J.ndist){ce.msg="invalid bit length repeat",J.mode=30;break}for(;ot--;)J.lens[J.have++]=ee}}if(J.mode===30)break;if(J.lens[256]===0){ce.msg="invalid code -- missing end-of-block",J.mode=30;break}if(J.lenbits=9,ct={bits:J.lenbits},ht=C(I,J.lens,0,J.nlen,J.lencode,0,J.work,ct),J.lenbits=ct.bits,ht){ce.msg="invalid literal/lengths set",J.mode=30;break}if(J.distbits=6,J.distcode=J.distdyn,ct={bits:J.distbits},ht=C(O,J.lens,J.nlen,J.ndist,J.distcode,0,J.work,ct),J.distbits=ct.bits,ht){ce.msg="invalid distances set",J.mode=30;break}if(J.mode=20,Re===6)break e;case 20:J.mode=21;case 21:if(6<=He&&258<=xt){ce.next_out=ke,ce.avail_out=xt,ce.next_in=Me,ce.avail_in=He,J.hold=de,J.bits=ge,S(ce,nt),ke=ce.next_out,Ot=ce.output,xt=ce.avail_out,Me=ce.next_in,Ve=ce.input,He=ce.avail_in,de=J.hold,ge=J.bits,J.mode===12&&(J.back=-1);break}for(J.back=0;Qt=(Se=J.lencode[de&(1<<J.lenbits)-1])>>>16&255,mn=65535&Se,!((wt=Se>>>24)<=ge);){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(Qt&&!(240&Qt)){for(Un=wt,Rn=Qt,Vr=mn;Qt=(Se=J.lencode[Vr+((de&(1<<Un+Rn)-1)>>Un)])>>>16&255,mn=65535&Se,!(Un+(wt=Se>>>24)<=ge);){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}de>>>=Un,ge-=Un,J.back+=Un}if(de>>>=wt,ge-=wt,J.back+=wt,J.length=mn,Qt===0){J.mode=26;break}if(32&Qt){J.back=-1,J.mode=12;break}if(64&Qt){ce.msg="invalid literal/length code",J.mode=30;break}J.extra=15&Qt,J.mode=22;case 22:if(J.extra){for(Ee=J.extra;ge<Ee;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}J.length+=de&(1<<J.extra)-1,de>>>=J.extra,ge-=J.extra,J.back+=J.extra}J.was=J.length,J.mode=23;case 23:for(;Qt=(Se=J.distcode[de&(1<<J.distbits)-1])>>>16&255,mn=65535&Se,!((wt=Se>>>24)<=ge);){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(!(240&Qt)){for(Un=wt,Rn=Qt,Vr=mn;Qt=(Se=J.distcode[Vr+((de&(1<<Un+Rn)-1)>>Un)])>>>16&255,mn=65535&Se,!(Un+(wt=Se>>>24)<=ge);){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}de>>>=Un,ge-=Un,J.back+=Un}if(de>>>=wt,ge-=wt,J.back+=wt,64&Qt){ce.msg="invalid distance code",J.mode=30;break}J.offset=mn,J.extra=15&Qt,J.mode=24;case 24:if(J.extra){for(Ee=J.extra;ge<Ee;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}J.offset+=de&(1<<J.extra)-1,de>>>=J.extra,ge-=J.extra,J.back+=J.extra}if(J.offset>J.dmax){ce.msg="invalid distance too far back",J.mode=30;break}J.mode=25;case 25:if(xt===0)break e;if(ot=nt-xt,J.offset>ot){if((ot=J.offset-ot)>J.whave&&J.sane){ce.msg="invalid distance too far back",J.mode=30;break}We=ot>J.wnext?(ot-=J.wnext,J.wsize-ot):J.wnext-ot,ot>J.length&&(ot=J.length),nn=J.window}else nn=Ot,We=ke-J.offset,ot=J.length;for(xt<ot&&(ot=xt),xt-=ot,J.length-=ot;Ot[ke++]=nn[We++],--ot;);J.length===0&&(J.mode=21);break;case 26:if(xt===0)break e;Ot[ke++]=J.length,xt--,J.mode=21;break;case 27:if(J.wrap){for(;ge<32;){if(He===0)break e;He--,de|=Ve[Me++]<<ge,ge+=8}if(nt-=xt,ce.total_out+=nt,J.total+=nt,nt&&(ce.adler=J.check=J.flags?_(J.check,Ot,nt,ke-nt):b(J.check,Ot,nt,ke-nt)),nt=xt,(J.flags?de:H(de))!==J.check){ce.msg="incorrect data check",J.mode=30;break}ge=de=0}J.mode=28;case 28:if(J.wrap&&J.flags){for(;ge<32;){if(He===0)break e;He--,de+=Ve[Me++]<<ge,ge+=8}if(de!==(4294967295&J.total)){ce.msg="incorrect length check",J.mode=30;break}ge=de=0}J.mode=29;case 29:ht=1;break e;case 30:ht=-3;break e;case 31:return-4;case 32:default:return A}return ce.next_out=ke,ce.avail_out=xt,ce.next_in=Me,ce.avail_in=He,J.hold=de,J.bits=ge,(J.wsize||nt!==ce.avail_out&&J.mode<30&&(J.mode<27||Re!==4))&&rt(ce,ce.output,ce.next_out,nt-ce.avail_out)?(J.mode=31,-4):(Je-=ce.avail_in,nt-=ce.avail_out,ce.total_in+=Je,ce.total_out+=nt,J.total+=nt,J.wrap&&nt&&(ce.adler=J.check=J.flags?_(J.check,Ot,nt,ce.next_out-nt):b(J.check,Ot,nt,ce.next_out-nt)),ce.data_type=J.bits+(J.last?64:0)+(J.mode===12?128:0)+(J.mode===20||J.mode===15?256:0),(Je==0&&nt===0||Re===4)&&ht===R&&(ht=-5),ht)},f.inflateEnd=function(ce){if(!ce||!ce.state)return A;var Re=ce.state;return Re.window&&(Re.window=null),ce.state=null,R},f.inflateGetHeader=function(ce,Re){var J;return ce&&ce.state&&2&(J=ce.state).wrap?((J.head=Re).done=!1,R):A},f.inflateSetDictionary=function(ce,Re){var J,Ve=Re.length;return ce&&ce.state?(J=ce.state).wrap!==0&&J.mode!==11?A:J.mode===11&&b(1,Re,Ve,0)!==J.check?-3:rt(ce,Re,Ve,Ve)?(J.mode=31,-4):(J.havedict=1,R):A},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(l,d,f){var g=l("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(I,O,R,A,F,L,V,H){var K,Z,re,ne,le,Ce,ve,we,De,rt=H.bits,ce=0,Re=0,J=0,Ve=0,Ot=0,Me=0,ke=0,He=0,xt=0,de=0,ge=null,Je=0,nt=new g.Buf16(16),ot=new g.Buf16(16),We=null,nn=0;for(ce=0;ce<=15;ce++)nt[ce]=0;for(Re=0;Re<A;Re++)nt[O[R+Re]]++;for(Ot=rt,Ve=15;1<=Ve&&nt[Ve]===0;Ve--);if(Ve<Ot&&(Ot=Ve),Ve===0)return F[L++]=20971520,F[L++]=20971520,H.bits=1,0;for(J=1;J<Ve&&nt[J]===0;J++);for(Ot<J&&(Ot=J),ce=He=1;ce<=15;ce++)if(He<<=1,(He-=nt[ce])<0)return-1;if(0<He&&(I===0||Ve!==1))return-1;for(ot[1]=0,ce=1;ce<15;ce++)ot[ce+1]=ot[ce]+nt[ce];for(Re=0;Re<A;Re++)O[R+Re]!==0&&(V[ot[O[R+Re]]++]=Re);if(Ce=I===0?(ge=We=V,19):I===1?(ge=b,Je-=257,We=_,nn-=257,256):(ge=S,We=C,-1),ce=J,le=L,ke=Re=de=0,re=-1,ne=(xt=1<<(Me=Ot))-1,I===1&&852<xt||I===2&&592<xt)return 1;for(;;){for(ve=ce-ke,De=V[Re]<Ce?(we=0,V[Re]):V[Re]>Ce?(we=We[nn+V[Re]],ge[Je+V[Re]]):(we=96,0),K=1<<ce-ke,J=Z=1<<Me;F[le+(de>>ke)+(Z-=K)]=ve<<24|we<<16|De|0,Z!==0;);for(K=1<<ce-1;de&K;)K>>=1;if(K!==0?(de&=K-1,de+=K):de=0,Re++,--nt[ce]==0){if(ce===Ve)break;ce=O[R+V[Re]]}if(Ot<ce&&(de&ne)!==re){for(ke===0&&(ke=Ot),le+=J,He=1<<(Me=ce-ke);Me+ke<Ve&&!((He-=nt[Me+ke])<=0);)Me++,He<<=1;if(xt+=1<<Me,I===1&&852<xt||I===2&&592<xt)return 1;F[re=de&ne]=Ot<<24|Me<<16|le-L|0}}return de!==0&&(F[le+de]=ce-ke<<24|64<<16|0),H.bits=Ot,0}},{"../utils/common":41}],51:[function(l,d,f){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(l,d,f){var g=l("../utils/common"),b=0,_=1;function S(Se){for(var $e=Se.length;0<=--$e;)Se[$e]=0}var C=0,I=29,O=256,R=O+1+I,A=30,F=19,L=2*R+1,V=15,H=16,K=7,Z=256,re=16,ne=17,le=18,Ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],De=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=new Array(2*(R+2));S(rt);var ce=new Array(2*A);S(ce);var Re=new Array(512);S(Re);var J=new Array(256);S(J);var Ve=new Array(I);S(Ve);var Ot,Me,ke,He=new Array(A);function xt(Se,$e,St,At,et){this.static_tree=Se,this.extra_bits=$e,this.extra_base=St,this.elems=At,this.max_length=et,this.has_stree=Se&&Se.length}function de(Se,$e){this.dyn_tree=Se,this.max_code=0,this.stat_desc=$e}function ge(Se){return Se<256?Re[Se]:Re[256+(Se>>>7)]}function Je(Se,$e){Se.pending_buf[Se.pending++]=255&$e,Se.pending_buf[Se.pending++]=$e>>>8&255}function nt(Se,$e,St){Se.bi_valid>H-St?(Se.bi_buf|=$e<<Se.bi_valid&65535,Je(Se,Se.bi_buf),Se.bi_buf=$e>>H-Se.bi_valid,Se.bi_valid+=St-H):(Se.bi_buf|=$e<<Se.bi_valid&65535,Se.bi_valid+=St)}function ot(Se,$e,St){nt(Se,St[2*$e],St[2*$e+1])}function We(Se,$e){for(var St=0;St|=1&Se,Se>>>=1,St<<=1,0<--$e;);return St>>>1}function nn(Se,$e,St){var At,et,Bt=new Array(V+1),Mt=0;for(At=1;At<=V;At++)Bt[At]=Mt=Mt+St[At-1]<<1;for(et=0;et<=$e;et++){var It=Se[2*et+1];It!==0&&(Se[2*et]=We(Bt[It]++,It))}}function wt(Se){var $e;for($e=0;$e<R;$e++)Se.dyn_ltree[2*$e]=0;for($e=0;$e<A;$e++)Se.dyn_dtree[2*$e]=0;for($e=0;$e<F;$e++)Se.bl_tree[2*$e]=0;Se.dyn_ltree[2*Z]=1,Se.opt_len=Se.static_len=0,Se.last_lit=Se.matches=0}function Qt(Se){8<Se.bi_valid?Je(Se,Se.bi_buf):0<Se.bi_valid&&(Se.pending_buf[Se.pending++]=Se.bi_buf),Se.bi_buf=0,Se.bi_valid=0}function mn(Se,$e,St,At){var et=2*$e,Bt=2*St;return Se[et]<Se[Bt]||Se[et]===Se[Bt]&&At[$e]<=At[St]}function Un(Se,$e,St){for(var At=Se.heap[St],et=St<<1;et<=Se.heap_len&&(et<Se.heap_len&&mn($e,Se.heap[et+1],Se.heap[et],Se.depth)&&et++,!mn($e,At,Se.heap[et],Se.depth));)Se.heap[St]=Se.heap[et],St=et,et<<=1;Se.heap[St]=At}function Rn(Se,$e,St){var At,et,Bt,Mt,It=0;if(Se.last_lit!==0)for(;At=Se.pending_buf[Se.d_buf+2*It]<<8|Se.pending_buf[Se.d_buf+2*It+1],et=Se.pending_buf[Se.l_buf+It],It++,At===0?ot(Se,et,$e):(ot(Se,(Bt=J[et])+O+1,$e),(Mt=Ce[Bt])!==0&&nt(Se,et-=Ve[Bt],Mt),ot(Se,Bt=ge(--At),St),(Mt=ve[Bt])!==0&&nt(Se,At-=He[Bt],Mt)),It<Se.last_lit;);ot(Se,Z,$e)}function Vr(Se,$e){var St,At,et,Bt=$e.dyn_tree,Mt=$e.stat_desc.static_tree,It=$e.stat_desc.has_stree,An=$e.stat_desc.elems,Ir=-1;for(Se.heap_len=0,Se.heap_max=L,St=0;St<An;St++)Bt[2*St]!==0?(Se.heap[++Se.heap_len]=Ir=St,Se.depth[St]=0):Bt[2*St+1]=0;for(;Se.heap_len<2;)Bt[2*(et=Se.heap[++Se.heap_len]=Ir<2?++Ir:0)]=1,Se.depth[et]=0,Se.opt_len--,It&&(Se.static_len-=Mt[2*et+1]);for($e.max_code=Ir,St=Se.heap_len>>1;1<=St;St--)Un(Se,Bt,St);for(et=An;St=Se.heap[1],Se.heap[1]=Se.heap[Se.heap_len--],Un(Se,Bt,1),At=Se.heap[1],Se.heap[--Se.heap_max]=St,Se.heap[--Se.heap_max]=At,Bt[2*et]=Bt[2*St]+Bt[2*At],Se.depth[et]=(Se.depth[St]>=Se.depth[At]?Se.depth[St]:Se.depth[At])+1,Bt[2*St+1]=Bt[2*At+1]=et,Se.heap[1]=et++,Un(Se,Bt,1),2<=Se.heap_len;);Se.heap[--Se.heap_max]=Se.heap[1],function(Jn,_o){var Nf,Fo,nc,Ui,Lv,d_,rc=_o.dyn_tree,h_=_o.max_code,wC=_o.stat_desc.static_tree,xC=_o.stat_desc.has_stree,SC=_o.stat_desc.extra_bits,p_=_o.stat_desc.extra_base,Ql=_o.stat_desc.max_length,ic=0;for(Ui=0;Ui<=V;Ui++)Jn.bl_count[Ui]=0;for(rc[2*Jn.heap[Jn.heap_max]+1]=0,Nf=Jn.heap_max+1;Nf<L;Nf++)Ql<(Ui=rc[2*rc[2*(Fo=Jn.heap[Nf])+1]+1]+1)&&(Ui=Ql,ic++),rc[2*Fo+1]=Ui,h_<Fo||(Jn.bl_count[Ui]++,Lv=0,p_<=Fo&&(Lv=SC[Fo-p_]),d_=rc[2*Fo],Jn.opt_len+=d_*(Ui+Lv),xC&&(Jn.static_len+=d_*(wC[2*Fo+1]+Lv)));if(ic!==0){do{for(Ui=Ql-1;Jn.bl_count[Ui]===0;)Ui--;Jn.bl_count[Ui]--,Jn.bl_count[Ui+1]+=2,Jn.bl_count[Ql]--,ic-=2}while(0<ic);for(Ui=Ql;Ui!==0;Ui--)for(Fo=Jn.bl_count[Ui];Fo!==0;)h_<(nc=Jn.heap[--Nf])||(rc[2*nc+1]!==Ui&&(Jn.opt_len+=(Ui-rc[2*nc+1])*rc[2*nc],rc[2*nc+1]=Ui),Fo--)}}(Se,$e),nn(Bt,Ir,Se.bl_count)}function ee(Se,$e,St){var At,et,Bt=-1,Mt=$e[1],It=0,An=7,Ir=4;for(Mt===0&&(An=138,Ir=3),$e[2*(St+1)+1]=65535,At=0;At<=St;At++)et=Mt,Mt=$e[2*(At+1)+1],++It<An&&et===Mt||(It<Ir?Se.bl_tree[2*et]+=It:et!==0?(et!==Bt&&Se.bl_tree[2*et]++,Se.bl_tree[2*re]++):It<=10?Se.bl_tree[2*ne]++:Se.bl_tree[2*le]++,Bt=et,Ir=(It=0)===Mt?(An=138,3):et===Mt?(An=6,3):(An=7,4))}function ht(Se,$e,St){var At,et,Bt=-1,Mt=$e[1],It=0,An=7,Ir=4;for(Mt===0&&(An=138,Ir=3),At=0;At<=St;At++)if(et=Mt,Mt=$e[2*(At+1)+1],!(++It<An&&et===Mt)){if(It<Ir)for(;ot(Se,et,Se.bl_tree),--It!=0;);else et!==0?(et!==Bt&&(ot(Se,et,Se.bl_tree),It--),ot(Se,re,Se.bl_tree),nt(Se,It-3,2)):It<=10?(ot(Se,ne,Se.bl_tree),nt(Se,It-3,3)):(ot(Se,le,Se.bl_tree),nt(Se,It-11,7));Bt=et,Ir=(It=0)===Mt?(An=138,3):et===Mt?(An=6,3):(An=7,4)}}S(He);var ct=!1;function Ee(Se,$e,St,At){nt(Se,(C<<1)+(At?1:0),3),function(et,Bt,Mt,It){Qt(et),It&&(Je(et,Mt),Je(et,~Mt)),g.arraySet(et.pending_buf,et.window,Bt,Mt,et.pending),et.pending+=Mt}(Se,$e,St,!0)}f._tr_init=function(Se){ct||(function(){var $e,St,At,et,Bt,Mt=new Array(V+1);for(et=At=0;et<I-1;et++)for(Ve[et]=At,$e=0;$e<1<<Ce[et];$e++)J[At++]=et;for(J[At-1]=et,et=Bt=0;et<16;et++)for(He[et]=Bt,$e=0;$e<1<<ve[et];$e++)Re[Bt++]=et;for(Bt>>=7;et<A;et++)for(He[et]=Bt<<7,$e=0;$e<1<<ve[et]-7;$e++)Re[256+Bt++]=et;for(St=0;St<=V;St++)Mt[St]=0;for($e=0;$e<=143;)rt[2*$e+1]=8,$e++,Mt[8]++;for(;$e<=255;)rt[2*$e+1]=9,$e++,Mt[9]++;for(;$e<=279;)rt[2*$e+1]=7,$e++,Mt[7]++;for(;$e<=287;)rt[2*$e+1]=8,$e++,Mt[8]++;for(nn(rt,R+1,Mt),$e=0;$e<A;$e++)ce[2*$e+1]=5,ce[2*$e]=We($e,5);Ot=new xt(rt,Ce,O+1,R,V),Me=new xt(ce,ve,0,A,V),ke=new xt(new Array(0),we,0,F,K)}(),ct=!0),Se.l_desc=new de(Se.dyn_ltree,Ot),Se.d_desc=new de(Se.dyn_dtree,Me),Se.bl_desc=new de(Se.bl_tree,ke),Se.bi_buf=0,Se.bi_valid=0,wt(Se)},f._tr_stored_block=Ee,f._tr_flush_block=function(Se,$e,St,At){var et,Bt,Mt=0;0<Se.level?(Se.strm.data_type===2&&(Se.strm.data_type=function(It){var An,Ir=4093624447;for(An=0;An<=31;An++,Ir>>>=1)if(1&Ir&&It.dyn_ltree[2*An]!==0)return b;if(It.dyn_ltree[18]!==0||It.dyn_ltree[20]!==0||It.dyn_ltree[26]!==0)return _;for(An=32;An<O;An++)if(It.dyn_ltree[2*An]!==0)return _;return b}(Se)),Vr(Se,Se.l_desc),Vr(Se,Se.d_desc),Mt=function(It){var An;for(ee(It,It.dyn_ltree,It.l_desc.max_code),ee(It,It.dyn_dtree,It.d_desc.max_code),Vr(It,It.bl_desc),An=F-1;3<=An&&It.bl_tree[2*De[An]+1]===0;An--);return It.opt_len+=3*(An+1)+5+5+4,An}(Se),et=Se.opt_len+3+7>>>3,(Bt=Se.static_len+3+7>>>3)<=et&&(et=Bt)):et=Bt=St+5,St+4<=et&&$e!==-1?Ee(Se,$e,St,At):Se.strategy===4||Bt===et?(nt(Se,2+(At?1:0),3),Rn(Se,rt,ce)):(nt(Se,4+(At?1:0),3),function(It,An,Ir,Jn){var _o;for(nt(It,An-257,5),nt(It,Ir-1,5),nt(It,Jn-4,4),_o=0;_o<Jn;_o++)nt(It,It.bl_tree[2*De[_o]+1],3);ht(It,It.dyn_ltree,An-1),ht(It,It.dyn_dtree,Ir-1)}(Se,Se.l_desc.max_code+1,Se.d_desc.max_code+1,Mt+1),Rn(Se,Se.dyn_ltree,Se.dyn_dtree)),wt(Se),At&&Qt(Se)},f._tr_tally=function(Se,$e,St){return Se.pending_buf[Se.d_buf+2*Se.last_lit]=$e>>>8&255,Se.pending_buf[Se.d_buf+2*Se.last_lit+1]=255&$e,Se.pending_buf[Se.l_buf+Se.last_lit]=255&St,Se.last_lit++,$e===0?Se.dyn_ltree[2*St]++:(Se.matches++,$e--,Se.dyn_ltree[2*(J[St]+O+1)]++,Se.dyn_dtree[2*ge($e)]++),Se.last_lit===Se.lit_bufsize-1},f._tr_align=function(Se){nt(Se,2,3),ot(Se,Z,rt),function($e){$e.bi_valid===16?(Je($e,$e.bi_buf),$e.bi_buf=0,$e.bi_valid=0):8<=$e.bi_valid&&($e.pending_buf[$e.pending++]=255&$e.bi_buf,$e.bi_buf>>=8,$e.bi_valid-=8)}(Se)}},{"../utils/common":41}],53:[function(l,d,f){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(l,d,f){(function(g){(function(b,_){if(!b.setImmediate){var S,C,I,O,R=1,A={},F=!1,L=b.document,V=Object.getPrototypeOf&&Object.getPrototypeOf(b);V=V&&V.setTimeout?V:b,S={}.toString.call(b.process)==="[object process]"?function(re){process.nextTick(function(){K(re)})}:function(){if(b.postMessage&&!b.importScripts){var re=!0,ne=b.onmessage;return b.onmessage=function(){re=!1},b.postMessage("","*"),b.onmessage=ne,re}}()?(O="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",Z,!1):b.attachEvent("onmessage",Z),function(re){b.postMessage(O+re,"*")}):b.MessageChannel?((I=new MessageChannel).port1.onmessage=function(re){K(re.data)},function(re){I.port2.postMessage(re)}):L&&"onreadystatechange"in L.createElement("script")?(C=L.documentElement,function(re){var ne=L.createElement("script");ne.onreadystatechange=function(){K(re),ne.onreadystatechange=null,C.removeChild(ne),ne=null},C.appendChild(ne)}):function(re){setTimeout(K,0,re)},V.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ne=new Array(arguments.length-1),le=0;le<ne.length;le++)ne[le]=arguments[le+1];var Ce={callback:re,args:ne};return A[R]=Ce,S(R),R++},V.clearImmediate=H}function H(re){delete A[re]}function K(re){if(F)setTimeout(K,0,re);else{var ne=A[re];if(ne){F=!0;try{(function(le){var Ce=le.callback,ve=le.args;switch(ve.length){case 0:Ce();break;case 1:Ce(ve[0]);break;case 2:Ce(ve[0],ve[1]);break;case 3:Ce(ve[0],ve[1],ve[2]);break;default:Ce.apply(_,ve)}})(ne)}finally{H(re),F=!1}}}}function Z(re){re.source===b&&typeof re.data=="string"&&re.data.indexOf(O)===0&&K(+re.data.slice(O.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof Gi<"u"?Gi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),Bz,IR,qte,Uz,Yte,Zte,OE,Qte,zz,Jte,RR,LE,NE,bf,ene,tne,nne,jb,Fa,rne,ine,Vz,DR,L2e=P(()=>{Bz=q(Oe(),1),IR=q(Oe(),1),qte=s=>typeof s=="function",Uz=(s,a)=>qte(s)?s(a):s,Yte=(()=>{let s=0;return()=>(++s).toString()})(),Zte=20,OE=new Map,Qte=1e3,zz=s=>{if(OE.has(s))return;let a=setTimeout(()=>{OE.delete(s),bf({type:4,toastId:s})},Qte);OE.set(s,a)},Jte=s=>{let a=OE.get(s);a&&clearTimeout(a)},RR=(s,a)=>{switch(a.type){case 0:return z(N({},s),{toasts:[a.toast,...s.toasts].slice(0,Zte)});case 1:return a.toast.id&&Jte(a.toast.id),z(N({},s),{toasts:s.toasts.map(g=>g.id===a.toast.id?N(N({},g),a.toast):g)});case 2:let{toast:l}=a;return s.toasts.find(g=>g.id===l.id)?RR(s,{type:1,toast:l}):RR(s,{type:0,toast:l});case 3:let{toastId:d}=a;return d?zz(d):s.toasts.forEach(g=>{zz(g.id)}),z(N({},s),{toasts:s.toasts.map(g=>g.id===d||d===void 0?z(N({},g),{visible:!1}):g)});case 4:return a.toastId===void 0?z(N({},s),{toasts:[]}):z(N({},s),{toasts:s.toasts.filter(g=>g.id!==a.toastId)});case 5:return z(N({},s),{pausedAt:a.time});case 6:let f=a.time-(s.pausedAt||0);return z(N({},s),{pausedAt:void 0,toasts:s.toasts.map(g=>z(N({},g),{pauseDuration:g.pauseDuration+f}))})}},LE=[],NE={toasts:[],pausedAt:void 0},bf=s=>{NE=RR(NE,s),LE.forEach(a=>{a(NE)})},ene={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},tne=(s={})=>{let[a,l]=(0,Bz.useState)(NE);(0,Bz.useEffect)(()=>(LE.push(l),()=>{let f=LE.indexOf(l);f>-1&&LE.splice(f,1)}),[a]);let d=a.toasts.map(f=>{var g,b;return z(N(N(N({},s),s[f.type]),f),{duration:f.duration||((g=s[f.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||ene[f.type],style:N(N(N({},s.style),(b=s[f.type])==null?void 0:b.style),f.style)})});return z(N({},a),{toasts:d})},nne=(s,a="blank",l)=>z(N({createdAt:Date.now(),visible:!0,type:a,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0},l),{id:(l==null?void 0:l.id)||Yte()}),jb=s=>(a,l)=>{let d=nne(a,s,l);return bf({type:2,toast:d}),d.id},Fa=(s,a)=>jb("blank")(s,a),Fa.error=jb("error"),Fa.success=jb("success"),Fa.loading=jb("loading"),Fa.custom=jb("custom"),Fa.dismiss=s=>{bf({type:3,toastId:s})},Fa.remove=s=>bf({type:4,toastId:s}),Fa.promise=(s,a,l)=>{let d=Fa.loading(a.loading,N(N({},l),l==null?void 0:l.loading));return s.then(f=>(Fa.success(Uz(a.success,f),N(N({id:d},l),l==null?void 0:l.success)),f)).catch(f=>{Fa.error(Uz(a.error,f),N(N({id:d},l),l==null?void 0:l.error))}),s},rne=(s,a)=>{bf({type:1,toast:{id:s,height:a}})},ine=()=>{bf({type:5,time:Date.now()})},Vz=s=>{let{toasts:a,pausedAt:l}=tne(s);(0,IR.useEffect)(()=>{if(l)return;let g=Date.now(),b=a.map(_=>{if(_.duration===1/0)return;let S=(_.duration||0)+_.pauseDuration-(g-_.createdAt);if(S<0){_.visible&&Fa.dismiss(_.id);return}return setTimeout(()=>Fa.dismiss(_.id),S)});return()=>{b.forEach(_=>_&&clearTimeout(_))}},[a,l]);let d=(0,IR.useCallback)(()=>{l&&bf({type:6,time:Date.now()})},[l]),f=(0,IR.useCallback)((g,b)=>{let{reverseOrder:_=!1,gutter:S=8,defaultPosition:C}=b||{},I=a.filter(A=>(A.position||C)===(g.position||C)&&A.height),O=I.findIndex(A=>A.id===g.id),R=I.filter((A,F)=>F<O&&A.visible).length;return I.filter(A=>A.visible).slice(..._?[R+1]:[0,R]).reduce((A,F)=>A+(F.height||0)+S,0)},[a]);return{toasts:a,handlers:{updateHeight:rne,startPause:ine,endPause:d,calculateOffset:f}}},DR=Fa});function sne(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function N2e(s){iv=s}function qs(s,a){if(a){if(pne.test(s))return s.replace(fne,jz)}else if(mne.test(s))return s.replace(gne,jz);return s}function one(s){return s.replace(yne,(a,l)=>(l=l.toLowerCase(),l==="colon"?":":l.charAt(0)==="#"?l.charAt(1)==="x"?String.fromCharCode(parseInt(l.substring(2),16)):String.fromCharCode(+l.substring(1)):""))}function ai(s,a){s=typeof s=="string"?s:s.source,a=a||"";let l={replace:(d,f)=>(f=f.source||f,f=f.replace(bne,"$1"),s=s.replace(d,f),l),getRegex:()=>new RegExp(s,a)};return l}function ane(s,a,l){if(s){let d;try{d=decodeURIComponent(one(l)).replace(_ne,"").toLowerCase()}catch{return null}if(d.indexOf("javascript:")===0||d.indexOf("vbscript:")===0||d.indexOf("data:")===0)return null}a&&!wne.test(l)&&(l=F2e(a,l));try{l=encodeURI(l).replace(/%25/g,"%")}catch{return null}return l}function F2e(s,a){FE[" "+s]||(xne.test(s)?FE[" "+s]=s+"/":FE[" "+s]=OR(s,"/",!0)),s=FE[" "+s];let l=s.indexOf(":")===-1;return a.substring(0,2)==="//"?l?a:s.replace(Sne,"$1")+a:a.charAt(0)==="/"?l?a:s.replace(Ene,"$1")+a:s+a}function Xu(s){let a=1,l,d;for(;a<arguments.length;a++){l=arguments[a];for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s}function lne(s,a){let l=s.replace(/\|/g,(g,b,_)=>{let S=!1,C=b;for(;--C>=0&&_[C]==="\\";)S=!S;return S?"|":" |"}),d=l.split(/ \|/),f=0;if(d[0].trim()||d.shift(),d.length>0&&!d[d.length-1].trim()&&d.pop(),d.length>a)d.splice(a);else for(;d.length<a;)d.push("");for(;f<d.length;f++)d[f]=d[f].trim().replace(/\\\|/g,"|");return d}function OR(s,a,l){let d=s.length;if(d===0)return"";let f=0;for(;f<d;){let g=s.charAt(d-f-1);if(g===a&&!l)f++;else if(g!==a&&l)f++;else break}return s.slice(0,d-f)}function B2e(s,a){if(s.indexOf(a[1])===-1)return-1;let l=s.length,d=0,f=0;for(;f<l;f++)if(s[f]==="\\")f++;else if(s[f]===a[0])d++;else if(s[f]===a[1]&&(d--,d<0))return f;return-1}function une(s){s&&s.sanitize&&!s.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function cne(s,a){if(a<1)return"";let l="";for(;a>1;)a&1&&(l+=s),a>>=1,s+=s;return l+s}function dne(s,a,l,d){let f=a.href,g=a.title?qs(a.title):null,b=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){d.state.inLink=!0;let _={type:"link",raw:l,href:f,title:g,text:b,tokens:d.inlineTokens(b)};return d.state.inLink=!1,_}return{type:"image",raw:l,href:f,title:g,text:qs(b)}}function U2e(s,a){let l=s.match(/^(\s+)(?:```)/);if(l===null)return a;let d=l[1];return a.split(`
`).map(f=>{let g=f.match(/^\s+/);if(g===null)return f;let[b]=g;return b.length>=d.length?f.slice(d.length):f}).join(`
`)}function z2e(s){return s.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function hne(s){let a="",l,d,f=s.length;for(l=0;l<f;l++)d=s.charCodeAt(l),Math.random()>.5&&(d="x"+d.toString(16)),a+="&#"+d+";";return a}function Zn(s,a,l){if(typeof s>"u"||s===null)throw new Error("marked(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");if(typeof a=="function"&&(l=a,a=null),a=Xu({},Zn.defaults,a||{}),une(a),l){let f=a.highlight,g;try{g=sv.lex(s,a)}catch(S){return l(S)}let b=function(S){let C;if(!S)try{a.walkTokens&&Zn.walkTokens(g,a.walkTokens),C=_f.parse(g,a)}catch(I){S=I}return a.highlight=f,S?l(S):l(null,C)};if(!f||f.length<3||(delete a.highlight,!g.length))return b();let _=0;Zn.walkTokens(g,function(S){S.type==="code"&&(_++,setTimeout(()=>{f(S.text,S.lang,function(C,I){if(C)return b(C);I!=null&&I!==S.text&&(S.text=I,S.escaped=!0),_--,_===0&&b()})},0))}),_===0&&b();return}function d(f){if(f.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+qs(f.message+"",!0)+"</pre>";throw f}try{let f=sv.lex(s,a);if(a.walkTokens){if(a.async)return Promise.all(Zn.walkTokens(f,a.walkTokens)).then(()=>_f.parse(f,a)).catch(d);Zn.walkTokens(f,a.walkTokens)}return _f.parse(f,a)}catch(f){d(f)}}var iv,pne,fne,mne,gne,vne,jz,yne,bne,_ne,wne,FE,xne,Sne,Ene,BE,LR,Bn,cn,sv,NR,Hz,Gz,_f,V2e=P(()=>{iv=sne(),pne=/[&<>"']/,fne=/[&<>"']/g,mne=/[<>"']|&(?!#?\w+;)/,gne=/[<>"']|&(?!#?\w+;)/g,vne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jz=s=>vne[s],yne=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,bne=/(^|[^\[])\^/g,_ne=/[^\w:]/g,wne=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,FE={},xne=/^[^:]+:\/*[^/]*$/,Sne=/^([^:]+:)[\s\S]*$/,Ene=/^([^:]+:\/*[^/]*)[\s\S]*$/,BE={exec:function(){}},LR=class{constructor(s){this.options=s||iv}space(s){let a=this.rules.block.newline.exec(s);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(s){let a=this.rules.block.code.exec(s);if(a){let l=a[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?l:OR(l,`
`)}}}fences(s){let a=this.rules.block.fences.exec(s);if(a){let l=a[0],d=U2e(l,a[3]||"");return{type:"code",raw:l,lang:a[2]?a[2].trim():a[2],text:d}}}heading(s){let a=this.rules.block.heading.exec(s);if(a){let l=a[2].trim();if(/#$/.test(l)){let d=OR(l,"#");(this.options.pedantic||!d||/ $/.test(d))&&(l=d.trim())}return{type:"heading",raw:a[0],depth:a[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(s){let a=this.rules.block.hr.exec(s);if(a)return{type:"hr",raw:a[0]}}blockquote(s){let a=this.rules.block.blockquote.exec(s);if(a){let l=a[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:a[0],tokens:this.lexer.blockTokens(l,[]),text:l}}}list(s){let a=this.rules.block.list.exec(s);if(a){let l,d,f,g,b,_,S,C,I,O,R,A,F=a[1].trim(),L=F.length>1,V={type:"list",raw:"",ordered:L,start:L?+F.slice(0,-1):"",loose:!1,items:[]};F=L?"\\d{1,9}\\".concat(F.slice(-1)):"\\".concat(F),this.options.pedantic&&(F=L?F:"[*+-]");let H=new RegExp("^( {0,3}".concat(F,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;s&&(A=!1,!(!(a=H.exec(s))||this.rules.block.hr.test(s)));){if(l=a[0],s=s.substring(l.length),C=a[2].split(`
`,1)[0],I=s.split(`
`,1)[0],this.options.pedantic?(g=2,R=C.trimLeft()):(g=a[2].search(/[^ ]/),g=g>4?1:g,R=C.slice(g),g+=a[1].length),_=!1,!C&&/^ *$/.test(I)&&(l+=I+`
`,s=s.substring(I.length+1),A=!0),!A){let Z=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),re=new RegExp("^ {0,".concat(Math.min(3,g-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:```|~~~)")),le=new RegExp("^ {0,".concat(Math.min(3,g-1),"}#"));for(;s&&(O=s.split(`
`,1)[0],C=O,this.options.pedantic&&(C=C.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(C)||le.test(C)||Z.test(C)||re.test(s)));){if(C.search(/[^ ]/)>=g||!C.trim())R+=`
`+C.slice(g);else if(!_)R+=`
`+C;else break;!_&&!C.trim()&&(_=!0),l+=O+`
`,s=s.substring(O.length+1)}}V.loose||(S?V.loose=!0:/\n *\n *$/.test(l)&&(S=!0)),this.options.gfm&&(d=/^\[[ xX]\] /.exec(R),d&&(f=d[0]!=="[ ] ",R=R.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:l,task:!!d,checked:f,loose:!1,text:R}),V.raw+=l}V.items[V.items.length-1].raw=l.trimRight(),V.items[V.items.length-1].text=R.trimRight(),V.raw=V.raw.trimRight();let K=V.items.length;for(b=0;b<K;b++){this.lexer.state.top=!1,V.items[b].tokens=this.lexer.blockTokens(V.items[b].text,[]);let Z=V.items[b].tokens.filter(ne=>ne.type==="space"),re=Z.every(ne=>{let le=ne.raw.split(""),Ce=0;for(let ve of le)if(ve===`
`&&(Ce+=1),Ce>1)return!0;return!1});!V.loose&&Z.length&&re&&(V.loose=!0,V.items[b].loose=!0)}return V}}html(s){let a=this.rules.block.html.exec(s);if(a){let l={type:"html",raw:a[0],pre:!this.options.sanitizer&&(a[1]==="pre"||a[1]==="script"||a[1]==="style"),text:a[0]};if(this.options.sanitize){let d=this.options.sanitizer?this.options.sanitizer(a[0]):qs(a[0]);l.type="paragraph",l.text=d,l.tokens=this.lexer.inline(d)}return l}}def(s){let a=this.rules.block.def.exec(s);if(a)return a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),{type:"def",tag:a[1].toLowerCase().replace(/\s+/g," "),raw:a[0],href:a[2],title:a[3]}}table(s){let a=this.rules.block.table.exec(s);if(a){let l={type:"table",header:lne(a[1]).map(d=>({text:d})),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(l.header.length===l.align.length){l.raw=a[0];let d=l.align.length,f,g,b,_;for(f=0;f<d;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(d=l.rows.length,f=0;f<d;f++)l.rows[f]=lne(l.rows[f],l.header.length).map(S=>({text:S}));for(d=l.header.length,g=0;g<d;g++)l.header[g].tokens=this.lexer.inline(l.header[g].text);for(d=l.rows.length,g=0;g<d;g++)for(_=l.rows[g],b=0;b<_.length;b++)_[b].tokens=this.lexer.inline(_[b].text);return l}}}lheading(s){let a=this.rules.block.lheading.exec(s);if(a)return{type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:this.lexer.inline(a[1])}}paragraph(s){let a=this.rules.block.paragraph.exec(s);if(a){let l=a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1];return{type:"paragraph",raw:a[0],text:l,tokens:this.lexer.inline(l)}}}text(s){let a=this.rules.block.text.exec(s);if(a)return{type:"text",raw:a[0],text:a[0],tokens:this.lexer.inline(a[0])}}escape(s){let a=this.rules.inline.escape.exec(s);if(a)return{type:"escape",raw:a[0],text:qs(a[1])}}tag(s){let a=this.rules.inline.tag.exec(s);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):qs(a[0]):a[0]}}link(s){let a=this.rules.inline.link.exec(s);if(a){let l=a[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;let g=OR(l.slice(0,-1),"\\");if((l.length-g.length)%2===0)return}else{let g=B2e(a[2],"()");if(g>-1){let b=(a[0].indexOf("!")===0?5:4)+a[1].length+g;a[2]=a[2].substring(0,g),a[0]=a[0].substring(0,b).trim(),a[3]=""}}let d=a[2],f="";if(this.options.pedantic){let g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(d);g&&(d=g[1],f=g[3])}else f=a[3]?a[3].slice(1,-1):"";return d=d.trim(),/^</.test(d)&&(this.options.pedantic&&!/>$/.test(l)?d=d.slice(1):d=d.slice(1,-1)),dne(a,{href:d&&d.replace(this.rules.inline._escapes,"$1"),title:f&&f.replace(this.rules.inline._escapes,"$1")},a[0],this.lexer)}}reflink(s,a){let l;if((l=this.rules.inline.reflink.exec(s))||(l=this.rules.inline.nolink.exec(s))){let d=(l[2]||l[1]).replace(/\s+/g," ");if(d=a[d.toLowerCase()],!d||!d.href){let f=l[0].charAt(0);return{type:"text",raw:f,text:f}}return dne(l,d,l[0],this.lexer)}}emStrong(s,a,l=""){let d=this.rules.inline.emStrong.lDelim.exec(s);if(!d||d[3]&&l.match(/[\p{L}\p{N}]/u))return;let f=d[1]||d[2]||"";if(!f||f&&(l===""||this.rules.inline.punctuation.exec(l))){let g=d[0].length-1,b,_,S=g,C=0,I=d[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(I.lastIndex=0,a=a.slice(-1*s.length+g);(d=I.exec(a))!=null;){if(b=d[1]||d[2]||d[3]||d[4]||d[5]||d[6],!b)continue;if(_=b.length,d[3]||d[4]){S+=_;continue}else if((d[5]||d[6])&&g%3&&!((g+_)%3)){C+=_;continue}if(S-=_,S>0)continue;if(_=Math.min(_,_+S+C),Math.min(g,_)%2){let R=s.slice(1,g+d.index+_);return{type:"em",raw:s.slice(0,g+d.index+_+1),text:R,tokens:this.lexer.inlineTokens(R)}}let O=s.slice(2,g+d.index+_-1);return{type:"strong",raw:s.slice(0,g+d.index+_+1),text:O,tokens:this.lexer.inlineTokens(O)}}}}codespan(s){let a=this.rules.inline.code.exec(s);if(a){let l=a[2].replace(/\n/g," "),d=/[^ ]/.test(l),f=/^ /.test(l)&&/ $/.test(l);return d&&f&&(l=l.substring(1,l.length-1)),l=qs(l,!0),{type:"codespan",raw:a[0],text:l}}}br(s){let a=this.rules.inline.br.exec(s);if(a)return{type:"br",raw:a[0]}}del(s){let a=this.rules.inline.del.exec(s);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2])}}autolink(s,a){let l=this.rules.inline.autolink.exec(s);if(l){let d,f;return l[2]==="@"?(d=qs(this.options.mangle?a(l[1]):l[1]),f="mailto:"+d):(d=qs(l[1]),f=d),{type:"link",raw:l[0],text:d,href:f,tokens:[{type:"text",raw:d,text:d}]}}}url(s,a){let l;if(l=this.rules.inline.url.exec(s)){let d,f;if(l[2]==="@")d=qs(this.options.mangle?a(l[0]):l[0]),f="mailto:"+d;else{let g;do g=l[0],l[0]=this.rules.inline._backpedal.exec(l[0])[0];while(g!==l[0]);d=qs(l[0]),l[1]==="www."?f="http://"+d:f=d}return{type:"link",raw:l[0],text:d,href:f,tokens:[{type:"text",raw:d,text:d}]}}}inlineText(s,a){let l=this.rules.inline.text.exec(s);if(l){let d;return this.lexer.state.inRawBlock?d=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):qs(l[0]):l[0]:d=qs(this.options.smartypants?a(l[0]):l[0]),{type:"text",raw:l[0],text:d}}}},Bn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:BE,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},Bn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Bn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Bn.def=ai(Bn.def).replace("label",Bn._label).replace("title",Bn._title).getRegex(),Bn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Bn.listItemStart=ai(/^( *)(bull) */).replace("bull",Bn.bullet).getRegex(),Bn.list=ai(Bn.list).replace(/bull/g,Bn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Bn.def.source+")").getRegex(),Bn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Bn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Bn.html=ai(Bn.html,"i").replace("comment",Bn._comment).replace("tag",Bn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Bn.paragraph=ai(Bn._paragraph).replace("hr",Bn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Bn._tag).getRegex(),Bn.blockquote=ai(Bn.blockquote).replace("paragraph",Bn.paragraph).getRegex(),Bn.normal=Xu({},Bn),Bn.gfm=Xu({},Bn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Bn.gfm.table=ai(Bn.gfm.table).replace("hr",Bn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Bn._tag).getRegex(),Bn.gfm.paragraph=ai(Bn._paragraph).replace("hr",Bn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Bn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Bn._tag).getRegex(),Bn.pedantic=Xu({},Bn.normal,{html:ai(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Bn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:BE,paragraph:ai(Bn.normal._paragraph).replace("hr",Bn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Bn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),cn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:BE,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:BE,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},cn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",cn.punctuation=ai(cn.punctuation).replace(/punctuation/g,cn._punctuation).getRegex(),cn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,cn.escapedEmSt=/\\\*|\\_/g,cn._comment=ai(Bn._comment).replace("(?:-->|$)","-->").getRegex(),cn.emStrong.lDelim=ai(cn.emStrong.lDelim).replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimAst=ai(cn.emStrong.rDelimAst,"g").replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimUnd=ai(cn.emStrong.rDelimUnd,"g").replace(/punct/g,cn._punctuation).getRegex(),cn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,cn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,cn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,cn.autolink=ai(cn.autolink).replace("scheme",cn._scheme).replace("email",cn._email).getRegex(),cn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,cn.tag=ai(cn.tag).replace("comment",cn._comment).replace("attribute",cn._attribute).getRegex(),cn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,cn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,cn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,cn.link=ai(cn.link).replace("label",cn._label).replace("href",cn._href).replace("title",cn._title).getRegex(),cn.reflink=ai(cn.reflink).replace("label",cn._label).replace("ref",Bn._label).getRegex(),cn.nolink=ai(cn.nolink).replace("ref",Bn._label).getRegex(),cn.reflinkSearch=ai(cn.reflinkSearch,"g").replace("reflink",cn.reflink).replace("nolink",cn.nolink).getRegex(),cn.normal=Xu({},cn),cn.pedantic=Xu({},cn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ai(/^!?\[(label)\]\((.*?)\)/).replace("label",cn._label).getRegex(),reflink:ai(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cn._label).getRegex()}),cn.gfm=Xu({},cn.normal,{escape:ai(cn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),cn.gfm.url=ai(cn.gfm.url,"i").replace("email",cn.gfm._extended_email).getRegex(),cn.breaks=Xu({},cn.gfm,{br:ai(cn.br).replace("{2,}","*").getRegex(),text:ai(cn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),sv=class dW{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||iv,this.options.tokenizer=this.options.tokenizer||new LR,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let l={block:Bn.normal,inline:cn.normal};this.options.pedantic?(l.block=Bn.pedantic,l.inline=cn.pedantic):this.options.gfm&&(l.block=Bn.gfm,this.options.breaks?l.inline=cn.breaks:l.inline=cn.gfm),this.tokenizer.rules=l}static get rules(){return{block:Bn,inline:cn}}static lex(a,l){return new dW(l).lex(a)}static lexInline(a,l){return new dW(l).inlineTokens(a)}lex(a){a=a.replace(/\r\n|\r/g,`
`),this.blockTokens(a,this.tokens);let l;for(;l=this.inlineQueue.shift();)this.inlineTokens(l.src,l.tokens);return this.tokens}blockTokens(a,l=[]){this.options.pedantic?a=a.replace(/\t/g,"    ").replace(/^ +$/gm,""):a=a.replace(/^( *)(\t+)/gm,(_,S,C)=>S+"    ".repeat(C.length));let d,f,g,b;for(;a;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(d=_.call({lexer:this},a,l))?(a=a.substring(d.raw.length),l.push(d),!0):!1))){if(d=this.tokenizer.space(a)){a=a.substring(d.raw.length),d.raw.length===1&&l.length>0?l[l.length-1].raw+=`
`:l.push(d);continue}if(d=this.tokenizer.code(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+d.raw,f.text+=`
`+d.text,this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(d);continue}if(d=this.tokenizer.fences(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.heading(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.hr(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.blockquote(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.list(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.html(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.def(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+d.raw,f.text+=`
`+d.raw,this.inlineQueue[this.inlineQueue.length-1].src=f.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title});continue}if(d=this.tokenizer.table(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.lheading(a)){a=a.substring(d.raw.length),l.push(d);continue}if(g=a,this.options.extensions&&this.options.extensions.startBlock){let _=1/0,S=a.slice(1),C;this.options.extensions.startBlock.forEach(function(I){C=I.call({lexer:this},S),typeof C=="number"&&C>=0&&(_=Math.min(_,C))}),_<1/0&&_>=0&&(g=a.substring(0,_+1))}if(this.state.top&&(d=this.tokenizer.paragraph(g))){f=l[l.length-1],b&&f.type==="paragraph"?(f.raw+=`
`+d.raw,f.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(d),b=g.length!==a.length,a=a.substring(d.raw.length);continue}if(d=this.tokenizer.text(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&f.type==="text"?(f.raw+=`
`+d.raw,f.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(d);continue}if(a){let _="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,l}inline(a,l=[]){return this.inlineQueue.push({src:a,tokens:l}),l}inlineTokens(a,l=[]){let d,f,g,b=a,_,S,C;if(this.tokens.links){let I=Object.keys(this.tokens.links);if(I.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(b))!=null;)I.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(b=b.slice(0,_.index)+"["+cne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(b))!=null;)b=b.slice(0,_.index)+"["+cne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.escapedEmSt.exec(b))!=null;)b=b.slice(0,_.index)+"++"+b.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;a;)if(S||(C=""),S=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(I=>(d=I.call({lexer:this},a,l))?(a=a.substring(d.raw.length),l.push(d),!0):!1))){if(d=this.tokenizer.escape(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.tag(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&d.type==="text"&&f.type==="text"?(f.raw+=d.raw,f.text+=d.text):l.push(d);continue}if(d=this.tokenizer.link(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.reflink(a,this.tokens.links)){a=a.substring(d.raw.length),f=l[l.length-1],f&&d.type==="text"&&f.type==="text"?(f.raw+=d.raw,f.text+=d.text):l.push(d);continue}if(d=this.tokenizer.emStrong(a,b,C)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.codespan(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.br(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.del(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.autolink(a,hne)){a=a.substring(d.raw.length),l.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(a,hne))){a=a.substring(d.raw.length),l.push(d);continue}if(g=a,this.options.extensions&&this.options.extensions.startInline){let I=1/0,O=a.slice(1),R;this.options.extensions.startInline.forEach(function(A){R=A.call({lexer:this},O),typeof R=="number"&&R>=0&&(I=Math.min(I,R))}),I<1/0&&I>=0&&(g=a.substring(0,I+1))}if(d=this.tokenizer.inlineText(g,z2e)){a=a.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(C=d.raw.slice(-1)),S=!0,f=l[l.length-1],f&&f.type==="text"?(f.raw+=d.raw,f.text+=d.text):l.push(d);continue}if(a){let I="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(I);break}else throw new Error(I)}}return l}},NR=class{constructor(s){this.options=s||iv}code(s,a,l){let d=(a||"").match(/\S*/)[0];if(this.options.highlight){let f=this.options.highlight(s,d);f!=null&&f!==s&&(l=!0,s=f)}return s=s.replace(/\n$/,"")+`
`,d?'<pre><code class="'+this.options.langPrefix+qs(d,!0)+'">'+(l?s:qs(s,!0))+`</code></pre>
`:"<pre><code>"+(l?s:qs(s,!0))+`</code></pre>
`}blockquote(s){return`<blockquote>
`.concat(s,`</blockquote>
`)}html(s){return s}heading(s,a,l,d){if(this.options.headerIds){let f=this.options.headerPrefix+d.slug(l);return"<h".concat(a,' id="').concat(f,'">').concat(s,"</h").concat(a,`>
`)}return"<h".concat(a,">").concat(s,"</h").concat(a,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(s,a,l){let d=a?"ol":"ul",f=a&&l!==1?' start="'+l+'"':"";return"<"+d+f+`>
`+s+"</"+d+`>
`}listitem(s){return"<li>".concat(s,`</li>
`)}checkbox(s){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(s){return"<p>".concat(s,`</p>
`)}table(s,a){return a&&(a="<tbody>".concat(a,"</tbody>")),`<table>
<thead>
`+s+`</thead>
`+a+`</table>
`}tablerow(s){return`<tr>
`.concat(s,`</tr>
`)}tablecell(s,a){let l=a.header?"th":"td";return(a.align?"<".concat(l,' align="').concat(a.align,'">'):"<".concat(l,">"))+s+"</".concat(l,`>
`)}strong(s){return"<strong>".concat(s,"</strong>")}em(s){return"<em>".concat(s,"</em>")}codespan(s){return"<code>".concat(s,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(s){return"<del>".concat(s,"</del>")}link(s,a,l){if(s=ane(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let d='<a href="'+qs(s)+'"';return a&&(d+=' title="'+a+'"'),d+=">"+l+"</a>",d}image(s,a,l){if(s=ane(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let d='<img src="'.concat(s,'" alt="').concat(l,'"');return a&&(d+=' title="'.concat(a,'"')),d+=this.options.xhtml?"/>":">",d}text(s){return s}},Hz=class{strong(s){return s}em(s){return s}codespan(s){return s}del(s){return s}html(s){return s}text(s){return s}link(s,a,l){return""+l}image(s,a,l){return""+l}br(){return""}},Gz=class{constructor(){this.seen={}}serialize(s){return s.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(s,a){let l=s,d=0;if(this.seen.hasOwnProperty(l)){d=this.seen[s];do d++,l=s+"-"+d;while(this.seen.hasOwnProperty(l))}return a||(this.seen[s]=d,this.seen[l]=0),l}slug(s,a={}){let l=this.serialize(s);return this.getNextSafeSlug(l,a.dryrun)}},_f=class hW{constructor(a){this.options=a||iv,this.options.renderer=this.options.renderer||new NR,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Hz,this.slugger=new Gz}static parse(a,l){return new hW(l).parse(a)}static parseInline(a,l){return new hW(l).parseInline(a)}parse(a,l=!0){let d="",f,g,b,_,S,C,I,O,R,A,F,L,V,H,K,Z,re,ne,le,Ce=a.length;for(f=0;f<Ce;f++){if(A=a[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[A.type]&&(le=this.options.extensions.renderers[A.type].call({parser:this},A),le!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type))){d+=le||"";continue}switch(A.type){case"space":continue;case"hr":{d+=this.renderer.hr();continue}case"heading":{d+=this.renderer.heading(this.parseInline(A.tokens),A.depth,one(this.parseInline(A.tokens,this.textRenderer)),this.slugger);continue}case"code":{d+=this.renderer.code(A.text,A.lang,A.escaped);continue}case"table":{for(O="",I="",_=A.header.length,g=0;g<_;g++)I+=this.renderer.tablecell(this.parseInline(A.header[g].tokens),{header:!0,align:A.align[g]});for(O+=this.renderer.tablerow(I),R="",_=A.rows.length,g=0;g<_;g++){for(C=A.rows[g],I="",S=C.length,b=0;b<S;b++)I+=this.renderer.tablecell(this.parseInline(C[b].tokens),{header:!1,align:A.align[b]});R+=this.renderer.tablerow(I)}d+=this.renderer.table(O,R);continue}case"blockquote":{R=this.parse(A.tokens),d+=this.renderer.blockquote(R);continue}case"list":{for(F=A.ordered,L=A.start,V=A.loose,_=A.items.length,R="",g=0;g<_;g++)K=A.items[g],Z=K.checked,re=K.task,H="",K.task&&(ne=this.renderer.checkbox(Z),V?K.tokens.length>0&&K.tokens[0].type==="paragraph"?(K.tokens[0].text=ne+" "+K.tokens[0].text,K.tokens[0].tokens&&K.tokens[0].tokens.length>0&&K.tokens[0].tokens[0].type==="text"&&(K.tokens[0].tokens[0].text=ne+" "+K.tokens[0].tokens[0].text)):K.tokens.unshift({type:"text",text:ne}):H+=ne),H+=this.parse(K.tokens,V),R+=this.renderer.listitem(H,re,Z);d+=this.renderer.list(R,F,L);continue}case"html":{d+=this.renderer.html(A.text);continue}case"paragraph":{d+=this.renderer.paragraph(this.parseInline(A.tokens));continue}case"text":{for(R=A.tokens?this.parseInline(A.tokens):A.text;f+1<Ce&&a[f+1].type==="text";)A=a[++f],R+=`
`+(A.tokens?this.parseInline(A.tokens):A.text);d+=l?this.renderer.paragraph(R):R;continue}default:{let ve='Token with "'+A.type+'" type was not found.';if(this.options.silent){console.error(ve);return}else throw new Error(ve)}}}return d}parseInline(a,l){l=l||this.renderer;let d="",f,g,b,_=a.length;for(f=0;f<_;f++){if(g=a[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(b=this.options.extensions.renderers[g.type].call({parser:this},g),b!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(g.type))){d+=b||"";continue}switch(g.type){case"escape":{d+=l.text(g.text);break}case"html":{d+=l.html(g.text);break}case"link":{d+=l.link(g.href,g.title,this.parseInline(g.tokens,l));break}case"image":{d+=l.image(g.href,g.title,g.text);break}case"strong":{d+=l.strong(this.parseInline(g.tokens,l));break}case"em":{d+=l.em(this.parseInline(g.tokens,l));break}case"codespan":{d+=l.codespan(g.text);break}case"br":{d+=l.br();break}case"del":{d+=l.del(this.parseInline(g.tokens,l));break}case"text":{d+=l.text(g.text);break}default:{let S='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(S);return}else throw new Error(S)}}}return d}},Zn.options=Zn.setOptions=function(s){return Xu(Zn.defaults,s),N2e(Zn.defaults),Zn},Zn.getDefaults=sne,Zn.defaults=iv,Zn.use=function(...s){let a=Xu({},...s),l=Zn.defaults.extensions||{renderers:{},childTokens:{}},d;s.forEach(f=>{if(f.extensions&&(d=!0,f.extensions.forEach(g=>{if(!g.name)throw new Error("extension name required");if(g.renderer){let b=l.renderers?l.renderers[g.name]:null;b?l.renderers[g.name]=function(..._){let S=g.renderer.apply(this,_);return S===!1&&(S=b.apply(this,_)),S}:l.renderers[g.name]=g.renderer}if(g.tokenizer){if(!g.level||g.level!=="block"&&g.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");l[g.level]?l[g.level].unshift(g.tokenizer):l[g.level]=[g.tokenizer],g.start&&(g.level==="block"?l.startBlock?l.startBlock.push(g.start):l.startBlock=[g.start]:g.level==="inline"&&(l.startInline?l.startInline.push(g.start):l.startInline=[g.start]))}g.childTokens&&(l.childTokens[g.name]=g.childTokens)})),f.renderer){let g=Zn.defaults.renderer||new NR;for(let b in f.renderer){let _=g[b];g[b]=(...S)=>{let C=f.renderer[b].apply(g,S);return C===!1&&(C=_.apply(g,S)),C}}a.renderer=g}if(f.tokenizer){let g=Zn.defaults.tokenizer||new LR;for(let b in f.tokenizer){let _=g[b];g[b]=(...S)=>{let C=f.tokenizer[b].apply(g,S);return C===!1&&(C=_.apply(g,S)),C}}a.tokenizer=g}if(f.walkTokens){let g=Zn.defaults.walkTokens;a.walkTokens=function(b){let _=[];return _.push(f.walkTokens.call(this,b)),g&&(_=_.concat(g.call(this,b))),_}}d&&(a.extensions=l),Zn.setOptions(a)})},Zn.walkTokens=function(s,a){let l=[];for(let d of s)switch(l=l.concat(a.call(Zn,d)),d.type){case"table":{for(let f of d.header)l=l.concat(Zn.walkTokens(f.tokens,a));for(let f of d.rows)for(let g of f)l=l.concat(Zn.walkTokens(g.tokens,a));break}case"list":{l=l.concat(Zn.walkTokens(d.items,a));break}default:Zn.defaults.extensions&&Zn.defaults.extensions.childTokens&&Zn.defaults.extensions.childTokens[d.type]?Zn.defaults.extensions.childTokens[d.type].forEach(function(f){l=l.concat(Zn.walkTokens(d[f],a))}):d.tokens&&(l=l.concat(Zn.walkTokens(d.tokens,a)))}return l},Zn.parseInline=function(s,a){if(typeof s>"u"||s===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");a=Xu({},Zn.defaults,a||{}),une(a);try{let l=sv.lexInline(s,a);return a.walkTokens&&Zn.walkTokens(l,a.walkTokens),_f.parseInline(l,a)}catch(l){if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+qs(l.message+"",!0)+"</pre>";throw l}},Zn.Parser=_f,Zn.parser=_f.parse,Zn.Renderer=NR,Zn.TextRenderer=Hz,Zn.Lexer=sv,Zn.lexer=sv.lex,Zn.Tokenizer=LR,Zn.Slugger=Gz,Zn.parse=Zn,Zn.options,Zn.setOptions,Zn.use,Zn.walkTokens,Zn.parseInline,_f.parse,sv.lex}),Cne,Pne,Wz,Tne=P(()=>{ze(),AR(),Pne=ae(Vb)(Cne||(Cne=W([`
  padding: 6px;
`]))),Wz=Pne}),ps,FR,UE,BR,Mne,kne,Ane,$z,Ine,Rne,Dne,Kz,One,Lne,Nne,Fne,Bne,zE,VE,Une,zne,Vne,jne,Hne,Gne,Wne,$ne,Kne,Xne,qne,Yne,Xz,jE=P(()=>{ps=q(Oe()),L2e(),ze(),Ar(),yn(),Te(),V2e(),DE(),Tne(),FR=({title:s,message:a})=>"".concat(s," ").concat(a),UE=(()=>{let s=new Map;return{add:a=>{let l=FR(a);s.has(l)?s.set(l,s.get(l)+1):s.set(l,1)},delete:a=>{let l=FR(a);s.has(l)&&s.get(l)>1?s.set(l,s.get(l)-1):s.delete(l)},clear:()=>{s.clear()},check:a=>s.has(FR(a))}})(),BR=(()=>{let s=new Map;return{add:a=>{s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)},delete:a=>{s.has(a)&&s.get(a)>1?s.set(a,s.get(a)-1):s.delete(a)},clear:()=>{s.clear()},check:a=>s.has(a),get types(){return Array.of(...s.keys())}}})(),kne=ae.div(Mne||(Mne=W([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Cr),$z=ae.div(Ane||(Ane=W([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),Rne=ae.div(Ine||(Ine=W([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),Kz=ae.div(Dne||(Dne=W([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),Lne=ae.button(One||(One=W([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),Nne={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},Bne=ae.div(Fne||(Fne=W([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:s})=>Nne[s]),zE=s=>(a,l,d=[],f=!1)=>{(f||!UE.check({title:a,message:l}))&&(UE.add({title:a,message:l}),BR.add(s),DR.custom(g=>ps.default.createElement(kne,null,ps.default.createElement(Bne,{type:s}),ps.default.createElement(Rne,null,ps.default.createElement($z,null,a),ps.default.createElement(Kz,{dangerouslySetInnerHTML:{__html:Zn.parse(l)}}),d.length>0&&ps.default.createElement(Kz,null,ps.default.createElement("span",null,"Docs:"," ",d.map((b,_)=>ps.default.createElement(ps.Fragment,{key:_},_>0&&", ",ps.default.createElement("a",{target:"_blank",href:b.url},b.title)))))),ps.default.createElement(Lne,{onClick:()=>{DR.remove(g.id),UE.delete({title:a,message:l}),BR.delete(s)}},"Close")),{duration:1/0}))},VE={warning:zE("warning"),success:zE("success"),info:zE("info"),error:zE("error")},zne=ae.div(Une||(Une=W([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:s})=>s==="center"?"center":"flex-end"),jne=ae.button(Vne||(Vne=W([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Cr,({danger:s})=>s?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),Gne=ae.div(Hne||(Hne=W([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),$ne=ae.div(Wne||(Wne=W([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),Xne=ae.div(Kne||(Kne=W([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),qne=()=>{let{hasNotifications:s}=Xz();return zb({enabled:!s},()=>ps.default.createElement(Wz,null,ps.default.createElement(Xne,null,ps.default.createElement($z,null,"No notifications"),"Notifications will appear here when you get them.")))},Yne=()=>{var s;let{toasts:a,handlers:l}=Vz(),{startPause:d,endPause:f}=l,g=(s=nr(ue().atomP.ahistoric.pinNotifications))!=null?s:!1;return ps.default.createElement(Gne,null,g?a.length>0&&ps.default.createElement($ne,{onMouseEnter:d,onMouseLeave:f},ps.default.createElement("div",null,a.map(b=>ps.default.createElement("div",{key:b.id},b.message(b))))):null,ps.default.createElement(zne,{align:"side"},g&&a.length>0&&ps.default.createElement(jne,{onClick:()=>{BR.clear(),UE.clear(),DR.remove()},danger:!0},"Clear")))},Xz=()=>{let{toasts:s}=Vz();return{hasNotifications:s.length>0}}});function qz(s,a){var l;let d=Object.values((l=(0,Zne.val)(s.pointers.historic.sheetsById))!=null?l:{}),f=d.flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.staticOverrides.byObject)!=null?_:{})}).flatMap(b=>Object.values(b??{})),g=[...d.flatMap(b=>{var _,S;return Object.values((S=(_=b==null?void 0:b.sequence)==null?void 0:_.tracksByObject)!=null?S:{})}).flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.trackData)!=null?_:{})}).flatMap(b=>b==null?void 0:b.keyframes).map(b=>b==null?void 0:b.value)];return f.forEach(b=>{it(b,_=>{g.push(_)},[])}),g.filter(b=>(b==null?void 0:b.type)&&(a?(b==null?void 0:b.type)==a:typeof(b==null?void 0:b.type)=="string")).map(b=>b.id).filter((b,_,S)=>b!==null&&b!==""&&S.indexOf(b)===_)}var Zne,Qne=P(()=>{Zne=Ft,qe()});function Jne(s,a){let l=new File([s],a),d=URL.createObjectURL(l),f=Object.assign(document.createElement("a"),{href:d,target:"_blank",rel:"noopener"});f.setAttribute("download",a),f.click(),setTimeout(()=>{URL.revokeObjectURL(d)},4e4)}var ll,ere,tre,nre,rre,ire,sre,ore,are,lre,j2e=P(()=>{Te(),Qc(),Yc(),ll=q(Oe()),ze(),Cte(),D2e(),ere=q(O2e()),jE(),Qne(),nre=ae.div(tre||(tre=W([""]))),ire=ae.div(rre||(rre=W([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),ore=ae(Zc)(sre||(sre=W([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),are=({projects:s})=>{let a=s[0],l=a.address.projectId,d=l.replace(/[^\w\d'_\-]+/g," ").trim(),f="".concat(d,".theatre-project-state.json"),[g,b]=(0,ll.useState)(!1),_=(0,ll.useCallback)(()=>he(void 0,null,function*(){var C,I;let O=qz(a),R=new Map;try{yield Promise.all(O.map(F=>he(void 0,null,function*(){let L=a.assetStorage.getAssetUrl(F),V=yield fetch(L);V.ok&&R.set(F,yield V.blob())})))}catch{VE.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((I=(C=a.config.assets)==null?void 0:C.baseUrl)!=null?I:"/",". This is likely due to a CORS issue."));return}if(R.size>0){let F=new ere.default;for(let[V,H]of R)F.file(V,H);let L=yield F.generateAsync({type:"blob"});Jne(L,"".concat(d,".assets.zip"))}let A=JSON.stringify(ue().createContentOfSaveFile(a.address.projectId),null,2);Jne(A,f),b(!0),setTimeout(()=>{b(!1)},2e3)}),[a,f]),S=qc({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>ll.default.createElement(ore,null,ll.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),ll.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),ll.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return ll.default.createElement(ll.default.Fragment,null,S.node,ll.default.createElement(nre,null,ll.default.createElement(Xte,{projectId:l}),ll.default.createElement(ire,null,ll.default.createElement(MR,{onMouseEnter:C=>S.open(C,C.target),onClick:g?void 0:_,disabled:g},g?"(Exported)":"Export ".concat(l," to JSON")))))},lre=are}),wf,ure,cre,dre,hre,pre,fre,mre,gre,vre,yre,H2e=P(()=>{wf=q(Oe()),ze(),rE(),cre=ae.div(ure||(ure=W([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),hre=ae.div(dre||(dre=W([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),fre=ae.div(pre||(pre=W([`
  color: rgba(145, 145, 145, 0.8);
`]))),gre=ae.a(mre||(mre=W([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),vre=()=>wf.default.createElement(cre,null,wf.default.createElement(hre,null,wf.default.createElement(fre,null,wf.default.createElement(p4,null)),wf.default.createElement("div",null,"Please select an object from the ",wf.default.createElement("u",null,"Outline Menu")," to see its properties.")),wf.default.createElement(gre,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),yre=vre});function bre(){let[s,a]=(0,Yz.useState)(!1),l=(0,Yz.useMemo)(()=>{let d=new Set;return()=>{let f=()=>{d.delete(f),a(d.size>0)};return d.add(f),a(!0),f}},[]);return[s,l]}var Yz,_re=P(()=>{Yz=q(Oe())}),ci,Hb,wre,xre,UR,Sre,Zz,Ere,Qz,Cre,Jz,HE,Pre,Tre,zR,ov,eV=P(()=>{df(),yn(),ci=q(Oe()),ze(),Tn(),dh(),Ar(),A2e(),j2e(),Te(),dY(),Hb=Ft,H2e(),_re(),nv(),wre="32px",UR=ae.div(xre||(xre=W([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Cr,Eb.propsPanel,({pin:s})=>s?"block":"none"),Zz=ae.div(Sre||(Sre=W([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),Cr),Qz=ae.div(Ere||(Ere=W([`
  height: `,`;
  display: flex;
  align-items: center;
`])),wre),Jz=ae.div(Cre||(Cre=W([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),Cr),HE=(0,ci.createContext)([!1,()=>()=>{}]),Pre=s=>{let a=nr(ue().atomP.ahistoric.pinDetails)!==!1,l=cY("right");(0,ci.useLayoutEffect)(()=>{zR.set(l)},[l]),(0,ci.useEffect)(()=>()=>{ov.set(!1),zR.set(!1)},[]);let[d]=(0,ci.useContext)(HE),f=a||l||d,[g,b]=(0,ci.useState)(null);return XJ(g),Yn(()=>{let _=cf(),S=_.find(Rt);if(S)return ci.default.createElement(UR,{"data-testid":"DetailPanel-Object",pin:f,ref:b,onMouseEnter:()=>{ov.set(!0)},onMouseLeave:()=>{ov.set(!1)}},ci.default.createElement(Qz,null,ci.default.createElement(Zz,{title:"".concat(S.sheet.address.sheetId,": ").concat(S.sheet.address.sheetInstanceId," > ").concat(S.address.objectKey)},ci.default.createElement(uf,null,S.sheet.address.sheetId," "),ci.default.createElement(nE,null,":",""),ci.default.createElement(uf,null,S.sheet.address.sheetInstanceId," "),ci.default.createElement(nE,null,""),ci.default.createElement(uf,null,S.address.objectKey))),ci.default.createElement(Jz,null,ci.default.createElement(xte,{objects:[S]})));let C=_.find(Ct);return C?ci.default.createElement(UR,{pin:f},ci.default.createElement(Qz,null,ci.default.createElement(Zz,{title:"".concat(C.address.projectId)},ci.default.createElement(uf,null,C.address.projectId," "))),ci.default.createElement(Jz,null,ci.default.createElement(lre,{projects:[C]}))):ci.default.createElement(UR,{pin:f,onMouseEnter:()=>{ov.set(!0)},onMouseLeave:()=>{ov.set(!1)}},ci.default.createElement(yre,null))},[f])},Tre=()=>{let s=bre();return ci.default.createElement(HE.Provider,{value:s},ci.default.createElement(Pre,null))},zR=new Hb.Atom(!1),ov=new Hb.Atom(!1),(0,Hb.prism)(()=>{let s=(0,Hb.val)(ov.prism),a=(0,Hb.val)(zR.prism);return s||a})}),tV,VR,jR,nV,Gb,Mre,rV,Wb=P(()=>{tV=Ft,yn(),Te(),_re(),VR=q(Oe()),sz(),jR=(s,a)=>{let l=s.left/a.width,d=(s.left+s.width)/a.width,f=s.top/a.height,g=(s.height+s.top)/a.height;return{edges:{left:l<=.5?{from:"screenLeft",distance:l}:{from:"screenRight",distance:1-l},right:d<=.5?{from:"screenLeft",distance:d}:{from:"screenRight",distance:1-d},top:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f},bottom:g<=.5?{from:"screenTop",distance:g}:{from:"screenBottom",distance:1-g}}}},nV=VR.default.createContext(null),Gb=()=>(0,VR.useContext)(nV),Mre=({panelId:s,children:a,defaultPosition:l,minDims:d})=>{let f=aR(800,200),[g,b]=bre(),{stuff:_}=Yn(()=>{var S;let{edges:C}=(S=(0,tV.val)(ue().atomP.historic.panelPositions[s]))!=null?S:l,I=Math.floor(f.width*(C.left.from==="screenLeft"?C.left.distance:1-C.left.distance)),O=Math.floor(f.width*(C.right.from==="screenLeft"?C.right.distance:1-C.right.distance)),R=Math.floor(f.height*(C.top.from==="screenTop"?C.top.distance:1-C.top.distance)),A=Math.floor(f.height*(C.bottom.from==="screenTop"?C.bottom.distance:1-C.bottom.distance)),F=Math.max(O-I,d.width),L=Math.max(A-R,d.height);return{stuff:{dims:tV.prism.memo("dims",()=>({width:F,left:I,top:R,height:L}),[F,I,R,L]),panelId:s,minDims:d,boundsHighlighted:g,addBoundsHighlightLock:b}}},[s,f,g,b]);return VR.default.createElement(nV.Provider,{value:_},a)},rV=Mre}),GE,kre,Are,Ire,iV,Rre=P(()=>{kr(),Te(),ws(),GE=q(Oe()),ze(),Wb(),al(),ui(),dh(),Are=ae.div(kre||(kre=W([`
  cursor: move;
`]))),Ire=s=>{let a=Gb(),l=(0,GE.useRef)(a);l.current=a;let[d,f]=br(null),g=(0,GE.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let C=l.current,I,O=a.addBoundsHighlightLock();return{onDrag(R,A){let F=z(N({},C.dims),{top:bi(C.dims.top+A,0,window.innerHeight-Wc),left:bi(C.dims.left+R,-C.dims.width+Wc,window.innerWidth-Wc)}),L=jR(F,{width:window.innerWidth,height:window.innerHeight});I==null||I.discard(),I=ue().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:L,panelId:C.panelId})})},onDragEnd(R){O(),R?I==null||I.commit():I==null||I.discard()}}}}),[]),[b]=Fi(f,g);Gl(b,"dragging","move");let[_,S]=(0,GE.useMemo)(()=>{let C;return[function(){if(C){let I=C;C=void 0,I()}C=a.addBoundsHighlightLock()},function(){if(C){let I=C;C=void 0,I()}}]},[]);return GE.default.createElement(Are,z(N({},s),{ref:d,onMouseEnter:_,onMouseLeave:S}))},iV=Ire}),HR,Dre,sV,Ore,oV,Lre,aV,Nre,Fre,Bre,Ure,zre,lV,Vre,jre,Hre,Gre,Wre,WE,$re,Kre,Xre,qre,Yre,Zre,Qre,Jre,eie,uV,tie,_h,G2e=P(()=>{kr(),Te(),ws(),ol(),HR=q(Oe()),ze(),Wb(),Ar(),ui(),dh(),sV=ae.div(Dre||(Dre=W([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),Cr,gb(.2,"#478698")),oV=ae(sV)(Ore||(Ore=W([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),aV=ae(oV)(Lre||(Lre=W([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),Fre=ae(aV)(Nre||(Nre=W([`
  top: -1px;
`]))),Ure=ae(aV)(Bre||(Bre=W([`
  bottom: -1px;
`]))),lV=ae(oV)(zre||(zre=W([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),jre=ae(lV)(Vre||(Vre=W([`
  left: -1px;
`]))),Gre=ae(lV)(Hre||(Hre=W([`
  right: -1px;
`]))),WE=ae(sV)(Wre||(Wre=W([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),Kre=ae(WE)($re||($re=W([`
  top: 0;
  left: 0;
`]))),qre=ae(WE)(Xre||(Xre=W([`
  top: 0;
  right: 0;
`]))),Zre=ae(WE)(Yre||(Yre=W([`
  bottom: 0;
  left: 0;
`]))),Jre=ae(WE)(Qre||(Qre=W([`
  bottom: 0;
  right: 0;
`]))),eie={Top:Fre,TopLeft:Kre,TopRight:qre,Bottom:Ure,BottomLeft:Zre,BottomRight:Jre,Left:jre,Right:Gre},uV={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},tie=({which:s})=>{let a=Gb(),l=(0,HR.useRef)(a);l.current=a;let[d,f]=br(null),g=(0,HR.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:uV[s],onDragStart(){let C,I=l.current,O=a.addBoundsHighlightLock();return{onDrag(R,A){let F=N({},I.dims);if(s.startsWith("Bottom"))F.height=Math.max(F.height+A,I.minDims.height);else if(s.startsWith("Top")){let V=F.top+F.height,H=bi(F.top+A,0,Math.min(V-I.minDims.height,window.innerHeight-Wc)),K=V-H;F.height=K,F.top=H}if(s.endsWith("Left")){let V=F.left+F.width,H=Math.min(F.left+R,Math.min(V-I.minDims.width,window.innerWidth-Wc)),K=V-H;F.width=K,F.left=H}else s.endsWith("Right")&&(F.width=Math.max(F.width+R,Math.max(I.minDims.width,Wc-I.dims.left)));let L=jR(F,{width:window.innerWidth,height:window.innerHeight});C==null||C.discard(),C=ue().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:L,panelId:I.panelId})})},onDragEnd(R){O(),R?C==null||C.commit():C==null||C.discard()}}}}),[s]),[b]=Fi(f,g),_=eie[s],S=s.length<=6;return HR.default.createElement(_,{ref:d,className:[b?"isDragging":"",a.boundsHighlighted&&S?"isHighlighted":""].join(" "),style:{cursor:uV[s]}})},_h=tie}),qu,nie,rie,W2e=P(()=>{qu=q(Oe()),G2e(),nie=s=>qu.default.createElement(qu.default.Fragment,null,qu.default.createElement(_h,{which:"Bottom"}),qu.default.createElement(_h,{which:"Top"}),qu.default.createElement(_h,{which:"Left"}),qu.default.createElement(_h,{which:"Right"}),qu.default.createElement(_h,{which:"TopLeft"}),qu.default.createElement(_h,{which:"TopRight"}),qu.default.createElement(_h,{which:"BottomLeft"}),qu.default.createElement(_h,{which:"BottomRight"})),rie=nie}),GR,iie,sie,oie,cV,aie=P(()=>{Ar(),GR=q(Oe()),ze(),Wb(),W2e(),sie=ae.div(iie||(iie=W([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),Cr),oie=GR.default.forwardRef((s,a)=>{let l=Gb(),d=s,{style:f,children:g}=d,b=U(d,["style","children"]);return GR.default.createElement(sie,z(N({ref:a},b),{style:N({width:l.dims.width+"px",height:l.dims.height+"px",top:l.dims.top+"px",left:l.dims.left+"px"},f??{})}),GR.default.createElement(rie,null),g)}),cV=oie}),$2e=$((s,a)=>{(function(l,d){typeof s=="object"&&typeof a<"u"?d(s,Oe()):(l=typeof globalThis<"u"?globalThis:l||self,d(l.ReactErrorBoundary={},l.React))})(s,function(l,d){function f(A){if(A&&A.__esModule)return A;var F=Object.create(null);return A&&Object.keys(A).forEach(function(L){if(L!=="default"){var V=Object.getOwnPropertyDescriptor(A,L);Object.defineProperty(F,L,V.get?V:{enumerable:!0,get:function(){return A[L]}})}}),F.default=A,Object.freeze(F)}var g=f(d);function b(A,F){return b=Object.setPrototypeOf||function(L,V){return L.__proto__=V,L},b(A,F)}function _(A,F){A.prototype=Object.create(F.prototype),A.prototype.constructor=A,b(A,F)}var S=function(A,F){return A===void 0&&(A=[]),F===void 0&&(F=[]),A.length!==F.length||A.some(function(L,V){return!Object.is(L,F[V])})},C={error:null},I=function(A){_(F,A);function F(){for(var V,H=arguments.length,K=new Array(H),Z=0;Z<H;Z++)K[Z]=arguments[Z];return V=A.call.apply(A,[this].concat(K))||this,V.state=C,V.updatedWithError=!1,V.resetErrorBoundary=function(){for(var re,ne=arguments.length,le=new Array(ne),Ce=0;Ce<ne;Ce++)le[Ce]=arguments[Ce];V.props.onReset==null||(re=V.props).onReset.apply(re,le),V.reset()},V}F.getDerivedStateFromError=function(V){return{error:V}};var L=F.prototype;return L.reset=function(){this.updatedWithError=!1,this.setState(C)},L.componentDidCatch=function(V,H){var K,Z;(K=(Z=this.props).onError)==null||K.call(Z,V,H)},L.componentDidMount=function(){var V=this.state.error;V!==null&&(this.updatedWithError=!0)},L.componentDidUpdate=function(V){var H=this.state.error,K=this.props.resetKeys;if(H!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(H!==null&&S(V.resetKeys,K)){var Z,re;(Z=(re=this.props).onResetKeysChange)==null||Z.call(re,V.resetKeys,K),this.reset()}},L.render=function(){var V=this.state.error,H=this.props,K=H.fallbackRender,Z=H.FallbackComponent,re=H.fallback;if(V!==null){var ne={error:V,resetErrorBoundary:this.resetErrorBoundary};if(g.isValidElement(re))return re;if(typeof K=="function")return K(ne);if(Z)return g.createElement(Z,ne);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},F}(g.Component);function O(A,F){var L=function(H){return g.createElement(I,F,g.createElement(A,H))},V=A.displayName||A.name||"Unknown";return L.displayName="withErrorBoundary("+V+")",L}function R(A){var F=g.useState(null),L=F[0],V=F[1];if(A!=null)throw A;if(L!=null)throw L;return V}l.ErrorBoundary=I,l.useErrorHandler=R,l.withErrorBoundary=O,Object.defineProperty(l,"__esModule",{value:!0})})}),po,lie,uie,cie,die,hie,pie,fie,mie,gie,vie,yie,bie,_ie,wie,xie,Sie,Eie,Cie,Pie,K2e=P(()=>{po=q(Oe()),ze(),dh(),Wb(),Rre(),aie(),lie=q($2e()),Rb(),Te(),dh(),uie={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},cie={width:300,height:300},die=({paneInstance:s})=>po.default.createElement(rV,{panelId:"pane-".concat(s.instanceId),defaultPosition:uie,minDims:cie},po.default.createElement(Cie,{paneInstance:s})),pie=ae(cV)(hie||(hie=W([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Eb.pluginPanes),mie=ae.div(fie||(fie=W([`
  width: 100%;
`]))),vie=ae.div(gie||(gie=W([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),bie=ae.button(yie||(yie=W([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),wie=ae(uq)(_ie||(_ie=W([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),Sie=ae.div(xie||(xie=W([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),Eie=s=>po.default.createElement(Sie,null,"An Error occurred rendering this pane. Open the console for more info.",po.default.createElement("pre",null,JSON.stringify({message:s.error.message,stack:s.error.stack},null,2))),Cie=({paneInstance:s})=>{let[a,l]=(0,po.useState)(null),d=s.definition.mount;(0,po.useLayoutEffect)(()=>{if(!a)return;let g=d({paneId:s.instanceId,node:a});if(typeof g=="function")return g},[a,d,s.instanceId]);let f=(0,po.useCallback)(()=>{ue().paneManager.destroyPane(s.instanceId)},[s]);return po.default.createElement(pie,{"data-testid":"theatre-pane-wrapper-".concat(s.instanceId)},po.default.createElement(iV,null,po.default.createElement(d4,null,po.default.createElement(vie,null,po.default.createElement(bie,{onClick:f,title:"Close Pane"},po.default.createElement(Yke,null))),po.default.createElement(mie,null,s.instanceId))),po.default.createElement(lie.ErrorBoundary,{FallbackComponent:Eie},po.default.createElement(wie,{"data-testid":"theatre-pane-content-".concat(s.instanceId),ref:l})))},Pie=die}),dV,hV,Tie=P(()=>{dV=Ft,hV=(s,a)=>{let l=dV.prism.memo(s,()=>new dV.Atom(a),[]);return l.set(a),l}});function Mie(s,a){(0,kie.useLayoutEffect)(()=>{if(!s||a.type!=="propWithChildren"&&a.type!=="primitiveProp"&&a.type!=="sheetObject")return;let l=null,d=z(N({},a.sheetObject.address),{pathToProp:a.type==="sheetObject"?[]:a.pathToProp});function f(){l=SR.replaceLock(d,()=>{})}function g(){l==null||l()}return s.addEventListener("mouseenter",f),s.addEventListener("mouseleave",g),()=>{l==null||l(),s.removeEventListener("mouseenter",f),s.removeEventListener("mouseleave",g)}},[s])}var kie,Aie=P(()=>{kie=q(Oe()),Az()}),xf,Iie,pV,Rie,fV,Die,mV,Oie,Lie,Nie,Fie,Bie,Uie,zie,WR,$R=P(()=>{Ar(),xf=q(Oe()),Rb(),ze(),ev(),Aie(),pV=ae.li(Iie||(Iie=W([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),s=>s.depth),fV=ae.div(Rie||(Rie=W([`
  border-bottom: 1px solid #7695b705;
`]))),mV=ae(fV)(Die||(Die=W([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),Sb.panel.body.compoudThing.label.color,s=>s.isSelected&&"background: blue"),Lie=ae.span(Oie||(Oie=W([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),gf,mV),Fie=ae.span(Nie||(Nie=W([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>s.isCollapsed?15:75),Uie=ae.ul(Bie||(Bie=W([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),zie=({leaf:s,label:a,children:l,isSelectable:d,isSelected:f,toggleSelect:g,toggleCollapsed:b,isCollapsed:_})=>{let S=Array.isArray(l)&&l.length>0,C=(0,xf.useRef)(null);return Mie(C.current,s),s.shouldRender?xf.default.createElement(pV,{depth:s.depth},xf.default.createElement(mV,{ref:C,style:{height:s.nodeHeight+"px"},isSelectable:d===!0,isSelected:f===!0,onClick:g,isEven:s.n%2===0},xf.default.createElement(Fie,{isCollapsed:_,onClick:b},xf.default.createElement(nZ,null)),xf.default.createElement(Lie,null,a)),S&&xf.default.createElement(Uie,null,l)):null},WR=zie});function X2e(s,a){return a.every((l,d)=>l===s[d])}function q2e(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++)if(s[l]!==a[l])return!1;return!0}function KR(s){var a;let l=[];for(;;){let d=l.length,f=(a=s[0])==null?void 0:a[d];if(f===void 0)return l;for(let g of s)if(f!==g[d])return l;l.push(f)}}var nd,XR,rd=P(()=>{cR(),nd=gE(s=>JSON.stringify(s)),XR=s=>JSON.parse(s)});function Y2e(s,a){let l=(0,gV.useRef)({combo:s,listener:a});l.current={combo:s,listener:a},(0,gV.useEffect)(()=>{function d(b){b.key===l.current.combo&&l.current.listener({down:!0,event:b})}function f(b){b.key===l.current.combo&&l.current.listener({down:!1,event:b})}function g(b){l.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",d),document.addEventListener("keyup",f),window.addEventListener("blur",g),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",f),window.removeEventListener("blur",g)}},[])}var gV,Z2e=P(()=>{gV=q(Oe())});function Vie(s){let[a,l]=(0,jie.useState)(!1);return Y2e(s,({down:d})=>{l(d)}),a}var jie,Hie=P(()=>{jie=q(Oe()),Z2e()});function Q2e(s){let a=(0,vV.useMemo)(()=>new Gie.Atom(s),[]);return(0,vV.useLayoutEffect)(()=>{a.set(s)},[s]),a}var Gie,vV,J2e=P(()=>{Gie=Ft,vV=q(Oe())});function Wie(s,a,l){let d=(0,yV.pointer)({root:{},path:[]}),f=a(d);Qp(s,(0,yV.getPointerParts)(f).path,l)}var yV,eIe=P(()=>{yV=Ft,Zy()}),qR,$ie,da,Yu=P(()=>{qR="data-pos",$ie={checkIfMouseEventSnapToPos(s,a){let l=s.composedPath().find(d=>d instanceof Element&&d!==(a==null?void 0:a.ignore)&&d.hasAttribute(qR));if(l){let d=parseFloat(l.getAttribute(qR));if(isFinite(d))return d}return null},includePositionSnapAttrs(s){return{[qR]:s}}},da=$ie});function YR(s){let a=s.type==="sheet"?nIe(s):bV(s);return{byPosition:tIe(a),tracks:a}}function tIe(s){let a=new Map;for(let l of s)for(let d of l.data.keyframes){let f=a.get(d.position);f||(f=[],a.set(d.position,f)),f.push({kf:d,track:l,itemKey:Os.forTrackKeyframe(l.sheetObject,l.id,d.id)})}return a}function nIe(s){return s.children.flatMap(bV)}function bV(s){return s.children.flatMap(a=>a.type==="propWithChildren"?bV(a):rIe(a))}function rIe(s){let a=s.sheetObject,l=a.address.projectId,d=ue().atomP.historic.coreByProject[l].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey],f=(0,ZR.val)(d.trackIdByPropPath[nd(s.pathToProp)]);if(!f)return[];let g=(0,ZR.val)(d.trackData[f]);return g?[{id:f,data:g,sheetObject:a}]:[]}function iIe(s,a){return Ro(s.children.flatMap(l=>_V(l,a)))}function _V(s,a){return Ro(s.children.flatMap(l=>l.type==="propWithChildren"?_V(l,a):sIe(l,a)))}function sIe(s,a){var l,d;let f=s.sheetObject,g=f.address.projectId,b=ue().atomP.historic.coreByProject[g].sheetsById[f.address.sheetId].sequence.tracksByObject[f.address.objectKey],_=(0,ZR.val)(b.trackIdByPropPath[nd(s.pathToProp)]);return _?(d=(l=a[f.address.objectKey])==null?void 0:l[_])!=null?d:[]:[]}var ZR,$b=P(()=>{Te(),ZR=Ft,yh(),rd(),ui()});function oIe(s,a){let[l,d]=br(null),f=hf("useCaptureSelection");return Fi(a,(0,Kb.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(g){if(!g.shiftKey||g.target instanceof HTMLInputElement)return!1;let b=a.getBoundingClientRect(),_=g.clientX-b.left-(0,$l.val)(s.scaledSpace.leftPadding),S=(0,$l.val)(s.scaledSpace.toUnitSpace)(_);return l.current={h:[S,S],v:[g.clientY-b.top,g.clientY-b.top]},(0,$l.val)(s.selectionAtom).set({current:void 0}),{onDrag(C,I,O){let R=a.getBoundingClientRect(),A=O.clientX-R.left-(0,$l.val)(s.scaledSpace.leftPadding),F=(0,$l.val)(s.scaledSpace.toUnitSpace)(A);l.current={h:[l.current.h[0],F],v:[l.current.v[0],O.clientY-R.top]};let L=wV.boundsToSelection(f,(0,$l.val)(s),l.current);(0,$l.val)(s.selectionAtom).set({current:L})},onDragEnd(C){l.current=null}}}}),[s,a,l])),d}var $l,Kb,Sf,Kie,Xie,qie,wV,Yie,Zie,xV,Qie,Jie,aIe=P(()=>{Te(),ws(),Hie(),J2e(),eIe(),kr(),yn(),$l=Ft,Kb=q(Oe()),ze(),Yu(),$b(),pf(),Sf=5,Xie=ae.div(Kie||(Kie=W([`
  cursor: `,`;
`])),s=>s.isShiftDown?"cell":"default"),qie=({layoutP:s,children:a,height:l})=>{let[d,f]=br(null),g=Vie("Shift"),b=oIe(s,f),_=(0,Kb.useRef)(b);return _.current=b,Kb.default.createElement(Xie,{style:{height:l+"px"},ref:d,isShiftDown:g,className:"selectionview"},b&&Kb.default.createElement(Qie,{state:b,layoutP:s}),a)},(s=>{let a=(b,_,S,C,I)=>{let O=YR(S);if(S.top+S.nodeHeight/2+Sf>C.v[0]&&S.top+S.nodeHeight/2-Sf<C.v[1])for(let[R,A]of O.byPosition){let F=_.scaledSpace.toUnitSpace(Sf);if(!(R+F<=C.h[0]||R-F>=C.h[1]))for(let L of A)Wie(I,V=>V[L.track.sheetObject.address.objectKey].byTrackId[L.track.id].byKeyframeId[L.kf.id],!0)}d(b,_,S,C,I)},l={sheet(b,_,S,C,I){a(b,_,S,C,I)},propWithChildren(b,_,S,C,I){a(b,_,S,C,I)},sheetObject(b,_,S,C,I){a(b,_,S,C,I)},primitiveProp(b,_,S,C,I){let{sheetObject:O,trackId:R}=S,A=(0,$l.val)(ue().atomP.historic.coreByProject[O.address.projectId].sheetsById[O.address.sheetId].sequence.tracksByObject[O.address.objectKey].trackData[R]);if(!(C.v[0]>S.top+S.heightIncludingChildren/2+Sf||S.top+S.heightIncludingChildren/2-Sf>C.v[1])){for(let F of A.keyframes)if(!(F.position+_.scaledSpace.toUnitSpace(Sf)<=C.h[0])){if(F.position-_.scaledSpace.toUnitSpace(Sf)>=C.h[1])break;Wie(I,L=>L[O.address.objectKey].byTrackId[R].byKeyframeId[F.id],!0)}}}},d=(b,_,S,C,I)=>{if("children"in S)for(let O of S.children)f(b,_,O,C,I)};function f(b,_,S,C,I){if(!S.shouldRender||C.v[0]>S.top+S.heightIncludingChildren||S.top>C.v[1])return;let O=l[S.type];O?O(b,_,S,C,I):d(b,_,S,C,I)}function g(b,_,S){let C={};S=xV(S);let I=_.tree;f(b.utilFor.internal(),_,I,S,C);let O=_.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:C,getDragHandlers(R){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let A,F=_.scaledSpace.toUnitSpace;return{onDrag(L,V,H){A&&(A.discard(),A=void 0);let K=da.checkIfMouseEventSnapToPos(H,{ignore:R.domNode}),Z=K!=null?K-R.positionAtStartOfDrag:F(L);A=ue().tempTransaction(({stateEditors:re})=>{let ne=re.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let le of Object.keys(C)){let{byTrackId:Ce}=C[le];for(let ve of Object.keys(Ce)){let{byKeyframeId:we}=Ce[ve];ne({trackId:ve,keyframeIds:Object.keys(we),translate:Z,scale:1,origin:0,snappingFunction:O.getSequence().closestGridPosition,objectKey:le,projectId:R.projectId,sheetId:R.sheetId})}}})},onDragEnd(L){L?A==null||A.commit():A==null||A.discard()}}}}},delete(){ue().transaction(({stateEditors:R})=>{let A=R.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let F of Object.keys(C)){let{byTrackId:L}=C[F];for(let V of Object.keys(L)){let{byKeyframeId:H}=L[V];A(z(N({},O.address),{objectKey:F,trackId:V,keyframeIds:Object.keys(H)}))}}})}}}s.boundsToSelection=g})(wV||(wV={})),Zie=ae.div(Yie||(Yie=W([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),xV=s=>({h:[...s.h].sort((a,l)=>a-l),v:[...s.v].sort((a,l)=>a-l)}),Qie=({state:s,layoutP:a})=>{let l=Q2e(s);return Yn(()=>{let d=(0,$l.val)(l.pointer),f=xV(d),g=(0,$l.val)(a.scaledSpace.fromUnitSpace),b=(0,$l.val)(a.scaledSpace.leftPadding),_=f.h.map(g).map(R=>R+b),S=f.v[0],C=f.v[1]-f.v[0],I=_[0],O=_[1]-_[0];return Kb.default.createElement(Zie,{style:{top:S+"px",height:C+"px",left:I+"px",width:O+"px"}})},[a,l])},Jie=qie}),av,ese,tse,SV,nse,rse,ise,sse=P(()=>{Cb(),av=q(Oe()),ze(),Mh(),tse=ae.div(ese||(ese=W([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>pd.scrollableArea),SV=(0,av.createContext)(Hu),nse=()=>(0,av.useContext)(SV),rse=s=>{let a=(0,av.useRef)(null),l=(0,av.useCallback)(d=>{a.current.scrollBy(0,d.deltaY)},[]);return av.default.createElement(SV.Provider,{value:l},av.default.createElement(tse,{ref:a},s.children))},ise=rse}),ose,lIe=P(()=>{ose='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),Kl,QR=P(()=>{Kl=(s,a=s)=>`
  left: `.concat(s*-.5,`px;
  top: `).concat(a*-.5,`px;
  width: `).concat(s,`px;
  height: `).concat(a,`px;
`)}),JR,ase,lse,uIe=P(()=>{JR=Ft,ase=(0,JR.prism)(()=>{let[s,a]=JR.prism.state("pos",null);return JR.prism.effect("setupListeners",()=>{let l=d=>{a(d)};return document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousemove",l)}},[]),s}),lse=ase}),wh,ha,$E,use,cse,dse,hse,xh,id,eD,pse,fse,fo=P(()=>{wh=Ft,uIe(),ui(),ha=q(Oe()),$E=(0,ha.createContext)(null),use=0,cse=({children:s,layoutP:a})=>{let l=(0,ha.useMemo)(()=>new wh.Atom([]),[]),d=(0,ha.useMemo)(()=>(0,wh.prism)(()=>{let b=wh.prism.memo("p",()=>pse(a),[a]).getValue(),_=(0,wh.val)(l.pointer);return _.length>0?eh(_).position:b}),[a]),f=(0,ha.useCallback)(()=>{let b=use++;return l.reduce(_=>[..._,{id:b,position:[-1,0]}]),{set:_=>{l.reduce(S=>{let C=S.findIndex(O=>O.id===b);if(C===-1)return console.warn("Lock is already freed. This is a bug."),S;let I=[...S];return I.splice(C,1,{id:b,position:[_,_===-1?0:1]}),I})},unlock:()=>{l.reduce(_=>_.filter(S=>S.id!==b))}}},[]),g={currentD:d,getLock:f};return ha.default.createElement($E.Provider,{value:g},s)},dse=()=>(0,ha.useContext)($E).currentD,hse=()=>{let{getLock:s}=(0,ha.useContext)($E),a=(0,ha.useRef)();return(0,ha.useLayoutEffect)(()=>()=>{var l;(l=a.current)==null||l.unlock()},[]),(0,ha.useMemo)(()=>{let l;return(d,f)=>{var g,b;(l==null?void 0:l.shouldLock)!==d&&(d?a.current=s():(g=a.current)==null||g.unlock()),(l==null?void 0:l.pos)!==f&&d&&((b=a.current)==null||b.set(f)),l={shouldLock:d,pos:f}}},[s])},xh=(s,a)=>{let{getLock:l}=(0,ha.useContext)($E),d=(0,ha.useRef)();(0,ha.useLayoutEffect)(()=>{if(s)return d.current=l(),()=>{d.current.unlock()}},[s,l]),(0,ha.useLayoutEffect)(()=>{s&&d.current.set(a)},[a,s])},id=s=>({[eD]:s==="hide"?s:s.toFixed(3)}),eD="data-theatre-lock-framestamp-to",pse=s=>(0,wh.prism)(()=>{let a=(0,wh.val)(s.rightDims),l=(0,wh.val)(s.clippedSpace.toUnitSpace),d=(0,wh.val)(lse);if(!d)return[-1,0];for(let I of d.composedPath()){if(!(I instanceof HTMLElement||I instanceof SVGElement))break;if(I.hasAttribute(eD)){let O=I.getAttribute(eD);if(typeof O!="string")continue;if(O==="hide")return[-1,0];let R=parseFloat(O);if(isFinite(R)&&R>=0)return[R,2]}}let{clientX:f,clientY:g}=d,{screenX:b,screenY:_,width:S,height:C}=a;if(vS(f,b,b+S)&&vS(g,_+16,_+C)){let I=f-b;return[l(I),3]}else return[-1,0]}),fse=cse}),mse,KE,EV,gse,vse,sd,yse=P(()=>{Ar(),al(),ze(),lIe(),QR(),Yu(),fo(),mse=12,KE=34,EV="beingDragged",sd={BEING_DRAGGED_CLASS:EV,CSS:lo(gse||(gse=W([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),Kl(mse),Cr,EV),CSS_WHEN_SOMETHING_DRAGGING:lo(vse||(vse=W([`
    pointer-events: auto;
    cursor: var(`,`);

    //  thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),ph,KE/2,KE/2,KE,KE,ose),reactProps(s){return z(N(N({},id(s.position)),da.includePositionSnapAttrs(s.position)),{className:s.isDragging?sd.BEING_DRAGGED_CLASS:""})}}});function CV(){qE.set({mode:"snapToAll"})}function lv(){qE.set({mode:"snapToNone"})}function bse(s){qE.set({mode:"snapToSome",positions:s})}function _se(s,a){return Object.fromEntries(Object.entries(s).map(([l,d])=>[l,Object.fromEntries(Object.entries(d.trackData).map(([f,g])=>[f,g.keyframes.filter(b=>a(b,{trackId:f,trackData:g,objectKey:l})).map(b=>b.position)]))]))}var wse,xse,PV,Sse,Ese,Cse,Pse,Tse,XE,qE,TV,uv=P(()=>{wse=Ft,xse=Ft,PV=q(Oe()),ze(),yse(),Ese=ae.div(Sse||(Sse=W([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),sd.CSS,sd.CSS_WHEN_SOMETHING_DRAGGING),Pse=ae.div(Cse||(Cse=W([`
  position: absolute;
`]))),Tse=s=>PV.default.createElement(Pse,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,xse.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.position,"px))")}},PV.default.createElement(Ese,N({},sd.reactProps({isDragging:!1,position:s.position})))),XE=Tse,qE=new wse.Atom({mode:"snapToNone"}),TV=qE.prism});function cIe(s,a){let l=(0,cv.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(f){if(f.target instanceof HTMLInputElement||f.shiftKey||f.altKey||f.ctrlKey||f.metaKey||f.composedPath().some(O=>O instanceof HTMLElement&&O.draggable===!0))return!1;let g=f.clientX-a.getBoundingClientRect().left,b=bi((0,Bi.val)(s.clippedSpace.toUnitSpace)(g),0,1/0),_=(0,Bi.val)(s.seeker.setIsSeeking),S=(0,Bi.val)(s.sheet).getSequence();S.position=b;let C=b,I=(0,Bi.val)(s.scaledSpace.toUnitSpace);return _(!0),CV(),{onDrag(O,R,A){let F=I(O),L=bi(C+F,0,S.length),V=da.checkIfMouseEventSnapToPos(A,{});V!=null&&(L=V),S.position=L},onDragEnd(){_(!1),lv()}}}}),[s,a]),[d]=Fi(a,l);Gl(d,"draggingPositionInSequenceEditor","ew-resize")}function dIe(s,a){let l=nse();(0,cv.useLayoutEffect)(()=>{if(!a)return;let d=g=>{if(g.ctrlKey){g.preventDefault(),g.stopPropagation();let b=g.clientX-a.getBoundingClientRect().left,_=(0,Bi.val)(s.clippedSpace.toUnitSpace)(b),S=(0,Bi.val)(s.clippedSpace.range),C=1+MV(g.deltaY,[-50,50])*.03,I=th(S,A=>(A-_)*C+_),O=(0,Bi.val)(s.sheet).getSequence().length,R=O+O*.25;(0,Bi.val)(s.clippedSpace.setRange)(hIe(I,[0,R]));return}else if(g.shiftKey){g.preventDefault(),g.stopPropagation();let b=(0,Bi.val)(s.sheet).getSequence().length,_=(0,Bi.val)(s.clippedSpace.range),S=(_.end-_.start)/b,C=MV(g.deltaY||g.deltaX,[-50,50])*.05*S,I=th(_,O=>O+C);(0,Bi.val)(s.clippedSpace.setRange)(I);return}else{l(g),g.preventDefault(),g.stopPropagation();let b=(0,Bi.val)(s.scaledSpace.toUnitSpace)(g.deltaX*1),_=(0,Bi.val)(s.clippedSpace.range),S=th(_,C=>C+b);(0,Bi.val)(s.clippedSpace.setRange)(S);return}},f={capture:!0,passive:!1};return a.addEventListener("wheel",d,f),()=>{a.removeEventListener("wheel",d,f)}},[a,s]),Fi(a,(0,cv.useMemo)(()=>({onDragStart(d){let f=(0,Bi.val)(s.clippedSpace.range),g=(0,Bi.val)(s.clippedSpace.setRange),b=(0,Bi.val)(s.scaledSpace.toUnitSpace);return d.preventDefault(),d.stopPropagation(),{onDrag(_,S,C,I,O){l({deltaY:-O});let R=-b(_),A=th(f,F=>F+R);g(A)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[s]))}function MV(s,[a,l]){return Math.max(Math.min(s,l),a)}function hIe(s,a){return th(s,l=>MV(l,a))}function pIe(s,a){(0,cv.useLayoutEffect)(()=>{if(!a)return;let l=(0,Bi.prism)(()=>{let b=(0,Bi.val)(s.clippedSpace.range);return(0,Bi.val)(s.scaledSpace.fromUnitSpace)(b.start)}),d=()=>{let b=l.getValue();a.scrollLeft=b},f=l.onStale(d);d();let g=setTimeout(d,100);return()=>{clearTimeout(g),f()}},[s,a])}var Bi,cv,Mse,kse,Ase,kV,Ise=P(()=>{ws(),kr(),yn(),Bi=Ft,ui(),cv=q(Oe()),ze(),sse(),Ar(),al(),Yu(),uv(),kse=ae.div(Mse||(Mse=W([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),Cr),Ase=cv.default.memo(({layoutP:s,children:a,height:l})=>{let{width:d,unitSpaceToScaledSpaceMultiplier:f}=Yn(()=>({width:(0,Bi.val)(s.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Bi.val)(s.scaledSpace.fromUnitSpace)(1)}),[s]),[g,b]=br(null);return dIe(s,b),cIe(s,b),pIe(s,b),cv.default.createElement(kse,{ref:g,style:{width:d+"px",height:l+"px","--unitSpaceToScaledSpaceMultiplier":f}},a)}),kV=Ase}),tD,Rse,Dse,Ose,Lse,Nse,Fse,Bse,Xb,nD=P(()=>{tD=q(Oe()),ze(),Dse=ae.li(Rse||(Rse=W([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),Lse=ae.div(Ose||(Ose=W([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),s=>s.isEven?"transparent":"#6b8fb505"),Fse=ae.ul(Nse||(Nse=W([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Bse=({leaf:s,children:a,node:l,isCollapsed:d})=>{let f=Array.isArray(a)&&a.length>0;return s.shouldRender?tD.default.createElement(Dse,null,tD.default.createElement(Lse,{style:{height:s.nodeHeight+"px"},isEven:s.n%2===0},l),f&&tD.default.createElement(Fse,null,a)):null},Xb=Bse}),fIe=$((s,a)=>{(function(){var l=this,d={};typeof s<"u"?a.exports=d:l.fuzzy=d,d.simpleFilter=function(f,g){return g.filter(function(b){return d.test(f,b)})},d.test=function(f,g){return d.match(f,g)!==null},d.match=function(f,g,b){b=b||{};var _=0,S=[],C=g.length,I=0,O=0,R=b.pre||"",A=b.post||"",F=b.caseSensitive&&g||g.toLowerCase(),L;f=b.caseSensitive&&f||f.toLowerCase();for(var V=0;V<C;V++)L=g[V],F[V]===f[_]?(L=R+L+A,_+=1,O+=1+O):O=0,I+=O,S[S.length]=L;return _===f.length?(I=F===f?1/0:I,{rendered:S.join(""),score:I}):null},d.filter=function(f,g,b){return!g||g.length===0?[]:typeof f!="string"?g:(b=b||{},g.reduce(function(_,S,C,I){var O=S;b.extract&&(O=b.extract(S));var R=d.match(f,O,b);return R!=null&&(_[_.length]={string:R.rendered,score:R.score,index:C,original:S}),_},[]).sort(function(_,S){var C=S.score-_.score;return C||_.index-S.index}))}})()});function mIe(s,a){let[l,d]=(0,rD.useState)(!1),f=(0,rD.useRef)(a);return l||(f.current=a),(0,rD.useMemo)(()=>s(d),f.current)}var rD,gIe=P(()=>{rD=q(Oe())}),AV,Ef,iD=P(()=>{AV="rgba(26, 28, 30, 0.97);",Ef="#272B2F"});function Use(s,a,l,d){let f=mIe(g=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return g(!0),{onDrag(b,_){s&&l.onCurveChange(d(b,_))},onDragEnd(b){g(!1),l.onCancelCurveChange()}}}}),[s,l.onCurveChange,l.onCancelCurveChange]);Fi(a,f)}var Sr,sD,YE,qb,zse,ZE,Vse,oD,jse,Hse,Gse,Yb,Wse,dv,$se,Kse,IV,Xse,aD,qse,RV,Yse,Zse,vIe=P(()=>{Sr=q(Oe()),ws(),kr(),Fy(),ze(),Ar(),gIe(),iD(),sD=.12,YE=1+sD*2,qb=.01,zse=8,ZE=(1-qb)/(zse-1),Vse="#3EAAA4",oD="#3EAAA4",jse="#3EAAA4",Hse="#3EAAA4",Gse="#3EAAA4",Yb="#3EAAA4",Wse="#3EAAA4",dv="#B3B3B3",$se="#3eaaa4",Kse="#67dfd8",IV=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],aD=ae.circle(Xse||(Xse=W([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),$se),RV=ae.circle(qse||(qse=W([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),Cr,aD,Kse),Yse=s=>{let{curveConnection:{left:a,right:l},backgroundConnections:d}=s,f=Math.min(0,1-l.handles[1],1-a.handles[3]),g=Math.max(1,1-l.handles[1],1-a.handles[3]),b=Math.max(1,g-f),_=H=>(H-f)/b,[S,C]=br(null),I=YE/((C==null?void 0:C.clientWidth)||1),O=YE/((C==null?void 0:C.clientHeight)||1),[R,A]=br(null);Use(C,A,s,(H,K)=>{let Z=bi(a.handles[2]+H*I,0,1),re=a.handles[3]-K*O;return[Z,re,l.handles[0],l.handles[1]]});let[F,L]=br(null);Use(C,L,s,(H,K)=>{let Z=bi(l.handles[0]+H*I,0,1),re=l.handles[1]-K*O;return[a.handles[2],a.handles[3],Z,re]});let V=H=>"M0 ".concat(_(1)," C").concat(H.left.handles[2]," ").concat(_(1-H.left.handles[3])," ").concat(H.right.handles[0]," ").concat(_(1-H.right.handles[1])," 1 ").concat(_(0));return Sr.default.createElement("svg",{height:"100%",width:"100%",ref:S,viewBox:"".concat(-sD," ").concat(-sD," ").concat(YE," ").concat(YE),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},Sr.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},Sr.default.createElement("stop",{offset:_(-1),stopColor:Wse}),Sr.default.createElement("stop",{offset:_(0),stopColor:Yb}),Sr.default.createElement("stop",{offset:_(.3),stopColor:Gse}),Sr.default.createElement("stop",{offset:_(.5),stopColor:Hse}),Sr.default.createElement("stop",{offset:_(.7),stopColor:jse}),Sr.default.createElement("stop",{offset:_(1),stopColor:oD}),Sr.default.createElement("stop",{offset:_(2),stopColor:Vse})),Sr.default.createElement("pattern",{id:"dot-background-pattern-1",width:ZE,height:ZE/b,y:-f/b},Sr.default.createElement("rect",{width:qb,height:qb,fill:dv,opacity:.3})),Sr.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),Sr.default.createElement("pattern",{id:"dot-background-pattern-2",width:ZE,height:ZE},Sr.default.createElement("rect",{width:qb,height:qb,fill:dv})),Sr.default.createElement("rect",{x:0,y:_(0),width:"1",height:_(1)-_(0),fill:"url(#dot-background-pattern-2)"}),!a.type||a.type==="bezier"?Sr.default.createElement(Sr.default.Fragment,null,Sr.default.createElement("line",{x1:0,y1:_(1),x2:a.handles[2],y2:_(1-a.handles[3]),stroke:dv,strokeWidth:"0.01"}),Sr.default.createElement("line",{x1:1,y1:_(0),x2:l.handles[0],y2:_(1-l.handles[1]),stroke:dv,strokeWidth:"0.01"}),Sr.default.createElement("path",{d:V(s.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),d.map((H,K)=>Sr.default.createElement("path",{key:H.objectKey+"/"+H.left.id,d:V(H),stroke:IV[K%IV.length],opacity:.6,strokeWidth:"0.01"})),Sr.default.createElement("path",{d:V(s.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),Sr.default.createElement("circle",{cx:0,cy:_(1),r:"0.025",stroke:oD,strokeWidth:"0.02",fill:Ef}),Sr.default.createElement("circle",{cx:1,cy:_(0),r:"0.025",stroke:Yb,strokeWidth:"0.02",fill:Ef}),Sr.default.createElement(RV,{ref:R,cx:a.handles[2],cy:_(1-a.handles[3]),fill:oD,opacity:.2}),Sr.default.createElement(aD,{cx:a.handles[2],cy:_(1-a.handles[3])}),Sr.default.createElement(RV,{ref:F,cx:l.handles[0],cy:_(1-l.handles[1]),fill:Yb,opacity:.2}),Sr.default.createElement(aD,{cx:l.handles[0],cy:_(1-l.handles[1])})):Sr.default.createElement(Sr.default.Fragment,null,Sr.default.createElement("line",{x1:0,y1:_(1),x2:1,y2:_(1),stroke:dv,strokeWidth:"0.01"}),Sr.default.createElement("line",{x1:1,y1:_(1),x2:1,y2:0,stroke:dv,strokeWidth:"0.01"}),Sr.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:Yb,strokeWidth:"0.02",fill:Ef}),Sr.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:Yb,strokeWidth:"0.02",fill:Ef})))},Zse=Yse});function lD(s){return s.map(a=>a.toFixed(3)).join(", ")}function uD(s){if(!s||(s==null?void 0:s.length)>Qse)return null;let a=s.split(",");if(a.length!==4)return null;let l=a.map(d=>Number(d.trim()));return!l.every(d=>isFinite(d))||l[0]<0||l[0]>1||l[2]<0||l[2]>1?null:l}function yIe(s,a,l={threshold:.02}){if(!s||!a)return!1;let d=0;for(let f=0;f<4;f++)d+=Math.abs(s[f]-a[f]);return d<l.threshold}var Qse,cD,Jse=P(()=>{Qse=128,cD=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),No,dD,hv,DV,eoe,toe,QE,OV,LV,noe,roe,bIe=P(()=>{No=q(Oe()),dD=.75,hv=.1,DV=1+dD*2,eoe="#F5F5F5",toe="#888888",QE="#4f4f4f",OV="rgba(255, 255, 255, 0.1)",LV=s=>1-s,noe=s=>{let{easing:a,isSelected:l}=s,d=l?eoe:toe,f="".concat(-dD," ").concat(-dD," ").concat(DV," ").concat(DV);if(a){let g=[a[0],LV(a[1])],b=[a[2],LV(a[3])];return No.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},No.default.createElement("line",{x1:"0",y1:"1",x2:g[0],y2:g[1],stroke:QE,strokeWidth:"0.1"}),No.default.createElement("line",{x1:"1",y1:"0",x2:b[0],y2:b[1],stroke:QE,strokeWidth:"0.1"}),No.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:OV}),No.default.createElement("circle",{cx:b[0],cy:b[1],r:.1,fill:OV}),No.default.createElement("circle",{cx:g[0],cy:g[1],r:hv,fill:QE}),No.default.createElement("circle",{cx:b[0],cy:b[1],r:hv,fill:QE}),No.default.createElement("path",{d:"M0 1 C".concat(g[0]," ").concat(g[1]," ").concat(b[0],` 
        `).concat(b[1]," 1 0"),stroke:d,strokeWidth:"0.08"}),No.default.createElement("circle",{cx:0,cy:1,r:hv,fill:d}),No.default.createElement("circle",{cx:1,cy:0,r:hv,fill:d}))}return No.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},No.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:d,strokeWidth:"0.08"}),No.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:d,strokeWidth:"0.08"}),No.default.createElement("circle",{cx:0,cy:1,r:hv,fill:d}),No.default.createElement("circle",{cx:1,cy:0,r:hv,fill:d}))},roe=noe}),JE,ioe,soe,ooe,aoe,loe,uoe,coe,_Ie=P(()=>{DE(),JE=q(Oe()),ze(),Jse(),bIe(),GI(),iD(),Qc(),ooe=ae.div(soe||(soe=W([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),Ef,({isSelected:s})=>s&&lo(ioe||(ioe=W([`
      background-color: #383d42;
    `])))),loe=ae(Zc)(aoe||(aoe=W([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),uoe=JE.default.forwardRef((s,a)=>{let[l,d]=zb({enabled:!0,verticalPlacement:s.tooltipPlacement,verticalGap:0},()=>JE.default.createElement(loe,{showPopoverEdgeTriangle:!1},s.easing.label));return JE.default.createElement(ooe,N({ref:HI([d,a])},s),l,JE.default.createElement(roe,{easing:uD(s.easing.value),isSelected:s.isSelected}))}),coe=uoe});function wIe(s){var a;let[l,d]=(0,doe.useState)(null),f=b=>{if(l===null){s.items.length>0&&d(0);return}let _=l+b*s.uiColumns,S=_<0,C=_>s.items.length-1;if(S||C){if(s.canVerticleExit&&s.canVerticleExit(S?"top":"bottom")){d(null);return}return}d(_)},g=b=>{l===null?d(CIe(b,s.items.length)):l+b<0?d(null):d(Math.min(l+b,s.items.length-1))};return{focusFirstItem(){d(0)},onParentEltKeyDown:b=>{if(b.key==="ArrowRight")g(1);else if(b.key==="ArrowLeft")g(-1);else if(b.key==="ArrowUp")f(-1);else if(b.key==="ArrowDown")f(1);else return 0;return 1},gridItems:s.items.map((b,_)=>s.renderItem({isSelected:_===l,item:b,select(S){d(_),s.onSelectItem(b)===1&&(S==null||S.preventDefault(),S==null||S.stopPropagation())}})),currentSelection:(a=s.items[l??-1])!=null?a:null}}var doe,xIe=P(()=>{doe=q(Oe()),pD()});function hoe(s,a,l){var d;(d=s.current)==null||d.discard(),s.current=null;let f=uD(l);f===null?s.current=EIe(a):s.current=SIe(a,f)}function poe(s){var a;(a=s.current)==null||a.discard(),s.current=null}function SIe(s,a){return ue().tempTransaction(({stateEditors:l})=>{let{setHandlesForKeyframe:d,setKeyframeType:f}=l.coreByProject.historic.sheetsById.sequence;for(let{projectId:g,sheetId:b,objectKey:_,trackId:S,left:C,right:I}of s)d({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:C.id,start:[a[0],a[1]]}),d({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:I.id,end:[a[2],a[3]]}),f({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:C.id,keyframeType:"bezier"})})}function EIe(s){return ue().tempTransaction(({stateEditors:a})=>{let{setKeyframeType:l}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:d,sheetId:f,objectKey:g,trackId:b,left:_}of s)l({projectId:d,sheetId:f,objectKey:g,trackId:b,keyframeId:_.id,keyframeType:"hold"})})}function CIe(s,a){return(s%a+a)%a}function PIe(s,a){return()=>setTimeout(s,a)}function TIe({left:s,right:a}){return({left:l,right:d})=>s.handles[2]!==l.handles[2]||s.handles[3]!==l.handles[3]||a.handles[0]!==d.handles[0]||a.handles[1]!==d.handles[1]}var hD,wi,foe,NV,FV,moe,goe,voe,yoe,boe,_oe,woe,xoe,Soe,Eoe,Coe,Poe,BV,MIe,UV,Toe,pD=P(()=>{hD=Ft,wi=q(Oe()),ze(),foe=q(fIe()),Te(),vIe(),_Ie(),Jse(),iD(),kr(),xIe(),NV=3,FV=53,moe=25,voe=ae.div(goe||(goe=W([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),AV,NV*FV),boe=ae.div(yoe||(yoe=W([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),NV),woe=ae.input.attrs({type:"text"})(_oe||(_oe=W([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),Ef),Soe=ae.div(xoe||(xoe=W([`
  grid-area: tween;
  background: `,`;
`])),Ef),Coe=ae.div(Eoe||(Eoe=W([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),Poe=s=>{let a=(0,wi.useMemo)(()=>[s.curveConnection,...s.additionalConnections],[s.curveConnection,...s.additionalConnections]),l=(0,wi.useRef)(null);(0,wi.useEffect)(()=>{let ce=Toe(a);return()=>{var Re;ce(),(Re=l.current)==null||Re.commit()}},[l]);let d=[s.curveConnection.left.handles[2],s.curveConnection.left.handles[3],s.curveConnection.right.handles[0],s.curveConnection.right.handles[1]],f=(0,wi.useRef)(null);(0,wi.useLayoutEffect)(()=>{var ce,Re;(ce=f.current)==null||ce.select(),(Re=f.current)==null||Re.focus()},[f.current]);let[g,b]=(0,wi.useState)(lD(d)),_=ce=>{ce!==void 0&&(I(1),b(ce.target.value),uD(ce.target.value)&&R(ce.target.value))},S=ce=>{var Re,J;I(1),(ce.key==="ArrowDown"||ce.key==="ArrowUp")&&ce.preventDefault(),ce.key==="ArrowDown"?(rt.focusFirstItem(),(J=(Re=le.current[H[0].label])==null?void 0:Re.current)==null||J.focus()):ce.key==="Escape"?(poe(l),s.onRequestClose("key Escape")):ce.key==="Enter"&&s.onRequestClose("key Enter")},[C,I]=(0,wi.useState)(0);(0,wi.useEffect)(()=>{C===2?b(lD(d)):C===3&&g!==""&&b("")},a);let[O,R]=(0,wi.useState)(lD(d)),[A,F]=(0,wi.useState)(null);(0,wi.useEffect)(()=>{var ce;C!==0&&C!==3&&hoe(l,a,(ce=A??O)!=null?ce:"")},[A,O,C]),a.some(TIe(s.curveConnection))&&C===0&&I(3);let L=ce=>{var Re,J;I(2);let Ve=lD(ce);b(Ve),R(Ve),(Re=f.current)==null||Re.select(),(J=f.current)==null||J.focus()},V=()=>{},H=(0,wi.useMemo)(()=>/^[A-Za-z]/.test(g)?foe.default.filter(g,cD,{extract:ce=>ce.label}).map(ce=>ce.original):cD,[g]);(0,wi.useEffect)(()=>{C===1&&H[0]&&R(H[0].value)},[H]);let K=ce=>{ce.key==="Escape"?(poe(l),s.onRequestClose("key Escape"),ce.stopPropagation()):ce.key==="Enter"&&(s.onRequestClose("key Enter"),ce.stopPropagation())},Z=ce=>{C===0&&I(2),F(ce.value)},re=()=>F(null),ne=ce=>(hoe(l,a,ce.value),s.onRequestClose("selected easing option"),1),le=(0,wi.useRef)(cD.reduce((ce,Re)=>(ce[Re.label]={current:null},ce),{})),[Ce,ve]=br(null),[we,De]=(0,wi.useState)(0);(0,wi.useEffect)(()=>{let ce=()=>{var Re;De((Re=ve==null?void 0:ve.scrollTop)!=null?Re:0)};return ve==null||ve.addEventListener("scroll",ce),()=>ve==null?void 0:ve.removeEventListener("scroll",ce)},[ve]);let rt=wIe({items:H,uiColumns:3,onSelectItem:ne,canVerticleExit(ce){var Re,J;return ce==="top"?((Re=f.current)==null||Re.select(),(J=f.current)==null||J.focus(),1):0},renderItem:({item:ce,select:Re})=>{var J,Ve;return wi.default.createElement(coe,{key:ce.label,easing:ce,tabIndex:0,onKeyDown:K,ref:le.current[ce.label],onMouseOver:()=>Z(ce),onMouseOut:re,onClick:Re,tooltipPlacement:((Ve=(J=le.current[ce.label].current)==null?void 0:J.offsetTop)!=null?Ve:0)-(we??0)<FV+moe?"bottom":"top",isSelected:yIe(d,uD(ce.value))})}});return(0,wi.useLayoutEffect)(()=>{var ce,Re;if(rt.currentSelection!==null&&document.activeElement!==f.current){let J=(Re=(ce=le.current)==null?void 0:ce[rt.currentSelection.label])==null?void 0:Re.current;J==null||J.focus(),R(rt.currentSelection.value),/^[A-Za-z]/.test(g)||b(rt.currentSelection.value)}},[rt.currentSelection]),wi.default.createElement(voe,null,wi.default.createElement(woe,{value:g,placeholder:C===3?"Multiple easings selected":"Search presets...",onPaste:PIe(_),onChange:_,ref:f,onKeyDown:S}),wi.default.createElement(boe,{ref:Ce,onKeyDown:ce=>rt.onParentEltKeyDown(ce)},rt.gridItems,rt.gridItems.length===0?wi.default.createElement(Coe,null,"No results found"):void 0),wi.default.createElement(Soe,{onClick:()=>{var ce;return(ce=f.current)==null?void 0:ce.focus()}},wi.default.createElement(Zse,{curveConnection:s.curveConnection,backgroundConnections:s.additionalConnections,onCurveChange:L,onCancelCurveChange:V})))},BV=Poe,{isCurveEditorOpenD:MIe,isConnectionEditingInCurvePopover:UV,getLock:Toe}=(()=>{let s=new hD.Atom([]);return{getLock(a){return s.set(a),function(){s.set([])}},isCurveEditorOpenD:(0,hD.prism)(()=>s.prism.getValue().length>0),isConnectionEditingInCurvePopover(a){return hD.prism.ensurePrism(),s.prism.getValue().some(({left:l,right:d})=>a.left.id===l.id&&a.right.id===d.id)}}})()});function kIe(s,a){for(let{keyframeId:l}of RIe(a))if(s.left.id===l)return!0;return!1}function Moe(s,a,l){return(0,mD.prism)(()=>{if(l===void 0)return[];let d=[];for(let{objectKey:f,trackId:g}of koe(l)){let b=(0,mD.val)(ue().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[f].trackData[g]);b&&(d=d.concat(IIe(b.keyframes).filter(_=>kIe(_,l)).map(({left:_,right:S})=>({left:_,right:S,trackId:g,objectKey:f,sheetId:a,projectId:s}))))}return d})}function fD(s,a,l){var d;if(l===void 0)return[];let f=[];for(let{objectKey:b,trackId:_,keyframeIds:S}of koe(l))f=f.concat((d=zV({projectId:s,sheetId:a,objectKey:b,trackId:_,keyframeIds:S}))!=null?d:[]);let g=KR(f.map(b=>b.pathToProp));return f.map(({keyframe:b,pathToProp:_})=>({keyframe:b,pathToProp:_.slice(g.length)}))}function zV({projectId:s,sheetId:a,objectKey:l,trackId:d,keyframeIds:f}){let g=(0,mD.val)(ue().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[l]),b=g==null?void 0:g.trackData[d];if(!b)return null;let _=AIe((g==null?void 0:g.trackIdByPropPath)||{})[d];if(!_)return null;let S=[l,...XR(_)];return f.map(C=>({keyframe:b.keyframes.find(I=>I.id===C),pathToProp:S})).filter(({keyframe:C})=>C!==void 0)}function AIe(s){let a={};for(let[l,d]of Object.entries(s))a[d]=l;return a}function IIe(s){return s.map((a,l)=>({left:a,right:s[l+1]})).slice(0,-1)}function RIe(s){var a,l,d;let f=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,S]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))for(let C of Object.keys((d=S==null?void 0:S.byKeyframeId)!=null?d:{}))f.push({objectKey:g,trackId:_,keyframeId:C});return f}function koe(s){var a,l,d;let f=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,S]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))f.push({objectKey:g,trackId:_,keyframeIds:Object.keys((d=S==null?void 0:S.byKeyframeId)!=null?d:{})});return f}var mD,Zb=P(()=>{mD=Ft,Te(),rd()});function DIe(s,a){return(0,Aoe.useMemo)(()=>OIe(s,a),[])}function OIe(s,a){let l=null,d=b=>ue().tempTransaction(_=>s(_,b));function f(){l==null||l.discard(),l=null}let g={createAsset:a.sheet.project.assetStorage.createAsset,getAssetUrl:b=>b.id?a.sheet.project.assetStorage.getAssetUrl(b.id):void 0};return N({temporarilySetValue(b){f(),l=d(b)},discardTemporaryValue:f,permanentlySetValue(b){f(),d(b).commit()}},g)}var Aoe,LIe=P(()=>{Te(),Aoe=q(Oe())});function VV(s){var a;if(s.type==="sheetObject")return mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(gD,{style:{paddingLeft:"".concat(s.indent*vD,"px")}},s.sheetObject.address.objectKey),s.children.map((l,d)=>mo.default.createElement(VV,z(N({key:d},l),{autoFocusInput:s.autoFocusInput&&d===0,indent:s.indent+1}))));if(s.type==="propWithChildren"){let l=(a=s.propConfig.label)!=null?a:eh(s.pathToProp);return mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(gD,{style:{paddingLeft:"".concat(s.indent*vD,"px")}},l),s.children.map((d,f)=>mo.default.createElement(VV,z(N({key:f},d),{autoFocusInput:s.autoFocusInput&&f===0,indent:s.indent+1}))))}else return mo.default.createElement(NIe,z(N({},s),{autoFocusInput:s.autoFocusInput,indent:s.indent}))}function NIe(s){var a;let l=(a=s.propConfig.label)!=null?a:eh(s.pathToProp),d=FIe(s);if(s.propConfig.type==="enum")return mo.default.createElement(mo.default.Fragment,null);{let f=gz[s.propConfig.type];return mo.default.createElement(Roe,null,mo.default.createElement(gD,null,mo.default.createElement("span",{style:{paddingLeft:"".concat(s.indent*vD,"px")}},l)),mo.default.createElement(Loe,null,mo.default.createElement(f,{editingTools:d,propConfig:s.propConfig,value:hR(s.keyframe.value,s.propConfig),autoFocus:s.autoFocusInput})))}}function FIe(s){let a=s.sheetObject;return DIe(({stateEditors:l},d)=>{let f=z(N({},s.keyframe),{value:d});l.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},a.address),{trackId:s.trackId,keyframes:[f],snappingFunction:a.sheet.getSequence().closestGridPosition}))},a)}var mo,Ioe,Roe,Doe,gD,vD,Ooe,Loe,BIe=P(()=>{mo=q(Oe()),ze(),wJ(),Ky(),LIe(),mf(),Roe=ae.div(Ioe||(Ioe=W([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),gD=ae.div(Doe||(Doe=W([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),vD=10,Loe=ae.div(Ooe||(Ooe=W([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function yD(s){return qc({debugName:"useKeyframeInlineEditorPopover"},()=>bD.default.createElement(Zc,{showPopoverEdgeTriangle:!0},bD.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(s)?s.map((a,l)=>bD.default.createElement(VV,z(N({key:l},a),{autoFocusInput:l===0,indent:0}))):void 0)))}var bD,_D=P(()=>{bD=q(Oe()),Yc(),Qc(),BIe()});function UIe(s,a,l){return ua(s,{displayName:"Keyframe",menuItems:()=>{let d=fD(l.leaf.sheetObject.address.projectId,l.leaf.sheetObject.address.sheetId,l.selection);return[{label:d.length>0?"Copy (selection)":"Copy",callback:()=>{d.length>0?ue().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(d)}):ue().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l.keyframe,pathToProp:l.leaf.pathToProp}])})}},{label:l.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{l.selection?l.selection.delete():ue().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},l.leaf.sheetObject.address),{keyframeIds:[l.keyframe.id],trackId:l.leaf.trackId}))})}}]},onOpen(){a._debug("Show keyframe",l)}})}function zIe(s,a,l){let d=(0,Cf.useRef)(a);d.current=a;let{onClickFromDrag:f}=l,g=(0,Cf.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(_){let S=d.current,C=(0,wD.val)(ue().atomP.historic.coreByProject[S.leaf.sheetObject.address.projectId].sheetsById[S.leaf.sheetObject.address.sheetId].sequence.tracksByObject),I=_se(C,function(F,{trackId:L,objectKey:V}){var H,K;return F.id!==S.keyframe.id&&!(S.selection&&(K=(H=S.selection.byObjectKey[V])==null?void 0:H.byTrackId[L])!=null&&K.byKeyframeId[F.id])});if(bse(I),S.selection){let{selection:F,leaf:L}=S,{sheetObject:V}=L,H=F.getDragHandlers(z(N({},V.address),{domNode:s,positionAtStartOfDrag:S.track.data.keyframes[S.index].position})).onDragStart(_);return H&&z(N({},H),{onClick:f,onDragEnd:(...K)=>{var Z;(Z=H.onDragEnd)==null||Z.call(H,...K),lv()}})}let O=S,R=(0,wD.val)(O.layoutP.scaledSpace.toUnitSpace),A;return{onDrag(F,L,V){var H;let K=O.track.data.keyframes[O.index],Z=Math.max((H=da.checkIfMouseEventSnapToPos(V,{ignore:s}))!=null?H:K.position+R(F),0);A==null||A.discard(),A=void 0,A=ue().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},O.leaf.sheetObject.address),{trackId:O.leaf.trackId,keyframes:[z(N({},K),{position:Z})],snappingFunction:(0,wD.val)(O.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(F){F?A==null||A.commit():A==null||A.discard(),lv()},onClick(F){f(F)}}}}),[f]),[b]=Fi(s,g);return xh(b,a.keyframe.position),Gl(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var Cf,wD,eC,jV,tC,HV,Noe,xD,Foe,Boe,Uoe,zoe,Voe,joe,Hoe=P(()=>{Cf=q(Oe()),ze(),Te(),ca(),ws(),kr(),wD=Ft,fo(),al(),Yu(),QR(),pf(),Zb(),Ar(),uv(),_D(),nv(),eC=6,jV=eC+2,tC={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},HV=({isSelected:s,isInlineEditorPopoverOpen:a})=>s&&a?tC.inlineEditorOpenColor:s?tC.selectedColor:a?tC.selectedAndInlineEditorOpenColor:tC.normalColor,xD=ae.div(Noe||(Noe=W([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),Kl(eC),s=>HV(s),s=>s.flag===2?"outline: 2px solid white;":""),Boe=ae.div(Foe||(Foe=W([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),Kl(eC*1.5),s=>HV(s),s=>s.flag===2?"outline: 2px solid white;":""),zoe=ae.div(Uoe||(Uoe=W([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),Kl(12),Cr,xD,s=>s.isInlineEditorPopoverOpen?Kl(jV):"",xD,Kl(jV)),Voe=s=>{let a=hf("SingleKeyframeDot",s.keyframe.id),l=tv(s.itemKey),[d,f]=br(null),[g]=UIe(f,a,s),{node:b,toggle:_,isOpen:S}=yD([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.leaf.pathToProp,propConfig:s.leaf.propConf,sheetObject:s.leaf.sheetObject,trackId:s.leaf.trackId}]);zIe(f,s,{onClickFromDrag(I){_(I,d.current)}});let C=!s.keyframe.type||s.keyframe.type==="bezier";return Cf.default.createElement(Cf.default.Fragment,null,Cf.default.createElement(zoe,N({ref:d,isInlineEditorPopoverOpen:S},l.attrs)),C?Cf.default.createElement(xD,{isSelected:!!s.selection,isInlineEditorPopoverOpen:S,flag:l.flag}):Cf.default.createElement(Boe,{isSelected:!!s.selection,isInlineEditorPopoverOpen:S,flag:l.flag}),b,g)},joe=Voe}),GV,WV,$V,pv,Goe,Woe,KV,$oe=P(()=>{ol(),GV=q(Oe()),ze(),Hoe(),WV=eC/2+1,$V=1e3,pv={normalColor:"#365b59",selectedColor:"#8A7842",barColor:s=>{let a=s.isSelected?pv.selectedColor:pv.normalColor;return s.isPopoverOpen?kI(.2,gb(.2,a)):a},hoverColor:s=>{let a=s.isSelected?pv.selectedColor:pv.normalColor;return s.isPopoverOpen?kI(.2,gb(.2,a)):kI(.1,gb(.1,a))}},Woe=ae.div(Goe||(Goe=W([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),pv.barColor,WV,$V,WV/2,pv.hoverColor),KV=GV.default.forwardRef((s,a)=>{let l={isPopoverOpen:s.isPopoverOpen,isSelected:s.isSelected};return GV.default.createElement(Woe,z(N({},l),{ref:a,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s.connectorLengthInUnitSpace/$V,"))")},onClick:d=>{var f;(f=s.openPopover)==null||f.call(s,d)}}),s.children)})});function VIe(s,a){let l=(0,XV.useRef)(a);l.current=a;let d=(0,XV.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let g=l.current,b;if(g.selection){let{selection:I,leaf:O}=g,{sheetObject:R}=O;return I.getDragHandlers(z(N({},R.address),{domNode:s,positionAtStartOfDrag:g.track.data.keyframes[g.index].position})).onDragStart(f)}let _=g,S=(0,SD.val)(_.layoutP.sheet).getSequence(),C=(0,SD.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(I,O,R){let A=C(I);b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:F})=>{F.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(N({},_.leaf.sheetObject.address),{trackId:_.leaf.trackId,keyframeIds:[_.keyframe.id,_.track.data.keyframes[_.index+1].id],translate:A,scale:1,origin:0,snappingFunction:S.closestGridPosition}))})},onDragEnd(I){I?b&&b.commit():b&&b.discard()}}}}),[]);Fi(s,d)}function jIe(s,a,l,d){return ua(a,{displayName:"Tween",menuItems:()=>{let f=fD(s.leaf.sheetObject.address.projectId,s.leaf.sheetObject.address.sheetId,s.selection);return[{label:f.length>0?"Copy (selection)":"Copy",callback:()=>{f.length>0?ue().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes(f)}):ue().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l,pathToProp:s.leaf.pathToProp},{keyframe:d,pathToProp:s.leaf.pathToProp}])})}},{label:s.selection?"Delete (selection)":"Delete",callback:()=>{s.selection?s.selection.delete():ue().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},s.leaf.sheetObject.address),{keyframeIds:[l.id,d.id],trackId:s.leaf.trackId}))})}}]}})}var SD,Pf,XV,qV,Koe,Xoe,qoe,Yoe,Zoe,HIe=P(()=>{Te(),ca(),ws(),kr(),SD=Ft,Pf=q(Oe()),XV=q(Oe()),Yc(),Qc(),pD(),$oe(),iD(),yn(),Zb(),Zb(),ze(),qV=5,Xoe=ae(Zc)(Koe||(Koe=W([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),AV),qoe=s=>{let{index:a,track:l}=s,d=l.data.keyframes[a],f=l.data.keyframes[a+1],[g,b]=br(null),{node:_,toggle:S,close:C}=qc(()=>{let A=(0,SD.val)(s.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:A.screenX+qV,maxX:A.screenX+A.width-qV}}},()=>Pf.default.createElement(Zoe,z(N({},s),{closePopover:C}))),[I]=jIe(s,b,d,f);VIe(b,s);let O=f.position-d.position,R={isPopoverOpen:Yn(()=>UV(z(N({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,left:d,right:f})),[s.leaf.sheetObject.address,s.leaf.trackId,d,f]),isSelected:s.selection!==void 0};return Pf.default.createElement(Pf.default.Fragment,null,Pf.default.createElement(KV,z(N({ref:g,connectorLengthInUnitSpace:O},R),{openPopover:A=>{b&&S(A,b)}}),_),I)},Yoe=qoe,Zoe=Pf.default.forwardRef((s,a)=>{let{index:l,track:{data:d},selection:f}=s,g=d.keyframes[l],b=d.keyframes[l+1],_=s.leaf.trackId,S=s.leaf.sheetObject.address,C=Yn(()=>Moe(S.projectId,S.sheetId,f).getValue(),[S,f]),I=N({left:g,right:b,trackId:_},S);return Pf.default.createElement(Xoe,{showPopoverEdgeTriangle:!1,ref:a},Pf.default.createElement(BV,{curveConnection:I,additionalConnections:C,onRequestClose:s.closePopover}))})}),Qoe,fv,Joe,eae,tae,nae,rae,GIe=P(()=>{Qoe=Ft,fv=q(Oe()),ze(),HIe(),Hoe(),eae=ae.div(Joe||(Joe=W([`
  position: absolute;
`]))),tae=fv.default.createElement(fv.default.Fragment,null),nae=fv.default.memo(s=>{let{index:a,track:{data:l}}=s,d=l.keyframes[a],f=l.keyframes[a+1],g=d.connectedRight&&!!f;return fv.default.createElement(eae,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Qoe.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(d.position,"px))")}},fv.default.createElement(joe,z(N({},s),{itemKey:s.itemKey})),g?fv.default.createElement(Yoe,N({},s)):tae)}),rae=nae});function WIe(s,a){return ua(s,{displayName:"Keyframe Track",menuItems:()=>{var l;let d=(l=(0,Qb.val)(ue().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?l:[];return[$Ie(a,d)]}})}function $Ie(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{var l;let d=(0,Qb.val)(s.layoutP.sheet).getSequence(),f=(l=a[0])==null?void 0:l.pathToProp,g=a.filter(({keyframe:b,pathToProp:_})=>q2e(f,_)).map(({keyframe:b,pathToProp:_})=>b);ue().transaction(({stateEditors:b})=>{var _;d.position=d.closestGridPosition(d.position);let S=(_=KIe(g))==null?void 0:_.position;for(let C of g)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(N({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,position:d.position+C.position-S,handles:C.handles,value:C.value,snappingFunction:d.closestGridPosition,type:C.type}))})}}}function KIe(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}var Qb,Sh,iae,sae,YV,oae,XIe=P(()=>{yn(),Qb=Ft,Sh=q(Oe()),ze(),GIe(),ca(),kr(),Te(),rd(),uv(),yh(),sae=ae.div(iae||(iae=W([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),YV=Sh.default.memo(s=>{var a;let{layoutP:l,trackData:d,leaf:f}=s,[g,b]=br(null),{selectedKeyframeIds:_,selection:S}=Yn(()=>{let Z=(0,Qb.val)(l.selectionAtom),re=(0,Qb.val)(Z.pointer.current.byObjectKey[f.sheetObject.address.objectKey].byTrackId[f.trackId].byKeyframeId);return re?{selectedKeyframeIds:re,selection:(0,Qb.val)(Z.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[l,f.trackId]),[C,I,O]=WIe(b,s),R=nr(TV),A=R.mode==="snapToSome"?(a=R.positions[f.sheetObject.address.objectKey])==null?void 0:a[f.trackId]:[],F=R.mode==="snapToAll",L=(0,Sh.useMemo)(()=>({data:d,id:f.trackId,sheetObject:s.leaf.sheetObject}),[d,f.trackId]),V=d.keyframes.map((Z,re)=>Sh.default.createElement(rae,{key:"keyframe-"+Z.id,itemKey:Os.forTrackKeyframe(f.sheetObject,f.trackId,Z.id),keyframe:Z,index:re,track:L,layoutP:l,leaf:f,selection:_[Z.id]===!0?S:void 0})),H=A.map(Z=>Sh.default.createElement(XE,{key:"snap-target-"+Z,layoutP:l,leaf:f,position:Z})),K=F?d.keyframes.map(Z=>Sh.default.createElement(XE,{key:"additionalSnapTarget-".concat(Z.id),layoutP:l,leaf:f,position:Z.position})):null;return Sh.default.createElement(sae,{ref:g,style:{background:O?"#444850 ":"unset"}},V,H,Sh.default.createElement(Sh.default.Fragment,null,K),C)}),YV.displayName="BasicKeyframedTrack",oae=YV}),aae,nC,lae,uae,qIe=P(()=>{Te(),yn(),aae=Ft,nC=q(Oe()),nD(),XIe(),pf(),lae=({leaf:s,layoutP:a})=>{let l=hf("PrimitivePropRow",s.pathToProp.join());return Yn(()=>{let{sheetObject:d}=s,{trackId:f}=s,g=(0,aae.val)(ue().atomP.historic.coreByProject[d.address.projectId].sheetsById[d.address.sheetId].sequence.tracksByObject[d.address.objectKey].trackData[f]);return(g==null?void 0:g.type)!=="BasicKeyframedTrack"?(l.errorDev("trackData type ".concat(g==null?void 0:g.type," is not yet supported on the sequence editor")),nC.default.createElement(Xb,{leaf:s,isCollapsed:!1,node:nC.default.createElement("div",null)})):nC.default.createElement(Xb,{leaf:s,isCollapsed:!1,node:nC.default.createElement(oae,{layoutP:a,trackData:g,leaf:s})})},[s,a])},uae=lae});function YIe(s){return s()}var ZIe=P(()=>{});function cae(s){let{index:a,aggregateKeyframes:l,selection:d}=s;return Yn(dae(s),[a,l,d,s.viewModel])}function dae(s){let{index:a,aggregateKeyframes:l,selection:d}=s,{projectId:f,sheetId:g}=s.viewModel.type==="sheet"?s.viewModel.sheet.address:s.viewModel.sheetObject.address;return()=>{let b=l[a],_=l[a+1],S=_&&b.keyframes.length===_.keyframes.length&&b.keyframes.every(({track:R},A)=>_.keyframes[A].track===R)?{length:_.position-b.position,selected:b.selected===0&&_.selected===0}:null,C=S?b.keyframes.map(({kf:R,track:A},F)=>z(N({},A.sheetObject.address),{trackId:A.id,left:R,right:_.keyframes[F].kf})):[],I=YIe(()=>{let R=ZV.prism.memo("selectedConnections",()=>Moe(f,g,d),[f,g,d]).getValue();return[...C,...R]}),O=C.every(R=>UV(R));return{itemKey:ZV.prism.memo("itemKey",()=>s.viewModel.type==="sheet"?Os.forSheetAggregateKeyframe(s.viewModel.sheet,b.position):s.viewModel.type==="sheetObject"?Os.forSheetObjectAggregateKeyframe(s.viewModel.sheetObject,b.position):Os.forCompoundPropAggregateKeyframe(s.viewModel.sheetObject,s.viewModel.pathToProp,b.position),[s.viewModel,b.position]),cur:b,connected:S,isAggregateEditingInCurvePopover:O,allConnections:I}}}var ZV,QV=P(()=>{ZV=Ft,yh(),pD(),yn(),Zb(),ZIe()});function QIe(s,a){let l=(0,Xl.useRef)(a);l.current=a;let d=(0,Xl.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let g=l.current,b,_=g.aggregateKeyframes[g.index].keyframes,{selection:S,viewModel:C}=g,I=C.type==="sheet"?C.sheet.address:C.sheetObject.address;if(S&&g.aggregateKeyframes[g.index].selected===0)return S.getDragHandlers(z(N({},I),{domNode:s,positionAtStartOfDrag:g.aggregateKeyframes[g.index].position})).onDragStart(f);let O=g,R=(0,ED.val)(O.layoutP.sheet).getSequence(),A=(0,ED.val)(O.layoutP.scaledSpace.toUnitSpace);return{onDrag(F,L,V){let H=A(F);b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:K})=>{for(let Z of _)K.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(N({},Z.track.sheetObject.address),{trackId:Z.track.id,keyframeIds:[Z.kf.id,Z.track.data.keyframes[Z.track.data.keyframes.indexOf(Z.kf)+1].id],translate:H,scale:1,origin:0,snappingFunction:R.closestGridPosition}))})},onDragEnd(F){F?b&&b.commit():b&&b.discard()}}}}),[]);return Fi(s,d)}function JIe(s,a){return ua(a,{displayName:"Aggregate Tween",menuItems:()=>{let l=s.utils.allConnections.reduce((_,S)=>{var C;return _.concat((C=zV(z(N({},S),{keyframeIds:[S.left.id,S.right.id]})))!=null?C:[])},[]),d=KR(l.map(_=>_.pathToProp)),f=l.map(({keyframe:_,pathToProp:S})=>({keyframe:_,pathToProp:S.slice(d.length)})),g=s.editorProps.viewModel,b=g.type==="sheet"?g.sheet.address:g.sheetObject.address;return[{label:"Copy",callback:()=>{if(s.editorProps.selection){let _=fD(b.projectId,b.sheetId,s.editorProps.selection);ue().transaction(S=>{S.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}else ue().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(f)})}},{label:"Delete",callback:()=>{s.editorProps.selection?s.editorProps.selection.delete():ue().transaction(({stateEditors:_})=>{for(let S of s.utils.allConnections)_.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},b),{objectKey:S.objectKey,keyframeIds:[S.left.id,S.right.id],trackId:S.trackId}))})}}]}})}var ED,Xl,JV,hae,pae,fae,mae,eRe=P(()=>{ED=Ft,Xl=q(Oe()),$oe(),Yc(),kr(),Te(),ws(),pD(),QV(),ze(),Qc(),Zb(),ca(),rd(),JV=5,pae=ae(Zc)(hae||(hae=W([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),fae=Xl.default.forwardRef((s,a)=>{let{allConnections:l}=cae(s);return Xl.default.createElement(pae,{showPopoverEdgeTriangle:!1,ref:a},Xl.default.createElement(BV,{curveConnection:l[0],additionalConnections:l,onRequestClose:s.closePopover}))}),mae=s=>{let[a,l]=br(null),{editorProps:d}=s,[f]=JIe(s,l),[g]=QIe(l,s.editorProps),{node:b,toggle:_,close:S}=qc(()=>{let O=(0,ED.val)(d.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:O.screenX+JV,maxX:O.screenX+O.width-JV}}},()=>Xl.default.createElement(fae,z(N({},d),{closePopover:S}))),{connected:C,isAggregateEditingInCurvePopover:I}=s.utils;return C||g?Xl.default.createElement(Xl.default.Fragment,null,Xl.default.createElement(KV,{ref:a,connectorLengthInUnitSpace:C?C.length:0,isSelected:C?C.selected:!1,isPopoverOpen:I,openPopover:O=>{l&&_(O,l)}}),b,f):Xl.default.createElement(Xl.default.Fragment,null)}});function tRe(s){let a={isSelected:s.isSelected,flag:s.flag};return Eh.default.createElement(CD,null,s.isAllHere?Eh.default.createElement(wae,N({},a)):Eh.default.createElement(xae,N({},a)))}var Eh,ej,gae,vae,CD,yae,bae,tj,nj,rj,ij,_ae,wae,xae,nRe=P(()=>{Eh=q(Oe()),ze(),QR(),Ar(),ej=16,gae=ej+2,CD=ae.div(vae||(vae=W([`
  position: absolute;
  `,`
  z-index: 1;
`])),Kl(ej)),bae=ae.div(yae||(yae=W([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),Kl(12),Cr,CD,CD,Kl(gae)),tj="#F2C95C",nj="#40AAA4",rj="#45747C",ij=s=>s.isSelected===0?tj:s.isSelected===1?nj:rj,_ae=s=>s.isSelected===0?tj:s.isSelected===1?nj:rj,wae=s=>Eh.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eh.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:_ae(s)}),Eh.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:ij(s),stroke:s.flag===2?"white":void 0,strokeWidth:s.flag===2?"2px":void 0})),xae=s=>Eh.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eh.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:s.flag===2?"white":ij(s),strokeWidth:s.flag===2?"2px":void 0}))});function rRe(s,a){let l=s.children.map(d=>d.type==="propWithChildren"?sj(d,a):Sae(d,a)).filter(oj);return l.length===0?null:{type:"sheetObject",sheetObject:s.sheetObject,children:l}}function sj(s,a){let l=s.children.map(d=>d.type==="propWithChildren"?sj(d,a):Sae(d,a)).filter(oj);return l.length===0?null:{type:"propWithChildren",pathToProp:s.pathToProp,propConfig:s.propConf,children:l}}function Sae(s,a){let l=a.find(d=>d.track.id===s.trackId);return l?{type:"primitiveProp",keyframe:l.kf,pathToProp:s.pathToProp,propConfig:s.propConf,sheetObject:s.sheetObject,trackId:s.trackId}:null}function iRe(s){var a,l,d,f;let{cur:g}=s.utils,b=yD(s.editorProps.viewModel.type==="sheet"?null:s.editorProps.viewModel.type==="sheetObject"?(l=(a=rRe(s.editorProps.viewModel,g.keyframes))==null?void 0:a.children)!=null?l:null:(f=(d=sj(s.editorProps.viewModel,g.keyframes))==null?void 0:d.children)!=null?f:null),_=tv(s.utils.itemKey);_.useRelations(()=>g.keyframes.map(O=>({affects:O.itemKey,flag:2})),[g.keyframes.map(O=>O.track.id).join("-")]);let[S,C]=br(null),[I]=sRe(s,C);return rC.default.createElement(rC.default.Fragment,null,rC.default.createElement(bae,z(N(N({ref:S},_.attrs),da.includePositionSnapAttrs(g.position)),{onClick:O=>s.editorProps.viewModel.type!=="sheet"?b.open(O,S.current):null})),rC.default.createElement(tRe,{flag:_.flag,isAllHere:g.allHere,isSelected:g.selected}),I,b.node)}function sRe(s,a){return ua(a,{displayName:"Aggregate Keyframe",menuItems:()=>{let l=s.editorProps.viewModel,d=s.editorProps.selection;return[{label:d?"Copy (selection)":"Copy",callback:()=>{if(d){let{projectId:f,sheetId:g}=l.type==="sheet"?l.sheet.address:l.sheetObject.address,b=fD(f,g,d);ue().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(b)})}else{let f=s.utils.cur.keyframes.flatMap(S=>{var C;return(C=zV(z(N({},S.track.sheetObject.address),{trackId:S.track.id,keyframeIds:[S.kf.id]})))!=null?C:[]}),g=l.type==="sheet"?[]:l.type==="sheetObject"?[l.sheetObject.address.objectKey]:l.type==="propWithChildren"?[l.sheetObject.address.objectKey,...l.pathToProp]:[],b=KR([g,...f.map(S=>S.pathToProp)]),_=f.map(({keyframe:S,pathToProp:C})=>({keyframe:S,pathToProp:C.slice(b.length)}));ue().transaction(S=>{S.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}}},{label:d?"Delete (selection)":"Delete",callback:()=>{d?d.delete():ue().transaction(({stateEditors:f})=>{for(let g of s.utils.cur.keyframes)f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},g.track.sheetObject.address),{keyframeIds:[g.kf.id],trackId:g.track.id}))})}}]}})}var rC,oj,oRe=P(()=>{rC=q(Oe()),kr(),nv(),ca(),nRe(),Te(),Zb(),rd(),Yu(),_D(),oj=s=>s!==null}),Eae,iC,Cae,Pae,Tae,Mae,aRe=P(()=>{Eae=Ft,iC=q(Oe()),ze(),eRe(),QV(),oRe(),Pae=ae.div(Cae||(Cae=W([`
  position: absolute;
`]))),Tae=iC.default.memo(s=>{let a=cae(s);return iC.default.createElement(Pae,{style:{top:"".concat(s.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,Eae.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(a.cur.position,"px))")}},iC.default.createElement(iRe,{editorProps:s,utils:a}),iC.default.createElement(mae,{editorProps:s,utils:a}))}),Mae=Tae});function lRe(s){let{layoutP:a,aggregatedKeyframes:l,viewModel:d}=s,f=hf("AggregatedKeyframeTrack"),[g,b]=br(null),{selectedPositions:_,selection:S}=uRe(a,l),[C,I,O]=hRe(b,s,()=>f._debug("see aggregatedKeyframes",s.aggregatedKeyframes)),R=(0,ql.useMemo)(()=>[...l.byPosition.entries()].sort((Z,re)=>Z[0]-re[0]).map(([Z,re])=>({position:Z,keyframes:re,selected:_.get(Z),allHere:re.length===l.tracks.length})),[l,_]),A=nr(TV),F=A.mode==="snapToAll",L=A.mode==="snapToSome"?A.positions:kz,V=(0,ql.useMemo)(()=>d.type==="sheet"?iIe(d,L):_V(d,L),[L]).map(Z=>ql.default.createElement(XE,{key:"snap-target-"+Z,layoutP:a,leaf:d,position:Z})),H=(0,ql.useMemo)(()=>R.map(({position:Z,keyframes:re},ne)=>({position:Z,editorProps:{index:ne,layoutP:a,viewModel:d,aggregateKeyframes:R,selection:_.has(Z)?S:void 0}})),[R,d,_]);gRe(b,Z=>{var re;return(re=H.find(ne=>ne.position===Z))==null?void 0:re.editorProps},{onClickFromDrag(Z){}});let K=H.map((Z,re)=>ql.default.createElement(ql.Fragment,{key:"agg-"+R[re].keyframes[0].kf.id},F&&ql.default.createElement(XE,{layoutP:a,leaf:d,position:Z.position}),ql.default.createElement(Mae,N({},Z.editorProps))));return ql.default.createElement(Rae,{ref:g,style:{background:O?"#444850 ":"unset"}},K,V,C)}function uRe(s,a){return Yn(()=>(0,pa.val)(cRe(s,a)),[s,a])}function cRe(s,a){return(0,pa.prism)(()=>{let l=(0,pa.val)(s.selectionAtom),d=(0,pa.val)(l.pointer.current);if(!d)return Dae;let f=new Map;for(let[g,b]of a.byPosition){let _=dRe(b,d);_!==void 0&&_!==TD&&f.set(g,_)}return{selectedPositions:f,selection:(0,pa.val)(l.pointer.current)}})}function dRe(s,a){var l,d,f;let g;for(let{track:b,kf:_}of s){let S=((f=(d=(l=a.byObjectKey[b.sheetObject.address.objectKey])==null?void 0:l.byTrackId[b.id])==null?void 0:d.byKeyframeId)==null?void 0:f[_.id])===!0;g===void 0?S?g=uj:g=TD:S?g===TD&&(g=cj):g===uj&&(g=cj)}return g}function hRe(s,a,l){return ua(s,{onOpen:l,displayName:"Aggregate Keyframe Track",menuItems:()=>{var d;let f=(d=(0,pa.pointerToPrism)(ue().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?d:[];return[pRe(a,f)]}})}function pRe(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{let l=(0,pa.val)(s.layoutP.sheet).getSequence();s.viewModel.type==="sheet"?fRe(s.viewModel,a,l):mRe(s.viewModel,a,l)}}}function fRe(s,a,l){var d;let{projectId:f,sheetId:g,sheetInstanceId:b}=s.sheet.address;if(a.every(({pathToProp:_})=>_.length===0))for(let _ of s.children.map(S=>S.sheetObject)){let S=(0,pa.pointerToPrism)(ue().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject[_.address.objectKey]).getValue(),C=Object.keys((d=S==null?void 0:S.trackData)!=null?d:{});aj(_.address,C,a,l)}else{let _=(0,pa.pointerToPrism)(ue().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject).getValue(),S=a.map(({keyframe:C,pathToProp:I})=>{var O,R;let A=I[0],F=I.slice(1),L=nd([...F]),V=((R=(O=_==null?void 0:_[A])==null?void 0:O.trackIdByPropPath)!=null?R:{})[L];return V?{keyframe:C,trackId:V,address:{objectKey:A,projectId:f,sheetId:g,sheetInstanceId:b}}:null}).filter(C=>C!==null);kae(S,l)}}function mRe(s,a,l){var d;let{projectId:f,sheetId:g,objectKey:b}=s.sheetObject.address,_=(0,pa.pointerToPrism)(ue().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject[b]).getValue();if(a.every(({pathToProp:S})=>S.length===0)){let S=Object.keys((d=_==null?void 0:_.trackData)!=null?d:{});if(s.type==="sheetObject")aj(s.sheetObject.address,S,a,l);else{let C=(_==null?void 0:_.trackIdByPropPath)||{},I=Object.entries(C).filter(([O,R])=>R!==void 0&&X2e(XR(O),s.pathToProp)).map(([O,R])=>R);aj(s.sheetObject.address,I,a,l)}}else{let S=(_==null?void 0:_.trackIdByPropPath)||{},C=s.type==="propWithChildren"?s.pathToProp:[],I=a.map(({keyframe:O,pathToProp:R})=>{let A=nd([...C,...R]),F=S[A];return F?{keyframe:O,trackId:F,address:s.sheetObject.address}:null}).filter(O=>O!==null);kae(I,l)}}function aj(s,a,l,d){var f;d.position=d.closestGridPosition(d.position);let g=(f=Aae(l.map(({keyframe:b})=>b)))==null?void 0:f.position;ue().transaction(({stateEditors:b})=>{for(let _ of a)for(let{keyframe:S}of l)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(N({},s),{trackId:_,position:d.position+S.position-g,handles:S.handles,value:S.value,snappingFunction:d.closestGridPosition,type:S.type}))})}function kae(s,a){var l;a.position=a.closestGridPosition(a.position);let d=(l=Aae(s.map(({keyframe:f})=>f)))==null?void 0:l.position;ue().transaction(({stateEditors:f})=>{for(let{keyframe:g,trackId:b,address:_}of s)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(N({},_),{trackId:b,position:a.position+g.position-d,handles:g.handles,value:g.value,snappingFunction:a.closestGridPosition,type:g.type}))})}function Aae(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}function gRe(s,a,l){let d=hf("useDragForAggregateKeyframeDot"),f=hse(),g=(0,ql.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(_){d._debug("onDragStart",{target:_.target});let S=Number(_.target.dataset.pos),C=a(S);if(!C)return d._debug("no props found for ",{positionToFind:S}),!1;f(!0,S);let I=(0,pa.prism)(dae(C)).getValue().cur.keyframes,O=C.viewModel.type==="sheet"?C.viewModel.sheet.address:C.viewModel.sheetObject.address,R=(0,pa.val)(ue().atomP.historic.coreByProject[O.projectId].sheetsById[O.sheetId].sequence.tracksByObject),A=_se(R,function(H,{trackId:K,objectKey:Z}){var re,ne;return I.every(le=>H.id!==le.kf.id)&&!(C.selection&&(ne=(re=C.selection.byObjectKey[Z])==null?void 0:re.byTrackId[K])!=null&&ne.byKeyframeId[H.id])});if(bse(A),C.selection&&C.aggregateKeyframes[C.index].selected===0){let{selection:H,viewModel:K}=C,Z=H.getDragHandlers(z(N({},O),{domNode:s,positionAtStartOfDrag:I[0].kf.position})).onDragStart(_);return Z&&z(N({},Z),{onClick:l.onClickFromDrag,onDragEnd:(...re)=>{var ne;(ne=Z.onDragEnd)==null||ne.call(Z,...re),lv()}})}let F=C,L=(0,pa.val)(F.layoutP.scaledSpace.toUnitSpace),V;return{onDrag(H,K,Z){var re;let ne=Math.max((re=da.checkIfMouseEventSnapToPos(Z,{}))!=null?re:I[0].kf.position+L(H),0);f(!0,ne),V==null||V.discard(),V=void 0,V=ue().tempTransaction(({stateEditors:le})=>{for(let Ce of I){let ve=Ce.kf;le.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},Ce.track.sheetObject.address),{trackId:Ce.track.id,keyframes:[z(N({},ve),{position:ne})],snappingFunction:(0,pa.val)(F.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(H){f(!1,-1),H?V==null||V.commit():(V==null||V.discard(),l.onClickFromDrag(_)),lv()},onClick(H){l.onClickFromDrag(H)}}}}),[a,l.onClickFromDrag]),[b]=Fi(s,g);return Gl(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var pa,ql,Iae,Rae,Dae,Oae,PD,lj,uj,cj,TD,dj=P(()=>{yn(),pa=Ft,ql=q(Oe()),ze(),ca(),kr(),aRe(),$b(),pf(),QV(),Yu(),ws(),fo(),al(),Te(),rd(),uv(),xee(),uv(),$b(),Rae=ae.div(Iae||(Iae=W([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),Dae=Object.freeze({selectedPositions:new Map,selection:void 0}),Oae=ql.default.memo(lRe),PD=Oae,lj=(s=>(s[s.AllSelected=0]="AllSelected",s[s.AtLeastOneUnselected=1]="AtLeastOneUnselected",s[s.NoneSelected=2]="NoneSelected",s))(lj||{}),{AllSelected:uj,AtLeastOneUnselected:cj,NoneSelected:TD}=lj}),Jb,hj,Lae,vRe=P(()=>{yn(),Jb=q(Oe()),qIe(),nD(),dj(),$b(),pf(),hj=(s,a)=>s.type==="propWithChildren"?Jb.default.createElement(Lae,{layoutP:a,viewModel:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}):Jb.default.createElement(uae,{layoutP:a,leaf:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}),Lae=({viewModel:s,layoutP:a})=>{let l=hf("RightPropWithChildrenRow",s.pathToProp.join());return Yn(()=>{let d=YR(s);return Jb.default.createElement(IY,{logger:l},Jb.default.createElement(Xb,{leaf:s,node:Jb.default.createElement(PD,{layoutP:a,aggregatedKeyframes:d,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(f=>hj(f,a))))},[s,a])}}),pj,Nae,Fae,yRe=P(()=>{yn(),pj=q(Oe()),vRe(),nD(),$b(),dj(),Nae=({leaf:s,layoutP:a})=>Yn(()=>{let l=YR(s);return pj.default.createElement(Xb,{leaf:s,node:pj.default.createElement(PD,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(d=>hj(d,a)))},[s,a]),Fae=Nae}),MD,Bae,Uae,bRe=P(()=>{yn(),MD=q(Oe()),yRe(),nD(),$b(),dj(),Bae=({leaf:s,layoutP:a})=>Yn(()=>{let l=YR(s);return MD.default.createElement(Xb,{leaf:s,node:MD.default.createElement(PD,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(d=>MD.default.createElement(Fae,{layoutP:a,key:"sheetObject-"+d.sheetObject.address.objectKey,leaf:d})))},[s,a]),Uae=Bae}),sC,mv,kD,zae,Vae,jae,Hae,Gae=P(()=>{yn(),sC=Ft,mv=q(Oe()),ze(),aIe(),Ise(),bRe(),kD=1e6,Vae=ae.ul(zae||(zae=W([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),kD),jae=({layoutP:s})=>Yn(()=>{let a=(0,sC.val)(s.tree),l=(0,sC.val)(s.tree.top)+Math.max((0,sC.val)(s.tree.heightIncludingChildren),(0,sC.val)(s.dopeSheetDims.height));return mv.default.createElement(mv.default.Fragment,null,mv.default.createElement(kV,{layoutP:s,height:l},mv.default.createElement(Jie,{layoutP:s,height:l},mv.default.createElement(Vae,{style:{top:a.top+"px"}},mv.default.createElement(Uae,{leaf:a,layoutP:s})))))},[s]),Hae=jae});function fj(s,a,l,d){let f="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s,"px)"),g="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(a,") * 1px)");l===0&&(l=1e-4);let b="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(l,")");d===0&&(d=.001);let _="calc(var(--graphEditorVerticalSpace) * ".concat(d*-1,")");return"translate(".concat(f,", ").concat(g,") scale(").concat(b,", ").concat(_,")")}function _Re(s,a){let{index:l,trackData:d}=a,f=d.keyframes[l],g=d.keyframes[l+1];return ua(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:b})=>{let{deleteKeyframes:_}=b.coreByProject.historic.sheetsById.sequence;_(z(N({},a.sheetObject.address),{trackId:a.trackId,keyframeIds:[f.id,g.id]}))})}}]})}var AD,Wae,$ae,Kae,Xae,qae,mj=P(()=>{mf(),Te(),ca(),kr(),AD=q(Oe()),ze(),$ae=ae.path(Wae||(Wae=W([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),Kae="M 0 0 L 1 0 L 1 1",Xae=s=>{let{index:a,trackData:l}=s,d=l.keyframes[a],f=l.keyframes[a+1],g=f.position-d.position,[b,_]=br(null),[S]=_Re(_,s),C=s.isScalar?hR(d.value,s.propConfig):0,I=s.isScalar?hR(f.value,s.propConfig):1,O=s.extremumSpace.fromValueSpace(C),R=s.extremumSpace.fromValueSpace(I)-O,A=fj(d.position,O,g,R),F=d.handles[2],L=d.handles[3],V=f.handles[0],H=f.handles[1],K="M 0 0 C ".concat(F," ").concat(L," ").concat(V," ").concat(H," 1 1");return AD.default.createElement(AD.default.Fragment,null,AD.default.createElement($ae,{ref:b,d:!d.type||d.type==="bezier"?K:Kae,style:{transform:A}}),S)},qae=Xae});function wRe(s,a){let l=(0,gv.useRef)(a);l.current=a;let d=(0,gv.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let f,g=l.current,b=(0,oC.val)(g.layoutP.scaledSpace.toUnitSpace),_=(0,oC.val)(g.layoutP.graphEditorVerticalSpace.toExtremumSpace),S=g.extremumSpace.lock();return{onDrag(C,I){f&&(f.discard(),f=void 0);let{index:O,trackData:R}=g,A=R.keyframes[O],F=R.keyframes[O+1],L=b(C)/(F.position-A.position),V=-I,H=_(V),K=g.extremumSpace.deltaToValueSpace(H),Z=a.isScalar?A.value:0,re=a.isScalar?F.value:1,ne=K/(re-Z);if(g.which==="left"){let le=bi(A.handles[2]+L,0,1),Ce=A.handles[3]+ne;f=ue().tempTransaction(({stateEditors:ve})=>{ve.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},g.sheetObject.address),{snappingFunction:(0,oC.val)(g.layoutP.sheet).getSequence().closestGridPosition,trackId:g.trackId,keyframes:[z(N({},A),{handles:[A.handles[0],A.handles[1],le,Ce]})]}))})}else{let le=bi(F.handles[0]+L,0,1),Ce=F.handles[1]+ne;f=ue().tempTransaction(({stateEditors:ve})=>{ve.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},g.sheetObject.address),{trackId:g.trackId,snappingFunction:(0,oC.val)(g.layoutP.sheet).getSequence().closestGridPosition,keyframes:[z(N({},F),{handles:[le,Ce,F.handles[2],F.handles[3]]})]}))})}},onDragEnd(C){S(),C?f&&f.commit():f&&f.discard()}}}}),[]);Fi(s,d)}function xRe(s,a){return ua(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var oC,gv,Yae,gj,Zae,Qae,Jae,ele,tle,vj,SRe=P(()=>{Te(),ca(),ws(),kr(),oC=Ft,ui(),gv=q(Oe()),ze(),mj(),Ar(),gj=ae.circle(Yae||(Yae=W([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),Qae=ae.circle(Zae||(Zae=W([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),Cr,gj),ele=ae.path(Jae||(Jae=W([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),tle=s=>{let[a,l]=br(null),{index:d,trackData:f}=s,g=f.keyframes[d],b=f.keyframes[d+1],[_]=xRe(l,s);wRe(l,s);let S=s.which==="left"?g.handles[2]:b.handles[0],C=g.position+(b.position-g.position)*S,I=s.which==="left"?g.handles[3]:b.handles[1],O=s.isScalar?g.value:0,R=s.isScalar?b.value:1,A=O+(R-O)*I,F=s.extremumSpace.fromValueSpace(A),L=F-s.extremumSpace.fromValueSpace(s.which==="left"?O:R),V=fj(s.which==="left"?g.position:b.position,s.extremumSpace.fromValueSpace(s.which==="left"?O:R),C-(s.which==="left"?g.position:b.position),L);return gv.default.createElement("g",null,gv.default.createElement(Qae,{ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(C," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(F,") * 1px)")}}),gv.default.createElement(gj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(C," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(F,") * 1px)")}}),gv.default.createElement(ele,{d:"M 0 0 L 1 1",style:{transform:V}}),_)},vj=tle});function ERe(s){let[a,l]=(0,Tf.useState)(!1);xh(a,s.props.keyframe.position);let d=(0,Tf.useRef)(s.props);d.current=s.props;let f=(0,Tf.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(g){l(!0);let b=!!g.altKey,_=d.current,S=(0,ID.val)(_.layoutP.scaledSpace.toUnitSpace),C=(0,ID.val)(_.layoutP.graphEditorVerticalSpace.toExtremumSpace),I=_.extremumSpace.lock(),O;return{onDrag(R,A){let F=_.trackData.keyframes[_.index],L=S(R),V=-A,H=C(V),K=_.extremumSpace.deltaToValueSpace(H),Z=[],re=z(N({},F),{position:F.position+L,value:F.value+K,handles:[...F.handles]});if(Z.push(re),b){let ne=_.trackData.keyframes[_.index-1];if(ne&&Math.abs(F.value-ne.value)>0){let Ce=z(N({},ne),{handles:[...ne.handles]});Z.push(Ce),Ce.handles[3]=PRe(ne.handles[3],ne.value,ne.value,F.value,re.value)}let le=_.trackData.keyframes[_.index+1];if(le&&Math.abs(F.value-le.value)>0){let Ce=z(N({},le),{handles:[...le.handles]});Z.push(Ce),Ce.handles[1]=TRe(Ce.handles[1],Ce.value,Ce.value,F.value,re.value)}}O==null||O.discard(),O=ue().tempTransaction(({stateEditors:ne})=>{ne.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},_.sheetObject.address),{trackId:_.trackId,keyframes:Z,snappingFunction:(0,ID.val)(_.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(R){l(!1),I(),R?O==null||O.commit():(O==null||O.discard(),s.onDetectedClick(g))}}}}),[]);return Fi(s.node,f),Gl(a,"draggingPositionInSequenceEditor","move"),a}function CRe(s,a){return ua(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}function PRe(s,a,l,d,f){return(d-a)*s/(f-l)}function TRe(s,a,l,d,f){return((a-d)*s+d-a+l-f)/(l-f)}var ID,Tf,nle,yj,rle,ile,sle,ole,MRe=P(()=>{Te(),ca(),ws(),kr(),ID=Ft,Tf=q(Oe()),ze(),fo(),fo(),Ar(),al(),Yu(),_D(),nv(),yj=ae.circle(nle||(nle=W([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),ile=ae.circle(rle||(rle=W([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),Cr,yj,ph),sle=s=>{let[a,l]=br(null),{index:d,trackData:f}=s,g=f.keyframes[d],[b]=CRe(l,s),_=tv(s.itemKey),S=g.value,C=s.extremumSpace.fromValueSpace(S),I=yD([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=ERe({node:l,props:s,onDetectedClick:R=>I.toggle(R,R.target instanceof Element?R.target:l)});return Tf.default.createElement(Tf.default.Fragment,null,Tf.default.createElement(ile,z(N(N(N({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(C,") * 1px)")}},id(g.position)),da.includePositionSnapAttrs(g.position)),_.attrs),{className:O?"beingDragged":""})),Tf.default.createElement(yj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(C,") * 1px)"),fill:_.flag===2?"white":void 0}}),I.node,b)},ole=sle});function kRe(s){let[a,l]=(0,Mf.useState)(!1);xh(a,s.props.keyframe.position);let d=(0,Mf.useRef)(s.props);d.current=s.props;let f=(0,Mf.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(g){l(!0);let b=d.current,_=(0,bj.val)(b.layoutP.scaledSpace.toUnitSpace),S=b.extremumSpace.lock(),C;return{onDrag(I,O){let R=b.trackData.keyframes[b.index],A=_(I),F=[],L=z(N({},R),{position:R.position+A,value:R.value,handles:[...R.handles]});F.push(L),C==null||C.discard(),C=ue().tempTransaction(({stateEditors:V})=>{V.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(N({},b.sheetObject.address),{trackId:b.trackId,keyframes:F,snappingFunction:(0,bj.val)(b.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(I){l(!1),S(),I?C==null||C.commit():(C==null||C.discard(),s.onDetectedClick(g))}}}}),[]);return Fi(s.node,f),Gl(a,"draggingPositionInSequenceEditor","ew-resize"),a}function ARe(s,a){return ua(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(N({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var bj,Mf,ale,_j,lle,ule,cle,wj,IRe=P(()=>{Te(),ca(),ws(),kr(),bj=Ft,Mf=q(Oe()),ze(),fo(),fo(),Ar(),al(),Yu(),_D(),nv(),_j=ae.circle(ale||(ale=W([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),ule=ae.circle(lle||(lle=W([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),Cr,_j,ph),cle=s=>{let[a,l]=br(null),{index:d,trackData:f,itemKey:g}=s,b=f.keyframes[d],[_]=ARe(l,s),S=tv(g),C=s.which==="left"?0:1,I=yD([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=kRe({node:l,props:s,onDetectedClick:A=>I.toggle(A,A.target instanceof Element?A.target:l)}),R=s.extremumSpace.fromValueSpace(C);return Mf.default.createElement(Mf.default.Fragment,null,Mf.default.createElement(ule,z(N(N(N({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)")}},S.attrs),id(b.position)),da.includePositionSnapAttrs(b.position)),{className:O?"beingDragged":""})),Mf.default.createElement(_j,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)"),fill:S.flag===2?"white":void 0}}),I.node,_)},wj=cle}),RD,dle,hle,ple,fle,RRe=P(()=>{RD=q(Oe()),ze(),mj(),hle=ae.path(dle||(dle=W([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),ple=s=>{let{index:a,trackData:l}=s,d="M 0 0 L 1 1",f=fj(l.keyframes[a].position,s.extremumSpace.fromValueSpace(0),0,s.extremumSpace.fromValueSpace(1)-s.extremumSpace.fromValueSpace(0));return RD.default.createElement(RD.default.Fragment,null,RD.default.createElement(hle,{d,style:{transform:f}}))},fle=ple}),go,mle,gle,vle,yle,ble,DRe=P(()=>{go=q(Oe()),ze(),mj(),SRe(),MRe(),IRe(),RRe(),gle=ae.g(mle||(mle=W([`
  /* position: absolute; */
`]))),vle=go.default.createElement(go.default.Fragment,null),yle=s=>{let{index:a,trackData:l,isScalar:d}=s,f=l.keyframes[a],g=l.keyframes[a+1],b=f.connectedRight&&!!g&&g.value!==f.value;return go.default.createElement(gle,null,b?go.default.createElement(go.default.Fragment,null,go.default.createElement(qae,N({},s)),!f.type||f.type==="bezier"&&go.default.createElement(go.default.Fragment,null,go.default.createElement(vj,z(N({},s),{which:"left"})),go.default.createElement(vj,z(N({},s),{which:"right"})))):vle,d?go.default.createElement(ole,N({},s)):go.default.createElement(go.default.Fragment,null,go.default.createElement(wj,z(N({},s),{which:"left"})),go.default.createElement(wj,z(N({},s),{which:"right"})),go.default.createElement(fle,N({},s))))},ble=yle});function ORe(s,a){let l=1/0,d=-1/0;function f(g){l=Math.min(g,l),d=Math.max(g,d)}return s.forEach((g,b)=>{let _=hR(g.value,a);if(f(_),!g.connectedRight)return;let S=s[b+1];if(!S)return;let C=(typeof S.value=="number"?S.value:1)-_;f(_+g.handles[3]*C),f(_+S.handles[1]*C)}),[l,d]}function LRe(s){let a=0,l=1;function d(f){a=Math.min(f,a),l=Math.max(f,l)}return s.forEach((f,g)=>{if(!f.connectedRight)return;let b=s[g+1];b&&(d(f.handles[3]),d(b.handles[1]))}),[a,l]}var od,_le,wle,NRe=P(()=>{yh(),od=q(Oe()),OD(),DRe(),mf(),yn(),_le=od.default.memo(({layoutP:s,trackData:a,sheetObject:l,trackId:d,color:f,pathToProp:g})=>{let b=dR(nr(l.template.configPointer),g);if(ed(b))return console.error("Composite prop types cannot be keyframed"),od.default.createElement(od.default.Fragment,null);let[_,S]=(0,od.useState)(!1),C=(0,od.useMemo)(()=>{let A=new Set;return function(){let F=A.size===0;A.add(L),F&&S(!0);function L(){let V=A.size>0;A.delete(L),V&&A.size===0&&S(!1)}return L}},[]),I=(0,od.useMemo)(()=>{let A=b.type==="number"?ORe(a.keyframes,b):LRe(a.keyframes),F=H=>(H-A[0])/(A[1]-A[0]),L=H=>A[0]+V(H),V=H=>H*(A[1]-A[0]);return{fromValueSpace:F,toValueSpace:L,deltaToValueSpace:V,lock:C}},[a.keyframes]),O=(0,od.useRef)(void 0);_||(O.current=I);let R=a.keyframes.map((A,F)=>od.default.createElement(ble,{pathToProp:g,propConfig:b,itemKey:Os.forTrackKeyframe(l,d,A.id),keyframe:A,index:F,trackData:a,layoutP:s,sheetObject:l,trackId:d,isScalar:b.type==="number",key:A.id,extremumSpace:O.current,color:f}));return od.default.createElement("g",{style:{"--main-color":aC[f].iconColor}},R)}),wle=_le}),xle,DD,Sle,Ele,FRe=P(()=>{Te(),yn(),xle=Ft,DD=q(Oe()),NRe(),Sle=s=>Yn(()=>{let{sheetObject:a,trackId:l}=s,d=(0,xle.val)(ue().atomP.historic.coreByProject[a.address.projectId].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[l]);return(d==null?void 0:d.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(d==null?void 0:d.type," is not yet supported on the graph editor")),DD.default.createElement(DD.default.Fragment,null)):DD.default.createElement(wle,z(N({},s),{trackData:d}))},[s.trackId,s.layoutP]),Ele=Sle});function Cle({clippedSpaceRange:s,clippedSpaceWidth:a,fps:l,gapWidth:d=120},f){let g=1/l,b=s.end-s.start,_=a/(l*b),S=Math.floor(d/_),C=(S<l?Ple(l).find(R=>R>=S):l*Math.floor(S/l))*g,I=Math.floor(s.start/C),O=Math.ceil(s.end/C);for(let R=I;R<=O;R++){let A=R*C,F=A%1===0;f(A,F)}}var Ple,Tle=P(()=>{ui(),Ple=Sx(s=>{let a=[];for(let l=1;l<=s;l++)s%l===0&&a.push(l);return a})});function BRe(s){let{clippedSpaceWidth:a,height:l,ctx:d,unitSpaceToClippedSpace:f,snapToGrid:g}=s;d.clearRect(0,0,a,l),Cle(s,(b,_)=>{let S=g(b),C=Math.floor(f(S));d.strokeStyle=_?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",d.beginPath(),d.moveTo(C,0),d.lineTo(C,l),d.stroke(),d.closePath()})}var vv,yv,Mle,kle,Ale,Ile,Rle,Dle,Ole,Lle,xj,Nle=P(()=>{vv=Ft,yv=q(Oe()),ze(),Tle(),Te(),kle=ae.div(Mle||(Mle=W([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Ile=ae.canvas(Ale||(Ale=W([`
  position: relative;
  left: 0;
`]))),Rle=s=>{let a=s;return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},Dle=()=>window.devicePixelRatio||1,Ole=s=>Dle()/Rle(s),Lle=({layoutP:s,width:a,height:l})=>{let d=(0,yv.useRef)(null),[f,g]=(0,yv.useState)(null),{ctx:b,ratio:_}=(0,yv.useMemo)(()=>{if(!f)return{};let S=f.getContext("2d"),C=Ole(S);return{ctx:S,ratio:C}},[f]);return(0,yv.useLayoutEffect)(()=>{if(!b)return;f.width=a*_,f.height=l*_;let S=(0,vv.prism)(()=>{let C=(0,vv.val)(s.sheet).getSequence();return{ctx:b,clippedSpaceRange:(0,vv.val)(s.clippedSpace.range),clippedSpaceWidth:(0,vv.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,vv.val)(s.clippedSpace.fromUnitSpace),height:l,leftPadding:(0,vv.val)(s.scaledSpace.leftPadding),fps:C.subUnitsPerUnit,snapToGrid:I=>C.closestGridPosition(I)}}).onChange(ue().ticker,C=>{b.save(),b.scale(_,_),BRe(C),b.restore()},!0);return()=>{S()}},[b,a,l,s]),yv.default.createElement(kle,{ref:d,style:{width:a+"px"}},yv.default.createElement(Ile,{ref:g,style:{width:a+"px",height:l+"px"}}))},xj=Lle}),ad,bv,aC,Fle,Ble,Ule,zle,Vle,jle,OD=P(()=>{Te(),rd(),gR(),yn(),ad=Ft,bv=q(Oe()),ze(),Gae(),Ise(),FRe(),Nle(),ol(),aC={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},Ble=ae.div(Fle||(Fle=W([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),ju(.03,"#1a1c1e")),zle=ae.svg(Ule||(Ule=W([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),Vle=({layoutP:s})=>Yn(()=>{let a=(0,ad.val)(s.sheet),l=(0,ad.val)(ue().atomP.historic.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].sequenceEditor.selectedPropsByObject),d=(0,ad.val)(s.graphEditorDims.height),f=(0,ad.val)(s.scaledSpace.fromUnitSpace)(1),g=[];if(l)for(let[_,S]of Object.entries(l)){let C=a.getObject(_);if(!C)continue;let I=(0,ad.val)(C.template.getMapOfValidSequenceTracks_forStudio());for(let[O,R]of Object.entries(S)){let A=XR(O),F=vf(I,A);F&&g.push(bv.default.createElement(Ele,{key:"graph-".concat(_,"-").concat(O),sheetObject:C,pathToProp:A,layoutP:s,trackId:F,color:R}))}}let b=(0,ad.val)(s.rightDims.width);return bv.default.createElement(Ble,{style:{width:b+"px",height:d+"px","--unitSpaceToScaledSpaceMultiplier":f,"--graphEditorVerticalSpace":"".concat((0,ad.val)(s.graphEditorVerticalSpace.space))}},bv.default.createElement(xj,{layoutP:s,width:b,height:d}),bv.default.createElement(kV,{layoutP:s,height:d},bv.default.createElement(zle,{width:kD,height:d,viewBox:"0 0 ".concat(kD," ").concat(d)},bv.default.createElement("g",{style:{transform:"translate(".concat((0,ad.val)(s.scaledSpace.leftPadding),"px, ").concat((0,ad.val)(s.graphEditorDims.padding.top),"px)")}},g))))},[s]),jle=Vle}),Hle,Yl,Gle,Wle,$le,Kle,Sj,Xle,qle,Yle,Zle,Qle,Jle,eue,URe=P(()=>{Te(),rd(),vR(),yn(),Hle=Ft,Yl=q(Oe()),ze(),Dz(),wR(),OD(),$R(),ev(),Aie(),Gle={label:{color:"#9a9a9a"}},$le=ae(pV)(Wle||(Wle=W([""]))),Sj=ae(fV)(Kle||(Kle=W([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),Gle.label.color),qle=ae.button(Xle||(Xle=W([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),s=>s.isSelected?aC[s.graphEditorColor].iconColor:yf.offColor),Yle=()=>Yl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Yl.default.createElement("g",{transform:"translate(0 100)"},Yl.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),Qle=ae.span(Zle||(Zle=W([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),gf,Sj),Jle=({leaf:s})=>{var a;let l=wE(s.sheetObject.propsP,s.pathToProp),d=s.sheetObject,{controlIndicators:f}=Rz(l,d,s.propConf),g=Yn(()=>{let R=s.sheetObject.address,A=nd(s.pathToProp);return(0,Hle.val)(ue().atomP.historic.projects.stateByProjectId[R.projectId].stateBySheetId[R.sheetId].sequenceEditor.selectedPropsByObject[R.objectKey][A])},[s]),b=(0,Yl.useRef)(!1),_=typeof g=="string";b.current=_;let S=(0,Yl.useCallback)(()=>{let R=s.sheetObject.address;ue().transaction(({stateEditors:A})=>{b.current?A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(z(N({},R),{pathToProp:s.pathToProp})):(A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(z(N({},R),{pathToProp:s.pathToProp})),A.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[s]),C=(a=s.propConf.label)!=null?a:s.pathToProp[s.pathToProp.length-1],I=!0,O=(0,Yl.useRef)(null);return Mie(O.current,s),Yl.default.createElement($le,{depth:s.depth},Yl.default.createElement(Sj,{ref:O,isEven:s.n%2===0,style:{height:s.nodeHeight+"px"},isSelected:_===!0},Yl.default.createElement(Qle,null,C),f,Yl.default.createElement(qle,{onClick:S,isSelected:_===!0,graphEditorColor:g??"1",style:{opacity:1},disabled:!I},Yl.default.createElement(Yle,null))))},eue=Jle});function Ej(s,a){ue().transaction(({stateEditors:l})=>{l.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(z(N({},a.sheetAddress),{studioSheetItemKey:a.sheetItemKey,isCollapsed:s}))})}var Cj=P(()=>{Te()}),e_,Pj,tue,zRe=P(()=>{e_=q(Oe()),$R(),URe(),Cj(),Pj=s=>{let a="prop"+s.pathToProp[s.pathToProp.length-1];return s.shouldRender?s.type==="propWithChildren"?e_.default.createElement(tue,{leaf:s,key:a}):e_.default.createElement(eue,{leaf:s,key:a}):e_.default.createElement(e_.default.Fragment,{key:a})},tue=({leaf:s})=>e_.default.createElement(WR,{leaf:s,label:s.pathToProp[s.pathToProp.length-1],isCollapsed:s.isCollapsed,toggleCollapsed:()=>Ej(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>Pj(a)))}),nue,rue,iue,VRe=P(()=>{nue=q(Oe()),$R(),zRe(),Cj(),Te(),rue=({leaf:s})=>nue.default.createElement(WR,{leaf:s,label:s.sheetObject.address.objectKey,isCollapsed:s.isCollapsed,toggleSelect:()=>{ue().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set([s.sheetObject])})},toggleCollapsed:()=>Ej(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>Pj(a))),iue=rue}),Tj,sue,oue,jRe=P(()=>{yn(),Tj=q(Oe()),VRe(),$R(),Cj(),gte(),sue=({leaf:s})=>Yn(()=>Tj.default.createElement(WR,{leaf:s,label:s.sheet.address.sheetId,isCollapsed:s.isCollapsed,toggleCollapsed:()=>{Ej(!s.isCollapsed,{sheetAddress:s.sheet.address,sheetItemKey:s.sheetItemKey})}},s.children.map(a=>Tj.default.createElement(iue,{key:"sheetObject-"+fte(a.sheetObject),leaf:a}))),[s]),oue=sue}),Mj,LD,aue,lue,uue,cue,due,hue,HRe=P(()=>{yn(),Mj=Ft,LD=q(Oe()),ze(),jRe(),lue=ae.div(aue||(aue=W([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),cue=ae.ul(uue||(uue=W([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),due=({layoutP:s})=>Yn(()=>{let a=(0,Mj.val)(s.tree),l=(0,Mj.val)(s.leftDims.width);return LD.default.createElement(lue,{style:{width:l+"px",top:a.top+"px"}},LD.default.createElement(cue,null,LD.default.createElement(oue,{leaf:a})))},[s]),hue=due}),kj,pue,fue,mue,gue,GRe=P(()=>{Ar(),Mh(),yn(),ol(),kj=q(Oe()),ze(),Nle(),fue=ae.div(pue||(pue=W([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>pd.rightBackground,ju(.01,qS(1*.03,Sb.panel.bg))),mue=({layoutP:s})=>{let a=nr(s.rightDims.width),l=nr(s.panelDims.height);return kj.default.createElement(fue,{style:{width:a+"px"}},kj.default.createElement(xj,{width:a,height:l,layoutP:s}))},gue=mue}),t_,vue,yue,bue,_ue,WRe=P(()=>{yn(),t_=q(Oe()),ze(),HRe(),GRe(),Gae(),sse(),yue=ae.div(vue||(vue=W([`
  position: absolute;
  left: 0;
  right: 0;
`]))),bue=({layoutP:s})=>{let a=nr(s.dopeSheetDims.height);return t_.default.createElement(yue,{style:{height:a+"px"}},t_.default.createElement(gue,{layoutP:s}),t_.default.createElement(ise,null,t_.default.createElement(hue,{layoutP:s}),t_.default.createElement(Hae,{layoutP:s})))},_ue=bue});function $Re(s,a,l){return Aj.prism.memo(s,()=>(0,Aj.prism)(a),l).getValue()}var Aj,KRe=P(()=>{Aj=Ft});function di(s){return function(a,l){return s(a,l())}}function ul(s){return Object.freeze({audience:_v(s,8)?"internal":_v(s,16)?"dev":"public",category:_v(s,4)?"troubleshooting":_v(s,2)?"todo":"general",level:_v(s,512)?512:_v(s,256)?256:_v(s,128)?128:64})}function _v(s,a){return(s&a)===a}function hi(s,a){return((a&32)===32?!0:(a&16)===16?s.dev:(a&8)===8?s.internal:!1)&&s.min<=a}function wue(s=console,a={}){let l=z(N({},ld),{includes:N({},ld.includes)}),d={styled:YRe.bind(l,s),noStyle:QRe.bind(l,s)},f=qRe.bind(l);function g(){return l.loggingConsoleStyle&&l.loggerConsoleStyle?d.styled:d.noStyle}return l.create=g(),{configureLogger(b){var _;b==="console"?(l.loggerConsoleStyle=ld.loggerConsoleStyle,l.create=g()):b.type==="console"?(l.loggerConsoleStyle=(_=b.style)!=null?_:ld.loggerConsoleStyle,l.create=g()):b.type==="keyed"?(l.creatExt=S=>b.keyed(S.names),l.create=f):b.type==="named"&&(l.creatExt=XRe.bind(null,b.named),l.create=f)},configureLogging(b){var _,S,C,I,O;l.includes.dev=(_=b.dev)!=null?_:ld.includes.dev,l.includes.internal=(S=b.internal)!=null?S:ld.includes.internal,l.includes.min=(C=b.min)!=null?C:ld.includes.min,l.include=(I=b.include)!=null?I:ld.include,l.loggingConsoleStyle=(O=b.consoleStyle)!=null?O:ld.loggingConsoleStyle,l.create=g()},getLogger(){return l.create({names:[]})}}}function XRe(s,a){let l=[];for(let{name:d,key:f}of a.names)l.push(f==null?d:"".concat(d," (").concat(f,")"));return s(l)}function qRe(s){let a=N(N({},this.includes),this.include(s)),l=this.filtered,d=this.named.bind(this,s),f=this.creatExt(s),g=hi(a,524),b=hi(a,522),_=hi(a,521),S=hi(a,529),C=hi(a,545),I=hi(a,265),O=hi(a,268),R=hi(a,273),A=hi(a,289),F=hi(a,137),L=hi(a,145),V=hi(a,73),H=hi(a,81),K=g?f.error.bind(f,Ba._hmm):l.bind(s,524),Z=b?f.error.bind(f,Ba._todo):l.bind(s,522),re=_?f.error.bind(f,Ba._error):l.bind(s,521),ne=S?f.error.bind(f,Ba.errorDev):l.bind(s,529),le=C?f.error.bind(f,Ba.errorPublic):l.bind(s,545),Ce=O?f.warn.bind(f,Ba._kapow):l.bind(s,268),ve=I?f.warn.bind(f,Ba._warn):l.bind(s,265),we=R?f.warn.bind(f,Ba.warnDev):l.bind(s,273),De=A?f.warn.bind(f,Ba.warnPublic):l.bind(s,273),rt=F?f.debug.bind(f,Ba._debug):l.bind(s,137),ce=L?f.debug.bind(f,Ba.debugDev):l.bind(s,145),Re=V?f.trace.bind(f,Ba._trace):l.bind(s,73),J=H?f.trace.bind(f,Ba.traceDev):l.bind(s,81),Ve={_hmm:K,_todo:Z,_error:re,errorDev:ne,errorPublic:le,_kapow:Ce,_warn:ve,warnDev:we,warnPublic:De,_debug:rt,debugDev:ce,_trace:Re,traceDev:J,lazy:{_hmm:g?di(K):K,_todo:b?di(Z):Z,_error:_?di(re):re,errorDev:S?di(ne):ne,errorPublic:C?di(le):le,_kapow:O?di(Ce):Ce,_warn:I?di(ve):ve,warnDev:R?di(we):we,warnPublic:A?di(De):De,_debug:F?di(rt):rt,debugDev:L?di(ce):ce,_trace:V?di(Re):Re,traceDev:H?di(J):J},named:d,utilFor:{internal(){return{debug:Ve._debug,error:Ve._error,warn:Ve._warn,trace:Ve._trace,named(Ot,Me){return Ve.named(Ot,Me).utilFor.internal()}}},dev(){return{debug:Ve.debugDev,error:Ve.errorDev,warn:Ve.warnDev,trace:Ve.traceDev,named(Ot,Me){return Ve.named(Ot,Me).utilFor.dev()}}},public(){return{error:Ve.errorPublic,warn:Ve.warnPublic,debug(Ot,Me){Ve._warn('(public "debug" filtered out) '.concat(Ot),Me)},trace(Ot,Me){Ve._warn('(public "trace" filtered out) '.concat(Ot),Me)},named(Ot,Me){return Ve.named(Ot,Me).utilFor.public()}}}}};return Ve}function YRe(s,a){let l=N(N({},this.includes),this.include(a)),d=[],f="";for(let S=0;S<a.names.length;S++){let{name:C,key:I}=a.names[S];if(f+=" %c".concat(C),d.push(this.style.css(C)),I!=null){let O="%c#".concat(I);f+=O,d.push(this.style.css(O))}}let g=this.filtered,b=this.named.bind(this,a),_=[f,...d];return xue(g,a,l,s,_,ZRe(_),b)}function ZRe(s){let a=s.slice(0);for(let l=1;l<a.length;l++)a[l]+=";background-color:#e0005a;padding:2px;color:white";return a}function QRe(s,a){let l=N(N({},this.includes),this.include(a)),d="";for(let _=0;_<a.names.length;_++){let{name:S,key:C}=a.names[_];d+=" ".concat(S),C!=null&&(d+="#".concat(C))}let f=this.filtered,g=this.named.bind(this,a),b=[d];return xue(f,a,l,s,b,b,g)}function xue(s,a,l,d,f,g,b){let _=hi(l,524),S=hi(l,522),C=hi(l,521),I=hi(l,529),O=hi(l,545),R=hi(l,265),A=hi(l,268),F=hi(l,273),L=hi(l,289),V=hi(l,137),H=hi(l,145),K=hi(l,73),Z=hi(l,81),re=_?d.error.bind(d,...f):s.bind(a,524),ne=S?d.error.bind(d,...f):s.bind(a,522),le=C?d.error.bind(d,...f):s.bind(a,521),Ce=I?d.error.bind(d,...f):s.bind(a,529),ve=O?d.error.bind(d,...f):s.bind(a,545),we=A?d.warn.bind(d,...g):s.bind(a,268),De=R?d.warn.bind(d,...f):s.bind(a,265),rt=F?d.warn.bind(d,...f):s.bind(a,273),ce=L?d.warn.bind(d,...f):s.bind(a,273),Re=V?d.info.bind(d,...f):s.bind(a,137),J=H?d.info.bind(d,...f):s.bind(a,145),Ve=K?d.debug.bind(d,...f):s.bind(a,73),Ot=Z?d.debug.bind(d,...f):s.bind(a,81),Me={_hmm:re,_todo:ne,_error:le,errorDev:Ce,errorPublic:ve,_kapow:we,_warn:De,warnDev:rt,warnPublic:ce,_debug:Re,debugDev:J,_trace:Ve,traceDev:Ot,lazy:{_hmm:_?di(re):re,_todo:S?di(ne):ne,_error:C?di(le):le,errorDev:I?di(Ce):Ce,errorPublic:O?di(ve):ve,_kapow:A?di(we):we,_warn:R?di(De):De,warnDev:F?di(rt):rt,warnPublic:L?di(ce):ce,_debug:V?di(Re):Re,debugDev:H?di(J):J,_trace:K?di(Ve):Ve,traceDev:Z?di(Ot):Ot},named:b,utilFor:{internal(){return{debug:Me._debug,error:Me._error,warn:Me._warn,trace:Me._trace,named(ke,He){return Me.named(ke,He).utilFor.internal()}}},dev(){return{debug:Me.debugDev,error:Me.errorDev,warn:Me.warnDev,trace:Me.traceDev,named(ke,He){return Me.named(ke,He).utilFor.dev()}}},public(){return{error:Me.errorPublic,warn:Me.warnPublic,debug(ke,He){Me._warn('(public "debug" filtered out) '.concat(ke),He)},trace(ke,He){Me._warn('(public "trace" filtered out) '.concat(ke),He)},named(ke,He){return Me.named(ke,He).utilFor.public()}}}}};return Me}var Ba,ld,Sue=P(()=>{Ba={_hmm:ul(524),_todo:ul(522),_error:ul(521),errorDev:ul(529),errorPublic:ul(545),_kapow:ul(268),_warn:ul(265),warnDev:ul(273),warnPublic:ul(289),_debug:ul(137),debugDev:ul(145),_trace:ul(73),traceDev:ul(81)},ld={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(s,a,l){return this.create({names:[...s.names,{name:a,key:l}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(s){if(s.length<5)return s;let a=s.replace(this.collapseOnRE,"");return this.cssMemo.has(a)||this.cssMemo.set(a,this.css(s)),a},css(s){var a,l,d,f;let g=this.cssMemo.get(s);if(g)return g;let b="color:".concat((l=(a=this.color)==null?void 0:a.call(this,s))!=null?l:"hsl(".concat((s.charCodeAt(0)+s.charCodeAt(s.length-1))%360,", 100%, 60%)"));return(d=this.bold)!=null&&d.test(s)&&(b+=";font-weight:600"),(f=this.italic)!=null&&f.test(s)&&(b+=";font-style:italic"),this.cssMemo.set(s,b),b}}}}),Ij,ND,FD=P(()=>{Sue(),Sue(),Ij=wue(console,{_debug:function(){},_error:function(){}}),Ij.configureLogging({dev:!0,min:64}),ND=Ij.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),kf,wv,Eue,JRe=P(()=>{yh(),kf=Ft,FD(),dh(),wv=28,Eue=(s,a)=>{var l;kf.prism.ensurePrism();let d=!0,f=FI+wv,g=0,b=a.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequence.collapsableItems,_=b.byId[Os.forSheet()].isCollapsed,S=(l=(0,kf.pointerToPrism)(_).getValue())!=null?l:!1,C={type:"sheet",isCollapsed:S,sheet:s,children:[],sheetItemKey:Os.forSheet(),shouldRender:d,top:FI,depth:0,n:g,nodeHeight:d?wv:0,heightIncludingChildren:-1};g+=1;for(let L of Object.values((0,kf.val)(s.objectsP)))L&&I(L,C.children,C.depth+1,!S);C.heightIncludingChildren=f-C.top;function I(L,V,H,K){var Z;let re=(0,kf.val)(L.template.getMapOfValidSequenceTracks_forStudio()),ne=(0,kf.val)(L.template.configPointer);if(Object.keys(re).length===0)return;let le=b.byId[Os.forSheetObject(L)].isCollapsed,Ce=(Z=(0,kf.pointerToPrism)(le).getValue())!=null?Z:!1,ve={type:"sheetObject",isCollapsed:Ce,sheetItemKey:Os.forSheetObject(L),shouldRender:K,top:f,children:[],depth:H,n:g,sheetObject:L,nodeHeight:K?wv:0,heightIncludingChildren:-1};V.push(ve),K&&(g+=1,f+=ve.nodeHeight),O(L,re,[],ne,ve.children,H+1,K&&!Ce),ve.heightIncludingChildren=f-ve.top}function O(L,V,H,K,Z,re,ne){for(let[le,Ce]of Object.entries(V)){let ve=K.props[le];R(L,Ce,[...H,le],ve,Z,re,ne)}}function R(L,V,H,K,Z,re,ne){K.type==="compound"?A(L,V,K,H,K,Z,re,ne):K.type==="enum"?ND.warn("Prop type enum is not yet supported in the sequence editor"):F(L,V,H,K,Z,re,ne)}function A(L,V,H,K,Z,re,ne,le){var Ce;let ve=b.byId[Os.forSheetObjectProp(L,K)].isCollapsed,we=(Ce=(0,kf.pointerToPrism)(ve).getValue())!=null?Ce:!1,De={type:"propWithChildren",isCollapsed:we,propConf:H,pathToProp:K,sheetItemKey:Os.forSheetObjectProp(L,K),sheetObject:L,shouldRender:le,top:f,children:[],nodeHeight:le?wv:0,heightIncludingChildren:-1,depth:ne,trackMapping:V,n:g};re.push(De),le&&(f+=De.nodeHeight,g+=1),O(L,V,K,Z,De.children,ne+1,le&&!we),De.heightIncludingChildren=f-De.top}function F(L,V,H,K,Z,re,ne){let le={type:"primitiveProp",propConf:K,depth:re,sheetItemKey:Os.forSheetObjectProp(L,H),sheetObject:L,pathToProp:H,shouldRender:ne,top:f,nodeHeight:ne?wv:0,heightIncludingChildren:ne?wv:0,trackId:V,n:g};Z.push(le),g+=1,f+=le.nodeHeight}return C}});function eDe(s,a){let l=ue(),d=l.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId],f=l.atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId];return(0,Ua.prism)(()=>{var g;let b=$Re("tree",()=>Eue(s,l),[]),_=(0,Ua.val)(a),S=(0,Ua.val)(l.atomP.historic.panels.sequenceEditor.graphEditor),C=(0,Ua.val)(f.sequenceEditor.selectedPropsByObject),I=!!C&&Object.keys(C).length>0,{leftDims:O,rightDims:R,graphEditorDims:A,dopeSheetDims:F,horizontalScrollbarDims:L}=Ua.prism.memo("leftDims",()=>{var De;let rt={width:Math.floor(_.width*Cue),height:_.height,screenX:_.screenX,screenY:_.screenY},ce={width:_.width-rt.width,height:_.height,screenX:_.screenX+rt.width,screenY:_.screenY},Re=I&&(S==null?void 0:S.isOpen)===!0,J=Math.floor((Re?bi((De=S==null?void 0:S.height)!=null?De:.5,.1,.7):0)*_.heightWithoutBorder),Ve=0+J,Ot=_.height-Ve,Me={width:_.width,height:Ot,screenX:_.screenX,screenY:_.screenY},ke={isAvailable:I,isOpen:Re,width:ce.width,height:J,screenX:_.screenX,screenY:_.screenY+Ot,padding:{top:20,bottom:20}};return{leftDims:rt,rightDims:ce,graphEditorDims:ke,dopeSheetDims:Me,horizontalScrollbarDims:{bottom:0}}},[_,S,I]),V=Ua.prism.memo("graphEditorVerticalSpace",()=>{let De=A.height-A.padding.top-A.padding.bottom;return{space:De,fromExtremumSpace(rt){return rt*De},toExtremumSpace(rt){return rt/De}}},[A]),[H,K]=Ua.prism.state("isSeeking",!1),Z={isSeeking:H,setIsSeeking:K},re={},ne=(g=(0,Ua.val)(d.sequence.clippedSpaceRange))!=null?g:Pue,le=Ua.prism.memo("scaledSpace",()=>{let De=ne.end-ne.start,rt=R.width,ce=De/rt,Re=rt/De;return{fromUnitSpace(J){return J*Re},toUnitSpace(J){return J*ce},leftPadding:10}},[ne,R.width]),Ce=Ua.prism.memo("setClippedSpaceRange",()=>function(De){l.transaction(({stateEditors:rt})=>{let ce=N({},De);if(ce.end<=ce.start&&(ce.end=ce.start+1),ce.start<0){let Re=ce.end-ce.start;ce.start=0,ce.end=Re}rt.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(z(N({},s.address),{range:ce}))})},[]),ve=Ua.prism.memo("clippedSpace",()=>({range:ne,width:R.width,fromUnitSpace(De){return le.fromUnitSpace(De-ne.start)+le.leftPadding},toUnitSpace(De){return le.toUnitSpace(De-le.leftPadding)+ne.start},setRange:Ce}),[ne,R.width,le,Ce]),we=Ua.prism.memo("selection.current",()=>new Ua.Atom({}),[]);return hV("finalAtom",{sheet:s,tree:b,panelDims:_,leftDims:O,rightDims:R,dopeSheetDims:F,horizontalScrollbarDims:L,seeker:Z,unitSpace:re,scaledSpace:le,clippedSpace:ve,graphEditorDims:A,graphEditorVerticalSpace:V,selectionAtom:we}).pointer})}var Ua,Cue,Pue,tDe=P(()=>{Te(),KRe(),Tie(),Ua=Ft,JRe(),ui(),Cue=.2,Pue={start:0,end:10}});function nDe(s){let{fullSecondStampsContainer:a,sequencePositionFormatter:l,snapToGrid:d,unitSpaceToClippedSpace:f}=s,g="";Cle(s,(b,_)=>{let S=d(b),C=f(S);_?g+=Tue(l.formatFullUnitForGrid(S),C,"full-unit"):g+=Tue(l.formatSubUnitForGrid(S),C,"sub-unit")}),a.innerHTML=g}function Tue(s,a,l){return'<span class="'.concat(l,'" style="transform: translate3d(').concat(a.toFixed(1),'px, -50%, 0);">').concat(s,"</span>")}var xv,Sv,Mue,kue,Af,Aue,Iue,Rue,Due,Oue,Lue,Nue=P(()=>{xv=Ft,ol(),Sv=q(Oe()),ze(),Tle(),Te(),kue=ae.div(Mue||(Mue=W([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Af={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return qS(.2,Af.fullUnitStampColor)}},Iue=ae.div(Aue||(Aue=W([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),Due=ae.div(Rue||(Rue=W([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Af.fullUnitStampColor,Af.stampFontSize,Af.fullUnitStampColor,Af.subUnitStampColor),Oue=({layoutP:s,width:a})=>{let l=(0,Sv.useRef)(null),[d,f]=(0,Sv.useState)(null);return(0,Sv.useLayoutEffect)(()=>{if(d)return(0,xv.prism)(()=>{let g=(0,xv.val)(s.sheet).getSequence();return{fullSecondStampsContainer:d,clippedSpaceRange:(0,xv.val)(s.clippedSpace.range),clippedSpaceWidth:(0,xv.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,xv.val)(s.clippedSpace.fromUnitSpace),leftPadding:(0,xv.val)(s.scaledSpace.leftPadding),fps:g.subUnitsPerUnit,sequencePositionFormatter:g.positionFormatter,snapToGrid:b=>g.closestGridPosition(b)}}).onChange(ue().ticker,nDe,!0)},[d,a,s]),Sv.default.createElement(kue,{ref:l,style:{width:a+"px"}},Sv.default.createElement(Iue,{style:{width:a+"px"}},Sv.default.createElement(Due,{ref:f})))},Lue=Oue});function rDe(s){let[a,l]=(0,Rj.useState)(!1);return(0,Rj.useEffect)(()=>{if(l(!1),!s)return;let d=g=>{g.target===s?l(!0):l(!1)},f=()=>{l(!1)};return s.addEventListener("mouseenter",d),s.addEventListener("mousemove",d),s.addEventListener("mouseleave",f),()=>{l(!1),s.removeEventListener("mouseenter",d),s.removeEventListener("mousemove",d),s.removeEventListener("mouseleave",f)}},[s]),a}var Rj,iDe=P(()=>{Rj=q(Oe())});function sDe(s,a){let l=0,[d,f]=s,[g,b]=a;return f-d>b-g?[g,b]:(d<g&&(l=0-d),f>b&&(l=b-f),[d+l,f+l])}var ud,If,xs,Dj,Fue,BD,Bue,Uue,zue=P(()=>{ud=Ft,yn(),Ar(),Te(),Cv(),ca(),ws(),kr(),If=q(Oe()),ze(),fo(),xs={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},Dj=1e3,BD=ae.div(Fue||(Fue=W([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>dd-1,s=>s.enabled?xs.enabled.backgroundColor:xs.disabled.backgroundColor,Dj,xs.hover.backgroundColor,xs.dragging.backgroundColor,Cr),Bue=({layoutP:s})=>{let a=(0,If.useMemo)(()=>(0,ud.prism)(()=>{let{projectId:C,sheetId:I}=(0,ud.val)(s.sheet).address;return(0,ud.val)(ue().atomP.ahistoric.projects.stateByProjectId[C].stateBySheetId[I].sequence.focusRange)}),[s]),[l,d]=br(null),[f]=ua(d,{menuItems:()=>{let C=(0,ud.val)(s.sheet),I=a.getValue();return[{label:"Delete focus range",callback:()=>{ue().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(N({},C.address))}).commit()}},{label:I!=null&&I.enabled?"Disable focus range":"Enable focus range",callback:()=>{I!==void 0&&ue().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(N({},C.address),{range:I.range,enabled:!I.enabled}))}).commit()}}]}}),g=nr(s.scaledSpace.toUnitSpace),b=nr(s.sheet),_=(0,If.useMemo)(()=>{let C,I;return{debugName:"FocusRangeStrip",onDragStart(O){let R,A=a.getValue();if(!A)return!1;let F=A.range.start,L=A.range.end,V=!1,H=(0,ud.val)(s.sheet).getSequence();return{onDrag(K){if(A=a.getValue(),A){V=!0;let Z=g(K),re=F+Z,ne=L+Z;ne<re&&(ne=re),[C,I]=sDe([re,ne],[0,H.length]).map(le=>H.closestGridPosition(le)),R&&R.discard(),R=ue().tempTransaction(({stateEditors:le})=>{var Ce;le.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(N({},b.address),{range:{start:C,end:I},enabled:(Ce=A==null?void 0:A.enabled)!=null?Ce:!0}))})}},onDragEnd(){A&&(V&&R!==void 0?R.commit():R&&R.discard())}}},lockCSSCursorTo:"grabbing"}},[b,g]),[S]=Fi(d,_);return xh(S,-1),Yn(()=>{let C=a.getValue(),I=(C==null?void 0:C.range)||{start:0,end:0},O=(0,ud.val)(s.clippedSpace.fromUnitSpace)(I.start),R=(0,ud.val)(s.clippedSpace.fromUnitSpace)(I.end),A,F;return O<0&&(O=0),R>(0,ud.val)(s.clippedSpace.width)&&(R=(0,ud.val)(s.clippedSpace.width)),O>R?(F=0,A=0):(F=O,A=(R-O)/Dj),C?If.default.createElement(If.default.Fragment,null,f,If.default.createElement(BD,{id:"range-strip",enabled:C.enabled,className:"".concat(S?"dragging":""," ").concat(C.enabled?"enabled":""),ref:l,style:{transform:"translateX(".concat(F,"px) scale(").concat(A,", 1)")}})):If.default.createElement(If.default.Fragment,null)},[s,l,a,f,S])},Uue=Bue}),Rf,Ch,Vue,jue,Hue,Gue,Wue,$ue,Kue,Oj,oDe=P(()=>{Rf=Ft,yn(),Te(),Cv(),al(),ws(),kr(),Ch=q(Oe()),ze(),fo(),zue(),Yu(),jue=ae.div(Vue||(Vue=W([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),s=>s.type==="start"?0:-xs.thumbWidth,xs.thumbWidth,()=>dd-1,({enabled:s})=>s?xs.enabled.backgroundColor:xs.disabled.backgroundColor,xs.enabled.stroke,s=>s.type==="start"?"w-resize":"e-resize",ph,()=>BD,xs.hover.backgroundColor,xs.hover.stroke,()=>BD,xs.dragging.backgroundColor,xs.dragging.stroke,xs.dragging.backgroundColor),Gue=ae.div(Hue||(Hue=W([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?90:-90,s=>s.type==="start"?xs.thumbWidth:-xs.thumbWidth+1),$ue=ae.div(Wue||(Wue=W([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?-90:90,()=>lC.backgroundColor,s=>s.type==="start"?-12:xs.thumbWidth),Kue=({layoutP:s,thumbType:a})=>{var l;let[d,f]=br(null),g=(0,Ch.useMemo)(()=>(0,Rf.prism)(()=>{let{projectId:C,sheetId:I}=(0,Rf.val)(s.sheet).address;return(0,Rf.val)(ue().atomP.ahistoric.projects.stateByProjectId[C].stateBySheetId[I].sequence.focusRange)}),[s]),b=(0,Ch.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let C,I,O=(0,Rf.val)(s.sheet),R={start:0,end:O.getSequence().length},A=g.getValue()||{range:R,enabled:!1},F=A.enabled,L=A.range[a],V=(0,Rf.val)(s.scaledSpace.toUnitSpace),H=V(xs.rangeStripMinWidth);return{onDrag(K,Z,re){var ne;let le,Ce=da.checkIfMouseEventSnapToPos(re,{ignore:f});if(Ce==null){let we=V(K);le=L+we}else le=Ce;I=((ne=g.getValue())==null?void 0:ne.range)||R,a==="start"?le=Math.max(Math.min(le,I.end-H),0):le=Math.min(Math.max(le,I.start+H),O.getSequence().length);let ve=O.getSequence().closestGridPosition(le);C!==void 0&&C.discard(),C=ue().tempTransaction(({stateEditors:we})=>{we.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(N({},O.address),{range:z(N({},I),{[a]:ve}),enabled:F}))})},onDragEnd(K){K?C==null||C.commit():C==null||C.discard()}}}}),[s]),[_]=Fi(f,b);Gl(_,"draggingPositionInSequenceEditor",a==="start"?"w-resize":"e-resize");let S=nr(g);return xh(_,(l=S==null?void 0:S.range[a])!=null?l:0),Yn(()=>{let C=g.getValue();if(!C)return null;let{enabled:I}=C,O=C.range[a],R=(0,Rf.val)(s.clippedSpace.fromUnitSpace)(O);return(R<0||(0,Rf.val)(s.clippedSpace.width)<R)&&(R=-1e4),Ch.default.createElement(jue,z(N(N({ref:d},da.includePositionSnapAttrs(O)),id(O)),{className:"".concat(_&&"dragging"," ").concat(I&&"enabled"),enabled:I,type:a,style:{transform:"translate3d(".concat(R,"px, 0, 0)")}}),Ch.default.createElement(Gue,{type:a,enabled:I}),Ch.default.createElement($ue,{type:a}),Ch.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Ch.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Ch.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[s,d,g,_])},Oj=Kue});function aDe(s,a){let[l,d]=(0,cd.useState)("none");return Gl(l!=="none","dragging",l==="creating"?"ew-resize":"move"),(0,cd.useMemo)(()=>{let f=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(b){let _,S=(0,Ev.val)(s.clippedSpace.toUnitSpace),C=(0,Ev.val)(s.scaledSpace.toUnitSpace),I=(0,Ev.val)(s.sheet),O=I.getSequence(),R=b.target.getBoundingClientRect(),A=S(b.clientX-R.left),F=C(xs.rangeStripMinWidth);return{onDrag(L){let V=C(L),H=A,K=A+V;[H,K]=[bi(H,0,O.length),bi(K,0,O.length)].map(Z=>O.closestGridPosition(Z)),K<H?[H,K]=[Math.max(Math.min(K,H-F),0),H]:L>0&&(K=Math.min(Math.max(K,H+F),O.length)),_&&_.discard(),_=ue().tempTransaction(({stateEditors:Z})=>{Z.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(N({},I.address),{range:{start:H,end:K},enabled:!0}))})},onDragEnd(L){L&&_!==void 0?_.commit():_&&_.discard()}}},lockCSSCursorTo:"ew-resize"}),g=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let b,_=a.current,S=a.current.addBoundsHighlightLock();return{onDrag(C,I){let O=z(N({},_.dims),{top:bi(_.dims.top+I,0,window.innerHeight-Wc),left:bi(_.dims.left+C,-_.dims.width+Wc,window.innerWidth-Wc)}),R=jR(O,{width:window.innerWidth,height:window.innerHeight});b==null||b.discard(),b=ue().tempTransaction(({stateEditors:A})=>{A.studio.historic.panelPositions.setPanelPosition({position:R,panelId:_.panelId})})},onDragEnd(C){S(),C?b==null||b.commit():b==null||b.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(b){let[_,S]=b.shiftKey?["creating",f().onDragStart(b)]:["moving-panel",g().onDragStart(b)];return d(_),S===!1?!1:{onDrag(C,I,O,R,A){S.onDrag(C,I,O,R,A)},onDragEnd(C){var I;d("none"),(I=S.onDragEnd)==null||I.call(S,C)}}}}},[s,a])}var Ev,cd,Xue,que,Yue,Zue,lDe=P(()=>{Ev=Ft,yn(),Te(),Wb(),Cv(),al(),ws(),iDe(),Hie(),kr(),ui(),cd=q(Oe()),ze(),zue(),oDe(),dh(),que=ae.div(Xue||(Xue=W([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>dd,s=>s.isShiftDown?"ew-resize":"move"),Yue=({layoutP:s})=>{let[a,l]=br(null),d=Gb(),f=(0,cd.useRef)(d);f.current=d;let g=(0,cd.useMemo)(()=>(0,Ev.prism)(()=>{let{projectId:S,sheetId:C}=(0,Ev.val)(s.sheet).address;return(0,Ev.val)(ue().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[C].sequence.focusRange)}),[s]);Fi(l,aDe(s,f));let b=Vie("Shift"),_=rDe(l);return(0,cd.useEffect)(()=>{if(!b&&_)return f.current.addBoundsHighlightLock()},[!b&&_]),Yn(()=>cd.default.createElement(que,{ref:a,isShiftDown:b},cd.default.createElement(Uue,{layoutP:s}),cd.default.createElement(Oj,{thumbType:"start",layoutP:s}),cd.default.createElement(Oj,{thumbType:"end",layoutP:s})),[s,g,b])},Zue=Yue}),n_,dd,lC,Que,Jue,ece,tce,Cv=P(()=>{yn(),n_=q(Oe()),ze(),Nue(),fo(),Ar(),lDe(),dd=18,lC={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},Jue=ae.div(Que||(Que=W([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),dd,lC.backgroundColor,lC.borderColor,Cr),ece=({layoutP:s})=>{let a=nr(s.rightDims.width);return n_.default.createElement(n_.default.Fragment,null,n_.default.createElement(Jue,N({},id("hide")),n_.default.createElement(Lue,{layoutP:s,width:a,height:dd}),n_.default.createElement(Zue,{layoutP:s})))},tce=ece}),Pv,nce,rce,ice,sce,oce,ace,lce,uce,uDe=P(()=>{Pv=q(Oe()),ze(),yn(),Te(),B4(),ev(),nce=s=>isFinite(s)&&s>0,ice=ae.div(rce||(rce=W([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),oce=ae.div(sce||(sce=W([`
  `,`;
  white-space: nowrap;
`])),gf),ace=({deltaX:s})=>s*.25,lce=({layoutP:s})=>{let a=nr(s.sheet),l=(0,Pv.useMemo)(()=>{let f;return{temporarilySetValue(g){f&&(f.discard(),f=void 0),f=ue().tempTransaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(z(N({},a.address),{length:g}))})},discardTemporaryValue(){f&&(f.discard(),f=void 0)},permanentlySetValue(g){f&&(f.discard(),f=void 0),ue().transaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(z(N({},a.address),{length:g}))})}}},[s,a]),d=(0,Pv.useRef)(null);return(0,Pv.useLayoutEffect)(()=>{d.current.focus()},[]),Yn(()=>{let f=a.getSequence().length;return Pv.default.createElement(ice,null,Pv.default.createElement(oce,null,"Sequence length"),Pv.default.createElement($I,z(N({value:f},l),{isValid:nce,inputRef:d,nudge:ace})))},[a,l,d])},uce=lce});function cDe(s,a){let l=(0,za.useRef)(a);l.current=a;let d=(0,za.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(g){let b,_=l.current,S=(0,Tv.val)(l.current.layoutP.sheet),C=S.getSequence().length,I=(0,Tv.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(O,R,A){let F=I(O);b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:L})=>{L.coreByProject.historic.sheetsById.sequence.setLength(z(N({},S.address),{length:C+F}))})},onDragEnd(O){O?b&&b.commit():b&&b.discard()}}}}),[]),[f]=Fi(s,d);return xh(f,-1),[f]}var Tv,za,Lj,uC,cce,Df,dce,hce,pce,fce,mce,gce,vce,yce,bce,_ce,wce,dDe=P(()=>{yn(),Tv=Ft,za=q(Oe()),ze(),Mh(),Cv(),kr(),ws(),Te(),Yc(),fo(),Rb(),uDe(),Ar(),Qc(),Lj=1e3,uC={stripNormal:"#0000006c",stripActive:"#000000"},Df=ae.div(cce||(cce=W([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>pd.lengthIndicatorStrip,dd,uC.stripNormal,uC.stripActive),hce=ae.div(dce||(dce=W([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),dd-15),fce=ae.div(pce||(pce=W([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),Cr,Df,Df,uC.stripActive),gce=ae.div(mce||(mce=W([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),Cr,Df,Df,uC.stripActive),yce=ae.div(vce||(vce=W([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),Lj,()=>pd.lengthIndicatorCover,Df,Df),bce=-1e4,_ce=({layoutP:s})=>{let[a,l]=br(null),[d]=cDe(l,{layoutP:s}),{node:f,toggle:g,close:b}=qc({debugName:"LengthIndicator"},()=>za.default.createElement(Zc,null,za.default.createElement(uce,{layoutP:s,onRequestClose:b})));return Yn(()=>{let _=(0,Tv.val)(s.sheet),S=(0,Tv.val)(s.rightDims.height),C=_.getSequence(),I=C.length,O=I,R=(0,Tv.val)(s.clippedSpace.fromUnitSpace)(O),A=(0,Tv.val)(s.clippedSpace.width),F,L;return R>A?(L=0,F=0):(R<0&&(R=0),L=R,F=(A-R)/Lj),za.default.createElement(za.default.Fragment,null,f,za.default.createElement(Df,{style:{height:S+"px",transform:"translateX(".concat(L===0?bce:L,"px)")},className:d?"dragging":""},za.default.createElement(hce,null,za.default.createElement(gce,N({ref:a,onClick:V=>{g(V,l)}},id("hide")),za.default.createElement(eAe,null),za.default.createElement(tAe,null)),za.default.createElement(fce,null,"Sequence length:"," ",C.positionFormatter.formatBasic(I)))),za.default.createElement(yce,{title:"Length",style:{height:S+"px",transform:"translateX(".concat(L,"px) scale(").concat(F,", 1)")}}))},[s,a,d,f])},wce=_ce}),Nj,Ph,xce,Sce,Ece,Cce,Pce,Tce,Mce,kce,hDe=P(()=>{yn(),Nj=Ft,Ph=q(Oe()),ze(),Nue(),Mh(),Cv(),fo(),Sce=ae.div(xce||(xce=W([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),Cce=ae.div(Ece||(Ece=W([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Af.stampFontSize,Af.fullUnitStampColor,lC.backgroundColor,()=>pd.currentFrameStamp),Tce=ae.div(Pce||(Pce=W([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),Mce=Ph.default.memo(({layoutP:s})=>{let[a,l]=nr(dse()),d=nr(s.clippedSpace.fromUnitSpace),{sequence:f,formatter:g,clippedSpaceWidth:b}=Yn(()=>{let I=(0,Nj.val)(s.sheet).getSequence(),O=(0,Nj.val)(s.clippedSpace.width);return{sequence:I,formatter:I.positionFormatter,clippedSpaceWidth:O}},[s]);if(a==-1)return Ph.default.createElement(Ph.default.Fragment,null);let _=l===3?f.closestGridPosition(a):a,S=d(_),C=S>=0&&S<=b;return Ph.default.createElement(Ph.default.Fragment,null,Ph.default.createElement(Sce,null,Ph.default.createElement(Cce,{style:{opacity:C?1:0,transform:"translate3d(calc(".concat(S,"px - 50%), 0, 0)")}},g.formatForPlayhead(_)),Ph.default.createElement(Tce,{posType:l,style:{opacity:C?1:0,transform:"translate3d(".concat(S,"px, 0, 0)")}}))," ")}),kce=Mce}),Zu,fa,Ace,Ice,Rce,Dce,Oce,UD,Lce,Fj,Nce,zD,Fce,VD,Bce,Bj,Uce,zce,pDe=P(()=>{yn(),Zu=Ft,z2(),ol(),fa=q(Oe()),ze(),Mh(),fo(),Ar(),ws(),Ice=ae.div(Ace||(Ace=W([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>pd.horizontalScrollbar,Cr),Dce=ae.div(Rce||(Rce=W([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),UD=ae.div(Oce||(Oce=W([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),j5("absolute","-4px")),Fj=ae.div(Lce||(Lce=W([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),j5("absolute","0"),j5("absolute","-4px")),zD=ae(Fj)(Nce||(Nce=W([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),VD=ae(Fj)(Fce||(Fce=W([`
  cursor: e-resize;
  left: 0px;
`]))),Bj=ae.div(Bce||(Bce=W([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),s=>s.active?"block":"none",zD,VD,UD,zD,UD,VD),Uce=({layoutP:s})=>{let a=(0,fa.useCallback)(V=>V.toFixed(2),[]),l=(0,fa.useMemo)(()=>(0,Zu.prism)(()=>{let V=(0,Zu.val)(s.rightDims.width)-25,H=(0,Zu.val)(s.clippedSpace.range),K=(0,Zu.val)(s.sheet).getSequence().length,Z=Math.max(H.end,K),re=H.start/Z*V,ne=H.end/Z*V;return{rightWidth:V,clippedSpaceRange:H,sequenceLength:K,assumedLengthOfSequence:Z,rangeStartX:re,rangeEndX:ne,bottom:(0,Zu.val)(s.horizontalScrollbarDims.bottom)}}),[s]),{rangeStartX:d,rangeEndX:f,clippedSpaceRange:g,bottom:b}=nr(l),[_,S]=(0,fa.useState)("nothing"),C=(0,fa.useMemo)(()=>{let V=(0,Zu.val)(l),H=()=>{V=(0,Zu.val)(l)},K=Z=>Z/V.rightWidth*V.assumedLengthOfSequence;return{onRangeDragStart(){return H(),{onDrag(Z){S("both");let re=K(Z),ne=th(V.clippedSpaceRange,le=>le+re);(0,Zu.val)(s.clippedSpace.setRange)(ne)},onDragEnd(){S("nothing")}}},onRangeStartDragStart(){return H(),{onDrag(Z){S("start");let re=K(Z),ne={start:V.clippedSpaceRange.start+re,end:V.clippedSpaceRange.end};ne.start>ne.end-1&&(ne.start=ne.end-1),ne.start<=0&&(ne.start=0),(0,Zu.val)(s.clippedSpace.setRange)(ne)},onDragEnd(){S("nothing")}}},onRangeEndDragStart(){return H(),{onDrag(Z){S("end");let re=K(Z),ne={start:V.clippedSpaceRange.start,end:V.clippedSpaceRange.end+re};ne.end<ne.start+1&&(ne.end=ne.start+1),ne.end>=V.assumedLengthOfSequence&&(ne.end=V.assumedLengthOfSequence),(0,Zu.val)(s.clippedSpace.setRange)(ne)},onDragEnd(){S("nothing")}}}}},[s,l]),[I,O]=(0,fa.useState)(null);Fi(I,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:C.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[R,A]=(0,fa.useState)(null);Fi(R,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:C.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[F,L]=(0,fa.useState)(null);return Fi(F,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:C.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),fa.default.createElement(Ice,N({style:{bottom:b+8+"px"}},id("hide")),fa.default.createElement(Dce,null,fa.default.createElement(UD,{ref:O,style:{width:"".concat(f-d,"px"),transform:"translate3d(".concat(d,"px, 0, 0)")}}),fa.default.createElement(zD,{ref:A,style:{transform:"translate3d(".concat(d,"px, 0, 0)")}},fa.default.createElement(Bj,{active:_==="both"||_==="start"},a(g.start))),fa.default.createElement(VD,{ref:L,style:{transform:"translate3d(".concat(f,"px, 0, 0)")}},fa.default.createElement(Bj,{active:_==="both"||_==="end"},a(g.end)))))},zce=Uce}),Vce,jce,Hce,Gce,Wce,fDe=P(()=>{Vce=q(Oe()),ze(),Hce=ae.div(jce||(jce=W([`
  position: absolute;
  inset: `,`px;
`])),s=>s.room*-1),Gce=s=>Vce.default.createElement(Hce,{room:s.room}),Wce=Gce}),jD,HD,Uj,$ce,Kce,Xce,qce,Yce,Zce,Qce,Jce,mDe=P(()=>{ze(),yn(),B4(),ev(),jD=q(Oe()),HD=q(Oe()),Uj=Ft,Fy(),$ce=s=>isFinite(s)&&s>=0,Xce=ae.div(Kce||(Kce=W([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Yce=ae.div(qce||(qce=W([`
  `,`;
  white-space: nowrap;
`])),gf),Zce=({deltaX:s})=>s*.25,Qce=({layoutP:s,onRequestClose:a})=>{let l=(0,Uj.val)(s.sheet),d=l.getSequence(),f=(0,jD.useMemo)(()=>{let b,_=d.position;return{temporarilySetValue(S){b&&(b=void 0),b=bi(S,0,d.length),d.position=b},discardTemporaryValue(){b&&(b=void 0,d.position=_,a("discardTemporaryValue"))},permanentlySetValue(S){b&&(b=void 0),d.position=bi(S,0,d.length),a("permanentlySetValue")}}},[s,d]),g=(0,jD.useRef)(null);return(0,jD.useLayoutEffect)(()=>{g.current.focus()},[]),Yn(()=>{let b=l.getSequence(),_=Number((0,Uj.val)(b.pointer.position).toFixed(3));return HD.default.createElement(Xce,null,HD.default.createElement(Yce,null,"Sequence position"),HD.default.createElement($I,z(N({value:_},f),{isValid:$ce,inputRef:g,nudge:Zce})))},[l,f,g])},Jce=Qce}),ede,gDe=P(()=>{ede=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),tde,vDe=P(()=>{gDe(),tde=s=>ede?s.metaKey===!0:s.ctrlKey===!0});function yDe(){GD=!1}function bDe(){GD=!0}function _De(){let s=ue();(0,nde.useEffect)(()=>{let a=l=>{let d=l.composedPath()[0];if(!(d&&(d.tagName==="INPUT"||d.tagName==="TEXTAREA"))){if(l.key==="z"||l.key==="Z"||l.code==="KeyZ")if(tde(l))l.shiftKey===!0?s.redo():s.undo();else return;else if(l.code==="Space"&&!l.shiftKey&&!l.metaKey&&!l.altKey&&!l.ctrlKey){if(!GD)return;let f=Ske();if(f)if(f.playing)f.pause();else{let{projectId:g,sheetId:b}=f.address,_=(0,Qu.prism)(()=>{let I=(0,Qu.val)(ue().atomP.ahistoric.projects.stateByProjectId[g].stateBySheetId[b].sequence.focusRange);return Qu.prism.memo("shouldFollowFocusRange",()=>{let O=f.position;if(I){let R=O>=I.range.start&&O<=I.range.end;return I.enabled?!!R:!0}else return!0},[])&&I&&I.enabled?{range:[I.range.start,I.range.end],isFollowingARange:!0}:{range:[0,(0,Qu.val)(f.pointer.length)],isFollowingARange:!1}}),S=f.playDynamicRange((0,Qu.prism)(()=>(0,Qu.val)(_).range),ue().ticker),C=zj(f);S.finally(()=>{C.set(void 0)}),C.set(_)}else return}else if(l.altKey&&(l.key==="\\"||l.code==="Backslash"||l.code==="IntlBackslash"))s.transaction(({stateEditors:f,drafts:g})=>{f.studio.ahistoric.setVisibilityState(g.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;l.preventDefault(),l.stopPropagation()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var nde,Qu,GD,zj,rde,Vj=P(()=>{nde=q(Oe()),Te(),vDe(),df(),Qu=Ft,cR(),GD=!0,zj=gE(s=>new Qu.Atom(void 0)),rde=gE(s=>(0,Qu.prism)(()=>{let a=zj(s).prism.getValue();if(a)return a.getValue().isFollowingARange;{let{projectId:l,sheetId:d}=s.address,f=(0,Qu.val)(ue().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[d].sequence.focusRange);if(!f||!f.enabled)return!1;let g=(0,Qu.val)(s.pointer.position);return g>=f.range.start&&g<=f.range.end}}))});function wDe(s,a){return ua(s,{menuItems(){return[{label:"Place marker",callback:()=>{ue().transaction(({stateEditors:l})=>{let d=(0,hd.val)(a.layoutP.sheet),f=d.getSequence();l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:d.address,markers:[{id:a2e(),position:f.position}],snappingFunction:f.closestGridPosition})})}}]}})}var hd,Zl,ide,Mv,sde,ode,ade,jj,lde,ude,cde,dde,hde,pde,xDe=P(()=>{fDe(),ws(),kr(),yn(),hd=Ft,Fy(),Zl=q(Oe()),ze(),Mh(),fo(),Ar(),Yc(),Qc(),mDe(),Vj(),al(),ca(),Te(),yh(),Yu(),uv(),Mv=ae.div(ide||(ide=W([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>pd.playhead,s=>s.isVisible?"block":"none"),ode=ae.div(sde||(sde=W([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),ph),jj=ae.div(ade||(ade=W([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),Cr,Mv,Mv,ph,Mv),ude=ae.div(lde||(lde=W([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Mv),dde=ae.div(cde||(cde=W([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),jj,Mv),hde=({layoutP:s})=>{let[a,l]=br(null),{node:d,toggle:f,close:g}=qc({debugName:"Playhead"},()=>Zl.default.createElement(Zc,null,Zl.default.createElement(Jce,{layoutP:s,onRequestClose:g}))),b=(0,Zl.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let C=(0,hd.val)(s.sheet).getSequence(),I=C.position,O=(0,hd.val)(s.scaledSpace.toUnitSpace),R=(0,hd.val)(s.seeker.setIsSeeking);return R(!0),CV(),{onDrag(A,F,L){var V;let H=O(A);C.position=(V=da.checkIfMouseEventSnapToPos(L,{ignore:l}))!=null?V:bi(I+H,0,C.length)},onDragEnd(A){R(!1),lv()},onClick(A){f(A,a.current)}}}}),[s,l]),[_]=Fi(l,b);Gl(_,"draggingPositionInSequenceEditor","ew-resize"),xh(nr(s.seeker.isSeeking)||_,-1);let[S]=wDe(l,{layoutP:s});return Yn(()=>{let C=(0,hd.val)(s.seeker.isSeeking),I=(0,hd.val)(s.sheet).getSequence(),O=(0,hd.val)(rde(I)),R=I.positionPrism.getValue(),A=(0,hd.val)(s.clippedSpace.fromUnitSpace)(R),F=A>=0&&A<=(0,hd.val)(s.clippedSpace.width);return Zl.default.createElement(Zl.default.Fragment,null,S,d,Zl.default.createElement(Mv,N({isVisible:F,style:{transform:"translate3d(".concat(A,"px, 0, 0)")},className:"".concat(C&&"seeking"," ").concat(O&&"playheadattachedtofocusrange")},id("hide")),Zl.default.createElement(jj,N({ref:a},da.includePositionSnapAttrs(R)),Zl.default.createElement(Wce,{room:8}),Zl.default.createElement(ude,null),Zl.default.createElement(dde,null,I.positionFormatter.formatForPlayhead(I.closestGridPosition(R)))),Zl.default.createElement(ode,z(N({},da.includePositionSnapAttrs(R)),{className:C?"seeking":""}))))},[s,a,d])},pde=hde}),kv,cC,WD,fde,mde,gde,vde,SDe=P(()=>{kv=Ft,yn(),Te(),Cv(),cC=q(Oe()),ze(),WD=1e3,mde=ae.div(fde||(fde=W([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),dd,WD,s=>s.enabled?"#000000":"transparent"),gde=({layoutP:s})=>{let a=(0,cC.useMemo)(()=>(0,kv.prism)(()=>{let{projectId:l,sheetId:d}=(0,kv.val)(s.sheet).address;return(0,kv.val)(ue().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[d].sequence.focusRange)}),[s]);return Yn(()=>{let l=a.getValue();if(!l||!l.enabled)return null;let d=(0,kv.val)(s.rightDims.height)-dd,f=(0,kv.val)(s.clippedSpace.fromUnitSpace),g=(0,kv.val)(s.clippedSpace.width),b=[];{let _=0,S=f(l.range.start),C,I;_>S?(I=0,C=0):(S>g&&(S=g),I=_,C=(S-_)/WD),b.push({translateX:I,scaleX:C})}{let _=f(l.range.end),S=g,C,I;_>S?(I=0,C=0):(_<0&&(_=0),I=_,C=(S-_)/WD),b.push({translateX:I,scaleX:C})}return cC.default.createElement(cC.default.Fragment,null,b.map(({translateX:_,scaleX:S},C)=>cC.default.createElement(mde,{key:"curtain-".concat(C),enabled:!0,style:{height:"".concat(d,"px"),transform:"translateX(".concat(_,"px) scaleX(").concat(S,")")}})))},[s,a])},vde=gde}),r_,yde,bde,_de,wde,xde,EDe=P(()=>{r_=q(Oe()),ze(),yn(),Te(),ev(),W4(),bde=ae.div(yde||(yde=W([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),ae.div(_de||(_de=W([`
  `,`;
  white-space: nowrap;
`])),gf),wde=({layoutP:s,marker:a})=>{var l;let d=nr(s.sheet),f=(0,r_.useMemo)(()=>{let b;return{temporarilySetValue(_){b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:S})=>{S.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:d.address,markerId:a.id,label:_})})},discardTemporaryValue(){b&&(b.discard(),b=void 0)},permanentlySetValue(_){b&&(b.discard(),b=void 0),ue().transaction(({stateEditors:S})=>{S.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:d.address,markerId:a.id,label:_})})}}},[s,d]),g=(0,r_.useRef)(null);return(0,r_.useLayoutEffect)(()=>{g.current.focus()},[]),r_.default.createElement(bde,null,r_.default.createElement(XI,z(N({value:(l=a.label)!=null?l:""},f),{isValid:()=>!0,inputRef:g})))},xde=wde});function CDe(s,a){return ua(s,{menuItems(){return[{label:"Remove marker",callback:()=>{ue().transaction(({stateEditors:l})=>{l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:a.sheetAddress,markerId:a.markerId})})}}]}})}function PDe(s,a){let l=(0,ma.useRef)(a);l.current=a;let d=(0,ma.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(a.marker.id,")"),onDragStart(g){let b=l.current.marker,_=(0,$D.val)(a.layoutP.scaledSpace.toUnitSpace),S;return CV(),{onDrag(C,I,O){var R;let A=b,F=Math.max((R=da.checkIfMouseEventSnapToPos(O,{ignore:s}))!=null?R:A.position+_(C),0);S==null||S.discard(),S=ue().tempTransaction(({stateEditors:L})=>{L.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,$D.val)(a.layoutP.sheet.address),markers:[z(N({},A),{position:F})],snappingFunction:(0,$D.val)(a.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(C){C?S==null||S.commit():S==null||S.discard(),lv()}}}}),[]),[f]=Fi(s,d);return xh(f,a.marker.position),Gl(f,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[f]}var $D,ma,Hj,Gj,Sde,Ede,Cde,Pde,Tde,KD,Mde,kde,Ade,Ide,Rde,Dde,TDe=P(()=>{$D=Ft,yn(),Te(),al(),ca(),kr(),ma=q(Oe()),ze(),fo(),ws(),Mh(),Yu(),QR(),yse(),uv(),Yc(),Qc(),EDe(),Hj=12,Gj=12,Sde=Hj*2,Ede=Gj*2,Pde=ae.div(Cde||(Cde=W([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>pd.marker),KD=ae.div(Tde||(Tde=W([`
  position: absolute;
  `,`
  pointer-events: none;
`])),Kl(Hj,Gj)),Mde=ma.default.memo(()=>ma.default.createElement(KD,{children:ma.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ma.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),Ade=ae.div(kde||(kde=W([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),sd.CSS,sd.CSS_WHEN_SOMETHING_DRAGGING,sd.BEING_DRAGGED_CLASS,ph,KD,sd.BEING_DRAGGED_CLASS,KD,Kl(Sde,Ede)),Ide=({layoutP:s,markerId:a})=>{let l=nr(s.sheet.address),d=nr(ue().atomP.historic.projects.stateByProjectId[l.projectId].stateBySheetId[l.sheetId].sequenceEditor.markerSet.byId[a]);if(!d)return null;let f=nr(s.clippedSpace.width),g=nr(s.clippedSpace.fromUnitSpace)(d.position),b=g<=0||g>f,_=b?-1e4:g,S=b?0:1;return ma.default.createElement(Pde,{style:{transform:"translateX(".concat(_,"px) scale(").concat(S,")")}},ma.default.createElement(Dde,{marker:d,layoutP:s}))},Rde=Ide,Dde=({layoutP:s,marker:a})=>{let l=nr(s.sheet.address),[d,f]=br(null),[g]=CDe(f,{sheetAddress:l,markerId:a.id}),[b]=PDe(f,{layoutP:s,marker:a}),{node:_,toggle:S,close:C}=qc({debugName:"MarkerPopover"},()=>ma.default.createElement(Zc,null,ma.default.createElement(xde,{marker:a,layoutP:s,onRequestClose:C})));return ma.default.createElement(ma.default.Fragment,null,g,_,ma.default.createElement(Ade,N({title:a.label?"Marker: ".concat(a.label):"Marker",ref:d,onClick:I=>{S(I,d.current)}},sd.reactProps({isDragging:b,position:a.position}))),ma.default.createElement(Mde,null))}}),XD,Ode,Lde,MDe=P(()=>{yn(),Te(),XD=q(Oe()),TDe(),Ode=({layoutP:s})=>{let a=nr(s.sheet.address),l=ue().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet,d=nr(l.allIds);return XD.default.createElement(XD.default.Fragment,null,d&&Object.keys(d).map(f=>XD.default.createElement(Rde,{key:f,layoutP:s,markerId:f})))},Lde=Ode}),Nde,Th,Fde,Bde,Ude,zde,kDe=P(()=>{Mh(),yn(),Nde=Ft,Th=q(Oe()),ze(),dDe(),hDe(),pDe(),xDe(),Cv(),SDe(),MDe(),Bde=ae.div(Fde||(Fde=W([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>pd.rightOverlay),Ude=({layoutP:s})=>Yn(()=>{let a=(0,Nde.val)(s.rightDims.width);return Th.default.createElement(Bde,{style:{width:a+"px"}},Th.default.createElement(pde,{layoutP:s}),Th.default.createElement(zce,{layoutP:s}),Th.default.createElement(kce,{layoutP:s}),Th.default.createElement(tce,{layoutP:s}),Th.default.createElement(Lde,{layoutP:s}),Th.default.createElement(wce,{layoutP:s}),Th.default.createElement(vde,{layoutP:s}))},[s]),zde=Ude}),Vde,qD,jde,Hde,Gde,Wde,ADe=P(()=>{Vde=Ft,yn(),Te(),qD=q(Oe()),ze(),Rb(),fo(),Hde=ae.button(jde||(jde=W([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),Gde=({layoutP:s})=>{let a=nr(s.graphEditorDims.isOpen),l=(0,qD.useCallback)(()=>{let d=(0,Vde.val)(s.graphEditorDims.isOpen);ue().transaction(({stateEditors:f})=>{f.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!d})})},[s]);return qD.default.createElement(Hde,N({onClick:l,title:"Toggle graph editor",className:a?"open":""},id("hide")),qD.default.createElement(yAe,null))},Wde=Gde}),Ju,xi,$de,Kde,Xde,qde,pd,Yde,Zde,Qde,Jde,ehe,the,nhe,rhe,ihe,Mh=P(()=>{df(),yn(),Tie(),Ju=Ft,xi=q(Oe()),ze(),WRe(),OD(),tDe(),kDe(),Wb(),Rre(),aie(),fo(),Tn(),ui(),ADe(),dh(),nv(),Kde=ae(cV)($de||($de=W([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Eb.sequenceEditorPanel),qde=ae.div(Xde||(Xde=W([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),pd=(()=>{let s={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},a=-1;for(let l of Object.keys(s))s[l]=a,a++;return s})(),Zde=ae(iV)(Yde||(Yde=W([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),Qde={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},Jde={width:800,height:200},ehe=s=>xi.default.createElement(rV,{panelId:"sequenceEditor",defaultPosition:Qde,minDims:Jde},xi.default.createElement(the,null)),the=()=>{let{dims:s}=Gb(),[a,l]=(0,xi.useState)(null);return XJ(a),Yn(()=>{let d=Ju.prism.memo("panelSize",()=>{let R=s.width,A=s.height;return{width:R,height:A,widthWithoutBorder:R-2,heightWithoutBorder:A-4,screenX:s.left,screenY:s.top}},[s]),f=Ro(cf().filter(R=>mt(R)||Rt(R)).map(R=>Rt(R)?R.sheet:R));if(Ro(f.map(R=>R.template)).length!==1)return xi.default.createElement(xi.default.Fragment,null);let g=f[0];if(!g)return xi.default.createElement(xi.default.Fragment,null);let b=hV("panelSizeP",d).pointer,_=Ju.prism.memo("key",()=>JSON.stringify(g.address),[g]),S=Ju.prism.memo("layout",()=>eDe(g,b),[g,b]).getValue();if((0,Ju.val)(S.tree.children).length===0)return xi.default.createElement(xi.default.Fragment,null);let C=Ju.prism.memo("containerRef",ihe,[]),I=(0,Ju.val)(S.graphEditorDims.isAvailable),O=(0,Ju.val)(S.graphEditorDims.isOpen);return xi.default.createElement(Kde,{ref:R=>{C(R),R!==a&&l(R)}},xi.default.createElement(qde,{style:{width:"".concat((0,Ju.val)(S.leftDims.width),"px")}}),xi.default.createElement(fse,{layoutP:S},xi.default.createElement(nhe,{layoutP:S}),xi.default.createElement(_ue,{key:_+"-dopeSheet",layoutP:S}),O&&xi.default.createElement(jle,{key:_+"-graphEditor",layoutP:S}),I&&xi.default.createElement(Wde,{layoutP:S}),xi.default.createElement(zde,{layoutP:S})))},[s,a])},nhe=({layoutP:s})=>Yn(()=>{let a=(0,Ju.val)(s.sheet);return xi.default.createElement(Zde,{style:{width:(0,Ju.val)(s.leftDims.width)}},xi.default.createElement(d4,null,xi.default.createElement(uf,null,a.address.sheetId," "),xi.default.createElement(nE,null,":",""),xi.default.createElement(uf,null,a.address.sheetInstanceId," "),xi.default.createElement(nE,null,"",">",""),xi.default.createElement(uf,null,"Sequence")))},[s]),rhe=ehe,ihe=()=>{let s=null,a={passive:!1,capture:!1},l=d=>{Math.abs(d.deltaY)<Math.abs(d.deltaX)&&(d.preventDefault(),d.stopPropagation())};return d=>{s!==d&&s&&s.removeEventListener("wheel",l,a),s=d,d&&d.addEventListener("wheel",l,a)}}}),Av,she,ohe,IDe=P(()=>{Dke(),eV(),Av=q(Oe()),Te(),yn(),K2e(),Mh(),she=()=>{let s=nr(ue().paneManager.allPanesD),a=Object.entries(s).map(([l,d])=>Av.default.createElement(Pie,{key:"pane-".concat(l),paneInstance:d}));return Av.default.createElement(Av.default.Fragment,null,a,Av.default.createElement(mY,null),Av.default.createElement(Tre,null),Av.default.createElement(rhe,null))},ohe=she}),ahe,lhe,uhe,RDe=P(()=>{ze(),AR(),lhe=ae(Vb)(ahe||(ahe=W([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),uhe=lhe}),DDe=$((s,a)=>{var l,d;l=[],d=[];function f(g,b,_){var S,C,I,O,R,A,F,L;if(g===b)return 0;if(S=g.length,C=b.length,S===0)return C;if(C===0)return S;for(_&&(g=g.toLowerCase(),b=b.toLowerCase()),F=0;F<S;)d[F]=g.charCodeAt(F),l[F]=++F;for(L=0;L<C;)for(I=b.charCodeAt(L),O=R=L++,F=-1;++F<S;)A=I===d[F]?R:R+1,R=l[F],l[F]=O=R>O?A>O?O+1:A:A>R?R+1:A;return O}a.exports=f}),ODe=$((s,a)=>{var l=DDe();function d(){var f,g,b,_,S,C=0,I=arguments[0],O=arguments[1],R=O.length,A=arguments[2];A&&(_=A.threshold,S=A.ignoreCase),_===void 0&&(_=0);for(var F=0;F<R;++F)S?g=l(I,O[F],!0):g=l(I,O[F]),g>I.length?f=1-g/O[F].length:f=1-g/I.length,f>C&&(C=f,b=O[F]);return C>=_?b:null}a.exports=d});function LDe(s,a,l="Did you mean ",d="?"){let f=(0,che.default)(s,a,{threshold:.7});return f?l+JSON.stringify(f)+d:""}var che,NDe=P(()=>{che=q(ODe())});function dhe(s,a){return s.length<=a?s:s.substr(0,a-3)+"..."}var FDe=P(()=>{}),hhe,Wj,phe=P(()=>{FDe(),hhe=s=>typeof s=="string"?'string("'.concat(dhe(s,10),'")'):typeof s=="number"?"number(".concat(dhe(String(s),10),")"):s===null?"null":s===void 0?"undefined":typeof s=="boolean"?String(s):Array.isArray(s)?"array":typeof s=="object"?"object":"unknown",Wj=hhe}),fhe,mhe,$j,ghe=P(()=>{ze(),Zg(),mhe=ae(ZX)(fhe||(fhe=W([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),$j=mhe}),i_,vhe,yhe,bhe,s_,dC=P(()=>{ze(),Ar(),i_=q(Oe()),DE(),GI(),Tne(),ghe(),yhe=ae.button(vhe||(vhe=W([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Cr,$j),bhe=i_.default.forwardRef((s,a)=>{var l=s,{title:d}=l,f=U(l,["title"]);let[g,b]=zb({enabled:typeof d=="string"},()=>i_.default.createElement(Wz,null,d));return i_.default.createElement(i_.default.Fragment,null,g,i_.default.createElement(yhe,N({ref:HI([b,a])},f))," ")}),s_=bhe}),_he,whe,xhe,She,Ehe,BDe=P(()=>{_he=q(Oe()),dC(),ze(),Ar(),xhe=ae(s_)(whe||(whe=W([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Cr),She=({config:s,testId:a})=>{var l;return _he.default.createElement(xhe,{onClick:s.onClick,"data-testid":a,title:s.title,dangerouslySetInnerHTML:{__html:(l=s.svgSource)!=null?l:""}})},Ehe=She});function UDe({value:s,label:a,icon:l,onClick:d,isSelected:f}){return o_.default.createElement(o_.default.Fragment,null,o_.default.createElement(s_,{forwardedAs:XX,className:f?"selected":void 0,"aria-label":a,onClick:d,title:a},l))}var o_,Che,Phe,zDe=P(()=>{o_=q(Oe()),Zg(),dC(),ghe(),Che=({value:s,onChange:a,options:l})=>o_.default.createElement($j,null,l.map(({label:d,icon:f,value:g})=>o_.default.createElement(UDe,{key:g,value:g,isSelected:s===g,label:d,icon:f,onClick:()=>a(g)}))),Phe=Che}),Kj,The,Mhe,khe,Ahe,VDe=P(()=>{Kj=q(Oe()),ze(),Ar(),zDe(),Mhe=ae.div(The||(The=W([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Cr),khe=({config:s})=>Kj.default.createElement(Phe,{onChange:s.onChange,options:s.options.map(({label:a,value:l,svgSource:d})=>({label:a,value:l,icon:Kj.default.createElement(Mhe,{dangerouslySetInnerHTML:{__html:d}})})),value:s.value}),Ahe=khe}),hC,Ihe,Rhe,Dhe,Ohe,jDe=P(()=>{hC=q(Oe()),ze(),Ar(),dC(),BJ(),Yc(),Rhe=ae.div(Ihe||(Ihe=W([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Cr),Dhe=({config:s})=>{let a=(0,hC.useRef)(null),l=qc(()=>{let d=a.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+s.label,constraints:{maxX:d.right,maxY:8,minX:d.left,minY:8},verticalGap:2}},()=>hC.default.createElement(_z,{items:s.items.map((d,f)=>({label:d.label,callback:()=>{var g;try{(g=d.onClick)==null||g.call(d)}catch(b){console.error(b)}}})),onRequestClose:()=>{l.close("clicked")}}));return hC.default.createElement(Rhe,null,l.node,hC.default.createElement(s_,{ref:a,onClick:d=>{l.open(d,a.current)}},s.label))},Ohe=Dhe});function HDe(s){return Xj[s]}var pC,Lhe,Xj,Nhe,Fhe,GDe=P(()=>{NDe(),phe(),pC=q(Oe()),BDe(),VDe(),jDe(),Lhe=s=>pC.default.createElement(pC.default.Fragment,null,s.config.map((a,l)=>pC.default.createElement(Nhe,{config:a,key:l}))),Xj={Icon:Ehe,Switch:Ahe,Flyout:Ohe},Nhe=({config:s})=>{let a=HDe(s.type);if(!a)throw new Error("No tool with tool.type ".concat(Wj(s.type)," exists. Did you mean ").concat(LDe(s.type,Object.keys(Xj))));return pC.default.createElement(a,{config:s})},Fhe=Lhe}),Bhe,fd,Uhe,zhe,Vhe,qj,jhe,Hhe,Yj,Ghe=P(()=>{Bhe=Ft,yn(),Te(),fd=q(Oe()),ze(),GDe(),zhe=ae.div(Uhe||(Uhe=W([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),qj=ae.div(Vhe||(Vhe=W([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),jhe=({extension:s,toolbarId:a})=>{var l;let d=(0,fd.useMemo)(()=>new Bhe.Atom([]),[]),f=(l=s.toolbars)==null?void 0:l[a];(0,fd.useLayoutEffect)(()=>{let b=f==null?void 0:f(d.set.bind(d),ue().publicApi);if(typeof b=="function")return b},[s,a,f]);let g=nr(d.prism);return fd.default.createElement(Fhe,{config:g})},Hhe=({toolbarId:s,showLeftDivider:a})=>{var l;let d=[],f=nr(ue().atomP.ephemeral.extensions.byId),g=!1;for(let[,b]of Object.entries(f))!b||!((l=b.toolbars)!=null&&l[s])||(d.push(fd.default.createElement(fd.default.Fragment,{key:"extensionToolbar-"+b.id},g?fd.default.createElement(qj,null):void 0,fd.default.createElement(jhe,{extension:b,toolbarId:s}))),g=!0);return d.length===0?null:fd.default.createElement(zhe,{"data-testid":"theatre-extensionToolbar-".concat(s)},a?fd.default.createElement(qj,null):void 0,d)},Yj=Hhe}),fC,Whe,$he,Khe,YD,WDe=P(()=>{ze(),fC=q(Oe()),dC(),$he=ae(s_)(Whe||(Whe=W([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:s})=>s?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:s})=>s?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),Khe=(0,fC.forwardRef)((s,a)=>{var l=s,{children:d,hint:f,pinned:g,icon:b,pinHintIcon:_,unpinHintIcon:S}=l,C=U(l,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[I,O]=(0,fC.useState)(!1),R=I||f;return fC.default.createElement($he,z(N({},C),{pinned:g,ref:a,onMouseOver:()=>O(!0),onMouseOut:()=>O(!1)}),fC.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},R&&!g?_:R&&g?S:b),d)}),YD=Khe});function $De(s){return Zj.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),Zj.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var Zj,Qj,KDe=P(()=>{Zj=q(Oe()),Qj=$De});function XDe(s){return Jj.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),Jj.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var Jj,e6,qDe=P(()=>{Jj=q(Oe()),e6=XDe}),Ss,Xhe,qhe,Yhe,t6,Zhe,Of,Qhe,Jhe,epe,tpe,npe,rpe,ipe,spe,ope,ZD,ape,lpe,n6,r6,upe,cpe,YDe=P(()=>{yn(),Te(),Ss=q(Oe()),ze(),qhe=ae.div(Xhe||(Xhe=W([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),t6=ae.div(Yhe||(Yhe=W([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Of=ae(t6)(Zhe||(Zhe=W([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),Jhe=ae(t6)(Qhe||(Qhe=W([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),tpe=ae.div(epe||(epe=W([`
  font-weight: 600;
`]))),rpe=ae.div(npe||(npe=W([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),spe=ae.div(ipe||(ipe=W([`
  margin-left: 2px;
`]))),ZD=ae.div(ope||(ope=W([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),lpe=ae.div(ape||(ape=W([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),n6="0.7.0",r6=n6.match(/^[^\-]+/)[0],upe=Ss.default.forwardRef((s,a)=>{let l=nr(ue().atomP.ahistoric.updateChecker.result.hasUpdates);return Ss.default.createElement(qhe,{ref:a},Ss.default.createElement(Of,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),Ss.default.createElement(Of,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),Ss.default.createElement(ZD,null),Ss.default.createElement(Of,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),Ss.default.createElement(Of,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),Ss.default.createElement(Of,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),Ss.default.createElement(ZD,null),Ss.default.createElement(Jhe,null,Ss.default.createElement(tpe,null,"Version"),Ss.default.createElement(rpe,null,Ss.default.createElement(spe,null,n6," ",l===!0?"(outdated)":l===!1?"(latest)":""))),l===!0&&Ss.default.createElement(Ss.default.Fragment,null,Ss.default.createElement(ZD,null),Ss.default.createElement(Of,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(r6)),className:"",target:"_blank"},"Update",Ss.default.createElement(lpe,null)),Ss.default.createElement(Of,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(r6)),className:"",target:"_blank"},"What's new?")))}),cpe=upe}),Zr,dpe,hpe,ppe,fpe,mpe,gpe,i6,vpe,s6,ype,o6,bpe,_pe,ZDe=P(()=>{yn(),Te(),Zr=q(Oe()),ze(),DE(),RDe(),AR(),dpe=Ft,Ghe(),WDe(),rE(),KDe(),qDe(),dC(),Yc(),YDe(),jE(),ppe=ae.div(hpe||(hpe=W([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),mpe=ae.div(fpe||(fpe=W([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),i6=ae.div(gpe||(gpe=W([`
  display: flex;
  gap: 8px;
`]))),s6=ae.div(vpe||(vpe=W([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:s})=>s==="info"?"#40aaa4":"#f59e0b"),ae.div(ype||(ype=W([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),o6=!1,bpe=()=>{var s,a,l;let d=Yn(()=>{let L=(0,dpe.val)(ue().atomP.ephemeral.coreByProject);return Object.entries(L).map(([V,H])=>({projectId:V,state:H})).filter(({state:V})=>V.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[f,g]=zb({enabled:d.length>0,enterDelay:d.length>0?0:200},()=>d.length>0?Zr.default.createElement(uhe,null,d.length===1?'There is a state conflict in project "'.concat(d[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(d.length," projects that have state conflicts. They are highlighted in the outline below. ")):Zr.default.createElement(Vb,null,Zr.default.createElement(Zr.default.Fragment,null,"Outline"))),b=(s=nr(ue().atomP.ahistoric.pinOutline))!=null?s:!0,_=(a=nr(ue().atomP.ahistoric.pinDetails))!=null?a:!0,S=nr(ue().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,C=qc(()=>{let L=I.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:L.right,maxY:8,minX:L.left-140,minY:8},verticalGap:2}},()=>Zr.default.createElement(cpe,null)),I=(0,Zr.useRef)(null),O=(0,Zr.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(o6||(o6=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),S||window.__IS_VISUAL_REGRESSION_TESTING?!0:S),[S]),{hasNotifications:R}=Xz(),[A,F]=qne();return Zr.default.createElement(ppe,null,Zr.default.createElement(i6,null,f,Zr.default.createElement(YD,{ref:g,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{ue().transaction(({stateEditors:L,drafts:V})=>{var H;L.studio.ahistoric.setPinOutline(!((H=V.ahistoric.pinOutline)==null||H))})},icon:Zr.default.createElement(p4,null),pinHintIcon:Zr.default.createElement(e6,null),unpinHintIcon:Zr.default.createElement(Qj,null),pinned:b}),d.length>0?Zr.default.createElement(mpe,null,d.length):null,Zr.default.createElement(Yj,{showLeftDivider:!0,toolbarId:"global"})),Zr.default.createElement(i6,null,A,Zr.default.createElement(YD,{ref:F,onClick:()=>{ue().transaction(({stateEditors:L,drafts:V})=>{var H;L.studio.ahistoric.setPinNotifications(!((H=V.ahistoric.pinNotifications)!=null&&H))})},icon:Zr.default.createElement(BI,null),pinHintIcon:Zr.default.createElement(BI,null),unpinHintIcon:Zr.default.createElement(BI,null),pinned:(l=nr(ue().atomP.ahistoric.pinNotifications))!=null?l:!1},R&&Zr.default.createElement(s6,{type:"warning"})),C.node,Zr.default.createElement(s_,{ref:I,onClick:L=>{C.toggle(L,I.current)}},Zr.default.createElement(fq,null),O&&Zr.default.createElement(s6,{type:"info"})),Zr.default.createElement(YD,{ref:g,onClick:()=>{ue().transaction(({stateEditors:L,drafts:V})=>{var H;L.studio.ahistoric.setPinDetails(!((H=V.ahistoric.pinDetails)==null||H))})},icon:Zr.default.createElement(pq,null),pinHintIcon:Zr.default.createElement(Qj,null),unpinHintIcon:Zr.default.createElement(e6,null),pinned:_})))},_pe=bpe}),wpe,mC,xpe,gC,Spe,Epe,Cpe,Ppe,Tpe=P(()=>{wpe=Ft,yn(),mC=q(Oe()),xpe=q(Ou()),gC=new wpe.Atom({set:{},byId:{}}),Spe=1,Epe=()=>{let s=Spe++;function a(d,f,g){gC.reduce(b=>({byId:z(N({},b.byId),{[s]:{comp:d,props:f,portalNode:g}}),set:z(N({},b.set),{[s]:!0})}))}function l(){gC.reduce(d=>{let f=N({},d.set),g=N({},d.byId);return delete f[s],{byId:g,set:f}})}return{mountOrRender:a,unmount:l}},Cpe=()=>{let s=Object.keys(nr(gC.pointer.set));return mC.default.createElement(mC.default.Fragment,null,s.map(a=>mC.default.createElement(Ppe,{key:"id-"+a,id:a})))},Ppe=({id:s})=>{let{comp:a,portalNode:l,props:d}=nr(gC.pointer.byId[s]);return(0,xpe.createPortal)(mC.default.createElement(a,N({},d)),l)}});function QDe(s){let a=ue(),[l,d]=br(void 0),f=wue();f.configureLogging({min:128,dev:l6,internal:l6});let g=f.getLogger().named("Theatre.js UIRoot");_De();let b=nr(a.atomP.ahistoric.visibilityState);return(0,vo.useEffect)(()=>(b==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[b]),Yn(()=>{let _=(0,a6.val)(a.atomP.ahistoric.visibilityState);return(0,a6.val)(a.atomP.ephemeral.initialised)?vo.default.createElement(IY,{logger:g},vo.default.createElement(Dte,null,vo.default.createElement(Bke,null,vo.default.createElement(Dpe,null),vo.default.createElement(xb.Provider,{value:d},vo.default.createElement(c4,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:s.containerShadow},vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(kpe,null),vo.default.createElement(Ipe,{className:_==="everythingIsHidden"?"invisible":""},vo.default.createElement(u4,{ref:l}),vo.default.createElement(_pe,null),vo.default.createElement(ohe,null),vo.default.createElement(Yne,null)))))))):null},[a,l,d])}var a6,vo,Mpe,kpe,Ape,Ipe,Rpe,l6,Dpe,JDe=P(()=>{Te(),yn(),a6=Ft,vo=q(Oe()),ze(),IDe(),ZDe(),kr(),Zg(),Vj(),al(),Ote(),L4(),Tpe(),Ar(),FD(),pf(),jE(),kpe=typeof window<"u"?Ul(Mpe||(Mpe=W([`
  :host {
    contain: strict;
  }
`]))):{},Ipe=ae(AY)(Ape||(Ape=W([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),l6=/Playground.+Theatre\.js/.test((Rpe=typeof document<"u"?document==null?void 0:document.title:null)!=null?Rpe:""),Dpe=()=>vo.default.createElement(Cpe,null)}),eOe=$(s=>{var a=Ou();s.createRoot=a.createRoot,s.hydrateRoot=a.hydrateRoot}),Ope={};Q(Ope,{default:()=>Fpe});var Lpe,Npe,Fpe,tOe=P(()=>{JDe(),Lpe=q(Oe()),Npe=q(eOe()),Tpe(),Ar(),Ghe(),Fpe=class{constructor(){pe(this,"containerEl",document.createElement("div")),pe(this,"_renderTimeout"),pe(this,"_documentBodyUIIsRenderedIn"),pe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let s=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let a=document.createElement("div");return a.id="theatrejs-faux-shadow-root",document.body.appendChild(a),a}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=s()}render(){let s=()=>{if(!document.body){this._renderTimeout=setTimeout(s,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),Npe.default.createRoot(this.containerShadow).render(Lpe.default.createElement(QDe,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(s,10)}renderToolset(s,a){let l=Epe();return l.mountOrRender(oke(Yj),{toolbarId:s},a),l.unmount}}}),nOe=$(s=>{s.compare=f,s.reduce=g;var a,l,d;s.REMOVE=a=-1,s.ADD=l=1,s.EQUAL=d=0;function f(I,O){var R=I.length,A=O.length,F=b(I,O),L=F<R&&F<A?_(I,O):0,V=L+F-1;R-=V,A-=V;for(var H=C(R,A),K=R-1;K>=0;--K)for(var Z=A-1;Z>=0;--Z)H[Z][K]=S(H,I,O,F,K,Z);return{prefix:F,matrix:H,suffix:L}}function g(I,O,R){var A,F,L,V,H=R.matrix,K=R.prefix;for(A=0;A<K;++A)O=I(O,d,A,A);for(L=A,K=H.length,A=0,F=0;A<K;)switch(V=H[A][F].type,O=I(O,V,A+L,F+L),V){case d:++A,++F;break;case a:++F;break;case l:++A;break}for(A+=L,F+=L,K=R.suffix,L=0;L<K;++L)O=I(O,d,A+L,F+L);return O}function b(I,O){for(var R=0,A=Math.min(I.length,O.length);R<A&&I[R]===O[R];)++R;return R}function _(I,O){for(var R=I.length-1,A=O.length-1,F=Math.min(R,A),L=0;L<F&&I[R-L]===O[A-L];)++L;return L}function S(I,O,R,A,F,L){return O[F+A]===R[L+A]?{value:I[L+1][F+1].value,type:d}:I[L][F+1].value<I[L+1][F].value?{value:I[L][F+1].value+1,type:a}:{value:I[L+1][F].value+1,type:l}}function C(I,O){var R=[],A,F,L;for(L=R[O]=[],F=0;F<I;++F)L[F]={value:I-F,type:a};for(A=0;A<O;++A)R[A]=[],R[A][I]={value:O-A,type:l};return R[O][I]={value:0,type:d},R}}),Bpe=$(s=>{s.cons=a,s.tail=l,s.map=d;function a(f,g){var b=g.length,_=new Array(b+1);_[0]=f;for(var S=0;S<b;++S)_[S+1]=g[S];return _}function l(f){for(var g=f.length-1,b=new Array(g),_=0;_<g;++_)b[_]=f[_+1];return b}function d(f,g){for(var b=new Array(g.length),_=0;_<g.length;++_)b[_]=f(g[_]);return b}}),rOe=$((s,a)=>{a.exports=b;var l=/\/|~1|~0/g,d="/",f="~",g="~1";function b(_,S){var C,I,O,R;for(C=_.charAt(0)===d?1:0,I="",l.lastIndex=C;O=l.exec(_);)if(R=O[0],I+=_.slice(C,l.lastIndex-R.length),C=l.lastIndex,R===d){if(S(I)===!1)return _;I=""}else I+=R===g?d:f;return I+=_.slice(C),S(I),_}}),u6=$(s=>{var a=rOe();s.find=I,s.join=R,s.absolute=O,s.parse=A,s.contains=F,s.encodeSegment=V,s.decodeSegment=L,s.parseArrayIndex=Z,s.isValidArrayIndex=K;var l="/",d=/\//g,f="~1",g=/~1/g,b="~",_=/~/g,S="~0",C=/~0/g;function I(ne,le,Ce,ve){if(typeof le=="string"){if(le==="")return{target:ne,key:void 0};if(le===l)return{target:ne,key:""};var we=ne,De,rt=ve!==void 0;return a(le,function(ce){if(ne==null)return we=null,!1;Array.isArray(ne)?De=rt?re(Ce,Z(ce),ne,ve):ce==="-"?ce:Z(ce):De=ce,we=ne,ne=ne[De]}),we===null?void 0:{target:we,key:De}}}function O(ne){return ne[0]===l?ne:l+ne}function R(ne){return ne.join(l)}function A(ne){var le=[];return a(ne,le.push.bind(le)),le}function F(ne,le){return le.indexOf(ne)===0&&le[ne.length]===l}function L(ne){return ne.replace(g,l).replace(C,b)}function V(ne){return ne.replace(_,S).replace(d,f)}var H=/^(0|[1-9]\d*)$/;function K(ne){return H.test(ne)}function Z(ne){if(K(ne))return+ne;throw new SyntaxError("invalid array index "+ne)}function re(ne,le,Ce,ve){var we=le;if(we<0)throw new Error("array index out of bounds "+we);if(ve!==void 0&&typeof ne=="function"&&(we=ne(le,Ce,ve),we<0))throw new Error("could not find patch context "+ve);return we}}),Upe=$((s,a)=>{a.exports=l;function l(g){return g==null||typeof g!="object"?g:Array.isArray(g)?d(g):f(g)}function d(g){for(var b=g.length,_=new Array(b),S=0;S<b;++S)_[S]=l(g[S]);return _}function f(g){for(var b=Object.keys(g),_={},S,C=0,I=b.length;C<I;++C)S=b[C],_[S]=l(g[S]);return _}}),iOe=$((s,a)=>{a.exports=l;function l(g,b){return g===b?!0:Array.isArray(g)&&Array.isArray(b)?d(g,b):typeof g=="object"&&typeof b=="object"?f(g,b):!1}function d(g,b){if(g.length!==b.length)return!1;for(var _=0;_<g.length;++_)if(!l(g[_],b[_]))return!1;return!0}function f(g,b){if(g===null&&b!==null||g!==null&&b===null)return!1;var _=Object.keys(g),S=Object.keys(b);if(_.length!==S.length)return!1;for(var C=0,I;C<_.length;++C)if(I=_[C],!(I in b&&l(g[I],b[I])))return!1;return!0}}),sOe=$((s,a)=>{var l=u6();a.exports=function(I,O){var R=l.parse(I.path),A=l.parse(O.path),F=S(R,A),L=g(R,A,F.length),V=C(I),H=C(O);return F.length===0&&!L?[H,V]:L?f(V,R,H,A):d(V,R,H)};function d(I,O,R,A){if(I.path===R.path)throw new TypeError("cannot commute "+I.op+","+R.op+" with identical object paths");return[R,I]}function f(I,O,R,A){return O.length===A.length?b(I,O,R,A):(O.length>A.length?(O=_(R,A,I,O,-1),I.path=l.absolute(l.join(O))):(A=_(I,O,R,A,1),R.path=l.absolute(l.join(A))),[R,I])}function g(I,O,R){return l.isValidArrayIndex(I[R])&&l.isValidArrayIndex(O[R])}function b(I,O,R,A){var F=O.length-1,L=+O[F],V=+A[F],H;return L<V?I.op==="add"||I.op==="copy"?(H=A.slice(),H[F]=Math.max(0,V-1),R.path=l.absolute(l.join(H))):I.op==="remove"&&(H=A.slice(),H[F]=V+1,R.path=l.absolute(l.join(H))):R.op==="add"||R.op==="copy"?(H=O.slice(),H[F]=L+1,I.path=l.absolute(l.join(H))):L>V&&R.op==="remove"&&(H=O.slice(),H[F]=Math.max(0,L-1),I.path=l.absolute(l.join(H))),[R,I]}function _(I,O,R,A,F){var L=O.length-1,V=+O[L],H=+A[L],K=A.slice();return V>H||(I.op==="add"||I.op==="copy"?K[L]=Math.max(0,H-F):I.op==="remove"&&(K[L]=Math.max(0,H+F))),K}function S(I,O){var R=I.length,A=O.length;if(R===0||A===0||R<2&&A<2)return[];for(var F=R===A?R-1:Math.min(R,A),L=0;L<F&&I[L]===O[L];)++L;return I.slice(0,L)}function C(I){return I.op==="remove"?{op:I.op,path:I.path}:I.op==="copy"||I.op==="move"?{op:I.op,path:I.path,from:I.from}:{op:I.op,path:I.path,value:I.value}}}),zpe=$((s,a)=>{a.exports=l;function l(d){Error.call(this),this.name=this.constructor.name,this.message=d,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),c6=$((s,a)=>{a.exports=l;function l(d){Error.call(this),this.name=this.constructor.name,this.message=d,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),Vpe=$((s,a)=>{a.exports=l;function l(d){Error.call(this),this.name=this.constructor.name,this.message=d,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),jpe=$(s=>{var a=u6(),l=Upe(),d=iOe(),f=sOe(),g=Bpe(),b=zpe(),_=c6(),S=Vpe(),C=a.find,I=a.parseArrayIndex;s.test={apply:O,inverse:R,commute:A},s.add={apply:F,inverse:V,commute:H},s.remove={apply:ne,inverse:Ce,commute:ve},s.replace={apply:K,inverse:Z,commute:re},s.move={apply:we,inverse:De,commute:rt},s.copy={apply:ce,inverse:Re,commute:H};function O(Me,ke,He){var xt=C(Me,ke.path,He.findContext,ke.context),de=xt.target,ge,Je;if(Array.isArray(de)?(ge=I(xt.key),Je=de[ge]):Je=xt.key===void 0?xt.target:xt.target[xt.key],!d(Je,ke.value))throw new b("test failed "+JSON.stringify(ke));return Me}function R(Me,ke){return Me.push(ke),1}function A(Me,ke){if(Me.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return ke.op==="test"||ke.op==="replace"?[ke,Me]:f(Me,ke)}function F(Me,ke,He){var xt=C(Me,ke.path,He.findContext,ke.context);if(J(xt))throw new _("path does not exist "+ke.path);if(ke.value===void 0)throw new _("missing value");var de=l(ke.value);return xt.key===void 0?de:(L(xt,de),Me)}function L(Me,ke){var He=Me.target;if(Array.isArray(He))if(Me.key==="-")He.push(ke);else{if(Me.key>He.length)throw new _("target of add outside of array bounds");He.splice(Me.key,0,ke)}else if(Ot(He))He[Me.key]=ke;else throw new _("target of add must be an object or array "+Me.key)}function V(Me,ke){var He=ke.context;return He!==void 0&&(He={before:He.before,after:g.cons(ke.value,He.after)}),Me.push({op:"test",path:ke.path,value:ke.value,context:He}),Me.push({op:"remove",path:ke.path,context:He}),1}function H(Me,ke){if(Me.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return f(Me,ke)}function K(Me,ke,He){var xt=C(Me,ke.path,He.findContext,ke.context);if(J(xt)||Ve(xt))throw new _("path does not exist "+ke.path);if(ke.value===void 0)throw new _("missing value");var de=l(ke.value);if(xt.key===void 0)return de;var ge=xt.target;return Array.isArray(ge)?ge[I(xt.key)]=de:ge[xt.key]=de,Me}function Z(Me,ke,He,xt){var de=xt[He-1];if(de===void 0||de.op!=="test"||de.path!==ke.path)throw new S("cannot invert replace w/o test");var ge=de.context;return ge!==void 0&&(ge={before:ge.before,after:g.cons(de.value,g.tail(ge.after))}),Me.push({op:"test",path:de.path,value:ke.value}),Me.push({op:"replace",path:de.path,value:de.value}),2}function re(Me,ke){if(Me.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return ke.op==="test"||ke.op==="replace"?[ke,Me]:f(Me,ke)}function ne(Me,ke,He){var xt=C(Me,ke.path,He.findContext,ke.context);if(J(xt)||xt.target[xt.key]===void 0)throw new _("path does not exist "+ke.path);return le(xt),Me}function le(Me){var ke=Me.target,He;if(Array.isArray(ke))return He=ke.splice(I(Me.key),1),He[0];if(Ot(ke))return He=ke[Me.key],delete ke[Me.key],He;throw new _("target of remove must be an object or array")}function Ce(Me,ke,He,xt){var de=xt[He-1];if(de===void 0||de.op!=="test"||de.path!==ke.path)throw new S("cannot invert remove w/o test");var ge=de.context;return ge!==void 0&&(ge={before:ge.before,after:g.tail(ge.after)}),Me.push({op:"add",path:de.path,value:de.value,context:ge}),2}function ve(Me,ke){return Me.path===ke.path&&ke.op==="remove"?[ke,Me]:f(Me,ke)}function we(Me,ke,He){if(a.contains(ke.path,ke.from))throw new _("move.from cannot be ancestor of move.path");var xt=C(Me,ke.path,He.findContext,ke.context),de=C(Me,ke.from,He.findContext,ke.fromContext);return L(xt,le(de)),Me}function De(Me,ke){return Me.push({op:"move",path:ke.from,context:ke.fromContext,from:ke.path,fromContext:ke.context}),1}function rt(Me,ke){if(Me.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return f(Me,ke)}function ce(Me,ke,He){var xt=C(Me,ke.path,He.findContext,ke.context),de=C(Me,ke.from,He.findContext,ke.fromContext);if(J(de)||Ve(de))throw new _("copy.from must exist");var ge=de.target,Je;return Array.isArray(ge)?Je=ge[I(de.key)]:Je=ge[de.key],L(xt,l(Je)),Me}function Re(Me,ke){throw new S("cannot invert "+ke.op)}function J(Me){return Me===void 0||Me.target==null&&Me.key!==void 0}function Ve(Me){return Me.key!==void 0&&Me.target[Me.key]===void 0}function Ot(Me){return Me!==null&&typeof Me=="object"}}),oOe=$(s=>{var a=jpe(),l=Upe(),d=c6();s.apply=g,s.applyInPlace=b,s.clone=l,s.isValidObject=S,s.defaultHash=_;var f={};function g(I,O,R){return b(I,l(O),R)}function b(I,O,R){if(R||(R=f),!Array.isArray(I))return O;for(var A,F,L=0;L<I.length;++L){if(F=I[L],A=a[F.op],A===void 0)throw new d("invalid op "+JSON.stringify(F));O=A.apply(O,F,R)}return O}function _(I){return S(I)||C(I)?JSON.stringify(I):I}function S(I){return I!==null&&Object.prototype.toString.call(I)==="[object Object]"}function C(I){return Object.prototype.toString.call(I)==="[object Array]"}}),aOe=$((s,a)=>{var l=jpe();a.exports=function(f){var g=[],b,_;for(b=f.length-1;b>=0;b-=_)_=d(g,f[b],b,f);return g};function d(f,g,b,_){var S=l[g.op];return S!==void 0&&typeof S.inverse=="function"?S.inverse(f,g,b,_):1}}),lOe=$(s=>{var a=nOe(),l=Bpe(),d=oOe(),f=aOe(),g=u6(),b=g.encodeSegment;s.diff=C,s.patch=d.apply,s.patchInPlace=d.applyInPlace,s.inverse=f,s.clone=d.clone,s.InvalidPatchOperationError=c6(),s.TestFailedError=zpe(),s.PatchNotInvertibleError=Vpe();var _=d.isValidObject,S=d.defaultHash;function C(Z,re,ne){return O(Z,re,"",I(ne,[])).patch}function I(Z,re){return typeof Z=="object"?{patch:re,hash:V(K,Z.hash,S),makeContext:V(K,Z.makeContext,H),invertible:Z.invertible!==!1}:{patch:re,hash:V(K,Z,S),makeContext:H,invertible:!0}}function O(Z,re,ne,le){return Array.isArray(Z)&&Array.isArray(re)?A(Z,re,ne,le):_(Z)&&_(re)?R(Z,re,ne,le):L(Z,re,ne,le)}function R(Z,re,ne,le){var Ce=Object.keys(re),ve=le.patch,we,De;for(we=Ce.length-1;we>=0;--we){De=Ce[we];var rt=ne+"/"+b(De);Z[De]!==void 0?O(Z[De],re[De],rt,le):ve.push({op:"add",path:rt,value:re[De]})}for(Ce=Object.keys(Z),we=Ce.length-1;we>=0;--we)if(De=Ce[we],re[De]===void 0){var ce=ne+"/"+b(De);le.invertible&&ve.push({op:"test",path:ce,value:Z[De]}),ve.push({op:"remove",path:ce})}return le}function A(Z,re,ne,le){var Ce=l.map(le.hash,Z),ve=l.map(le.hash,re),we=a.compare(Ce,ve);return F(Z,re,ne,le,we)}function F(Z,re,ne,le,Ce){var ve=0;return a.reduce(function(we,De,rt,ce){var Re,J,Ve=we.patch,Ot=ne+"/"+(ce+ve);return De===a.REMOVE?(Re=Ve[Ve.length-1],J=we.makeContext(ce,Z),we.invertible&&Ve.push({op:"test",path:Ot,value:Z[ce],context:J}),Re!==void 0&&Re.op==="add"&&Re.path===Ot?(Re.op="replace",Re.context=J):Ve.push({op:"remove",path:Ot,context:J}),ve-=1):De===a.ADD?(Ve.push({op:"add",path:Ot,value:re[rt],context:we.makeContext(ce,Z)}),ve+=1):O(Z[ce],re[rt],Ot,we),we},le,Ce)}function L(Z,re,ne,le){return Z!==re&&(le.invertible&&le.patch.push({op:"test",path:ne,value:Z}),le.patch.push({op:"replace",path:ne,value:re})),le}function V(Z,re,ne){return Z(re)?re:ne}function H(){}function K(Z){return typeof Z=="function"}}),Iv=$((s,a)=>{function l(d,f){for(var g=0,b=f.length-1;g<b;g++){if(!d[f[g]])return null;d=d[f[g]]}return d}a.exports=l}),Lf=$((s,a)=>{function l(f){return f==="~0"?"~":"/"}function d(f){var g=f.split("/");if(f.indexOf("~")===-1)return g;for(var b=0,_=g.length;b<_;b++)g[b].indexOf("~")!==-1&&(g[b]=g[b].replace(/~[01]/g,l));return g}a.exports=d}),uOe=$((s,a)=>{var l=Iv(),d=Lf();function f(g,b){var _=d(b),S=_[_.length-1],C=l(g,_);return C?C[S]:void 0}a.exports=f}),QD=$((s,a)=>{function l(d,f){if(d===f)return!0;if(!(d&&f)||typeof d!="object"||typeof f!="object"||d.length!==f.length)return!1;if(Array.isArray(d)){if(!Array.isArray(f))return!1;for(var g=0,b=d.length;g<b;g++)if(!l(d[g],f[g]))return!1;return!0}var _=Object.keys(d);if(_.length!==Object.keys(f).length)return!1;for(var S=0,C=_.length;S<C;S++){var I=_[S];if(!l(d[I],f[I]))return!1}return!0}a.exports=l}),JD=$((s,a)=>{function l(d,f){if(f==="-")return d.length;for(var g=0,b=f.length;g<b;g++){var _=f.charCodeAt(g);if(57<_||_<48)return 1/0}return+f}a.exports=l}),eO=$((s,a)=>{var l=QD(),d=Iv(),f=JD(),g=Lf();function b(_,S,C,I){if(typeof C>"u")return"[op:add] require value, but got undefined";var O=g(S),R=O[O.length-1],A=d(_,O);if(A===null)return"[op:add] path not found: "+S;if(Array.isArray(A)){var F=f(A,R);if(A.length<F)return"[op:add] invalid array index: "+S;I(_,O).splice(F,0,C)}else l(A[R],C)||(I(_,O)[R]=C)}a.exports=b}),Hpe=$((s,a)=>{var l=Iv(),d=JD(),f=Lf();function g(b,_,S){var C=f(_),I=C[C.length-1],O=l(b,C);if(O===null)return"[op:remove] path not found: "+_;if(Array.isArray(O)){var R=d(O,I);if(O.length<=R)return"[op:remove] invalid array index: "+_;S(b,C).splice(R,1)}else delete S(b,C)[I]}a.exports=g}),Gpe=$((s,a)=>{var l=QD(),d=Iv(),f=JD(),g=Lf();function b(_,S,C,I){if(typeof C>"u")return"[op:replace] require value, but got undefined";var O=g(S),R=O[O.length-1],A=d(_,O);if(A===null)return"[op:replace] path not found: "+S;if(Array.isArray(A)){var F=f(A,R);if(A.length<=F)return"[op:replace] invalid array index: "+S;l(A[F],C)||I(_,O).splice(F,1,C)}else l(A[R],C)||(I(_,O)[R]=C)}a.exports=b}),Wpe=$((s,a)=>{var l=eO(),d=Iv(),f=JD(),g=Lf();function b(_,S,C,I){if(C!==S){var O=g(S),R=O[O.length-1],A=d(_,O);if(A===null)return"[op:move] path not found: "+S;var F=void 0;if(Array.isArray(A)){var L=f(A,R);if(A.length<=L)return"[op:move] invalid array index: "+C;F=A[L],I(_,O).splice(L,1)}else F=A[R],delete I(_,O)[R];return l(_,C,F,I)}}a.exports=b}),$pe=$((s,a)=>{var l=Iv(),d=Lf(),f=eO();function g(b,_,S,C){var I=d(_),O=I[I.length-1],R=l(b,I);return R===null?"[op:copy] path not found: "+_:f(b,S,R[O],C)}a.exports=g}),Kpe=$((s,a)=>{var l=QD(),d=Iv(),f=Lf();function g(b,_,S){var C=f(_),I=C[C.length-1],O=d(b,C);if(O===null)return"[op:test] path not found: "+_;if(!l(O[I],S)){var R=JSON.stringify(O[I]),A=JSON.stringify(S);return"[op:test] not matched: "+R+" "+A}}a.exports=g}),d6=$((s,a)=>{function l(d){if(!d||typeof d!="object")return d;if(Array.isArray(d)){for(var f=d.length,g=new Array(f),b=0;b<f;b++)g[b]=d[b];return g}for(var _=Object.keys(d),S={},C=0,I=_.length;C<I;C++){var O=_[C];S[O]=d[O]}return S}a.exports=l}),cOe=$((s,a)=>{var l=uOe(),d=eO(),f=Hpe(),g=Gpe(),b=Wpe(),_=$pe(),S=Kpe(),C=QD(),I=d6(),O=Lf();function R(A,F){return{get:function(L){return l(A,L)},add:function(L,V){return d(A,L,V,F)},remove:function(L){return f(A,L,F)},replace:function(L,V){return g(A,L,V,F)},move:function(L,V){return b(A,L,V,F)},copy:function(L,V){return _(A,L,V,F)},test:function(L,V){return S(A,L,V)},deepEqual:C,shallowCopy:I,toKeys:O}}a.exports=R}),dOe=$((s,a)=>{function l(d,f,g,b){return b.error=g,b.partial?f[""]:d}a.exports=l}),hOe=$((s,a)=>{function l(d){return!!d}a.exports=l}),pOe=$((s,a)=>{function l(d){if(d)throw new TypeError(d)}a.exports=l}),fOe=$((s,a)=>{var l=d6();function d(f,g){for(var b=0,_=g.length-1;b<_;b++)f=f[g[b]]=l(f[g[b]]);return f}a.exports=d}),mOe=$((s,a)=>{var l=d6();function d(g,b,_){var S=g[b];return _.has(S)||(S=l(S),_.add(S)),S}function f(g,b,_){for(var S=0,C=b.length-1;S<C;S++)g=g[b[S]]=d(g,b[S],_);return g}a.exports=f}),gOe=$((s,a)=>{var l=cOe(),d=dOe(),f=hOe(),g=pOe(),b=fOe(),_=mOe(),S=eO(),C=Hpe(),I=Gpe(),O=Wpe(),R=$pe(),A=Kpe(),F=Set||function(){var V=[];return V.has=function(H){return this.indexOf(H)!==-1},V.add=function(H){this.push(H)},V};function L(V,H,K){if(H.length===0)return V;K=K||{};for(var Z=K.strict?g:f,re=H.length===1?b:function(De){return function(rt,ce){return _(rt,ce,De)}}(new F),ne={"":V},le,Ce=0,ve=H.length;Ce<ve;Ce++){var we=H[Ce];switch(we.op){case"add":if(Z(S(ne,""+we.path,we.value,re)))return d(V,ne,we,K);break;case"remove":if(Z(C(ne,""+we.path,re)))return d(V,ne,we,K);break;case"replace":if(Z(I(ne,""+we.path,we.value,re)))return d(V,ne,we,K);break;case"move":if(Z(O(ne,""+we.from,""+we.path,re)))return d(V,ne,we,K);break;case"copy":if(Z(R(ne,""+we.from,""+we.path,re)))return d(V,ne,we,K);break;case"test":if(Z(A(ne,""+we.path,we.value)))return d(V,ne,we,K);break;default:if(K.custom&&K.custom[we.op]){if(le=le||l(ne,re),Z(K.custom[we.op](le,we,Ce,H)))return d(V,ne,we,K)}else return Z("[op:"+we.op+"] unknown"),d(V,ne,we,K);break}}return ne[""]}a.exports=L}),vOe=$((s,a)=>{a.exports=gOe()}),yOe=$((s,a)=>{(function(l,d){typeof s=="object"&&typeof a=="object"?a.exports=d():typeof s=="object"?s.blobCompare=d():l.blobCompare=d()})(window,function(){return function(l){var d={};function f(g){if(d[g])return d[g].exports;var b=d[g]={i:g,l:!1,exports:{}};return l[g].call(b.exports,b,b.exports,f),b.l=!0,b.exports}return f.m=l,f.c=d,f.d=function(g,b,_){f.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:_})},f.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},f.t=function(g,b){if(1&b&&(g=f(g)),8&b||4&b&&typeof g=="object"&&g&&g.__esModule)return g;var _=Object.create(null);if(f.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:g}),2&b&&typeof g!="string")for(var S in g)f.d(_,S,(function(C){return g[C]}).bind(null,S));return _},f.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(b,"a",b),b},f.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},f.p="",f(f.s=4)}([function(l,d,f){var g=function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(R,A){var F=[],L=!0,V=!1,H=void 0;try{for(var K,Z=R[Symbol.iterator]();!(L=(K=Z.next()).done)&&(F.push(K.value),!A||F.length!==A);L=!0);}catch(re){V=!0,H=re}finally{try{!L&&Z.return&&Z.return()}finally{if(V)throw H}}return F}(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b=function(){function I(O,R){for(var A=0;A<R.length;A++){var F=R[A];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(O,F.key,F)}}return function(O,R,A){return R&&I(O.prototype,R),A&&I(O,A),O}}();function _(I){if(Array.isArray(I)){for(var O=0,R=Array(I.length);O<I.length;O++)R[O]=I[O];return R}return Array.from(I)}var S=f(2),C=function(I){function O(R){(function(F,L){if(!(F instanceof L))throw new TypeError("Cannot call a class as a function")})(this,O);var A=function(F,L){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?F:L}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return A._messageId=1,A._messages=new Map,A._worker=R,A._worker.onmessage=A._onMessage.bind(A),A._id=Math.ceil(1e7*Math.random()),A}return function(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);R.prototype=Object.create(A&&A.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(R,A):R.__proto__=A)}(O,I),b(O,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(R){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,F=this,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=arguments[3];return new Promise(function(H,K){var Z=F._messageId++;F._messages.set(Z,[H,K,V]),F._worker.postMessage([Z,A,R],L||[])})}},{key:"postMessage",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,A=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=arguments[2];return new Promise(function(V,H){var K=A._messageId++;A._messages.set(K,[V,H,L]),A._worker.postMessage([K,R],F||[])})}},{key:"emit",value:function(R){for(var A=arguments.length,F=Array(A>1?A-1:0),L=1;L<A;L++)F[L-1]=arguments[L];this._worker.postMessage({eventName:R,args:F})}},{key:"_onMessage",value:function(R){var A;if(!Array.isArray(R.data)&&R.data.eventName)return(A=function K(Z,re,ne){Z===null&&(Z=Function.prototype);var le=Object.getOwnPropertyDescriptor(Z,re);if(le===void 0){var Ce=Object.getPrototypeOf(Z);return Ce===null?void 0:K(Ce,re,ne)}if("value"in le)return le.value;var ve=le.get;return ve!==void 0?ve.call(ne):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this)).call.apply(A,[this,R.data.eventName].concat(_(R.data.args)));var F,L=(F=R.data,Array.isArray(F)?F:Array.from(F)),V=L[0],H=L.slice(1);if(V===1)this._onEvent.apply(this,_(H));else{if(V!==0)throw new Error("Wrong message type '"+V+"'");this._onResult.apply(this,_(H))}}},{key:"_onResult",value:function(R,A,F){var L=this._messages.get(R),V=g(L,2),H=V[0],K=V[1];return this._messages.delete(R),A===1?H(F):K(F)}},{key:"_onEvent",value:function(R,A,F){var L=this._messages.get(R),V=g(L,3)[2];V&&V(A,F)}}]),O}(S);l.exports=C},function(l,d,f){l.exports=function(){return f(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(l,d,f){var g=function(){function _(S,C){for(var I=0;I<C.length;I++){var O=C[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,C,I){return C&&_(S.prototype,C),I&&_(S,I),S}}(),b=function(){function _(){(function(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")})(this,_),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return g(_,[{key:"emit",value:function(S){if(!this.__listeners[S])return this;for(var C=arguments.length,I=Array(C>1?C-1:0),O=1;O<C;O++)I[O-1]=arguments[O];var R=!0,A=!1,F=void 0;try{for(var L,V=this.__listeners[S][Symbol.iterator]();!(R=(L=V.next()).done);R=!0){var H=L.value;H.apply(void 0,I)}}catch(K){A=!0,F=K}finally{try{!R&&V.return&&V.return()}finally{if(A)throw F}}return this}},{key:"once",value:function(S,C){var I=this,O=function R(){I.off(S,R),C.apply(void 0,arguments)};return this.on(S,O)}},{key:"on",value:function(S,C){return this.__listeners[S]||(this.__listeners[S]=[]),this.__listeners[S].push(C),this}},{key:"off",value:function(S,C){return this.__listeners[S]=C?this.__listeners[S].filter(function(I){return I!==C}):[],this}}]),_}();l.exports=b},function(l,d,f){var g=window.URL||window.webkitURL;l.exports=function(b,_){try{try{var S;try{(S=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(b),S=S.getBlob()}catch{S=new Blob([b])}return new Worker(g.createObjectURL(S))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(b))}}catch{if(!_)throw Error("Inline worker is not supported");return new Worker(_)}}},function(l,d,f){f.r(d);var g=f(0),b=f.n(g),_=f(1),S=f.n(_);f.d(d,"workersEnabled",function(){return C}),f.d(d,"default",function(){return I});let C=!!window.Worker;class I{static toBinaryStringWithWorker(R,A){return he(this,null,function*(){let F=new b.a(new S.a),L=yield F.exec("binary",{blob:R,chunk:A});return F.terminate(),L})}static toBinaryStringWithoutWorker(R,A){return function(F,L){return new Promise((V,H)=>{let K=new FileReader,Z=L?Math.min(L,F.size):F.size,re=F.slice(0,Z);K.onload=()=>V(K.result),K.onerror=H,K.readAsBinaryString(re)})}(R,A)}static toBinaryString(R,A,F=!0){return F&&C?this.toBinaryStringWithWorker(R,A):this.toBinaryStringWithoutWorker(R,A)}static toArrayBufferWithWorker(R,A){return he(this,null,function*(){let F=new b.a(new S.a),L=yield F.exec("buffer",{blob:R,chunk:A});return F.terminate(),L})}static toArrayBufferWithoutWorker(R,A){return function(F,L){return new Promise((V,H)=>{let K=new FileReader,Z=L?Math.min(L,F.size):F.size,re=F.slice(0,Z);K.onload=()=>V(K.result),K.onerror=H,K.readAsArrayBuffer(re)})}(R,A)}static toArrayBuffer(R,A,F=!0){return F&&C?this.toArrayBufferWithWorker(R,A):this.toArrayBufferWithoutWorker(R,A)}static compareBuffersWithWorker(R,A){return he(this,null,function*(){if(R===A)return!0;let F=new b.a(new S.a),L=yield F.exec("compare",{buf1:R,buf2:A},[R,A]);return F.terminate(),L})}static compareBuffersWithoutWorker(R,A){return function(F,L){if(F===L)return!0;if(F.byteLength!==L.byteLength)return!1;let V=new DataView(F),H=new DataView(L);for(var K=F.byteLength;K--;)if(V.getUint8(K)!==H.getUint8(K))return!1;return!0}(R,A)}static compareBuffers(R,A,F=!0){return F&&C?this.compareBuffersWithWorker(R,A):this.compareBuffersWithoutWorker(R,A)}static sizeEqual(R,A){return R.size===A.size}static typeEqual(R,A){return R.type===A.type}static magicNumbersEqual(R,A,F=!0){return he(this,null,function*(){if(R===A)return!0;let L=[24,16,14,12,8,6,4],[V,H]=yield Promise.all([this.toBinaryString(R,24,F),this.toBinaryString(A,24,F)]);for(let K of L)if(V.substring(0,K)===H.substring(0,K))return!0;return!1})}static bytesEqualWithBinaryString(R,A,F,L=!0){return he(this,null,function*(){if(R===A)return!0;let[V,H]=yield Promise.all([this.toBinaryString(R,F,L),this.toBinaryString(A,F,L)]);return V===H})}static bytesEqualWithArrayBuffer(R,A,F,L=!0){return he(this,null,function*(){if(R===A)return!0;let[V,H]=yield Promise.all([this.toArrayBuffer(R,F,L),this.toArrayBuffer(A,F,L)]);return this.compareBuffers(V,H,L)})}static isEqual(R,A){return he(this,arguments,function*(F,L,{methods:V=["size","type","magic","byte"],byte:H="buffer",partial:K=!1,chunks:Z=null,worker:re=!0}={}){let ne=null;for(let le of V){if(ne===!1||K&&ne===!0)break;switch(le){case"byte":case"bytes":case"content":Z=Z instanceof Array?Z:[F.size],ne=!0;for(let Ce of Z){let ve=!1;ve=H==="buffer"?yield this.bytesEqualWithArrayBuffer(F,L,Ce,re):yield this.bytesEqualWithBinaryString(F,L,Ce,re),ve||(ne=!1)}break;case"magic":case"headers":case"numbers":case"mime":ne=yield this.magicNumbersEqual(F,L,re);break;case"size":case"sizes":ne=this.sizeEqual(F,L);break;case"type":case"types":ne=this.typeEqual(F,L);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return ne})}}}])})}),Xpe={};Q(Xpe,{ToolbarDropdownSelect:()=>N3e,default:()=>B3e}),t.exports=ie(Xpe),Te(),qe();var qpe=Ft;Tn();var bOe=0,_Oe=class{constructor(s){this._studio=s,pe(this,"_id"),pe(this,"_state",{type:"Ready"}),this._id=String(bOe++)}get status(){return this._state.type}reset(){let{_state:s}=this;if(s.type!=="Ready")if(s.type==="Captured")this._state={type:"Ready"},s.transaction.discard(),s.flagsTransaction.discard();else throw s.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:s}=this;if(s.type==="Captured")s.transaction.commit(),s.flagsTransaction.discard(),this._state={type:"Committed"};else if(s.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw s.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(s){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let a=!0;try{this._state=N({type:"Captured"},this._capture(s)),a=!1}finally{a&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(s){let a=[],l=this._studio.tempTransaction(f=>{let g=!0,b={set:(_,S)=>{if(!g)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:C,path:I}=(0,qpe.getPointerParts)(_);if(!Rt(C))throw new Error("We can only scrub props of Sheet Objects for now");f.set(_,S),a.push(_)}};try{s(b)}finally{g=!1}}),d=this._studio.tempTransaction(({stateEditors:f})=>{a.forEach(g=>{let{root:b,path:_}=(0,qpe.getPointerParts)(g);if(!Rt(b))return;let S=b.template.getDefaultsAtPointer(g);it(S,(C,I)=>{f.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(z(N({},b.address),{pathToProp:I}))},_)})});return{transaction:l,flagsTransaction:d}}discard(){let{_state:s}=this;if(s.type==="Captured"||s.type==="Ready")s.type==="Captured"&&(s.transaction.discard(),s.flagsTransaction.discard()),this._state={type:"Discarded"};else throw s.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},wOe=Ft,Ype=typeof window<"u"?Promise.resolve().then(()=>(tOe(),Ope)).then(s=>s.default):null,xOe=class{constructor(s){this.studio=s,pe(this,"_rendered",!1),pe(this,"_nonSSRBits",Ype?Ype.then(a=>new a):Promise.reject()),pe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(s=>{s.render()}).catch(s=>{throw console.error(s),s}))}hide(){this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,wOe.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(s,a){let l=!1,d=null;return this._nonSSRBits.then(f=>{l||(d=f.renderToolset(s,a))}).catch(f=>{console.error(f)}),()=>{if(d){d();return}l||(l=!0)}}},tO=Ft;function SOe(s){return s}var EOe=(s,a=SOe)=>{let l=d=>({type:s,payload:a(d)});return l.type=s,l.is=d=>d&&d.type&&d.type===s,l},md=EOe,Zpe=q(lOe()),Qpe=q(vOe());Ky();var nO,COe=new Uint8Array(16);function POe(){if(!nO&&(nO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nO(COe)}var TOe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function MOe(s){return typeof s=="string"&&TOe.test(s)}var kOe=MOe,yo=[];for(rO=0;rO<256;++rO)yo.push((rO+256).toString(16).substr(1));var rO;function AOe(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(yo[s[a+0]]+yo[s[a+1]]+yo[s[a+2]]+yo[s[a+3]]+"-"+yo[s[a+4]]+yo[s[a+5]]+"-"+yo[s[a+6]]+yo[s[a+7]]+"-"+yo[s[a+8]]+yo[s[a+9]]+"-"+yo[s[a+10]]+yo[s[a+11]]+yo[s[a+12]]+yo[s[a+13]]+yo[s[a+14]]+yo[s[a+15]]).toLowerCase();if(!kOe(l))throw TypeError("Stringified UUID is invalid");return l}var IOe=AOe;function ROe(s,a,l){s=s||{};var d=s.random||(s.rng||POe)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,a){l=l||0;for(var f=0;f<16;++f)a[l+f]=d[f];return a}return IOe(d)}var DOe=ROe,vC={replaceHistory:md("@history/replaceHistory"),startHistoryFromScratch:md("@history/startHistoryFromScratch"),undo:md("@history/undo"),redo:md("@history/redo")},OOe={type:"@history/unknownAction",payload:""},LOe={maxNumberOfCommits:100},NOe=(s,a=LOe)=>{let l=h6(s(void 0,OOe));return function(d,f){return vC.startHistoryFromScratch.is(f)?h6(s(void 0,f.payload)):vC.replaceHistory.is(f)?f.payload:vC.undo.is(f)?d?UOe(d):l:vC.redo.is(f)?d?zOe(d):l:d?FOe(d,s(d.innerState,f),a):h6(s(void 0,f))}};function h6(s){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:s}}function FOe(s,a,l){if(a===s.innerState)return s;let d=BOe(s.innerState,a);if(d.forwardDiff.length===0)return s;let f=eh(s.listOfCommitHashes),g={currentCommitHash:d.hash,commitsByHash:N({},s.commitsByHash),listOfCommitHashes:[...s.listOfCommitHashes],innerState:a};if(s.currentCommitHash!==f){let b=s.listOfCommitHashes.findIndex(_=>_===s.currentCommitHash);s.listOfCommitHashes.slice(b+1).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(b+1,g.listOfCommitHashes.length)}if(g.listOfCommitHashes.push(d.hash),g.commitsByHash[d.hash]=d,g.listOfCommitHashes.length>l.maxNumberOfCommits){let b=g.listOfCommitHashes.length-l.maxNumberOfCommits;g.listOfCommitHashes.slice(0,b).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(0,b)}return g}function BOe(s,a){let l=Zpe.default.diff(s,a,{invertible:!1}),d=Zpe.default.diff(a,s,{invertible:!1}),f=Date.now(),g=DOe();return{forwardDiff:l,backwardDiff:d,timestamp:f,hash:g}}function UOe(s){if(s.currentCommitHash===void 0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===-1)throw new Error("This should never happen");let l=s.commitsByHash[s.currentCommitHash],d=(0,Qpe.default)(s.innerState,l.backwardDiff),f=a-1,g=f===-1?void 0:s.listOfCommitHashes[f];return z(N({},s),{currentCommitHash:g,innerState:d})}function zOe(s){if(s.listOfCommitHashes.length===0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===s.listOfCommitHashes.length-1)return s;let l=a+1,d=s.listOfCommitHashes[l],f=s.commitsByHash[d],g=(0,Qpe.default)(s.innerState,f.forwardDiff);return z(N({},s),{currentCommitHash:d,innerState:g})}FD();var iO={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},Jpe=md("@storeBundle/replacePersistentState",s=>s),efe=md("@storeBundle/reduceParts",s=>s),a_={historic:vC,replacePersistentState:Jpe,reduceParts:efe},tfe=md("@storeBundle/setInnerHistoricState",s=>s),VOe=(s=iO.historic,a)=>tfe.is(a)?a.payload:s,p6=NOe(VOe),nfe=(s,a)=>{if(Jpe.is(a)){let{historic:l,ahistoric:d}=a.payload,f=(s==null?void 0:s.ephemeral)||iO.ephemeral;return{$persistent:{historic:l,ahistoric:d},ephemeral:f}}else if(s){let{historic:l,ahistoric:d}=s.$persistent,{ephemeral:f}=s;if(efe.is(a)){let g={historic:s.$persistent.historic.innerState,ahistoric:s.$persistent.ahistoric,ephemeral:s.ephemeral},b=a.payload(g);if(b===g)return s;l.innerState!==b.historic&&(l=p6(l,tfe(b.historic))),d=b.ahistoric,f=b.ephemeral}else{let g=p6(l,a);if(g===l)return s;l=g}return{$persistent:l===s.$persistent.historic&&d===s.$persistent.ahistoric?s.$persistent:{historic:l,ahistoric:d},ephemeral:f}}else{let l=p6(void 0,{}),d=iO.ahistoric,f=iO.ephemeral;return{$persistent:{historic:l,ahistoric:d},ephemeral:f}}},rfe=md("@history/pushTempAction",s=>s),ife=md("@history/discardTempAction",s=>s),sfe=md("@history/commitTempAction",s=>s),jOe=0,HOe=()=>{let s=jOe++;return{push:a=>rfe({id:s,originalAction:a}),discard:()=>ife(s),commit:()=>sfe(s)}},GOe=(s,a)=>{if(s){let{tempActions:l,permanent:d}=s.$temps,f;if(rfe.is(a))l=[...l,a];else if(sfe.is(a)){let b=l.find(_=>_.payload.id===a.payload);b?(f=b.payload.originalAction,l=l.filter(_=>_.payload.id!==a.payload)):ND.error("Comitting temp action group ".concat(a.payload," isn't possible as this group doesn't exist"))}else ife.is(a)?l=l.filter(b=>b.payload.id!==a.payload):f=a;f&&(d=nfe(s.$temps.permanent,f));let g={historic:d.$persistent.historic.innerState,ahistoric:d.$persistent.ahistoric,ephemeral:d.ephemeral};for(let b of l)g=b.payload.originalAction.payload(g);return N({$temps:{tempActions:l,permanent:d},$persistent:d.$persistent},g)}else{let l=nfe(void 0,a);return{$temps:{permanent:l,tempActions:[]},$persistent:l.$persistent,historic:l.$persistent.historic.innerState,ahistoric:l.$persistent.ahistoric,ephemeral:l.ephemeral}}};rd(),rd(),yh();function ofe(s,a){if(typeof s!="object"||s===null)return;if(a.length===0){for(let b of Object.keys(s))delete s[b];return}let l=a.slice(0,a.length-1),d=s,f=new WeakMap;for(let b of l){let _=d,S=_[b];if(typeof S!="object"||S===null)return;f.set(S,_),d=S}let g=a.slice().reverse();for(let b of g){if(delete d[b],Object.keys(d).length>0)return;d=f.get(d)}}function WOe(s,{scale:a,origin:l,translate:d}){let f=l+(s-l)*a;return d+f}function ec(s){for(var a=arguments.length,l=Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];throw Error("[Immer] minified error nr: "+s+(l.length?" "+l.map(function(f){return"'"+f+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function l_(s){return!!s&&!!s[cl]}function Rv(s){return!!s&&(function(a){if(!a||typeof a!="object")return!1;var l=Object.getPrototypeOf(a);if(l===null)return!0;var d=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return d===Object||typeof d=="function"&&Function.toString.call(d)===QOe}(s)||Array.isArray(s)||!!s[gfe]||!!s.constructor[gfe]||m6(s)||g6(s))}function yC(s,a,l){l===void 0&&(l=!1),u_(s)===0?(l?Object.keys:M6)(s).forEach(function(d){l&&typeof d=="symbol"||a(d,s[d],s)}):s.forEach(function(d,f){return a(f,d,s)})}function u_(s){var a=s[cl];return a?a.i>3?a.i-4:a.i:Array.isArray(s)?1:m6(s)?2:g6(s)?3:0}function f6(s,a){return u_(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function $Oe(s,a){return u_(s)===2?s.get(a):s[a]}function afe(s,a,l){var d=u_(s);d===2?s.set(a,l):d===3?(s.delete(a),s.add(l)):s[a]=l}function KOe(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}function m6(s){return YOe&&s instanceof Map}function g6(s){return ZOe&&s instanceof Set}function Dv(s){return s.o||s.t}function v6(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var a=JOe(s);delete a[cl];for(var l=M6(a),d=0;d<l.length;d++){var f=l[d],g=a[f];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(a[f]={configurable:!0,writable:!0,enumerable:g.enumerable,value:s[f]})}return Object.create(Object.getPrototypeOf(s),a)}function y6(s,a){return a===void 0&&(a=!1),b6(s)||l_(s)||!Rv(s)||(u_(s)>1&&(s.set=s.add=s.clear=s.delete=XOe),Object.freeze(s),a&&yC(s,function(l,d){return y6(d,!0)},!0)),s}function XOe(){ec(2)}function b6(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function kh(s){var a=e3e[s];return a||ec(18,s),a}function lfe(){return bC}function _6(s,a){a&&(kh("Patches"),s.u=[],s.s=[],s.v=a)}function sO(s){w6(s),s.p.forEach(qOe),s.p=null}function w6(s){s===bC&&(bC=s.l)}function ufe(s){return bC={p:[],l:bC,h:s,m:!0,_:0}}function qOe(s){var a=s[cl];a.i===0||a.i===1?a.j():a.O=!0}function x6(s,a){a._=a.p.length;var l=a.p[0],d=s!==void 0&&s!==l;return a.h.g||kh("ES5").S(a,s,d),d?(l[cl].P&&(sO(a),ec(4)),Rv(s)&&(s=oO(a,s),a.l||aO(a,s)),a.u&&kh("Patches").M(l[cl],s,a.u,a.s)):s=oO(a,l,[]),sO(a),a.u&&a.v(a.u,a.s),s!==mfe?s:void 0}function oO(s,a,l){if(b6(a))return a;var d=a[cl];if(!d)return yC(a,function(g,b){return cfe(s,d,a,g,b,l)},!0),a;if(d.A!==s)return a;if(!d.P)return aO(s,d.t,!0),d.t;if(!d.I){d.I=!0,d.A._--;var f=d.i===4||d.i===5?d.o=v6(d.k):d.o;yC(d.i===3?new Set(f):f,function(g,b){return cfe(s,d,f,g,b,l)}),aO(s,f,!1),l&&s.u&&kh("Patches").R(d,l,s.u,s.s)}return d.o}function cfe(s,a,l,d,f,g){if(l_(f)){var b=oO(s,f,g&&a&&a.i!==3&&!f6(a.D,d)?g.concat(d):void 0);if(afe(l,d,b),!l_(b))return;s.m=!1}if(Rv(f)&&!b6(f)){if(!s.h.F&&s._<1)return;oO(s,f),a&&a.A.l||aO(s,f)}}function aO(s,a,l){l===void 0&&(l=!1),s.h.F&&s.m&&y6(a,l)}function S6(s,a){var l=s[cl];return(l?Dv(l):s)[a]}function dfe(s,a){if(a in s)for(var l=Object.getPrototypeOf(s);l;){var d=Object.getOwnPropertyDescriptor(l,a);if(d)return d;l=Object.getPrototypeOf(l)}}function E6(s){s.P||(s.P=!0,s.l&&E6(s.l))}function C6(s){s.o||(s.o=v6(s.t))}function P6(s,a,l){var d=m6(a)?kh("MapSet").N(a,l):g6(a)?kh("MapSet").T(a,l):s.g?function(f,g){var b=Array.isArray(f),_={i:b?1:0,A:g?g.A:lfe(),P:!1,I:!1,D:{},l:g,t:f,k:null,o:null,j:null,C:!1},S=_,C=uO;b&&(S=[_],C=cO);var I=Proxy.revocable(S,C),O=I.revoke,R=I.proxy;return _.k=R,_.j=O,R}(a,l):kh("ES5").J(a,l);return(l?l.A:lfe()).p.push(d),d}function lO(s){return l_(s)||ec(22,s),function a(l){if(!Rv(l))return l;var d,f=l[cl],g=u_(l);if(f){if(!f.P&&(f.i<4||!kh("ES5").K(f)))return f.t;f.I=!0,d=hfe(l,g),f.I=!1}else d=hfe(l,g);return yC(d,function(b,_){f&&$Oe(f.t,b)===_||afe(d,b,a(_))}),g===3?new Set(d):d}(s)}function hfe(s,a){switch(a){case 2:return new Map(s);case 3:return Array.from(s)}return v6(s)}var pfe,bC,T6=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",YOe=typeof Map<"u",ZOe=typeof Set<"u",ffe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mfe=T6?Symbol.for("immer-nothing"):((pfe={})["immer-nothing"]=!0,pfe),gfe=T6?Symbol.for("immer-draftable"):"__$immer_draftable",cl=T6?Symbol.for("immer-state"):"__$immer_state",QOe=""+Object.prototype.constructor,M6=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,JOe=Object.getOwnPropertyDescriptors||function(s){var a={};return M6(s).forEach(function(l){a[l]=Object.getOwnPropertyDescriptor(s,l)}),a},e3e={},uO={get:function(s,a){if(a===cl)return s;var l=Dv(s);if(!f6(l,a))return function(f,g,b){var _,S=dfe(g,b);return S?"value"in S?S.value:(_=S.get)===null||_===void 0?void 0:_.call(f.k):void 0}(s,l,a);var d=l[a];return s.I||!Rv(d)?d:d===S6(s.t,a)?(C6(s),s.o[a]=P6(s.A.h,d,s)):d},has:function(s,a){return a in Dv(s)},ownKeys:function(s){return Reflect.ownKeys(Dv(s))},set:function(s,a,l){var d=dfe(Dv(s),a);if(d!=null&&d.set)return d.set.call(s.k,l),!0;if(!s.P){var f=S6(Dv(s),a),g=f==null?void 0:f[cl];if(g&&g.t===l)return s.o[a]=l,s.D[a]=!1,!0;if(KOe(l,f)&&(l!==void 0||f6(s.t,a)))return!0;C6(s),E6(s)}return s.o[a]===l&&typeof l!="number"&&(l!==void 0||a in s.o)||(s.o[a]=l,s.D[a]=!0,!0)},deleteProperty:function(s,a){return S6(s.t,a)!==void 0||a in s.t?(s.D[a]=!1,C6(s),E6(s)):delete s.D[a],s.o&&delete s.o[a],!0},getOwnPropertyDescriptor:function(s,a){var l=Dv(s),d=Reflect.getOwnPropertyDescriptor(l,a);return d&&{writable:!0,configurable:s.i!==1||a!=="length",enumerable:d.enumerable,value:l[a]}},defineProperty:function(){ec(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){ec(12)}},cO={};yC(uO,function(s,a){cO[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}}),cO.deleteProperty=function(s,a){return uO.deleteProperty.call(this,s[0],a)},cO.set=function(s,a,l){return uO.set.call(this,s[0],a,l,s[0])};var t3e=function(){function s(l){var d=this;this.g=ffe,this.F=!0,this.produce=function(f,g,b){if(typeof f=="function"&&typeof g!="function"){var _=g;g=f;var S=d;return function(A){var F=this;A===void 0&&(A=_);for(var L=arguments.length,V=Array(L>1?L-1:0),H=1;H<L;H++)V[H-1]=arguments[H];return S.produce(A,function(K){var Z;return(Z=g).call.apply(Z,[F,K].concat(V))})}}var C;if(typeof g!="function"&&ec(6),b!==void 0&&typeof b!="function"&&ec(7),Rv(f)){var I=ufe(d),O=P6(d,f,void 0),R=!0;try{C=g(O),R=!1}finally{R?sO(I):w6(I)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(A){return _6(I,b),x6(A,I)},function(A){throw sO(I),A}):(_6(I,b),x6(C,I))}if(!f||typeof f!="object")return(C=g(f))===mfe?void 0:(C===void 0&&(C=f),d.F&&y6(C,!0),C);ec(21,f)},this.produceWithPatches=function(f,g){return typeof f=="function"?function(S){for(var C=arguments.length,I=Array(C>1?C-1:0),O=1;O<C;O++)I[O-1]=arguments[O];return d.produceWithPatches(S,function(R){return f.apply(void 0,[R].concat(I))})}:[d.produce(f,g,function(S,C){b=S,_=C}),b,_];var b,_},typeof(l==null?void 0:l.useProxies)=="boolean"&&this.setUseProxies(l.useProxies),typeof(l==null?void 0:l.autoFreeze)=="boolean"&&this.setAutoFreeze(l.autoFreeze)}var a=s.prototype;return a.createDraft=function(l){Rv(l)||ec(8),l_(l)&&(l=lO(l));var d=ufe(this),f=P6(this,l,void 0);return f[cl].C=!0,w6(d),f},a.finishDraft=function(l,d){var f=l&&l[cl],g=f.A;return _6(g,d),x6(void 0,g)},a.setAutoFreeze=function(l){this.F=l},a.setUseProxies=function(l){l&&!ffe&&ec(20),this.g=l},a.applyPatches=function(l,d){var f;for(f=d.length-1;f>=0;f--){var g=d[f];if(g.path.length===0&&g.op==="replace"){l=g.value;break}}var b=kh("Patches").$;return l_(l)?b(l,d):this.produce(l,function(_){return b(_,d.slice(f+1))})},s}(),dl=new t3e;dl.produce,dl.produceWithPatches.bind(dl),dl.setAutoFreeze.bind(dl),dl.setUseProxies.bind(dl),dl.applyPatches.bind(dl);var k6=dl.createDraft.bind(dl),A6=dl.finishDraft.bind(dl);u5(),Ru(),wS(),Zy(),Jy(),OD(),ui(),Tn();var tc={create(s){let a={byId:{},allIds:{}};if(s)for(let[l,d]of s)a.byId[l]=d,a.allIds[l]=!0;return a},shallowCopy(s){return{byId:N({},s==null?void 0:s.byId),allIds:N({},s==null?void 0:s.allIds)}},add(s,a,l){return{byId:z(N({},s==null?void 0:s.byId),{[a]:l}),allIds:z(N({},s==null?void 0:s.allIds),{[a]:!0})}},merge(s){let a=tc.create();for(let l=0;l<s.length;l++)a.byId=N(N({},a.byId),s[l].byId),a.allIds=N(N({},a.allIds),s[l].allIds);return a},remove(s,a){let l=tc.shallowCopy(s);return delete l.allIds[a],delete l.byId[a],l},filter(s,a){let l=tc.shallowCopy(s);for(let[d,f]of Object.entries(l.byId))a(f)||(delete l.allIds[d],delete l.byId[d]);return l}},vfe=s=>(I6=s,R6),I6,bo=()=>{if(I6===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return I6},R6;(s=>{(a=>{(l=>{(d=>{function f(g){let b=bo().historic;b.panelPositions!=null||(b.panelPositions={}),b.panelPositions[g.panelId]=g.position}d.setPanelPosition=f})(l.panelPositions||(l.panelPositions={})),(d=>{function f(){var g;return(g=bo().historic).panels!=null||(g.panels={}),bo().historic.panels}d._ensure=f,(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.outlinePanel!=null||(_.outlinePanel={}),_.outlinePanel}g._ensure=b,(_=>{function S(I){let O=[];for(let R of Ro(I))Ct(R)?O.push(N({type:"Project"},R.address)):mt(R)?(O.push(N({type:"Sheet"},R.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.address)):Pt(R)?O.push(N({type:"Sheet"},R.address)):Rt(R)?(O.push(N({type:"SheetObject"},R.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.sheet.address)):Jt(R)&&O.push(N({type:"SheetObject"},R.address));g._ensure().selection=O}_.set=S;function C(){g._ensure().selection=[]}_.unset=C})(g.selection||(g.selection={}))})(d.outline||(d.outline={})),(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.sequenceEditor!=null||(_.sequenceEditor={}),_.sequenceEditor}g._ensure=b,(_=>{function S(){let I=g._ensure();return I.graphEditor!=null||(I.graphEditor={height:.5,isOpen:!1}),I.graphEditor}function C(I){S().isOpen=I.isOpen}_.setIsOpen=C})(g.graphEditor||(g.graphEditor={}))})(d.sequenceEditor||(d.sequenceEditor={}))})(l.panels||(l.panels={})),(d=>{(f=>{function g(b){let _=bo().historic;return _.projects.stateByProjectId[b.projectId]||(_.projects.stateByProjectId[b.projectId]={stateBySheetId:{}}),_.projects.stateByProjectId[b.projectId]}f._ensure=g,(b=>{function _(C){let I=s.studio.historic.projects.stateByProjectId._ensure(C);return I.stateBySheetId[C.sheetId]||(I.stateBySheetId[C.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),I.stateBySheetId[C.sheetId]}b._ensure=_;function S(C){s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(C).selectedInstanceId=C.sheetInstanceId}b.setSelectedInstanceId=S,(C=>{function I(V){let{selectedPropsByObject:H}=b._ensure(V).sequenceEditor;H[V.objectKey]||(H[V.objectKey]={});let K=H[V.objectKey],Z=nd(V.pathToProp),re=new Set(Object.keys(aC));for(let[le,Ce]of Object.entries(lO(H)))for(let[ve,we]of Object.entries(Ce))re.delete(we);let ne=re.size>0?re.values().next().value:Object.keys(aC)[0];K[Z]=ne}C.addPropToGraphEditor=I;function O(V){let{selectedPropsByObject:H}=b._ensure(V).sequenceEditor;if(!H[V.objectKey])return;let K=H[V.objectKey],Z=nd(V.pathToProp);K[Z]&&ofe(H,[V.objectKey,Z])}C.removePropFromGraphEditor=O;function R(V){let H=s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(V).sequenceEditor;return H.markerSet||(H.markerSet=tc.create()),H.markerSet}function A(V){let H=R(V.sheetAddress),K=V.markers.filter(le=>!!isFinite(le.position)).map(le=>z(N({},le),{position:V.snappingFunction(le.position)})),Z=zr(K,"id"),re=tc.filter(H,le=>le&&!Z[le.id]),ne=zr(Object.values(re.byId),"position");K.forEach(({position:le})=>{let Ce=ne[le];Ce&&(re=tc.remove(re,Ce.id))}),Object.assign(H,tc.merge([re,tc.create(K.map(le=>[le.id,le]))]))}C.replaceMarkers=A;function F(V){let H=R(V.sheetAddress);Object.assign(H,tc.remove(H,V.markerId))}C.removeMarker=F;function L(V){let H=R(V.sheetAddress).byId[V.markerId];H!==void 0&&(H.label=V.label)}C.updateMarker=L})(b.sequenceEditor||(b.sequenceEditor={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(d.stateByProjectId||(d.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.historic||(a.historic={})),(l=>{function d(f){bo().ephemeral.showOutline=f}l.setShowOutline=d,(f=>{(g=>{function b(_){let S=bo().ephemeral;return S.projects.stateByProjectId[_.projectId]||(S.projects.stateByProjectId[_.projectId]={stateBySheetId:{}}),S.projects.stateByProjectId[_.projectId]}g._ensure=b,(_=>{function S(C){let I=s.studio.ephemeral.projects.stateByProjectId._ensure(C);return I.stateBySheetId[C.sheetId]||(I.stateBySheetId[C.sheetId]={stateByObjectKey:{}}),I.stateBySheetId[C.sheetId]}_._ensure=S,(C=>{function I(O){var R;let A=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(O).stateByObjectKey;return A[R=O.objectKey]!=null||(A[R]={}),A[O.objectKey]}C._ensure=I,(O=>{function R(F){let L=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(F);return L.valuesBeingScrubbed!=null||(L.valuesBeingScrubbed={}),L.valuesBeingScrubbed}O._ensure=R;function A(F){Qp(R(F),F.pathToProp,!0)}O.flag=A})(C.propsBeingScrubbed||(C.propsBeingScrubbed={}))})(_.stateByObjectKey||(_.stateByObjectKey={}))})(g.stateBySheetId||(g.stateBySheetId={}))})(f.stateByProjectId||(f.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ephemeral||(a.ephemeral={})),(l=>{function d(S){bo().ahistoric.pinOutline=S}l.setPinOutline=d;function f(S){bo().ahistoric.pinDetails=S}l.setPinDetails=f;function g(S){bo().ahistoric.pinNotifications=S}l.setPinNotifications=g;function b(S){bo().ahistoric.visibilityState=S}l.setVisibilityState=b;function _(S){let C=KR(S.map(R=>R.pathToProp)),I=S.map(({keyframe:R,pathToProp:A})=>({keyframe:R,pathToProp:A.slice(C.length)})),O=bo();O.ahistoric.clipboard?O.ahistoric.clipboard.keyframesWithRelativePaths=I:O.ahistoric.clipboard={keyframesWithRelativePaths:I}}l.setClipboardKeyframes=_,(S=>{(C=>{function I(O){let R=bo().ahistoric;return R.projects.stateByProjectId[O.projectId]||(R.projects.stateByProjectId[O.projectId]={stateBySheetId:{}}),R.projects.stateByProjectId[O.projectId]}C._ensure=I,(O=>{function R(F){let L=s.studio.ahistoric.projects.stateByProjectId._ensure(F);return L.collapsedItemsInOutline||(L.collapsedItemsInOutline={}),L.collapsedItemsInOutline}O._ensure=R;function A(F){let L=s.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(F);F.isCollapsed?L[F.itemKey]=!0:delete L[F.itemKey]}O.set=A})(C.collapsedItemsInOutline||(C.collapsedItemsInOutline={})),(O=>{function R(A){let F=s.studio.ahistoric.projects.stateByProjectId._ensure(A);return F.stateBySheetId[A.sheetId]||(F.stateBySheetId[A.sheetId]={}),F.stateBySheetId[A.sheetId]}O._ensure=R,(A=>{function F(L){let V=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(L);return V.sequence||(V.sequence={}),V.sequence}A._ensure=F,(L=>{function V(K){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(K).focusRange={range:K.range,enabled:K.enabled}}L.set=V;function H(K){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(K).focusRange=void 0}L.unset=H})(A.focusRange||(A.focusRange={})),(L=>{function V(H){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(H).clippedSpaceRange=N({},H.range)}L.set=V})(A.clippedSpaceRange||(A.clippedSpaceRange={})),(L=>{function V(K){let Z=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(K),re=Z.collapsableItems;return re||(re=Z.collapsableItems=tc.create()),re}function H(K){let Z=V(K);Object.assign(Z,tc.add(Z,K.studioSheetItemKey,{isCollapsed:K.isCollapsed}))}L.set=H})(A.sequenceEditorCollapsableItems||(A.sequenceEditorCollapsableItems={}))})(O.sequence||(O.sequence={}))})(C.stateBySheetId||(C.stateBySheetId={}))})(S.stateByProjectId||(S.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ahistoric||(a.ahistoric={}))})(s.studio||(s.studio={})),(a=>{(l=>{(d=>{function f(g){let b=bo().historic.coreByProject[g.projectId].revisionHistory,_=50;b.unshift(g.revision),b.length>_&&(b.length=_)}d.add=f})(l.revisionHistory||(l.revisionHistory={})),(d=>{function f(_){let S=bo().historic.coreByProject[_.projectId].sheetsById;return S[_.sheetId]||(S[_.sheetId]={staticOverrides:{byObject:{}}}),S[_.sheetId]}d._ensure=f;function g(_){let S=bo().historic.coreByProject[_.projectId].sheetsById[_.sheetId];if(!S)return;delete S.staticOverrides.byObject[_.objectKey];let C=S.sequence;C&&delete C.tracksByObject[_.objectKey]}d.forgetObject=g;function b(_){bo().historic.coreByProject[_.projectId].sheetsById[_.sheetId]&&delete bo().historic.coreByProject[_.projectId].sheetsById[_.sheetId]}d.forgetSheet=b,(_=>{function S(ve){let we=s.coreByProject.historic.sheetsById._ensure(ve);return we.sequence!=null||(we.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),we.sequence}_._ensure=S;function C(ve){S(ve).length=bi(parseFloat(ve.length.toFixed(2)),.01,1/0)}_.setLength=C;function I(ve){var we;let De=s.coreByProject.historic.sheetsById.sequence._ensure(ve).tracksByObject;return De[we=ve.objectKey]!=null||(De[we]={trackData:{},trackIdByPropPath:{}}),De[ve.objectKey]}function O(ve,we){let De=I(ve),rt=nd(ve.pathToProp);if(typeof De.trackIdByPropPath[rt]=="string")return;let ce=o2e(),Re={type:"BasicKeyframedTrack",__debugName:"".concat(ve.objectKey,":").concat(rt),keyframes:[]};De.trackData[ce]=Re,De.trackIdByPropPath[rt]=ce}_.setPrimitivePropAsSequenced=O;function R(ve){let we=I(ve),De=nd(ve.pathToProp),rt=we.trackIdByPropPath[De];typeof rt=="string"&&(delete we.trackIdByPropPath[De],delete we.trackData[rt],s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ve))}_.setPrimitivePropAsStatic=R;function A(ve){let we=I(ve);for(let De of Object.keys(we.trackIdByPropPath)){let rt=JSON.parse(De);if(ve.pathToProp.every((ce,Re)=>rt[Re]===ce)){let ce=we.trackIdByPropPath[De];if(typeof ce!="string")continue;delete we.trackIdByPropPath[De],delete we.trackData[ce]}}s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ve)}_.setCompoundPropAsStatic=A;function F(ve){return I(ve).trackData[ve.trackId]}function L(ve){let we=F(ve);if(we)return we.keyframes.find(De=>De.id===ve.keyframeId)}function V(ve){let we=ve.snappingFunction(ve.position),De=F(ve);if(!De)return;let{keyframes:rt}=De,ce=rt.findIndex(Ve=>Ve.position===we);if(ce!==-1){let Ve=rt[ce];Ve.value=ve.value;return}let Re=O2(rt,Ve=>Ve.position<we);if(Re===-1){rt.unshift({id:yee(),position:we,connectedRight:!0,handles:ve.handles||[.5,1,.5,0],type:ve.type||"bezier",value:ve.value});return}let J=rt[Re];rt.splice(Re+1,0,{id:yee(),position:we,connectedRight:J.connectedRight,handles:ve.handles||[.5,1,.5,0],type:ve.type||"bezier",value:ve.value})}_.setKeyframeAtPosition=V;function H(ve){let we=F(ve);if(!we)return;let{keyframes:De}=we,rt=De.findIndex(ce=>ce.position===ve.position);rt!==-1&&De.splice(rt,1)}_.unsetKeyframeAtPosition=H;function K(ve){let we=F(ve);if(!we)return;let De=lO(we.keyframes).filter(rt=>ve.keyframeIds.includes(rt.id)).map(rt=>{let ce=rt.position,Re=ve.snappingFunction(WOe(ce,ve));return z(N({},rt),{position:Re})});Ce(z(N({},ve),{keyframes:De}))}_.transformKeyframes=K;function Z(ve){let we=F(ve);we&&(we.keyframes=we.keyframes.map((De,rt)=>{let ce=we.keyframes[rt-1],Re=ve.keyframeIds.includes(De.id),J=ve.keyframeIds.includes(ce==null?void 0:ce.id);return Re&&!J?z(N({},De),{handles:[De.handles[0],De.handles[1],ve.handles[0],ve.handles[1]]}):Re&&J?z(N({},De),{handles:[ve.handles[2],ve.handles[3],ve.handles[0],ve.handles[1]]}):J?z(N({},De),{handles:[ve.handles[2],ve.handles[3],De.handles[2],De.handles[3]]}):De}))}_.setTweenBetweenKeyframes=Z;function re(ve){var we,De,rt,ce,Re,J,Ve,Ot;let Me=L(ve);Me&&(Me.handles=[(De=(we=ve.end)==null?void 0:we[0])!=null?De:Me.handles[0],(ce=(rt=ve.end)==null?void 0:rt[1])!=null?ce:Me.handles[1],(J=(Re=ve.start)==null?void 0:Re[0])!=null?J:Me.handles[2],(Ot=(Ve=ve.start)==null?void 0:Ve[1])!=null?Ot:Me.handles[3]])}_.setHandlesForKeyframe=re;function ne(ve){let we=F(ve);we&&(we.keyframes=we.keyframes.filter(De=>ve.keyframeIds.indexOf(De.id)===-1))}_.deleteKeyframes=ne;function le(ve){let we=L(ve);we&&(we.type=ve.keyframeType)}_.setKeyframeType=le;function Ce(ve){let we=F(ve);if(!we)return;let De=lO(we.keyframes),rt=ve.keyframes.filter(Ot=>!(typeof Ot.value=="number"&&!isFinite(Ot.value)||!Ot.handles.every(Me=>isFinite(Me)))).map(Ot=>z(N({},Ot),{position:ve.snappingFunction(Ot.position)})),ce=zr(rt,"id"),Re=De.filter(Ot=>!ce[Ot.id]),J=zr(Re,"position");rt.forEach(({position:Ot})=>{let Me=J[Ot];Me&&Z2(Re,Me)});let Ve=J2([...Re,...rt],"position");we.keyframes=Ve}_.replaceKeyframes=Ce})(d.sequence||(d.sequence={})),(_=>{(S=>{function C(A){var F;let L=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject;return L[F=A.objectKey]!=null||(L[F]={}),L[A.objectKey]}function I(A){let F=C(A);Qp(F,A.pathToProp,A.value)}S.setValueOfCompoundProp=I;function O(A){let F=C(A);Qp(F,A.pathToProp,A.value)}S.setValueOfPrimitiveProp=O;function R(A){let F=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject[A.objectKey];F&&ofe(F,A.pathToProp)}S.unsetValueOfPrimitiveProp=R})(_.byObject||(_.byObject={}))})(d.staticOverrides||(d.staticOverrides={}))})(l.sheetsById||(l.sheetsById={}))})(a.historic||(a.historic={}))})(s.coreByProject||(s.coreByProject={}))})(R6||(R6={}));function D6(){let s,a,l=new Promise((f,g)=>{s=b=>{f(b),d.status="resolved"},a=b=>{g(b),d.status="rejected"}}),d={resolve:s,reject:a,promise:l,status:"pending"};return d}var n3e=Ft;function r3e(s){let a=s.getState(),l=new n3e.Atom(a);return s.subscribe(()=>{let d=s.getState();l.set(d),a=d}),l}Vc();function i3e(s){var a,l=s.Symbol;return typeof l=="function"?l.observable?a=l.observable:(a=l("observable"),l.observable=a):a="@@observable",a}var _C;typeof self<"u"?_C=self:typeof window<"u"?_C=window:typeof Gi<"u"?_C=Gi:_C=t;var s3e=i3e(_C),yfe=s3e,bfe={INIT:"@@redux/INIT"};function _fe(s,a,l){var d;if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error("Expected the enhancer to be a function.");return l(_fe)(s,a)}if(typeof s!="function")throw new Error("Expected the reducer to be a function.");var f=s,g=a,b=[],_=b,S=!1;function C(){_===b&&(_=b.slice())}function I(){return g}function O(L){if(typeof L!="function")throw new Error("Expected listener to be a function.");var V=!0;return C(),_.push(L),function(){if(V){V=!1,C();var H=_.indexOf(L);_.splice(H,1)}}}function R(L){if(!Ny(L))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof L.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(S)throw new Error("Reducers may not dispatch actions.");try{S=!0,g=f(g,L)}finally{S=!1}for(var V=b=_,H=0;H<V.length;H++){var K=V[H];K()}return L}function A(L){if(typeof L!="function")throw new Error("Expected the nextReducer to be a function.");f=L,R({type:bfe.INIT})}function F(){var L,V=O;return L={subscribe:function(H){if(typeof H!="object")throw new TypeError("Expected the observer to be an object.");function K(){H.next&&H.next(I())}K();var Z=V(K);return{unsubscribe:Z}}},L[yfe]=function(){return this},L}return R({type:bfe.INIT}),d={dispatch:R,subscribe:O,getState:I,replaceReducer:A},d[yfe]=F,d}function o3e(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length===0?function(d){return d}:a.length===1?a[0]:a.reduce(function(d,f){return function(){return d(f.apply(void 0,arguments))}})}function a3e(s){let a=o3e();return _fe(s.rootReducer,void 0,a)}FD(),hS();var O6=new WeakMap,l3e=(s,a,l)=>{let d=S=>{s.dispatch(a_.replacePersistentState(S))},f=wfe(l),g=()=>s.getState().$persistent;_();let b=()=>{let S=g(),C=O6.get(s);S!==C&&(O6.set(s,S),localStorage.setItem(f,JSON.stringify(S)))};s.subscribe($y(b,1e3)),window&&window.addEventListener("beforeunload",b);function _(){let S=localStorage.getItem(f);if(S){let C,I=!0;try{C=JSON.parse(S),I=!1}catch{ND.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{I||d(C),a()}}else a()}},u3e=(s,a)=>{let l=wfe(a),d=s.getState().$persistent;localStorage.removeItem(l),O6.set(s,d)};function wfe(s){return s+".persistent"}Mte(),Tn(),Wp(),qe(),gR();var dO=Ft;mf(),ui(),phe();function L6(s){if(typeof s=="boolean"||typeof s=="string"||typeof s=="number")return s;if(Ny(s)){let a={},l=!1;for(let[d,f]of Object.entries(s))L6(f)!==void 0&&(a[d]=f,l=!0);if(l)return a}else return}function xfe(s,a,l){for(let[d,f]of Object.entries(s.props))if(f.type==="compound")xfe(f,[...a,d],l);else{if(f.type==="enum")throw new Error("Not yet implemented");l(f,[...a,d])}}function c3e(s,a,l){return{set:(d,f)=>{s();let g=L6(f);if(typeof g>"u")return;let{root:b,path:_}=(0,dO.getPointerParts)(d);if(Rt(b)){let S=b.template.getMapOfValidSequenceTracks_forStudio().getValue(),C=dR(b.template.staticConfig,_);if(!C)throw new Error("Object ".concat(b.address.objectKey," does not have a prop at ").concat(JSON.stringify(_)));let I=(O,R,A)=>{if(O==null)return;if(L6(R.deserializeAndSanitize(O))===void 0)throw new Error("Invalid value ".concat(Wj(O)," for object.props").concat(A.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is invalid"));let F=z(N({},b.address),{pathToProp:A}),L=Zd(S,A);if(typeof L=="string"){let V=b.sheet.getSequence();V.position=V.closestGridPosition(V.position),a.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(N({},F),{trackId:L,position:V.position,value:O,snappingFunction:V.closestGridPosition,type:"bezier"}))}else a.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(z(N({},F),{value:O}))};if(C.type==="compound"){let O=(0,dO.getPointerParts)(d).path,R=O.length;xfe(C,O,(A,F)=>{let L=F.slice(R),V=vf(g,L);if(typeof V<"u")I(V,A,F);else throw new Error("Property object.props".concat(F.map(H=>"[".concat(JSON.stringify(H),"]")).join("")," is required but not provided"))})}else{if(C.type==="enum")throw new Error("Enums aren't implemented yet");I(g,C,_)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:d=>{s();let{root:f,path:g}=(0,dO.getPointerParts)(d);if(Rt(f)){let b=f.template.getMapOfValidSequenceTracks_forStudio().getValue(),_=vf(f.template.getDefaultValues().getValue(),g),S=dR(f.template.staticConfig,g),C=(I,O)=>{let R=z(N({},f.address),{pathToProp:O}),A=Zd(b,O);typeof A=="string"?a.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(z(N({},R),{trackId:A,position:f.sheet.getSequence().positionSnappedToGrid})):S!==void 0&&a.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(R)};S.type==="compound"?it(_,(I,O)=>{C(I,O)},(0,dO.getPointerParts)(d).path):C(_,g)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return s(),l},get stateEditors(){return a}}}var d3e=class{constructor(){pe(this,"_reduxStore"),pe(this,"_atom"),pe(this,"atomP"),this._reduxStore=a3e({rootReducer:GOe,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=r3e(this._reduxStore),this.atomP=this._atom.pointer}initialize(s){let a=D6();return s.usePersistentStorage===!0?l3e(this._reduxStore,()=>{this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()},s.persistenceKey):(this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()),a.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(s){return u3e(this._reduxStore,s),this.getState()}__dev_startHistoryFromScratch(s){this._reduxStore.dispatch(a_.historic.startHistoryFromScratch(a_.reduceParts(a=>z(N({},a),{historic:s}))))}tempTransaction(s){let a=HOe(),l,d=a.push(a_.reduceParts(f=>{let g={historic:k6(f.historic),ahistoric:k6(f.ahistoric),ephemeral:k6(f.ephemeral)},b=!0,_=()=>{if(!b)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},S=vfe(g),C=c3e(_,S,g);try{return s(C),b=!1,{historic:A6(g.historic),ahistoric:A6(g.ahistoric),ephemeral:A6(g.ephemeral)}}catch(I){return l=I,f}finally{vfe(void 0)}}));if(this._reduxStore.dispatch(d),l)throw this._reduxStore.dispatch(a.discard()),l;return{commit:()=>{this._reduxStore.dispatch(a.commit())},discard:()=>{this._reduxStore.dispatch(a.discard())}}}undo(){this._reduxStore.dispatch(a_.historic.undo())}redo(){this._reduxStore.dispatch(a_.historic.redo())}createContentOfSaveFile(s){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s])throw new Error("Project ".concat(s," has not been initialized."));let a=Tte();this.tempTransaction(({stateEditors:d})=>{d.coreByProject.historic.revisionHistory.add({projectId:s,revision:a})}).commit();let l=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s];return N({},l)}},h3e=Ft,N6=class{constructor(){pe(this,"_values",{})}get(s,a){if(this.has(s))return this._values[s];{let l=a();return this._values[s]=l,l}}has(s){return this._values.hasOwnProperty(s)}};Tn(),df(),Te(),ui(),Vj();var p3e=class{constructor(s){pe(this,"ui",{hide(){ue().ui.hide()},get isHidden(){return ue().ui.isHidden},restore(){ue().ui.restore()},renderToolset(a,l){return ue().ui.renderToolset(a,l)}}),pe(this,"_cache",new N6),pe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){yDe()},__experimental_enablePlayPauseKeyboardShortcut(){bDe()},__experimental_clearPersistentStorage(a){return ue().clearPersistentStorage(a)},__experimental_createContentOfSaveFileTyped(a){return ue().createContentOfSaveFile(a)}})}initialize(s){return ue().initialize(s)}extend(s,a){ue().extend(s,a)}transaction(s){return ue().transaction(({set:a,unset:l,stateEditors:d})=>s({set:a,unset:l,__experimental_forgetObject:f=>{if(!In(f))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");d.coreByProject.historic.sheetsById.forgetObject(f.address)},__experimental_forgetSheet:f=>{if(!Yt(f))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");d.coreByProject.historic.sheetsById.forgetSheet(f.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,h3e.prism)(()=>cf().filter(s=>s.type==="Theatre_SheetObject"||s.type==="Theatre_Sheet").map(s=>s.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(s){let a=[...s].filter(l=>In(l)||Yt(l)).map(l=>ue().corePrivateAPI(l));ue().transaction(({stateEditors:l})=>{l.studio.historic.panels.outline.selection.set(a)})}onSelectionChange(s){let a=ue();return this._getSelectionPrism().onChange(a.ticker,s,!0)}get selection(){return this._getSelection()}scrub(){return ue().scrub()}getStudioProject(){let s=ue().core;if(!s)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return ue().getStudioProject(s)}debouncedScrub(s=1e3){let a,l=$y(()=>{let d=a;d&&(a=void 0,d.commit())},s);return{capture:d=>{a||(a=this.scrub());let f=!0;try{a.capture(d),f=!1}finally{if(f){let g=a;a=void 0,g.discard()}else l()}}}}createPane(s){return ue().paneManager.createPane(s)}destroyPane(s){return ue().paneManager.destroyPane(s)}createContentOfSaveFile(s){return ue().createContentOfSaveFile(s)}};vee();var Ov=Ft,f3e=class{constructor(s){this._studio=s,pe(this,"_cache",new N6),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let s=this._getAllPanes();s.onStale(()=>{s.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,Ov.prism)(()=>{if(!(0,Ov.val)(this._studio.coreP))return{};let s=(0,Ov.val)(this._studio.atomP.historic.panelInstanceDesceriptors),a=(0,Ov.val)(this._studio.atomP.ephemeral.extensions.paneClasses),l={};for(let d of Object.values(s)){if(!d)continue;let f=a[d.paneClass];if(!f)continue;let{instanceId:g}=d,{extensionId:b,classDefinition:_}=f,S=Ov.prism.memo("instance-".concat(d.instanceId),()=>({extensionId:b,instanceId:g,definition:_}),[_]);l[g]=S}return l}))}get allPanesD(){return this._getAllPanes()}createPane(s){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let a=(0,Ov.val)(this._studio.atomP.ephemeral.extensions.paneClasses[s].extensionId),l=(0,Ov.val)(this._studio.atomP.historic.panelInstanceDesceriptors),d;for(let f=1;f<1e3&&(d="".concat(s," #").concat(f),!!l[d]);f++);if(!a)throw new Error('Pane class "'.concat(s,'" is not registered.'));return this._studio.transaction(({drafts:f})=>{f.historic.panelInstanceDesceriptors[d]={instanceId:d,paneClass:s}}),this._getAllPanes().getValue()[d]}destroyPane(s){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:a})=>{delete a.historic.panelInstanceDesceriptors[s]})}},hO=Ft;Te();var Sfe=30*60*1e3,m3e=1e3*60*60;function g3e(){return he(this,null,function*(){let s=ue().atomP.ahistoric.visibilityState;if((0,hO.val)(s)==="everythingIsVisible")return;let a=D6(),l=(0,hO.pointerToPrism)(s).onStale(()=>{(0,hO.val)(s)==="everythingIsVisible"&&(l(),a.resolve(void 0))});return a.promise})}function v3e(){return he(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield pO(500),yield g3e();;){let s=(0,hO.val)(ue().atomP.ahistoric.updateChecker);if(s&&s.result!=="error"){let a=s.lastChecked,l=Date.now(),d=Math.abs(l-a);d<Sfe&&(yield pO(Sfe-d))}try{let a=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(a.ok){let l=yield a.json();if(!y3e(l))throw new Error("Bad response");ue().transaction(({drafts:d})=>{d.ahistoric.updateChecker={lastChecked:Date.now(),result:N({},l)}}),yield pO(1e3)}else throw new Error("HTTP Error ".concat(a.statusText))}catch{yield pO(m3e)}}})}var pO=s=>new Promise(a=>setTimeout(a,s));function y3e(s){if(typeof s!="object")return!1;let a=s;return typeof a.hasUpdates!="boolean"?!1:a.hasUpdates===!0&&typeof a.newVersion=="string"&&typeof a.releasePage=="string"||a.hasUpdates===!1}var b3e=q(kS());function Ah(s){return new Promise((a,l)=>{s.oncomplete=s.onsuccess=()=>a(s.result),s.onabort=s.onerror=()=>l(s.error)})}function Efe(s,a){let l=indexedDB.open(s);l.onupgradeneeded=()=>l.result.createObjectStore(a);let d=Ah(l);return(f,g)=>d.then(b=>g(b.transaction(a,f).objectStore(a)))}var F6;function c_(){return F6||(F6=Efe("keyval-store","keyval")),F6}function _3e(s,a=c_()){return a("readonly",l=>Ah(l.get(s)))}function w3e(s,a,l=c_()){return l("readwrite",d=>(d.put(a,s),Ah(d.transaction)))}function x3e(s,a=c_()){return a("readwrite",l=>(l.delete(s),Ah(l.transaction)))}function B6(s,a){return s.openCursor().onsuccess=function(){this.result&&(a(this.result),this.result.continue())},Ah(s.transaction)}function S3e(s=c_()){return s("readonly",a=>{if(a.getAllKeys)return Ah(a.getAllKeys());let l=[];return B6(a,d=>l.push(d.key)).then(()=>l)})}function E3e(s=c_()){return s("readonly",a=>{if(a.getAll)return Ah(a.getAll());let l=[];return B6(a,d=>l.push(d.value)).then(()=>l)})}function C3e(s=c_()){return s("readonly",a=>{if(a.getAll&&a.getAllKeys)return Promise.all([Ah(a.getAllKeys()),Ah(a.getAll())]).then(([d,f])=>d.map((g,b)=>[g,f[b]]));let l=[];return s("readonly",d=>B6(d,f=>l.push([f.key,f.value])).then(()=>l))})}var P3e=s=>{let a=Efe("theatrejs-".concat(s),"default-store");return{set:(l,d)=>w3e(l,d,a),get:l=>_3e(l,a),del:l=>x3e(l,a),keys:()=>S3e(a),entries:()=>C3e(a),values:()=>E3e(a)}};Qne(),jE();var Cfe="theatre-0.4",T3e=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,M3e="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",k3e=class{constructor(){pe(this,"ui"),pe(this,"publicApi"),pe(this,"address"),pe(this,"_projectsProxy",new tO.PointerProxy(new tO.Atom({}).pointer)),pe(this,"projectsP",this._projectsProxy.pointer),pe(this,"_store",new d3e),pe(this,"_corePrivateApi"),pe(this,"_cache",new N6),pe(this,"paneManager"),pe(this,"_coreAtom",new tO.Atom({})),pe(this,"_initializedDeferred",D6()),pe(this,"_initializeFnCalled",!1),pe(this,"_didWarnAboutNotInitializing",!1),pe(this,"_coreBits"),pe(this,"_rafDriver"),this.address={studioId:kE(10)},this.publicApi=new p3e(this),this.ui=new xOe(this),this._attachToIncomingProjects(),this.paneManager=new f3e(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(T3e),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(s){return he(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(M3e);let a={persistenceKey:Cfe,usePersistentStorage:!0};if(typeof(s==null?void 0:s.persistenceKey)=="string"&&(a.persistenceKey=s.persistenceKey),((s==null?void 0:s.usePersistentStorage)===!1||typeof window>"u")&&(a.usePersistentStorage=!1),s!=null&&s.__experimental_rafDriver){if(s.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let l=this._coreBits.privateAPI(s.__experimental_rafDriver);if(!l)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=l}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(a)}catch(l){this._initializedDeferred.reject(l);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),v3e().catch(l=>{console.error(l)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let s=(0,tO.pointerToPrism)(this.projectsP),a=l=>{for(let d of Object.values(l))d.isAttachedToStudio||d.attachToStudio(this)};s.onStale(()=>{a(s.getValue())}),a(s.getValue())}setCoreBits(s){this._coreBits=s,this._corePrivateApi=s.privateAPI,this._coreAtom.setByPointer(a=>a.core,s.coreExports),this._setProjectsP(s.projectsP)}_setProjectsP(s){this._projectsProxy.setPointer(s)}scrub(){return new _Oe(this)}tempTransaction(s){return this._store.tempTransaction(s)}transaction(s){return this.tempTransaction(s).commit()}__dev_startHistoryFromScratch(s){return this._store.__dev_startHistoryFromScratch(s)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(s,a){if(!s||typeof s!="object")throw new Error("Extensions must be JS objects");if(typeof s.id!="string")throw new Error("extension.id must be a string");let l=(a==null?void 0:a.__experimental_reconfigure)===!0,d=s.id,f=this._store.getState().ephemeral.extensions.byId[d];if(f&&!l){if(s===f||(0,b3e.default)(s,f))return;throw new Error('Extension id "'.concat(s.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:g})=>{var b,_;g.ephemeral.extensions.byId[s.id]=s;let S=g.ephemeral.extensions.paneClasses;l&&f&&((b=f.panes)==null||b.forEach(C=>{delete S[C.class]})),(_=s.panes)==null||_.forEach(C=>{if(typeof C.class!="string")throw new Error("pane.class must be a string");if(C.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let I=S[C.class];if(I)if(l&&I.extensionId===s.id)console.warn('Pane class "'.concat(C.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(C.class,'" already exists and is supplied by extension ').concat(I));S[C.class]={extensionId:s.id,classDefinition:C}})})}getStudioProject(s){return this._cache.get("getStudioProject",()=>s.getProject("Studio"))}getExtensionSheet(s,a){return this._cache.get("extensionSheet-"+s,()=>this.getStudioProject(a).sheet("Extension "+s))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(s){return this._store.createContentOfSaveFile(s)}createAssetStorage(s,a){return he(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:C=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:C=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let l=P3e("".concat(s.address.projectId,"-assets")),d=qz(s),f=yield l.keys();yield Promise.all(f.map(C=>he(this,null,function*(){d.includes(C)||(yield l.del(C))}))),yield Promise.all(f.map(C=>he(this,null,function*(){var I,O;let R="".concat(a,"/").concat(C);try{(yield fetch(R,{method:"HEAD"})).ok&&(yield l.del(C))}catch{VE.error("Failed to access assets","Failed to access assets at ".concat((O=(I=s.config.assets)==null?void 0:I.baseUrl)!=null?O:"/",". This is likely due to a CORS issue."))}})));let g=new Map(yield l.entries()),b=new Map,_=C=>{if(b.has(C))return b.get(C);{let I=URL.createObjectURL(C);return b.set(C,I),I}},S=C=>{let I=g.get(C);if(!I)throw new Error("Asset with id ".concat(C," not found"));return _(I)};return{getAssetUrl:C=>g.has(C)?S(C):"".concat(a,"/").concat(C),createAsset:C=>he(this,null,function*(){var I,O,R;let A=qz(s),F=!1;if(A.includes(C.name)){let L;try{L=(I=g.get(C.name))!=null?I:yield fetch("".concat(a,"/").concat(C.name)).then(V=>V.ok?V.blob():void 0)}catch{return VE.error("Failed to access assets","Failed to access assets at ".concat((R=(O=s.config.assets)==null?void 0:O.baseUrl)!=null?R:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(L){if(F=yield(yield Promise.resolve().then(()=>q(yOe()))).default.isEqual(C,L),F)return C.name;{let V=H=>{let K=prompt(H,C.name);return K===null?!1:K===""?V("Asset name cannot be empty. Please choose a different file name for this asset."):A.includes(K)?(console.log(A),V("An asset with this name already exists. Please choose a different file name for this asset.")):(C=new File([C],K,{type:C.type}),!0)};if(!V("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return g.set(C.name,C),yield l.set(C.name,C),C.name})}})}clearPersistentStorage(s=Cfe){this._store.__experimental_clearPersistentStorage(s)}},U6="__TheatreJS_StudioBundle",A3e="__TheatreJS_CoreBundle",I3e="__TheatreJS_Notifications",R3e=class{constructor(s){this._studio=s,pe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(s){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=s;let a;s.getBitsForStudio(this._studio,l=>{a=l}),this._studio.setCoreBits(a)}},D3e=q(Oe());ze();var Pfe,O3e=ae.div(Pfe||(Pfe=W([""]))),L3e=s=>D3e.default.createElement(O3e,null),N3e=L3e;jE();var z6=new k3e;Et(z6);var F3e=z6.publicApi,B3e=F3e;U3e();function U3e(){if(typeof window>"u")return;let s=window[U6];if(typeof s<"u")throw typeof s=="object"&&s&&typeof s.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(U6," seems to be already set by a module other than @theatre/core."));let a=new R3e(z6);window[U6]=a;let l=window[A3e];l&&l!==null&&l.type==="Theatre_CoreBundle"&&a.registerCoreBundle(l)}typeof window<"u"&&(window[I3e]={notify:VE});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(yN,yN.exports);var sUe=yN.exports;const Bw=Uwe(sUe);class oUe{constructor(e,n,r="editor"){Jr(this,"channel");Jr(this,"components",new Map);Jr(this,"_mode","app");this.editor=n&&document.location.hash.search(r)>-1,n&&(this.channel=new BroadcastChannel(e))}addComponent(e,n){this.components.set(e,n)}dispose(){this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){this.channel!==void 0&&this._mode!==e.target&&this.channel.postMessage(e)}listen(e){this.channel!==void 0&&(this.channel.onmessage=n=>{e(n.data)})}get mode(){return this._mode}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor",document.title+=" - Editor")}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const YT="160",B_={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},U_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aUe=0,x0e=1,lUe=2,eSe=1,uUe=2,Xh=3,gp=0,Vs=1,Ka=2,Sc=0,Uw=1,S0e=2,E0e=3,C0e=4,cUe=5,m0=100,dUe=101,hUe=102,P0e=103,T0e=104,pUe=200,fUe=201,mUe=202,gUe=203,pW=204,fW=205,vUe=206,yUe=207,bUe=208,_Ue=209,wUe=210,xUe=211,SUe=212,EUe=213,CUe=214,PUe=0,TUe=1,MUe=2,bN=3,kUe=4,AUe=5,IUe=6,RUe=7,pF=0,DUe=1,OUe=2,Um=0,LUe=1,NUe=2,FUe=3,BUe=4,UUe=5,zUe=6,M0e="attached",VUe="detached",tSe=300,Qw=301,Jw=302,_N=303,mW=304,fF=306,vp=1e3,bl=1001,gW=1002,Co=1003,k0e=1004,KH=1005,Zo=1006,jUe=1007,bT=1008,xl=1009,HUe=1010,GUe=1011,J$=1012,nSe=1013,ep=1014,tp=1015,_T=1016,rSe=1017,iSe=1018,zm=1020,WUe=1021,pu=1023,$Ue=1024,KUe=1025,E0=1026,D0=1027,XUe=1028,sSe=1029,qUe=1030,oSe=1031,aSe=1033,XH=33776,qH=33777,YH=33778,ZH=33779,A0e=35840,I0e=35841,R0e=35842,D0e=35843,lSe=36196,O0e=37492,L0e=37496,N0e=37808,F0e=37809,B0e=37810,U0e=37811,z0e=37812,V0e=37813,j0e=37814,H0e=37815,G0e=37816,W0e=37817,$0e=37818,K0e=37819,X0e=37820,q0e=37821,QH=36492,Y0e=36494,Z0e=36495,YUe=36283,Q0e=36284,J0e=36285,eye=36286,ZUe=2200,QUe=2201,JUe=2202,wN=2300,xN=2301,JH=2302,Sw=2400,Ew=2401,SN=2402,e7=2500,e5e=2501,mF=3e3,lp=3001,ZT=3200,t5e=3201,u1=0,n5e=1,fu="",ns="srgb",yp="srgb-linear",t7="display-p3",gF="display-p3-linear",EN="linear",Pi="srgb",CN="rec709",PN="p3",z_=7680,tye=519,r5e=512,i5e=513,s5e=514,uSe=515,o5e=516,a5e=517,l5e=518,u5e=519,nye=35044,vW="300 es",yW=1035,np=2e3,TN=2001;class Eu{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,u=i.length;o<u;o++)i[o].call(this,e);e.target=null}}}const Go=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rye=1234567;const $P=Math.PI/180,e1=180/Math.PI;function tg(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Go[t&255]+Go[t>>8&255]+Go[t>>16&255]+Go[t>>24&255]+"-"+Go[e&255]+Go[e>>8&255]+"-"+Go[e>>16&15|64]+Go[e>>24&255]+"-"+Go[n&63|128]+Go[n>>8&255]+"-"+Go[n>>16&255]+Go[n>>24&255]+Go[r&255]+Go[r>>8&255]+Go[r>>16&255]+Go[r>>24&255]).toLowerCase()}function Bs(t,e,n){return Math.max(e,Math.min(n,t))}function n7(t,e){return(t%e+e)%e}function c5e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function d5e(t,e,n){return t!==e?(n-t)/(e-t):0}function KP(t,e,n){return(1-n)*t+n*e}function h5e(t,e,n,r){return KP(t,e,1-Math.exp(-n*r))}function p5e(t,e=1){return e-Math.abs(n7(t,e*2)-e)}function f5e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function m5e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function g5e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function v5e(t,e){return t+Math.random()*(e-t)}function y5e(t){return t*(.5-Math.random())}function b5e(t){t!==void 0&&(rye=t);let e=rye+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function _5e(t){return t*$P}function w5e(t){return t*e1}function bW(t){return(t&t-1)===0&&t!==0}function x5e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function MN(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function S5e(t,e,n,r,i){const o=Math.cos,u=Math.sin,h=o(n/2),m=u(n/2),v=o((e+r)/2),x=u((e+r)/2),E=o((e-r)/2),k=u((e-r)/2),D=o((r-e)/2),G=u((r-e)/2);switch(i){case"XYX":t.set(h*x,m*E,m*k,h*v);break;case"YZY":t.set(m*k,h*x,m*E,h*v);break;case"ZXZ":t.set(m*E,m*k,h*x,h*v);break;case"XZX":t.set(h*x,m*G,m*D,h*v);break;case"YXY":t.set(m*D,h*x,m*G,h*v);break;case"ZYZ":t.set(m*G,m*D,h*x,h*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function uw(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ya(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const qo={DEG2RAD:$P,RAD2DEG:e1,generateUUID:tg,clamp:Bs,euclideanModulo:n7,mapLinear:c5e,inverseLerp:d5e,lerp:KP,damp:h5e,pingpong:p5e,smoothstep:f5e,smootherstep:m5e,randInt:g5e,randFloat:v5e,randFloatSpread:y5e,seededRandom:b5e,degToRad:_5e,radToDeg:w5e,isPowerOfTwo:bW,ceilPowerOfTwo:x5e,floorPowerOfTwo:MN,setQuaternionFromProperEuler:S5e,normalize:ya,denormalize:uw};class un{constructor(e=0,n=0){un.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Bs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,u=this.y-e.y;return this.x=o*r-u*i+e.x,this.y=o*i+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mr{constructor(e,n,r,i,o,u,h,m,v){mr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,h,m,v)}set(e,n,r,i,o,u,h,m,v){const x=this.elements;return x[0]=e,x[1]=i,x[2]=h,x[3]=n,x[4]=o,x[5]=m,x[6]=r,x[7]=u,x[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],h=r[3],m=r[6],v=r[1],x=r[4],E=r[7],k=r[2],D=r[5],G=r[8],N=i[0],z=i[3],U=i[6],P=i[1],$=i[4],Q=i[7],ye=i[2],q=i[5],ie=i[8];return o[0]=u*N+h*P+m*ye,o[3]=u*z+h*$+m*q,o[6]=u*U+h*Q+m*ie,o[1]=v*N+x*P+E*ye,o[4]=v*z+x*$+E*q,o[7]=v*U+x*Q+E*ie,o[2]=k*N+D*P+G*ye,o[5]=k*z+D*$+G*q,o[8]=k*U+D*Q+G*ie,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],h=e[5],m=e[6],v=e[7],x=e[8];return n*u*x-n*h*v-r*o*x+r*h*m+i*o*v-i*u*m}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],h=e[5],m=e[6],v=e[7],x=e[8],E=x*u-h*v,k=h*m-x*o,D=v*o-u*m,G=n*E+r*k+i*D;if(G===0)return this.set(0,0,0,0,0,0,0,0,0);const N=1/G;return e[0]=E*N,e[1]=(i*v-x*r)*N,e[2]=(h*r-i*u)*N,e[3]=k*N,e[4]=(x*n-i*m)*N,e[5]=(i*o-h*n)*N,e[6]=D*N,e[7]=(r*m-v*n)*N,e[8]=(u*n-r*o)*N,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,u,h){const m=Math.cos(o),v=Math.sin(o);return this.set(r*m,r*v,-r*(m*u+v*h)+u+e,-i*v,i*m,-i*(-v*u+m*h)+h+n,0,0,1),this}scale(e,n){return this.premultiply(eG.makeScale(e,n)),this}rotate(e){return this.premultiply(eG.makeRotation(-e)),this}translate(e,n){return this.premultiply(eG.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const eG=new mr;function cSe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function wT(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function E5e(){const t=wT("canvas");return t.style.display="block",t}const iye={};function XP(t){t in iye||(iye[t]=!0,console.warn(t))}const sye=new mr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),oye=new mr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),V3={[yp]:{transfer:EN,primaries:CN,toReference:t=>t,fromReference:t=>t},[ns]:{transfer:Pi,primaries:CN,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[gF]:{transfer:EN,primaries:PN,toReference:t=>t.applyMatrix3(oye),fromReference:t=>t.applyMatrix3(sye)},[t7]:{transfer:Pi,primaries:PN,toReference:t=>t.convertSRGBToLinear().applyMatrix3(oye),fromReference:t=>t.applyMatrix3(sye).convertLinearToSRGB()}},C5e=new Set([yp,gF]),oi={enabled:!0,_workingColorSpace:yp,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!C5e.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=V3[e].toReference,i=V3[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return V3[t].primaries},getTransfer:function(t){return t===fu?EN:V3[t].transfer}};function zw(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function tG(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let V_;class dSe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{V_===void 0&&(V_=wT("canvas")),V_.width=e.width,V_.height=e.height;const r=V_.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=V_}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=wT("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let u=0;u<o.length;u++)o[u]=zw(o[u]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(zw(n[r]/255)*255):n[r]=zw(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let P5e=0;class hSe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:P5e++}),this.uuid=tg(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let u=0,h=i.length;u<h;u++)i[u].isDataTexture?o.push(nG(i[u].image)):o.push(nG(i[u]))}else o=nG(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function nG(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?dSe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let T5e=0;class is extends Eu{constructor(e=is.DEFAULT_IMAGE,n=is.DEFAULT_MAPPING,r=bl,i=bl,o=Zo,u=bT,h=pu,m=xl,v=is.DEFAULT_ANISOTROPY,x=fu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:T5e++}),this.uuid=tg(),this.name="",this.source=new hSe(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=u,this.anisotropy=v,this.format=h,this.internalFormat=null,this.type=m,this.offset=new un(0,0),this.repeat=new un(1,1),this.center=new un(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof x=="string"?this.colorSpace=x:(XP("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=x===lp?ns:fu),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tSe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vp:e.x=e.x-Math.floor(e.x);break;case bl:e.x=e.x<0?0:1;break;case gW:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case vp:e.y=e.y-Math.floor(e.y);break;case bl:e.y=e.y<0?0:1;break;case gW:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return XP("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ns?lp:mF}set encoding(e){XP("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===lp?ns:fu}}is.DEFAULT_IMAGE=null;is.DEFAULT_MAPPING=tSe;is.DEFAULT_ANISOTROPY=1;class Pr{constructor(e=0,n=0,r=0,i=1){Pr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*i+u[12]*o,this.y=u[1]*n+u[5]*r+u[9]*i+u[13]*o,this.z=u[2]*n+u[6]*r+u[10]*i+u[14]*o,this.w=u[3]*n+u[7]*r+u[11]*i+u[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const m=e.elements,v=m[0],x=m[4],E=m[8],k=m[1],D=m[5],G=m[9],N=m[2],z=m[6],U=m[10];if(Math.abs(x-k)<.01&&Math.abs(E-N)<.01&&Math.abs(G-z)<.01){if(Math.abs(x+k)<.1&&Math.abs(E+N)<.1&&Math.abs(G+z)<.1&&Math.abs(v+D+U-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const $=(v+1)/2,Q=(D+1)/2,ye=(U+1)/2,q=(x+k)/4,ie=(E+N)/4,pe=(G+z)/4;return $>Q&&$>ye?$<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt($),i=q/r,o=ie/r):Q>ye?Q<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(Q),r=q/i,o=pe/i):ye<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(ye),r=ie/o,i=pe/o),this.set(r,i,o,n),this}let P=Math.sqrt((z-G)*(z-G)+(E-N)*(E-N)+(k-x)*(k-x));return Math.abs(P)<.001&&(P=1),this.x=(z-G)/P,this.y=(E-N)/P,this.z=(k-x)/P,this.w=Math.acos((v+D+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class M5e extends Eu{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Pr(0,0,e,n),this.scissorTest=!1,this.viewport=new Pr(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(XP("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===lp?ns:fu),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zo,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new is(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new hSe(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Cl extends M5e{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class pSe extends is{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Co,this.minFilter=Co,this.wrapR=bl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class k5e extends is{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Co,this.minFilter=Co,this.wrapR=bl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ms{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,u,h){let m=r[i+0],v=r[i+1],x=r[i+2],E=r[i+3];const k=o[u+0],D=o[u+1],G=o[u+2],N=o[u+3];if(h===0){e[n+0]=m,e[n+1]=v,e[n+2]=x,e[n+3]=E;return}if(h===1){e[n+0]=k,e[n+1]=D,e[n+2]=G,e[n+3]=N;return}if(E!==N||m!==k||v!==D||x!==G){let z=1-h;const U=m*k+v*D+x*G+E*N,P=U>=0?1:-1,$=1-U*U;if($>Number.EPSILON){const ye=Math.sqrt($),q=Math.atan2(ye,U*P);z=Math.sin(z*q)/ye,h=Math.sin(h*q)/ye}const Q=h*P;if(m=m*z+k*Q,v=v*z+D*Q,x=x*z+G*Q,E=E*z+N*Q,z===1-h){const ye=1/Math.sqrt(m*m+v*v+x*x+E*E);m*=ye,v*=ye,x*=ye,E*=ye}}e[n]=m,e[n+1]=v,e[n+2]=x,e[n+3]=E}static multiplyQuaternionsFlat(e,n,r,i,o,u){const h=r[i],m=r[i+1],v=r[i+2],x=r[i+3],E=o[u],k=o[u+1],D=o[u+2],G=o[u+3];return e[n]=h*G+x*E+m*D-v*k,e[n+1]=m*G+x*k+v*E-h*D,e[n+2]=v*G+x*D+h*k-m*E,e[n+3]=x*G-h*E-m*k-v*D,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,u=e._order,h=Math.cos,m=Math.sin,v=h(r/2),x=h(i/2),E=h(o/2),k=m(r/2),D=m(i/2),G=m(o/2);switch(u){case"XYZ":this._x=k*x*E+v*D*G,this._y=v*D*E-k*x*G,this._z=v*x*G+k*D*E,this._w=v*x*E-k*D*G;break;case"YXZ":this._x=k*x*E+v*D*G,this._y=v*D*E-k*x*G,this._z=v*x*G-k*D*E,this._w=v*x*E+k*D*G;break;case"ZXY":this._x=k*x*E-v*D*G,this._y=v*D*E+k*x*G,this._z=v*x*G+k*D*E,this._w=v*x*E-k*D*G;break;case"ZYX":this._x=k*x*E-v*D*G,this._y=v*D*E+k*x*G,this._z=v*x*G-k*D*E,this._w=v*x*E+k*D*G;break;case"YZX":this._x=k*x*E+v*D*G,this._y=v*D*E+k*x*G,this._z=v*x*G-k*D*E,this._w=v*x*E-k*D*G;break;case"XZY":this._x=k*x*E-v*D*G,this._y=v*D*E-k*x*G,this._z=v*x*G+k*D*E,this._w=v*x*E+k*D*G;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],u=n[1],h=n[5],m=n[9],v=n[2],x=n[6],E=n[10],k=r+h+E;if(k>0){const D=.5/Math.sqrt(k+1);this._w=.25/D,this._x=(x-m)*D,this._y=(o-v)*D,this._z=(u-i)*D}else if(r>h&&r>E){const D=2*Math.sqrt(1+r-h-E);this._w=(x-m)/D,this._x=.25*D,this._y=(i+u)/D,this._z=(o+v)/D}else if(h>E){const D=2*Math.sqrt(1+h-r-E);this._w=(o-v)/D,this._x=(i+u)/D,this._y=.25*D,this._z=(m+x)/D}else{const D=2*Math.sqrt(1+E-r-h);this._w=(u-i)/D,this._x=(o+v)/D,this._y=(m+x)/D,this._z=.25*D}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Bs(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,u=e._w,h=n._x,m=n._y,v=n._z,x=n._w;return this._x=r*x+u*h+i*v-o*m,this._y=i*x+u*m+o*h-r*v,this._z=o*x+u*v+r*m-i*h,this._w=u*x-r*h-i*m-o*v,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,u=this._w;let h=u*e._w+r*e._x+i*e._y+o*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=u,this._x=r,this._y=i,this._z=o,this;const m=1-h*h;if(m<=Number.EPSILON){const D=1-n;return this._w=D*u+n*this._w,this._x=D*r+n*this._x,this._y=D*i+n*this._y,this._z=D*o+n*this._z,this.normalize(),this}const v=Math.sqrt(m),x=Math.atan2(v,h),E=Math.sin((1-n)*x)/v,k=Math.sin(n*x)/v;return this._w=u*E+this._w*k,this._x=r*E+this._x*k,this._y=i*E+this._y*k,this._z=o*E+this._z*k,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Le{constructor(e=0,n=0,r=0){Le.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(aye.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(aye.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,u=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*u,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*u,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*u,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,u=e.y,h=e.z,m=e.w,v=2*(u*i-h*r),x=2*(h*n-o*i),E=2*(o*r-u*n);return this.x=n+m*v+u*E-h*x,this.y=r+m*x+h*v-o*E,this.z=i+m*E+o*x-u*v,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,u=n.x,h=n.y,m=n.z;return this.x=i*m-o*h,this.y=o*u-r*m,this.z=r*h-i*u,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return rG.copy(this).projectOnVector(e),this.sub(rG)}reflect(e){return this.sub(rG.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Bs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const rG=new Le,aye=new Ms;class c1{constructor(e=new Le(1/0,1/0,1/0),n=new Le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(pc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(pc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=pc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let u=0,h=o.count;u<h;u++)e.isMesh===!0?e.getVertexPosition(u,pc):pc.fromBufferAttribute(o,u),pc.applyMatrix4(e.matrixWorld),this.expandByPoint(pc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),j3.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),j3.copy(r.boundingBox)),j3.applyMatrix4(e.matrixWorld),this.union(j3)}const i=e.children;for(let o=0,u=i.length;o<u;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,pc),pc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fP),H3.subVectors(this.max,fP),j_.subVectors(e.a,fP),H_.subVectors(e.b,fP),G_.subVectors(e.c,fP),rm.subVectors(H_,j_),im.subVectors(G_,H_),qv.subVectors(j_,G_);let n=[0,-rm.z,rm.y,0,-im.z,im.y,0,-qv.z,qv.y,rm.z,0,-rm.x,im.z,0,-im.x,qv.z,0,-qv.x,-rm.y,rm.x,0,-im.y,im.x,0,-qv.y,qv.x,0];return!iG(n,j_,H_,G_,H3)||(n=[1,0,0,0,1,0,0,0,1],!iG(n,j_,H_,G_,H3))?!1:(G3.crossVectors(rm,im),n=[G3.x,G3.y,G3.z],iG(n,j_,H_,G_,H3))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(pc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uh=[new Le,new Le,new Le,new Le,new Le,new Le,new Le,new Le],pc=new Le,j3=new c1,j_=new Le,H_=new Le,G_=new Le,rm=new Le,im=new Le,qv=new Le,fP=new Le,H3=new Le,G3=new Le,Yv=new Le;function iG(t,e,n,r,i){for(let o=0,u=t.length-3;o<=u;o+=3){Yv.fromArray(t,o);const h=i.x*Math.abs(Yv.x)+i.y*Math.abs(Yv.y)+i.z*Math.abs(Yv.z),m=e.dot(Yv),v=n.dot(Yv),x=r.dot(Yv);if(Math.max(-Math.max(m,v,x),Math.min(m,v,x))>h)return!1}return!0}const A5e=new c1,mP=new Le,sG=new Le;class d1{constructor(e=new Le,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):A5e.setFromPoints(e).getCenter(r);let i=0;for(let o=0,u=e.length;o<u;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mP.subVectors(e,this.center);const n=mP.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(mP,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sG.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mP.copy(e.center).add(sG)),this.expandByPoint(mP.copy(e.center).sub(sG))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const zh=new Le,oG=new Le,W3=new Le,sm=new Le,aG=new Le,$3=new Le,lG=new Le;class QT{constructor(e=new Le,n=new Le(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=zh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(zh.copy(this.origin).addScaledVector(this.direction,n),zh.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){oG.copy(e).add(n).multiplyScalar(.5),W3.copy(n).sub(e).normalize(),sm.copy(this.origin).sub(oG);const o=e.distanceTo(n)*.5,u=-this.direction.dot(W3),h=sm.dot(this.direction),m=-sm.dot(W3),v=sm.lengthSq(),x=Math.abs(1-u*u);let E,k,D,G;if(x>0)if(E=u*m-h,k=u*h-m,G=o*x,E>=0)if(k>=-G)if(k<=G){const N=1/x;E*=N,k*=N,D=E*(E+u*k+2*h)+k*(u*E+k+2*m)+v}else k=o,E=Math.max(0,-(u*k+h)),D=-E*E+k*(k+2*m)+v;else k=-o,E=Math.max(0,-(u*k+h)),D=-E*E+k*(k+2*m)+v;else k<=-G?(E=Math.max(0,-(-u*o+h)),k=E>0?-o:Math.min(Math.max(-o,-m),o),D=-E*E+k*(k+2*m)+v):k<=G?(E=0,k=Math.min(Math.max(-o,-m),o),D=k*(k+2*m)+v):(E=Math.max(0,-(u*o+h)),k=E>0?o:Math.min(Math.max(-o,-m),o),D=-E*E+k*(k+2*m)+v);else k=u>0?-o:o,E=Math.max(0,-(u*k+h)),D=-E*E+k*(k+2*m)+v;return r&&r.copy(this.origin).addScaledVector(this.direction,E),i&&i.copy(oG).addScaledVector(W3,k),D}intersectSphere(e,n){zh.subVectors(e.center,this.origin);const r=zh.dot(this.direction),i=zh.dot(zh)-r*r,o=e.radius*e.radius;if(i>o)return null;const u=Math.sqrt(o-i),h=r-u,m=r+u;return m<0?null:h<0?this.at(m,n):this.at(h,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,u,h,m;const v=1/this.direction.x,x=1/this.direction.y,E=1/this.direction.z,k=this.origin;return v>=0?(r=(e.min.x-k.x)*v,i=(e.max.x-k.x)*v):(r=(e.max.x-k.x)*v,i=(e.min.x-k.x)*v),x>=0?(o=(e.min.y-k.y)*x,u=(e.max.y-k.y)*x):(o=(e.max.y-k.y)*x,u=(e.min.y-k.y)*x),r>u||o>i||((o>r||isNaN(r))&&(r=o),(u<i||isNaN(i))&&(i=u),E>=0?(h=(e.min.z-k.z)*E,m=(e.max.z-k.z)*E):(h=(e.max.z-k.z)*E,m=(e.min.z-k.z)*E),r>m||h>i)||((h>r||r!==r)&&(r=h),(m<i||i!==i)&&(i=m),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,zh)!==null}intersectTriangle(e,n,r,i,o){aG.subVectors(n,e),$3.subVectors(r,e),lG.crossVectors(aG,$3);let u=this.direction.dot(lG),h;if(u>0){if(i)return null;h=1}else if(u<0)h=-1,u=-u;else return null;sm.subVectors(this.origin,e);const m=h*this.direction.dot($3.crossVectors(sm,$3));if(m<0)return null;const v=h*this.direction.dot(aG.cross(sm));if(v<0||m+v>u)return null;const x=-h*sm.dot(lG);return x<0?null:this.at(x/u,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,n,r,i,o,u,h,m,v,x,E,k,D,G,N,z){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,h,m,v,x,E,k,D,G,N,z)}set(e,n,r,i,o,u,h,m,v,x,E,k,D,G,N,z){const U=this.elements;return U[0]=e,U[4]=n,U[8]=r,U[12]=i,U[1]=o,U[5]=u,U[9]=h,U[13]=m,U[2]=v,U[6]=x,U[10]=E,U[14]=k,U[3]=D,U[7]=G,U[11]=N,U[15]=z,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/W_.setFromMatrixColumn(e,0).length(),o=1/W_.setFromMatrixColumn(e,1).length(),u=1/W_.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,u=Math.cos(r),h=Math.sin(r),m=Math.cos(i),v=Math.sin(i),x=Math.cos(o),E=Math.sin(o);if(e.order==="XYZ"){const k=u*x,D=u*E,G=h*x,N=h*E;n[0]=m*x,n[4]=-m*E,n[8]=v,n[1]=D+G*v,n[5]=k-N*v,n[9]=-h*m,n[2]=N-k*v,n[6]=G+D*v,n[10]=u*m}else if(e.order==="YXZ"){const k=m*x,D=m*E,G=v*x,N=v*E;n[0]=k+N*h,n[4]=G*h-D,n[8]=u*v,n[1]=u*E,n[5]=u*x,n[9]=-h,n[2]=D*h-G,n[6]=N+k*h,n[10]=u*m}else if(e.order==="ZXY"){const k=m*x,D=m*E,G=v*x,N=v*E;n[0]=k-N*h,n[4]=-u*E,n[8]=G+D*h,n[1]=D+G*h,n[5]=u*x,n[9]=N-k*h,n[2]=-u*v,n[6]=h,n[10]=u*m}else if(e.order==="ZYX"){const k=u*x,D=u*E,G=h*x,N=h*E;n[0]=m*x,n[4]=G*v-D,n[8]=k*v+N,n[1]=m*E,n[5]=N*v+k,n[9]=D*v-G,n[2]=-v,n[6]=h*m,n[10]=u*m}else if(e.order==="YZX"){const k=u*m,D=u*v,G=h*m,N=h*v;n[0]=m*x,n[4]=N-k*E,n[8]=G*E+D,n[1]=E,n[5]=u*x,n[9]=-h*x,n[2]=-v*x,n[6]=D*E+G,n[10]=k-N*E}else if(e.order==="XZY"){const k=u*m,D=u*v,G=h*m,N=h*v;n[0]=m*x,n[4]=-E,n[8]=v*x,n[1]=k*E+N,n[5]=u*x,n[9]=D*E-G,n[2]=G*E-D,n[6]=h*x,n[10]=N*E+k}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(I5e,e,R5e)}lookAt(e,n,r){const i=this.elements;return gl.subVectors(e,n),gl.lengthSq()===0&&(gl.z=1),gl.normalize(),om.crossVectors(r,gl),om.lengthSq()===0&&(Math.abs(r.z)===1?gl.x+=1e-4:gl.z+=1e-4,gl.normalize(),om.crossVectors(r,gl)),om.normalize(),K3.crossVectors(gl,om),i[0]=om.x,i[4]=K3.x,i[8]=gl.x,i[1]=om.y,i[5]=K3.y,i[9]=gl.y,i[2]=om.z,i[6]=K3.z,i[10]=gl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],h=r[4],m=r[8],v=r[12],x=r[1],E=r[5],k=r[9],D=r[13],G=r[2],N=r[6],z=r[10],U=r[14],P=r[3],$=r[7],Q=r[11],ye=r[15],q=i[0],ie=i[4],pe=i[8],W=i[12],he=i[1],Ye=i[5],at=i[9],Et=i[13],ue=i[2],Ge=i[6],Te=i[10],it=i[14],Ne=i[3],Xe=i[7],qe=i[11],ft=i[15];return o[0]=u*q+h*he+m*ue+v*Ne,o[4]=u*ie+h*Ye+m*Ge+v*Xe,o[8]=u*pe+h*at+m*Te+v*qe,o[12]=u*W+h*Et+m*it+v*ft,o[1]=x*q+E*he+k*ue+D*Ne,o[5]=x*ie+E*Ye+k*Ge+D*Xe,o[9]=x*pe+E*at+k*Te+D*qe,o[13]=x*W+E*Et+k*it+D*ft,o[2]=G*q+N*he+z*ue+U*Ne,o[6]=G*ie+N*Ye+z*Ge+U*Xe,o[10]=G*pe+N*at+z*Te+U*qe,o[14]=G*W+N*Et+z*it+U*ft,o[3]=P*q+$*he+Q*ue+ye*Ne,o[7]=P*ie+$*Ye+Q*Ge+ye*Xe,o[11]=P*pe+$*at+Q*Te+ye*qe,o[15]=P*W+$*Et+Q*it+ye*ft,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],u=e[1],h=e[5],m=e[9],v=e[13],x=e[2],E=e[6],k=e[10],D=e[14],G=e[3],N=e[7],z=e[11],U=e[15];return G*(+o*m*E-i*v*E-o*h*k+r*v*k+i*h*D-r*m*D)+N*(+n*m*D-n*v*k+o*u*k-i*u*D+i*v*x-o*m*x)+z*(+n*v*E-n*h*D-o*u*E+r*u*D+o*h*x-r*v*x)+U*(-i*h*x-n*m*E+n*h*k+i*u*E-r*u*k+r*m*x)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],h=e[5],m=e[6],v=e[7],x=e[8],E=e[9],k=e[10],D=e[11],G=e[12],N=e[13],z=e[14],U=e[15],P=E*z*v-N*k*v+N*m*D-h*z*D-E*m*U+h*k*U,$=G*k*v-x*z*v-G*m*D+u*z*D+x*m*U-u*k*U,Q=x*N*v-G*E*v+G*h*D-u*N*D-x*h*U+u*E*U,ye=G*E*m-x*N*m-G*h*k+u*N*k+x*h*z-u*E*z,q=n*P+r*$+i*Q+o*ye;if(q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ie=1/q;return e[0]=P*ie,e[1]=(N*k*o-E*z*o-N*i*D+r*z*D+E*i*U-r*k*U)*ie,e[2]=(h*z*o-N*m*o+N*i*v-r*z*v-h*i*U+r*m*U)*ie,e[3]=(E*m*o-h*k*o-E*i*v+r*k*v+h*i*D-r*m*D)*ie,e[4]=$*ie,e[5]=(x*z*o-G*k*o+G*i*D-n*z*D-x*i*U+n*k*U)*ie,e[6]=(G*m*o-u*z*o-G*i*v+n*z*v+u*i*U-n*m*U)*ie,e[7]=(u*k*o-x*m*o+x*i*v-n*k*v-u*i*D+n*m*D)*ie,e[8]=Q*ie,e[9]=(G*E*o-x*N*o-G*r*D+n*N*D+x*r*U-n*E*U)*ie,e[10]=(u*N*o-G*h*o+G*r*v-n*N*v-u*r*U+n*h*U)*ie,e[11]=(x*h*o-u*E*o-x*r*v+n*E*v+u*r*D-n*h*D)*ie,e[12]=ye*ie,e[13]=(x*N*i-G*E*i+G*r*k-n*N*k-x*r*z+n*E*z)*ie,e[14]=(G*h*i-u*N*i-G*r*m+n*N*m+u*r*z-n*h*z)*ie,e[15]=(u*E*i-x*h*i+x*r*m-n*E*m-u*r*k+n*h*k)*ie,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,u=e.x,h=e.y,m=e.z,v=o*u,x=o*h;return this.set(v*u+r,v*h-i*m,v*m+i*h,0,v*h+i*m,x*h+r,x*m-i*u,0,v*m-i*h,x*m+i*u,o*m*m+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,u){return this.set(1,r,o,0,e,1,u,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,u=n._y,h=n._z,m=n._w,v=o+o,x=u+u,E=h+h,k=o*v,D=o*x,G=o*E,N=u*x,z=u*E,U=h*E,P=m*v,$=m*x,Q=m*E,ye=r.x,q=r.y,ie=r.z;return i[0]=(1-(N+U))*ye,i[1]=(D+Q)*ye,i[2]=(G-$)*ye,i[3]=0,i[4]=(D-Q)*q,i[5]=(1-(k+U))*q,i[6]=(z+P)*q,i[7]=0,i[8]=(G+$)*ie,i[9]=(z-P)*ie,i[10]=(1-(k+N))*ie,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=W_.set(i[0],i[1],i[2]).length();const u=W_.set(i[4],i[5],i[6]).length(),h=W_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],fc.copy(this);const v=1/o,x=1/u,E=1/h;return fc.elements[0]*=v,fc.elements[1]*=v,fc.elements[2]*=v,fc.elements[4]*=x,fc.elements[5]*=x,fc.elements[6]*=x,fc.elements[8]*=E,fc.elements[9]*=E,fc.elements[10]*=E,n.setFromRotationMatrix(fc),r.x=o,r.y=u,r.z=h,this}makePerspective(e,n,r,i,o,u,h=np){const m=this.elements,v=2*o/(n-e),x=2*o/(r-i),E=(n+e)/(n-e),k=(r+i)/(r-i);let D,G;if(h===np)D=-(u+o)/(u-o),G=-2*u*o/(u-o);else if(h===TN)D=-u/(u-o),G=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return m[0]=v,m[4]=0,m[8]=E,m[12]=0,m[1]=0,m[5]=x,m[9]=k,m[13]=0,m[2]=0,m[6]=0,m[10]=D,m[14]=G,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,n,r,i,o,u,h=np){const m=this.elements,v=1/(n-e),x=1/(r-i),E=1/(u-o),k=(n+e)*v,D=(r+i)*x;let G,N;if(h===np)G=(u+o)*E,N=-2*E;else if(h===TN)G=o*E,N=-1*E;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return m[0]=2*v,m[4]=0,m[8]=0,m[12]=-k,m[1]=0,m[5]=2*x,m[9]=0,m[13]=-D,m[2]=0,m[6]=0,m[10]=N,m[14]=-G,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const W_=new Le,fc=new zn,I5e=new Le(0,0,0),R5e=new Le(1,1,1),om=new Le,K3=new Le,gl=new Le,lye=new zn,uye=new Ms;class Sa{constructor(e=0,n=0,r=0,i=Sa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],u=i[4],h=i[8],m=i[1],v=i[5],x=i[9],E=i[2],k=i[6],D=i[10];switch(n){case"XYZ":this._y=Math.asin(Bs(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-x,D),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(k,v),this._z=0);break;case"YXZ":this._x=Math.asin(-Bs(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(h,D),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-E,o),this._z=0);break;case"ZXY":this._x=Math.asin(Bs(k,-1,1)),Math.abs(k)<.9999999?(this._y=Math.atan2(-E,D),this._z=Math.atan2(-u,v)):(this._y=0,this._z=Math.atan2(m,o));break;case"ZYX":this._y=Math.asin(-Bs(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(k,D),this._z=Math.atan2(m,o)):(this._x=0,this._z=Math.atan2(-u,v));break;case"YZX":this._z=Math.asin(Bs(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-x,v),this._y=Math.atan2(-E,o)):(this._x=0,this._y=Math.atan2(h,D));break;case"XZY":this._z=Math.asin(-Bs(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(k,v),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-x,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return lye.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lye,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return uye.setFromEuler(this),this.setFromQuaternion(uye,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sa.DEFAULT_ORDER="XYZ";class r7{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let D5e=0;const cye=new Le,$_=new Ms,Vh=new zn,X3=new Le,gP=new Le,O5e=new Le,L5e=new Ms,dye=new Le(1,0,0),hye=new Le(0,1,0),pye=new Le(0,0,1),N5e={type:"added"},F5e={type:"removed"};class Kr extends Eu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:D5e++}),this.uuid=tg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kr.DEFAULT_UP.clone();const e=new Le,n=new Sa,r=new Ms,i=new Le(1,1,1);function o(){r.setFromEuler(n,!1)}function u(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new mr}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=Kr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new r7,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return $_.setFromAxisAngle(e,n),this.quaternion.multiply($_),this}rotateOnWorldAxis(e,n){return $_.setFromAxisAngle(e,n),this.quaternion.premultiply($_),this}rotateX(e){return this.rotateOnAxis(dye,e)}rotateY(e){return this.rotateOnAxis(hye,e)}rotateZ(e){return this.rotateOnAxis(pye,e)}translateOnAxis(e,n){return cye.copy(e).applyQuaternion(this.quaternion),this.position.add(cye.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(dye,e)}translateY(e){return this.translateOnAxis(hye,e)}translateZ(e){return this.translateOnAxis(pye,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vh.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?X3.copy(e):X3.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),gP.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vh.lookAt(gP,X3,this.up):Vh.lookAt(X3,gP,this.up),this.quaternion.setFromRotationMatrix(Vh),i&&(Vh.extractRotation(i.matrixWorld),$_.setFromRotationMatrix(Vh),this.quaternion.premultiply($_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(N5e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(F5e)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const u=this.children[r].getObjectByProperty(e,n);if(u!==void 0)return u}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,u=i.length;o<u;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gP,e,O5e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gP,L5e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,u=i.length;o<u;o++){const h=i[o];h.matrixWorldAutoUpdate===!0&&h.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(h=>({boxInitialized:h.boxInitialized,boxMin:h.box.min.toArray(),boxMax:h.box.max.toArray(),sphereInitialized:h.sphereInitialized,sphereRadius:h.sphere.radius,sphereCenter:h.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let v=0,x=m.length;v<x;v++){const E=m[v];o(e.shapes,E)}else o(e.shapes,m)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,v=this.material.length;m<v;m++)h.push(o(e.materials,this.material[m]));i.material=h}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let h=0;h<this.children.length;h++)i.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];i.animations.push(o(e.animations,m))}}if(n){const h=u(e.geometries),m=u(e.materials),v=u(e.textures),x=u(e.images),E=u(e.shapes),k=u(e.skeletons),D=u(e.animations),G=u(e.nodes);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),x.length>0&&(r.images=x),E.length>0&&(r.shapes=E),k.length>0&&(r.skeletons=k),D.length>0&&(r.animations=D),G.length>0&&(r.nodes=G)}return r.object=i,r;function u(h){const m=[];for(const v in h){const x=h[v];delete x.metadata,m.push(x)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Kr.DEFAULT_UP=new Le(0,1,0);Kr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const mc=new Le,jh=new Le,uG=new Le,Hh=new Le,K_=new Le,X_=new Le,fye=new Le,cG=new Le,dG=new Le,hG=new Le;let q3=!1;class _c{constructor(e=new Le,n=new Le,r=new Le){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),mc.subVectors(e,n),i.cross(mc);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){mc.subVectors(i,n),jh.subVectors(r,n),uG.subVectors(e,n);const u=mc.dot(mc),h=mc.dot(jh),m=mc.dot(uG),v=jh.dot(jh),x=jh.dot(uG),E=u*v-h*h;if(E===0)return o.set(0,0,0),null;const k=1/E,D=(v*m-h*x)*k,G=(u*x-h*m)*k;return o.set(1-D-G,G,D)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Hh)===null?!1:Hh.x>=0&&Hh.y>=0&&Hh.x+Hh.y<=1}static getUV(e,n,r,i,o,u,h,m){return q3===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),q3=!0),this.getInterpolation(e,n,r,i,o,u,h,m)}static getInterpolation(e,n,r,i,o,u,h,m){return this.getBarycoord(e,n,r,i,Hh)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(o,Hh.x),m.addScaledVector(u,Hh.y),m.addScaledVector(h,Hh.z),m)}static isFrontFacing(e,n,r,i){return mc.subVectors(r,n),jh.subVectors(e,n),mc.cross(jh).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mc.subVectors(this.c,this.b),jh.subVectors(this.a,this.b),mc.cross(jh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _c.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return _c.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,o){return q3===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),q3=!0),_c.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}getInterpolation(e,n,r,i,o){return _c.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return _c.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _c.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let u,h;K_.subVectors(i,r),X_.subVectors(o,r),cG.subVectors(e,r);const m=K_.dot(cG),v=X_.dot(cG);if(m<=0&&v<=0)return n.copy(r);dG.subVectors(e,i);const x=K_.dot(dG),E=X_.dot(dG);if(x>=0&&E<=x)return n.copy(i);const k=m*E-x*v;if(k<=0&&m>=0&&x<=0)return u=m/(m-x),n.copy(r).addScaledVector(K_,u);hG.subVectors(e,o);const D=K_.dot(hG),G=X_.dot(hG);if(G>=0&&D<=G)return n.copy(o);const N=D*v-m*G;if(N<=0&&v>=0&&G<=0)return h=v/(v-G),n.copy(r).addScaledVector(X_,h);const z=x*G-D*E;if(z<=0&&E-x>=0&&D-G>=0)return fye.subVectors(o,i),h=(E-x)/(E-x+(D-G)),n.copy(i).addScaledVector(fye,h);const U=1/(z+N+k);return u=N*U,h=k*U,n.copy(r).addScaledVector(K_,u).addScaledVector(X_,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const fSe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},am={h:0,s:0,l:0},Y3={h:0,s:0,l:0};function pG(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Sn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ns){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,oi.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=oi.workingColorSpace){return this.r=e,this.g=n,this.b=r,oi.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=oi.workingColorSpace){if(e=n7(e,1),n=Bs(n,0,1),r=Bs(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;this.r=pG(u,o,e+1/3),this.g=pG(u,o,e),this.b=pG(u,o,e-1/3)}return oi.toWorkingColorSpace(this,i),this}setStyle(e,n=ns){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const u=i[1],h=i[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(u===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ns){const r=fSe[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=zw(e.r),this.g=zw(e.g),this.b=zw(e.b),this}copyLinearToSRGB(e){return this.r=tG(e.r),this.g=tG(e.g),this.b=tG(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ns){return oi.fromWorkingColorSpace(Wo.copy(this),e),Math.round(Bs(Wo.r*255,0,255))*65536+Math.round(Bs(Wo.g*255,0,255))*256+Math.round(Bs(Wo.b*255,0,255))}getHexString(e=ns){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=oi.workingColorSpace){oi.fromWorkingColorSpace(Wo.copy(this),n);const r=Wo.r,i=Wo.g,o=Wo.b,u=Math.max(r,i,o),h=Math.min(r,i,o);let m,v;const x=(h+u)/2;if(h===u)m=0,v=0;else{const E=u-h;switch(v=x<=.5?E/(u+h):E/(2-u-h),u){case r:m=(i-o)/E+(i<o?6:0);break;case i:m=(o-r)/E+2;break;case o:m=(r-i)/E+4;break}m/=6}return e.h=m,e.s=v,e.l=x,e}getRGB(e,n=oi.workingColorSpace){return oi.fromWorkingColorSpace(Wo.copy(this),n),e.r=Wo.r,e.g=Wo.g,e.b=Wo.b,e}getStyle(e=ns){oi.fromWorkingColorSpace(Wo.copy(this),e);const n=Wo.r,r=Wo.g,i=Wo.b;return e!==ns?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(am),this.setHSL(am.h+e,am.s+n,am.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(am),e.getHSL(Y3);const r=KP(am.h,Y3.h,n),i=KP(am.s,Y3.s,n),o=KP(am.l,Y3.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wo=new Sn;Sn.NAMES=fSe;let B5e=0;class Cu extends Eu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:B5e++}),this.uuid=tg(),this.name="",this.type="Material",this.blending=Uw,this.side=gp,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=pW,this.blendDst=fW,this.blendEquation=m0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Sn(0,0,0),this.blendAlpha=0,this.depthFunc=bN,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tye,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=z_,this.stencilZFail=z_,this.stencilZPass=z_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Uw&&(r.blending=this.blending),this.side!==gp&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==pW&&(r.blendSrc=this.blendSrc),this.blendDst!==fW&&(r.blendDst=this.blendDst),this.blendEquation!==m0&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==bN&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==tye&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==z_&&(r.stencilFail=this.stencilFail),this.stencilZFail!==z_&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==z_&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const u=[];for(const h in o){const m=o[h];delete m.metadata,u.push(m)}return u}if(n){const o=i(e.textures),u=i(e.images);o.length>0&&(r.textures=o),u.length>0&&(r.images=u)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class xT extends Cu{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Cs=new Le,Z3=new un;class qa{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=nye,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=tp,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Z3.fromBufferAttribute(this,n),Z3.applyMatrix3(e),this.setXY(n,Z3.x,Z3.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Cs.fromBufferAttribute(this,n),Cs.applyMatrix3(e),this.setXYZ(n,Cs.x,Cs.y,Cs.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Cs.fromBufferAttribute(this,n),Cs.applyMatrix4(e),this.setXYZ(n,Cs.x,Cs.y,Cs.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Cs.fromBufferAttribute(this,n),Cs.applyNormalMatrix(e),this.setXYZ(n,Cs.x,Cs.y,Cs.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Cs.fromBufferAttribute(this,n),Cs.transformDirection(e),this.setXYZ(n,Cs.x,Cs.y,Cs.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=uw(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ya(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=uw(n,this.array)),n}setX(e,n){return this.normalized&&(n=ya(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=uw(n,this.array)),n}setY(e,n){return this.normalized&&(n=ya(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=uw(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ya(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=uw(n,this.array)),n}setW(e,n){return this.normalized&&(n=ya(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ya(n,this.array),r=ya(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=ya(n,this.array),r=ya(r,this.array),i=ya(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=ya(n,this.array),r=ya(r,this.array),i=ya(i,this.array),o=ya(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==nye&&(e.usage=this.usage),e}}class i7 extends qa{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class mSe extends qa{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Mi extends qa{constructor(e,n,r){super(new Float32Array(e),n,r)}}let U5e=0;const su=new zn,fG=new Kr,q_=new Le,vl=new c1,vP=new c1,Js=new Le;class ea extends Eu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U5e++}),this.uuid=tg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cSe(e)?mSe:i7)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new mr().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return su.makeRotationFromQuaternion(e),this.applyMatrix4(su),this}rotateX(e){return su.makeRotationX(e),this.applyMatrix4(su),this}rotateY(e){return su.makeRotationY(e),this.applyMatrix4(su),this}rotateZ(e){return su.makeRotationZ(e),this.applyMatrix4(su),this}translate(e,n,r){return su.makeTranslation(e,n,r),this.applyMatrix4(su),this}scale(e,n,r){return su.makeScale(e,n,r),this.applyMatrix4(su),this}lookAt(e){return fG.lookAt(e),fG.updateMatrix(),this.applyMatrix4(fG.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(q_).negate(),this.translate(q_.x,q_.y,q_.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Mi(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new c1);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Le(-1/0,-1/0,-1/0),new Le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];vl.setFromBufferAttribute(o),this.morphTargetsRelative?(Js.addVectors(this.boundingBox.min,vl.min),this.boundingBox.expandByPoint(Js),Js.addVectors(this.boundingBox.max,vl.max),this.boundingBox.expandByPoint(Js)):(this.boundingBox.expandByPoint(vl.min),this.boundingBox.expandByPoint(vl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new d1);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Le,1/0);return}if(e){const r=this.boundingSphere.center;if(vl.setFromBufferAttribute(e),n)for(let o=0,u=n.length;o<u;o++){const h=n[o];vP.setFromBufferAttribute(h),this.morphTargetsRelative?(Js.addVectors(vl.min,vP.min),vl.expandByPoint(Js),Js.addVectors(vl.max,vP.max),vl.expandByPoint(Js)):(vl.expandByPoint(vP.min),vl.expandByPoint(vP.max))}vl.getCenter(r);let i=0;for(let o=0,u=e.count;o<u;o++)Js.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Js));if(n)for(let o=0,u=n.length;o<u;o++){const h=n[o],m=this.morphTargetsRelative;for(let v=0,x=h.count;v<x;v++)Js.fromBufferAttribute(h,v),m&&(q_.fromBufferAttribute(e,v),Js.add(q_)),i=Math.max(i,r.distanceToSquared(Js))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,u=n.uv.array,h=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qa(new Float32Array(4*h),4));const m=this.getAttribute("tangent").array,v=[],x=[];for(let he=0;he<h;he++)v[he]=new Le,x[he]=new Le;const E=new Le,k=new Le,D=new Le,G=new un,N=new un,z=new un,U=new Le,P=new Le;function $(he,Ye,at){E.fromArray(i,he*3),k.fromArray(i,Ye*3),D.fromArray(i,at*3),G.fromArray(u,he*2),N.fromArray(u,Ye*2),z.fromArray(u,at*2),k.sub(E),D.sub(E),N.sub(G),z.sub(G);const Et=1/(N.x*z.y-z.x*N.y);isFinite(Et)&&(U.copy(k).multiplyScalar(z.y).addScaledVector(D,-N.y).multiplyScalar(Et),P.copy(D).multiplyScalar(N.x).addScaledVector(k,-z.x).multiplyScalar(Et),v[he].add(U),v[Ye].add(U),v[at].add(U),x[he].add(P),x[Ye].add(P),x[at].add(P))}let Q=this.groups;Q.length===0&&(Q=[{start:0,count:r.length}]);for(let he=0,Ye=Q.length;he<Ye;++he){const at=Q[he],Et=at.start,ue=at.count;for(let Ge=Et,Te=Et+ue;Ge<Te;Ge+=3)$(r[Ge+0],r[Ge+1],r[Ge+2])}const ye=new Le,q=new Le,ie=new Le,pe=new Le;function W(he){ie.fromArray(o,he*3),pe.copy(ie);const Ye=v[he];ye.copy(Ye),ye.sub(ie.multiplyScalar(ie.dot(Ye))).normalize(),q.crossVectors(pe,Ye);const Et=q.dot(x[he])<0?-1:1;m[he*4]=ye.x,m[he*4+1]=ye.y,m[he*4+2]=ye.z,m[he*4+3]=Et}for(let he=0,Ye=Q.length;he<Ye;++he){const at=Q[he],Et=at.start,ue=at.count;for(let Ge=Et,Te=Et+ue;Ge<Te;Ge+=3)W(r[Ge+0]),W(r[Ge+1]),W(r[Ge+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new qa(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let k=0,D=r.count;k<D;k++)r.setXYZ(k,0,0,0);const i=new Le,o=new Le,u=new Le,h=new Le,m=new Le,v=new Le,x=new Le,E=new Le;if(e)for(let k=0,D=e.count;k<D;k+=3){const G=e.getX(k+0),N=e.getX(k+1),z=e.getX(k+2);i.fromBufferAttribute(n,G),o.fromBufferAttribute(n,N),u.fromBufferAttribute(n,z),x.subVectors(u,o),E.subVectors(i,o),x.cross(E),h.fromBufferAttribute(r,G),m.fromBufferAttribute(r,N),v.fromBufferAttribute(r,z),h.add(x),m.add(x),v.add(x),r.setXYZ(G,h.x,h.y,h.z),r.setXYZ(N,m.x,m.y,m.z),r.setXYZ(z,v.x,v.y,v.z)}else for(let k=0,D=n.count;k<D;k+=3)i.fromBufferAttribute(n,k+0),o.fromBufferAttribute(n,k+1),u.fromBufferAttribute(n,k+2),x.subVectors(u,o),E.subVectors(i,o),x.cross(E),r.setXYZ(k+0,x.x,x.y,x.z),r.setXYZ(k+1,x.x,x.y,x.z),r.setXYZ(k+2,x.x,x.y,x.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Js.fromBufferAttribute(e,n),Js.normalize(),e.setXYZ(n,Js.x,Js.y,Js.z)}toNonIndexed(){function e(h,m){const v=h.array,x=h.itemSize,E=h.normalized,k=new v.constructor(m.length*x);let D=0,G=0;for(let N=0,z=m.length;N<z;N++){h.isInterleavedBufferAttribute?D=m[N]*h.data.stride+h.offset:D=m[N]*x;for(let U=0;U<x;U++)k[G++]=v[D++]}return new qa(k,x,E)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ea,r=this.index.array,i=this.attributes;for(const h in i){const m=i[h],v=e(m,r);n.setAttribute(h,v)}const o=this.morphAttributes;for(const h in o){const m=[],v=o[h];for(let x=0,E=v.length;x<E;x++){const k=v[x],D=e(k,r);m.push(D)}n.morphAttributes[h]=m}n.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,m=u.length;h<m;h++){const v=u[h];n.addGroup(v.start,v.count,v.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const v in m)m[v]!==void 0&&(e[v]=m[v]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const m in r){const v=r[m];e.data.attributes[m]=v.toJSON(e.data)}const i={};let o=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],x=[];for(let E=0,k=v.length;E<k;E++){const D=v[E];x.push(D.toJSON(e.data))}x.length>0&&(i[m]=x,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const v in i){const x=i[v];this.setAttribute(v,x.clone(n))}const o=e.morphAttributes;for(const v in o){const x=[],E=o[v];for(let k=0,D=E.length;k<D;k++)x.push(E[k].clone(n));this.morphAttributes[v]=x}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let v=0,x=u.length;v<x;v++){const E=u[v];this.addGroup(E.start,E.count,E.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const mye=new zn,Zv=new QT,Q3=new d1,gye=new Le,Y_=new Le,Z_=new Le,Q_=new Le,mG=new Le,J3=new Le,eL=new un,tL=new un,nL=new un,vye=new Le,yye=new Le,bye=new Le,rL=new Le,iL=new Le;class ks extends Kr{constructor(e=new ea,n=new xT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const h=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,u=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const h=this.morphTargetInfluences;if(o&&h){J3.set(0,0,0);for(let m=0,v=o.length;m<v;m++){const x=h[m],E=o[m];x!==0&&(mG.fromBufferAttribute(E,e),u?J3.addScaledVector(mG,x):J3.addScaledVector(mG.sub(n),x))}n.add(J3)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Q3.copy(r.boundingSphere),Q3.applyMatrix4(o),Zv.copy(e.ray).recast(e.near),!(Q3.containsPoint(Zv.origin)===!1&&(Zv.intersectSphere(Q3,gye)===null||Zv.origin.distanceToSquared(gye)>(e.far-e.near)**2))&&(mye.copy(o).invert(),Zv.copy(e.ray).applyMatrix4(mye),!(r.boundingBox!==null&&Zv.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Zv)))}_computeIntersections(e,n,r){let i;const o=this.geometry,u=this.material,h=o.index,m=o.attributes.position,v=o.attributes.uv,x=o.attributes.uv1,E=o.attributes.normal,k=o.groups,D=o.drawRange;if(h!==null)if(Array.isArray(u))for(let G=0,N=k.length;G<N;G++){const z=k[G],U=u[z.materialIndex],P=Math.max(z.start,D.start),$=Math.min(h.count,Math.min(z.start+z.count,D.start+D.count));for(let Q=P,ye=$;Q<ye;Q+=3){const q=h.getX(Q),ie=h.getX(Q+1),pe=h.getX(Q+2);i=sL(this,U,e,r,v,x,E,q,ie,pe),i&&(i.faceIndex=Math.floor(Q/3),i.face.materialIndex=z.materialIndex,n.push(i))}}else{const G=Math.max(0,D.start),N=Math.min(h.count,D.start+D.count);for(let z=G,U=N;z<U;z+=3){const P=h.getX(z),$=h.getX(z+1),Q=h.getX(z+2);i=sL(this,u,e,r,v,x,E,P,$,Q),i&&(i.faceIndex=Math.floor(z/3),n.push(i))}}else if(m!==void 0)if(Array.isArray(u))for(let G=0,N=k.length;G<N;G++){const z=k[G],U=u[z.materialIndex],P=Math.max(z.start,D.start),$=Math.min(m.count,Math.min(z.start+z.count,D.start+D.count));for(let Q=P,ye=$;Q<ye;Q+=3){const q=Q,ie=Q+1,pe=Q+2;i=sL(this,U,e,r,v,x,E,q,ie,pe),i&&(i.faceIndex=Math.floor(Q/3),i.face.materialIndex=z.materialIndex,n.push(i))}}else{const G=Math.max(0,D.start),N=Math.min(m.count,D.start+D.count);for(let z=G,U=N;z<U;z+=3){const P=z,$=z+1,Q=z+2;i=sL(this,u,e,r,v,x,E,P,$,Q),i&&(i.faceIndex=Math.floor(z/3),n.push(i))}}}}function z5e(t,e,n,r,i,o,u,h){let m;if(e.side===Vs?m=r.intersectTriangle(u,o,i,!0,h):m=r.intersectTriangle(i,o,u,e.side===gp,h),m===null)return null;iL.copy(h),iL.applyMatrix4(t.matrixWorld);const v=n.ray.origin.distanceTo(iL);return v<n.near||v>n.far?null:{distance:v,point:iL.clone(),object:t}}function sL(t,e,n,r,i,o,u,h,m,v){t.getVertexPosition(h,Y_),t.getVertexPosition(m,Z_),t.getVertexPosition(v,Q_);const x=z5e(t,e,n,r,Y_,Z_,Q_,rL);if(x){i&&(eL.fromBufferAttribute(i,h),tL.fromBufferAttribute(i,m),nL.fromBufferAttribute(i,v),x.uv=_c.getInterpolation(rL,Y_,Z_,Q_,eL,tL,nL,new un)),o&&(eL.fromBufferAttribute(o,h),tL.fromBufferAttribute(o,m),nL.fromBufferAttribute(o,v),x.uv1=_c.getInterpolation(rL,Y_,Z_,Q_,eL,tL,nL,new un),x.uv2=x.uv1),u&&(vye.fromBufferAttribute(u,h),yye.fromBufferAttribute(u,m),bye.fromBufferAttribute(u,v),x.normal=_c.getInterpolation(rL,Y_,Z_,Q_,vye,yye,bye,new Le),x.normal.dot(r.direction)>0&&x.normal.multiplyScalar(-1));const E={a:h,b:m,c:v,normal:new Le,materialIndex:0};_c.getNormal(Y_,Z_,Q_,E.normal),x.face=E}return x}class JT extends ea{constructor(e=1,n=1,r=1,i=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:u};const h=this;i=Math.floor(i),o=Math.floor(o),u=Math.floor(u);const m=[],v=[],x=[],E=[];let k=0,D=0;G("z","y","x",-1,-1,r,n,e,u,o,0),G("z","y","x",1,-1,r,n,-e,u,o,1),G("x","z","y",1,1,e,r,n,i,u,2),G("x","z","y",1,-1,e,r,-n,i,u,3),G("x","y","z",1,-1,e,n,r,i,o,4),G("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(m),this.setAttribute("position",new Mi(v,3)),this.setAttribute("normal",new Mi(x,3)),this.setAttribute("uv",new Mi(E,2));function G(N,z,U,P,$,Q,ye,q,ie,pe,W){const he=Q/ie,Ye=ye/pe,at=Q/2,Et=ye/2,ue=q/2,Ge=ie+1,Te=pe+1;let it=0,Ne=0;const Xe=new Le;for(let qe=0;qe<Te;qe++){const ft=qe*Ye-Et;for(let Ct=0;Ct<Ge;Ct++){const mt=Ct*he-at;Xe[N]=mt*P,Xe[z]=ft*$,Xe[U]=ue,v.push(Xe.x,Xe.y,Xe.z),Xe[N]=0,Xe[z]=0,Xe[U]=q>0?1:-1,x.push(Xe.x,Xe.y,Xe.z),E.push(Ct/ie),E.push(1-qe/pe),it+=1}}for(let qe=0;qe<pe;qe++)for(let ft=0;ft<ie;ft++){const Ct=k+ft+Ge*qe,mt=k+ft+Ge*(qe+1),Pt=k+(ft+1)+Ge*(qe+1),Rt=k+(ft+1)+Ge*qe;m.push(Ct,mt,Rt),m.push(mt,Pt,Rt),Ne+=6}h.addGroup(D,Ne,W),D+=Ne,k+=it}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new JT(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function t1(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ba(t){const e={};for(let n=0;n<t.length;n++){const r=t1(t[n]);for(const i in r)e[i]=r[i]}return e}function V5e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function gSe(t){return t.getRenderTarget()===null?t.outputColorSpace:oi.workingColorSpace}const j5e={clone:t1,merge:ba};var H5e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,G5e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class el extends Cu{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=H5e,this.fragmentShader=G5e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=t1(e.uniforms),this.uniformsGroups=V5e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?n.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?n.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?n.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?n.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?n.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?n.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?n.uniforms[i]={type:"m4",value:u.toArray()}:n.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class vF extends Kr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=np}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Us extends vF{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=e1*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($P*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return e1*2*Math.atan(Math.tan($P*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,o,u){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan($P*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const m=u.fullWidth,v=u.fullHeight;o+=u.offsetX*i/m,n-=u.offsetY*r/v,i*=u.width/m,r*=u.height/v}const h=this.filmOffset;h!==0&&(o+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const J_=-90,ew=1;class W5e extends Kr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Us(J_,ew,e,n);i.layers=this.layers,this.add(i);const o=new Us(J_,ew,e,n);o.layers=this.layers,this.add(o);const u=new Us(J_,ew,e,n);u.layers=this.layers,this.add(u);const h=new Us(J_,ew,e,n);h.layers=this.layers,this.add(h);const m=new Us(J_,ew,e,n);m.layers=this.layers,this.add(m);const v=new Us(J_,ew,e,n);v.layers=this.layers,this.add(v)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,u,h,m]=n;for(const v of n)this.remove(v);if(e===np)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(e===TN)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const v of n)this.add(v),v.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,h,m,v,x]=this.children,E=e.getRenderTarget(),k=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),G=e.xr.enabled;e.xr.enabled=!1;const N=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,u),e.setRenderTarget(r,2,i),e.render(n,h),e.setRenderTarget(r,3,i),e.render(n,m),e.setRenderTarget(r,4,i),e.render(n,v),r.texture.generateMipmaps=N,e.setRenderTarget(r,5,i),e.render(n,x),e.setRenderTarget(E,k,D),e.xr.enabled=G,r.texture.needsPMREMUpdate=!0}}class yF extends is{constructor(e,n,r,i,o,u,h,m,v,x){e=e!==void 0?e:[],n=n!==void 0?n:Qw,super(e,n,r,i,o,u,h,m,v,x),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $5e extends Cl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(XP("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===lp?ns:fu),this.texture=new yF(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Zo}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new JT(5,5,5),o=new el({name:"CubemapFromEquirect",uniforms:t1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Vs,blending:Sc});o.uniforms.tEquirect.value=n;const u=new ks(i,o),h=n.minFilter;return n.minFilter===bT&&(n.minFilter=Zo),new W5e(1,10,this).update(e,u),n.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(n,r,i);e.setRenderTarget(o)}}const gG=new Le,K5e=new Le,X5e=new mr;class wm{constructor(e=new Le(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=gG.subVectors(r,n).cross(K5e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(gG),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||X5e.getNormalMatrix(e),i=this.coplanarPoint(gG).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Qv=new d1,oL=new Le;class s7{constructor(e=new wm,n=new wm,r=new wm,i=new wm,o=new wm,u=new wm){this.planes=[e,n,r,i,o,u]}set(e,n,r,i,o,u){const h=this.planes;return h[0].copy(e),h[1].copy(n),h[2].copy(r),h[3].copy(i),h[4].copy(o),h[5].copy(u),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=np){const r=this.planes,i=e.elements,o=i[0],u=i[1],h=i[2],m=i[3],v=i[4],x=i[5],E=i[6],k=i[7],D=i[8],G=i[9],N=i[10],z=i[11],U=i[12],P=i[13],$=i[14],Q=i[15];if(r[0].setComponents(m-o,k-v,z-D,Q-U).normalize(),r[1].setComponents(m+o,k+v,z+D,Q+U).normalize(),r[2].setComponents(m+u,k+x,z+G,Q+P).normalize(),r[3].setComponents(m-u,k-x,z-G,Q-P).normalize(),r[4].setComponents(m-h,k-E,z-N,Q-$).normalize(),n===np)r[5].setComponents(m+h,k+E,z+N,Q+$).normalize();else if(n===TN)r[5].setComponents(h,E,N,$).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Qv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Qv.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Qv)}intersectsSprite(e){return Qv.center.set(0,0,0),Qv.radius=.7071067811865476,Qv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Qv)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(oL.x=i.normal.x>0?e.max.x:e.min.x,oL.y=i.normal.y>0?e.max.y:e.min.y,oL.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(oL)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function vSe(){let t=null,e=!1,n=null,r=null;function i(o,u){n(o,u),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function q5e(t,e){const n=e.isWebGL2,r=new WeakMap;function i(v,x){const E=v.array,k=v.usage,D=E.byteLength,G=t.createBuffer();t.bindBuffer(x,G),t.bufferData(x,E,k),v.onUploadCallback();let N;if(E instanceof Float32Array)N=t.FLOAT;else if(E instanceof Uint16Array)if(v.isFloat16BufferAttribute)if(n)N=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else N=t.UNSIGNED_SHORT;else if(E instanceof Int16Array)N=t.SHORT;else if(E instanceof Uint32Array)N=t.UNSIGNED_INT;else if(E instanceof Int32Array)N=t.INT;else if(E instanceof Int8Array)N=t.BYTE;else if(E instanceof Uint8Array)N=t.UNSIGNED_BYTE;else if(E instanceof Uint8ClampedArray)N=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);return{buffer:G,type:N,bytesPerElement:E.BYTES_PER_ELEMENT,version:v.version,size:D}}function o(v,x,E){const k=x.array,D=x._updateRange,G=x.updateRanges;if(t.bindBuffer(E,v),D.count===-1&&G.length===0&&t.bufferSubData(E,0,k),G.length!==0){for(let N=0,z=G.length;N<z;N++){const U=G[N];n?t.bufferSubData(E,U.start*k.BYTES_PER_ELEMENT,k,U.start,U.count):t.bufferSubData(E,U.start*k.BYTES_PER_ELEMENT,k.subarray(U.start,U.start+U.count))}x.clearUpdateRanges()}D.count!==-1&&(n?t.bufferSubData(E,D.offset*k.BYTES_PER_ELEMENT,k,D.offset,D.count):t.bufferSubData(E,D.offset*k.BYTES_PER_ELEMENT,k.subarray(D.offset,D.offset+D.count)),D.count=-1),x.onUploadCallback()}function u(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)}function h(v){v.isInterleavedBufferAttribute&&(v=v.data);const x=r.get(v);x&&(t.deleteBuffer(x.buffer),r.delete(v))}function m(v,x){if(v.isGLBufferAttribute){const k=r.get(v);(!k||k.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const E=r.get(v);if(E===void 0)r.set(v,i(v,x));else if(E.version<v.version){if(E.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(E.buffer,v,x),E.version=v.version}}return{get:u,remove:h,update:m}}class bF extends ea{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,u=n/2,h=Math.floor(r),m=Math.floor(i),v=h+1,x=m+1,E=e/h,k=n/m,D=[],G=[],N=[],z=[];for(let U=0;U<x;U++){const P=U*k-u;for(let $=0;$<v;$++){const Q=$*E-o;G.push(Q,-P,0),N.push(0,0,1),z.push($/h),z.push(1-U/m)}}for(let U=0;U<m;U++)for(let P=0;P<h;P++){const $=P+v*U,Q=P+v*(U+1),ye=P+1+v*(U+1),q=P+1+v*U;D.push($,Q,q),D.push(Q,ye,q)}this.setIndex(D),this.setAttribute("position",new Mi(G,3)),this.setAttribute("normal",new Mi(N,3)),this.setAttribute("uv",new Mi(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bF(e.width,e.height,e.widthSegments,e.heightSegments)}}var Y5e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Z5e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Q5e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,J5e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,e4e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,t4e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,n4e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,r4e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,i4e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,s4e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,o4e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,a4e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,l4e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,u4e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,c4e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,d4e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,h4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,p4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,f4e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,m4e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,g4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,v4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,y4e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,b4e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,_4e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,w4e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,x4e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,S4e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,E4e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,C4e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,P4e="gl_FragColor = linearToOutputTexel( gl_FragColor );",T4e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,M4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,k4e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,A4e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,I4e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,R4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,D4e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,O4e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,L4e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,N4e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,F4e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,B4e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,U4e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,z4e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,V4e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,j4e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,H4e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,G4e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,W4e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$4e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,K4e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,X4e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,q4e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Y4e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Z4e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Q4e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,J4e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eze=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tze=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,nze=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,rze=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ize=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sze=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oze=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aze=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lze=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uze=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cze=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,dze=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,hze=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,pze=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fze=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,mze=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gze=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vze=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yze=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bze=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,_ze=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wze=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,xze=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Sze=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Eze=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Cze=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Pze=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Tze=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Mze=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kze=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Aze=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ize=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Rze=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Dze=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Oze=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lze=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Nze=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Fze=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Bze=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Uze=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zze=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Vze=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,jze=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Hze=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Gze=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Wze=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$ze=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Kze=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Xze=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qze=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Yze=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zze=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qze=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jze=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eVe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tVe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,nVe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,rVe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,iVe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,sVe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,oVe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aVe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lVe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uVe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cVe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dVe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hVe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pVe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fVe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mVe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gVe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vVe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yVe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bVe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,_Ve=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wVe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xVe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SVe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,EVe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CVe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PVe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,TVe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MVe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dr={alphahash_fragment:Y5e,alphahash_pars_fragment:Z5e,alphamap_fragment:Q5e,alphamap_pars_fragment:J5e,alphatest_fragment:e4e,alphatest_pars_fragment:t4e,aomap_fragment:n4e,aomap_pars_fragment:r4e,batching_pars_vertex:i4e,batching_vertex:s4e,begin_vertex:o4e,beginnormal_vertex:a4e,bsdfs:l4e,iridescence_fragment:u4e,bumpmap_pars_fragment:c4e,clipping_planes_fragment:d4e,clipping_planes_pars_fragment:h4e,clipping_planes_pars_vertex:p4e,clipping_planes_vertex:f4e,color_fragment:m4e,color_pars_fragment:g4e,color_pars_vertex:v4e,color_vertex:y4e,common:b4e,cube_uv_reflection_fragment:_4e,defaultnormal_vertex:w4e,displacementmap_pars_vertex:x4e,displacementmap_vertex:S4e,emissivemap_fragment:E4e,emissivemap_pars_fragment:C4e,colorspace_fragment:P4e,colorspace_pars_fragment:T4e,envmap_fragment:M4e,envmap_common_pars_fragment:k4e,envmap_pars_fragment:A4e,envmap_pars_vertex:I4e,envmap_physical_pars_fragment:H4e,envmap_vertex:R4e,fog_vertex:D4e,fog_pars_vertex:O4e,fog_fragment:L4e,fog_pars_fragment:N4e,gradientmap_pars_fragment:F4e,lightmap_fragment:B4e,lightmap_pars_fragment:U4e,lights_lambert_fragment:z4e,lights_lambert_pars_fragment:V4e,lights_pars_begin:j4e,lights_toon_fragment:G4e,lights_toon_pars_fragment:W4e,lights_phong_fragment:$4e,lights_phong_pars_fragment:K4e,lights_physical_fragment:X4e,lights_physical_pars_fragment:q4e,lights_fragment_begin:Y4e,lights_fragment_maps:Z4e,lights_fragment_end:Q4e,logdepthbuf_fragment:J4e,logdepthbuf_pars_fragment:eze,logdepthbuf_pars_vertex:tze,logdepthbuf_vertex:nze,map_fragment:rze,map_pars_fragment:ize,map_particle_fragment:sze,map_particle_pars_fragment:oze,metalnessmap_fragment:aze,metalnessmap_pars_fragment:lze,morphcolor_vertex:uze,morphnormal_vertex:cze,morphtarget_pars_vertex:dze,morphtarget_vertex:hze,normal_fragment_begin:pze,normal_fragment_maps:fze,normal_pars_fragment:mze,normal_pars_vertex:gze,normal_vertex:vze,normalmap_pars_fragment:yze,clearcoat_normal_fragment_begin:bze,clearcoat_normal_fragment_maps:_ze,clearcoat_pars_fragment:wze,iridescence_pars_fragment:xze,opaque_fragment:Sze,packing:Eze,premultiplied_alpha_fragment:Cze,project_vertex:Pze,dithering_fragment:Tze,dithering_pars_fragment:Mze,roughnessmap_fragment:kze,roughnessmap_pars_fragment:Aze,shadowmap_pars_fragment:Ize,shadowmap_pars_vertex:Rze,shadowmap_vertex:Dze,shadowmask_pars_fragment:Oze,skinbase_vertex:Lze,skinning_pars_vertex:Nze,skinning_vertex:Fze,skinnormal_vertex:Bze,specularmap_fragment:Uze,specularmap_pars_fragment:zze,tonemapping_fragment:Vze,tonemapping_pars_fragment:jze,transmission_fragment:Hze,transmission_pars_fragment:Gze,uv_pars_fragment:Wze,uv_pars_vertex:$ze,uv_vertex:Kze,worldpos_vertex:Xze,background_vert:qze,background_frag:Yze,backgroundCube_vert:Zze,backgroundCube_frag:Qze,cube_vert:Jze,cube_frag:eVe,depth_vert:tVe,depth_frag:nVe,distanceRGBA_vert:rVe,distanceRGBA_frag:iVe,equirect_vert:sVe,equirect_frag:oVe,linedashed_vert:aVe,linedashed_frag:lVe,meshbasic_vert:uVe,meshbasic_frag:cVe,meshlambert_vert:dVe,meshlambert_frag:hVe,meshmatcap_vert:pVe,meshmatcap_frag:fVe,meshnormal_vert:mVe,meshnormal_frag:gVe,meshphong_vert:vVe,meshphong_frag:yVe,meshphysical_vert:bVe,meshphysical_frag:_Ve,meshtoon_vert:wVe,meshtoon_frag:xVe,points_vert:SVe,points_frag:EVe,shadow_vert:CVe,shadow_frag:PVe,sprite_vert:TVe,sprite_frag:MVe},tn={common:{diffuse:{value:new Sn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mr},alphaMap:{value:null},alphaMapTransform:{value:new mr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mr},normalScale:{value:new un(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Sn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Sn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mr},alphaTest:{value:0},uvTransform:{value:new mr}},sprite:{diffuse:{value:new Sn(16777215)},opacity:{value:1},center:{value:new un(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mr},alphaMap:{value:null},alphaMapTransform:{value:new mr},alphaTest:{value:0}}},Ed={basic:{uniforms:ba([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.fog]),vertexShader:dr.meshbasic_vert,fragmentShader:dr.meshbasic_frag},lambert:{uniforms:ba([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.fog,tn.lights,{emissive:{value:new Sn(0)}}]),vertexShader:dr.meshlambert_vert,fragmentShader:dr.meshlambert_frag},phong:{uniforms:ba([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.fog,tn.lights,{emissive:{value:new Sn(0)},specular:{value:new Sn(1118481)},shininess:{value:30}}]),vertexShader:dr.meshphong_vert,fragmentShader:dr.meshphong_frag},standard:{uniforms:ba([tn.common,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.roughnessmap,tn.metalnessmap,tn.fog,tn.lights,{emissive:{value:new Sn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dr.meshphysical_vert,fragmentShader:dr.meshphysical_frag},toon:{uniforms:ba([tn.common,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.gradientmap,tn.fog,tn.lights,{emissive:{value:new Sn(0)}}]),vertexShader:dr.meshtoon_vert,fragmentShader:dr.meshtoon_frag},matcap:{uniforms:ba([tn.common,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.fog,{matcap:{value:null}}]),vertexShader:dr.meshmatcap_vert,fragmentShader:dr.meshmatcap_frag},points:{uniforms:ba([tn.points,tn.fog]),vertexShader:dr.points_vert,fragmentShader:dr.points_frag},dashed:{uniforms:ba([tn.common,tn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dr.linedashed_vert,fragmentShader:dr.linedashed_frag},depth:{uniforms:ba([tn.common,tn.displacementmap]),vertexShader:dr.depth_vert,fragmentShader:dr.depth_frag},normal:{uniforms:ba([tn.common,tn.bumpmap,tn.normalmap,tn.displacementmap,{opacity:{value:1}}]),vertexShader:dr.meshnormal_vert,fragmentShader:dr.meshnormal_frag},sprite:{uniforms:ba([tn.sprite,tn.fog]),vertexShader:dr.sprite_vert,fragmentShader:dr.sprite_frag},background:{uniforms:{uvTransform:{value:new mr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:dr.background_vert,fragmentShader:dr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:dr.backgroundCube_vert,fragmentShader:dr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dr.cube_vert,fragmentShader:dr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dr.equirect_vert,fragmentShader:dr.equirect_frag},distanceRGBA:{uniforms:ba([tn.common,tn.displacementmap,{referencePosition:{value:new Le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dr.distanceRGBA_vert,fragmentShader:dr.distanceRGBA_frag},shadow:{uniforms:ba([tn.lights,tn.fog,{color:{value:new Sn(0)},opacity:{value:1}}]),vertexShader:dr.shadow_vert,fragmentShader:dr.shadow_frag}};Ed.physical={uniforms:ba([Ed.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mr},clearcoatNormalScale:{value:new un(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mr},sheen:{value:0},sheenColor:{value:new Sn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mr},transmissionSamplerSize:{value:new un},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mr},attenuationDistance:{value:0},attenuationColor:{value:new Sn(0)},specularColor:{value:new Sn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mr},anisotropyVector:{value:new un},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mr}}]),vertexShader:dr.meshphysical_vert,fragmentShader:dr.meshphysical_frag};const aL={r:0,b:0,g:0};function kVe(t,e,n,r,i,o,u){const h=new Sn(0);let m=o===!0?0:1,v,x,E=null,k=0,D=null;function G(z,U){let P=!1,$=U.isScene===!0?U.background:null;$&&$.isTexture&&($=(U.backgroundBlurriness>0?n:e).get($)),$===null?N(h,m):$&&$.isColor&&(N($,1),P=!0);const Q=t.xr.getEnvironmentBlendMode();Q==="additive"?r.buffers.color.setClear(0,0,0,1,u):Q==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,u),(t.autoClear||P)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),$&&($.isCubeTexture||$.mapping===fF)?(x===void 0&&(x=new ks(new JT(1,1,1),new el({name:"BackgroundCubeMaterial",uniforms:t1(Ed.backgroundCube.uniforms),vertexShader:Ed.backgroundCube.vertexShader,fragmentShader:Ed.backgroundCube.fragmentShader,side:Vs,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(ye,q,ie){this.matrixWorld.copyPosition(ie.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(x)),x.material.uniforms.envMap.value=$,x.material.uniforms.flipEnvMap.value=$.isCubeTexture&&$.isRenderTargetTexture===!1?-1:1,x.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,x.material.toneMapped=oi.getTransfer($.colorSpace)!==Pi,(E!==$||k!==$.version||D!==t.toneMapping)&&(x.material.needsUpdate=!0,E=$,k=$.version,D=t.toneMapping),x.layers.enableAll(),z.unshift(x,x.geometry,x.material,0,0,null)):$&&$.isTexture&&(v===void 0&&(v=new ks(new bF(2,2),new el({name:"BackgroundMaterial",uniforms:t1(Ed.background.uniforms),vertexShader:Ed.background.vertexShader,fragmentShader:Ed.background.fragmentShader,side:gp,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(v)),v.material.uniforms.t2D.value=$,v.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,v.material.toneMapped=oi.getTransfer($.colorSpace)!==Pi,$.matrixAutoUpdate===!0&&$.updateMatrix(),v.material.uniforms.uvTransform.value.copy($.matrix),(E!==$||k!==$.version||D!==t.toneMapping)&&(v.material.needsUpdate=!0,E=$,k=$.version,D=t.toneMapping),v.layers.enableAll(),z.unshift(v,v.geometry,v.material,0,0,null))}function N(z,U){z.getRGB(aL,gSe(t)),r.buffers.color.setClear(aL.r,aL.g,aL.b,U,u)}return{getClearColor:function(){return h},setClearColor:function(z,U=1){h.set(z),m=U,N(h,m)},getClearAlpha:function(){return m},setClearAlpha:function(z){m=z,N(h,m)},render:G}}function AVe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),u=r.isWebGL2||o!==null,h={},m=z(null);let v=m,x=!1;function E(ue,Ge,Te,it,Ne){let Xe=!1;if(u){const qe=N(it,Te,Ge);v!==qe&&(v=qe,D(v.object)),Xe=U(ue,it,Te,Ne),Xe&&P(ue,it,Te,Ne)}else{const qe=Ge.wireframe===!0;(v.geometry!==it.id||v.program!==Te.id||v.wireframe!==qe)&&(v.geometry=it.id,v.program=Te.id,v.wireframe=qe,Xe=!0)}Ne!==null&&n.update(Ne,t.ELEMENT_ARRAY_BUFFER),(Xe||x)&&(x=!1,pe(ue,Ge,Te,it),Ne!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Ne).buffer))}function k(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function D(ue){return r.isWebGL2?t.bindVertexArray(ue):o.bindVertexArrayOES(ue)}function G(ue){return r.isWebGL2?t.deleteVertexArray(ue):o.deleteVertexArrayOES(ue)}function N(ue,Ge,Te){const it=Te.wireframe===!0;let Ne=h[ue.id];Ne===void 0&&(Ne={},h[ue.id]=Ne);let Xe=Ne[Ge.id];Xe===void 0&&(Xe={},Ne[Ge.id]=Xe);let qe=Xe[it];return qe===void 0&&(qe=z(k()),Xe[it]=qe),qe}function z(ue){const Ge=[],Te=[],it=[];for(let Ne=0;Ne<i;Ne++)Ge[Ne]=0,Te[Ne]=0,it[Ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ge,enabledAttributes:Te,attributeDivisors:it,object:ue,attributes:{},index:null}}function U(ue,Ge,Te,it){const Ne=v.attributes,Xe=Ge.attributes;let qe=0;const ft=Te.getAttributes();for(const Ct in ft)if(ft[Ct].location>=0){const Pt=Ne[Ct];let Rt=Xe[Ct];if(Rt===void 0&&(Ct==="instanceMatrix"&&ue.instanceMatrix&&(Rt=ue.instanceMatrix),Ct==="instanceColor"&&ue.instanceColor&&(Rt=ue.instanceColor)),Pt===void 0||Pt.attribute!==Rt||Rt&&Pt.data!==Rt.data)return!0;qe++}return v.attributesNum!==qe||v.index!==it}function P(ue,Ge,Te,it){const Ne={},Xe=Ge.attributes;let qe=0;const ft=Te.getAttributes();for(const Ct in ft)if(ft[Ct].location>=0){let Pt=Xe[Ct];Pt===void 0&&(Ct==="instanceMatrix"&&ue.instanceMatrix&&(Pt=ue.instanceMatrix),Ct==="instanceColor"&&ue.instanceColor&&(Pt=ue.instanceColor));const Rt={};Rt.attribute=Pt,Pt&&Pt.data&&(Rt.data=Pt.data),Ne[Ct]=Rt,qe++}v.attributes=Ne,v.attributesNum=qe,v.index=it}function $(){const ue=v.newAttributes;for(let Ge=0,Te=ue.length;Ge<Te;Ge++)ue[Ge]=0}function Q(ue){ye(ue,0)}function ye(ue,Ge){const Te=v.newAttributes,it=v.enabledAttributes,Ne=v.attributeDivisors;Te[ue]=1,it[ue]===0&&(t.enableVertexAttribArray(ue),it[ue]=1),Ne[ue]!==Ge&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ue,Ge),Ne[ue]=Ge)}function q(){const ue=v.newAttributes,Ge=v.enabledAttributes;for(let Te=0,it=Ge.length;Te<it;Te++)Ge[Te]!==ue[Te]&&(t.disableVertexAttribArray(Te),Ge[Te]=0)}function ie(ue,Ge,Te,it,Ne,Xe,qe){qe===!0?t.vertexAttribIPointer(ue,Ge,Te,Ne,Xe):t.vertexAttribPointer(ue,Ge,Te,it,Ne,Xe)}function pe(ue,Ge,Te,it){if(r.isWebGL2===!1&&(ue.isInstancedMesh||it.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;$();const Ne=it.attributes,Xe=Te.getAttributes(),qe=Ge.defaultAttributeValues;for(const ft in Xe){const Ct=Xe[ft];if(Ct.location>=0){let mt=Ne[ft];if(mt===void 0&&(ft==="instanceMatrix"&&ue.instanceMatrix&&(mt=ue.instanceMatrix),ft==="instanceColor"&&ue.instanceColor&&(mt=ue.instanceColor)),mt!==void 0){const Pt=mt.normalized,Rt=mt.itemSize,Jt=n.get(mt);if(Jt===void 0)continue;const Yt=Jt.buffer,In=Jt.type,Tn=Jt.bytesPerElement,bn=r.isWebGL2===!0&&(In===t.INT||In===t.UNSIGNED_INT||mt.gpuType===nSe);if(mt.isInterleavedBufferAttribute){const On=mt.data,lt=On.stride,ti=mt.offset;if(On.isInstancedInterleavedBuffer){for(let Mn=0;Mn<Ct.locationSize;Mn++)ye(Ct.location+Mn,On.meshPerAttribute);ue.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=On.meshPerAttribute*On.count)}else for(let Mn=0;Mn<Ct.locationSize;Mn++)Q(Ct.location+Mn);t.bindBuffer(t.ARRAY_BUFFER,Yt);for(let Mn=0;Mn<Ct.locationSize;Mn++)ie(Ct.location+Mn,Rt/Ct.locationSize,In,Pt,lt*Tn,(ti+Rt/Ct.locationSize*Mn)*Tn,bn)}else{if(mt.isInstancedBufferAttribute){for(let On=0;On<Ct.locationSize;On++)ye(Ct.location+On,mt.meshPerAttribute);ue.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=mt.meshPerAttribute*mt.count)}else for(let On=0;On<Ct.locationSize;On++)Q(Ct.location+On);t.bindBuffer(t.ARRAY_BUFFER,Yt);for(let On=0;On<Ct.locationSize;On++)ie(Ct.location+On,Rt/Ct.locationSize,In,Pt,Rt*Tn,Rt/Ct.locationSize*On*Tn,bn)}}else if(qe!==void 0){const Pt=qe[ft];if(Pt!==void 0)switch(Pt.length){case 2:t.vertexAttrib2fv(Ct.location,Pt);break;case 3:t.vertexAttrib3fv(Ct.location,Pt);break;case 4:t.vertexAttrib4fv(Ct.location,Pt);break;default:t.vertexAttrib1fv(Ct.location,Pt)}}}}q()}function W(){at();for(const ue in h){const Ge=h[ue];for(const Te in Ge){const it=Ge[Te];for(const Ne in it)G(it[Ne].object),delete it[Ne];delete Ge[Te]}delete h[ue]}}function he(ue){if(h[ue.id]===void 0)return;const Ge=h[ue.id];for(const Te in Ge){const it=Ge[Te];for(const Ne in it)G(it[Ne].object),delete it[Ne];delete Ge[Te]}delete h[ue.id]}function Ye(ue){for(const Ge in h){const Te=h[Ge];if(Te[ue.id]===void 0)continue;const it=Te[ue.id];for(const Ne in it)G(it[Ne].object),delete it[Ne];delete Te[ue.id]}}function at(){Et(),x=!0,v!==m&&(v=m,D(v.object))}function Et(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:E,reset:at,resetDefaultState:Et,dispose:W,releaseStatesOfGeometry:he,releaseStatesOfProgram:Ye,initAttributes:$,enableAttribute:Q,disableUnusedAttributes:q}}function IVe(t,e,n,r){const i=r.isWebGL2;let o;function u(x){o=x}function h(x,E){t.drawArrays(o,x,E),n.update(E,o,1)}function m(x,E,k){if(k===0)return;let D,G;if(i)D=t,G="drawArraysInstanced";else if(D=e.get("ANGLE_instanced_arrays"),G="drawArraysInstancedANGLE",D===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}D[G](o,x,E,k),n.update(E,o,k)}function v(x,E,k){if(k===0)return;const D=e.get("WEBGL_multi_draw");if(D===null)for(let G=0;G<k;G++)this.render(x[G],E[G]);else{D.multiDrawArraysWEBGL(o,x,0,E,0,k);let G=0;for(let N=0;N<k;N++)G+=E[N];n.update(G,o,1)}}this.setMode=u,this.render=h,this.renderInstances=m,this.renderMultiDraw=v}function RVe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const ie=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(ie.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(ie){if(ie==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";ie="mediump"}return ie==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const u=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let h=n.precision!==void 0?n.precision:"highp";const m=o(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const v=u||e.has("WEBGL_draw_buffers"),x=n.logarithmicDepthBuffer===!0,E=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),k=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),D=t.getParameter(t.MAX_TEXTURE_SIZE),G=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),N=t.getParameter(t.MAX_VERTEX_ATTRIBS),z=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),U=t.getParameter(t.MAX_VARYING_VECTORS),P=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),$=k>0,Q=u||e.has("OES_texture_float"),ye=$&&Q,q=u?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:u,drawBuffers:v,getMaxAnisotropy:i,getMaxPrecision:o,precision:h,logarithmicDepthBuffer:x,maxTextures:E,maxVertexTextures:k,maxTextureSize:D,maxCubemapSize:G,maxAttributes:N,maxVertexUniforms:z,maxVaryings:U,maxFragmentUniforms:P,vertexTextures:$,floatFragmentTextures:Q,floatVertexTextures:ye,maxSamples:q}}function DVe(t){const e=this;let n=null,r=0,i=!1,o=!1;const u=new wm,h=new mr,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(E,k){const D=E.length!==0||k||r!==0||i;return i=k,r=E.length,D},this.beginShadows=function(){o=!0,x(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(E,k){n=x(E,k,0)},this.setState=function(E,k,D){const G=E.clippingPlanes,N=E.clipIntersection,z=E.clipShadows,U=t.get(E);if(!i||G===null||G.length===0||o&&!z)o?x(null):v();else{const P=o?0:r,$=P*4;let Q=U.clippingState||null;m.value=Q,Q=x(G,k,$,D);for(let ye=0;ye!==$;++ye)Q[ye]=n[ye];U.clippingState=Q,this.numIntersection=N?this.numPlanes:0,this.numPlanes+=P}};function v(){m.value!==n&&(m.value=n,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function x(E,k,D,G){const N=E!==null?E.length:0;let z=null;if(N!==0){if(z=m.value,G!==!0||z===null){const U=D+N*4,P=k.matrixWorldInverse;h.getNormalMatrix(P),(z===null||z.length<U)&&(z=new Float32Array(U));for(let $=0,Q=D;$!==N;++$,Q+=4)u.copy(E[$]).applyMatrix4(P,h),u.normal.toArray(z,Q),z[Q+3]=u.constant}m.value=z,m.needsUpdate=!0}return e.numPlanes=N,e.numIntersection=0,z}}function OVe(t){let e=new WeakMap;function n(u,h){return h===_N?u.mapping=Qw:h===mW&&(u.mapping=Jw),u}function r(u){if(u&&u.isTexture){const h=u.mapping;if(h===_N||h===mW)if(e.has(u)){const m=e.get(u).texture;return n(m,u.mapping)}else{const m=u.image;if(m&&m.height>0){const v=new $5e(m.height/2);return v.fromEquirectangularTexture(t,u),e.set(u,v),u.addEventListener("dispose",i),n(v.texture,u.mapping)}else return null}}return u}function i(u){const h=u.target;h.removeEventListener("dispose",i);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class eM extends vF{constructor(e=-1,n=1,r=1,i=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,u=r+e,h=i+n,m=i-n;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=v*this.view.offsetX,u=o+v*this.view.width,h-=x*this.view.offsetY,m=h-x*this.view.height}this.projectionMatrix.makeOrthographic(o,u,h,m,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Cw=4,_ye=[.125,.215,.35,.446,.526,.582],g0=20,vG=new eM,wye=new Sn;let yG=null,bG=0,_G=0;const h0=(1+Math.sqrt(5))/2,tw=1/h0,xye=[new Le(1,1,1),new Le(-1,1,1),new Le(1,1,-1),new Le(-1,1,-1),new Le(0,h0,tw),new Le(0,h0,-tw),new Le(tw,0,h0),new Le(-tw,0,h0),new Le(h0,tw,0),new Le(-h0,tw,0)];class Sye{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){yG=this._renderer.getRenderTarget(),bG=this._renderer.getActiveCubeFace(),_G=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Pye(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Cye(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yG,bG,_G),e.scissorTest=!1,lL(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Qw||e.mapping===Jw?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yG=this._renderer.getRenderTarget(),bG=this._renderer.getActiveCubeFace(),_G=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Zo,minFilter:Zo,generateMipmaps:!1,type:_T,format:pu,colorSpace:yp,depthBuffer:!1},i=Eye(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Eye(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=LVe(o)),this._blurMaterial=NVe(o,e,n)}return i}_compileMaterial(e){const n=new ks(this._lodPlanes[0],e);this._renderer.compile(n,vG)}_sceneToCubeUV(e,n,r,i){const h=new Us(90,1,n,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],x=this._renderer,E=x.autoClear,k=x.toneMapping;x.getClearColor(wye),x.toneMapping=Um,x.autoClear=!1;const D=new xT({name:"PMREM.Background",side:Vs,depthWrite:!1,depthTest:!1}),G=new ks(new JT,D);let N=!1;const z=e.background;z?z.isColor&&(D.color.copy(z),e.background=null,N=!0):(D.color.copy(wye),N=!0);for(let U=0;U<6;U++){const P=U%3;P===0?(h.up.set(0,m[U],0),h.lookAt(v[U],0,0)):P===1?(h.up.set(0,0,m[U]),h.lookAt(0,v[U],0)):(h.up.set(0,m[U],0),h.lookAt(0,0,v[U]));const $=this._cubeSize;lL(i,P*$,U>2?$:0,$,$),x.setRenderTarget(i),N&&x.render(G,h),x.render(e,h)}G.geometry.dispose(),G.material.dispose(),x.toneMapping=k,x.autoClear=E,e.background=z}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Qw||e.mapping===Jw;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Pye()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Cye());const o=i?this._cubemapMaterial:this._equirectMaterial,u=new ks(this._lodPlanes[0],o),h=o.uniforms;h.envMap.value=e;const m=this._cubeSize;lL(n,0,0,3*m,2*m),r.setRenderTarget(n),r.render(u,vG)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),u=xye[(i-1)%xye.length];this._blur(e,i-1,i,o,u)}n.autoClear=r}_blur(e,n,r,i,o){const u=this._pingPongRenderTarget;this._halfBlur(e,u,n,r,i,"latitudinal",o),this._halfBlur(u,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,u,h){const m=this._renderer,v=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const x=3,E=new ks(this._lodPlanes[i],v),k=v.uniforms,D=this._sizeLods[r]-1,G=isFinite(o)?Math.PI/(2*D):2*Math.PI/(2*g0-1),N=o/G,z=isFinite(o)?1+Math.floor(x*N):g0;z>g0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${z} samples when the maximum is set to ${g0}`);const U=[];let P=0;for(let ie=0;ie<g0;++ie){const pe=ie/N,W=Math.exp(-pe*pe/2);U.push(W),ie===0?P+=W:ie<z&&(P+=2*W)}for(let ie=0;ie<U.length;ie++)U[ie]=U[ie]/P;k.envMap.value=e.texture,k.samples.value=z,k.weights.value=U,k.latitudinal.value=u==="latitudinal",h&&(k.poleAxis.value=h);const{_lodMax:$}=this;k.dTheta.value=G,k.mipInt.value=$-r;const Q=this._sizeLods[i],ye=3*Q*(i>$-Cw?i-$+Cw:0),q=4*(this._cubeSize-Q);lL(n,ye,q,3*Q,2*Q),m.setRenderTarget(n),m.render(E,vG)}}function LVe(t){const e=[],n=[],r=[];let i=t;const o=t-Cw+1+_ye.length;for(let u=0;u<o;u++){const h=Math.pow(2,i);n.push(h);let m=1/h;u>t-Cw?m=_ye[u-t+Cw-1]:u===0&&(m=0),r.push(m);const v=1/(h-2),x=-v,E=1+v,k=[x,x,E,x,E,E,x,x,E,E,x,E],D=6,G=6,N=3,z=2,U=1,P=new Float32Array(N*G*D),$=new Float32Array(z*G*D),Q=new Float32Array(U*G*D);for(let q=0;q<D;q++){const ie=q%3*2/3-1,pe=q>2?0:-1,W=[ie,pe,0,ie+2/3,pe,0,ie+2/3,pe+1,0,ie,pe,0,ie+2/3,pe+1,0,ie,pe+1,0];P.set(W,N*G*q),$.set(k,z*G*q);const he=[q,q,q,q,q,q];Q.set(he,U*G*q)}const ye=new ea;ye.setAttribute("position",new qa(P,N)),ye.setAttribute("uv",new qa($,z)),ye.setAttribute("faceIndex",new qa(Q,U)),e.push(ye),i>Cw&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Eye(t,e,n){const r=new Cl(t,e,n);return r.texture.mapping=fF,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function lL(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function NVe(t,e,n){const r=new Float32Array(g0),i=new Le(0,1,0);return new el({name:"SphericalGaussianBlur",defines:{n:g0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:o7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Sc,depthTest:!1,depthWrite:!1})}function Cye(){return new el({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:o7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Sc,depthTest:!1,depthWrite:!1})}function Pye(){return new el({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:o7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Sc,depthTest:!1,depthWrite:!1})}function o7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function FVe(t){let e=new WeakMap,n=null;function r(h){if(h&&h.isTexture){const m=h.mapping,v=m===_N||m===mW,x=m===Qw||m===Jw;if(v||x)if(h.isRenderTargetTexture&&h.needsPMREMUpdate===!0){h.needsPMREMUpdate=!1;let E=e.get(h);return n===null&&(n=new Sye(t)),E=v?n.fromEquirectangular(h,E):n.fromCubemap(h,E),e.set(h,E),E.texture}else{if(e.has(h))return e.get(h).texture;{const E=h.image;if(v&&E&&E.height>0||x&&E&&i(E)){n===null&&(n=new Sye(t));const k=v?n.fromEquirectangular(h):n.fromCubemap(h);return e.set(h,k),h.addEventListener("dispose",o),k.texture}else return null}}}return h}function i(h){let m=0;const v=6;for(let x=0;x<v;x++)h[x]!==void 0&&m++;return m===v}function o(h){const m=h.target;m.removeEventListener("dispose",o);const v=e.get(m);v!==void 0&&(e.delete(m),v.dispose())}function u(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:u}}function BVe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function UVe(t,e,n,r){const i={},o=new WeakMap;function u(E){const k=E.target;k.index!==null&&e.remove(k.index);for(const G in k.attributes)e.remove(k.attributes[G]);for(const G in k.morphAttributes){const N=k.morphAttributes[G];for(let z=0,U=N.length;z<U;z++)e.remove(N[z])}k.removeEventListener("dispose",u),delete i[k.id];const D=o.get(k);D&&(e.remove(D),o.delete(k)),r.releaseStatesOfGeometry(k),k.isInstancedBufferGeometry===!0&&delete k._maxInstanceCount,n.memory.geometries--}function h(E,k){return i[k.id]===!0||(k.addEventListener("dispose",u),i[k.id]=!0,n.memory.geometries++),k}function m(E){const k=E.attributes;for(const G in k)e.update(k[G],t.ARRAY_BUFFER);const D=E.morphAttributes;for(const G in D){const N=D[G];for(let z=0,U=N.length;z<U;z++)e.update(N[z],t.ARRAY_BUFFER)}}function v(E){const k=[],D=E.index,G=E.attributes.position;let N=0;if(D!==null){const P=D.array;N=D.version;for(let $=0,Q=P.length;$<Q;$+=3){const ye=P[$+0],q=P[$+1],ie=P[$+2];k.push(ye,q,q,ie,ie,ye)}}else if(G!==void 0){const P=G.array;N=G.version;for(let $=0,Q=P.length/3-1;$<Q;$+=3){const ye=$+0,q=$+1,ie=$+2;k.push(ye,q,q,ie,ie,ye)}}else return;const z=new(cSe(k)?mSe:i7)(k,1);z.version=N;const U=o.get(E);U&&e.remove(U),o.set(E,z)}function x(E){const k=o.get(E);if(k){const D=E.index;D!==null&&k.version<D.version&&v(E)}else v(E);return o.get(E)}return{get:h,update:m,getWireframeAttribute:x}}function zVe(t,e,n,r){const i=r.isWebGL2;let o;function u(D){o=D}let h,m;function v(D){h=D.type,m=D.bytesPerElement}function x(D,G){t.drawElements(o,G,h,D*m),n.update(G,o,1)}function E(D,G,N){if(N===0)return;let z,U;if(i)z=t,U="drawElementsInstanced";else if(z=e.get("ANGLE_instanced_arrays"),U="drawElementsInstancedANGLE",z===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}z[U](o,G,h,D*m,N),n.update(G,o,N)}function k(D,G,N){if(N===0)return;const z=e.get("WEBGL_multi_draw");if(z===null)for(let U=0;U<N;U++)this.render(D[U]/m,G[U]);else{z.multiDrawElementsWEBGL(o,G,0,h,D,0,N);let U=0;for(let P=0;P<N;P++)U+=G[P];n.update(U,o,1)}}this.setMode=u,this.setIndex=v,this.render=x,this.renderInstances=E,this.renderMultiDraw=k}function VVe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,u,h){switch(n.calls++,u){case t.TRIANGLES:n.triangles+=h*(o/3);break;case t.LINES:n.lines+=h*(o/2);break;case t.LINE_STRIP:n.lines+=h*(o-1);break;case t.LINE_LOOP:n.lines+=h*o;break;case t.POINTS:n.points+=h*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function jVe(t,e){return t[0]-e[0]}function HVe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function GVe(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,u=new Pr,h=[];for(let v=0;v<8;v++)h[v]=[v,0];function m(v,x,E){const k=v.morphTargetInfluences;if(e.isWebGL2===!0){const G=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,N=G!==void 0?G.length:0;let z=o.get(x);if(z===void 0||z.count!==N){let Ge=function(){Et.dispose(),o.delete(x),x.removeEventListener("dispose",Ge)};var D=Ge;z!==void 0&&z.texture.dispose();const $=x.morphAttributes.position!==void 0,Q=x.morphAttributes.normal!==void 0,ye=x.morphAttributes.color!==void 0,q=x.morphAttributes.position||[],ie=x.morphAttributes.normal||[],pe=x.morphAttributes.color||[];let W=0;$===!0&&(W=1),Q===!0&&(W=2),ye===!0&&(W=3);let he=x.attributes.position.count*W,Ye=1;he>e.maxTextureSize&&(Ye=Math.ceil(he/e.maxTextureSize),he=e.maxTextureSize);const at=new Float32Array(he*Ye*4*N),Et=new pSe(at,he,Ye,N);Et.type=tp,Et.needsUpdate=!0;const ue=W*4;for(let Te=0;Te<N;Te++){const it=q[Te],Ne=ie[Te],Xe=pe[Te],qe=he*Ye*4*Te;for(let ft=0;ft<it.count;ft++){const Ct=ft*ue;$===!0&&(u.fromBufferAttribute(it,ft),at[qe+Ct+0]=u.x,at[qe+Ct+1]=u.y,at[qe+Ct+2]=u.z,at[qe+Ct+3]=0),Q===!0&&(u.fromBufferAttribute(Ne,ft),at[qe+Ct+4]=u.x,at[qe+Ct+5]=u.y,at[qe+Ct+6]=u.z,at[qe+Ct+7]=0),ye===!0&&(u.fromBufferAttribute(Xe,ft),at[qe+Ct+8]=u.x,at[qe+Ct+9]=u.y,at[qe+Ct+10]=u.z,at[qe+Ct+11]=Xe.itemSize===4?u.w:1)}}z={count:N,texture:Et,size:new un(he,Ye)},o.set(x,z),x.addEventListener("dispose",Ge)}let U=0;for(let $=0;$<k.length;$++)U+=k[$];const P=x.morphTargetsRelative?1:1-U;E.getUniforms().setValue(t,"morphTargetBaseInfluence",P),E.getUniforms().setValue(t,"morphTargetInfluences",k),E.getUniforms().setValue(t,"morphTargetsTexture",z.texture,n),E.getUniforms().setValue(t,"morphTargetsTextureSize",z.size)}else{const G=k===void 0?0:k.length;let N=r[x.id];if(N===void 0||N.length!==G){N=[];for(let Q=0;Q<G;Q++)N[Q]=[Q,0];r[x.id]=N}for(let Q=0;Q<G;Q++){const ye=N[Q];ye[0]=Q,ye[1]=k[Q]}N.sort(HVe);for(let Q=0;Q<8;Q++)Q<G&&N[Q][1]?(h[Q][0]=N[Q][0],h[Q][1]=N[Q][1]):(h[Q][0]=Number.MAX_SAFE_INTEGER,h[Q][1]=0);h.sort(jVe);const z=x.morphAttributes.position,U=x.morphAttributes.normal;let P=0;for(let Q=0;Q<8;Q++){const ye=h[Q],q=ye[0],ie=ye[1];q!==Number.MAX_SAFE_INTEGER&&ie?(z&&x.getAttribute("morphTarget"+Q)!==z[q]&&x.setAttribute("morphTarget"+Q,z[q]),U&&x.getAttribute("morphNormal"+Q)!==U[q]&&x.setAttribute("morphNormal"+Q,U[q]),i[Q]=ie,P+=ie):(z&&x.hasAttribute("morphTarget"+Q)===!0&&x.deleteAttribute("morphTarget"+Q),U&&x.hasAttribute("morphNormal"+Q)===!0&&x.deleteAttribute("morphNormal"+Q),i[Q]=0)}const $=x.morphTargetsRelative?1:1-P;E.getUniforms().setValue(t,"morphTargetBaseInfluence",$),E.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:m}}function WVe(t,e,n,r){let i=new WeakMap;function o(m){const v=r.render.frame,x=m.geometry,E=e.get(m,x);if(i.get(E)!==v&&(e.update(E),i.set(E,v)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),i.get(m)!==v&&(n.update(m.instanceMatrix,t.ARRAY_BUFFER),m.instanceColor!==null&&n.update(m.instanceColor,t.ARRAY_BUFFER),i.set(m,v))),m.isSkinnedMesh){const k=m.skeleton;i.get(k)!==v&&(k.update(),i.set(k,v))}return E}function u(){i=new WeakMap}function h(m){const v=m.target;v.removeEventListener("dispose",h),n.remove(v.instanceMatrix),v.instanceColor!==null&&n.remove(v.instanceColor)}return{update:o,dispose:u}}class a7 extends is{constructor(e,n,r,i,o,u,h,m,v,x){if(x=x!==void 0?x:E0,x!==E0&&x!==D0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&x===E0&&(r=ep),r===void 0&&x===D0&&(r=zm),super(null,i,o,u,h,m,x,r,v),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=h!==void 0?h:Co,this.minFilter=m!==void 0?m:Co,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const ySe=new is,bSe=new a7(1,1);bSe.compareFunction=uSe;const _Se=new pSe,wSe=new k5e,xSe=new yF,Tye=[],Mye=[],kye=new Float32Array(16),Aye=new Float32Array(9),Iye=new Float32Array(4);function h1(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Tye[i];if(o===void 0&&(o=new Float32Array(i),Tye[i]=o),e!==0){r.toArray(o,0);for(let u=1,h=0;u!==e;++u)h+=n,t[u].toArray(o,h)}return o}function Hs(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Gs(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _F(t,e){let n=Mye[e];n===void 0&&(n=new Int32Array(e),Mye[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function $Ve(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function KVe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Hs(n,e))return;t.uniform2fv(this.addr,e),Gs(n,e)}}function XVe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Hs(n,e))return;t.uniform3fv(this.addr,e),Gs(n,e)}}function qVe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Hs(n,e))return;t.uniform4fv(this.addr,e),Gs(n,e)}}function YVe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Hs(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Gs(n,e)}else{if(Hs(n,r))return;Iye.set(r),t.uniformMatrix2fv(this.addr,!1,Iye),Gs(n,r)}}function ZVe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Hs(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Gs(n,e)}else{if(Hs(n,r))return;Aye.set(r),t.uniformMatrix3fv(this.addr,!1,Aye),Gs(n,r)}}function QVe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Hs(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Gs(n,e)}else{if(Hs(n,r))return;kye.set(r),t.uniformMatrix4fv(this.addr,!1,kye),Gs(n,r)}}function JVe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function eje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Hs(n,e))return;t.uniform2iv(this.addr,e),Gs(n,e)}}function tje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Hs(n,e))return;t.uniform3iv(this.addr,e),Gs(n,e)}}function nje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Hs(n,e))return;t.uniform4iv(this.addr,e),Gs(n,e)}}function rje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ije(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Hs(n,e))return;t.uniform2uiv(this.addr,e),Gs(n,e)}}function sje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Hs(n,e))return;t.uniform3uiv(this.addr,e),Gs(n,e)}}function oje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Hs(n,e))return;t.uniform4uiv(this.addr,e),Gs(n,e)}}function aje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?bSe:ySe;n.setTexture2D(e||o,i)}function lje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||wSe,i)}function uje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||xSe,i)}function cje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||_Se,i)}function dje(t){switch(t){case 5126:return $Ve;case 35664:return KVe;case 35665:return XVe;case 35666:return qVe;case 35674:return YVe;case 35675:return ZVe;case 35676:return QVe;case 5124:case 35670:return JVe;case 35667:case 35671:return eje;case 35668:case 35672:return tje;case 35669:case 35673:return nje;case 5125:return rje;case 36294:return ije;case 36295:return sje;case 36296:return oje;case 35678:case 36198:case 36298:case 36306:case 35682:return aje;case 35679:case 36299:case 36307:return lje;case 35680:case 36300:case 36308:case 36293:return uje;case 36289:case 36303:case 36311:case 36292:return cje}}function hje(t,e){t.uniform1fv(this.addr,e)}function pje(t,e){const n=h1(e,this.size,2);t.uniform2fv(this.addr,n)}function fje(t,e){const n=h1(e,this.size,3);t.uniform3fv(this.addr,n)}function mje(t,e){const n=h1(e,this.size,4);t.uniform4fv(this.addr,n)}function gje(t,e){const n=h1(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function vje(t,e){const n=h1(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function yje(t,e){const n=h1(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function bje(t,e){t.uniform1iv(this.addr,e)}function _je(t,e){t.uniform2iv(this.addr,e)}function wje(t,e){t.uniform3iv(this.addr,e)}function xje(t,e){t.uniform4iv(this.addr,e)}function Sje(t,e){t.uniform1uiv(this.addr,e)}function Eje(t,e){t.uniform2uiv(this.addr,e)}function Cje(t,e){t.uniform3uiv(this.addr,e)}function Pje(t,e){t.uniform4uiv(this.addr,e)}function Tje(t,e,n){const r=this.cache,i=e.length,o=_F(n,i);Hs(r,o)||(t.uniform1iv(this.addr,o),Gs(r,o));for(let u=0;u!==i;++u)n.setTexture2D(e[u]||ySe,o[u])}function Mje(t,e,n){const r=this.cache,i=e.length,o=_F(n,i);Hs(r,o)||(t.uniform1iv(this.addr,o),Gs(r,o));for(let u=0;u!==i;++u)n.setTexture3D(e[u]||wSe,o[u])}function kje(t,e,n){const r=this.cache,i=e.length,o=_F(n,i);Hs(r,o)||(t.uniform1iv(this.addr,o),Gs(r,o));for(let u=0;u!==i;++u)n.setTextureCube(e[u]||xSe,o[u])}function Aje(t,e,n){const r=this.cache,i=e.length,o=_F(n,i);Hs(r,o)||(t.uniform1iv(this.addr,o),Gs(r,o));for(let u=0;u!==i;++u)n.setTexture2DArray(e[u]||_Se,o[u])}function Ije(t){switch(t){case 5126:return hje;case 35664:return pje;case 35665:return fje;case 35666:return mje;case 35674:return gje;case 35675:return vje;case 35676:return yje;case 5124:case 35670:return bje;case 35667:case 35671:return _je;case 35668:case 35672:return wje;case 35669:case 35673:return xje;case 5125:return Sje;case 36294:return Eje;case 36295:return Cje;case 36296:return Pje;case 35678:case 36198:case 36298:case 36306:case 35682:return Tje;case 35679:case 36299:case 36307:return Mje;case 35680:case 36300:case 36308:case 36293:return kje;case 36289:case 36303:case 36311:case 36292:return Aje}}class Rje{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=dje(n.type)}}class Dje{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Ije(n.type)}}class Oje{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,u=i.length;o!==u;++o){const h=i[o];h.setValue(e,n[h.id],r)}}}const wG=/(\w+)(\])?(\[|\.)?/g;function Rye(t,e){t.seq.push(e),t.map[e.id]=e}function Lje(t,e,n){const r=t.name,i=r.length;for(wG.lastIndex=0;;){const o=wG.exec(r),u=wG.lastIndex;let h=o[1];const m=o[2]==="]",v=o[3];if(m&&(h=h|0),v===void 0||v==="["&&u+2===i){Rye(n,v===void 0?new Rje(h,t,e):new Dje(h,t,e));break}else{let E=n.map[h];E===void 0&&(E=new Oje(h),Rye(n,E)),n=E}}}class BL{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),u=e.getUniformLocation(n,o.name);Lje(o,u,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,u=n.length;o!==u;++o){const h=n[o],m=r[h.id];m.needsUpdate!==!1&&h.setValue(e,m.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const u=e[i];u.id in n&&r.push(u)}return r}}function Dye(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Nje=37297;let Fje=0;function Bje(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let u=i;u<o;u++){const h=u+1;r.push(`${h===e?">":" "} ${h}: ${n[u]}`)}return r.join(`
`)}function Uje(t){const e=oi.getPrimaries(oi.workingColorSpace),n=oi.getPrimaries(t);let r;switch(e===n?r="":e===PN&&n===CN?r="LinearDisplayP3ToLinearSRGB":e===CN&&n===PN&&(r="LinearSRGBToLinearDisplayP3"),t){case yp:case gF:return[r,"LinearTransferOETF"];case ns:case t7:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function Oye(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const u=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+Bje(t.getShaderSource(e),u)}else return i}function zje(t,e){const n=Uje(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Vje(t,e){let n;switch(e){case LUe:n="Linear";break;case NUe:n="Reinhard";break;case FUe:n="OptimizedCineon";break;case BUe:n="ACESFilmic";break;case zUe:n="AgX";break;case UUe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function jje(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Pw).join(`
`)}function Hje(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Pw).join(`
`)}function Gje(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Wje(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),u=o.name;let h=1;o.type===t.FLOAT_MAT2&&(h=2),o.type===t.FLOAT_MAT3&&(h=3),o.type===t.FLOAT_MAT4&&(h=4),n[u]={type:o.type,location:t.getAttribLocation(e,u),locationSize:h}}return n}function Pw(t){return t!==""}function Lye(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Nye(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $je=/^[ \t]*#include +<([\w\d./]+)>/gm;function _W(t){return t.replace($je,Xje)}const Kje=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Xje(t,e){let n=dr[e];if(n===void 0){const r=Kje.get(e);if(r!==void 0)n=dr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return _W(n)}const qje=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Fye(t){return t.replace(qje,Yje)}function Yje(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Bye(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Zje(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===eSe?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===uUe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Xh&&(e="SHADOWMAP_TYPE_VSM"),e}function Qje(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Qw:case Jw:e="ENVMAP_TYPE_CUBE";break;case fF:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Jje(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Jw:e="ENVMAP_MODE_REFRACTION";break}return e}function e6e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case pF:e="ENVMAP_BLENDING_MULTIPLY";break;case DUe:e="ENVMAP_BLENDING_MIX";break;case OUe:e="ENVMAP_BLENDING_ADD";break}return e}function t6e(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function n6e(t,e,n,r){const i=t.getContext(),o=n.defines;let u=n.vertexShader,h=n.fragmentShader;const m=Zje(n),v=Qje(n),x=Jje(n),E=e6e(n),k=t6e(n),D=n.isWebGL2?"":jje(n),G=Hje(n),N=Gje(o),z=i.createProgram();let U,P,$=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(U=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,N].filter(Pw).join(`
`),U.length>0&&(U+=`
`),P=[D,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,N].filter(Pw).join(`
`),P.length>0&&(P+=`
`)):(U=[Bye(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,N,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Pw).join(`
`),P=[D,Bye(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,N,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+x:"",n.envMap?"#define "+E:"",k?"#define CUBEUV_TEXEL_WIDTH "+k.texelWidth:"",k?"#define CUBEUV_TEXEL_HEIGHT "+k.texelHeight:"",k?"#define CUBEUV_MAX_MIP "+k.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Um?"#define TONE_MAPPING":"",n.toneMapping!==Um?dr.tonemapping_pars_fragment:"",n.toneMapping!==Um?Vje("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",dr.colorspace_pars_fragment,zje("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Pw).join(`
`)),u=_W(u),u=Lye(u,n),u=Nye(u,n),h=_W(h),h=Lye(h,n),h=Nye(h,n),u=Fye(u),h=Fye(h),n.isWebGL2&&n.isRawShaderMaterial!==!0&&($=`#version 300 es
`,U=[G,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+U,P=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===vW?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===vW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+P);const Q=$+U+u,ye=$+P+h,q=Dye(i,i.VERTEX_SHADER,Q),ie=Dye(i,i.FRAGMENT_SHADER,ye);i.attachShader(z,q),i.attachShader(z,ie),n.index0AttributeName!==void 0?i.bindAttribLocation(z,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(z,0,"position"),i.linkProgram(z);function pe(at){if(t.debug.checkShaderErrors){const Et=i.getProgramInfoLog(z).trim(),ue=i.getShaderInfoLog(q).trim(),Ge=i.getShaderInfoLog(ie).trim();let Te=!0,it=!0;if(i.getProgramParameter(z,i.LINK_STATUS)===!1)if(Te=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,z,q,ie);else{const Ne=Oye(i,q,"vertex"),Xe=Oye(i,ie,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(z,i.VALIDATE_STATUS)+`

Program Info Log: `+Et+`
`+Ne+`
`+Xe)}else Et!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Et):(ue===""||Ge==="")&&(it=!1);it&&(at.diagnostics={runnable:Te,programLog:Et,vertexShader:{log:ue,prefix:U},fragmentShader:{log:Ge,prefix:P}})}i.deleteShader(q),i.deleteShader(ie),W=new BL(i,z),he=Wje(i,z)}let W;this.getUniforms=function(){return W===void 0&&pe(this),W};let he;this.getAttributes=function(){return he===void 0&&pe(this),he};let Ye=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Ye===!1&&(Ye=i.getProgramParameter(z,Nje)),Ye},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(z),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Fje++,this.cacheKey=e,this.usedTimes=1,this.program=z,this.vertexShader=q,this.fragmentShader=ie,this}let r6e=0;class i6e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new s6e(e),n.set(e,r)),r}}class s6e{constructor(e){this.id=r6e++,this.code=e,this.usedTimes=0}}function o6e(t,e,n,r,i,o,u){const h=new r7,m=new i6e,v=[],x=i.isWebGL2,E=i.logarithmicDepthBuffer,k=i.vertexTextures;let D=i.precision;const G={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function N(W){return W===0?"uv":`uv${W}`}function z(W,he,Ye,at,Et){const ue=at.fog,Ge=Et.geometry,Te=W.isMeshStandardMaterial?at.environment:null,it=(W.isMeshStandardMaterial?n:e).get(W.envMap||Te),Ne=it&&it.mapping===fF?it.image.height:null,Xe=G[W.type];W.precision!==null&&(D=i.getMaxPrecision(W.precision),D!==W.precision&&console.warn("THREE.WebGLProgram.getParameters:",W.precision,"not supported, using",D,"instead."));const qe=Ge.morphAttributes.position||Ge.morphAttributes.normal||Ge.morphAttributes.color,ft=qe!==void 0?qe.length:0;let Ct=0;Ge.morphAttributes.position!==void 0&&(Ct=1),Ge.morphAttributes.normal!==void 0&&(Ct=2),Ge.morphAttributes.color!==void 0&&(Ct=3);let mt,Pt,Rt,Jt;if(Xe){const Tr=Ed[Xe];mt=Tr.vertexShader,Pt=Tr.fragmentShader}else mt=W.vertexShader,Pt=W.fragmentShader,m.update(W),Rt=m.getVertexShaderID(W),Jt=m.getFragmentShaderID(W);const Yt=t.getRenderTarget(),In=Et.isInstancedMesh===!0,Tn=Et.isBatchedMesh===!0,bn=!!W.map,On=!!W.matcap,lt=!!it,ti=!!W.aoMap,Mn=!!W.lightMap,_n=!!W.bumpMap,rn=!!W.normalMap,Nr=!!W.displacementMap,En=!!W.emissiveMap,xe=!!W.metalnessMap,fe=!!W.roughnessMap,dt=W.anisotropy>0,Dt=W.clearcoat>0,Nt=W.iridescence>0,kt=W.sheen>0,fn=W.transmission>0,en=dt&&!!W.anisotropyMap,sn=Dt&&!!W.clearcoatMap,Dn=Dt&&!!W.clearcoatNormalMap,qn=Dt&&!!W.clearcoatRoughnessMap,Lt=Nt&&!!W.iridescenceMap,sr=Nt&&!!W.iridescenceThicknessMap,Ae=kt&&!!W.sheenColorMap,Tt=kt&&!!W.sheenRoughnessMap,qt=!!W.specularMap,Vt=!!W.specularColorMap,ln=!!W.specularIntensityMap,$n=fn&&!!W.transmissionMap,lr=fn&&!!W.thicknessMap,Fn=!!W.gradientMap,jt=!!W.alphaMap,Fe=W.alphaTest>0,Kt=!!W.alphaHash,Wt=!!W.extensions,Cn=!!Ge.attributes.uv1,xn=!!Ge.attributes.uv2,or=!!Ge.attributes.uv3;let pr=Um;return W.toneMapped&&(Yt===null||Yt.isXRRenderTarget===!0)&&(pr=t.toneMapping),{isWebGL2:x,shaderID:Xe,shaderType:W.type,shaderName:W.name,vertexShader:mt,fragmentShader:Pt,defines:W.defines,customVertexShaderID:Rt,customFragmentShaderID:Jt,isRawShaderMaterial:W.isRawShaderMaterial===!0,glslVersion:W.glslVersion,precision:D,batching:Tn,instancing:In,instancingColor:In&&Et.instanceColor!==null,supportsVertexTextures:k,outputColorSpace:Yt===null?t.outputColorSpace:Yt.isXRRenderTarget===!0?Yt.texture.colorSpace:yp,map:bn,matcap:On,envMap:lt,envMapMode:lt&&it.mapping,envMapCubeUVHeight:Ne,aoMap:ti,lightMap:Mn,bumpMap:_n,normalMap:rn,displacementMap:k&&Nr,emissiveMap:En,normalMapObjectSpace:rn&&W.normalMapType===n5e,normalMapTangentSpace:rn&&W.normalMapType===u1,metalnessMap:xe,roughnessMap:fe,anisotropy:dt,anisotropyMap:en,clearcoat:Dt,clearcoatMap:sn,clearcoatNormalMap:Dn,clearcoatRoughnessMap:qn,iridescence:Nt,iridescenceMap:Lt,iridescenceThicknessMap:sr,sheen:kt,sheenColorMap:Ae,sheenRoughnessMap:Tt,specularMap:qt,specularColorMap:Vt,specularIntensityMap:ln,transmission:fn,transmissionMap:$n,thicknessMap:lr,gradientMap:Fn,opaque:W.transparent===!1&&W.blending===Uw,alphaMap:jt,alphaTest:Fe,alphaHash:Kt,combine:W.combine,mapUv:bn&&N(W.map.channel),aoMapUv:ti&&N(W.aoMap.channel),lightMapUv:Mn&&N(W.lightMap.channel),bumpMapUv:_n&&N(W.bumpMap.channel),normalMapUv:rn&&N(W.normalMap.channel),displacementMapUv:Nr&&N(W.displacementMap.channel),emissiveMapUv:En&&N(W.emissiveMap.channel),metalnessMapUv:xe&&N(W.metalnessMap.channel),roughnessMapUv:fe&&N(W.roughnessMap.channel),anisotropyMapUv:en&&N(W.anisotropyMap.channel),clearcoatMapUv:sn&&N(W.clearcoatMap.channel),clearcoatNormalMapUv:Dn&&N(W.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:qn&&N(W.clearcoatRoughnessMap.channel),iridescenceMapUv:Lt&&N(W.iridescenceMap.channel),iridescenceThicknessMapUv:sr&&N(W.iridescenceThicknessMap.channel),sheenColorMapUv:Ae&&N(W.sheenColorMap.channel),sheenRoughnessMapUv:Tt&&N(W.sheenRoughnessMap.channel),specularMapUv:qt&&N(W.specularMap.channel),specularColorMapUv:Vt&&N(W.specularColorMap.channel),specularIntensityMapUv:ln&&N(W.specularIntensityMap.channel),transmissionMapUv:$n&&N(W.transmissionMap.channel),thicknessMapUv:lr&&N(W.thicknessMap.channel),alphaMapUv:jt&&N(W.alphaMap.channel),vertexTangents:!!Ge.attributes.tangent&&(rn||dt),vertexColors:W.vertexColors,vertexAlphas:W.vertexColors===!0&&!!Ge.attributes.color&&Ge.attributes.color.itemSize===4,vertexUv1s:Cn,vertexUv2s:xn,vertexUv3s:or,pointsUvs:Et.isPoints===!0&&!!Ge.attributes.uv&&(bn||jt),fog:!!ue,useFog:W.fog===!0,fogExp2:ue&&ue.isFogExp2,flatShading:W.flatShading===!0,sizeAttenuation:W.sizeAttenuation===!0,logarithmicDepthBuffer:E,skinning:Et.isSkinnedMesh===!0,morphTargets:Ge.morphAttributes.position!==void 0,morphNormals:Ge.morphAttributes.normal!==void 0,morphColors:Ge.morphAttributes.color!==void 0,morphTargetsCount:ft,morphTextureStride:Ct,numDirLights:he.directional.length,numPointLights:he.point.length,numSpotLights:he.spot.length,numSpotLightMaps:he.spotLightMap.length,numRectAreaLights:he.rectArea.length,numHemiLights:he.hemi.length,numDirLightShadows:he.directionalShadowMap.length,numPointLightShadows:he.pointShadowMap.length,numSpotLightShadows:he.spotShadowMap.length,numSpotLightShadowsWithMaps:he.numSpotLightShadowsWithMaps,numLightProbes:he.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:W.dithering,shadowMapEnabled:t.shadowMap.enabled&&Ye.length>0,shadowMapType:t.shadowMap.type,toneMapping:pr,useLegacyLights:t._useLegacyLights,decodeVideoTexture:bn&&W.map.isVideoTexture===!0&&oi.getTransfer(W.map.colorSpace)===Pi,premultipliedAlpha:W.premultipliedAlpha,doubleSided:W.side===Ka,flipSided:W.side===Vs,useDepthPacking:W.depthPacking>=0,depthPacking:W.depthPacking||0,index0AttributeName:W.index0AttributeName,extensionDerivatives:Wt&&W.extensions.derivatives===!0,extensionFragDepth:Wt&&W.extensions.fragDepth===!0,extensionDrawBuffers:Wt&&W.extensions.drawBuffers===!0,extensionShaderTextureLOD:Wt&&W.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Wt&&W.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:x||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:x||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:x||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:W.customProgramCacheKey()}}function U(W){const he=[];if(W.shaderID?he.push(W.shaderID):(he.push(W.customVertexShaderID),he.push(W.customFragmentShaderID)),W.defines!==void 0)for(const Ye in W.defines)he.push(Ye),he.push(W.defines[Ye]);return W.isRawShaderMaterial===!1&&(P(he,W),$(he,W),he.push(t.outputColorSpace)),he.push(W.customProgramCacheKey),he.join()}function P(W,he){W.push(he.precision),W.push(he.outputColorSpace),W.push(he.envMapMode),W.push(he.envMapCubeUVHeight),W.push(he.mapUv),W.push(he.alphaMapUv),W.push(he.lightMapUv),W.push(he.aoMapUv),W.push(he.bumpMapUv),W.push(he.normalMapUv),W.push(he.displacementMapUv),W.push(he.emissiveMapUv),W.push(he.metalnessMapUv),W.push(he.roughnessMapUv),W.push(he.anisotropyMapUv),W.push(he.clearcoatMapUv),W.push(he.clearcoatNormalMapUv),W.push(he.clearcoatRoughnessMapUv),W.push(he.iridescenceMapUv),W.push(he.iridescenceThicknessMapUv),W.push(he.sheenColorMapUv),W.push(he.sheenRoughnessMapUv),W.push(he.specularMapUv),W.push(he.specularColorMapUv),W.push(he.specularIntensityMapUv),W.push(he.transmissionMapUv),W.push(he.thicknessMapUv),W.push(he.combine),W.push(he.fogExp2),W.push(he.sizeAttenuation),W.push(he.morphTargetsCount),W.push(he.morphAttributeCount),W.push(he.numDirLights),W.push(he.numPointLights),W.push(he.numSpotLights),W.push(he.numSpotLightMaps),W.push(he.numHemiLights),W.push(he.numRectAreaLights),W.push(he.numDirLightShadows),W.push(he.numPointLightShadows),W.push(he.numSpotLightShadows),W.push(he.numSpotLightShadowsWithMaps),W.push(he.numLightProbes),W.push(he.shadowMapType),W.push(he.toneMapping),W.push(he.numClippingPlanes),W.push(he.numClipIntersection),W.push(he.depthPacking)}function $(W,he){h.disableAll(),he.isWebGL2&&h.enable(0),he.supportsVertexTextures&&h.enable(1),he.instancing&&h.enable(2),he.instancingColor&&h.enable(3),he.matcap&&h.enable(4),he.envMap&&h.enable(5),he.normalMapObjectSpace&&h.enable(6),he.normalMapTangentSpace&&h.enable(7),he.clearcoat&&h.enable(8),he.iridescence&&h.enable(9),he.alphaTest&&h.enable(10),he.vertexColors&&h.enable(11),he.vertexAlphas&&h.enable(12),he.vertexUv1s&&h.enable(13),he.vertexUv2s&&h.enable(14),he.vertexUv3s&&h.enable(15),he.vertexTangents&&h.enable(16),he.anisotropy&&h.enable(17),he.alphaHash&&h.enable(18),he.batching&&h.enable(19),W.push(h.mask),h.disableAll(),he.fog&&h.enable(0),he.useFog&&h.enable(1),he.flatShading&&h.enable(2),he.logarithmicDepthBuffer&&h.enable(3),he.skinning&&h.enable(4),he.morphTargets&&h.enable(5),he.morphNormals&&h.enable(6),he.morphColors&&h.enable(7),he.premultipliedAlpha&&h.enable(8),he.shadowMapEnabled&&h.enable(9),he.useLegacyLights&&h.enable(10),he.doubleSided&&h.enable(11),he.flipSided&&h.enable(12),he.useDepthPacking&&h.enable(13),he.dithering&&h.enable(14),he.transmission&&h.enable(15),he.sheen&&h.enable(16),he.opaque&&h.enable(17),he.pointsUvs&&h.enable(18),he.decodeVideoTexture&&h.enable(19),W.push(h.mask)}function Q(W){const he=G[W.type];let Ye;if(he){const at=Ed[he];Ye=j5e.clone(at.uniforms)}else Ye=W.uniforms;return Ye}function ye(W,he){let Ye;for(let at=0,Et=v.length;at<Et;at++){const ue=v[at];if(ue.cacheKey===he){Ye=ue,++Ye.usedTimes;break}}return Ye===void 0&&(Ye=new n6e(t,he,W,o),v.push(Ye)),Ye}function q(W){if(--W.usedTimes===0){const he=v.indexOf(W);v[he]=v[v.length-1],v.pop(),W.destroy()}}function ie(W){m.remove(W)}function pe(){m.dispose()}return{getParameters:z,getProgramCacheKey:U,getUniforms:Q,acquireProgram:ye,releaseProgram:q,releaseShaderCache:ie,programs:v,dispose:pe}}function a6e(){let t=new WeakMap;function e(o){let u=t.get(o);return u===void 0&&(u={},t.set(o,u)),u}function n(o){t.delete(o)}function r(o,u,h){t.get(o)[u]=h}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function l6e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Uye(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function zye(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function u(E,k,D,G,N,z){let U=t[e];return U===void 0?(U={id:E.id,object:E,geometry:k,material:D,groupOrder:G,renderOrder:E.renderOrder,z:N,group:z},t[e]=U):(U.id=E.id,U.object=E,U.geometry=k,U.material=D,U.groupOrder=G,U.renderOrder=E.renderOrder,U.z=N,U.group=z),e++,U}function h(E,k,D,G,N,z){const U=u(E,k,D,G,N,z);D.transmission>0?r.push(U):D.transparent===!0?i.push(U):n.push(U)}function m(E,k,D,G,N,z){const U=u(E,k,D,G,N,z);D.transmission>0?r.unshift(U):D.transparent===!0?i.unshift(U):n.unshift(U)}function v(E,k){n.length>1&&n.sort(E||l6e),r.length>1&&r.sort(k||Uye),i.length>1&&i.sort(k||Uye)}function x(){for(let E=e,k=t.length;E<k;E++){const D=t[E];if(D.id===null)break;D.id=null,D.object=null,D.geometry=null,D.material=null,D.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:h,unshift:m,finish:x,sort:v}}function u6e(){let t=new WeakMap;function e(r,i){const o=t.get(r);let u;return o===void 0?(u=new zye,t.set(r,[u])):i>=o.length?(u=new zye,o.push(u)):u=o[i],u}function n(){t=new WeakMap}return{get:e,dispose:n}}function c6e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Le,color:new Sn};break;case"SpotLight":n={position:new Le,direction:new Le,color:new Sn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Le,color:new Sn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Le,skyColor:new Sn,groundColor:new Sn};break;case"RectAreaLight":n={color:new Sn,position:new Le,halfWidth:new Le,halfHeight:new Le};break}return t[e.id]=n,n}}}function d6e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let h6e=0;function p6e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function f6e(t,e){const n=new c6e,r=d6e(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let x=0;x<9;x++)i.probe.push(new Le);const o=new Le,u=new zn,h=new zn;function m(x,E){let k=0,D=0,G=0;for(let at=0;at<9;at++)i.probe[at].set(0,0,0);let N=0,z=0,U=0,P=0,$=0,Q=0,ye=0,q=0,ie=0,pe=0,W=0;x.sort(p6e);const he=E===!0?Math.PI:1;for(let at=0,Et=x.length;at<Et;at++){const ue=x[at],Ge=ue.color,Te=ue.intensity,it=ue.distance,Ne=ue.shadow&&ue.shadow.map?ue.shadow.map.texture:null;if(ue.isAmbientLight)k+=Ge.r*Te*he,D+=Ge.g*Te*he,G+=Ge.b*Te*he;else if(ue.isLightProbe){for(let Xe=0;Xe<9;Xe++)i.probe[Xe].addScaledVector(ue.sh.coefficients[Xe],Te);W++}else if(ue.isDirectionalLight){const Xe=n.get(ue);if(Xe.color.copy(ue.color).multiplyScalar(ue.intensity*he),ue.castShadow){const qe=ue.shadow,ft=r.get(ue);ft.shadowBias=qe.bias,ft.shadowNormalBias=qe.normalBias,ft.shadowRadius=qe.radius,ft.shadowMapSize=qe.mapSize,i.directionalShadow[N]=ft,i.directionalShadowMap[N]=Ne,i.directionalShadowMatrix[N]=ue.shadow.matrix,Q++}i.directional[N]=Xe,N++}else if(ue.isSpotLight){const Xe=n.get(ue);Xe.position.setFromMatrixPosition(ue.matrixWorld),Xe.color.copy(Ge).multiplyScalar(Te*he),Xe.distance=it,Xe.coneCos=Math.cos(ue.angle),Xe.penumbraCos=Math.cos(ue.angle*(1-ue.penumbra)),Xe.decay=ue.decay,i.spot[U]=Xe;const qe=ue.shadow;if(ue.map&&(i.spotLightMap[ie]=ue.map,ie++,qe.updateMatrices(ue),ue.castShadow&&pe++),i.spotLightMatrix[U]=qe.matrix,ue.castShadow){const ft=r.get(ue);ft.shadowBias=qe.bias,ft.shadowNormalBias=qe.normalBias,ft.shadowRadius=qe.radius,ft.shadowMapSize=qe.mapSize,i.spotShadow[U]=ft,i.spotShadowMap[U]=Ne,q++}U++}else if(ue.isRectAreaLight){const Xe=n.get(ue);Xe.color.copy(Ge).multiplyScalar(Te),Xe.halfWidth.set(ue.width*.5,0,0),Xe.halfHeight.set(0,ue.height*.5,0),i.rectArea[P]=Xe,P++}else if(ue.isPointLight){const Xe=n.get(ue);if(Xe.color.copy(ue.color).multiplyScalar(ue.intensity*he),Xe.distance=ue.distance,Xe.decay=ue.decay,ue.castShadow){const qe=ue.shadow,ft=r.get(ue);ft.shadowBias=qe.bias,ft.shadowNormalBias=qe.normalBias,ft.shadowRadius=qe.radius,ft.shadowMapSize=qe.mapSize,ft.shadowCameraNear=qe.camera.near,ft.shadowCameraFar=qe.camera.far,i.pointShadow[z]=ft,i.pointShadowMap[z]=Ne,i.pointShadowMatrix[z]=ue.shadow.matrix,ye++}i.point[z]=Xe,z++}else if(ue.isHemisphereLight){const Xe=n.get(ue);Xe.skyColor.copy(ue.color).multiplyScalar(Te*he),Xe.groundColor.copy(ue.groundColor).multiplyScalar(Te*he),i.hemi[$]=Xe,$++}}P>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=tn.LTC_FLOAT_1,i.rectAreaLTC2=tn.LTC_FLOAT_2):(i.rectAreaLTC1=tn.LTC_HALF_1,i.rectAreaLTC2=tn.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=tn.LTC_FLOAT_1,i.rectAreaLTC2=tn.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=tn.LTC_HALF_1,i.rectAreaLTC2=tn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=k,i.ambient[1]=D,i.ambient[2]=G;const Ye=i.hash;(Ye.directionalLength!==N||Ye.pointLength!==z||Ye.spotLength!==U||Ye.rectAreaLength!==P||Ye.hemiLength!==$||Ye.numDirectionalShadows!==Q||Ye.numPointShadows!==ye||Ye.numSpotShadows!==q||Ye.numSpotMaps!==ie||Ye.numLightProbes!==W)&&(i.directional.length=N,i.spot.length=U,i.rectArea.length=P,i.point.length=z,i.hemi.length=$,i.directionalShadow.length=Q,i.directionalShadowMap.length=Q,i.pointShadow.length=ye,i.pointShadowMap.length=ye,i.spotShadow.length=q,i.spotShadowMap.length=q,i.directionalShadowMatrix.length=Q,i.pointShadowMatrix.length=ye,i.spotLightMatrix.length=q+ie-pe,i.spotLightMap.length=ie,i.numSpotLightShadowsWithMaps=pe,i.numLightProbes=W,Ye.directionalLength=N,Ye.pointLength=z,Ye.spotLength=U,Ye.rectAreaLength=P,Ye.hemiLength=$,Ye.numDirectionalShadows=Q,Ye.numPointShadows=ye,Ye.numSpotShadows=q,Ye.numSpotMaps=ie,Ye.numLightProbes=W,i.version=h6e++)}function v(x,E){let k=0,D=0,G=0,N=0,z=0;const U=E.matrixWorldInverse;for(let P=0,$=x.length;P<$;P++){const Q=x[P];if(Q.isDirectionalLight){const ye=i.directional[k];ye.direction.setFromMatrixPosition(Q.matrixWorld),o.setFromMatrixPosition(Q.target.matrixWorld),ye.direction.sub(o),ye.direction.transformDirection(U),k++}else if(Q.isSpotLight){const ye=i.spot[G];ye.position.setFromMatrixPosition(Q.matrixWorld),ye.position.applyMatrix4(U),ye.direction.setFromMatrixPosition(Q.matrixWorld),o.setFromMatrixPosition(Q.target.matrixWorld),ye.direction.sub(o),ye.direction.transformDirection(U),G++}else if(Q.isRectAreaLight){const ye=i.rectArea[N];ye.position.setFromMatrixPosition(Q.matrixWorld),ye.position.applyMatrix4(U),h.identity(),u.copy(Q.matrixWorld),u.premultiply(U),h.extractRotation(u),ye.halfWidth.set(Q.width*.5,0,0),ye.halfHeight.set(0,Q.height*.5,0),ye.halfWidth.applyMatrix4(h),ye.halfHeight.applyMatrix4(h),N++}else if(Q.isPointLight){const ye=i.point[D];ye.position.setFromMatrixPosition(Q.matrixWorld),ye.position.applyMatrix4(U),D++}else if(Q.isHemisphereLight){const ye=i.hemi[z];ye.direction.setFromMatrixPosition(Q.matrixWorld),ye.direction.transformDirection(U),z++}}}return{setup:m,setupView:v,state:i}}function Vye(t,e){const n=new f6e(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function u(E){r.push(E)}function h(E){i.push(E)}function m(E){n.setup(r,E)}function v(E){n.setupView(r,E)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:m,setupLightsView:v,pushLight:u,pushShadow:h}}function m6e(t,e){let n=new WeakMap;function r(o,u=0){const h=n.get(o);let m;return h===void 0?(m=new Vye(t,e),n.set(o,[m])):u>=h.length?(m=new Vye(t,e),h.push(m)):m=h[u],m}function i(){n=new WeakMap}return{get:r,dispose:i}}class SSe extends Cu{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ZT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class g6e extends Cu{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const v6e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,y6e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function b6e(t,e,n){let r=new s7;const i=new un,o=new un,u=new Pr,h=new SSe({depthPacking:t5e}),m=new g6e,v={},x=n.maxTextureSize,E={[gp]:Vs,[Vs]:gp,[Ka]:Ka},k=new el({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new un},radius:{value:4}},vertexShader:v6e,fragmentShader:y6e}),D=k.clone();D.defines.HORIZONTAL_PASS=1;const G=new ea;G.setAttribute("position",new qa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const N=new ks(G,k),z=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=eSe;let U=this.type;this.render=function(q,ie,pe){if(z.enabled===!1||z.autoUpdate===!1&&z.needsUpdate===!1||q.length===0)return;const W=t.getRenderTarget(),he=t.getActiveCubeFace(),Ye=t.getActiveMipmapLevel(),at=t.state;at.setBlending(Sc),at.buffers.color.setClear(1,1,1,1),at.buffers.depth.setTest(!0),at.setScissorTest(!1);const Et=U!==Xh&&this.type===Xh,ue=U===Xh&&this.type!==Xh;for(let Ge=0,Te=q.length;Ge<Te;Ge++){const it=q[Ge],Ne=it.shadow;if(Ne===void 0){console.warn("THREE.WebGLShadowMap:",it,"has no shadow.");continue}if(Ne.autoUpdate===!1&&Ne.needsUpdate===!1)continue;i.copy(Ne.mapSize);const Xe=Ne.getFrameExtents();if(i.multiply(Xe),o.copy(Ne.mapSize),(i.x>x||i.y>x)&&(i.x>x&&(o.x=Math.floor(x/Xe.x),i.x=o.x*Xe.x,Ne.mapSize.x=o.x),i.y>x&&(o.y=Math.floor(x/Xe.y),i.y=o.y*Xe.y,Ne.mapSize.y=o.y)),Ne.map===null||Et===!0||ue===!0){const ft=this.type!==Xh?{minFilter:Co,magFilter:Co}:{};Ne.map!==null&&Ne.map.dispose(),Ne.map=new Cl(i.x,i.y,ft),Ne.map.texture.name=it.name+".shadowMap",Ne.camera.updateProjectionMatrix()}t.setRenderTarget(Ne.map),t.clear();const qe=Ne.getViewportCount();for(let ft=0;ft<qe;ft++){const Ct=Ne.getViewport(ft);u.set(o.x*Ct.x,o.y*Ct.y,o.x*Ct.z,o.y*Ct.w),at.viewport(u),Ne.updateMatrices(it,ft),r=Ne.getFrustum(),Q(ie,pe,Ne.camera,it,this.type)}Ne.isPointLightShadow!==!0&&this.type===Xh&&P(Ne,pe),Ne.needsUpdate=!1}U=this.type,z.needsUpdate=!1,t.setRenderTarget(W,he,Ye)};function P(q,ie){const pe=e.update(N);k.defines.VSM_SAMPLES!==q.blurSamples&&(k.defines.VSM_SAMPLES=q.blurSamples,D.defines.VSM_SAMPLES=q.blurSamples,k.needsUpdate=!0,D.needsUpdate=!0),q.mapPass===null&&(q.mapPass=new Cl(i.x,i.y)),k.uniforms.shadow_pass.value=q.map.texture,k.uniforms.resolution.value=q.mapSize,k.uniforms.radius.value=q.radius,t.setRenderTarget(q.mapPass),t.clear(),t.renderBufferDirect(ie,null,pe,k,N,null),D.uniforms.shadow_pass.value=q.mapPass.texture,D.uniforms.resolution.value=q.mapSize,D.uniforms.radius.value=q.radius,t.setRenderTarget(q.map),t.clear(),t.renderBufferDirect(ie,null,pe,D,N,null)}function $(q,ie,pe,W){let he=null;const Ye=pe.isPointLight===!0?q.customDistanceMaterial:q.customDepthMaterial;if(Ye!==void 0)he=Ye;else if(he=pe.isPointLight===!0?m:h,t.localClippingEnabled&&ie.clipShadows===!0&&Array.isArray(ie.clippingPlanes)&&ie.clippingPlanes.length!==0||ie.displacementMap&&ie.displacementScale!==0||ie.alphaMap&&ie.alphaTest>0||ie.map&&ie.alphaTest>0){const at=he.uuid,Et=ie.uuid;let ue=v[at];ue===void 0&&(ue={},v[at]=ue);let Ge=ue[Et];Ge===void 0&&(Ge=he.clone(),ue[Et]=Ge,ie.addEventListener("dispose",ye)),he=Ge}if(he.visible=ie.visible,he.wireframe=ie.wireframe,W===Xh?he.side=ie.shadowSide!==null?ie.shadowSide:ie.side:he.side=ie.shadowSide!==null?ie.shadowSide:E[ie.side],he.alphaMap=ie.alphaMap,he.alphaTest=ie.alphaTest,he.map=ie.map,he.clipShadows=ie.clipShadows,he.clippingPlanes=ie.clippingPlanes,he.clipIntersection=ie.clipIntersection,he.displacementMap=ie.displacementMap,he.displacementScale=ie.displacementScale,he.displacementBias=ie.displacementBias,he.wireframeLinewidth=ie.wireframeLinewidth,he.linewidth=ie.linewidth,pe.isPointLight===!0&&he.isMeshDistanceMaterial===!0){const at=t.properties.get(he);at.light=pe}return he}function Q(q,ie,pe,W,he){if(q.visible===!1)return;if(q.layers.test(ie.layers)&&(q.isMesh||q.isLine||q.isPoints)&&(q.castShadow||q.receiveShadow&&he===Xh)&&(!q.frustumCulled||r.intersectsObject(q))){q.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,q.matrixWorld);const Et=e.update(q),ue=q.material;if(Array.isArray(ue)){const Ge=Et.groups;for(let Te=0,it=Ge.length;Te<it;Te++){const Ne=Ge[Te],Xe=ue[Ne.materialIndex];if(Xe&&Xe.visible){const qe=$(q,Xe,W,he);q.onBeforeShadow(t,q,ie,pe,Et,qe,Ne),t.renderBufferDirect(pe,null,Et,qe,q,Ne),q.onAfterShadow(t,q,ie,pe,Et,qe,Ne)}}}else if(ue.visible){const Ge=$(q,ue,W,he);q.onBeforeShadow(t,q,ie,pe,Et,Ge,null),t.renderBufferDirect(pe,null,Et,Ge,q,null),q.onAfterShadow(t,q,ie,pe,Et,Ge,null)}}const at=q.children;for(let Et=0,ue=at.length;Et<ue;Et++)Q(at[Et],ie,pe,W,he)}function ye(q){q.target.removeEventListener("dispose",ye);for(const pe in v){const W=v[pe],he=q.target.uuid;he in W&&(W[he].dispose(),delete W[he])}}}function _6e(t,e,n){const r=n.isWebGL2;function i(){let Fe=!1;const Kt=new Pr;let Wt=null;const Cn=new Pr(0,0,0,0);return{setMask:function(xn){Wt!==xn&&!Fe&&(t.colorMask(xn,xn,xn,xn),Wt=xn)},setLocked:function(xn){Fe=xn},setClear:function(xn,or,pr,Wr,Tr){Tr===!0&&(xn*=Wr,or*=Wr,pr*=Wr),Kt.set(xn,or,pr,Wr),Cn.equals(Kt)===!1&&(t.clearColor(xn,or,pr,Wr),Cn.copy(Kt))},reset:function(){Fe=!1,Wt=null,Cn.set(-1,0,0,0)}}}function o(){let Fe=!1,Kt=null,Wt=null,Cn=null;return{setTest:function(xn){xn?Tn(t.DEPTH_TEST):bn(t.DEPTH_TEST)},setMask:function(xn){Kt!==xn&&!Fe&&(t.depthMask(xn),Kt=xn)},setFunc:function(xn){if(Wt!==xn){switch(xn){case PUe:t.depthFunc(t.NEVER);break;case TUe:t.depthFunc(t.ALWAYS);break;case MUe:t.depthFunc(t.LESS);break;case bN:t.depthFunc(t.LEQUAL);break;case kUe:t.depthFunc(t.EQUAL);break;case AUe:t.depthFunc(t.GEQUAL);break;case IUe:t.depthFunc(t.GREATER);break;case RUe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Wt=xn}},setLocked:function(xn){Fe=xn},setClear:function(xn){Cn!==xn&&(t.clearDepth(xn),Cn=xn)},reset:function(){Fe=!1,Kt=null,Wt=null,Cn=null}}}function u(){let Fe=!1,Kt=null,Wt=null,Cn=null,xn=null,or=null,pr=null,Wr=null,Tr=null;return{setTest:function(ur){Fe||(ur?Tn(t.STENCIL_TEST):bn(t.STENCIL_TEST))},setMask:function(ur){Kt!==ur&&!Fe&&(t.stencilMask(ur),Kt=ur)},setFunc:function(ur,Zi,so){(Wt!==ur||Cn!==Zi||xn!==so)&&(t.stencilFunc(ur,Zi,so),Wt=ur,Cn=Zi,xn=so)},setOp:function(ur,Zi,so){(or!==ur||pr!==Zi||Wr!==so)&&(t.stencilOp(ur,Zi,so),or=ur,pr=Zi,Wr=so)},setLocked:function(ur){Fe=ur},setClear:function(ur){Tr!==ur&&(t.clearStencil(ur),Tr=ur)},reset:function(){Fe=!1,Kt=null,Wt=null,Cn=null,xn=null,or=null,pr=null,Wr=null,Tr=null}}}const h=new i,m=new o,v=new u,x=new WeakMap,E=new WeakMap;let k={},D={},G=new WeakMap,N=[],z=null,U=!1,P=null,$=null,Q=null,ye=null,q=null,ie=null,pe=null,W=new Sn(0,0,0),he=0,Ye=!1,at=null,Et=null,ue=null,Ge=null,Te=null;const it=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ne=!1,Xe=0;const qe=t.getParameter(t.VERSION);qe.indexOf("WebGL")!==-1?(Xe=parseFloat(/^WebGL (\d)/.exec(qe)[1]),Ne=Xe>=1):qe.indexOf("OpenGL ES")!==-1&&(Xe=parseFloat(/^OpenGL ES (\d)/.exec(qe)[1]),Ne=Xe>=2);let ft=null,Ct={};const mt=t.getParameter(t.SCISSOR_BOX),Pt=t.getParameter(t.VIEWPORT),Rt=new Pr().fromArray(mt),Jt=new Pr().fromArray(Pt);function Yt(Fe,Kt,Wt,Cn){const xn=new Uint8Array(4),or=t.createTexture();t.bindTexture(Fe,or),t.texParameteri(Fe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Fe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let pr=0;pr<Wt;pr++)r&&(Fe===t.TEXTURE_3D||Fe===t.TEXTURE_2D_ARRAY)?t.texImage3D(Kt,0,t.RGBA,1,1,Cn,0,t.RGBA,t.UNSIGNED_BYTE,xn):t.texImage2D(Kt+pr,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,xn);return or}const In={};In[t.TEXTURE_2D]=Yt(t.TEXTURE_2D,t.TEXTURE_2D,1),In[t.TEXTURE_CUBE_MAP]=Yt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(In[t.TEXTURE_2D_ARRAY]=Yt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),In[t.TEXTURE_3D]=Yt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),h.setClear(0,0,0,1),m.setClear(1),v.setClear(0),Tn(t.DEPTH_TEST),m.setFunc(bN),En(!1),xe(x0e),Tn(t.CULL_FACE),rn(Sc);function Tn(Fe){k[Fe]!==!0&&(t.enable(Fe),k[Fe]=!0)}function bn(Fe){k[Fe]!==!1&&(t.disable(Fe),k[Fe]=!1)}function On(Fe,Kt){return D[Fe]!==Kt?(t.bindFramebuffer(Fe,Kt),D[Fe]=Kt,r&&(Fe===t.DRAW_FRAMEBUFFER&&(D[t.FRAMEBUFFER]=Kt),Fe===t.FRAMEBUFFER&&(D[t.DRAW_FRAMEBUFFER]=Kt)),!0):!1}function lt(Fe,Kt){let Wt=N,Cn=!1;if(Fe)if(Wt=G.get(Kt),Wt===void 0&&(Wt=[],G.set(Kt,Wt)),Fe.isWebGLMultipleRenderTargets){const xn=Fe.texture;if(Wt.length!==xn.length||Wt[0]!==t.COLOR_ATTACHMENT0){for(let or=0,pr=xn.length;or<pr;or++)Wt[or]=t.COLOR_ATTACHMENT0+or;Wt.length=xn.length,Cn=!0}}else Wt[0]!==t.COLOR_ATTACHMENT0&&(Wt[0]=t.COLOR_ATTACHMENT0,Cn=!0);else Wt[0]!==t.BACK&&(Wt[0]=t.BACK,Cn=!0);Cn&&(n.isWebGL2?t.drawBuffers(Wt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Wt))}function ti(Fe){return z!==Fe?(t.useProgram(Fe),z=Fe,!0):!1}const Mn={[m0]:t.FUNC_ADD,[dUe]:t.FUNC_SUBTRACT,[hUe]:t.FUNC_REVERSE_SUBTRACT};if(r)Mn[P0e]=t.MIN,Mn[T0e]=t.MAX;else{const Fe=e.get("EXT_blend_minmax");Fe!==null&&(Mn[P0e]=Fe.MIN_EXT,Mn[T0e]=Fe.MAX_EXT)}const _n={[pUe]:t.ZERO,[fUe]:t.ONE,[mUe]:t.SRC_COLOR,[pW]:t.SRC_ALPHA,[wUe]:t.SRC_ALPHA_SATURATE,[bUe]:t.DST_COLOR,[vUe]:t.DST_ALPHA,[gUe]:t.ONE_MINUS_SRC_COLOR,[fW]:t.ONE_MINUS_SRC_ALPHA,[_Ue]:t.ONE_MINUS_DST_COLOR,[yUe]:t.ONE_MINUS_DST_ALPHA,[xUe]:t.CONSTANT_COLOR,[SUe]:t.ONE_MINUS_CONSTANT_COLOR,[EUe]:t.CONSTANT_ALPHA,[CUe]:t.ONE_MINUS_CONSTANT_ALPHA};function rn(Fe,Kt,Wt,Cn,xn,or,pr,Wr,Tr,ur){if(Fe===Sc){U===!0&&(bn(t.BLEND),U=!1);return}if(U===!1&&(Tn(t.BLEND),U=!0),Fe!==cUe){if(Fe!==P||ur!==Ye){if(($!==m0||q!==m0)&&(t.blendEquation(t.FUNC_ADD),$=m0,q=m0),ur)switch(Fe){case Uw:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case S0e:t.blendFunc(t.ONE,t.ONE);break;case E0e:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case C0e:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}else switch(Fe){case Uw:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case S0e:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case E0e:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case C0e:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}Q=null,ye=null,ie=null,pe=null,W.set(0,0,0),he=0,P=Fe,Ye=ur}return}xn=xn||Kt,or=or||Wt,pr=pr||Cn,(Kt!==$||xn!==q)&&(t.blendEquationSeparate(Mn[Kt],Mn[xn]),$=Kt,q=xn),(Wt!==Q||Cn!==ye||or!==ie||pr!==pe)&&(t.blendFuncSeparate(_n[Wt],_n[Cn],_n[or],_n[pr]),Q=Wt,ye=Cn,ie=or,pe=pr),(Wr.equals(W)===!1||Tr!==he)&&(t.blendColor(Wr.r,Wr.g,Wr.b,Tr),W.copy(Wr),he=Tr),P=Fe,Ye=!1}function Nr(Fe,Kt){Fe.side===Ka?bn(t.CULL_FACE):Tn(t.CULL_FACE);let Wt=Fe.side===Vs;Kt&&(Wt=!Wt),En(Wt),Fe.blending===Uw&&Fe.transparent===!1?rn(Sc):rn(Fe.blending,Fe.blendEquation,Fe.blendSrc,Fe.blendDst,Fe.blendEquationAlpha,Fe.blendSrcAlpha,Fe.blendDstAlpha,Fe.blendColor,Fe.blendAlpha,Fe.premultipliedAlpha),m.setFunc(Fe.depthFunc),m.setTest(Fe.depthTest),m.setMask(Fe.depthWrite),h.setMask(Fe.colorWrite);const Cn=Fe.stencilWrite;v.setTest(Cn),Cn&&(v.setMask(Fe.stencilWriteMask),v.setFunc(Fe.stencilFunc,Fe.stencilRef,Fe.stencilFuncMask),v.setOp(Fe.stencilFail,Fe.stencilZFail,Fe.stencilZPass)),dt(Fe.polygonOffset,Fe.polygonOffsetFactor,Fe.polygonOffsetUnits),Fe.alphaToCoverage===!0?Tn(t.SAMPLE_ALPHA_TO_COVERAGE):bn(t.SAMPLE_ALPHA_TO_COVERAGE)}function En(Fe){at!==Fe&&(Fe?t.frontFace(t.CW):t.frontFace(t.CCW),at=Fe)}function xe(Fe){Fe!==aUe?(Tn(t.CULL_FACE),Fe!==Et&&(Fe===x0e?t.cullFace(t.BACK):Fe===lUe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):bn(t.CULL_FACE),Et=Fe}function fe(Fe){Fe!==ue&&(Ne&&t.lineWidth(Fe),ue=Fe)}function dt(Fe,Kt,Wt){Fe?(Tn(t.POLYGON_OFFSET_FILL),(Ge!==Kt||Te!==Wt)&&(t.polygonOffset(Kt,Wt),Ge=Kt,Te=Wt)):bn(t.POLYGON_OFFSET_FILL)}function Dt(Fe){Fe?Tn(t.SCISSOR_TEST):bn(t.SCISSOR_TEST)}function Nt(Fe){Fe===void 0&&(Fe=t.TEXTURE0+it-1),ft!==Fe&&(t.activeTexture(Fe),ft=Fe)}function kt(Fe,Kt,Wt){Wt===void 0&&(ft===null?Wt=t.TEXTURE0+it-1:Wt=ft);let Cn=Ct[Wt];Cn===void 0&&(Cn={type:void 0,texture:void 0},Ct[Wt]=Cn),(Cn.type!==Fe||Cn.texture!==Kt)&&(ft!==Wt&&(t.activeTexture(Wt),ft=Wt),t.bindTexture(Fe,Kt||In[Fe]),Cn.type=Fe,Cn.texture=Kt)}function fn(){const Fe=Ct[ft];Fe!==void 0&&Fe.type!==void 0&&(t.bindTexture(Fe.type,null),Fe.type=void 0,Fe.texture=void 0)}function en(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function sn(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Dn(){try{t.texSubImage2D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function qn(){try{t.texSubImage3D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Lt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function sr(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ae(){try{t.texStorage2D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Tt(){try{t.texStorage3D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function qt(){try{t.texImage2D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Vt(){try{t.texImage3D.apply(t,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function ln(Fe){Rt.equals(Fe)===!1&&(t.scissor(Fe.x,Fe.y,Fe.z,Fe.w),Rt.copy(Fe))}function $n(Fe){Jt.equals(Fe)===!1&&(t.viewport(Fe.x,Fe.y,Fe.z,Fe.w),Jt.copy(Fe))}function lr(Fe,Kt){let Wt=E.get(Kt);Wt===void 0&&(Wt=new WeakMap,E.set(Kt,Wt));let Cn=Wt.get(Fe);Cn===void 0&&(Cn=t.getUniformBlockIndex(Kt,Fe.name),Wt.set(Fe,Cn))}function Fn(Fe,Kt){const Cn=E.get(Kt).get(Fe);x.get(Kt)!==Cn&&(t.uniformBlockBinding(Kt,Cn,Fe.__bindingPointIndex),x.set(Kt,Cn))}function jt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),k={},ft=null,Ct={},D={},G=new WeakMap,N=[],z=null,U=!1,P=null,$=null,Q=null,ye=null,q=null,ie=null,pe=null,W=new Sn(0,0,0),he=0,Ye=!1,at=null,Et=null,ue=null,Ge=null,Te=null,Rt.set(0,0,t.canvas.width,t.canvas.height),Jt.set(0,0,t.canvas.width,t.canvas.height),h.reset(),m.reset(),v.reset()}return{buffers:{color:h,depth:m,stencil:v},enable:Tn,disable:bn,bindFramebuffer:On,drawBuffers:lt,useProgram:ti,setBlending:rn,setMaterial:Nr,setFlipSided:En,setCullFace:xe,setLineWidth:fe,setPolygonOffset:dt,setScissorTest:Dt,activeTexture:Nt,bindTexture:kt,unbindTexture:fn,compressedTexImage2D:en,compressedTexImage3D:sn,texImage2D:qt,texImage3D:Vt,updateUBOMapping:lr,uniformBlockBinding:Fn,texStorage2D:Ae,texStorage3D:Tt,texSubImage2D:Dn,texSubImage3D:qn,compressedTexSubImage2D:Lt,compressedTexSubImage3D:sr,scissor:ln,viewport:$n,reset:jt}}function w6e(t,e,n,r,i,o,u){const h=i.isWebGL2,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let E;const k=new WeakMap;let D=!1;try{D=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function G(xe,fe){return D?new OffscreenCanvas(xe,fe):wT("canvas")}function N(xe,fe,dt,Dt){let Nt=1;if((xe.width>Dt||xe.height>Dt)&&(Nt=Dt/Math.max(xe.width,xe.height)),Nt<1||fe===!0)if(typeof HTMLImageElement<"u"&&xe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&xe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&xe instanceof ImageBitmap){const kt=fe?MN:Math.floor,fn=kt(Nt*xe.width),en=kt(Nt*xe.height);E===void 0&&(E=G(fn,en));const sn=dt?G(fn,en):E;return sn.width=fn,sn.height=en,sn.getContext("2d").drawImage(xe,0,0,fn,en),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+fn+"x"+en+")."),sn}else return"data"in xe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),xe;return xe}function z(xe){return bW(xe.width)&&bW(xe.height)}function U(xe){return h?!1:xe.wrapS!==bl||xe.wrapT!==bl||xe.minFilter!==Co&&xe.minFilter!==Zo}function P(xe,fe){return xe.generateMipmaps&&fe&&xe.minFilter!==Co&&xe.minFilter!==Zo}function $(xe){t.generateMipmap(xe)}function Q(xe,fe,dt,Dt,Nt=!1){if(h===!1)return fe;if(xe!==null){if(t[xe]!==void 0)return t[xe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xe+"'")}let kt=fe;if(fe===t.RED&&(dt===t.FLOAT&&(kt=t.R32F),dt===t.HALF_FLOAT&&(kt=t.R16F),dt===t.UNSIGNED_BYTE&&(kt=t.R8)),fe===t.RED_INTEGER&&(dt===t.UNSIGNED_BYTE&&(kt=t.R8UI),dt===t.UNSIGNED_SHORT&&(kt=t.R16UI),dt===t.UNSIGNED_INT&&(kt=t.R32UI),dt===t.BYTE&&(kt=t.R8I),dt===t.SHORT&&(kt=t.R16I),dt===t.INT&&(kt=t.R32I)),fe===t.RG&&(dt===t.FLOAT&&(kt=t.RG32F),dt===t.HALF_FLOAT&&(kt=t.RG16F),dt===t.UNSIGNED_BYTE&&(kt=t.RG8)),fe===t.RGBA){const fn=Nt?EN:oi.getTransfer(Dt);dt===t.FLOAT&&(kt=t.RGBA32F),dt===t.HALF_FLOAT&&(kt=t.RGBA16F),dt===t.UNSIGNED_BYTE&&(kt=fn===Pi?t.SRGB8_ALPHA8:t.RGBA8),dt===t.UNSIGNED_SHORT_4_4_4_4&&(kt=t.RGBA4),dt===t.UNSIGNED_SHORT_5_5_5_1&&(kt=t.RGB5_A1)}return(kt===t.R16F||kt===t.R32F||kt===t.RG16F||kt===t.RG32F||kt===t.RGBA16F||kt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),kt}function ye(xe,fe,dt){return P(xe,dt)===!0||xe.isFramebufferTexture&&xe.minFilter!==Co&&xe.minFilter!==Zo?Math.log2(Math.max(fe.width,fe.height))+1:xe.mipmaps!==void 0&&xe.mipmaps.length>0?xe.mipmaps.length:xe.isCompressedTexture&&Array.isArray(xe.image)?fe.mipmaps.length:1}function q(xe){return xe===Co||xe===k0e||xe===KH?t.NEAREST:t.LINEAR}function ie(xe){const fe=xe.target;fe.removeEventListener("dispose",ie),W(fe),fe.isVideoTexture&&x.delete(fe)}function pe(xe){const fe=xe.target;fe.removeEventListener("dispose",pe),Ye(fe)}function W(xe){const fe=r.get(xe);if(fe.__webglInit===void 0)return;const dt=xe.source,Dt=k.get(dt);if(Dt){const Nt=Dt[fe.__cacheKey];Nt.usedTimes--,Nt.usedTimes===0&&he(xe),Object.keys(Dt).length===0&&k.delete(dt)}r.remove(xe)}function he(xe){const fe=r.get(xe);t.deleteTexture(fe.__webglTexture);const dt=xe.source,Dt=k.get(dt);delete Dt[fe.__cacheKey],u.memory.textures--}function Ye(xe){const fe=xe.texture,dt=r.get(xe),Dt=r.get(fe);if(Dt.__webglTexture!==void 0&&(t.deleteTexture(Dt.__webglTexture),u.memory.textures--),xe.depthTexture&&xe.depthTexture.dispose(),xe.isWebGLCubeRenderTarget)for(let Nt=0;Nt<6;Nt++){if(Array.isArray(dt.__webglFramebuffer[Nt]))for(let kt=0;kt<dt.__webglFramebuffer[Nt].length;kt++)t.deleteFramebuffer(dt.__webglFramebuffer[Nt][kt]);else t.deleteFramebuffer(dt.__webglFramebuffer[Nt]);dt.__webglDepthbuffer&&t.deleteRenderbuffer(dt.__webglDepthbuffer[Nt])}else{if(Array.isArray(dt.__webglFramebuffer))for(let Nt=0;Nt<dt.__webglFramebuffer.length;Nt++)t.deleteFramebuffer(dt.__webglFramebuffer[Nt]);else t.deleteFramebuffer(dt.__webglFramebuffer);if(dt.__webglDepthbuffer&&t.deleteRenderbuffer(dt.__webglDepthbuffer),dt.__webglMultisampledFramebuffer&&t.deleteFramebuffer(dt.__webglMultisampledFramebuffer),dt.__webglColorRenderbuffer)for(let Nt=0;Nt<dt.__webglColorRenderbuffer.length;Nt++)dt.__webglColorRenderbuffer[Nt]&&t.deleteRenderbuffer(dt.__webglColorRenderbuffer[Nt]);dt.__webglDepthRenderbuffer&&t.deleteRenderbuffer(dt.__webglDepthRenderbuffer)}if(xe.isWebGLMultipleRenderTargets)for(let Nt=0,kt=fe.length;Nt<kt;Nt++){const fn=r.get(fe[Nt]);fn.__webglTexture&&(t.deleteTexture(fn.__webglTexture),u.memory.textures--),r.remove(fe[Nt])}r.remove(fe),r.remove(xe)}let at=0;function Et(){at=0}function ue(){const xe=at;return xe>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+xe+" texture units while this GPU supports only "+i.maxTextures),at+=1,xe}function Ge(xe){const fe=[];return fe.push(xe.wrapS),fe.push(xe.wrapT),fe.push(xe.wrapR||0),fe.push(xe.magFilter),fe.push(xe.minFilter),fe.push(xe.anisotropy),fe.push(xe.internalFormat),fe.push(xe.format),fe.push(xe.type),fe.push(xe.generateMipmaps),fe.push(xe.premultiplyAlpha),fe.push(xe.flipY),fe.push(xe.unpackAlignment),fe.push(xe.colorSpace),fe.join()}function Te(xe,fe){const dt=r.get(xe);if(xe.isVideoTexture&&Nr(xe),xe.isRenderTargetTexture===!1&&xe.version>0&&dt.__version!==xe.version){const Dt=xe.image;if(Dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Rt(dt,xe,fe);return}}n.bindTexture(t.TEXTURE_2D,dt.__webglTexture,t.TEXTURE0+fe)}function it(xe,fe){const dt=r.get(xe);if(xe.version>0&&dt.__version!==xe.version){Rt(dt,xe,fe);return}n.bindTexture(t.TEXTURE_2D_ARRAY,dt.__webglTexture,t.TEXTURE0+fe)}function Ne(xe,fe){const dt=r.get(xe);if(xe.version>0&&dt.__version!==xe.version){Rt(dt,xe,fe);return}n.bindTexture(t.TEXTURE_3D,dt.__webglTexture,t.TEXTURE0+fe)}function Xe(xe,fe){const dt=r.get(xe);if(xe.version>0&&dt.__version!==xe.version){Jt(dt,xe,fe);return}n.bindTexture(t.TEXTURE_CUBE_MAP,dt.__webglTexture,t.TEXTURE0+fe)}const qe={[vp]:t.REPEAT,[bl]:t.CLAMP_TO_EDGE,[gW]:t.MIRRORED_REPEAT},ft={[Co]:t.NEAREST,[k0e]:t.NEAREST_MIPMAP_NEAREST,[KH]:t.NEAREST_MIPMAP_LINEAR,[Zo]:t.LINEAR,[jUe]:t.LINEAR_MIPMAP_NEAREST,[bT]:t.LINEAR_MIPMAP_LINEAR},Ct={[r5e]:t.NEVER,[u5e]:t.ALWAYS,[i5e]:t.LESS,[uSe]:t.LEQUAL,[s5e]:t.EQUAL,[l5e]:t.GEQUAL,[o5e]:t.GREATER,[a5e]:t.NOTEQUAL};function mt(xe,fe,dt){if(dt?(t.texParameteri(xe,t.TEXTURE_WRAP_S,qe[fe.wrapS]),t.texParameteri(xe,t.TEXTURE_WRAP_T,qe[fe.wrapT]),(xe===t.TEXTURE_3D||xe===t.TEXTURE_2D_ARRAY)&&t.texParameteri(xe,t.TEXTURE_WRAP_R,qe[fe.wrapR]),t.texParameteri(xe,t.TEXTURE_MAG_FILTER,ft[fe.magFilter]),t.texParameteri(xe,t.TEXTURE_MIN_FILTER,ft[fe.minFilter])):(t.texParameteri(xe,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(xe,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(xe===t.TEXTURE_3D||xe===t.TEXTURE_2D_ARRAY)&&t.texParameteri(xe,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(fe.wrapS!==bl||fe.wrapT!==bl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(xe,t.TEXTURE_MAG_FILTER,q(fe.magFilter)),t.texParameteri(xe,t.TEXTURE_MIN_FILTER,q(fe.minFilter)),fe.minFilter!==Co&&fe.minFilter!==Zo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),fe.compareFunction&&(t.texParameteri(xe,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(xe,t.TEXTURE_COMPARE_FUNC,Ct[fe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Dt=e.get("EXT_texture_filter_anisotropic");if(fe.magFilter===Co||fe.minFilter!==KH&&fe.minFilter!==bT||fe.type===tp&&e.has("OES_texture_float_linear")===!1||h===!1&&fe.type===_T&&e.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||r.get(fe).__currentAnisotropy)&&(t.texParameterf(xe,Dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,i.getMaxAnisotropy())),r.get(fe).__currentAnisotropy=fe.anisotropy)}}function Pt(xe,fe){let dt=!1;xe.__webglInit===void 0&&(xe.__webglInit=!0,fe.addEventListener("dispose",ie));const Dt=fe.source;let Nt=k.get(Dt);Nt===void 0&&(Nt={},k.set(Dt,Nt));const kt=Ge(fe);if(kt!==xe.__cacheKey){Nt[kt]===void 0&&(Nt[kt]={texture:t.createTexture(),usedTimes:0},u.memory.textures++,dt=!0),Nt[kt].usedTimes++;const fn=Nt[xe.__cacheKey];fn!==void 0&&(Nt[xe.__cacheKey].usedTimes--,fn.usedTimes===0&&he(fe)),xe.__cacheKey=kt,xe.__webglTexture=Nt[kt].texture}return dt}function Rt(xe,fe,dt){let Dt=t.TEXTURE_2D;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(Dt=t.TEXTURE_2D_ARRAY),fe.isData3DTexture&&(Dt=t.TEXTURE_3D);const Nt=Pt(xe,fe),kt=fe.source;n.bindTexture(Dt,xe.__webglTexture,t.TEXTURE0+dt);const fn=r.get(kt);if(kt.version!==fn.__version||Nt===!0){n.activeTexture(t.TEXTURE0+dt);const en=oi.getPrimaries(oi.workingColorSpace),sn=fe.colorSpace===fu?null:oi.getPrimaries(fe.colorSpace),Dn=fe.colorSpace===fu||en===sn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,fe.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,fe.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dn);const qn=U(fe)&&z(fe.image)===!1;let Lt=N(fe.image,qn,!1,i.maxTextureSize);Lt=En(fe,Lt);const sr=z(Lt)||h,Ae=o.convert(fe.format,fe.colorSpace);let Tt=o.convert(fe.type),qt=Q(fe.internalFormat,Ae,Tt,fe.colorSpace,fe.isVideoTexture);mt(Dt,fe,sr);let Vt;const ln=fe.mipmaps,$n=h&&fe.isVideoTexture!==!0&&qt!==lSe,lr=fn.__version===void 0||Nt===!0,Fn=ye(fe,Lt,sr);if(fe.isDepthTexture)qt=t.DEPTH_COMPONENT,h?fe.type===tp?qt=t.DEPTH_COMPONENT32F:fe.type===ep?qt=t.DEPTH_COMPONENT24:fe.type===zm?qt=t.DEPTH24_STENCIL8:qt=t.DEPTH_COMPONENT16:fe.type===tp&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===E0&&qt===t.DEPTH_COMPONENT&&fe.type!==J$&&fe.type!==ep&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=ep,Tt=o.convert(fe.type)),fe.format===D0&&qt===t.DEPTH_COMPONENT&&(qt=t.DEPTH_STENCIL,fe.type!==zm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=zm,Tt=o.convert(fe.type))),lr&&($n?n.texStorage2D(t.TEXTURE_2D,1,qt,Lt.width,Lt.height):n.texImage2D(t.TEXTURE_2D,0,qt,Lt.width,Lt.height,0,Ae,Tt,null));else if(fe.isDataTexture)if(ln.length>0&&sr){$n&&lr&&n.texStorage2D(t.TEXTURE_2D,Fn,qt,ln[0].width,ln[0].height);for(let jt=0,Fe=ln.length;jt<Fe;jt++)Vt=ln[jt],$n?n.texSubImage2D(t.TEXTURE_2D,jt,0,0,Vt.width,Vt.height,Ae,Tt,Vt.data):n.texImage2D(t.TEXTURE_2D,jt,qt,Vt.width,Vt.height,0,Ae,Tt,Vt.data);fe.generateMipmaps=!1}else $n?(lr&&n.texStorage2D(t.TEXTURE_2D,Fn,qt,Lt.width,Lt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Lt.width,Lt.height,Ae,Tt,Lt.data)):n.texImage2D(t.TEXTURE_2D,0,qt,Lt.width,Lt.height,0,Ae,Tt,Lt.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){$n&&lr&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Fn,qt,ln[0].width,ln[0].height,Lt.depth);for(let jt=0,Fe=ln.length;jt<Fe;jt++)Vt=ln[jt],fe.format!==pu?Ae!==null?$n?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,jt,0,0,0,Vt.width,Vt.height,Lt.depth,Ae,Vt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,jt,qt,Vt.width,Vt.height,Lt.depth,0,Vt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$n?n.texSubImage3D(t.TEXTURE_2D_ARRAY,jt,0,0,0,Vt.width,Vt.height,Lt.depth,Ae,Tt,Vt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,jt,qt,Vt.width,Vt.height,Lt.depth,0,Ae,Tt,Vt.data)}else{$n&&lr&&n.texStorage2D(t.TEXTURE_2D,Fn,qt,ln[0].width,ln[0].height);for(let jt=0,Fe=ln.length;jt<Fe;jt++)Vt=ln[jt],fe.format!==pu?Ae!==null?$n?n.compressedTexSubImage2D(t.TEXTURE_2D,jt,0,0,Vt.width,Vt.height,Ae,Vt.data):n.compressedTexImage2D(t.TEXTURE_2D,jt,qt,Vt.width,Vt.height,0,Vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$n?n.texSubImage2D(t.TEXTURE_2D,jt,0,0,Vt.width,Vt.height,Ae,Tt,Vt.data):n.texImage2D(t.TEXTURE_2D,jt,qt,Vt.width,Vt.height,0,Ae,Tt,Vt.data)}else if(fe.isDataArrayTexture)$n?(lr&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Fn,qt,Lt.width,Lt.height,Lt.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Lt.width,Lt.height,Lt.depth,Ae,Tt,Lt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,qt,Lt.width,Lt.height,Lt.depth,0,Ae,Tt,Lt.data);else if(fe.isData3DTexture)$n?(lr&&n.texStorage3D(t.TEXTURE_3D,Fn,qt,Lt.width,Lt.height,Lt.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Lt.width,Lt.height,Lt.depth,Ae,Tt,Lt.data)):n.texImage3D(t.TEXTURE_3D,0,qt,Lt.width,Lt.height,Lt.depth,0,Ae,Tt,Lt.data);else if(fe.isFramebufferTexture){if(lr)if($n)n.texStorage2D(t.TEXTURE_2D,Fn,qt,Lt.width,Lt.height);else{let jt=Lt.width,Fe=Lt.height;for(let Kt=0;Kt<Fn;Kt++)n.texImage2D(t.TEXTURE_2D,Kt,qt,jt,Fe,0,Ae,Tt,null),jt>>=1,Fe>>=1}}else if(ln.length>0&&sr){$n&&lr&&n.texStorage2D(t.TEXTURE_2D,Fn,qt,ln[0].width,ln[0].height);for(let jt=0,Fe=ln.length;jt<Fe;jt++)Vt=ln[jt],$n?n.texSubImage2D(t.TEXTURE_2D,jt,0,0,Ae,Tt,Vt):n.texImage2D(t.TEXTURE_2D,jt,qt,Ae,Tt,Vt);fe.generateMipmaps=!1}else $n?(lr&&n.texStorage2D(t.TEXTURE_2D,Fn,qt,Lt.width,Lt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ae,Tt,Lt)):n.texImage2D(t.TEXTURE_2D,0,qt,Ae,Tt,Lt);P(fe,sr)&&$(Dt),fn.__version=kt.version,fe.onUpdate&&fe.onUpdate(fe)}xe.__version=fe.version}function Jt(xe,fe,dt){if(fe.image.length!==6)return;const Dt=Pt(xe,fe),Nt=fe.source;n.bindTexture(t.TEXTURE_CUBE_MAP,xe.__webglTexture,t.TEXTURE0+dt);const kt=r.get(Nt);if(Nt.version!==kt.__version||Dt===!0){n.activeTexture(t.TEXTURE0+dt);const fn=oi.getPrimaries(oi.workingColorSpace),en=fe.colorSpace===fu?null:oi.getPrimaries(fe.colorSpace),sn=fe.colorSpace===fu||fn===en?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,fe.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,fe.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,sn);const Dn=fe.isCompressedTexture||fe.image[0].isCompressedTexture,qn=fe.image[0]&&fe.image[0].isDataTexture,Lt=[];for(let jt=0;jt<6;jt++)!Dn&&!qn?Lt[jt]=N(fe.image[jt],!1,!0,i.maxCubemapSize):Lt[jt]=qn?fe.image[jt].image:fe.image[jt],Lt[jt]=En(fe,Lt[jt]);const sr=Lt[0],Ae=z(sr)||h,Tt=o.convert(fe.format,fe.colorSpace),qt=o.convert(fe.type),Vt=Q(fe.internalFormat,Tt,qt,fe.colorSpace),ln=h&&fe.isVideoTexture!==!0,$n=kt.__version===void 0||Dt===!0;let lr=ye(fe,sr,Ae);mt(t.TEXTURE_CUBE_MAP,fe,Ae);let Fn;if(Dn){ln&&$n&&n.texStorage2D(t.TEXTURE_CUBE_MAP,lr,Vt,sr.width,sr.height);for(let jt=0;jt<6;jt++){Fn=Lt[jt].mipmaps;for(let Fe=0;Fe<Fn.length;Fe++){const Kt=Fn[Fe];fe.format!==pu?Tt!==null?ln?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe,0,0,Kt.width,Kt.height,Tt,Kt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe,Vt,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ln?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe,0,0,Kt.width,Kt.height,Tt,qt,Kt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe,Vt,Kt.width,Kt.height,0,Tt,qt,Kt.data)}}}else{Fn=fe.mipmaps,ln&&$n&&(Fn.length>0&&lr++,n.texStorage2D(t.TEXTURE_CUBE_MAP,lr,Vt,Lt[0].width,Lt[0].height));for(let jt=0;jt<6;jt++)if(qn){ln?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,Lt[jt].width,Lt[jt].height,Tt,qt,Lt[jt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,Vt,Lt[jt].width,Lt[jt].height,0,Tt,qt,Lt[jt].data);for(let Fe=0;Fe<Fn.length;Fe++){const Wt=Fn[Fe].image[jt].image;ln?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe+1,0,0,Wt.width,Wt.height,Tt,qt,Wt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe+1,Vt,Wt.width,Wt.height,0,Tt,qt,Wt.data)}}else{ln?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,Tt,qt,Lt[jt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,Vt,Tt,qt,Lt[jt]);for(let Fe=0;Fe<Fn.length;Fe++){const Kt=Fn[Fe];ln?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe+1,0,0,Tt,qt,Kt.image[jt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Fe+1,Vt,Tt,qt,Kt.image[jt])}}}P(fe,Ae)&&$(t.TEXTURE_CUBE_MAP),kt.__version=Nt.version,fe.onUpdate&&fe.onUpdate(fe)}xe.__version=fe.version}function Yt(xe,fe,dt,Dt,Nt,kt){const fn=o.convert(dt.format,dt.colorSpace),en=o.convert(dt.type),sn=Q(dt.internalFormat,fn,en,dt.colorSpace);if(!r.get(fe).__hasExternalTextures){const qn=Math.max(1,fe.width>>kt),Lt=Math.max(1,fe.height>>kt);Nt===t.TEXTURE_3D||Nt===t.TEXTURE_2D_ARRAY?n.texImage3D(Nt,kt,sn,qn,Lt,fe.depth,0,fn,en,null):n.texImage2D(Nt,kt,sn,qn,Lt,0,fn,en,null)}n.bindFramebuffer(t.FRAMEBUFFER,xe),rn(fe)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Dt,Nt,r.get(dt).__webglTexture,0,_n(fe)):(Nt===t.TEXTURE_2D||Nt>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Nt<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Dt,Nt,r.get(dt).__webglTexture,kt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function In(xe,fe,dt){if(t.bindRenderbuffer(t.RENDERBUFFER,xe),fe.depthBuffer&&!fe.stencilBuffer){let Dt=h===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(dt||rn(fe)){const Nt=fe.depthTexture;Nt&&Nt.isDepthTexture&&(Nt.type===tp?Dt=t.DEPTH_COMPONENT32F:Nt.type===ep&&(Dt=t.DEPTH_COMPONENT24));const kt=_n(fe);rn(fe)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,kt,Dt,fe.width,fe.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,kt,Dt,fe.width,fe.height)}else t.renderbufferStorage(t.RENDERBUFFER,Dt,fe.width,fe.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,xe)}else if(fe.depthBuffer&&fe.stencilBuffer){const Dt=_n(fe);dt&&rn(fe)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Dt,t.DEPTH24_STENCIL8,fe.width,fe.height):rn(fe)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Dt,t.DEPTH24_STENCIL8,fe.width,fe.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,fe.width,fe.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,xe)}else{const Dt=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Nt=0;Nt<Dt.length;Nt++){const kt=Dt[Nt],fn=o.convert(kt.format,kt.colorSpace),en=o.convert(kt.type),sn=Q(kt.internalFormat,fn,en,kt.colorSpace),Dn=_n(fe);dt&&rn(fe)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Dn,sn,fe.width,fe.height):rn(fe)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Dn,sn,fe.width,fe.height):t.renderbufferStorage(t.RENDERBUFFER,sn,fe.width,fe.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Tn(xe,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,xe),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),Te(fe.depthTexture,0);const Dt=r.get(fe.depthTexture).__webglTexture,Nt=_n(fe);if(fe.depthTexture.format===E0)rn(fe)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Dt,0,Nt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Dt,0);else if(fe.depthTexture.format===D0)rn(fe)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Dt,0,Nt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Dt,0);else throw new Error("Unknown depthTexture format")}function bn(xe){const fe=r.get(xe),dt=xe.isWebGLCubeRenderTarget===!0;if(xe.depthTexture&&!fe.__autoAllocateDepthBuffer){if(dt)throw new Error("target.depthTexture not supported in Cube render targets");Tn(fe.__webglFramebuffer,xe)}else if(dt){fe.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)n.bindFramebuffer(t.FRAMEBUFFER,fe.__webglFramebuffer[Dt]),fe.__webglDepthbuffer[Dt]=t.createRenderbuffer(),In(fe.__webglDepthbuffer[Dt],xe,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,fe.__webglFramebuffer),fe.__webglDepthbuffer=t.createRenderbuffer(),In(fe.__webglDepthbuffer,xe,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function On(xe,fe,dt){const Dt=r.get(xe);fe!==void 0&&Yt(Dt.__webglFramebuffer,xe,xe.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),dt!==void 0&&bn(xe)}function lt(xe){const fe=xe.texture,dt=r.get(xe),Dt=r.get(fe);xe.addEventListener("dispose",pe),xe.isWebGLMultipleRenderTargets!==!0&&(Dt.__webglTexture===void 0&&(Dt.__webglTexture=t.createTexture()),Dt.__version=fe.version,u.memory.textures++);const Nt=xe.isWebGLCubeRenderTarget===!0,kt=xe.isWebGLMultipleRenderTargets===!0,fn=z(xe)||h;if(Nt){dt.__webglFramebuffer=[];for(let en=0;en<6;en++)if(h&&fe.mipmaps&&fe.mipmaps.length>0){dt.__webglFramebuffer[en]=[];for(let sn=0;sn<fe.mipmaps.length;sn++)dt.__webglFramebuffer[en][sn]=t.createFramebuffer()}else dt.__webglFramebuffer[en]=t.createFramebuffer()}else{if(h&&fe.mipmaps&&fe.mipmaps.length>0){dt.__webglFramebuffer=[];for(let en=0;en<fe.mipmaps.length;en++)dt.__webglFramebuffer[en]=t.createFramebuffer()}else dt.__webglFramebuffer=t.createFramebuffer();if(kt)if(i.drawBuffers){const en=xe.texture;for(let sn=0,Dn=en.length;sn<Dn;sn++){const qn=r.get(en[sn]);qn.__webglTexture===void 0&&(qn.__webglTexture=t.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(h&&xe.samples>0&&rn(xe)===!1){const en=kt?fe:[fe];dt.__webglMultisampledFramebuffer=t.createFramebuffer(),dt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,dt.__webglMultisampledFramebuffer);for(let sn=0;sn<en.length;sn++){const Dn=en[sn];dt.__webglColorRenderbuffer[sn]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,dt.__webglColorRenderbuffer[sn]);const qn=o.convert(Dn.format,Dn.colorSpace),Lt=o.convert(Dn.type),sr=Q(Dn.internalFormat,qn,Lt,Dn.colorSpace,xe.isXRRenderTarget===!0),Ae=_n(xe);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ae,sr,xe.width,xe.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+sn,t.RENDERBUFFER,dt.__webglColorRenderbuffer[sn])}t.bindRenderbuffer(t.RENDERBUFFER,null),xe.depthBuffer&&(dt.__webglDepthRenderbuffer=t.createRenderbuffer(),In(dt.__webglDepthRenderbuffer,xe,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Nt){n.bindTexture(t.TEXTURE_CUBE_MAP,Dt.__webglTexture),mt(t.TEXTURE_CUBE_MAP,fe,fn);for(let en=0;en<6;en++)if(h&&fe.mipmaps&&fe.mipmaps.length>0)for(let sn=0;sn<fe.mipmaps.length;sn++)Yt(dt.__webglFramebuffer[en][sn],xe,fe,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+en,sn);else Yt(dt.__webglFramebuffer[en],xe,fe,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+en,0);P(fe,fn)&&$(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(kt){const en=xe.texture;for(let sn=0,Dn=en.length;sn<Dn;sn++){const qn=en[sn],Lt=r.get(qn);n.bindTexture(t.TEXTURE_2D,Lt.__webglTexture),mt(t.TEXTURE_2D,qn,fn),Yt(dt.__webglFramebuffer,xe,qn,t.COLOR_ATTACHMENT0+sn,t.TEXTURE_2D,0),P(qn,fn)&&$(t.TEXTURE_2D)}n.unbindTexture()}else{let en=t.TEXTURE_2D;if((xe.isWebGL3DRenderTarget||xe.isWebGLArrayRenderTarget)&&(h?en=xe.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(en,Dt.__webglTexture),mt(en,fe,fn),h&&fe.mipmaps&&fe.mipmaps.length>0)for(let sn=0;sn<fe.mipmaps.length;sn++)Yt(dt.__webglFramebuffer[sn],xe,fe,t.COLOR_ATTACHMENT0,en,sn);else Yt(dt.__webglFramebuffer,xe,fe,t.COLOR_ATTACHMENT0,en,0);P(fe,fn)&&$(en),n.unbindTexture()}xe.depthBuffer&&bn(xe)}function ti(xe){const fe=z(xe)||h,dt=xe.isWebGLMultipleRenderTargets===!0?xe.texture:[xe.texture];for(let Dt=0,Nt=dt.length;Dt<Nt;Dt++){const kt=dt[Dt];if(P(kt,fe)){const fn=xe.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,en=r.get(kt).__webglTexture;n.bindTexture(fn,en),$(fn),n.unbindTexture()}}}function Mn(xe){if(h&&xe.samples>0&&rn(xe)===!1){const fe=xe.isWebGLMultipleRenderTargets?xe.texture:[xe.texture],dt=xe.width,Dt=xe.height;let Nt=t.COLOR_BUFFER_BIT;const kt=[],fn=xe.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,en=r.get(xe),sn=xe.isWebGLMultipleRenderTargets===!0;if(sn)for(let Dn=0;Dn<fe.length;Dn++)n.bindFramebuffer(t.FRAMEBUFFER,en.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,en.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,en.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,en.__webglFramebuffer);for(let Dn=0;Dn<fe.length;Dn++){kt.push(t.COLOR_ATTACHMENT0+Dn),xe.depthBuffer&&kt.push(fn);const qn=en.__ignoreDepthValues!==void 0?en.__ignoreDepthValues:!1;if(qn===!1&&(xe.depthBuffer&&(Nt|=t.DEPTH_BUFFER_BIT),xe.stencilBuffer&&(Nt|=t.STENCIL_BUFFER_BIT)),sn&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,en.__webglColorRenderbuffer[Dn]),qn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[fn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[fn])),sn){const Lt=r.get(fe[Dn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Lt,0)}t.blitFramebuffer(0,0,dt,Dt,0,0,dt,Dt,Nt,t.NEAREST),v&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,kt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),sn)for(let Dn=0;Dn<fe.length;Dn++){n.bindFramebuffer(t.FRAMEBUFFER,en.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.RENDERBUFFER,en.__webglColorRenderbuffer[Dn]);const qn=r.get(fe[Dn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,en.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.TEXTURE_2D,qn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,en.__webglMultisampledFramebuffer)}}function _n(xe){return Math.min(i.maxSamples,xe.samples)}function rn(xe){const fe=r.get(xe);return h&&xe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function Nr(xe){const fe=u.render.frame;x.get(xe)!==fe&&(x.set(xe,fe),xe.update())}function En(xe,fe){const dt=xe.colorSpace,Dt=xe.format,Nt=xe.type;return xe.isCompressedTexture===!0||xe.isVideoTexture===!0||xe.format===yW||dt!==yp&&dt!==fu&&(oi.getTransfer(dt)===Pi?h===!1?e.has("EXT_sRGB")===!0&&Dt===pu?(xe.format=yW,xe.minFilter=Zo,xe.generateMipmaps=!1):fe=dSe.sRGBToLinear(fe):(Dt!==pu||Nt!==xl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",dt)),fe}this.allocateTextureUnit=ue,this.resetTextureUnits=Et,this.setTexture2D=Te,this.setTexture2DArray=it,this.setTexture3D=Ne,this.setTextureCube=Xe,this.rebindTextures=On,this.setupRenderTarget=lt,this.updateRenderTargetMipmap=ti,this.updateMultisampleRenderTarget=Mn,this.setupDepthRenderbuffer=bn,this.setupFrameBufferTexture=Yt,this.useMultisampledRTT=rn}function x6e(t,e,n){const r=n.isWebGL2;function i(o,u=fu){let h;const m=oi.getTransfer(u);if(o===xl)return t.UNSIGNED_BYTE;if(o===rSe)return t.UNSIGNED_SHORT_4_4_4_4;if(o===iSe)return t.UNSIGNED_SHORT_5_5_5_1;if(o===HUe)return t.BYTE;if(o===GUe)return t.SHORT;if(o===J$)return t.UNSIGNED_SHORT;if(o===nSe)return t.INT;if(o===ep)return t.UNSIGNED_INT;if(o===tp)return t.FLOAT;if(o===_T)return r?t.HALF_FLOAT:(h=e.get("OES_texture_half_float"),h!==null?h.HALF_FLOAT_OES:null);if(o===WUe)return t.ALPHA;if(o===pu)return t.RGBA;if(o===$Ue)return t.LUMINANCE;if(o===KUe)return t.LUMINANCE_ALPHA;if(o===E0)return t.DEPTH_COMPONENT;if(o===D0)return t.DEPTH_STENCIL;if(o===yW)return h=e.get("EXT_sRGB"),h!==null?h.SRGB_ALPHA_EXT:null;if(o===XUe)return t.RED;if(o===sSe)return t.RED_INTEGER;if(o===qUe)return t.RG;if(o===oSe)return t.RG_INTEGER;if(o===aSe)return t.RGBA_INTEGER;if(o===XH||o===qH||o===YH||o===ZH)if(m===Pi)if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),h!==null){if(o===XH)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===qH)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===YH)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===ZH)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(h=e.get("WEBGL_compressed_texture_s3tc"),h!==null){if(o===XH)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===qH)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===YH)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===ZH)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===A0e||o===I0e||o===R0e||o===D0e)if(h=e.get("WEBGL_compressed_texture_pvrtc"),h!==null){if(o===A0e)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===I0e)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===R0e)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===D0e)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===lSe)return h=e.get("WEBGL_compressed_texture_etc1"),h!==null?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===O0e||o===L0e)if(h=e.get("WEBGL_compressed_texture_etc"),h!==null){if(o===O0e)return m===Pi?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(o===L0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===N0e||o===F0e||o===B0e||o===U0e||o===z0e||o===V0e||o===j0e||o===H0e||o===G0e||o===W0e||o===$0e||o===K0e||o===X0e||o===q0e)if(h=e.get("WEBGL_compressed_texture_astc"),h!==null){if(o===N0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===F0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===B0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===U0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===z0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===V0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===j0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===H0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===G0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===W0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===$0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===K0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===X0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===q0e)return m===Pi?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===QH||o===Y0e||o===Z0e)if(h=e.get("EXT_texture_compression_bptc"),h!==null){if(o===QH)return m===Pi?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===Y0e)return h.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===Z0e)return h.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===YUe||o===Q0e||o===J0e||o===eye)if(h=e.get("EXT_texture_compression_rgtc"),h!==null){if(o===QH)return h.COMPRESSED_RED_RGTC1_EXT;if(o===Q0e)return h.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===J0e)return h.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===eye)return h.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===zm?r?t.UNSIGNED_INT_24_8:(h=e.get("WEBGL_depth_texture"),h!==null?h.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class S6e extends Us{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let _0=class extends Kr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const E6e={type:"move"};class xG{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,u=null;const h=this._targetRay,m=this._grip,v=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(v&&e.hand){u=!0;for(const N of e.hand.values()){const z=n.getJointPose(N,r),U=this._getHandJoint(v,N);z!==null&&(U.matrix.fromArray(z.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=z.radius),U.visible=z!==null}const x=v.joints["index-finger-tip"],E=v.joints["thumb-tip"],k=x.position.distanceTo(E.position),D=.02,G=.005;v.inputState.pinching&&k>D+G?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&k<=D-G&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1));h!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(h.matrix.fromArray(i.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,i.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(i.linearVelocity)):h.hasLinearVelocity=!1,i.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(i.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(E6e)))}return h!==null&&(h.visible=i!==null),m!==null&&(m.visible=o!==null),v!==null&&(v.visible=u!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new _0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class C6e extends Eu{constructor(e,n){super();const r=this;let i=null,o=1,u=null,h="local-floor",m=1,v=null,x=null,E=null,k=null,D=null,G=null;const N=n.getContextAttributes();let z=null,U=null;const P=[],$=[],Q=new un;let ye=null;const q=new Us;q.layers.enable(1),q.viewport=new Pr;const ie=new Us;ie.layers.enable(2),ie.viewport=new Pr;const pe=[q,ie],W=new S6e;W.layers.enable(1),W.layers.enable(2);let he=null,Ye=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(mt){let Pt=P[mt];return Pt===void 0&&(Pt=new xG,P[mt]=Pt),Pt.getTargetRaySpace()},this.getControllerGrip=function(mt){let Pt=P[mt];return Pt===void 0&&(Pt=new xG,P[mt]=Pt),Pt.getGripSpace()},this.getHand=function(mt){let Pt=P[mt];return Pt===void 0&&(Pt=new xG,P[mt]=Pt),Pt.getHandSpace()};function at(mt){const Pt=$.indexOf(mt.inputSource);if(Pt===-1)return;const Rt=P[Pt];Rt!==void 0&&(Rt.update(mt.inputSource,mt.frame,v||u),Rt.dispatchEvent({type:mt.type,data:mt.inputSource}))}function Et(){i.removeEventListener("select",at),i.removeEventListener("selectstart",at),i.removeEventListener("selectend",at),i.removeEventListener("squeeze",at),i.removeEventListener("squeezestart",at),i.removeEventListener("squeezeend",at),i.removeEventListener("end",Et),i.removeEventListener("inputsourceschange",ue);for(let mt=0;mt<P.length;mt++){const Pt=$[mt];Pt!==null&&($[mt]=null,P[mt].disconnect(Pt))}he=null,Ye=null,e.setRenderTarget(z),D=null,k=null,E=null,i=null,U=null,Ct.stop(),r.isPresenting=!1,e.setPixelRatio(ye),e.setSize(Q.width,Q.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(mt){o=mt,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(mt){h=mt,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v||u},this.setReferenceSpace=function(mt){v=mt},this.getBaseLayer=function(){return k!==null?k:D},this.getBinding=function(){return E},this.getFrame=function(){return G},this.getSession=function(){return i},this.setSession=async function(mt){if(i=mt,i!==null){if(z=e.getRenderTarget(),i.addEventListener("select",at),i.addEventListener("selectstart",at),i.addEventListener("selectend",at),i.addEventListener("squeeze",at),i.addEventListener("squeezestart",at),i.addEventListener("squeezeend",at),i.addEventListener("end",Et),i.addEventListener("inputsourceschange",ue),N.xrCompatible!==!0&&await n.makeXRCompatible(),ye=e.getPixelRatio(),e.getSize(Q),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Pt={antialias:i.renderState.layers===void 0?N.antialias:!0,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:o};D=new XRWebGLLayer(i,n,Pt),i.updateRenderState({baseLayer:D}),e.setPixelRatio(1),e.setSize(D.framebufferWidth,D.framebufferHeight,!1),U=new Cl(D.framebufferWidth,D.framebufferHeight,{format:pu,type:xl,colorSpace:e.outputColorSpace,stencilBuffer:N.stencil})}else{let Pt=null,Rt=null,Jt=null;N.depth&&(Jt=N.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Pt=N.stencil?D0:E0,Rt=N.stencil?zm:ep);const Yt={colorFormat:n.RGBA8,depthFormat:Jt,scaleFactor:o};E=new XRWebGLBinding(i,n),k=E.createProjectionLayer(Yt),i.updateRenderState({layers:[k]}),e.setPixelRatio(1),e.setSize(k.textureWidth,k.textureHeight,!1),U=new Cl(k.textureWidth,k.textureHeight,{format:pu,type:xl,depthTexture:new a7(k.textureWidth,k.textureHeight,Rt,void 0,void 0,void 0,void 0,void 0,void 0,Pt),stencilBuffer:N.stencil,colorSpace:e.outputColorSpace,samples:N.antialias?4:0});const In=e.properties.get(U);In.__ignoreDepthValues=k.ignoreDepthValues}U.isXRRenderTarget=!0,this.setFoveation(m),v=null,u=await i.requestReferenceSpace(h),Ct.setContext(i),Ct.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ue(mt){for(let Pt=0;Pt<mt.removed.length;Pt++){const Rt=mt.removed[Pt],Jt=$.indexOf(Rt);Jt>=0&&($[Jt]=null,P[Jt].disconnect(Rt))}for(let Pt=0;Pt<mt.added.length;Pt++){const Rt=mt.added[Pt];let Jt=$.indexOf(Rt);if(Jt===-1){for(let In=0;In<P.length;In++)if(In>=$.length){$.push(Rt),Jt=In;break}else if($[In]===null){$[In]=Rt,Jt=In;break}if(Jt===-1)break}const Yt=P[Jt];Yt&&Yt.connect(Rt)}}const Ge=new Le,Te=new Le;function it(mt,Pt,Rt){Ge.setFromMatrixPosition(Pt.matrixWorld),Te.setFromMatrixPosition(Rt.matrixWorld);const Jt=Ge.distanceTo(Te),Yt=Pt.projectionMatrix.elements,In=Rt.projectionMatrix.elements,Tn=Yt[14]/(Yt[10]-1),bn=Yt[14]/(Yt[10]+1),On=(Yt[9]+1)/Yt[5],lt=(Yt[9]-1)/Yt[5],ti=(Yt[8]-1)/Yt[0],Mn=(In[8]+1)/In[0],_n=Tn*ti,rn=Tn*Mn,Nr=Jt/(-ti+Mn),En=Nr*-ti;Pt.matrixWorld.decompose(mt.position,mt.quaternion,mt.scale),mt.translateX(En),mt.translateZ(Nr),mt.matrixWorld.compose(mt.position,mt.quaternion,mt.scale),mt.matrixWorldInverse.copy(mt.matrixWorld).invert();const xe=Tn+Nr,fe=bn+Nr,dt=_n-En,Dt=rn+(Jt-En),Nt=On*bn/fe*xe,kt=lt*bn/fe*xe;mt.projectionMatrix.makePerspective(dt,Dt,Nt,kt,xe,fe),mt.projectionMatrixInverse.copy(mt.projectionMatrix).invert()}function Ne(mt,Pt){Pt===null?mt.matrixWorld.copy(mt.matrix):mt.matrixWorld.multiplyMatrices(Pt.matrixWorld,mt.matrix),mt.matrixWorldInverse.copy(mt.matrixWorld).invert()}this.updateCamera=function(mt){if(i===null)return;W.near=ie.near=q.near=mt.near,W.far=ie.far=q.far=mt.far,(he!==W.near||Ye!==W.far)&&(i.updateRenderState({depthNear:W.near,depthFar:W.far}),he=W.near,Ye=W.far);const Pt=mt.parent,Rt=W.cameras;Ne(W,Pt);for(let Jt=0;Jt<Rt.length;Jt++)Ne(Rt[Jt],Pt);Rt.length===2?it(W,q,ie):W.projectionMatrix.copy(q.projectionMatrix),Xe(mt,W,Pt)};function Xe(mt,Pt,Rt){Rt===null?mt.matrix.copy(Pt.matrixWorld):(mt.matrix.copy(Rt.matrixWorld),mt.matrix.invert(),mt.matrix.multiply(Pt.matrixWorld)),mt.matrix.decompose(mt.position,mt.quaternion,mt.scale),mt.updateMatrixWorld(!0),mt.projectionMatrix.copy(Pt.projectionMatrix),mt.projectionMatrixInverse.copy(Pt.projectionMatrixInverse),mt.isPerspectiveCamera&&(mt.fov=e1*2*Math.atan(1/mt.projectionMatrix.elements[5]),mt.zoom=1)}this.getCamera=function(){return W},this.getFoveation=function(){if(!(k===null&&D===null))return m},this.setFoveation=function(mt){m=mt,k!==null&&(k.fixedFoveation=mt),D!==null&&D.fixedFoveation!==void 0&&(D.fixedFoveation=mt)};let qe=null;function ft(mt,Pt){if(x=Pt.getViewerPose(v||u),G=Pt,x!==null){const Rt=x.views;D!==null&&(e.setRenderTargetFramebuffer(U,D.framebuffer),e.setRenderTarget(U));let Jt=!1;Rt.length!==W.cameras.length&&(W.cameras.length=0,Jt=!0);for(let Yt=0;Yt<Rt.length;Yt++){const In=Rt[Yt];let Tn=null;if(D!==null)Tn=D.getViewport(In);else{const On=E.getViewSubImage(k,In);Tn=On.viewport,Yt===0&&(e.setRenderTargetTextures(U,On.colorTexture,k.ignoreDepthValues?void 0:On.depthStencilTexture),e.setRenderTarget(U))}let bn=pe[Yt];bn===void 0&&(bn=new Us,bn.layers.enable(Yt),bn.viewport=new Pr,pe[Yt]=bn),bn.matrix.fromArray(In.transform.matrix),bn.matrix.decompose(bn.position,bn.quaternion,bn.scale),bn.projectionMatrix.fromArray(In.projectionMatrix),bn.projectionMatrixInverse.copy(bn.projectionMatrix).invert(),bn.viewport.set(Tn.x,Tn.y,Tn.width,Tn.height),Yt===0&&(W.matrix.copy(bn.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale)),Jt===!0&&W.cameras.push(bn)}}for(let Rt=0;Rt<P.length;Rt++){const Jt=$[Rt],Yt=P[Rt];Jt!==null&&Yt!==void 0&&Yt.update(Jt,Pt,v||u)}qe&&qe(mt,Pt),Pt.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Pt}),G=null}const Ct=new vSe;Ct.setAnimationLoop(ft),this.setAnimationLoop=function(mt){qe=mt},this.dispose=function(){}}}function P6e(t,e){function n(z,U){z.matrixAutoUpdate===!0&&z.updateMatrix(),U.value.copy(z.matrix)}function r(z,U){U.color.getRGB(z.fogColor.value,gSe(t)),U.isFog?(z.fogNear.value=U.near,z.fogFar.value=U.far):U.isFogExp2&&(z.fogDensity.value=U.density)}function i(z,U,P,$,Q){U.isMeshBasicMaterial||U.isMeshLambertMaterial?o(z,U):U.isMeshToonMaterial?(o(z,U),E(z,U)):U.isMeshPhongMaterial?(o(z,U),x(z,U)):U.isMeshStandardMaterial?(o(z,U),k(z,U),U.isMeshPhysicalMaterial&&D(z,U,Q)):U.isMeshMatcapMaterial?(o(z,U),G(z,U)):U.isMeshDepthMaterial?o(z,U):U.isMeshDistanceMaterial?(o(z,U),N(z,U)):U.isMeshNormalMaterial?o(z,U):U.isLineBasicMaterial?(u(z,U),U.isLineDashedMaterial&&h(z,U)):U.isPointsMaterial?m(z,U,P,$):U.isSpriteMaterial?v(z,U):U.isShadowMaterial?(z.color.value.copy(U.color),z.opacity.value=U.opacity):U.isShaderMaterial&&(U.uniformsNeedUpdate=!1)}function o(z,U){z.opacity.value=U.opacity,U.color&&z.diffuse.value.copy(U.color),U.emissive&&z.emissive.value.copy(U.emissive).multiplyScalar(U.emissiveIntensity),U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.bumpMap&&(z.bumpMap.value=U.bumpMap,n(U.bumpMap,z.bumpMapTransform),z.bumpScale.value=U.bumpScale,U.side===Vs&&(z.bumpScale.value*=-1)),U.normalMap&&(z.normalMap.value=U.normalMap,n(U.normalMap,z.normalMapTransform),z.normalScale.value.copy(U.normalScale),U.side===Vs&&z.normalScale.value.negate()),U.displacementMap&&(z.displacementMap.value=U.displacementMap,n(U.displacementMap,z.displacementMapTransform),z.displacementScale.value=U.displacementScale,z.displacementBias.value=U.displacementBias),U.emissiveMap&&(z.emissiveMap.value=U.emissiveMap,n(U.emissiveMap,z.emissiveMapTransform)),U.specularMap&&(z.specularMap.value=U.specularMap,n(U.specularMap,z.specularMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest);const P=e.get(U).envMap;if(P&&(z.envMap.value=P,z.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,z.reflectivity.value=U.reflectivity,z.ior.value=U.ior,z.refractionRatio.value=U.refractionRatio),U.lightMap){z.lightMap.value=U.lightMap;const $=t._useLegacyLights===!0?Math.PI:1;z.lightMapIntensity.value=U.lightMapIntensity*$,n(U.lightMap,z.lightMapTransform)}U.aoMap&&(z.aoMap.value=U.aoMap,z.aoMapIntensity.value=U.aoMapIntensity,n(U.aoMap,z.aoMapTransform))}function u(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform))}function h(z,U){z.dashSize.value=U.dashSize,z.totalSize.value=U.dashSize+U.gapSize,z.scale.value=U.scale}function m(z,U,P,$){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.size.value=U.size*P,z.scale.value=$*.5,U.map&&(z.map.value=U.map,n(U.map,z.uvTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function v(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.rotation.value=U.rotation,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function x(z,U){z.specular.value.copy(U.specular),z.shininess.value=Math.max(U.shininess,1e-4)}function E(z,U){U.gradientMap&&(z.gradientMap.value=U.gradientMap)}function k(z,U){z.metalness.value=U.metalness,U.metalnessMap&&(z.metalnessMap.value=U.metalnessMap,n(U.metalnessMap,z.metalnessMapTransform)),z.roughness.value=U.roughness,U.roughnessMap&&(z.roughnessMap.value=U.roughnessMap,n(U.roughnessMap,z.roughnessMapTransform)),e.get(U).envMap&&(z.envMapIntensity.value=U.envMapIntensity)}function D(z,U,P){z.ior.value=U.ior,U.sheen>0&&(z.sheenColor.value.copy(U.sheenColor).multiplyScalar(U.sheen),z.sheenRoughness.value=U.sheenRoughness,U.sheenColorMap&&(z.sheenColorMap.value=U.sheenColorMap,n(U.sheenColorMap,z.sheenColorMapTransform)),U.sheenRoughnessMap&&(z.sheenRoughnessMap.value=U.sheenRoughnessMap,n(U.sheenRoughnessMap,z.sheenRoughnessMapTransform))),U.clearcoat>0&&(z.clearcoat.value=U.clearcoat,z.clearcoatRoughness.value=U.clearcoatRoughness,U.clearcoatMap&&(z.clearcoatMap.value=U.clearcoatMap,n(U.clearcoatMap,z.clearcoatMapTransform)),U.clearcoatRoughnessMap&&(z.clearcoatRoughnessMap.value=U.clearcoatRoughnessMap,n(U.clearcoatRoughnessMap,z.clearcoatRoughnessMapTransform)),U.clearcoatNormalMap&&(z.clearcoatNormalMap.value=U.clearcoatNormalMap,n(U.clearcoatNormalMap,z.clearcoatNormalMapTransform),z.clearcoatNormalScale.value.copy(U.clearcoatNormalScale),U.side===Vs&&z.clearcoatNormalScale.value.negate())),U.iridescence>0&&(z.iridescence.value=U.iridescence,z.iridescenceIOR.value=U.iridescenceIOR,z.iridescenceThicknessMinimum.value=U.iridescenceThicknessRange[0],z.iridescenceThicknessMaximum.value=U.iridescenceThicknessRange[1],U.iridescenceMap&&(z.iridescenceMap.value=U.iridescenceMap,n(U.iridescenceMap,z.iridescenceMapTransform)),U.iridescenceThicknessMap&&(z.iridescenceThicknessMap.value=U.iridescenceThicknessMap,n(U.iridescenceThicknessMap,z.iridescenceThicknessMapTransform))),U.transmission>0&&(z.transmission.value=U.transmission,z.transmissionSamplerMap.value=P.texture,z.transmissionSamplerSize.value.set(P.width,P.height),U.transmissionMap&&(z.transmissionMap.value=U.transmissionMap,n(U.transmissionMap,z.transmissionMapTransform)),z.thickness.value=U.thickness,U.thicknessMap&&(z.thicknessMap.value=U.thicknessMap,n(U.thicknessMap,z.thicknessMapTransform)),z.attenuationDistance.value=U.attenuationDistance,z.attenuationColor.value.copy(U.attenuationColor)),U.anisotropy>0&&(z.anisotropyVector.value.set(U.anisotropy*Math.cos(U.anisotropyRotation),U.anisotropy*Math.sin(U.anisotropyRotation)),U.anisotropyMap&&(z.anisotropyMap.value=U.anisotropyMap,n(U.anisotropyMap,z.anisotropyMapTransform))),z.specularIntensity.value=U.specularIntensity,z.specularColor.value.copy(U.specularColor),U.specularColorMap&&(z.specularColorMap.value=U.specularColorMap,n(U.specularColorMap,z.specularColorMapTransform)),U.specularIntensityMap&&(z.specularIntensityMap.value=U.specularIntensityMap,n(U.specularIntensityMap,z.specularIntensityMapTransform))}function G(z,U){U.matcap&&(z.matcap.value=U.matcap)}function N(z,U){const P=e.get(U).light;z.referencePosition.value.setFromMatrixPosition(P.matrixWorld),z.nearDistance.value=P.shadow.camera.near,z.farDistance.value=P.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function T6e(t,e,n,r){let i={},o={},u=[];const h=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function m(P,$){const Q=$.program;r.uniformBlockBinding(P,Q)}function v(P,$){let Q=i[P.id];Q===void 0&&(G(P),Q=x(P),i[P.id]=Q,P.addEventListener("dispose",z));const ye=$.program;r.updateUBOMapping(P,ye);const q=e.render.frame;o[P.id]!==q&&(k(P),o[P.id]=q)}function x(P){const $=E();P.__bindingPointIndex=$;const Q=t.createBuffer(),ye=P.__size,q=P.usage;return t.bindBuffer(t.UNIFORM_BUFFER,Q),t.bufferData(t.UNIFORM_BUFFER,ye,q),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,$,Q),Q}function E(){for(let P=0;P<h;P++)if(u.indexOf(P)===-1)return u.push(P),P;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function k(P){const $=i[P.id],Q=P.uniforms,ye=P.__cache;t.bindBuffer(t.UNIFORM_BUFFER,$);for(let q=0,ie=Q.length;q<ie;q++){const pe=Array.isArray(Q[q])?Q[q]:[Q[q]];for(let W=0,he=pe.length;W<he;W++){const Ye=pe[W];if(D(Ye,q,W,ye)===!0){const at=Ye.__offset,Et=Array.isArray(Ye.value)?Ye.value:[Ye.value];let ue=0;for(let Ge=0;Ge<Et.length;Ge++){const Te=Et[Ge],it=N(Te);typeof Te=="number"||typeof Te=="boolean"?(Ye.__data[0]=Te,t.bufferSubData(t.UNIFORM_BUFFER,at+ue,Ye.__data)):Te.isMatrix3?(Ye.__data[0]=Te.elements[0],Ye.__data[1]=Te.elements[1],Ye.__data[2]=Te.elements[2],Ye.__data[3]=0,Ye.__data[4]=Te.elements[3],Ye.__data[5]=Te.elements[4],Ye.__data[6]=Te.elements[5],Ye.__data[7]=0,Ye.__data[8]=Te.elements[6],Ye.__data[9]=Te.elements[7],Ye.__data[10]=Te.elements[8],Ye.__data[11]=0):(Te.toArray(Ye.__data,ue),ue+=it.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,at,Ye.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function D(P,$,Q,ye){const q=P.value,ie=$+"_"+Q;if(ye[ie]===void 0)return typeof q=="number"||typeof q=="boolean"?ye[ie]=q:ye[ie]=q.clone(),!0;{const pe=ye[ie];if(typeof q=="number"||typeof q=="boolean"){if(pe!==q)return ye[ie]=q,!0}else if(pe.equals(q)===!1)return pe.copy(q),!0}return!1}function G(P){const $=P.uniforms;let Q=0;const ye=16;for(let ie=0,pe=$.length;ie<pe;ie++){const W=Array.isArray($[ie])?$[ie]:[$[ie]];for(let he=0,Ye=W.length;he<Ye;he++){const at=W[he],Et=Array.isArray(at.value)?at.value:[at.value];for(let ue=0,Ge=Et.length;ue<Ge;ue++){const Te=Et[ue],it=N(Te),Ne=Q%ye;Ne!==0&&ye-Ne<it.boundary&&(Q+=ye-Ne),at.__data=new Float32Array(it.storage/Float32Array.BYTES_PER_ELEMENT),at.__offset=Q,Q+=it.storage}}}const q=Q%ye;return q>0&&(Q+=ye-q),P.__size=Q,P.__cache={},this}function N(P){const $={boundary:0,storage:0};return typeof P=="number"||typeof P=="boolean"?($.boundary=4,$.storage=4):P.isVector2?($.boundary=8,$.storage=8):P.isVector3||P.isColor?($.boundary=16,$.storage=12):P.isVector4?($.boundary=16,$.storage=16):P.isMatrix3?($.boundary=48,$.storage=48):P.isMatrix4?($.boundary=64,$.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),$}function z(P){const $=P.target;$.removeEventListener("dispose",z);const Q=u.indexOf($.__bindingPointIndex);u.splice(Q,1),t.deleteBuffer(i[$.id]),delete i[$.id],delete o[$.id]}function U(){for(const P in i)t.deleteBuffer(i[P]);u=[],i={},o={}}return{bind:m,update:v,dispose:U}}class l7{constructor(e={}){const{canvas:n=E5e(),context:r=null,depth:i=!0,stencil:o=!0,alpha:u=!1,antialias:h=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:v=!1,powerPreference:x="default",failIfMajorPerformanceCaveat:E=!1}=e;this.isWebGLRenderer=!0;let k;r!==null?k=r.getContextAttributes().alpha:k=u;const D=new Uint32Array(4),G=new Int32Array(4);let N=null,z=null;const U=[],P=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ns,this._useLegacyLights=!1,this.toneMapping=Um,this.toneMappingExposure=1;const $=this;let Q=!1,ye=0,q=0,ie=null,pe=-1,W=null;const he=new Pr,Ye=new Pr;let at=null;const Et=new Sn(0);let ue=0,Ge=n.width,Te=n.height,it=1,Ne=null,Xe=null;const qe=new Pr(0,0,Ge,Te),ft=new Pr(0,0,Ge,Te);let Ct=!1;const mt=new s7;let Pt=!1,Rt=!1,Jt=null;const Yt=new zn,In=new un,Tn=new Le,bn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function On(){return ie===null?it:1}let lt=r;function ti(be,Ze){for(let vt=0;vt<be.length;vt++){const pt=be[vt],ut=n.getContext(pt,Ze);if(ut!==null)return ut}return null}try{const be={alpha:!0,depth:i,stencil:o,antialias:h,premultipliedAlpha:m,preserveDrawingBuffer:v,powerPreference:x,failIfMajorPerformanceCaveat:E};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${YT}`),n.addEventListener("webglcontextlost",jt,!1),n.addEventListener("webglcontextrestored",Fe,!1),n.addEventListener("webglcontextcreationerror",Kt,!1),lt===null){const Ze=["webgl2","webgl","experimental-webgl"];if($.isWebGL1Renderer===!0&&Ze.shift(),lt=ti(Ze,be),lt===null)throw ti(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&lt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),lt.getShaderPrecisionFormat===void 0&&(lt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(be){throw console.error("THREE.WebGLRenderer: "+be.message),be}let Mn,_n,rn,Nr,En,xe,fe,dt,Dt,Nt,kt,fn,en,sn,Dn,qn,Lt,sr,Ae,Tt,qt,Vt,ln,$n;function lr(){Mn=new BVe(lt),_n=new RVe(lt,Mn,e),Mn.init(_n),Vt=new x6e(lt,Mn,_n),rn=new _6e(lt,Mn,_n),Nr=new VVe(lt),En=new a6e,xe=new w6e(lt,Mn,rn,En,_n,Vt,Nr),fe=new OVe($),dt=new FVe($),Dt=new q5e(lt,_n),ln=new AVe(lt,Mn,Dt,_n),Nt=new UVe(lt,Dt,Nr,ln),kt=new WVe(lt,Nt,Dt,Nr),Ae=new GVe(lt,_n,xe),qn=new DVe(En),fn=new o6e($,fe,dt,Mn,_n,ln,qn),en=new P6e($,En),sn=new u6e,Dn=new m6e(Mn,_n),sr=new kVe($,fe,dt,rn,kt,k,m),Lt=new b6e($,kt,_n),$n=new T6e(lt,Nr,_n,rn),Tt=new IVe(lt,Mn,Nr,_n),qt=new zVe(lt,Mn,Nr,_n),Nr.programs=fn.programs,$.capabilities=_n,$.extensions=Mn,$.properties=En,$.renderLists=sn,$.shadowMap=Lt,$.state=rn,$.info=Nr}lr();const Fn=new C6e($,lt);this.xr=Fn,this.getContext=function(){return lt},this.getContextAttributes=function(){return lt.getContextAttributes()},this.forceContextLoss=function(){const be=Mn.get("WEBGL_lose_context");be&&be.loseContext()},this.forceContextRestore=function(){const be=Mn.get("WEBGL_lose_context");be&&be.restoreContext()},this.getPixelRatio=function(){return it},this.setPixelRatio=function(be){be!==void 0&&(it=be,this.setSize(Ge,Te,!1))},this.getSize=function(be){return be.set(Ge,Te)},this.setSize=function(be,Ze,vt=!0){if(Fn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ge=be,Te=Ze,n.width=Math.floor(be*it),n.height=Math.floor(Ze*it),vt===!0&&(n.style.width=be+"px",n.style.height=Ze+"px"),this.setViewport(0,0,be,Ze)},this.getDrawingBufferSize=function(be){return be.set(Ge*it,Te*it).floor()},this.setDrawingBufferSize=function(be,Ze,vt){Ge=be,Te=Ze,it=vt,n.width=Math.floor(be*vt),n.height=Math.floor(Ze*vt),this.setViewport(0,0,be,Ze)},this.getCurrentViewport=function(be){return be.copy(he)},this.getViewport=function(be){return be.copy(qe)},this.setViewport=function(be,Ze,vt,pt){be.isVector4?qe.set(be.x,be.y,be.z,be.w):qe.set(be,Ze,vt,pt),rn.viewport(he.copy(qe).multiplyScalar(it).floor())},this.getScissor=function(be){return be.copy(ft)},this.setScissor=function(be,Ze,vt,pt){be.isVector4?ft.set(be.x,be.y,be.z,be.w):ft.set(be,Ze,vt,pt),rn.scissor(Ye.copy(ft).multiplyScalar(it).floor())},this.getScissorTest=function(){return Ct},this.setScissorTest=function(be){rn.setScissorTest(Ct=be)},this.setOpaqueSort=function(be){Ne=be},this.setTransparentSort=function(be){Xe=be},this.getClearColor=function(be){return be.copy(sr.getClearColor())},this.setClearColor=function(){sr.setClearColor.apply(sr,arguments)},this.getClearAlpha=function(){return sr.getClearAlpha()},this.setClearAlpha=function(){sr.setClearAlpha.apply(sr,arguments)},this.clear=function(be=!0,Ze=!0,vt=!0){let pt=0;if(be){let ut=!1;if(ie!==null){const on=ie.texture.format;ut=on===aSe||on===oSe||on===sSe}if(ut){const on=ie.texture.type,vn=on===xl||on===ep||on===J$||on===zm||on===rSe||on===iSe,Ln=sr.getClearColor(),Vn=sr.getClearAlpha(),tr=Ln.r,Kn=Ln.g,Nn=Ln.b;vn?(D[0]=tr,D[1]=Kn,D[2]=Nn,D[3]=Vn,lt.clearBufferuiv(lt.COLOR,0,D)):(G[0]=tr,G[1]=Kn,G[2]=Nn,G[3]=Vn,lt.clearBufferiv(lt.COLOR,0,G))}else pt|=lt.COLOR_BUFFER_BIT}Ze&&(pt|=lt.DEPTH_BUFFER_BIT),vt&&(pt|=lt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),lt.clear(pt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",jt,!1),n.removeEventListener("webglcontextrestored",Fe,!1),n.removeEventListener("webglcontextcreationerror",Kt,!1),sn.dispose(),Dn.dispose(),En.dispose(),fe.dispose(),dt.dispose(),kt.dispose(),ln.dispose(),$n.dispose(),fn.dispose(),Fn.dispose(),Fn.removeEventListener("sessionstart",Tr),Fn.removeEventListener("sessionend",ur),Jt&&(Jt.dispose(),Jt=null),Zi.stop()};function jt(be){be.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Q=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),Q=!1;const be=Nr.autoReset,Ze=Lt.enabled,vt=Lt.autoUpdate,pt=Lt.needsUpdate,ut=Lt.type;lr(),Nr.autoReset=be,Lt.enabled=Ze,Lt.autoUpdate=vt,Lt.needsUpdate=pt,Lt.type=ut}function Kt(be){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",be.statusMessage)}function Wt(be){const Ze=be.target;Ze.removeEventListener("dispose",Wt),Cn(Ze)}function Cn(be){xn(be),En.remove(be)}function xn(be){const Ze=En.get(be).programs;Ze!==void 0&&(Ze.forEach(function(vt){fn.releaseProgram(vt)}),be.isShaderMaterial&&fn.releaseShaderCache(be))}this.renderBufferDirect=function(be,Ze,vt,pt,ut,on){Ze===null&&(Ze=bn);const vn=ut.isMesh&&ut.matrixWorld.determinant()<0,Ln=og(be,Ze,vt,pt,ut);rn.setMaterial(pt,vn);let Vn=vt.index,tr=1;if(pt.wireframe===!0){if(Vn=Nt.getWireframeAttribute(vt),Vn===void 0)return;tr=2}const Kn=vt.drawRange,Nn=vt.attributes.position;let yr=Kn.start*tr,Rs=(Kn.start+Kn.count)*tr;on!==null&&(yr=Math.max(yr,on.start*tr),Rs=Math.min(Rs,(on.start+on.count)*tr)),Vn!==null?(yr=Math.max(yr,0),Rs=Math.min(Rs,Vn.count)):Nn!=null&&(yr=Math.max(yr,0),Rs=Math.min(Rs,Nn.count));const li=Rs-yr;if(li<0||li===1/0)return;ln.setup(ut,pt,Ln,vt,Vn);let ko,Fr=Tt;if(Vn!==null&&(ko=Dt.get(Vn),Fr=qt,Fr.setIndex(ko)),ut.isMesh)pt.wireframe===!0?(rn.setLineWidth(pt.wireframeLinewidth*On()),Fr.setMode(lt.LINES)):Fr.setMode(lt.TRIANGLES);else if(ut.isLine){let Wn=pt.linewidth;Wn===void 0&&(Wn=1),rn.setLineWidth(Wn*On()),ut.isLineSegments?Fr.setMode(lt.LINES):ut.isLineLoop?Fr.setMode(lt.LINE_LOOP):Fr.setMode(lt.LINE_STRIP)}else ut.isPoints?Fr.setMode(lt.POINTS):ut.isSprite&&Fr.setMode(lt.TRIANGLES);if(ut.isBatchedMesh)Fr.renderMultiDraw(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount);else if(ut.isInstancedMesh)Fr.renderInstances(yr,li,ut.count);else if(vt.isInstancedBufferGeometry){const Wn=vt._maxInstanceCount!==void 0?vt._maxInstanceCount:1/0,Ic=Math.min(vt.instanceCount,Wn);Fr.renderInstances(yr,li,Ic)}else Fr.render(yr,li)};function or(be,Ze,vt){be.transparent===!0&&be.side===Ka&&be.forceSinglePass===!1?(be.side=Vs,be.needsUpdate=!0,ra(be,Ze,vt),be.side=gp,be.needsUpdate=!0,ra(be,Ze,vt),be.side=Ka):ra(be,Ze,vt)}this.compile=function(be,Ze,vt=null){vt===null&&(vt=be),z=Dn.get(vt),z.init(),P.push(z),vt.traverseVisible(function(ut){ut.isLight&&ut.layers.test(Ze.layers)&&(z.pushLight(ut),ut.castShadow&&z.pushShadow(ut))}),be!==vt&&be.traverseVisible(function(ut){ut.isLight&&ut.layers.test(Ze.layers)&&(z.pushLight(ut),ut.castShadow&&z.pushShadow(ut))}),z.setupLights($._useLegacyLights);const pt=new Set;return be.traverse(function(ut){const on=ut.material;if(on)if(Array.isArray(on))for(let vn=0;vn<on.length;vn++){const Ln=on[vn];or(Ln,vt,ut),pt.add(Ln)}else or(on,vt,ut),pt.add(on)}),P.pop(),z=null,pt},this.compileAsync=function(be,Ze,vt=null){const pt=this.compile(be,Ze,vt);return new Promise(ut=>{function on(){if(pt.forEach(function(vn){En.get(vn).currentProgram.isReady()&&pt.delete(vn)}),pt.size===0){ut(be);return}setTimeout(on,10)}Mn.get("KHR_parallel_shader_compile")!==null?on():setTimeout(on,10)})};let pr=null;function Wr(be){pr&&pr(be)}function Tr(){Zi.stop()}function ur(){Zi.start()}const Zi=new vSe;Zi.setAnimationLoop(Wr),typeof self<"u"&&Zi.setContext(self),this.setAnimationLoop=function(be){pr=be,Fn.setAnimationLoop(be),be===null?Zi.stop():Zi.start()},Fn.addEventListener("sessionstart",Tr),Fn.addEventListener("sessionend",ur),this.render=function(be,Ze){if(Ze!==void 0&&Ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Q===!0)return;be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),Ze.parent===null&&Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),Fn.enabled===!0&&Fn.isPresenting===!0&&(Fn.cameraAutoUpdate===!0&&Fn.updateCamera(Ze),Ze=Fn.getCamera()),be.isScene===!0&&be.onBeforeRender($,be,Ze,ie),z=Dn.get(be,P.length),z.init(),P.push(z),Yt.multiplyMatrices(Ze.projectionMatrix,Ze.matrixWorldInverse),mt.setFromProjectionMatrix(Yt),Rt=this.localClippingEnabled,Pt=qn.init(this.clippingPlanes,Rt),N=sn.get(be,U.length),N.init(),U.push(N),so(be,Ze,0,$.sortObjects),N.finish(),$.sortObjects===!0&&N.sort(Ne,Xe),this.info.render.frame++,Pt===!0&&qn.beginShadows();const vt=z.state.shadowsArray;if(Lt.render(vt,be,Ze),Pt===!0&&qn.endShadows(),this.info.autoReset===!0&&this.info.reset(),sr.render(N,be),z.setupLights($._useLegacyLights),Ze.isArrayCamera){const pt=Ze.cameras;for(let ut=0,on=pt.length;ut<on;ut++){const vn=pt[ut];kc(N,be,vn,vn.viewport)}}else kc(N,be,Ze);ie!==null&&(xe.updateMultisampleRenderTarget(ie),xe.updateRenderTargetMipmap(ie)),be.isScene===!0&&be.onAfterRender($,be,Ze),ln.resetDefaultState(),pe=-1,W=null,P.pop(),P.length>0?z=P[P.length-1]:z=null,U.pop(),U.length>0?N=U[U.length-1]:N=null};function so(be,Ze,vt,pt){if(be.visible===!1)return;if(be.layers.test(Ze.layers)){if(be.isGroup)vt=be.renderOrder;else if(be.isLOD)be.autoUpdate===!0&&be.update(Ze);else if(be.isLight)z.pushLight(be),be.castShadow&&z.pushShadow(be);else if(be.isSprite){if(!be.frustumCulled||mt.intersectsSprite(be)){pt&&Tn.setFromMatrixPosition(be.matrixWorld).applyMatrix4(Yt);const vn=kt.update(be),Ln=be.material;Ln.visible&&N.push(be,vn,Ln,vt,Tn.z,null)}}else if((be.isMesh||be.isLine||be.isPoints)&&(!be.frustumCulled||mt.intersectsObject(be))){const vn=kt.update(be),Ln=be.material;if(pt&&(be.boundingSphere!==void 0?(be.boundingSphere===null&&be.computeBoundingSphere(),Tn.copy(be.boundingSphere.center)):(vn.boundingSphere===null&&vn.computeBoundingSphere(),Tn.copy(vn.boundingSphere.center)),Tn.applyMatrix4(be.matrixWorld).applyMatrix4(Yt)),Array.isArray(Ln)){const Vn=vn.groups;for(let tr=0,Kn=Vn.length;tr<Kn;tr++){const Nn=Vn[tr],yr=Ln[Nn.materialIndex];yr&&yr.visible&&N.push(be,vn,yr,vt,Tn.z,Nn)}}else Ln.visible&&N.push(be,vn,Ln,vt,Tn.z,null)}}const on=be.children;for(let vn=0,Ln=on.length;vn<Ln;vn++)so(on[vn],Ze,vt,pt)}function kc(be,Ze,vt,pt){const ut=be.opaque,on=be.transmissive,vn=be.transparent;z.setupLightsView(vt),Pt===!0&&qn.setGlobalState($.clippingPlanes,vt),on.length>0&&Ld(ut,on,Ze,vt),pt&&rn.viewport(he.copy(pt)),ut.length>0&&Pu(ut,Ze,vt),on.length>0&&Pu(on,Ze,vt),vn.length>0&&Pu(vn,Ze,vt),rn.buffers.depth.setTest(!0),rn.buffers.depth.setMask(!0),rn.buffers.color.setMask(!0),rn.setPolygonOffset(!1)}function Ld(be,Ze,vt,pt){if((vt.isScene===!0?vt.overrideMaterial:null)!==null)return;const on=_n.isWebGL2;Jt===null&&(Jt=new Cl(1,1,{generateMipmaps:!0,type:Mn.has("EXT_color_buffer_half_float")?_T:xl,minFilter:bT,samples:on?4:0})),$.getDrawingBufferSize(In),on?Jt.setSize(In.x,In.y):Jt.setSize(MN(In.x),MN(In.y));const vn=$.getRenderTarget();$.setRenderTarget(Jt),$.getClearColor(Et),ue=$.getClearAlpha(),ue<1&&$.setClearColor(16777215,.5),$.clear();const Ln=$.toneMapping;$.toneMapping=Um,Pu(be,vt,pt),xe.updateMultisampleRenderTarget(Jt),xe.updateRenderTargetMipmap(Jt);let Vn=!1;for(let tr=0,Kn=Ze.length;tr<Kn;tr++){const Nn=Ze[tr],yr=Nn.object,Rs=Nn.geometry,li=Nn.material,ko=Nn.group;if(li.side===Ka&&yr.layers.test(pt.layers)){const Fr=li.side;li.side=Vs,li.needsUpdate=!0,Ep(yr,vt,pt,Rs,li,ko),li.side=Fr,li.needsUpdate=!0,Vn=!0}}Vn===!0&&(xe.updateMultisampleRenderTarget(Jt),xe.updateRenderTargetMipmap(Jt)),$.setRenderTarget(vn),$.setClearColor(Et,ue),$.toneMapping=Ln}function Pu(be,Ze,vt){const pt=Ze.isScene===!0?Ze.overrideMaterial:null;for(let ut=0,on=be.length;ut<on;ut++){const vn=be[ut],Ln=vn.object,Vn=vn.geometry,tr=pt===null?vn.material:pt,Kn=vn.group;Ln.layers.test(vt.layers)&&Ep(Ln,Ze,vt,Vn,tr,Kn)}}function Ep(be,Ze,vt,pt,ut,on){be.onBeforeRender($,Ze,vt,pt,ut,on),be.modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,be.matrixWorld),be.normalMatrix.getNormalMatrix(be.modelViewMatrix),ut.onBeforeRender($,Ze,vt,pt,be,on),ut.transparent===!0&&ut.side===Ka&&ut.forceSinglePass===!1?(ut.side=Vs,ut.needsUpdate=!0,$.renderBufferDirect(vt,Ze,pt,ut,be,on),ut.side=gp,ut.needsUpdate=!0,$.renderBufferDirect(vt,Ze,pt,ut,be,on),ut.side=Ka):$.renderBufferDirect(vt,Ze,pt,ut,be,on),be.onAfterRender($,Ze,vt,pt,ut,on)}function ra(be,Ze,vt){Ze.isScene!==!0&&(Ze=bn);const pt=En.get(be),ut=z.state.lights,on=z.state.shadowsArray,vn=ut.state.version,Ln=fn.getParameters(be,ut.state,on,Ze,vt),Vn=fn.getProgramCacheKey(Ln);let tr=pt.programs;pt.environment=be.isMeshStandardMaterial?Ze.environment:null,pt.fog=Ze.fog,pt.envMap=(be.isMeshStandardMaterial?dt:fe).get(be.envMap||pt.environment),tr===void 0&&(be.addEventListener("dispose",Wt),tr=new Map,pt.programs=tr);let Kn=tr.get(Vn);if(Kn!==void 0){if(pt.currentProgram===Kn&&pt.lightsStateVersion===vn)return Nd(be,Ln),Kn}else Ln.uniforms=fn.getUniforms(be),be.onBuild(vt,Ln,$),be.onBeforeCompile(Ln,$),Kn=fn.acquireProgram(Ln,Vn),tr.set(Vn,Kn),pt.uniforms=Ln.uniforms;const Nn=pt.uniforms;return(!be.isShaderMaterial&&!be.isRawShaderMaterial||be.clipping===!0)&&(Nn.clippingPlanes=qn.uniform),Nd(be,Ln),pt.needsLights=Cp(be),pt.lightsStateVersion=vn,pt.needsLights&&(Nn.ambientLightColor.value=ut.state.ambient,Nn.lightProbe.value=ut.state.probe,Nn.directionalLights.value=ut.state.directional,Nn.directionalLightShadows.value=ut.state.directionalShadow,Nn.spotLights.value=ut.state.spot,Nn.spotLightShadows.value=ut.state.spotShadow,Nn.rectAreaLights.value=ut.state.rectArea,Nn.ltc_1.value=ut.state.rectAreaLTC1,Nn.ltc_2.value=ut.state.rectAreaLTC2,Nn.pointLights.value=ut.state.point,Nn.pointLightShadows.value=ut.state.pointShadow,Nn.hemisphereLights.value=ut.state.hemi,Nn.directionalShadowMap.value=ut.state.directionalShadowMap,Nn.directionalShadowMatrix.value=ut.state.directionalShadowMatrix,Nn.spotShadowMap.value=ut.state.spotShadowMap,Nn.spotLightMatrix.value=ut.state.spotLightMatrix,Nn.spotLightMap.value=ut.state.spotLightMap,Nn.pointShadowMap.value=ut.state.pointShadowMap,Nn.pointShadowMatrix.value=ut.state.pointShadowMatrix),pt.currentProgram=Kn,pt.uniformsList=null,Kn}function Ac(be){if(be.uniformsList===null){const Ze=be.currentProgram.getUniforms();be.uniformsList=BL.seqWithValue(Ze.seq,be.uniforms)}return be.uniformsList}function Nd(be,Ze){const vt=En.get(be);vt.outputColorSpace=Ze.outputColorSpace,vt.batching=Ze.batching,vt.instancing=Ze.instancing,vt.instancingColor=Ze.instancingColor,vt.skinning=Ze.skinning,vt.morphTargets=Ze.morphTargets,vt.morphNormals=Ze.morphNormals,vt.morphColors=Ze.morphColors,vt.morphTargetsCount=Ze.morphTargetsCount,vt.numClippingPlanes=Ze.numClippingPlanes,vt.numIntersection=Ze.numClipIntersection,vt.vertexAlphas=Ze.vertexAlphas,vt.vertexTangents=Ze.vertexTangents,vt.toneMapping=Ze.toneMapping}function og(be,Ze,vt,pt,ut){Ze.isScene!==!0&&(Ze=bn),xe.resetTextureUnits();const on=Ze.fog,vn=pt.isMeshStandardMaterial?Ze.environment:null,Ln=ie===null?$.outputColorSpace:ie.isXRRenderTarget===!0?ie.texture.colorSpace:yp,Vn=(pt.isMeshStandardMaterial?dt:fe).get(pt.envMap||vn),tr=pt.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,Kn=!!vt.attributes.tangent&&(!!pt.normalMap||pt.anisotropy>0),Nn=!!vt.morphAttributes.position,yr=!!vt.morphAttributes.normal,Rs=!!vt.morphAttributes.color;let li=Um;pt.toneMapped&&(ie===null||ie.isXRRenderTarget===!0)&&(li=$.toneMapping);const ko=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,Fr=ko!==void 0?ko.length:0,Wn=En.get(pt),Ic=z.state.lights;if(Pt===!0&&(Rt===!0||be!==W)){const Ds=be===W&&pt.id===pe;qn.setState(pt,be,Ds)}let Br=!1;pt.version===Wn.__version?(Wn.needsLights&&Wn.lightsStateVersion!==Ic.state.version||Wn.outputColorSpace!==Ln||ut.isBatchedMesh&&Wn.batching===!1||!ut.isBatchedMesh&&Wn.batching===!0||ut.isInstancedMesh&&Wn.instancing===!1||!ut.isInstancedMesh&&Wn.instancing===!0||ut.isSkinnedMesh&&Wn.skinning===!1||!ut.isSkinnedMesh&&Wn.skinning===!0||ut.isInstancedMesh&&Wn.instancingColor===!0&&ut.instanceColor===null||ut.isInstancedMesh&&Wn.instancingColor===!1&&ut.instanceColor!==null||Wn.envMap!==Vn||pt.fog===!0&&Wn.fog!==on||Wn.numClippingPlanes!==void 0&&(Wn.numClippingPlanes!==qn.numPlanes||Wn.numIntersection!==qn.numIntersection)||Wn.vertexAlphas!==tr||Wn.vertexTangents!==Kn||Wn.morphTargets!==Nn||Wn.morphNormals!==yr||Wn.morphColors!==Rs||Wn.toneMapping!==li||_n.isWebGL2===!0&&Wn.morphTargetsCount!==Fr)&&(Br=!0):(Br=!0,Wn.__version=pt.version);let Ao=Wn.currentProgram;Br===!0&&(Ao=ra(pt,Ze,ut));let Tu=!1,oo=!1,Il=!1;const vi=Ao.getUniforms(),Ra=Wn.uniforms;if(rn.useProgram(Ao.program)&&(Tu=!0,oo=!0,Il=!0),pt.id!==pe&&(pe=pt.id,oo=!0),Tu||W!==be){vi.setValue(lt,"projectionMatrix",be.projectionMatrix),vi.setValue(lt,"viewMatrix",be.matrixWorldInverse);const Ds=vi.map.cameraPosition;Ds!==void 0&&Ds.setValue(lt,Tn.setFromMatrixPosition(be.matrixWorld)),_n.logarithmicDepthBuffer&&vi.setValue(lt,"logDepthBufFC",2/(Math.log(be.far+1)/Math.LN2)),(pt.isMeshPhongMaterial||pt.isMeshToonMaterial||pt.isMeshLambertMaterial||pt.isMeshBasicMaterial||pt.isMeshStandardMaterial||pt.isShaderMaterial)&&vi.setValue(lt,"isOrthographic",be.isOrthographicCamera===!0),W!==be&&(W=be,oo=!0,Il=!0)}if(ut.isSkinnedMesh){vi.setOptional(lt,ut,"bindMatrix"),vi.setOptional(lt,ut,"bindMatrixInverse");const Ds=ut.skeleton;Ds&&(_n.floatVertexTextures?(Ds.boneTexture===null&&Ds.computeBoneTexture(),vi.setValue(lt,"boneTexture",Ds.boneTexture,xe)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ut.isBatchedMesh&&(vi.setOptional(lt,ut,"batchingTexture"),vi.setValue(lt,"batchingTexture",ut._matricesTexture,xe));const Rc=vt.morphAttributes;if((Rc.position!==void 0||Rc.normal!==void 0||Rc.color!==void 0&&_n.isWebGL2===!0)&&Ae.update(ut,vt,Ao),(oo||Wn.receiveShadow!==ut.receiveShadow)&&(Wn.receiveShadow=ut.receiveShadow,vi.setValue(lt,"receiveShadow",ut.receiveShadow)),pt.isMeshGouraudMaterial&&pt.envMap!==null&&(Ra.envMap.value=Vn,Ra.flipEnvMap.value=Vn.isCubeTexture&&Vn.isRenderTargetTexture===!1?-1:1),oo&&(vi.setValue(lt,"toneMappingExposure",$.toneMappingExposure),Wn.needsLights&&nl(Ra,Il),on&&pt.fog===!0&&en.refreshFogUniforms(Ra,on),en.refreshMaterialUniforms(Ra,pt,it,Te,Jt),BL.upload(lt,Ac(Wn),Ra,xe)),pt.isShaderMaterial&&pt.uniformsNeedUpdate===!0&&(BL.upload(lt,Ac(Wn),Ra,xe),pt.uniformsNeedUpdate=!1),pt.isSpriteMaterial&&vi.setValue(lt,"center",ut.center),vi.setValue(lt,"modelViewMatrix",ut.modelViewMatrix),vi.setValue(lt,"normalMatrix",ut.normalMatrix),vi.setValue(lt,"modelMatrix",ut.matrixWorld),pt.isShaderMaterial||pt.isRawShaderMaterial){const Ds=pt.uniformsGroups;for(let Dc=0,Fd=Ds.length;Dc<Fd;Dc++)if(_n.isWebGL2){const Da=Ds[Dc];$n.update(Da,Ao),$n.bind(Da,Ao)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ao}function nl(be,Ze){be.ambientLightColor.needsUpdate=Ze,be.lightProbe.needsUpdate=Ze,be.directionalLights.needsUpdate=Ze,be.directionalLightShadows.needsUpdate=Ze,be.pointLights.needsUpdate=Ze,be.pointLightShadows.needsUpdate=Ze,be.spotLights.needsUpdate=Ze,be.spotLightShadows.needsUpdate=Ze,be.rectAreaLights.needsUpdate=Ze,be.hemisphereLights.needsUpdate=Ze}function Cp(be){return be.isMeshLambertMaterial||be.isMeshToonMaterial||be.isMeshPhongMaterial||be.isMeshStandardMaterial||be.isShadowMaterial||be.isShaderMaterial&&be.lights===!0}this.getActiveCubeFace=function(){return ye},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return ie},this.setRenderTargetTextures=function(be,Ze,vt){En.get(be.texture).__webglTexture=Ze,En.get(be.depthTexture).__webglTexture=vt;const pt=En.get(be);pt.__hasExternalTextures=!0,pt.__hasExternalTextures&&(pt.__autoAllocateDepthBuffer=vt===void 0,pt.__autoAllocateDepthBuffer||Mn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(be,Ze){const vt=En.get(be);vt.__webglFramebuffer=Ze,vt.__useDefaultFramebuffer=Ze===void 0},this.setRenderTarget=function(be,Ze=0,vt=0){ie=be,ye=Ze,q=vt;let pt=!0,ut=null,on=!1,vn=!1;if(be){const Vn=En.get(be);Vn.__useDefaultFramebuffer!==void 0?(rn.bindFramebuffer(lt.FRAMEBUFFER,null),pt=!1):Vn.__webglFramebuffer===void 0?xe.setupRenderTarget(be):Vn.__hasExternalTextures&&xe.rebindTextures(be,En.get(be.texture).__webglTexture,En.get(be.depthTexture).__webglTexture);const tr=be.texture;(tr.isData3DTexture||tr.isDataArrayTexture||tr.isCompressedArrayTexture)&&(vn=!0);const Kn=En.get(be).__webglFramebuffer;be.isWebGLCubeRenderTarget?(Array.isArray(Kn[Ze])?ut=Kn[Ze][vt]:ut=Kn[Ze],on=!0):_n.isWebGL2&&be.samples>0&&xe.useMultisampledRTT(be)===!1?ut=En.get(be).__webglMultisampledFramebuffer:Array.isArray(Kn)?ut=Kn[vt]:ut=Kn,he.copy(be.viewport),Ye.copy(be.scissor),at=be.scissorTest}else he.copy(qe).multiplyScalar(it).floor(),Ye.copy(ft).multiplyScalar(it).floor(),at=Ct;if(rn.bindFramebuffer(lt.FRAMEBUFFER,ut)&&_n.drawBuffers&&pt&&rn.drawBuffers(be,ut),rn.viewport(he),rn.scissor(Ye),rn.setScissorTest(at),on){const Vn=En.get(be.texture);lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Vn.__webglTexture,vt)}else if(vn){const Vn=En.get(be.texture),tr=Ze||0;lt.framebufferTextureLayer(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,Vn.__webglTexture,vt||0,tr)}pe=-1},this.readRenderTargetPixels=function(be,Ze,vt,pt,ut,on,vn){if(!(be&&be.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ln=En.get(be).__webglFramebuffer;if(be.isWebGLCubeRenderTarget&&vn!==void 0&&(Ln=Ln[vn]),Ln){rn.bindFramebuffer(lt.FRAMEBUFFER,Ln);try{const Vn=be.texture,tr=Vn.format,Kn=Vn.type;if(tr!==pu&&Vt.convert(tr)!==lt.getParameter(lt.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Nn=Kn===_T&&(Mn.has("EXT_color_buffer_half_float")||_n.isWebGL2&&Mn.has("EXT_color_buffer_float"));if(Kn!==xl&&Vt.convert(Kn)!==lt.getParameter(lt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Kn===tp&&(_n.isWebGL2||Mn.has("OES_texture_float")||Mn.has("WEBGL_color_buffer_float")))&&!Nn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ze>=0&&Ze<=be.width-pt&&vt>=0&&vt<=be.height-ut&&lt.readPixels(Ze,vt,pt,ut,Vt.convert(tr),Vt.convert(Kn),on)}finally{const Vn=ie!==null?En.get(ie).__webglFramebuffer:null;rn.bindFramebuffer(lt.FRAMEBUFFER,Vn)}}},this.copyFramebufferToTexture=function(be,Ze,vt=0){const pt=Math.pow(2,-vt),ut=Math.floor(Ze.image.width*pt),on=Math.floor(Ze.image.height*pt);xe.setTexture2D(Ze,0),lt.copyTexSubImage2D(lt.TEXTURE_2D,vt,0,0,be.x,be.y,ut,on),rn.unbindTexture()},this.copyTextureToTexture=function(be,Ze,vt,pt=0){const ut=Ze.image.width,on=Ze.image.height,vn=Vt.convert(vt.format),Ln=Vt.convert(vt.type);xe.setTexture2D(vt,0),lt.pixelStorei(lt.UNPACK_FLIP_Y_WEBGL,vt.flipY),lt.pixelStorei(lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,vt.premultiplyAlpha),lt.pixelStorei(lt.UNPACK_ALIGNMENT,vt.unpackAlignment),Ze.isDataTexture?lt.texSubImage2D(lt.TEXTURE_2D,pt,be.x,be.y,ut,on,vn,Ln,Ze.image.data):Ze.isCompressedTexture?lt.compressedTexSubImage2D(lt.TEXTURE_2D,pt,be.x,be.y,Ze.mipmaps[0].width,Ze.mipmaps[0].height,vn,Ze.mipmaps[0].data):lt.texSubImage2D(lt.TEXTURE_2D,pt,be.x,be.y,vn,Ln,Ze.image),pt===0&&vt.generateMipmaps&&lt.generateMipmap(lt.TEXTURE_2D),rn.unbindTexture()},this.copyTextureToTexture3D=function(be,Ze,vt,pt,ut=0){if($.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const on=be.max.x-be.min.x+1,vn=be.max.y-be.min.y+1,Ln=be.max.z-be.min.z+1,Vn=Vt.convert(pt.format),tr=Vt.convert(pt.type);let Kn;if(pt.isData3DTexture)xe.setTexture3D(pt,0),Kn=lt.TEXTURE_3D;else if(pt.isDataArrayTexture||pt.isCompressedArrayTexture)xe.setTexture2DArray(pt,0),Kn=lt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}lt.pixelStorei(lt.UNPACK_FLIP_Y_WEBGL,pt.flipY),lt.pixelStorei(lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),lt.pixelStorei(lt.UNPACK_ALIGNMENT,pt.unpackAlignment);const Nn=lt.getParameter(lt.UNPACK_ROW_LENGTH),yr=lt.getParameter(lt.UNPACK_IMAGE_HEIGHT),Rs=lt.getParameter(lt.UNPACK_SKIP_PIXELS),li=lt.getParameter(lt.UNPACK_SKIP_ROWS),ko=lt.getParameter(lt.UNPACK_SKIP_IMAGES),Fr=vt.isCompressedTexture?vt.mipmaps[ut]:vt.image;lt.pixelStorei(lt.UNPACK_ROW_LENGTH,Fr.width),lt.pixelStorei(lt.UNPACK_IMAGE_HEIGHT,Fr.height),lt.pixelStorei(lt.UNPACK_SKIP_PIXELS,be.min.x),lt.pixelStorei(lt.UNPACK_SKIP_ROWS,be.min.y),lt.pixelStorei(lt.UNPACK_SKIP_IMAGES,be.min.z),vt.isDataTexture||vt.isData3DTexture?lt.texSubImage3D(Kn,ut,Ze.x,Ze.y,Ze.z,on,vn,Ln,Vn,tr,Fr.data):vt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),lt.compressedTexSubImage3D(Kn,ut,Ze.x,Ze.y,Ze.z,on,vn,Ln,Vn,Fr.data)):lt.texSubImage3D(Kn,ut,Ze.x,Ze.y,Ze.z,on,vn,Ln,Vn,tr,Fr),lt.pixelStorei(lt.UNPACK_ROW_LENGTH,Nn),lt.pixelStorei(lt.UNPACK_IMAGE_HEIGHT,yr),lt.pixelStorei(lt.UNPACK_SKIP_PIXELS,Rs),lt.pixelStorei(lt.UNPACK_SKIP_ROWS,li),lt.pixelStorei(lt.UNPACK_SKIP_IMAGES,ko),ut===0&&pt.generateMipmaps&&lt.generateMipmap(Kn),rn.unbindTexture()},this.initTexture=function(be){be.isCubeTexture?xe.setTextureCube(be,0):be.isData3DTexture?xe.setTexture3D(be,0):be.isDataArrayTexture||be.isCompressedArrayTexture?xe.setTexture2DArray(be,0):xe.setTexture2D(be,0),rn.unbindTexture()},this.resetState=function(){ye=0,q=0,ie=null,rn.reset(),ln.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return np}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===t7?"display-p3":"srgb",n.unpackColorSpace=oi.workingColorSpace===gF?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ns?lp:mF}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===lp?ns:yp}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class M6e extends l7{}M6e.prototype.isWebGL1Renderer=!0;class ST extends Kr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}const jye=new Le,Hye=new Pr,Gye=new Pr,k6e=new Le,Wye=new zn,uL=new Le,SG=new d1,$ye=new zn,EG=new QT;class A6e extends ks{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=M0e,this.bindMatrix=new zn,this.bindMatrixInverse=new zn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new c1),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,uL),this.boundingBox.expandByPoint(uL)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new d1),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,uL),this.boundingSphere.expandByPoint(uL)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),SG.copy(this.boundingSphere),SG.applyMatrix4(i),e.ray.intersectsSphere(SG)!==!1&&($ye.copy(i).invert(),EG.copy(e.ray).applyMatrix4($ye),!(this.boundingBox!==null&&EG.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,EG)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Pr,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===M0e?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===VUe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;Hye.fromBufferAttribute(i.attributes.skinIndex,e),Gye.fromBufferAttribute(i.attributes.skinWeight,e),jye.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const u=Gye.getComponent(o);if(u!==0){const h=Hye.getComponent(o);Wye.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),n.addScaledVector(k6e.copy(jye).applyMatrix4(Wye),u)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class wW extends Kr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class I6e extends is{constructor(e=null,n=1,r=1,i,o,u,h,m,v=Co,x=Co,E,k){super(null,u,h,m,v,x,i,o,E,k),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Kye=new zn,R6e=new zn;class u7{constructor(e=[],n=[]){this.uuid=tg(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new zn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new zn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,u=e.length;o<u;o++){const h=e[o]?e[o].matrixWorld:R6e;Kye.multiplyMatrices(h,n[o]),Kye.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new u7(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new I6e(n,e,e,pu,tp);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let u=n[o];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new wW),this.bones.push(u),this.boneInverses.push(new zn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const u=n[i];e.bones.push(u.uuid);const h=r[i];e.boneInverses.push(h.toArray())}return e}}class wF extends Cu{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Sn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Xye=new Le,qye=new Le,Yye=new zn,CG=new QT,cL=new d1;class ESe extends Kr{constructor(e=new ea,n=new wF){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)Xye.fromBufferAttribute(n,i-1),qye.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=Xye.distanceTo(qye);e.setAttribute("lineDistance",new Mi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),cL.copy(r.boundingSphere),cL.applyMatrix4(i),cL.radius+=o,e.ray.intersectsSphere(cL)===!1)return;Yye.copy(i).invert(),CG.copy(e.ray).applyMatrix4(Yye);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,v=new Le,x=new Le,E=new Le,k=new Le,D=this.isLineSegments?2:1,G=r.index,z=r.attributes.position;if(G!==null){const U=Math.max(0,u.start),P=Math.min(G.count,u.start+u.count);for(let $=U,Q=P-1;$<Q;$+=D){const ye=G.getX($),q=G.getX($+1);if(v.fromBufferAttribute(z,ye),x.fromBufferAttribute(z,q),CG.distanceSqToSegment(v,x,k,E)>m)continue;k.applyMatrix4(this.matrixWorld);const pe=e.ray.origin.distanceTo(k);pe<e.near||pe>e.far||n.push({distance:pe,point:E.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}}else{const U=Math.max(0,u.start),P=Math.min(z.count,u.start+u.count);for(let $=U,Q=P-1;$<Q;$+=D){if(v.fromBufferAttribute(z,$),x.fromBufferAttribute(z,$+1),CG.distanceSqToSegment(v,x,k,E)>m)continue;k.applyMatrix4(this.matrixWorld);const q=e.ray.origin.distanceTo(k);q<e.near||q>e.far||n.push({distance:q,point:E.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const h=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}const Zye=new Le,Qye=new Le;class CSe extends ESe{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)Zye.fromBufferAttribute(n,i),Qye.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+Zye.distanceTo(Qye);e.setAttribute("lineDistance",new Mi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class D6e{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let u;n?u=n:u=e*r[o-1];let h=0,m=o-1,v;for(;h<=m;)if(i=Math.floor(h+(m-h)/2),v=r[i]-u,v<0)h=i+1;else if(v>0)m=i-1;else{m=i;break}if(i=m,r[i]===u)return i/(o-1);const x=r[i],k=r[i+1]-x,D=(u-x)/k;return(i+D)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const u=this.getPoint(i),h=this.getPoint(o),m=n||(u.isVector2?new un:new Le);return m.copy(h).sub(u).normalize(),m}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Le,i=[],o=[],u=[],h=new Le,m=new zn;for(let D=0;D<=e;D++){const G=D/e;i[D]=this.getTangentAt(G,new Le)}o[0]=new Le,u[0]=new Le;let v=Number.MAX_VALUE;const x=Math.abs(i[0].x),E=Math.abs(i[0].y),k=Math.abs(i[0].z);x<=v&&(v=x,r.set(1,0,0)),E<=v&&(v=E,r.set(0,1,0)),k<=v&&r.set(0,0,1),h.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],h),u[0].crossVectors(i[0],o[0]);for(let D=1;D<=e;D++){if(o[D]=o[D-1].clone(),u[D]=u[D-1].clone(),h.crossVectors(i[D-1],i[D]),h.length()>Number.EPSILON){h.normalize();const G=Math.acos(Bs(i[D-1].dot(i[D]),-1,1));o[D].applyMatrix4(m.makeRotationAxis(h,G))}u[D].crossVectors(i[D],o[D])}if(n===!0){let D=Math.acos(Bs(o[0].dot(o[e]),-1,1));D/=e,i[0].dot(h.crossVectors(o[0],o[e]))>0&&(D=-D);for(let G=1;G<=e;G++)o[G].applyMatrix4(m.makeRotationAxis(i[G],D*G)),u[G].crossVectors(i[G],o[G])}return{tangents:i,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class c7 extends ea{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],u=[],h=[],m=[],v=new Le,x=new un;u.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let E=0,k=3;E<=n;E++,k+=3){const D=r+E/n*i;v.x=e*Math.cos(D),v.y=e*Math.sin(D),u.push(v.x,v.y,v.z),h.push(0,0,1),x.x=(u[k]/e+1)/2,x.y=(u[k+1]/e+1)/2,m.push(x.x,x.y)}for(let E=1;E<=n;E++)o.push(E,E+1,0);this.setIndex(o),this.setAttribute("position",new Mi(u,3)),this.setAttribute("normal",new Mi(h,3)),this.setAttribute("uv",new Mi(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c7(e.radius,e.segments,e.thetaStart,e.thetaLength)}}const O6e={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=PSe(t,0,i,n,!0);const u=[];if(!o||o.next===o.prev)return u;let h,m,v,x,E,k,D;if(r&&(o=U6e(t,e,o,n)),t.length>80*n){h=v=t[0],m=x=t[1];for(let G=n;G<i;G+=n)E=t[G],k=t[G+1],E<h&&(h=E),k<m&&(m=k),E>v&&(v=E),k>x&&(x=k);D=Math.max(v-h,x-m),D=D!==0?32767/D:0}return ET(o,u,n,h,m,D,0),u}};function PSe(t,e,n,r,i){let o,u;if(i===Y6e(t,e,n,r)>0)for(o=e;o<n;o+=r)u=Jye(o,t[o],t[o+1],u);else for(o=n-r;o>=e;o-=r)u=Jye(o,t[o],t[o+1],u);return u&&xF(u,u.next)&&(PT(u),u=u.next),u}function O0(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(xF(n,n.next)||$i(n.prev,n,n.next)===0)){if(PT(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function ET(t,e,n,r,i,o,u){if(!t)return;!u&&o&&G6e(t,r,i,o);let h=t,m,v;for(;t.prev!==t.next;){if(m=t.prev,v=t.next,o?N6e(t,r,i,o):L6e(t)){e.push(m.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),PT(t),t=v.next,h=v.next;continue}if(t=v,t===h){u?u===1?(t=F6e(O0(t),e,n),ET(t,e,n,r,i,o,2)):u===2&&B6e(t,e,n,r,i,o):ET(O0(t),e,n,r,i,o,1);break}}}function L6e(t){const e=t.prev,n=t,r=t.next;if($i(e,n,r)>=0)return!1;const i=e.x,o=n.x,u=r.x,h=e.y,m=n.y,v=r.y,x=i<o?i<u?i:u:o<u?o:u,E=h<m?h<v?h:v:m<v?m:v,k=i>o?i>u?i:u:o>u?o:u,D=h>m?h>v?h:v:m>v?m:v;let G=r.next;for(;G!==e;){if(G.x>=x&&G.x<=k&&G.y>=E&&G.y<=D&&Tw(i,h,o,m,u,v,G.x,G.y)&&$i(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function N6e(t,e,n,r){const i=t.prev,o=t,u=t.next;if($i(i,o,u)>=0)return!1;const h=i.x,m=o.x,v=u.x,x=i.y,E=o.y,k=u.y,D=h<m?h<v?h:v:m<v?m:v,G=x<E?x<k?x:k:E<k?E:k,N=h>m?h>v?h:v:m>v?m:v,z=x>E?x>k?x:k:E>k?E:k,U=xW(D,G,e,n,r),P=xW(N,z,e,n,r);let $=t.prevZ,Q=t.nextZ;for(;$&&$.z>=U&&Q&&Q.z<=P;){if($.x>=D&&$.x<=N&&$.y>=G&&$.y<=z&&$!==i&&$!==u&&Tw(h,x,m,E,v,k,$.x,$.y)&&$i($.prev,$,$.next)>=0||($=$.prevZ,Q.x>=D&&Q.x<=N&&Q.y>=G&&Q.y<=z&&Q!==i&&Q!==u&&Tw(h,x,m,E,v,k,Q.x,Q.y)&&$i(Q.prev,Q,Q.next)>=0))return!1;Q=Q.nextZ}for(;$&&$.z>=U;){if($.x>=D&&$.x<=N&&$.y>=G&&$.y<=z&&$!==i&&$!==u&&Tw(h,x,m,E,v,k,$.x,$.y)&&$i($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;Q&&Q.z<=P;){if(Q.x>=D&&Q.x<=N&&Q.y>=G&&Q.y<=z&&Q!==i&&Q!==u&&Tw(h,x,m,E,v,k,Q.x,Q.y)&&$i(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}return!0}function F6e(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!xF(i,o)&&TSe(i,r,r.next,o)&&CT(i,o)&&CT(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),PT(r),PT(r.next),r=t=o),r=r.next}while(r!==t);return O0(r)}function B6e(t,e,n,r,i,o){let u=t;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&K6e(u,h)){let m=MSe(u,h);u=O0(u,u.next),m=O0(m,m.next),ET(u,e,n,r,i,o,0),ET(m,e,n,r,i,o,0);return}h=h.next}u=u.next}while(u!==t)}function U6e(t,e,n,r){const i=[];let o,u,h,m,v;for(o=0,u=e.length;o<u;o++)h=e[o]*r,m=o<u-1?e[o+1]*r:t.length,v=PSe(t,h,m,r,!1),v===v.next&&(v.steiner=!0),i.push($6e(v));for(i.sort(z6e),o=0;o<i.length;o++)n=V6e(i[o],n);return n}function z6e(t,e){return t.x-e.x}function V6e(t,e){const n=j6e(t,e);if(!n)return e;const r=MSe(n,t);return O0(r,r.next),O0(n,n.next)}function j6e(t,e){let n=e,r=-1/0,i;const o=t.x,u=t.y;do{if(u<=n.y&&u>=n.next.y&&n.next.y!==n.y){const k=n.x+(u-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(k<=o&&k>r&&(r=k,i=n.x<n.next.x?n:n.next,k===o))return i}n=n.next}while(n!==e);if(!i)return null;const h=i,m=i.x,v=i.y;let x=1/0,E;n=i;do o>=n.x&&n.x>=m&&o!==n.x&&Tw(u<v?o:r,u,m,v,u<v?r:o,u,n.x,n.y)&&(E=Math.abs(u-n.y)/(o-n.x),CT(n,t)&&(E<x||E===x&&(n.x>i.x||n.x===i.x&&H6e(i,n)))&&(i=n,x=E)),n=n.next;while(n!==h);return i}function H6e(t,e){return $i(t.prev,t,e.prev)<0&&$i(e.next,t,t.next)<0}function G6e(t,e,n,r){let i=t;do i.z===0&&(i.z=xW(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,W6e(i)}function W6e(t){let e,n,r,i,o,u,h,m,v=1;do{for(n=t,t=null,o=null,u=0;n;){for(u++,r=n,h=0,e=0;e<v&&(h++,r=r.nextZ,!!r);e++);for(m=v;h>0||m>0&&r;)h!==0&&(m===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,h--):(i=r,r=r.nextZ,m--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,v*=2}while(u>1);return t}function xW(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function $6e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Tw(t,e,n,r,i,o,u,h){return(i-u)*(e-h)>=(t-u)*(o-h)&&(t-u)*(r-h)>=(n-u)*(e-h)&&(n-u)*(o-h)>=(i-u)*(r-h)}function K6e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!X6e(t,e)&&(CT(t,e)&&CT(e,t)&&q6e(t,e)&&($i(t.prev,t,e.prev)||$i(t,e.prev,e))||xF(t,e)&&$i(t.prev,t,t.next)>0&&$i(e.prev,e,e.next)>0)}function $i(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function xF(t,e){return t.x===e.x&&t.y===e.y}function TSe(t,e,n,r){const i=hL($i(t,e,n)),o=hL($i(t,e,r)),u=hL($i(n,r,t)),h=hL($i(n,r,e));return!!(i!==o&&u!==h||i===0&&dL(t,n,e)||o===0&&dL(t,r,e)||u===0&&dL(n,t,r)||h===0&&dL(n,e,r))}function dL(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function hL(t){return t>0?1:t<0?-1:0}function X6e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&TSe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function CT(t,e){return $i(t.prev,t,t.next)<0?$i(t,e,t.next)>=0&&$i(t,t.prev,e)>=0:$i(t,e,t.prev)<0||$i(t,t.next,e)<0}function q6e(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function MSe(t,e){const n=new SW(t.i,t.x,t.y),r=new SW(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Jye(t,e,n,r){const i=new SW(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function PT(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function SW(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y6e(t,e,n,r){let i=0;for(let o=e,u=n-r;o<n;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}class d7{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return d7.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];ebe(e),tbe(r,e);let u=e.length;n.forEach(ebe);for(let m=0;m<n.length;m++)i.push(u),u+=n[m].length,tbe(r,n[m]);const h=O6e.triangulate(r,i);for(let m=0;m<h.length;m+=3)o.push(h.slice(m,m+3));return o}}function ebe(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function tbe(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class TT extends ea{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,u=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:u,thetaLength:h},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const m=Math.min(u+h,Math.PI);let v=0;const x=[],E=new Le,k=new Le,D=[],G=[],N=[],z=[];for(let U=0;U<=r;U++){const P=[],$=U/r;let Q=0;U===0&&u===0?Q=.5/n:U===r&&m===Math.PI&&(Q=-.5/n);for(let ye=0;ye<=n;ye++){const q=ye/n;E.x=-e*Math.cos(i+q*o)*Math.sin(u+$*h),E.y=e*Math.cos(u+$*h),E.z=e*Math.sin(i+q*o)*Math.sin(u+$*h),G.push(E.x,E.y,E.z),k.copy(E).normalize(),N.push(k.x,k.y,k.z),z.push(q+Q,1-$),P.push(v++)}x.push(P)}for(let U=0;U<r;U++)for(let P=0;P<n;P++){const $=x[U][P+1],Q=x[U][P],ye=x[U+1][P],q=x[U+1][P+1];(U!==0||u>0)&&D.push($,Q,q),(U!==r-1||m<Math.PI)&&D.push(Q,ye,q)}this.setIndex(D),this.setAttribute("position",new Mi(G,3)),this.setAttribute("normal",new Mi(N,3)),this.setAttribute("uv",new Mi(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TT(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Z6e extends Cu{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Sn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=u1,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q6e extends Z6e{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new un(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Bs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Sn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Sn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Sn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class qP extends Cu{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Sn(16777215),this.specular=new Sn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=u1,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class J6e extends Cu{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=u1,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class e8e extends Cu{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=u1,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kSe extends Cu{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Sn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=u1,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}function pL(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function t8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function n8e(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function nbe(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,u=0;u!==r;++o){const h=n[o]*e;for(let m=0;m!==e;++m)i[u++]=t[h+m]}return i}function ASe(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let u=o[r];if(u!==void 0)if(Array.isArray(u))do u=o[r],u!==void 0&&(e.push(o.time),n.push.apply(n,u)),o=t[i++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[r],u!==void 0&&(e.push(o.time),u.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do u=o[r],u!==void 0&&(e.push(o.time),n.push(u)),o=t[i++];while(o!==void 0)}class SF{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let u;n:{r:if(!(e<i)){for(let h=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===h)break;if(o=i,i=n[++r],e<i)break t}u=n.length;break n}if(!(e>=o)){const h=n[1];e<h&&(r=2,o=h);for(let m=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===m)break;if(i=o,o=n[--r-1],e>=o)break t}u=r,r=0;break n}break e}for(;r<u;){const h=r+u>>>1;e<n[h]?u=h:r=h+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let u=0;u!==i;++u)n[u]=r[o+u];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class r8e extends SF{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Sw,endingEnd:Sw}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,u=e+1,h=i[o],m=i[u];if(h===void 0)switch(this.getSettings_().endingStart){case Ew:o=e,h=2*n-r;break;case SN:o=i.length-2,h=n+i[o]-i[o+1];break;default:o=e,h=r}if(m===void 0)switch(this.getSettings_().endingEnd){case Ew:u=e,m=2*r-n;break;case SN:u=1,m=r+i[1]-i[0];break;default:u=e-1,m=n}const v=(r-n)*.5,x=this.valueSize;this._weightPrev=v/(n-h),this._weightNext=v/(m-r),this._offsetPrev=o*x,this._offsetNext=u*x}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,x=this._offsetPrev,E=this._offsetNext,k=this._weightPrev,D=this._weightNext,G=(r-n)/(i-n),N=G*G,z=N*G,U=-k*z+2*k*N-k*G,P=(1+k)*z+(-1.5-2*k)*N+(-.5+k)*G+1,$=(-1-D)*z+(1.5+D)*N+.5*G,Q=D*z-D*N;for(let ye=0;ye!==h;++ye)o[ye]=U*u[x+ye]+P*u[v+ye]+$*u[m+ye]+Q*u[E+ye];return o}}class ISe extends SF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,x=(r-n)/(i-n),E=1-x;for(let k=0;k!==h;++k)o[k]=u[v+k]*E+u[m+k]*x;return o}}class i8e extends SF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Od{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pL(n,this.TimeBufferType),this.values=pL(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:pL(e.times,Array),values:pL(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new i8e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ISe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new r8e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case wN:n=this.InterpolantFactoryMethodDiscrete;break;case xN:n=this.InterpolantFactoryMethodLinear;break;case JH:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wN;case this.InterpolantFactoryMethodLinear:return xN;case this.InterpolantFactoryMethodSmooth:return JH}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,u=i-1;for(;o!==i&&r[o]<e;)++o;for(;u!==-1&&r[u]>n;)--u;if(++u,o!==0||u!==i){o>=u&&(u=Math.max(u,1),o=u-1);const h=this.getValueSize();this.times=r.slice(o,u),this.values=this.values.slice(o*h,u*h)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let h=0;h!==o;h++){const m=r[h];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(u!==null&&u>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,u),e=!1;break}u=m}if(i!==void 0&&t8e(i))for(let h=0,m=i.length;h!==m;++h){const v=i[h];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,v),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===JH,o=e.length-1;let u=1;for(let h=1;h<o;++h){let m=!1;const v=e[h],x=e[h+1];if(v!==x&&(h!==1||v!==e[0]))if(i)m=!0;else{const E=h*r,k=E-r,D=E+r;for(let G=0;G!==r;++G){const N=n[E+G];if(N!==n[k+G]||N!==n[D+G]){m=!0;break}}}if(m){if(h!==u){e[u]=e[h];const E=h*r,k=u*r;for(let D=0;D!==r;++D)n[k+D]=n[E+D]}++u}}if(o>0){e[u]=e[o];for(let h=o*r,m=u*r,v=0;v!==r;++v)n[m+v]=n[h+v];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=n.slice(0,u*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Od.prototype.TimeBufferType=Float32Array;Od.prototype.ValueBufferType=Float32Array;Od.prototype.DefaultInterpolation=xN;class p1 extends Od{}p1.prototype.ValueTypeName="bool";p1.prototype.ValueBufferType=Array;p1.prototype.DefaultInterpolation=wN;p1.prototype.InterpolantFactoryMethodLinear=void 0;p1.prototype.InterpolantFactoryMethodSmooth=void 0;class RSe extends Od{}RSe.prototype.ValueTypeName="color";class MT extends Od{}MT.prototype.ValueTypeName="number";class s8e extends SF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=(r-n)/(i-n);let v=e*h;for(let x=v+h;v!==x;v+=4)Ms.slerpFlat(o,0,u,v-h,u,v,m);return o}}class L0 extends Od{InterpolantFactoryMethodLinear(e){return new s8e(this.times,this.values,this.getValueSize(),e)}}L0.prototype.ValueTypeName="quaternion";L0.prototype.DefaultInterpolation=xN;L0.prototype.InterpolantFactoryMethodSmooth=void 0;class f1 extends Od{}f1.prototype.ValueTypeName="string";f1.prototype.ValueBufferType=Array;f1.prototype.DefaultInterpolation=wN;f1.prototype.InterpolantFactoryMethodLinear=void 0;f1.prototype.InterpolantFactoryMethodSmooth=void 0;class kT extends Od{}kT.prototype.ValueTypeName="vector";class EW{constructor(e,n=-1,r,i=e7){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=tg(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let u=0,h=r.length;u!==h;++u)n.push(a8e(r[u]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,u=r.length;o!==u;++o)n.push(Od.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,u=[];for(let h=0;h<o;h++){let m=[],v=[];m.push((h+o-1)%o,h,(h+1)%o),v.push(0,1,0);const x=n8e(m);m=nbe(m,1,x),v=nbe(v,1,x),!i&&m[0]===0&&(m.push(o),v.push(v[0])),u.push(new MT(".morphTargetInfluences["+n[h].name+"]",m,v).scale(1/r))}return new this(e,-1,u)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const v=e[h],x=v.name.match(o);if(x&&x.length>1){const E=x[1];let k=i[E];k||(i[E]=k=[]),k.push(v)}}const u=[];for(const h in i)u.push(this.CreateFromMorphTargetSequence(h,i[h],n,r));return u}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(E,k,D,G,N){if(D.length!==0){const z=[],U=[];ASe(D,z,U,G),z.length!==0&&N.push(new E(k,z,U))}},i=[],o=e.name||"default",u=e.fps||30,h=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let E=0;E<v.length;E++){const k=v[E].keys;if(!(!k||k.length===0))if(k[0].morphTargets){const D={};let G;for(G=0;G<k.length;G++)if(k[G].morphTargets)for(let N=0;N<k[G].morphTargets.length;N++)D[k[G].morphTargets[N]]=-1;for(const N in D){const z=[],U=[];for(let P=0;P!==k[G].morphTargets.length;++P){const $=k[G];z.push($.time),U.push($.morphTarget===N?1:0)}i.push(new MT(".morphTargetInfluence["+N+"]",z,U))}m=D.length*u}else{const D=".bones["+n[E].name+"]";r(kT,D+".position",k,"pos",i),r(L0,D+".quaternion",k,"rot",i),r(kT,D+".scale",k,"scl",i)}}return i.length===0?null:new this(o,m,i,h)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o8e(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return MT;case"vector":case"vector2":case"vector3":case"vector4":return kT;case"color":return RSe;case"quaternion":return L0;case"bool":case"boolean":return p1;case"string":return f1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function a8e(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=o8e(t.type);if(t.times===void 0){const n=[],r=[];ASe(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const kN={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class l8e{constructor(e,n,r){const i=this;let o=!1,u=0,h=0,m;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(x){h++,o===!1&&i.onStart!==void 0&&i.onStart(x,u,h),o=!0},this.itemEnd=function(x){u++,i.onProgress!==void 0&&i.onProgress(x,u,h),u===h&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(x){i.onError!==void 0&&i.onError(x)},this.resolveURL=function(x){return m?m(x):x},this.setURLModifier=function(x){return m=x,this},this.addHandler=function(x,E){return v.push(x,E),this},this.removeHandler=function(x){const E=v.indexOf(x);return E!==-1&&v.splice(E,2),this},this.getHandler=function(x){for(let E=0,k=v.length;E<k;E+=2){const D=v[E],G=v[E+1];if(D.global&&(D.lastIndex=0),D.test(x))return G}return null}}}const u8e=new l8e;class Km{constructor(e){this.manager=e!==void 0?e:u8e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Km.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gh={};class c8e extends Error{constructor(e,n){super(e),this.response=n}}class d8e extends Km{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=kN.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Gh[e]!==void 0){Gh[e].push({onLoad:n,onProgress:r,onError:i});return}Gh[e]=[],Gh[e].push({onLoad:n,onProgress:r,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,m=this.responseType;fetch(u).then(v=>{if(v.status===200||v.status===0){if(v.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||v.body===void 0||v.body.getReader===void 0)return v;const x=Gh[e],E=v.body.getReader(),k=v.headers.get("Content-Length")||v.headers.get("X-File-Size"),D=k?parseInt(k):0,G=D!==0;let N=0;const z=new ReadableStream({start(U){P();function P(){E.read().then(({done:$,value:Q})=>{if($)U.close();else{N+=Q.byteLength;const ye=new ProgressEvent("progress",{lengthComputable:G,loaded:N,total:D});for(let q=0,ie=x.length;q<ie;q++){const pe=x[q];pe.onProgress&&pe.onProgress(ye)}U.enqueue(Q),P()}})}}});return new Response(z)}else throw new c8e(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`,v)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(x=>new DOMParser().parseFromString(x,h));case"json":return v.json();default:if(h===void 0)return v.text();{const E=/charset="?([^;"\s]*)"?/i.exec(h),k=E&&E[1]?E[1].toLowerCase():void 0,D=new TextDecoder(k);return v.arrayBuffer().then(G=>D.decode(G))}}}).then(v=>{kN.add(e,v);const x=Gh[e];delete Gh[e];for(let E=0,k=x.length;E<k;E++){const D=x[E];D.onLoad&&D.onLoad(v)}}).catch(v=>{const x=Gh[e];if(x===void 0)throw this.manager.itemError(e),v;delete Gh[e];for(let E=0,k=x.length;E<k;E++){const D=x[E];D.onError&&D.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class DSe extends Km{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=kN.get(e);if(u!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(u),o.manager.itemEnd(e)},0),u;const h=wT("img");function m(){x(),kN.add(e,this),n&&n(this),o.manager.itemEnd(e)}function v(E){x(),i&&i(E),o.manager.itemError(e),o.manager.itemEnd(e)}function x(){h.removeEventListener("load",m,!1),h.removeEventListener("error",v,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",v,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),o.manager.itemStart(e),h.src=e,h}}class h8e extends Km{constructor(e){super(e)}load(e,n,r,i){const o=new yF;o.colorSpace=ns;const u=new DSe(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let h=0;function m(v){u.load(e[v],function(x){o.images[v]=x,h++,h===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let v=0;v<e.length;++v)m(v);return o}}class OSe extends Km{constructor(e){super(e)}load(e,n,r,i){const o=new is,u=new DSe(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(h){o.image=h,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class tM extends Kr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Sn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class p8e extends tM{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Sn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const PG=new zn,rbe=new Le,ibe=new Le;class h7{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new un(512,512),this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new s7,this._frameExtents=new un(1,1),this._viewportCount=1,this._viewports=[new Pr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;rbe.setFromMatrixPosition(e.matrixWorld),n.position.copy(rbe),ibe.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(ibe),n.updateMatrixWorld(),PG.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PG),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(PG)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class f8e extends h7{constructor(){super(new Us(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=e1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class LSe extends tM{constructor(e,n,r=0,i=Math.PI/3,o=0,u=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.target=new Kr,this.distance=r,this.angle=i,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new f8e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const sbe=new zn,yP=new Le,TG=new Le;class m8e extends h7{constructor(){super(new Us(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new un(4,2),this._viewportCount=6,this._viewports=[new Pr(2,1,1,1),new Pr(0,1,1,1),new Pr(3,1,1,1),new Pr(1,1,1,1),new Pr(3,0,1,1),new Pr(1,0,1,1)],this._cubeDirections=[new Le(1,0,0),new Le(-1,0,0),new Le(0,0,1),new Le(0,0,-1),new Le(0,1,0),new Le(0,-1,0)],this._cubeUps=[new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,0,1),new Le(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),yP.setFromMatrixPosition(e.matrixWorld),r.position.copy(yP),TG.copy(r.position),TG.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(TG),r.updateMatrixWorld(),i.makeTranslation(-yP.x,-yP.y,-yP.z),sbe.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sbe)}}class obe extends tM{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new m8e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class g8e extends h7{constructor(){super(new eM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class NSe extends tM{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.target=new Kr,this.shadow=new g8e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class v8e extends tM{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class y8e{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class b8e extends Kr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Jv=new Le,abe=new Ms,_8e=new Le,e0=new Le;class w8e extends b8e{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Jv,abe,_8e),e0.set(0,0,1).applyQuaternion(abe);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Jv.x,r),n.positionY.linearRampToValueAtTime(Jv.y,r),n.positionZ.linearRampToValueAtTime(Jv.z,r),n.orientationX.linearRampToValueAtTime(e0.x,r),n.orientationY.linearRampToValueAtTime(e0.y,r),n.orientationZ.linearRampToValueAtTime(e0.z,r)}else n.setPosition(Jv.x,Jv.y,Jv.z),n.setOrientation(e0.x,e0.y,e0.z)}}class x8e{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,u;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let h=0;h!==i;++h)r[o+h]=r[h];u=n}else{u+=n;const h=n/u;this._mixBufferRegion(r,o,0,h,i)}this.cumulativeWeight=u}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const m=n*this._origIndex;this._mixBufferRegion(r,i,m,1-o,n)}u>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let m=n,v=n+n;m!==v;++m)if(r[m]!==r[m+n]){h.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,u=i;o!==u;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let u=0;u!==o;++u)e[n+u]=e[r+u]}_slerp(e,n,r,i){Ms.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const u=this._workIndex*o;Ms.multiplyQuaternionsFlat(e,u,e,n,e,r),Ms.slerpFlat(e,n,e,n,e,u,i)}_lerp(e,n,r,i,o){const u=1-i;for(let h=0;h!==o;++h){const m=n+h;e[m]=e[m]*u+e[r+h]*i}}_lerpAdditive(e,n,r,i,o){for(let u=0;u!==o;++u){const h=n+u;e[h]=e[h]+e[r+u]*i}}}const p7="\\[\\]\\.:\\/",S8e=new RegExp("["+p7+"]","g"),f7="[^"+p7+"]",E8e="[^"+p7.replace("\\.","")+"]",C8e=/((?:WC+[\/:])*)/.source.replace("WC",f7),P8e=/(WCOD+)?/.source.replace("WCOD",E8e),T8e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f7),M8e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f7),k8e=new RegExp("^"+C8e+P8e+T8e+M8e+"$"),A8e=["material","materials","bones","map"];class I8e{constructor(e,n,r){const i=r||Dr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Dr{constructor(e,n,r){this.path=n,this.parsedPath=r||Dr.parseTrackName(n),this.node=Dr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Dr.Composite(e,n,r):new Dr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(S8e,"")}static parseTrackName(e){const n=k8e.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);A8e.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let u=0;u<o.length;u++){const h=o[u];if(h.name===n||h.uuid===n)return h;const m=r(h.children);if(m)return m}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=Dr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let x=0;x<e.length;x++)if(e[x].name===v){v=x;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const u=e[i];if(u===void 0){const v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+i+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}m=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(m=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dr.Composite=I8e;Dr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dr.prototype.GetterByBindingType=[Dr.prototype._getValue_direct,Dr.prototype._getValue_array,Dr.prototype._getValue_arrayElement,Dr.prototype._getValue_toArray];Dr.prototype.SetterByBindingTypeAndVersioning=[[Dr.prototype._setValue_direct,Dr.prototype._setValue_direct_setNeedsUpdate,Dr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dr.prototype._setValue_array,Dr.prototype._setValue_array_setNeedsUpdate,Dr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dr.prototype._setValue_arrayElement,Dr.prototype._setValue_arrayElement_setNeedsUpdate,Dr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dr.prototype._setValue_fromArray,Dr.prototype._setValue_fromArray_setNeedsUpdate,Dr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class R8e{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,u=o.length,h=new Array(u),m={endingStart:Sw,endingEnd:Sw};for(let v=0;v!==u;++v){const x=o[v].createInterpolant(null);h[v]=x,x.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=QUe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,u=o/i,h=i/o;e.warp(1,u,n),this.warp(h,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,u=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=i._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,v=h.sampleValues;return m[0]=o,m[1]=o+r,v[0]=e/u,v[1]=n/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const m=(e-o)*r;m<0||r===0?n=0:(this._startTime=null,n=r*m)}n*=this._updateTimeScale(e);const u=this._updateTime(n),h=this._updateWeight(e);if(h>0){const m=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case e5e:for(let x=0,E=m.length;x!==E;++x)m[x].evaluate(u),v[x].accumulateAdditive(h);break;case e7:default:for(let x=0,E=m.length;x!==E;++x)m[x].evaluate(u),v[x].accumulate(i,h)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const u=r===JUe;if(e===0)return o===-1?i:u&&(o&1)===1?n-i:i;if(r===ZUe){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=n||i<0){const h=Math.floor(i/n);i-=n*h,o+=Math.abs(h);const m=this.repetitions-o;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const v=e<0;this._setEndings(v,!v,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=i;if(u&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Ew,i.endingEnd=Ew):(e?i.endingStart=this.zeroSlopeAtStart?Ew:Sw:i.endingStart=SN,n?i.endingEnd=this.zeroSlopeAtEnd?Ew:Sw:i.endingEnd=SN)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const h=u.parameterPositions,m=u.sampleValues;return h[0]=o,m[0]=n,h[1]=o+e,m[1]=r,this}}const D8e=new Float32Array(1);class O8e extends Eu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,u=e._propertyBindings,h=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let x=v[m];x===void 0&&(x={},v[m]=x);for(let E=0;E!==o;++E){const k=i[E],D=k.name;let G=x[D];if(G!==void 0)++G.referenceCount,u[E]=G;else{if(G=u[E],G!==void 0){G._cacheIndex===null&&(++G.referenceCount,this._addInactiveBinding(G,m,D));continue}const N=n&&n._propertyBindings[E].binding.parsedPath;G=new x8e(Dr.create(r,D,N),k.ValueTypeName,k.getValueSize()),++G.referenceCount,this._addInactiveBinding(G,m,D),u[E]=G}h[E].resultBuffer=G.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let u=o[n];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=u;else{const h=u.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,u=this._actionsByClip,h=u[o],m=h.knownActions,v=m[m.length-1],x=e._byClipCacheIndex;v._byClipCacheIndex=x,m[x]=v,m.pop(),e._byClipCacheIndex=null;const E=h.actionByRoot,k=(e._localRoot||this._root).uuid;delete E[k],m.length===0&&delete u[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let u=i[n];u===void 0&&(u={},i[n]=u),u[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,u=this._bindingsByRootAndName,h=u[i],m=n[n.length-1],v=e._cacheIndex;m._cacheIndex=v,n[v]=m,n.pop(),delete h[o],Object.keys(h).length===0&&delete u[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new ISe(new Float32Array(2),new Float32Array(2),1,D8e),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let u=typeof e=="string"?EW.findByName(i,e):e;const h=u!==null?u.uuid:e,m=this._actionsByClip[h];let v=null;if(r===void 0&&(u!==null?r=u.blendMode:r=e7),m!==void 0){const E=m.actionByRoot[o];if(E!==void 0&&E.blendMode===r)return E;v=m.knownActions[0],u===null&&(u=v._clip)}if(u===null)return null;const x=new R8e(this,u,n,r);return this._bindAction(x,v),this._addInactiveAction(x,h,o),x}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?EW.findByName(r,e):e,u=o?o.uuid:e,h=this._actionsByClip[u];return h!==void 0&&h.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),u=this._accuIndex^=1;for(let v=0;v!==r;++v)n[v]._update(i,e,o,u);const h=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)h[v].apply(u);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const u=o.knownActions;for(let h=0,m=u.length;h!==m;++h){const v=u[h];this._deactivateAction(v);const x=v._cacheIndex,E=n[n.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,E._cacheIndex=x,n[x]=E,n.pop(),this._removeInactiveBindingsForAction(v)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const u in r){const h=r[u].actionByRoot,m=h[n];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const u in o){const h=o[u];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Ti{constructor(e){this.value=e}clone(){return new Ti(this.value.clone===void 0?this.value:this.value.clone())}}class L8e{constructor(e,n,r=0,i=1/0){this.ray=new QT(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new r7,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return CW(e,this,r,n),r.sort(lbe),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)CW(e[i],this,r,n);return r.sort(lbe),r}}function lbe(t,e){return t.distance-e.distance}function CW(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,u=i.length;o<u;o++)CW(i[o],e,n,!0)}}class ube{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Bs(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const fL=new Le,es=new vF;class N8e extends CSe{constructor(e){const n=new ea,r=new wF({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],u={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(G,N){m(G),m(N)}function m(G){i.push(0,0,0),o.push(0,0,0),u[G]===void 0&&(u[G]=[]),u[G].push(i.length/3-1)}n.setAttribute("position",new Mi(i,3)),n.setAttribute("color",new Mi(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const v=new Sn(16755200),x=new Sn(16711680),E=new Sn(43775),k=new Sn(16777215),D=new Sn(3355443);this.setColors(v,x,E,k,D)}setColors(e,n,r,i,o){const h=this.geometry.getAttribute("color");h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,n.r,n.g,n.b),h.setXYZ(25,n.r,n.g,n.b),h.setXYZ(26,n.r,n.g,n.b),h.setXYZ(27,n.r,n.g,n.b),h.setXYZ(28,n.r,n.g,n.b),h.setXYZ(29,n.r,n.g,n.b),h.setXYZ(30,n.r,n.g,n.b),h.setXYZ(31,n.r,n.g,n.b),h.setXYZ(32,r.r,r.g,r.b),h.setXYZ(33,r.r,r.g,r.b),h.setXYZ(34,r.r,r.g,r.b),h.setXYZ(35,r.r,r.g,r.b),h.setXYZ(36,r.r,r.g,r.b),h.setXYZ(37,r.r,r.g,r.b),h.setXYZ(38,i.r,i.g,i.b),h.setXYZ(39,i.r,i.g,i.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;es.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),gs("c",n,e,es,0,0,-1),gs("t",n,e,es,0,0,1),gs("n1",n,e,es,-r,-i,-1),gs("n2",n,e,es,r,-i,-1),gs("n3",n,e,es,-r,i,-1),gs("n4",n,e,es,r,i,-1),gs("f1",n,e,es,-r,-i,1),gs("f2",n,e,es,r,-i,1),gs("f3",n,e,es,-r,i,1),gs("f4",n,e,es,r,i,1),gs("u1",n,e,es,r*.7,i*1.1,-1),gs("u2",n,e,es,-r*.7,i*1.1,-1),gs("u3",n,e,es,0,i*2,-1),gs("cf1",n,e,es,-r,0,1),gs("cf2",n,e,es,r,0,1),gs("cf3",n,e,es,0,-i,1),gs("cf4",n,e,es,0,i,1),gs("cn1",n,e,es,-r,0,-1),gs("cn2",n,e,es,r,0,-1),gs("cn3",n,e,es,0,-i,-1),gs("cn4",n,e,es,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function gs(t,e,n,r,i,o,u){fL.set(i,o,u).unproject(r);const h=e[t];if(h!==void 0){const m=n.getAttribute("position");for(let v=0,x=h.length;v<x;v++)m.setXYZ(h[v],fL.x,fL.y,fL.z)}}class FSe extends CSe{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new ea;i.setAttribute("position",new Mi(n,3)),i.setAttribute("color",new Mi(r,3));const o=new wF({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new Sn,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:YT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=YT);const _r=new Eu,wr={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject",CREATE_TEXTURE:"ToolEvents::createTexture",REQUEST_METHOD:"ToolEvents::requestMethod",ADD_CAMERA:"ToolEvents::addCamera",REMOVE_CAMERA:"ToolEvents::removeCamera"};class EF{constructor(e){Jr(this,"app");this.app=e}dispose(){}}class F8e extends EF{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}}function B8e(t,e){switch(e.event){case"selectComponent":_r.dispatchEvent({type:wr.SELECT_DROPDOWN,value:e.data});break;case"draggableListUpdate":_r.dispatchEvent({type:wr.DRAG_UPDATE,value:e.data});break}}var AN={exports:{}};AN.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,v=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,k=(y,T,B)=>T in y?r(y,T,{enumerable:!0,configurable:!0,writable:!0,value:B}):y[T]=B,D=(y,T)=>{for(var B in T||(T={}))x.call(T,B)&&k(y,B,T[B]);if(m)for(var B of m(T))E.call(T,B)&&k(y,B,T[B]);return y},G=(y,T)=>i(y,u(T)),N=(y,T)=>function(){return T||(0,y[h(y)[0]])((T={exports:{}}).exports,T),T.exports},z=(y,T)=>{for(var B in T)r(y,B,{get:T[B],enumerable:!0})},U=(y,T,B,Y)=>{if(T&&typeof T=="object"||typeof T=="function")for(let se of h(T))!x.call(y,se)&&se!==B&&r(y,se,{get:()=>T[se],enumerable:!(Y=o(T,se))||Y.enumerable});return y},P=(y,T,B)=>(B=y!=null?n(v(y)):{},U(T||!y||!y.__esModule?r(B,"default",{value:y,enumerable:!0}):B,y)),$=y=>U(r({},"__esModule",{value:!0}),y),Q=(y,T,B)=>(k(y,typeof T!="symbol"?T+"":T,B),B),ye=N({"../node_modules/timing-function/lib/UnitBezier.js"(y,T){T.exports=function(){function B(Y,se,me,Ie){this.set(Y,se,me,Ie)}return B.prototype.set=function(Y,se,me,Ie){this._cx=3*Y,this._bx=3*(me-Y)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*se,this._by=3*(Ie-se)-this._cy,this._ay=1-this._cy-this._by},B.epsilon=1e-6,B.prototype._sampleCurveX=function(Y){return((this._ax*Y+this._bx)*Y+this._cx)*Y},B.prototype._sampleCurveY=function(Y){return((this._ay*Y+this._by)*Y+this._cy)*Y},B.prototype._sampleCurveDerivativeX=function(Y){return(3*this._ax*Y+2*this._bx)*Y+this._cx},B.prototype._solveCurveX=function(Y,se){var me,Ie,Ke,Qe,bt,ae;for(Ke=void 0,Qe=void 0,bt=void 0,ae=void 0,me=void 0,Ie=void 0,bt=Y,Ie=0;Ie<8;){if(ae=this._sampleCurveX(bt)-Y,Math.abs(ae)<se)return bt;if(me=this._sampleCurveDerivativeX(bt),Math.abs(me)<se)break;bt=bt-ae/me,Ie++}if(Ke=0,Qe=1,bt=Y,bt<Ke)return Ke;if(bt>Qe)return Qe;for(;Ke<Qe;){if(ae=this._sampleCurveX(bt),Math.abs(ae-Y)<se)return bt;Y>ae?Ke=bt:Qe=bt,bt=(Qe-Ke)*.5+Ke}return bt},B.prototype.solve=function(Y,se){return this._sampleCurveY(this._solveCurveX(Y,se))},B.prototype.solveSimple=function(Y){return this._sampleCurveY(this._solveCurveX(Y,1e-6))},B}()}}),q=N({"../node_modules/levenshtein-edit-distance/index.js"(y,T){var B,Y;B=[],Y=[];function se(me,Ie,Ke){var Qe,bt,ae,ze,Zt,kn,pn,rr;if(me===Ie)return 0;if(Qe=me.length,bt=Ie.length,Qe===0)return bt;if(bt===0)return Qe;for(Ke&&(me=me.toLowerCase(),Ie=Ie.toLowerCase()),pn=0;pn<Qe;)Y[pn]=me.charCodeAt(pn),B[pn]=++pn;for(rr=0;rr<bt;)for(ae=Ie.charCodeAt(rr),ze=Zt=rr++,pn=-1;++pn<Qe;)kn=ae===Y[pn]?Zt:Zt+1,Zt=B[pn],B[pn]=ze=Zt>ze?kn>ze?ze+1:kn:kn>Zt?Zt+1:kn;return ze}T.exports=se}}),ie=N({"../node_modules/propose/propose.js"(y,T){var B=q();function Y(){var se,me,Ie,Ke,Qe,bt=0,ae=arguments[0],ze=arguments[1],Zt=ze.length,kn=arguments[2];kn&&(Ke=kn.threshold,Qe=kn.ignoreCase),Ke===void 0&&(Ke=0);for(var pn=0;pn<Zt;++pn)Qe?me=B(ae,ze[pn],!0):me=B(ae,ze[pn]),me>ae.length?se=1-me/ze[pn].length:se=1-me/ae.length,se>bt&&(bt=se,Ie=ze[pn]);return bt>=Ke?Ie:null}T.exports=Y}}),pe=N({"../node_modules/fast-deep-equal/index.js"(y,T){T.exports=function B(Y,se){if(Y===se)return!0;if(Y&&se&&typeof Y=="object"&&typeof se=="object"){if(Y.constructor!==se.constructor)return!1;var me,Ie,Ke;if(Array.isArray(Y)){if(me=Y.length,me!=se.length)return!1;for(Ie=me;Ie--!==0;)if(!B(Y[Ie],se[Ie]))return!1;return!0}if(Y.constructor===RegExp)return Y.source===se.source&&Y.flags===se.flags;if(Y.valueOf!==Object.prototype.valueOf)return Y.valueOf()===se.valueOf();if(Y.toString!==Object.prototype.toString)return Y.toString()===se.toString();if(Ke=Object.keys(Y),me=Ke.length,me!==Object.keys(se).length)return!1;for(Ie=me;Ie--!==0;)if(!Object.prototype.hasOwnProperty.call(se,Ke[Ie]))return!1;for(Ie=me;Ie--!==0;){var Qe=Ke[Ie];if(!B(Y[Qe],se[Qe]))return!1}return!0}return Y!==Y&&se!==se}}}),W={};z(W,{createRafDriver:()=>Qy,getProject:()=>GS,notify:()=>Zp,onChange:()=>mb,types:()=>ES,val:()=>WS}),t.exports=$(W);var he={};z(he,{createRafDriver:()=>Qy,getProject:()=>GS,notify:()=>Zp,onChange:()=>mb,types:()=>ES,val:()=>WS});var Ye=Ft,at=class{constructor(){Q(this,"atom",new Ye.Atom({projects:{}}))}add(y,T){this.atom.setByPointer(B=>B.projects[y],T)}get(y){return this.atom.get().projects[y]}has(y){return!!this.get(y)}},Et=new at,ue=Et,Ge=new WeakMap;function Te(y){return Ge.get(y)}function it(y,T){Ge.set(y,T)}var Ne=[],Xe=Array.isArray,qe=Xe,ft=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,Ct=ft,mt=typeof self=="object"&&self&&self.Object===Object&&self,Pt=Ct||mt||Function("return this")(),Rt=Pt,Jt=Rt.Symbol,Yt=Jt,In=Object.prototype,Tn=In.hasOwnProperty,bn=In.toString,On=Yt?Yt.toStringTag:void 0;function lt(y){var T=Tn.call(y,On),B=y[On];try{y[On]=void 0;var Y=!0}catch{}var se=bn.call(y);return Y&&(T?y[On]=B:delete y[On]),se}var ti=lt,Mn=Object.prototype,_n=Mn.toString;function rn(y){return _n.call(y)}var Nr=rn,En="[object Null]",xe="[object Undefined]",fe=Yt?Yt.toStringTag:void 0;function dt(y){return y==null?y===void 0?xe:En:fe&&fe in Object(y)?ti(y):Nr(y)}var Dt=dt;function Nt(y){return y!=null&&typeof y=="object"}var kt=Nt,fn="[object Symbol]";function en(y){return typeof y=="symbol"||kt(y)&&Dt(y)==fn}var sn=en,Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qn=/^\w*$/;function Lt(y,T){if(qe(y))return!1;var B=typeof y;return B=="number"||B=="symbol"||B=="boolean"||y==null||sn(y)?!0:qn.test(y)||!Dn.test(y)||T!=null&&y in Object(T)}var sr=Lt;function Ae(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}var Tt=Ae,qt="[object AsyncFunction]",Vt="[object Function]",ln="[object GeneratorFunction]",$n="[object Proxy]";function lr(y){if(!Tt(y))return!1;var T=Dt(y);return T==Vt||T==ln||T==qt||T==$n}var Fn=lr,jt=Rt["__core-js_shared__"],Fe=jt,Kt=function(){var y=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}();function Wt(y){return!!Kt&&Kt in y}var Cn=Wt,xn=Function.prototype,or=xn.toString;function pr(y){if(y!=null){try{return or.call(y)}catch{}try{return y+""}catch{}}return""}var Wr=pr,Tr=/[\\^$.*+?()[\]{}|]/g,ur=/^\[object .+?Constructor\]$/,Zi=Function.prototype,so=Object.prototype,kc=Zi.toString,Ld=so.hasOwnProperty,Pu=RegExp("^"+kc.call(Ld).replace(Tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ep(y){if(!Tt(y)||Cn(y))return!1;var T=Fn(y)?Pu:ur;return T.test(Wr(y))}var ra=Ep;function Ac(y,T){return y==null?void 0:y[T]}var Nd=Ac;function og(y,T){var B=Nd(y,T);return ra(B)?B:void 0}var nl=og,Cp=nl(Object,"create"),be=Cp;function Ze(){this.__data__=be?be(null):{},this.size=0}var vt=Ze;function pt(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}var ut=pt,on="__lodash_hash_undefined__",vn=Object.prototype,Ln=vn.hasOwnProperty;function Vn(y){var T=this.__data__;if(be){var B=T[y];return B===on?void 0:B}return Ln.call(T,y)?T[y]:void 0}var tr=Vn,Kn=Object.prototype,Nn=Kn.hasOwnProperty;function yr(y){var T=this.__data__;return be?T[y]!==void 0:Nn.call(T,y)}var Rs=yr,li="__lodash_hash_undefined__";function ko(y,T){var B=this.__data__;return this.size+=this.has(y)?0:1,B[y]=be&&T===void 0?li:T,this}var Fr=ko;function Wn(y){var T=-1,B=y==null?0:y.length;for(this.clear();++T<B;){var Y=y[T];this.set(Y[0],Y[1])}}Wn.prototype.clear=vt,Wn.prototype.delete=ut,Wn.prototype.get=tr,Wn.prototype.has=Rs,Wn.prototype.set=Fr;var Ic=Wn;function Br(){this.__data__=[],this.size=0}var Ao=Br;function Tu(y,T){return y===T||y!==y&&T!==T}var oo=Tu;function Il(y,T){for(var B=y.length;B--;)if(oo(y[B][0],T))return B;return-1}var vi=Il,Ra=Array.prototype,Rc=Ra.splice;function Ds(y){var T=this.__data__,B=vi(T,y);if(B<0)return!1;var Y=T.length-1;return B==Y?T.pop():Rc.call(T,B,1),--this.size,!0}var Dc=Ds;function Fd(y){var T=this.__data__,B=vi(T,y);return B<0?void 0:T[B][1]}var Da=Fd;function ag(y){return vi(this.__data__,y)>-1}var Pp=ag;function lg(y,T){var B=this.__data__,Y=vi(B,y);return Y<0?(++this.size,B.push([y,T])):B[Y][1]=T,this}var S1=lg;function Rl(y){var T=-1,B=y==null?0:y.length;for(this.clear();++T<B;){var Y=y[T];this.set(Y[0],Y[1])}}Rl.prototype.clear=Ao,Rl.prototype.delete=Dc,Rl.prototype.get=Da,Rl.prototype.has=Pp,Rl.prototype.set=S1;var Bd=Rl,E1=nl(Rt,"Map"),Ud=E1;function ey(){this.size=0,this.__data__={hash:new Ic,map:new(Ud||Bd),string:new Ic}}var ty=ey;function Dl(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}var ny=Dl;function C1(y,T){var B=y.__data__;return ny(T)?B[typeof T=="string"?"string":"hash"]:B.map}var zd=C1;function ug(y){var T=zd(this,y).delete(y);return this.size-=T?1:0,T}var cg=ug;function dg(y){return zd(this,y).get(y)}var ry=dg;function iy(y){return zd(this,y).has(y)}var sy=iy;function oy(y,T){var B=zd(this,y),Y=B.size;return B.set(y,T),this.size+=B.size==Y?0:1,this}var P1=oy;function Oc(y){var T=-1,B=y==null?0:y.length;for(this.clear();++T<B;){var Y=y[T];this.set(Y[0],Y[1])}}Oc.prototype.clear=ty,Oc.prototype.delete=cg,Oc.prototype.get=ry,Oc.prototype.has=sy,Oc.prototype.set=P1;var Vd=Oc,T1="Expected a function";function hg(y,T){if(typeof y!="function"||T!=null&&typeof T!="function")throw new TypeError(T1);var B=function(){var Y=arguments,se=T?T.apply(this,Y):Y[0],me=B.cache;if(me.has(se))return me.get(se);var Ie=y.apply(this,Y);return B.cache=me.set(se,Ie)||me,Ie};return B.cache=new(hg.Cache||Vd),B}hg.Cache=Vd;var Ol=hg,Mu=500;function ay(y){var T=Ol(y,function(Y){return B.size===Mu&&B.clear(),Y}),B=T.cache;return T}var Tp=ay,M1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k1=/\\(\\)?/g,ly=Tp(function(y){var T=[];return y.charCodeAt(0)===46&&T.push(""),y.replace(M1,function(B,Y,se,me){T.push(se?me.replace(k1,"$1"):Y||B)}),T}),A1=ly;function I1(y,T){for(var B=-1,Y=y==null?0:y.length,se=Array(Y);++B<Y;)se[B]=T(y[B],B,y);return se}var uy=I1,cy=1/0,dy=Yt?Yt.prototype:void 0,pg=dy?dy.toString:void 0;function hy(y){if(typeof y=="string")return y;if(qe(y))return uy(y,hy)+"";if(sn(y))return pg?pg.call(y):"";var T=y+"";return T=="0"&&1/y==-cy?"-0":T}var py=hy;function fy(y){return y==null?"":py(y)}var fg=fy;function Mp(y,T){return qe(y)?y:sr(y,T)?[y]:A1(fg(y))}var Lc=Mp,my=1/0;function R1(y){if(typeof y=="string"||sn(y))return y;var T=y+"";return T=="0"&&1/y==-my?"-0":T}var Oa=R1;function jd(y,T){T=Lc(T,y);for(var B=0,Y=T.length;y!=null&&B<Y;)y=y[Oa(T[B++])];return B&&B==Y?y:void 0}var Hd=jd;function ku(y,T,B){var Y=y==null?void 0:Hd(y,T);return Y===void 0?B:Y}var Ll=ku;function mg(y,T){return T.length===0?y:Ll(y,T)}var Au=class{constructor(){Q(this,"_values",{})}get(y,T){if(this.has(y))return this._values[y];{const B=T();return this._values[y]=B,B}}has(y){return this._values.hasOwnProperty(y)}},as=Ft,Gd=function(){try{var y=nl(Object,"defineProperty");return y({},"",{}),y}catch{}}(),kp=Gd;function D1(y,T,B){T=="__proto__"&&kp?kp(y,T,{configurable:!0,enumerable:!0,value:B,writable:!0}):y[T]=B}var Iu=D1,Nl=Object.prototype,gg=Nl.hasOwnProperty;function O1(y,T,B){var Y=y[T];(!(gg.call(y,T)&&oo(Y,B))||B===void 0&&!(T in y))&&Iu(y,T,B)}var Ap=O1,L1=9007199254740991,gy=/^(?:0|[1-9]\d*)$/;function vy(y,T){var B=typeof y;return T=T??L1,!!T&&(B=="number"||B!="symbol"&&gy.test(y))&&y>-1&&y%1==0&&y<T}var vg=vy;function N1(y,T,B,Y){if(!Tt(y))return y;T=Lc(T,y);for(var se=-1,me=T.length,Ie=me-1,Ke=y;Ke!=null&&++se<me;){var Qe=Oa(T[se]),bt=B;if(Qe==="__proto__"||Qe==="constructor"||Qe==="prototype")return y;if(se!=Ie){var ae=Ke[Qe];bt=Y?Y(ae,Qe,Ke):void 0,bt===void 0&&(bt=Tt(ae)?ae:vg(T[se+1])?[]:{})}Ap(Ke,Qe,bt),Ke=Ke[Qe]}return y}var Ip=N1;function yg(y,T,B){return y==null?y:Ip(y,T,B)}var Rp=yg,ls=new WeakMap;function F1(y){return bg(y)}function bg(y){if(ls.has(y))return ls.get(y);const T=y.type==="compound"?wg(y):y.type==="enum"?_g(y):y.default;return ls.set(y,T),T}function _g(y){const T={$case:y.defaultCase};for(const[B,Y]of Object.entries(y.cases))T[B]=bg(Y);return T}function wg(y){const T={};for(const[B,Y]of Object.entries(y.props))T[B]=bg(Y);return T}var us=Ft,Dp=P(ye());function B1(y,T,B){return(0,us.prism)(()=>{const Y=(0,us.val)(T);return us.prism.memo("driver",()=>Y?Y.type==="BasicKeyframedTrack"?Op(y,Y,B):(y.logger.error("Track type not yet supported."),(0,us.prism)(()=>{})):(0,us.prism)(()=>{}),[Y]).getValue()})}function Op(y,T,B){return(0,us.prism)(()=>{let Y=us.prism.ref("state",{started:!1}),se=Y.current;const me=B.getValue();return(!se.started||me<se.validFrom||se.validTo<=me)&&(Y.current=se=U1(y,B,T)),se.der.getValue()})}var Lp=(0,us.prism)(()=>{});function U1(y,T,B){const Y=T.getValue();if(B.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Lp};let se=0;for(;;){const me=B.keyframes[se];if(!me)return yi.error;const Ie=se===B.keyframes.length-1;if(Y<me.position)return se===0?yi.beforeFirstKeyframe(me):yi.error;if(me.position===Y)return Ie?yi.lastKeyframe(me):yi.between(me,B.keyframes[se+1],T);if(se===B.keyframes.length-1)return yi.lastKeyframe(me);{const Ke=se+1;if(B.keyframes[Ke].position<=Y){se=Ke;continue}else return yi.between(me,B.keyframes[se+1],T)}}}var yi={beforeFirstKeyframe(y){return{started:!0,validFrom:-1/0,validTo:y.position,der:(0,us.prism)(()=>({left:y.value,progression:0}))}},lastKeyframe(y){return{started:!0,validFrom:y.position,validTo:1/0,der:(0,us.prism)(()=>({left:y.value,progression:0}))}},between(y,T,B){if(!y.connectedRight)return{started:!0,validFrom:y.position,validTo:T.position,der:(0,us.prism)(()=>({left:y.value,progression:0}))};const Y=me=>(me-y.position)/(T.position-y.position);if(!y.type||y.type==="bezier"){const me=new Dp.default(y.handles[2],y.handles[3],T.handles[0],T.handles[1]),Ie=(0,us.prism)(()=>{const Ke=Y(B.getValue()),Qe=me.solveSimple(Ke);return{left:y.value,right:T.value,progression:Qe}});return{started:!0,validFrom:y.position,validTo:T.position,der:Ie}}const se=(0,us.prism)(()=>{const me=Y(B.getValue()),Ie=Math.floor(me);return{left:y.value,right:T.value,progression:Ie}});return{started:!0,validFrom:y.position,validTo:T.position,der:se}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Lp}};function Fl(y,T,B){const se=B.get(y);if(se&&se.override===T)return se.merged;const me=D({},y);for(const Ie of Object.keys(T)){const Ke=T[Ie],Qe=y[Ie];me[Ie]=typeof Ke=="object"&&typeof Qe=="object"?Fl(Qe,Ke,B):Ke===void 0?Qe:Ke}return B.set(y,{override:T,merged:me}),me}function Wd(y,T){let B=y;for(const Y of T)B=B[Y];return B}var Nc=Ft,xg=(y,T)=>{const B=Nc.prism.memo(y,()=>new Nc.Atom(T),[]);return B.set(T),B},Ur=Ft,Sg=Ft,z1=/\s/;function Np(y){for(var T=y.length;T--&&z1.test(y.charAt(T)););return T}var Eg=Np,yy=/^\s+/;function V1(y){return y&&y.slice(0,Eg(y)+1).replace(yy,"")}var Fc=V1,Fp=0/0,j1=/^[-+]0x[0-9a-f]+$/i,by=/^0b[01]+$/i,$d=/^0o[0-7]+$/i,Cg=parseInt;function H1(y){if(typeof y=="number")return y;if(sn(y))return Fp;if(Tt(y)){var T=typeof y.valueOf=="function"?y.valueOf():y;y=Tt(T)?T+"":T}if(typeof y!="string")return y===0?y:+y;y=Fc(y);var B=by.test(y);return B||$d.test(y)?Cg(y.slice(2),B?2:8):j1.test(y)?Fp:+y}var te=H1,_e=1/0,Ue=17976931348623157e292;function yt(y){if(!y)return y===0?y:0;if(y=te(y),y===_e||y===-_e){var T=y<0?-1:1;return T*Ue}return y===y?y:0}var jn=yt;function Er(y){var T=jn(y),B=T%1;return T===T?B?T-B:T:0}var _s=Er;function ia(y){return y}var _y=ia,Bc=nl(Rt,"WeakMap"),Uc=Bc,EM=Object.create,ZF=function(){function y(){}return function(T){if(!Tt(T))return{};if(EM)return EM(T);y.prototype=T;var B=new y;return y.prototype=void 0,B}}(),CM=ZF;function G1(y,T){var B=-1,Y=y.length;for(T||(T=Array(Y));++B<Y;)T[B]=y[B];return T}var QF=G1;function W1(y,T){for(var B=-1,Y=y==null?0:y.length;++B<Y&&T(y[B],B,y)!==!1;);return y}var PM=W1;function TM(y,T,B,Y){var se=!B;B||(B={});for(var me=-1,Ie=T.length;++me<Ie;){var Ke=T[me],Qe=Y?Y(B[Ke],y[Ke],Ke,B,y):void 0;Qe===void 0&&(Qe=y[Ke]),se?Iu(B,Ke,Qe):Ap(B,Ke,Qe)}return B}var Pg=TM,wy=9007199254740991;function $1(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=wy}var K1=$1;function MM(y){return y!=null&&K1(y.length)&&!Fn(y)}var kM=MM,X1=Object.prototype;function q1(y){var T=y&&y.constructor,B=typeof T=="function"&&T.prototype||X1;return y===B}var xy=q1;function Y1(y,T){for(var B=-1,Y=Array(y);++B<y;)Y[B]=T(B);return Y}var AM=Y1,IM="[object Arguments]";function Sy(y){return kt(y)&&Dt(y)==IM}var Z1=Sy,RM=Object.prototype,DM=RM.hasOwnProperty,OM=RM.propertyIsEnumerable,LM=Z1(function(){return arguments}())?Z1:function(y){return kt(y)&&DM.call(y,"callee")&&!OM.call(y,"callee")},Q1=LM;function NM(){return!1}var FM=NM,J1=e&&!e.nodeType&&e,ex=J1&&!0&&t&&!t.nodeType&&t,BM=ex&&ex.exports===J1,tx=BM?Rt.Buffer:void 0,UM=tx?tx.isBuffer:void 0,zM=UM||FM,Tg=zM,VM="[object Arguments]",jM="[object Array]",HM="[object Boolean]",GM="[object Date]",WM="[object Error]",$M="[object Function]",KM="[object Map]",XM="[object Number]",qM="[object Object]",YM="[object RegExp]",ZM="[object Set]",ni="[object String]",QM="[object WeakMap]",JF="[object ArrayBuffer]",eB="[object DataView]",Ey="[object Float32Array]",nx="[object Float64Array]",rx="[object Int8Array]",Bp="[object Int16Array]",JM="[object Int32Array]",Cy="[object Uint8Array]",ek="[object Uint8ClampedArray]",ix="[object Uint16Array]",tB="[object Uint32Array]",qr={};qr[Ey]=qr[nx]=qr[rx]=qr[Bp]=qr[JM]=qr[Cy]=qr[ek]=qr[ix]=qr[tB]=!0,qr[VM]=qr[jM]=qr[JF]=qr[HM]=qr[eB]=qr[GM]=qr[WM]=qr[$M]=qr[KM]=qr[XM]=qr[qM]=qr[YM]=qr[ZM]=qr[ni]=qr[QM]=!1;function tk(y){return kt(y)&&K1(y.length)&&!!qr[Dt(y)]}var sx=tk;function nk(y){return function(T){return y(T)}}var ox=nk,ax=e&&!e.nodeType&&e,Up=ax&&!0&&t&&!t.nodeType&&t,rk=Up&&Up.exports===ax,lx=rk&&Ct.process,nB=function(){try{var y=Up&&Up.require&&Up.require("util").types;return y||lx&&lx.binding&&lx.binding("util")}catch{}}(),zc=nB,ux=zc&&zc.isTypedArray,ik=ux?ox(ux):sx,cx=ik,rB=Object.prototype,iB=rB.hasOwnProperty;function sk(y,T){var B=qe(y),Y=!B&&Q1(y),se=!B&&!Y&&Tg(y),me=!B&&!Y&&!se&&cx(y),Ie=B||Y||se||me,Ke=Ie?AM(y.length,String):[],Qe=Ke.length;for(var bt in y)(T||iB.call(y,bt))&&!(Ie&&(bt=="length"||se&&(bt=="offset"||bt=="parent")||me&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||vg(bt,Qe)))&&Ke.push(bt);return Ke}var dx=sk;function ok(y,T){return function(B){return y(T(B))}}var ak=ok,sB=ak(Object.keys,Object),Py=sB,hx=Object.prototype,oB=hx.hasOwnProperty;function lk(y){if(!xy(y))return Py(y);var T=[];for(var B in Object(y))oB.call(y,B)&&B!="constructor"&&T.push(B);return T}var uk=lk;function Ty(y){return kM(y)?dx(y):uk(y)}var Kd=Ty;function ck(y){var T=[];if(y!=null)for(var B in Object(y))T.push(B);return T}var zp=ck,My=Object.prototype,aB=My.hasOwnProperty;function dk(y){if(!Tt(y))return zp(y);var T=xy(y),B=[];for(var Y in y)Y=="constructor"&&(T||!aB.call(y,Y))||B.push(Y);return B}var lB=dk;function uB(y){return kM(y)?dx(y,!0):lB(y)}var ky=uB;function cB(y,T){for(var B=-1,Y=T.length,se=y.length;++B<Y;)y[se+B]=T[B];return y}var hk=cB,pk=ak(Object.getPrototypeOf,Object),Ay=pk,fk="[object Object]",mk=Function.prototype,dB=Object.prototype,gk=mk.toString,vk=dB.hasOwnProperty,yk=gk.call(Object);function bk(y){if(!kt(y)||Dt(y)!=fk)return!1;var T=Ay(y);if(T===null)return!0;var B=vk.call(T,"constructor")&&T.constructor;return typeof B=="function"&&B instanceof B&&gk.call(B)==yk}var hB=bk;function pB(y,T,B){var Y=-1,se=y.length;T<0&&(T=-T>se?0:se+T),B=B>se?se:B,B<0&&(B+=se),se=T>B?0:B-T>>>0,T>>>=0;for(var me=Array(se);++Y<se;)me[Y]=y[Y+T];return me}var px=pB;function _k(y,T,B){var Y=y.length;return B=B===void 0?Y:B,!T&&B>=Y?y:px(y,T,B)}var fB=_k,Vp="\\ud800-\\udfff",fx="\\u0300-\\u036f",mB="\\ufe20-\\ufe2f",gB="\\u20d0-\\u20ff",wk=fx+mB+gB,vB="\\ufe0e\\ufe0f",yB="\\u200d",Mg=RegExp("["+yB+Vp+wk+vB+"]");function Iy(y){return Mg.test(y)}var mx=Iy;function xk(y){return y.split("")}var Sk=xk,gx="\\ud800-\\udfff",bB="\\u0300-\\u036f",_B="\\ufe20-\\ufe2f",Ek="\\u20d0-\\u20ff",wB=bB+_B+Ek,xB="\\ufe0e\\ufe0f",Ck="["+gx+"]",vx="["+wB+"]",yx="\\ud83c[\\udffb-\\udfff]",Pk="(?:"+vx+"|"+yx+")",Tk="[^"+gx+"]",Xd="(?:\\ud83c[\\udde6-\\uddff]){2}",jp="[\\ud800-\\udbff][\\udc00-\\udfff]",Ry="\\u200d",bx=Pk+"?",qd="["+xB+"]?",_x="(?:"+Ry+"(?:"+[Tk,Xd,jp].join("|")+")"+qd+bx+")*",SB=qd+bx+_x,Mk="(?:"+[Tk+vx+"?",vx,Xd,jp,Ck].join("|")+")",EB=RegExp(yx+"(?="+yx+")|"+Mk+SB,"g");function CB(y){return y.match(EB)||[]}var kk=CB;function PB(y){return mx(y)?kk(y):Sk(y)}var TB=PB;function kg(y,T,B){return y===y&&(B!==void 0&&(y=y<=B?y:B),T!==void 0&&(y=y>=T?y:T)),y}var Dy=kg;function MB(y,T,B){return B===void 0&&(B=T,T=void 0),B!==void 0&&(B=te(B),B=B===B?B:0),T!==void 0&&(T=te(T),T=T===T?T:0),Dy(te(y),T,B)}var wx=MB;function kB(){this.__data__=new Bd,this.size=0}var AB=kB;function Ak(y){var T=this.__data__,B=T.delete(y);return this.size=T.size,B}var IB=Ak;function RB(y){return this.__data__.get(y)}var Ik=RB;function DB(y){return this.__data__.has(y)}var OB=DB,Rk=200;function LB(y,T){var B=this.__data__;if(B instanceof Bd){var Y=B.__data__;if(!Ud||Y.length<Rk-1)return Y.push([y,T]),this.size=++B.size,this;B=this.__data__=new Vd(Y)}return B.set(y,T),this.size=B.size,this}var Hp=LB;function Bl(y){var T=this.__data__=new Bd(y);this.size=T.size}Bl.prototype.clear=AB,Bl.prototype.delete=IB,Bl.prototype.get=Ik,Bl.prototype.has=OB,Bl.prototype.set=Hp;var Yd=Bl;function xx(y,T){return y&&Pg(T,Kd(T),y)}var Dk=xx;function Sx(y,T){return y&&Pg(T,ky(T),y)}var Ok=Sx,Lk=e&&!e.nodeType&&e,Ex=Lk&&!0&&t&&!t.nodeType&&t,Nk=Ex&&Ex.exports===Lk,Fk=Nk?Rt.Buffer:void 0,Cx=Fk?Fk.allocUnsafe:void 0;function Bk(y,T){if(T)return y.slice();var B=y.length,Y=Cx?Cx(B):new y.constructor(B);return y.copy(Y),Y}var Uk=Bk;function zk(y,T){for(var B=-1,Y=y==null?0:y.length,se=0,me=[];++B<Y;){var Ie=y[B];T(Ie,B,y)&&(me[se++]=Ie)}return me}var NB=zk;function FB(){return[]}var Ag=FB,Vk=Object.prototype,BB=Vk.propertyIsEnumerable,Ig=Object.getOwnPropertySymbols,Px=Ig?function(y){return y==null?[]:(y=Object(y),NB(Ig(y),function(T){return BB.call(y,T)}))}:Ag,Tx=Px;function jk(y,T){return Pg(y,Tx(y),T)}var Gp=jk,Rg=Object.getOwnPropertySymbols,UB=Rg?function(y){for(var T=[];y;)hk(T,Tx(y)),y=Ay(y);return T}:Ag,Dg=UB;function Mx(y,T){return Pg(y,Dg(y),T)}var zB=Mx;function Zd(y,T,B){var Y=T(y);return qe(y)?Y:hk(Y,B(y))}var Wp=Zd;function VB(y){return Wp(y,Kd,Tx)}var Og=VB;function Hk(y){return Wp(y,ky,Dg)}var jB=Hk,kx=nl(Rt,"DataView"),Oy=kx,HB=nl(Rt,"Promise"),Ly=HB,Gk=nl(Rt,"Set"),Ax=Gk,Ix="[object Map]",Wk="[object Object]",$k="[object Promise]",Kk="[object Set]",Rx="[object WeakMap]",Dx="[object DataView]",Xk=Wr(Oy),Ox=Wr(Ud),qk=Wr(Ly),Yk=Wr(Ax),Ny=Wr(Uc),Vc=Dt;(Oy&&Vc(new Oy(new ArrayBuffer(1)))!=Dx||Ud&&Vc(new Ud)!=Ix||Ly&&Vc(Ly.resolve())!=$k||Ax&&Vc(new Ax)!=Kk||Uc&&Vc(new Uc)!=Rx)&&(Vc=function(y){var T=Dt(y),B=T==Wk?y.constructor:void 0,Y=B?Wr(B):"";if(Y)switch(Y){case Xk:return Dx;case Ox:return Ix;case qk:return $k;case Yk:return Kk;case Ny:return Rx}return T});var Lg=Vc,Zk=Object.prototype,Qk=Zk.hasOwnProperty;function Jk(y){var T=y.length,B=new y.constructor(T);return T&&typeof y[0]=="string"&&Qk.call(y,"index")&&(B.index=y.index,B.input=y.input),B}var GB=Jk,WB=Rt.Uint8Array,Ng=WB;function $B(y){var T=new y.constructor(y.byteLength);return new Ng(T).set(new Ng(y)),T}var Lx=$B;function bi(y,T){var B=T?Lx(y.buffer):y.buffer;return new y.constructor(B,y.byteOffset,y.byteLength)}var Fy=bi,KB=/\w*$/;function eA(y){var T=new y.constructor(y.source,KB.exec(y));return T.lastIndex=y.lastIndex,T}var XB=eA,tA=Yt?Yt.prototype:void 0,Nx=tA?tA.valueOf:void 0;function qB(y){return Nx?Object(Nx.call(y)):{}}var YB=qB;function nA(y,T){var B=T?Lx(y.buffer):y.buffer;return new y.constructor(B,y.byteOffset,y.length)}var ZB=nA,QB="[object Boolean]",rA="[object Date]",JB="[object Map]",eU="[object Number]",iA="[object RegExp]",sA="[object Set]",tU="[object String]",$p="[object Symbol]",Fg="[object ArrayBuffer]",oA="[object DataView]",nU="[object Float32Array]",aA="[object Float64Array]",rU="[object Int8Array]",iU="[object Int16Array]",lA="[object Int32Array]",sU="[object Uint8Array]",uA="[object Uint8ClampedArray]",cA="[object Uint16Array]",Fx="[object Uint32Array]";function dA(y,T,B){var Y=y.constructor;switch(T){case Fg:return Lx(y);case QB:case rA:return new Y(+y);case oA:return Fy(y,B);case nU:case aA:case rU:case iU:case lA:case sU:case uA:case cA:case Fx:return ZB(y,B);case JB:return new Y;case eU:case tU:return new Y(y);case iA:return XB(y);case sA:return new Y;case $p:return YB(y)}}var hA=dA;function oU(y){return typeof y.constructor=="function"&&!xy(y)?CM(Ay(y)):{}}var aU=oU,pA="[object Map]";function lU(y){return kt(y)&&Lg(y)==pA}var uU=lU,By=zc&&zc.isMap,cU=By?ox(By):uU,fA=cU,Uy="[object Set]";function dU(y){return kt(y)&&Lg(y)==Uy}var mA=dU,Bg=zc&&zc.isSet,hU=Bg?ox(Bg):mA,gA=hU,Qd=1,vA=2,Bx=4,Ux="[object Arguments]",zx="[object Array]",Vx="[object Boolean]",jx="[object Date]",Hx="[object Error]",Gx="[object Function]",yA="[object GeneratorFunction]",bA="[object Map]",_A="[object Number]",Wx="[object Object]",jc="[object RegExp]",$x="[object Set]",pU="[object String]",wA="[object Symbol]",Kx="[object WeakMap]",fU="[object ArrayBuffer]",mU="[object DataView]",xA="[object Float32Array]",SA="[object Float64Array]",gU="[object Int8Array]",vU="[object Int16Array]",EA="[object Int32Array]",yU="[object Uint8Array]",zy="[object Uint8ClampedArray]",Xx="[object Uint16Array]",CA="[object Uint32Array]",ri={};ri[Ux]=ri[zx]=ri[fU]=ri[mU]=ri[Vx]=ri[jx]=ri[xA]=ri[SA]=ri[gU]=ri[vU]=ri[EA]=ri[bA]=ri[_A]=ri[Wx]=ri[jc]=ri[$x]=ri[pU]=ri[wA]=ri[yU]=ri[zy]=ri[Xx]=ri[CA]=!0,ri[Hx]=ri[Gx]=ri[Kx]=!1;function Ug(y,T,B,Y,se,me){var Ie,Ke=T&Qd,Qe=T&vA,bt=T&Bx;if(B&&(Ie=se?B(y,Y,se,me):B(y)),Ie!==void 0)return Ie;if(!Tt(y))return y;var ae=qe(y);if(ae){if(Ie=GB(y),!Ke)return QF(y,Ie)}else{var ze=Lg(y),Zt=ze==Gx||ze==yA;if(Tg(y))return Uk(y,Ke);if(ze==Wx||ze==Ux||Zt&&!se){if(Ie=Qe||Zt?{}:aU(y),!Ke)return Qe?zB(y,Ok(Ie,y)):Gp(y,Dk(Ie,y))}else{if(!ri[ze])return se?y:{};Ie=hA(y,ze,Ke)}}me||(me=new Yd);var kn=me.get(y);if(kn)return kn;me.set(y,Ie),gA(y)?y.forEach(function(ir){Ie.add(Ug(ir,T,B,ir,y,me))}):fA(y)&&y.forEach(function(ir,Qn){Ie.set(Qn,Ug(ir,T,B,Qn,y,me))});var pn=bt?Qe?jB:Og:Qe?ky:Kd,rr=ae?void 0:pn(y);return PM(rr||y,function(ir,Qn){rr&&(Qn=ir,ir=y[Qn]),Ap(Ie,Qn,Ug(ir,T,B,Qn,y,me))}),Ie}var bU=Ug,_U=1,qx=4;function PA(y){return bU(y,_U|qx)}var wU=PA,TA="__lodash_hash_undefined__";function MA(y){return this.__data__.set(y,TA),this}var Yx=MA;function kA(y){return this.__data__.has(y)}var xU=kA;function zg(y){var T=-1,B=y==null?0:y.length;for(this.__data__=new Vd;++T<B;)this.add(y[T])}zg.prototype.add=zg.prototype.push=Yx,zg.prototype.has=xU;var SU=zg;function EU(y,T){for(var B=-1,Y=y==null?0:y.length;++B<Y;)if(T(y[B],B,y))return!0;return!1}var Vy=EU;function Zx(y,T){return y.has(T)}var CU=Zx,AA=1,IA=2;function RA(y,T,B,Y,se,me){var Ie=B&AA,Ke=y.length,Qe=T.length;if(Ke!=Qe&&!(Ie&&Qe>Ke))return!1;var bt=me.get(y),ae=me.get(T);if(bt&&ae)return bt==T&&ae==y;var ze=-1,Zt=!0,kn=B&IA?new SU:void 0;for(me.set(y,T),me.set(T,y);++ze<Ke;){var pn=y[ze],rr=T[ze];if(Y)var ir=Ie?Y(rr,pn,ze,T,y,me):Y(pn,rr,ze,y,T,me);if(ir!==void 0){if(ir)continue;Zt=!1;break}if(kn){if(!Vy(T,function(Qn,Mr){if(!CU(kn,Mr)&&(pn===Qn||se(pn,Qn,B,Y,me)))return kn.push(Mr)})){Zt=!1;break}}else if(!(pn===rr||se(pn,rr,B,Y,me))){Zt=!1;break}}return me.delete(y),me.delete(T),Zt}var Qx=RA;function DA(y){var T=-1,B=Array(y.size);return y.forEach(function(Y,se){B[++T]=[se,Y]}),B}var OA=DA;function LA(y){var T=-1,B=Array(y.size);return y.forEach(function(Y){B[++T]=Y}),B}var NA=LA,FA=1,BA=2,UA="[object Boolean]",zA="[object Date]",VA="[object Error]",Jx="[object Map]",jy="[object Number]",jA="[object RegExp]",PU="[object Set]",TU="[object String]",HA="[object Symbol]",GA="[object ArrayBuffer]",WA="[object DataView]",eS=Yt?Yt.prototype:void 0,tS=eS?eS.valueOf:void 0;function MU(y,T,B,Y,se,me,Ie){switch(B){case WA:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case GA:return!(y.byteLength!=T.byteLength||!me(new Ng(y),new Ng(T)));case UA:case zA:case jy:return oo(+y,+T);case VA:return y.name==T.name&&y.message==T.message;case jA:case TU:return y==T+"";case Jx:var Ke=OA;case PU:var Qe=Y&FA;if(Ke||(Ke=NA),y.size!=T.size&&!Qe)return!1;var bt=Ie.get(y);if(bt)return bt==T;Y|=BA,Ie.set(y,T);var ae=Qx(Ke(y),Ke(T),Y,se,me,Ie);return Ie.delete(y),ae;case HA:if(tS)return tS.call(y)==tS.call(T)}return!1}var $A=MU,nS=1,rS=Object.prototype,Vg=rS.hasOwnProperty;function KA(y,T,B,Y,se,me){var Ie=B&nS,Ke=Og(y),Qe=Ke.length,bt=Og(T),ae=bt.length;if(Qe!=ae&&!Ie)return!1;for(var ze=Qe;ze--;){var Zt=Ke[ze];if(!(Ie?Zt in T:Vg.call(T,Zt)))return!1}var kn=me.get(y),pn=me.get(T);if(kn&&pn)return kn==T&&pn==y;var rr=!0;me.set(y,T),me.set(T,y);for(var ir=Ie;++ze<Qe;){Zt=Ke[ze];var Qn=y[Zt],Mr=T[Zt];if(Y)var Ws=Ie?Y(Mr,Qn,Zt,T,y,me):Y(Qn,Mr,Zt,y,T,me);if(!(Ws===void 0?Qn===Mr||se(Qn,Mr,B,Y,me):Ws)){rr=!1;break}ir||(ir=Zt=="constructor")}if(rr&&!ir){var $s=y.constructor,Ks=T.constructor;$s!=Ks&&"constructor"in y&&"constructor"in T&&!(typeof $s=="function"&&$s instanceof $s&&typeof Ks=="function"&&Ks instanceof Ks)&&(rr=!1)}return me.delete(y),me.delete(T),rr}var iS=KA,XA=1,qA="[object Arguments]",sS="[object Array]",Kp="[object Object]",YA=Object.prototype,ZA=YA.hasOwnProperty;function QA(y,T,B,Y,se,me){var Ie=qe(y),Ke=qe(T),Qe=Ie?sS:Lg(y),bt=Ke?sS:Lg(T);Qe=Qe==qA?Kp:Qe,bt=bt==qA?Kp:bt;var ae=Qe==Kp,ze=bt==Kp,Zt=Qe==bt;if(Zt&&Tg(y)){if(!Tg(T))return!1;Ie=!0,ae=!1}if(Zt&&!ae)return me||(me=new Yd),Ie||cx(y)?Qx(y,T,B,Y,se,me):$A(y,T,Qe,B,Y,se,me);if(!(B&XA)){var kn=ae&&ZA.call(y,"__wrapped__"),pn=ze&&ZA.call(T,"__wrapped__");if(kn||pn){var rr=kn?y.value():y,ir=pn?T.value():T;return me||(me=new Yd),se(rr,ir,B,Y,me)}}return Zt?(me||(me=new Yd),iS(y,T,B,Y,se,me)):!1}var JA=QA;function oS(y,T,B,Y,se){return y===T?!0:y==null||T==null||!kt(y)&&!kt(T)?y!==y&&T!==T:JA(y,T,B,Y,oS,se)}var e2=oS,kU=1,aS=2;function t2(y,T,B,Y){var se=B.length,me=se,Ie=!Y;if(y==null)return!me;for(y=Object(y);se--;){var Ke=B[se];if(Ie&&Ke[2]?Ke[1]!==y[Ke[0]]:!(Ke[0]in y))return!1}for(;++se<me;){Ke=B[se];var Qe=Ke[0],bt=y[Qe],ae=Ke[1];if(Ie&&Ke[2]){if(bt===void 0&&!(Qe in y))return!1}else{var ze=new Yd;if(Y)var Zt=Y(bt,ae,Qe,y,T,ze);if(!(Zt===void 0?e2(ae,bt,kU|aS,Y,ze):Zt))return!1}}return!0}var AU=t2;function n2(y){return y===y&&!Tt(y)}var r2=n2;function IU(y){for(var T=Kd(y),B=T.length;B--;){var Y=T[B],se=y[Y];T[B]=[Y,se,r2(se)]}return T}var lS=IU;function i2(y,T){return function(B){return B==null?!1:B[y]===T&&(T!==void 0||y in Object(B))}}var s2=i2;function o2(y){var T=lS(y);return T.length==1&&T[0][2]?s2(T[0][0],T[0][1]):function(B){return B===y||AU(B,y,T)}}var RU=o2;function DU(y,T){return y!=null&&T in Object(y)}var a2=DU;function OU(y,T,B){T=Lc(T,y);for(var Y=-1,se=T.length,me=!1;++Y<se;){var Ie=Oa(T[Y]);if(!(me=y!=null&&B(y,Ie)))break;y=y[Ie]}return me||++Y!=se?me:(se=y==null?0:y.length,!!se&&K1(se)&&vg(Ie,se)&&(qe(y)||Q1(y)))}var LU=OU;function l2(y,T){return y!=null&&LU(y,T,a2)}var NU=l2,FU=1,u2=2;function BU(y,T){return sr(y)&&r2(T)?s2(Oa(y),T):function(B){var Y=Ll(B,y);return Y===void 0&&Y===T?NU(B,y):e2(T,Y,FU|u2)}}var UU=BU;function c2(y){return function(T){return T==null?void 0:T[y]}}var uS=c2;function d2(y){return function(T){return Hd(T,y)}}var zU=d2;function VU(y){return sr(y)?uS(Oa(y)):zU(y)}var h2=VU;function jU(y){return typeof y=="function"?y:y==null?_y:typeof y=="object"?qe(y)?UU(y[0],y[1]):RU(y):h2(y)}var HU=jU;function p2(y){return function(T,B,Y){for(var se=-1,me=Object(T),Ie=Y(T),Ke=Ie.length;Ke--;){var Qe=Ie[y?Ke:++se];if(B(me[Qe],Qe,me)===!1)break}return T}}var GU=p2,WU=GU(),f2=WU;function $U(y,T){return y&&f2(y,T,Kd)}var KU=$U,Xp=function(){return Rt.Date.now()},Jd=Xp,XU="Expected a function",m2=Math.max,qU=Math.min;function YU(y,T,B){var Y,se,me,Ie,Ke,Qe,bt=0,ae=!1,ze=!1,Zt=!0;if(typeof y!="function")throw new TypeError(XU);T=te(T)||0,Tt(B)&&(ae=!!B.leading,ze="maxWait"in B,me=ze?m2(te(B.maxWait)||0,T):me,Zt="trailing"in B?!!B.trailing:Zt);function kn(Yr){var Xs=Y,aa=se;return Y=se=void 0,bt=Yr,Ie=y.apply(aa,Xs),Ie}function pn(Yr){return bt=Yr,Ke=setTimeout(Qn,T),ae?kn(Yr):Ie}function rr(Yr){var Xs=Yr-Qe,aa=Yr-bt,Vl=T-Xs;return ze?qU(Vl,me-aa):Vl}function ir(Yr){var Xs=Yr-Qe,aa=Yr-bt;return Qe===void 0||Xs>=T||Xs<0||ze&&aa>=me}function Qn(){var Yr=Jd();if(ir(Yr))return Mr(Yr);Ke=setTimeout(Qn,rr(Yr))}function Mr(Yr){return Ke=void 0,Zt&&Y?kn(Yr):(Y=se=void 0,Ie)}function Ws(){Ke!==void 0&&clearTimeout(Ke),bt=0,Y=Qe=se=Ke=void 0}function $s(){return Ke===void 0?Ie:Mr(Jd())}function Ks(){var Yr=Jd(),Xs=ir(Yr);if(Y=arguments,se=this,Qe=Yr,Xs){if(Ke===void 0)return pn(Qe);if(ze)return clearTimeout(Ke),Ke=setTimeout(Qn,T),kn(Qe)}return Ke===void 0&&(Ke=setTimeout(Qn,T)),Ie}return Ks.cancel=Ws,Ks.flush=$s,Ks}var g2=YU;function ZU(y){var T=y==null?0:y.length;return T?y[T-1]:void 0}var v2=ZU;function y2(y,T){return T.length<2?y:Hd(y,px(T,0,-1))}var QU=y2;function JU(y){return typeof y=="number"&&y==_s(y)}var cS=JU;function b2(y,T){var B={};return T=HU(T),KU(y,function(Y,se,me){Iu(B,se,T(Y,se,me))}),B}var e5=b2;function _2(y,T){return T=Lc(T,y),y=QU(y,T),y==null||delete y[Oa(v2(T))]}var t5=_2,w2=9007199254740991,dS=Math.floor;function x2(y,T){var B="";if(!y||T<1||T>w2)return B;do T%2&&(B+=y),T=dS(T/2),T&&(y+=y);while(T);return B}var S2=x2,E2=uS("length"),n5=E2,C2="\\ud800-\\udfff",P2="\\u0300-\\u036f",r5="\\ufe20-\\ufe2f",T2="\\u20d0-\\u20ff",Hy=P2+r5+T2,i5="\\ufe0e\\ufe0f",s5="["+C2+"]",Gy="["+Hy+"]",Wy="\\ud83c[\\udffb-\\udfff]",M2="(?:"+Gy+"|"+Wy+")",$y="[^"+C2+"]",hS="(?:\\ud83c[\\udde6-\\uddff]){2}",k2="[\\ud800-\\udbff][\\udc00-\\udfff]",A2="\\u200d",I2=M2+"?",R2="["+i5+"]?",eh="(?:"+A2+"(?:"+[$y,hS,k2].join("|")+")"+R2+I2+")*",Ky=R2+I2+eh,o5="(?:"+[$y+Gy+"?",Gy,hS,k2,s5].join("|")+")",pS=RegExp(Wy+"(?="+Wy+")|"+o5+Ky,"g");function fS(y){for(var T=pS.lastIndex=0;pS.test(y);)++T;return T}var a5=fS;function l5(y){return mx(y)?a5(y):n5(y)}var mS=l5,D2=Math.ceil;function O2(y,T){T=T===void 0?" ":py(T);var B=T.length;if(B<2)return B?S2(T,y):T;var Y=S2(T,D2(y/mS(T)));return mx(T)?fB(TB(Y),0,y).join(""):Y.slice(0,y)}var u5=O2;function c5(y,T,B){y=fg(y),T=_s(T);var Y=T?mS(y):0;return T&&Y<T?u5(T-Y,B)+y:y}var qp=c5;function d5(y,T){return y==null?!0:t5(y,T)}var L2=d5,N2=5*1e3,F2=class{constructor(y){Q(this,"_cache",new Au),Q(this,"_keepHotUntapDebounce"),it(this,y)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Te(this).propsP}get sheet(){return Te(this).sheet.publicApi}get project(){return Te(this).sheet.project.publicApi}get address(){return D({},Te(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const y=Te(this);return(0,Sg.prism)(()=>(0,Sg.val)(y.getValues().getValue()))})}onValuesChange(y,T){return mb(this._valuesPrism(),y,T)}get value(){const y=this._valuesPrism();{if(!y.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const T=y.keepHot();this._keepHotUntapDebounce=g2(()=>{T(),this._keepHotUntapDebounce=void 0},N2)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return y.getValue()}set initialValue(y){Te(this).setInitialValue(y)}};function B2(y){const T=new WeakMap;return B=>(T.has(B)||T.set(B,y(B)),T.get(B))}function Xy(y){return y.type==="compound"||y.type==="enum"}function gS(y,T){if(!y)return;const[B,...Y]=T;if(B===void 0)return y;if(!Xy(y))return;const se=y.type==="enum"?y.cases[B]:y.props[B];return gS(se,Y)}function vS(y){return!Xy(y)}var h5=class{constructor(y,T,B){this.sheet=y,this.template=T,this.nativeObject=B,Q(this,"$$isPointerToPrismProvider",!0),Q(this,"address"),Q(this,"publicApi"),Q(this,"_initialValue",new Ur.Atom({})),Q(this,"_cache",new Au),Q(this,"_logger"),Q(this,"_internalUtilCtx"),this._logger=y._logger.named("SheetObject",T.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=G(D({},T.address),{sheetInstanceId:y.address.sheetInstanceId}),this.publicApi=new F2(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,Ur.prism)(()=>{const y=(0,Ur.val)(this.template.getDefaultValues()),T=(0,Ur.val)(this._initialValue.pointer),B=Ur.prism.memo("withInitialCache",()=>new WeakMap,[]),Y=Fl(y,T,B),se=(0,Ur.val)(this.template.getStaticValues()),me=Ur.prism.memo("withStatics",()=>new WeakMap,[]);let Ke=Fl(Y,se,me),Qe;{const ae=Ur.prism.memo("seq",()=>this.getSequencedValues(),[]),ze=Ur.prism.memo("withSeqsCache",()=>new WeakMap,[]);Qe=(0,Ur.val)((0,Ur.val)(ae)),Ke=Fl(Ke,Qe,ze)}return xg("finalAtom",Ke).pointer}))}getValueByPointer(y){const T=(0,Ur.val)(this.getValues()),{path:B}=(0,Ur.getPointerParts)(y);return(0,Ur.val)(Wd(T,B))}pointerToPrism(y){const{path:T}=(0,Ur.getPointerParts)(y);return(0,Ur.prism)(()=>{const B=(0,Ur.val)(this.getValues());return(0,Ur.val)(Wd(B,T))})}getSequencedValues(){return(0,Ur.prism)(()=>{const y=Ur.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),T=(0,Ur.val)(y),B=new Ur.Atom({}),Y=(0,Ur.val)(this.template.configPointer);return Ur.prism.effect("processTracks",()=>{const se=[];for(const{trackId:me,pathToProp:Ie}of T){const Ke=this._trackIdToPrism(me),Qe=gS(Y,Ie),bt=Qe.deserializeAndSanitize,ae=Qe.interpolate,ze=()=>{const kn=Ke.getValue();if(!kn)return B.setByPointer(Mr=>Wd(Mr,Ie),void 0);const pn=bt(kn.left),rr=pn===void 0?Qe.default:pn;if(kn.right===void 0)return B.setByPointer(Mr=>Wd(Mr,Ie),rr);const ir=bt(kn.right),Qn=ir===void 0?Qe.default:ir;return B.setByPointer(Mr=>Wd(Mr,Ie),ae(rr,Qn,kn.progression))},Zt=Ke.onStale(ze);ze(),se.push(Zt)}return()=>{for(const me of se)me()}},[Y,...T]),B.pointer})}_trackIdToPrism(y){const T=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[y],B=this.sheet.getSequence().positionPrism;return B1(this._internalUtilCtx,T,B)}get propsP(){return this._cache.get("propsP",()=>(0,Ur.pointer)({root:this,path:[]}))}validateValue(y,T){}setInitialValue(y){this.validateValue(this.propsP,y),this._initialValue.set(y)}};function ii(y){return function(B,Y){return y(B,Y())}}var Io={_hmm:sa(524),_todo:sa(522),_error:sa(521),errorDev:sa(529),errorPublic:sa(545),_kapow:sa(268),_warn:sa(265),warnDev:sa(273),warnPublic:sa(289),_debug:sa(137),debugDev:sa(145),_trace:sa(73),traceDev:sa(81)};function sa(y){return Object.freeze({audience:Hc(y,8)?"internal":Hc(y,16)?"dev":"public",category:Hc(y,4)?"troubleshooting":Hc(y,2)?"todo":"general",level:Hc(y,512)?512:Hc(y,256)?256:Hc(y,128)?128:64})}function Hc(y,T){return(y&T)===T}function zr(y,T){return((T&32)===32?!0:(T&16)===16?y.dev:(T&8)===8?y.internal:!1)&&y.min<=T}var Ru={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(y,T,B){return this.create({names:[...y.names,{name:T,key:B}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(y){if(y.length<5)return y;const T=y.replace(this.collapseOnRE,"");return this.cssMemo.has(T)||this.cssMemo.set(T,this.css(y)),T},css(y){var T,B,Y,se;const me=this.cssMemo.get(y);if(me)return me;let Ie="color:".concat((B=(T=this.color)==null?void 0:T.call(this,y))!=null?B:"hsl(".concat((y.charCodeAt(0)+y.charCodeAt(y.length-1))%360,", 100%, 60%)"));return(Y=this.bold)!=null&&Y.test(y)&&(Ie+=";font-weight:600"),(se=this.italic)!=null&&se.test(y)&&(Ie+=";font-style:italic"),this.cssMemo.set(y,Ie),Ie}}};function U2(y=console,T={}){const B=G(D({},Ru),{includes:D({},Ru.includes)}),Y={styled:p5.bind(B,y),noStyle:f5.bind(B,y)},se=z2.bind(B);function me(){return B.loggingConsoleStyle&&B.loggerConsoleStyle?Y.styled:Y.noStyle}return B.create=me(),{configureLogger(Ie){var Ke;Ie==="console"?(B.loggerConsoleStyle=Ru.loggerConsoleStyle,B.create=me()):Ie.type==="console"?(B.loggerConsoleStyle=(Ke=Ie.style)!=null?Ke:Ru.loggerConsoleStyle,B.create=me()):Ie.type==="keyed"?(B.creatExt=Qe=>Ie.keyed(Qe.names),B.create=se):Ie.type==="named"&&(B.creatExt=th.bind(null,Ie.named),B.create=se)},configureLogging(Ie){var Ke,Qe,bt,ae,ze;B.includes.dev=(Ke=Ie.dev)!=null?Ke:Ru.includes.dev,B.includes.internal=(Qe=Ie.internal)!=null?Qe:Ru.includes.internal,B.includes.min=(bt=Ie.min)!=null?bt:Ru.includes.min,B.include=(ae=Ie.include)!=null?ae:Ru.include,B.loggingConsoleStyle=(ze=Ie.consoleStyle)!=null?ze:Ru.loggingConsoleStyle,B.create=me()},getLogger(){return B.create({names:[]})}}}function th(y,T){const B=[];for(let{name:Y,key:se}of T.names)B.push(se==null?Y:"".concat(Y," (").concat(se,")"));return y(B)}function z2(y){const T=D(D({},this.includes),this.include(y)),B=this.filtered,Y=this.named.bind(this,y),se=this.creatExt(y),me=zr(T,524),Ie=zr(T,522),Ke=zr(T,521),Qe=zr(T,529),bt=zr(T,545),ae=zr(T,265),ze=zr(T,268),Zt=zr(T,273),kn=zr(T,289),pn=zr(T,137),rr=zr(T,145),ir=zr(T,73),Qn=zr(T,81),Mr=me?se.error.bind(se,Io._hmm):B.bind(y,524),Ws=Ie?se.error.bind(se,Io._todo):B.bind(y,522),$s=Ke?se.error.bind(se,Io._error):B.bind(y,521),Ks=Qe?se.error.bind(se,Io.errorDev):B.bind(y,529),Yr=bt?se.error.bind(se,Io.errorPublic):B.bind(y,545),Xs=ze?se.warn.bind(se,Io._kapow):B.bind(y,268),aa=ae?se.warn.bind(se,Io._warn):B.bind(y,265),Vl=Zt?se.warn.bind(se,Io.warnDev):B.bind(y,273),jl=kn?se.warn.bind(se,Io.warnPublic):B.bind(y,273),lh=pn?se.debug.bind(se,Io._debug):B.bind(y,137),zu=rr?se.debug.bind(se,Io.debugDev):B.bind(y,145),uh=ir?se.trace.bind(se,Io._trace):B.bind(y,73),ch=Qn?se.trace.bind(se,Io.traceDev):B.bind(y,81),Qi={_hmm:Mr,_todo:Ws,_error:$s,errorDev:Ks,errorPublic:Yr,_kapow:Xs,_warn:aa,warnDev:Vl,warnPublic:jl,_debug:lh,debugDev:zu,_trace:uh,traceDev:ch,lazy:{_hmm:me?ii(Mr):Mr,_todo:Ie?ii(Ws):Ws,_error:Ke?ii($s):$s,errorDev:Qe?ii(Ks):Ks,errorPublic:bt?ii(Yr):Yr,_kapow:ze?ii(Xs):Xs,_warn:ae?ii(aa):aa,warnDev:Zt?ii(Vl):Vl,warnPublic:kn?ii(jl):jl,_debug:pn?ii(lh):lh,debugDev:rr?ii(zu):zu,_trace:ir?ii(uh):uh,traceDev:Qn?ii(ch):ch},named:Y,utilFor:{internal(){return{debug:Qi._debug,error:Qi._error,warn:Qi._warn,trace:Qi._trace,named(la,si){return Qi.named(la,si).utilFor.internal()}}},dev(){return{debug:Qi.debugDev,error:Qi.errorDev,warn:Qi.warnDev,trace:Qi.traceDev,named(la,si){return Qi.named(la,si).utilFor.dev()}}},public(){return{error:Qi.errorPublic,warn:Qi.warnPublic,debug(la,si){Qi._warn('(public "debug" filtered out) '.concat(la),si)},trace(la,si){Qi._warn('(public "trace" filtered out) '.concat(la),si)},named(la,si){return Qi.named(la,si).utilFor.public()}}}}};return Qi}function p5(y,T){const B=D(D({},this.includes),this.include(T)),Y=[];let se="";for(let Qe=0;Qe<T.names.length;Qe++){const{name:bt,key:ae}=T.names[Qe];if(se+=" %c".concat(bt),Y.push(this.style.css(bt)),ae!=null){const ze="%c#".concat(ae);se+=ze,Y.push(this.style.css(ze))}}const me=this.filtered,Ie=this.named.bind(this,T),Ke=[se,...Y];return j2(me,T,B,y,Ke,V2(Ke),Ie)}function V2(y){const T=y.slice(0);for(let B=1;B<T.length;B++)T[B]+=";background-color:#e0005a;padding:2px;color:white";return T}function f5(y,T){const B=D(D({},this.includes),this.include(T));let Y="";for(let Ke=0;Ke<T.names.length;Ke++){const{name:Qe,key:bt}=T.names[Ke];Y+=" ".concat(Qe),bt!=null&&(Y+="#".concat(bt))}const se=this.filtered,me=this.named.bind(this,T),Ie=[Y];return j2(se,T,B,y,Ie,Ie,me)}function j2(y,T,B,Y,se,me,Ie){const Ke=zr(B,524),Qe=zr(B,522),bt=zr(B,521),ae=zr(B,529),ze=zr(B,545),Zt=zr(B,265),kn=zr(B,268),pn=zr(B,273),rr=zr(B,289),ir=zr(B,137),Qn=zr(B,145),Mr=zr(B,73),Ws=zr(B,81),$s=Ke?Y.error.bind(Y,...se):y.bind(T,524),Ks=Qe?Y.error.bind(Y,...se):y.bind(T,522),Yr=bt?Y.error.bind(Y,...se):y.bind(T,521),Xs=ae?Y.error.bind(Y,...se):y.bind(T,529),aa=ze?Y.error.bind(Y,...se):y.bind(T,545),Vl=kn?Y.warn.bind(Y,...me):y.bind(T,268),jl=Zt?Y.warn.bind(Y,...se):y.bind(T,265),lh=pn?Y.warn.bind(Y,...se):y.bind(T,273),zu=rr?Y.warn.bind(Y,...se):y.bind(T,273),uh=ir?Y.info.bind(Y,...se):y.bind(T,137),ch=Qn?Y.info.bind(Y,...se):y.bind(T,145),Qi=Mr?Y.debug.bind(Y,...se):y.bind(T,73),la=Ws?Y.debug.bind(Y,...se):y.bind(T,81),si={_hmm:$s,_todo:Ks,_error:Yr,errorDev:Xs,errorPublic:aa,_kapow:Vl,_warn:jl,warnDev:lh,warnPublic:zu,_debug:uh,debugDev:ch,_trace:Qi,traceDev:la,lazy:{_hmm:Ke?ii($s):$s,_todo:Qe?ii(Ks):Ks,_error:bt?ii(Yr):Yr,errorDev:ae?ii(Xs):Xs,errorPublic:ze?ii(aa):aa,_kapow:kn?ii(Vl):Vl,_warn:Zt?ii(jl):jl,warnDev:pn?ii(lh):lh,warnPublic:rr?ii(zu):zu,_debug:ir?ii(uh):uh,debugDev:Qn?ii(ch):ch,_trace:Mr?ii(Qi):Qi,traceDev:Ws?ii(la):la},named:Ie,utilFor:{internal(){return{debug:si._debug,error:si._error,warn:si._warn,trace:si._trace,named(Hl,sl){return si.named(Hl,sl).utilFor.internal()}}},dev(){return{debug:si.debugDev,error:si.errorDev,warn:si.warnDev,trace:si.traceDev,named(Hl,sl){return si.named(Hl,sl).utilFor.dev()}}},public(){return{error:si.errorPublic,warn:si.warnPublic,debug(Hl,sl){si._warn('(public "debug" filtered out) '.concat(Hl),sl)},trace(Hl,sl){si._warn('(public "trace" filtered out) '.concat(Hl),sl)},named(Hl,sl){return si.named(Hl,sl).utilFor.public()}}}}};return si}var yS=U2(console,{_debug:function(){},_error:function(){}});yS.configureLogging({dev:!0,min:64});var qy=yS.getLogger().named("Theatre.js (default logger)").utilFor.dev(),H2=new WeakMap;function G2(y){const T=H2.get(y);if(T)return T;const B=new Map;return H2.set(y,B),W2([],y,B),B}function W2(y,T,B){for(const[Y,se]of Object.entries(T.props))if(!Xy(se)){const me=[...y,Y];B.set(JSON.stringify(me),B.size),$2(me,se,B)}for(const[Y,se]of Object.entries(T.props))if(Xy(se)){const me=[...y,Y];B.set(JSON.stringify(me),B.size),$2(me,se,B)}}function $2(y,T,B){if(T.type==="compound")W2(y,T,B);else{if(T.type==="enum")throw new Error("Enums aren't supported yet");B.set(JSON.stringify(y),B.size)}}function bS(y){return typeof y=="object"&&y!==null&&Object.keys(y).length===0}var m5=class{constructor(y,T,B,Y,se){this.sheetTemplate=y,Q(this,"address"),Q(this,"type","Theatre_SheetObjectTemplate"),Q(this,"_config"),Q(this,"_temp_actions_atom"),Q(this,"_cache",new Au),Q(this,"project"),Q(this,"pointerToSheetState"),Q(this,"pointerToStaticOverrides"),this.address=G(D({},y.address),{objectKey:T}),this._config=new as.Atom(Y),this._temp_actions_atom=new as.Atom(se),this.project=y.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(y,T,B){return this._config.set(B),new h5(y,this,T)}reconfigure(y){this._config.set(y)}_temp_setActions(y){this._temp_actions_atom.set(y)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,as.prism)(()=>{const y=(0,as.val)(this.configPointer);return F1(y)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,as.prism)(()=>{var y;const T=(y=(0,as.val)(this.pointerToStaticOverrides))!=null?y:{};return(0,as.val)(this.configPointer).deserializeAndSanitize(T)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,as.prism)(()=>{const y=this.project.pointers.historic.sheetsById[this.address.sheetId],T=(0,as.val)(y.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!T)return Ne;const B=[];if(!T)return Ne;const Y=(0,as.val)(this.configPointer),se=Object.entries(T);for(const[Ie,Ke]of se){const Qe=g5(Ie);if(!Qe)continue;const bt=gS(Y,Qe);bt&&vS(bt)&&B.push({pathToProp:Qe,trackId:Ke})}const me=G2(Y);return B.sort((Ie,Ke)=>{const Qe=Ie.pathToProp,bt=Ke.pathToProp,ae=me.get(JSON.stringify(Qe)),ze=me.get(JSON.stringify(bt));return ae>ze?1:-1}),B.length===0?Ne:B}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,as.prism)(()=>{const y=(0,as.val)(this.getArrayOfValidSequenceTracks());let T={};for(const{pathToProp:B,trackId:Y}of y)Rp(T,B,Y);return T}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,as.prism)(()=>{const y=(0,as.val)(this.getStaticValues()),T=(0,as.val)(this.getArrayOfValidSequenceTracks()),B=wU(y);for(const{pathToProp:Y}of T){L2(B,Y);let se=Y.slice(0,-1);for(;se.length>0;){const me=mg(B,se);if(!bS(me))break;L2(B,se),se=se.slice(0,-1)}}if(!bS(B))return B}))}getDefaultsAtPointer(y){const{path:T}=(0,as.getPointerParts)(y),B=this.getDefaultValues().getValue();return mg(B,T)}};function g5(y){try{return JSON.parse(y)}catch{qy.warn("property ".concat(JSON.stringify(y)," cannot be parsed. Skipping."));return}}var _S=Ft,v5=B2(y=>JSON.stringify(y));P(ie());var y5=class extends Error{},Yp=class extends y5{},K2=Ft,b5=Ft,X2=Ft,cs=Ft;function Du(){let y,T;const B=new Promise((se,me)=>{y=Ie=>{se(Ie),Y.status="resolved"},T=Ie=>{me(Ie),Y.status="rejected"}}),Y={resolve:y,reject:T,promise:B,status:"pending"};return Y}var _5=()=>{},Yy=_5,q2=Ft,w5=class{constructor(){Q(this,"_stopPlayCallback",Yy),Q(this,"_state",new q2.Atom({position:0,playing:!1})),Q(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=Yy}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.setByPointer(T=>T.position,y)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(y){this._state.setByPointer(T=>T.playing,y)}play(y,T,B,Y,se){this.playing&&this.pause(),this.playing=!0;const me=T[1]-T[0];{const Zt=this.getCurrentPosition();Zt<T[0]||Zt>T[1]?Y==="normal"||Y==="alternate"?this._updatePositionInState(T[0]):(Y==="reverse"||Y==="alternateReverse")&&this._updatePositionInState(T[1]):Y==="normal"||Y==="alternate"?Zt===T[1]&&this._updatePositionInState(T[0]):Zt===T[0]&&this._updatePositionInState(T[1])}const Ie=Du(),Ke=se.time,Qe=me*y;let bt=this.getCurrentPosition()-T[0];(Y==="reverse"||Y==="alternateReverse")&&(bt=T[1]-this.getCurrentPosition());const ae=Zt=>{const pn=Math.max(Zt-Ke,0)/1e3,rr=Math.min(pn*B+bt,Qe);if(rr!==Qe){const ir=Math.floor(rr/me);let Qn=rr/me%1*me;if(Y!=="normal")if(Y==="reverse")Qn=me-Qn;else{const Mr=ir%2===0;Y==="alternate"?Mr||(Qn=me-Qn):Mr&&(Qn=me-Qn)}this._updatePositionInState(Qn+T[0]),ze()}else{if(Y==="normal")this._updatePositionInState(T[1]);else if(Y==="reverse")this._updatePositionInState(T[0]);else{const ir=(y-1)%2===0;Y==="alternate"?ir?this._updatePositionInState(T[1]):this._updatePositionInState(T[0]):ir?this._updatePositionInState(T[0]):this._updatePositionInState(T[1])}this.playing=!1,Ie.resolve(!0)}};this._stopPlayCallback=()=>{se.offThisOrNextTick(ae),se.offNextTick(ae),this.playing&&Ie.resolve(!1)};const ze=()=>se.onNextTick(ae);return se.onThisOrNextTick(ae),Ie.promise}playDynamicRange(y,T){this.playing&&this.pause(),this.playing=!0;const B=Du(),Y=y.keepHot();B.promise.then(Y,Y);let se=T.time;const me=Ke=>{const Qe=Math.max(Ke-se,0);se=Ke;const bt=Qe/1e3,ae=this.getCurrentPosition(),ze=y.getValue();if(ae<ze[0]||ae>ze[1])this.gotoPosition(ze[0]);else{let Zt=ae+bt;Zt>ze[1]&&(Zt=ze[0]+(Zt-ze[1])),this.gotoPosition(Zt)}Ie()};this._stopPlayCallback=()=>{T.offThisOrNextTick(me),T.offNextTick(me),B.resolve(!1)};const Ie=()=>T.onNextTick(me);return T.onThisOrNextTick(me),B.promise}},Y2=Ft,Z2="__TheatreJS_StudioBundle",wS="__TheatreJS_CoreBundle",Q2="__TheatreJS_Notifications",jg=y=>(...T)=>{var B;switch(y){case"success":{qy.debug(T.slice(0,2).join(`
`));break}case"info":{qy.debug(T.slice(0,2).join(`
`));break}case"warning":{qy.warn(T.slice(0,2).join(`
`));break}}return typeof window<"u"?(B=window[Q2])==null?void 0:B.notify[y](...T):void 0},Zp={warning:jg("warning"),success:jg("success"),info:jg("info"),error:jg("error")};typeof window<"u"&&(window.addEventListener("error",y=>{Zp.error("An error occurred","<pre>".concat(y.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",y=>{Zp.error("An error occurred","<pre>".concat(y.reason,`</pre>

See **console** for details.`))}));var x5=class{constructor(y,T,B){this._decodedBuffer=y,this._audioContext=T,this._nodeDestination=B,Q(this,"_mainGain"),Q(this,"_state",new Y2.Atom({position:0,playing:!1})),Q(this,"statePointer"),Q(this,"_stopPlayCallback",Yy),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(y,T){const B=Du();this._playing&&this.pause(),this._playing=!0;let Y;const se=()=>{Y==null||Y(),Y=this._loopInRange(y.getValue(),T).stop},me=y.onStale(se);return se(),this._stopPlayCallback=()=>{Y==null||Y(),me(),B.resolve(!1)},B.promise}_loopInRange(y,T){let Y=this.getCurrentPosition();const se=y[1]-y[0];Y<y[0]||Y>y[1]?this._updatePositionInState(y[0]):Y===y[1]&&this._updatePositionInState(y[0]),Y=this.getCurrentPosition();const me=this._audioContext.createBufferSource();me.buffer=this._decodedBuffer,me.connect(this._mainGain),me.playbackRate.value=1,me.loop=!0,me.loopStart=y[0],me.loopEnd=y[1];const Ie=T.time;let Ke=Y-y[0];me.start(0,Y);const Qe=ze=>{let rr=(Math.max(ze-Ie,0)/1e3*1+Ke)/se%1*se;this._updatePositionInState(rr+y[0]),bt()},bt=()=>T.onNextTick(Qe);return T.onThisOrNextTick(Qe),{stop:()=>{me.stop(),me.disconnect(),T.offThisOrNextTick(Qe),T.offNextTick(Qe)}}}get _playing(){return this._state.get().playing}set _playing(y){this._state.setByPointer(T=>T.playing,y)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=Yy}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.reduce(T=>G(D({},T),{position:y}))}getCurrentPosition(){return this._state.get().position}play(y,T,B,Y,se){this._playing&&this.pause(),this._playing=!0;let me=this.getCurrentPosition();const Ie=T[1]-T[0];if(Y!=="normal")throw new Yp('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(Y,"' given."));me<T[0]||me>T[1]?this._updatePositionInState(T[0]):me===T[1]&&this._updatePositionInState(T[0]),me=this.getCurrentPosition();const Ke=Du(),Qe=this._audioContext.createBufferSource();Qe.buffer=this._decodedBuffer,Qe.connect(this._mainGain),Qe.playbackRate.value=B,y>1e3&&(Zp.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(y,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),y=1e3),y>1&&(Qe.loop=!0,Qe.loopStart=T[0],Qe.loopEnd=T[1]);const bt=se.time;let ae=me-T[0];const ze=Ie*y;Qe.start(0,me,ze-ae);const Zt=rr=>{const Qn=Math.max(rr-bt,0)/1e3,Mr=Math.min(Qn*B+ae,ze);if(Mr!==ze){let Ws=Mr/Ie%1*Ie;this._updatePositionInState(Ws+T[0]),pn()}else this._updatePositionInState(T[1]),this._playing=!1,kn(),Ke.resolve(!0)},kn=()=>{Qe.stop(),Qe.disconnect()};this._stopPlayCallback=()=>{kn(),se.offThisOrNextTick(Zt),se.offNextTick(Zt),this._playing&&Ke.resolve(!1)};const pn=()=>se.onNextTick(Zt);return se.onThisOrNextTick(Zt),Ke.promise}},Qp=Ft,Zy=0;function Qy(y){var T;const B=Ie=>{Y.tick(Ie)},Y=new Qp.Ticker({onActive(){var Ie;(Ie=y==null?void 0:y.start)==null||Ie.call(y)},onDormant(){var Ie;(Ie=y==null?void 0:y.stop)==null||Ie.call(y)}}),se={tick:B,id:Zy++,name:(T=y==null?void 0:y.name)!=null?T:"CustomRafDriver-".concat(Zy),type:"Theatre_RafDriver_PublicAPI"},me={type:"Theatre_RafDriver_PrivateAPI",publicApi:se,ticker:Y,start:y==null?void 0:y.start,stop:y==null?void 0:y.stop};return it(se,me),se}function J2(){let y=null;const Y=Qy({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const se=me=>{Y.tick(me),y=window.requestAnimationFrame(se)};y=window.requestAnimationFrame(se)}else Y.tick(0),setTimeout(()=>Y.tick(1),0)},stop:()=>{typeof window<"u"&&y!==null&&window.cancelAnimationFrame(y)}});return Y}var Jy;function xS(){return Jy||eI(J2()),Jy}function SS(){return xS().ticker}function eI(y){if(Jy)throw new Error("`setCoreRafDriver()` is already called.");Jy=Te(y)}var S5=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(y){it(this,y)}play(y){const T=Te(this);if(T._project.isReady()){const B=y!=null&&y.rafDriver?Te(y.rafDriver).ticker:SS();return T.play(y??{},B)}else{const B=Du();return B.resolve(!0),B.promise}}pause(){Te(this).pause()}get position(){return Te(this).position}set position(y){Te(this).position=y}__experimental_getKeyframes(y){return Te(this).getKeyframesOfSimpleProp(y)}async attachAudio(y){const{audioContext:T,destinationNode:B,decodedBuffer:Y,gainNode:se}=await E5(y),me=new x5(Y,T,se);return Te(this).replacePlaybackController(me),{audioContext:T,destinationNode:B,decodedBuffer:Y,gainNode:se}}get pointer(){return Te(this).pointer}};async function E5(y){function T(){if(y.audioContext)return Promise.resolve(y.audioContext);const bt=new AudioContext;return bt.state==="running"||typeof window>"u"?Promise.resolve(bt):new Promise(ae=>{const ze=()=>{bt.resume().catch(pn=>{console.error(pn)})},Zt=["mousedown","keydown","touchstart"],kn={capture:!0,passive:!1};Zt.forEach(pn=>{window.addEventListener(pn,ze,kn)}),bt.addEventListener("statechange",()=>{bt.state==="running"&&(Zt.forEach(pn=>{window.removeEventListener(pn,ze,kn)}),ae(bt))})})}async function B(){if(y.source instanceof AudioBuffer)return y.source;const bt=Du();if(typeof y.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let ae;try{ae=await fetch(y.source)}catch(pn){throw console.error(pn),new Error("Could not fetch '".concat(y.source,"'. Network error logged above."))}let ze;try{ze=await ae.arrayBuffer()}catch(pn){throw console.error(pn),new Error("Could not read '".concat(y.source,"' as an arrayBuffer."))}(await Y).decodeAudioData(ze,bt.resolve,bt.reject);let kn;try{kn=await bt.promise}catch(pn){throw console.error(pn),new Error("Could not decode ".concat(y.source," as an audio file."))}return kn}const Y=T(),se=B(),[me,Ie]=await Promise.all([Y,se]),Ke=y.destinationNode||me.destination,Qe=me.createGain();return Qe.connect(Ke),{audioContext:me,decodedBuffer:Ie,gainNode:Qe,destinationNode:Ke}}var tI=nI("Theatre_SheetObject");function nI(y){return T=>typeof T=="object"&&!!T&&T.type===y}var C5=class{constructor(y,T,B,Y,se){this._project=y,this._sheet=T,this._lengthD=B,this._subUnitsPerUnitD=Y,Q(this,"address"),Q(this,"publicApi"),Q(this,"_playbackControllerBox"),Q(this,"_prismOfStatePointer"),Q(this,"_positionD"),Q(this,"_positionFormatterD"),Q(this,"_playableRangeD"),Q(this,"pointer",(0,X2.pointer)({root:this,path:[]})),Q(this,"$$isPointerToPrismProvider",!0),Q(this,"_logger"),Q(this,"closestGridPosition",me=>{const Ke=1/this.subUnitsPerUnit;return parseFloat((Math.round(me/Ke)*Ke).toFixed(3))}),this._logger=y._logger.named("Sheet",T.address.sheetId).named("Instance",T.address.sheetInstanceId),this.address=G(D({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new S5(this),this._playbackControllerBox=new b5.Atom(se??new w5),this._prismOfStatePointer=(0,cs.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,cs.prism)(()=>{const me=this._prismOfStatePointer.getValue();return(0,cs.val)(me.position)}),this._positionFormatterD=(0,cs.prism)(()=>{const me=(0,cs.val)(this._subUnitsPerUnitD);return new P5(me)})}pointerToPrism(y){const{path:T}=(0,K2.getPointerParts)(y);if(T.length===0)return(0,cs.prism)(()=>({length:(0,cs.val)(this.pointer.length),playing:(0,cs.val)(this.pointer.playing),position:(0,cs.val)(this.pointer.position)}));if(T.length>1)return(0,cs.prism)(()=>{});const[B]=T;return B==="length"?this._lengthD:B==="position"?this._positionD:B==="playing"?(0,cs.prism)(()=>(0,cs.val)(this._prismOfStatePointer.getValue().playing)):(0,cs.prism)(()=>{})}getKeyframesOfSimpleProp(y){const{path:T,root:B}=(0,K2.getPointerParts)(y);if(!tI(B))throw new Yp("Argument prop must be a pointer to a SheetObject property");const Y=(0,cs.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[B.address.objectKey]);if(!Y)return[];const{trackData:se,trackIdByPropPath:me}=Y,Ie=v5(T),Ke=me[Ie];if(!Ke)return[];const Qe=se[Ke];return Qe?Qe.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(y){let T=y;this.pause(),T>this.length&&(T=this.length);const B=this.length;this._playbackControllerBox.get().gotoPosition(T>B?B:T)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,cs.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,cs.prism)(()=>[0,(0,cs.val)(this._lengthD)])}playDynamicRange(y,T){return this._playbackControllerBox.get().playDynamicRange(y,T)}async play(y,T){const B=this.length,Y=y&&y.range?y.range:[0,B],se=y&&typeof y.iterationCount=="number"?y.iterationCount:1,me=y&&typeof y.rate<"u"?y.rate:1,Ie=y&&y.direction?y.direction:"normal";return await this._play(se,[Y[0],Y[1]],me,Ie,T)}_play(y,T,B,Y,se){return this._playbackControllerBox.get().play(y,T,B,Y,se)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(y){this.pause();const T=this._playbackControllerBox.get();this._playbackControllerBox.set(y);const B=T.getCurrentPosition();T.destroy(),y.gotoPosition(B)}},P5=class{constructor(y){this._fps=y}formatSubUnitForGrid(y){const T=y%1,B=1/this._fps;return Math.round(T/B)+"f"}formatFullUnitForGrid(y){let T=y,B="";if(T>=ui){const se=Math.floor(T/ui);B+=se+"h",T=T%ui}if(T>=nh){const se=Math.floor(T/nh);B+=se+"m",T=T%nh}if(T>=Ro){const se=Math.floor(T/Ro);B+=se+"s",T=T%Ro}const Y=1/this._fps;if(T>=Y){const se=Math.floor(T/Y);B+=se+"f",T=T%Y}return B.length===0?"0s":B}formatForPlayhead(y){let T=y,B="";if(T>=ui){const se=Math.floor(T/ui);B+=qp(se.toString(),2,"0")+"h",T=T%ui}if(T>=nh){const se=Math.floor(T/nh);B+=qp(se.toString(),2,"0")+"m",T=T%nh}else B.length>0&&(B+="00m");if(T>=Ro){const se=Math.floor(T/Ro);B+=qp(se.toString(),2,"0")+"s",T=T%Ro}else B+="00s";const Y=1/this._fps;if(T>=Y){const se=Math.round(T/Y);B+=qp(se.toString(),2,"0")+"f",T=T%Y}else T/Y>.98?(B+=qp(1 .toString(),2,"0")+"f",T=T%Y):B+="00f";return B.length===0?"00s00f":B}formatBasic(y){return y.toFixed(2)+"s"}},Ro=1,nh=Ro*60,ui=nh*60,ES={};z(ES,{boolean:()=>kS,compound:()=>Lu,file:()=>nr,image:()=>rl,number:()=>Hg,rgba:()=>yn,string:()=>uI,stringLiteral:()=>dI});function rI(y,T){return y.length<=T?y:y.substr(0,T-3)+"..."}var Oe=y=>typeof y=="string"?'string("'.concat(rI(y,10),'")'):typeof y=="number"?"number(".concat(rI(String(y),10),")"):y===null?"null":y===void 0?"undefined":typeof y=="boolean"?String(y):Array.isArray(y)?"array":typeof y=="object"?"object":"unknown",iI=Oe;function T5(y,{removeAlphaIfOpaque:T=!1}={}){const B=(y.a*255|256).toString(16).slice(1),Y=(y.r*255|256).toString(16).slice(1)+(y.g*255|256).toString(16).slice(1)+(y.b*255|256).toString(16).slice(1)+(T&&B==="ff"?"":B);return"#".concat(Y)}function CS(y){return G(D({},y),{toString(){return T5(this,{removeAlphaIfOpaque:!0})}})}function Ou(y){return Object.fromEntries(Object.entries(y).map(([T,B])=>[T,wx(B,0,1)]))}function M5(y){function T(B){return B>=.0031308?1.055*B**(1/2.4)-.055:12.92*B}return Ou({r:T(y.r),g:T(y.g),b:T(y.b),a:y.a})}function Yn(y){function T(B){return B>=.04045?((B+.055)/(1+.055))**2.4:B/12.92}return{r:T(y.r),g:T(y.g),b:T(y.b),a:y.a}}function sI(y){let T=.4122214708*y.r+.5363325363*y.g+.0514459929*y.b,B=.2119034982*y.r+.6806995451*y.g+.1073969566*y.b,Y=.0883024619*y.r+.2817188376*y.g+.6299787005*y.b,se=Math.cbrt(T),me=Math.cbrt(B),Ie=Math.cbrt(Y);return{L:.2104542553*se+.793617785*me-.0040720468*Ie,a:1.9779984951*se-2.428592205*me+.4505937099*Ie,b:.0259040371*se+.7827717662*me-.808675766*Ie,alpha:y.a}}function eb(y){let T=y.L+.3963377774*y.a+.2158037573*y.b,B=y.L-.1055613458*y.a-.0638541728*y.b,Y=y.L-.0894841775*y.a-1.291485548*y.b,se=T*T*T,me=B*B*B,Ie=Y*Y*Y;return{r:4.0767416621*se-3.3077115913*me+.2309699292*Ie,g:-1.2684380046*se+2.6097574011*me-.3413193965*Ie,b:-.0041960863*se-.7034186147*me+1.707614701*Ie,a:y.alpha}}var La=Symbol("TheatrePropType_Basic");function PS(y){return typeof y=="object"&&!!y&&y[La]==="TheatrePropType"}function Gc(y){if(typeof y=="number")return Hg(y);if(typeof y=="boolean")return kS(y);if(typeof y=="string")return uI(y);if(typeof y=="object"&&y){if(PS(y))return y;if(hB(y))return Lu(y);throw new Yp("This value is not a valid prop type: ".concat(iI(y)))}else throw new Yp("This value is not a valid prop type: ".concat(iI(y)))}function oI(y){const T={};for(const B of Object.keys(y)){const Y=y[B];PS(Y)?T[B]=Y:T[B]=Gc(Y)}return T}var Lu=(y,T={})=>{const B=oI(y),Y=new WeakMap;return{type:"compound",props:B,valueType:null,[La]:"TheatrePropType",label:T.label,default:e5(B,me=>me.default),deserializeAndSanitize:me=>{if(typeof me!="object"||!me)return;if(Y.has(me))return Y.get(me);const Ie={};let Ke=!1;for(const[Qe,bt]of Object.entries(B))if(Object.prototype.hasOwnProperty.call(me,Qe)){const ae=bt.deserializeAndSanitize(me[Qe]);ae!=null&&(Ke=!0,Ie[Qe]=ae)}if(Y.set(me,Ie),Ke)return Ie}}},nr=(y,T={})=>{const B=(Y,se,me)=>{var Ie;return{type:"file",id:((Ie=T.interpolate)!=null?Ie:ef)(Y.id,se.id,me)}};return{type:"file",default:{type:"file",id:y},valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:B,deserializeAndSanitize:TS}},TS=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="file"&&(T=!1),!!T)return y},rl=(y,T={})=>{const B=(Y,se,me)=>{var Ie;return{type:"image",id:((Ie=T.interpolate)!=null?Ie:ef)(Y.id,se.id,me)}};return{type:"image",default:{type:"image",id:y},valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:B,deserializeAndSanitize:Jp}},Jp=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="image"&&(T=!1),!!T)return y},Hg=(y,T={})=>{var B;return G(D({type:"number",valueType:0,default:y,[La]:"TheatrePropType"},T||{}),{label:T.label,nudgeFn:(B=T.nudgeFn)!=null?B:R5,nudgeMultiplier:typeof T.nudgeMultiplier=="number"?T.nudgeMultiplier:void 0,interpolate:MS,deserializeAndSanitize:aI(T.range)})},aI=y=>y?T=>{if(typeof T=="number"&&isFinite(T))return wx(T,y[0],y[1])}:lI,lI=y=>typeof y=="number"&&isFinite(y)?y:void 0,MS=(y,T,B)=>y+B*(T-y),yn=(y={r:0,g:0,b:0,a:1},T={})=>{const B={};for(const Y of["r","g","b","a"])B[Y]=Math.min(Math.max(y[Y],0),1);return{type:"rgba",valueType:null,default:CS(B),[La]:"TheatrePropType",label:T.label,interpolate:A5,deserializeAndSanitize:k5}},k5=y=>{if(!y)return;let T=!0;for(const Y of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(y,Y)||typeof y[Y]!="number")&&(T=!1);if(!T)return;const B={};for(const Y of["r","g","b","a"])B[Y]=Math.min(Math.max(y[Y],0),1);return CS(B)},A5=(y,T,B)=>{const Y=sI(Yn(y)),se=sI(Yn(T)),me={L:(1-B)*Y.L+B*se.L,a:(1-B)*Y.a+B*se.a,b:(1-B)*Y.b+B*se.b,alpha:(1-B)*Y.alpha+B*se.alpha},Ie=M5(eb(me));return CS(Ie)},kS=(y,T={})=>{var B;return{type:"boolean",default:y,valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:(B=T.interpolate)!=null?B:ef,deserializeAndSanitize:I5}},I5=y=>typeof y=="boolean"?y:void 0;function ef(y){return y}var uI=(y,T={})=>{var B;return{type:"string",default:y,valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:(B=T.interpolate)!=null?B:ef,deserializeAndSanitize:cI}};function cI(y){return typeof y=="string"?y:void 0}function dI(y,T,B={}){var Y,se;return{type:"stringLiteral",default:y,valuesAndLabels:D({},T),[La]:"TheatrePropType",valueType:null,as:(Y=B.as)!=null?Y:"menu",label:B.label,interpolate:(se=B.interpolate)!=null?se:ef,deserializeAndSanitize(me){if(typeof me=="string"&&Object.prototype.hasOwnProperty.call(T,me))return me}}}var R5=({config:y,deltaX:T,deltaFraction:B,magnitude:Y})=>{var se;const{range:me}=y;return!y.nudgeMultiplier&&me&&!me.includes(1/0)&&!me.includes(-1/0)?B*(me[1]-me[0])*Y:T*Y*((se=y.nudgeMultiplier)!=null?se:1)},D5=y=>y.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function tb(y,T){return D5(y)}P(pe());var O5=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(y){it(this,y)}object(y,T,B){const Y=Te(this),se=tb(y),me=Y.getObject(se),Ie=null,Ke=B==null?void 0:B.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(me)return Ke&&me.template._temp_setActions(Ke),me.publicApi;{const Qe=Lu(T);return Y.createObject(se,Ie,Qe,Ke).publicApi}}get sequence(){return Te(this).getSequence().publicApi}get project(){return Te(this).project.publicApi}get address(){return D({},Te(this).address)}detachObject(y){const T=Te(this),B=tb(y);if(!T.getObject(B)){Zp.warning(`Couldn't delete object "`.concat(B,'"'),'There is no object with key "'.concat(B,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(B,'")` with the correct key.')),console.warn('Object key "'.concat(B,'" does not exist.'));return}T.deleteObject(B)}},tf=Ft,hI=class{constructor(y,T){this.template=y,this.instanceId=T,Q(this,"_objects",new tf.Atom({})),Q(this,"_sequence"),Q(this,"address"),Q(this,"publicApi"),Q(this,"project"),Q(this,"objectsP",this._objects.pointer),Q(this,"type","Theatre_Sheet"),Q(this,"_logger"),this._logger=y.project._logger.named("Sheet",T),this._logger._trace("creating sheet"),this.project=y.project,this.address=G(D({},y.address),{sheetInstanceId:this.instanceId}),this.publicApi=new O5(this)}createObject(y,T,B,Y={}){const me=this.template.getObjectTemplate(y,T,B,Y).createInstance(this,T,B);return this._objects.setByPointer(Ie=>Ie[y],me),me}getObject(y){return this._objects.get()[y]}deleteObject(y){this._objects.reduce(T=>{const B=D({},T);return delete B[y],B})}getSequence(){if(!this._sequence){const y=(0,tf.prism)(()=>{const B=(0,tf.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return AS(B)}),T=(0,tf.prism)(()=>{const B=(0,tf.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return L5(B)});this._sequence=new C5(this.template.project,this,y,T)}return this._sequence}},AS=y=>typeof y=="number"&&isFinite(y)&&y>0?y:10,L5=y=>typeof y=="number"&&cS(y)&&y>=1&&y<=1e3?y:30,N5=class{constructor(y,T){this.project=y,Q(this,"type","Theatre_SheetTemplate"),Q(this,"address"),Q(this,"_instances",new _S.Atom({})),Q(this,"instancesP",this._instances.pointer),Q(this,"_objectTemplates",new _S.Atom({})),Q(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=G(D({},y.address),{sheetId:T})}getInstance(y){let T=this._instances.get()[y];return T||(T=new hI(this,y),this._instances.setByPointer(B=>B[y],T)),T}getObjectTemplate(y,T,B,Y){let se=this._objectTemplates.get()[y];return se||(se=new m5(this,y,T,B,Y),this._objectTemplates.setByPointer(me=>me[y],se)),se}},IS=Ft,pI=Ft,il=y=>new Promise(T=>setTimeout(T,y)),Gg=il;function oa(y){for(var T=arguments.length,B=Array(T>1?T-1:0),Y=1;Y<T;Y++)B[Y-1]=arguments[Y];throw Error("[Immer] minified error nr: "+y+(B.length?" "+B.map(function(se){return"'"+se+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Nu(y){return!!y&&!!y[uo]}function ao(y){return!!y&&(function(T){if(!T||typeof T!="object")return!1;var B=Object.getPrototypeOf(T);if(B===null)return!0;var Y=Object.hasOwnProperty.call(B,"constructor")&&B.constructor;return Y===Object||typeof Y=="function"&&Function.toString.call(Y)===bI}(y)||Array.isArray(y)||!!y[cb]||!!y.constructor[cb]||Fu(y)||lo(y))}function RS(y){return Nu(y)||oa(23,y),y[uo].t}function nf(y,T,B){B===void 0&&(B=!1),rh(y)===0?(B?Object.keys:db)(y).forEach(function(Y){B&&typeof Y=="symbol"||T(Y,y[Y],y)}):y.forEach(function(Y,se){return T(se,Y,y)})}function rh(y){var T=y[uo];return T?T.i>3?T.i-4:T.i:Array.isArray(y)?1:Fu(y)?2:lo(y)?3:0}function Wg(y,T){return rh(y)===2?y.has(T):Object.prototype.hasOwnProperty.call(y,T)}function fI(y,T){return rh(y)===2?y.get(T):y[T]}function DS(y,T,B){var Y=rh(y);Y===2?y.set(T,B):Y===3?(y.delete(T),y.add(B)):y[T]=B}function mI(y,T){return y===T?y!==0||1/y==1/T:y!=y&&T!=T}function Fu(y){return vI&&y instanceof Map}function lo(y){return yI&&y instanceof Set}function Bu(y){return y.o||y.t}function rf(y){if(Array.isArray(y))return Array.prototype.slice.call(y);var T=BS(y);delete T[uo];for(var B=db(T),Y=0;Y<B.length;Y++){var se=B[Y],me=T[se];me.writable===!1&&(me.writable=!0,me.configurable=!0),(me.get||me.set)&&(T[se]={configurable:!0,writable:!0,enumerable:me.enumerable,value:y[se]})}return Object.create(Object.getPrototypeOf(y),T)}function OS(y,T){return T===void 0&&(T=!1),nb(y)||Nu(y)||!ao(y)||(rh(y)>1&&(y.set=y.add=y.clear=y.delete=gI),Object.freeze(y),T&&nf(y,function(B,Y){return OS(Y,!0)},!0)),y}function gI(){oa(2)}function nb(y){return y==null||typeof y!="object"||Object.isFrozen(y)}function Ul(y){var T=_I[y];return T||oa(18,y),T}function rb(){return af}function _i(y,T){T&&(Ul("Patches"),y.u=[],y.s=[],y.v=T)}function $g(y){ib(y),y.p.forEach(ob),y.p=null}function ib(y){y===af&&(af=y.l)}function sb(y){return af={p:[],l:af,h:y,m:!0,_:0}}function ob(y){var T=y[uo];T.i===0||T.i===1?T.j():T.O=!0}function ih(y,T){T._=T.p.length;var B=T.p[0],Y=y!==void 0&&y!==B;return T.h.g||Ul("ES5").S(T,y,Y),Y?(B[uo].P&&($g(T),oa(4)),ao(y)&&(y=Na(T,y),T.l||sh(T,y)),T.u&&Ul("Patches").M(B[uo],y,T.u,T.s)):y=Na(T,B,[]),$g(T),T.u&&T.v(T.u,T.s),y!==Kg?y:void 0}function Na(y,T,B){if(nb(T))return T;var Y=T[uo];if(!Y)return nf(T,function(me,Ie){return zl(y,Y,T,me,Ie,B)},!0),T;if(Y.A!==y)return T;if(!Y.P)return sh(y,Y.t,!0),Y.t;if(!Y.I){Y.I=!0,Y.A._--;var se=Y.i===4||Y.i===5?Y.o=rf(Y.k):Y.o;nf(Y.i===3?new Set(se):se,function(me,Ie){return zl(y,Y,se,me,Ie,B)}),sh(y,se,!1),B&&y.u&&Ul("Patches").R(Y,B,y.u,y.s)}return Y.o}function zl(y,T,B,Y,se,me){if(Nu(se)){var Ie=Na(y,se,me&&T&&T.i!==3&&!Wg(T.D,Y)?me.concat(Y):void 0);if(DS(B,Y,Ie),!Nu(Ie))return;y.m=!1}if(ao(se)&&!nb(se)){if(!y.h.F&&y._<1)return;Na(y,se),T&&T.A.l||sh(y,se)}}function sh(y,T,B){B===void 0&&(B=!1),y.h.F&&y.m&&OS(T,B)}function ab(y,T){var B=y[uo];return(B?Bu(B):y)[T]}function LS(y,T){if(T in y)for(var B=Object.getPrototypeOf(y);B;){var Y=Object.getOwnPropertyDescriptor(B,T);if(Y)return Y;B=Object.getPrototypeOf(B)}}function lb(y){y.P||(y.P=!0,y.l&&lb(y.l))}function oh(y){y.o||(y.o=rf(y.t))}function ah(y,T,B){var Y=Fu(T)?Ul("MapSet").N(T,B):lo(T)?Ul("MapSet").T(T,B):y.g?function(se,me){var Ie=Array.isArray(se),Ke={i:Ie?1:0,A:me?me.A:rb(),P:!1,I:!1,D:{},l:me,t:se,k:null,o:null,j:null,C:!1},Qe=Ke,bt=Uu;Ie&&(Qe=[Ke],bt=Xg);var ae=Proxy.revocable(Qe,bt),ze=ae.revoke,Zt=ae.proxy;return Ke.k=Zt,Ke.j=ze,Zt}(T,B):Ul("ES5").J(T,B);return(B?B.A:rb()).p.push(Y),Y}function sf(y){return Nu(y)||oa(22,y),function T(B){if(!ao(B))return B;var Y,se=B[uo],me=rh(B);if(se){if(!se.P&&(se.i<4||!Ul("ES5").K(se)))return se.t;se.I=!0,Y=of(B,me),se.I=!1}else Y=of(B,me);return nf(Y,function(Ie,Ke){se&&fI(se.t,Ie)===Ke||DS(Y,Ie,T(Ke))}),me===3?new Set(Y):Y}(y)}function of(y,T){switch(T){case 2:return new Map(y);case 3:return Array.from(y)}return rf(y)}var NS,af,ub=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",vI=typeof Map<"u",yI=typeof Set<"u",FS=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Kg=ub?Symbol.for("immer-nothing"):((NS={})["immer-nothing"]=!0,NS),cb=ub?Symbol.for("immer-draftable"):"__$immer_draftable",uo=ub?Symbol.for("immer-state"):"__$immer_state",bI=""+Object.prototype.constructor,db=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,BS=Object.getOwnPropertyDescriptors||function(y){var T={};return db(y).forEach(function(B){T[B]=Object.getOwnPropertyDescriptor(y,B)}),T},_I={},Uu={get:function(y,T){if(T===uo)return y;var B=Bu(y);if(!Wg(B,T))return function(se,me,Ie){var Ke,Qe=LS(me,Ie);return Qe?"value"in Qe?Qe.value:(Ke=Qe.get)===null||Ke===void 0?void 0:Ke.call(se.k):void 0}(y,B,T);var Y=B[T];return y.I||!ao(Y)?Y:Y===ab(y.t,T)?(oh(y),y.o[T]=ah(y.A.h,Y,y)):Y},has:function(y,T){return T in Bu(y)},ownKeys:function(y){return Reflect.ownKeys(Bu(y))},set:function(y,T,B){var Y=LS(Bu(y),T);if(Y!=null&&Y.set)return Y.set.call(y.k,B),!0;if(!y.P){var se=ab(Bu(y),T),me=se==null?void 0:se[uo];if(me&&me.t===B)return y.o[T]=B,y.D[T]=!1,!0;if(mI(B,se)&&(B!==void 0||Wg(y.t,T)))return!0;oh(y),lb(y)}return y.o[T]===B&&typeof B!="number"&&(B!==void 0||T in y.o)||(y.o[T]=B,y.D[T]=!0,!0)},deleteProperty:function(y,T){return ab(y.t,T)!==void 0||T in y.t?(y.D[T]=!1,oh(y),lb(y)):delete y.D[T],y.o&&delete y.o[T],!0},getOwnPropertyDescriptor:function(y,T){var B=Bu(y),Y=Reflect.getOwnPropertyDescriptor(B,T);return Y&&{writable:!0,configurable:y.i!==1||T!=="length",enumerable:Y.enumerable,value:B[T]}},defineProperty:function(){oa(11)},getPrototypeOf:function(y){return Object.getPrototypeOf(y.t)},setPrototypeOf:function(){oa(12)}},Xg={};nf(Uu,function(y,T){Xg[y]=function(){return arguments[0]=arguments[0][0],T.apply(this,arguments)}}),Xg.deleteProperty=function(y,T){return Uu.deleteProperty.call(this,y[0],T)},Xg.set=function(y,T,B){return Uu.set.call(this,y[0],T,B,y[0])};var US=function(){function y(B){var Y=this;this.g=FS,this.F=!0,this.produce=function(se,me,Ie){if(typeof se=="function"&&typeof me!="function"){var Ke=me;me=se;var Qe=Y;return function(kn){var pn=this;kn===void 0&&(kn=Ke);for(var rr=arguments.length,ir=Array(rr>1?rr-1:0),Qn=1;Qn<rr;Qn++)ir[Qn-1]=arguments[Qn];return Qe.produce(kn,function(Mr){var Ws;return(Ws=me).call.apply(Ws,[pn,Mr].concat(ir))})}}var bt;if(typeof me!="function"&&oa(6),Ie!==void 0&&typeof Ie!="function"&&oa(7),ao(se)){var ae=sb(Y),ze=ah(Y,se,void 0),Zt=!0;try{bt=me(ze),Zt=!1}finally{Zt?$g(ae):ib(ae)}return typeof Promise<"u"&&bt instanceof Promise?bt.then(function(kn){return _i(ae,Ie),ih(kn,ae)},function(kn){throw $g(ae),kn}):(_i(ae,Ie),ih(bt,ae))}if(!se||typeof se!="object")return(bt=me(se))===Kg?void 0:(bt===void 0&&(bt=se),Y.F&&OS(bt,!0),bt);oa(21,se)},this.produceWithPatches=function(se,me){return typeof se=="function"?function(Qe){for(var bt=arguments.length,ae=Array(bt>1?bt-1:0),ze=1;ze<bt;ze++)ae[ze-1]=arguments[ze];return Y.produceWithPatches(Qe,function(Zt){return se.apply(void 0,[Zt].concat(ae))})}:[Y.produce(se,me,function(Qe,bt){Ie=Qe,Ke=bt}),Ie,Ke];var Ie,Ke},typeof(B==null?void 0:B.useProxies)=="boolean"&&this.setUseProxies(B.useProxies),typeof(B==null?void 0:B.autoFreeze)=="boolean"&&this.setAutoFreeze(B.autoFreeze)}var T=y.prototype;return T.createDraft=function(B){ao(B)||oa(8),Nu(B)&&(B=sf(B));var Y=sb(this),se=ah(this,B,void 0);return se[uo].C=!0,ib(Y),se},T.finishDraft=function(B,Y){var se=B&&B[uo],me=se.A;return _i(me,Y),ih(void 0,me)},T.setAutoFreeze=function(B){this.F=B},T.setUseProxies=function(B){B&&!FS&&oa(20),this.g=B},T.applyPatches=function(B,Y){var se;for(se=Y.length-1;se>=0;se--){var me=Y[se];if(me.path.length===0&&me.op==="replace"){B=me.value;break}}var Ie=Ul("Patches").$;return Nu(B)?Ie(B,Y):this.produce(B,function(Ke){return Ie(Ke,Y.slice(se+1))})},y}(),ds=new US;ds.produce,ds.produceWithPatches.bind(ds),ds.setAutoFreeze.bind(ds),ds.setUseProxies.bind(ds),ds.applyPatches.bind(ds),ds.createDraft.bind(ds),ds.finishDraft.bind(ds);var zS={currentProjectStateDefinitionVersion:"0.4.0"},hb=zS;async function wI(y,T,B){await Gg(0),y.transaction(({drafts:Y})=>{var se;const me=T.address.projectId;Y.ephemeral.coreByProject[me]={lastExportedObject:null,loadingState:{type:"loading"}},Y.ahistoric.coreByProject[me]={ahistoricStuff:""};function Ie(){Y.ephemeral.coreByProject[me].loadingState={type:"loaded"},Y.historic.coreByProject[me]={sheetsById:{},definitionVersion:hb.currentProjectStateDefinitionVersion,revisionHistory:[]}}function Ke(ze){Y.ephemeral.coreByProject[me].loadingState={type:"loaded"},Y.historic.coreByProject[me]=ze}function Qe(){Y.ephemeral.coreByProject[me].loadingState={type:"loaded"}}function bt(ze){Y.ephemeral.coreByProject[me].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:ze}}const ae=(se=RS(Y.historic))==null?void 0:se.coreByProject[T.address.projectId];ae?B&&ae.revisionHistory.indexOf(B.revisionHistory[0])==-1?bt(B):Qe():B?Ke(B):Ie()})}function VS(){}function jS(y){var T,B;const Y=(T=y==null?void 0:y.logging)!=null&&T.internal?(B=y.logging.min)!=null?B:256:1/0,se=Y<=128,me=Y<=512,Ie=U2(void 0,{_debug:se?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):VS,_error:me?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):VS});if(y){const{logger:Ke,logging:Qe}=y;Ke&&Ie.configureLogger(Ke),Qe?Ie.configureLogging(Qe):Ie.configureLogging({dev:!1})}return Ie.getLogger().named("Theatre")}var pb=class{constructor(y,T={},B){this.config=T,this.publicApi=B,Q(this,"pointers"),Q(this,"_pointerProxies"),Q(this,"address"),Q(this,"_studioReadyDeferred"),Q(this,"_assetStorageReadyDeferred"),Q(this,"_readyPromise"),Q(this,"_sheetTemplates",new pI.Atom({})),Q(this,"sheetTemplatesP",this._sheetTemplates.pointer),Q(this,"_studio"),Q(this,"assetStorage"),Q(this,"type","Theatre_Project"),Q(this,"_logger");var Y;this._logger=jS({logging:{dev:!0}}).named("Project",y),this._logger.traceDev("creating project"),this.address={projectId:y};const se=new pI.Atom({ahistoric:{ahistoricStuff:""},historic:(Y=T.state)!=null?Y:{sheetsById:{},definitionVersion:hb.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Du(),this.assetStorage={getAssetUrl:me=>{var Ie;return"".concat((Ie=T.assets)==null?void 0:Ie.baseUrl,"/").concat(me)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new IS.PointerProxy(se.pointer.historic),ahistoric:new IS.PointerProxy(se.pointer.ahistoric),ephemeral:new IS.PointerProxy(se.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},ue.add(y,this),this._studioReadyDeferred=Du(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),T.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(y,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(y){if(this._studio){if(this._studio!==y)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=y,y.initialized.then(async()=>{var T;await wI(y,this,this.config.state),this._pointerProxies.historic.setPointer(y.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(y.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(y.atomP.ephemeral.coreByProject[this.address.projectId]),await y.createAssetStorage(this,(T=this.config.assets)==null?void 0:T.baseUrl).then(B=>{this.assetStorage=B,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(T=>{throw console.error(T),T})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(y,T="default"){let B=this._sheetTemplates.get()[y];return B||(B=new N5(this,y),this._sheetTemplates.reduce(Y=>G(D({},Y),{[y]:B}))),B.getInstance(T)}},fb=class{get type(){return"Theatre_Project_PublicAPI"}constructor(y,T={}){it(this,new pb(y,T,this))}get ready(){return Te(this).ready}get isReady(){return Te(this).isReady()}get address(){return D({},Te(this).address)}getAssetUrl(y){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return y.id?Te(this).assetStorage.getAssetUrl(y.id):void 0}sheet(y,T="default"){const B=tb(y);return Te(this).getOrCreateSheet(B,T).publicApi}};P(pe());var HS=Ft,lf=Ft;function GS(y,T={}){const B=ue.get(y);if(B)return B.publicApi;const se=jS().named("Project",y);return T.state?(SI(y,T.state),se._debug("deep validated config.state on disk")):se._debug("no config.state"),new fb(y,T)}var xI=(y,T)=>{if(Array.isArray(T)||T==null||T.definitionVersion!==hb.currentProjectStateDefinitionVersion)throw new Yp("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(y),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},SI=(y,T)=>{xI(y,T)};function mb(y,T,B){const Y=B?Te(B).ticker:SS();if((0,HS.isPointer)(y))return(0,lf.pointerToPrism)(y).onChange(Y,T,!0);if((0,lf.isPrism)(y))return y.onChange(Y,T,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function WS(y){if((0,HS.isPointer)(y))return(0,lf.pointerToPrism)(y).getValue();throw new Error("Called val(p) where p is not a pointer.")}var $S=class{constructor(){Q(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(y,T){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=y;const B={projectsP:ue.atom.pointer.projects,privateAPI:Te,coreExports:he,getCoreRafDriver:xS};T(B)}};KS();function KS(){if(typeof window>"u")return;const y=window[wS];if(typeof y<"u")throw typeof y=="object"&&y&&typeof y.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(wS," seems to be already set by a module other than @theatre/core."));const T=new $S;window[wS]=T;const B=window[Z2];B&&B!==null&&B.type==="Theatre_StudioBundle"&&B.registerCoreBundle(T)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(AN,AN.exports);var PW=AN.exports;function U8e(){return Math.round(Math.random()*1e6).toString()}function z8e(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function V8e(t){const e=Math.round(t.r*255),n=Math.round(t.g*255),r=Math.round(t.b*255),i=m=>{const v=m.toString(16);return v.length===1?"0"+v:v},o=i(e),u=i(n),h=i(r);return"#"+o+u+h}function MG(t,e=1){return Number(t.toFixed(e))}let TW=0;const j8e=()=>{TW=0},CF=t=>{if(!t)return;let e=t.name.replace(" ","");e.length===0&&(e=`obj_${TW}`,TW++),t.parent!==null&&(e=`${t.parent.uuid}.${e}`),t.uuid=e,t.children.forEach(n=>{CF(n)})},H8e=t=>{t&&(Array.isArray(t)?t.forEach(e=>e.dispose()):t.dispose())},IN=t=>{var e;if(t){for(;t.children.length>0;){const n=t.children[0];n instanceof w8e?(n.pause(),n.parent&&n.parent.remove(n)):IN(n)}if(t.parent&&t.parent.remove(t),t.isMesh){const n=t;(e=n.geometry)==null||e.dispose(),H8e(n.material)}t.dispose!==void 0&&t.dispose()}},BSe=()=>{};class m7 extends EF{constructor(n,r,i){super(n);Jr(this,"project");Jr(this,"sheets");Jr(this,"sheetObjects");Jr(this,"sheetObjectCBs");Jr(this,"sheetObjectUnsubscribe");this.project=PW.getProject(r,i),this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var i;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(i=this.project)==null?void 0:i.sheet(n),this.sheets.set(n,r)),r}sheetObject(n,r,i,o){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const u=this.sheets.get(n);if(u===void 0)return;const h=`${n}_${r}`;let m=this.sheetObjects.get(h);if(m!==void 0)return m=u.object(r,{...i,...m.value},{reconfigure:!0}),m;m=u.object(r,i),this.sheetObjects.set(h,m),this.sheetObjectCBs.set(h,o!==void 0?o:BSe);const v=m.onValuesChange(x=>{if(this.app.editor){for(const E in x){const k=x[E];typeof k=="object"&&z8e(k)&&(x[E]={r:k.r,g:k.g,b:k.b,a:k.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheetObject:h,values:x}})}else{const E=this.sheetObjectCBs.get(h);E!==void 0&&E(x)}});return this.sheetObjectUnsubscribe.set(h,v),m}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=`${n.address.sheetId}_${n.address.objectKey}`,i=this.sheetObjectUnsubscribe.get(r);i!==void 0&&i()}}let Cm;function G8e(t,e){t.components.forEach(n=>{if(n instanceof m7){let r;const i=n;switch(e.event){case"setSheet":r=i.sheets.get(e.data.sheet),r!==void 0&&(Cm=r,Bw.setSelection([r]));break;case"setSheetObject":r=i.sheetObjects.get(`${e.data.sheet}_${e.data.key}`),r!==void 0&&Bw.setSelection([r]);break;case"updateSheetObject":r=i.sheetObjectCBs.get(e.data.sheetObject),r!==void 0&&r(e.data.values);break;case"updateTimeline":r=i.sheets.get(e.data.sheet),Cm!==void 0&&(Cm.sequence.position=e.data.position);break}}})}function W8e(t){if(t.editor){let e;t.components.forEach(o=>{o instanceof m7&&(e=o)}),Bw.ui.restore(),Bw.onSelectionChange(o=>{o.length<1||o.forEach(u=>{let h=u.address.sheetId,m="setSheet",v={};switch(u.type){case"Theatre_Sheet_PublicAPI":m="setSheet",v={sheet:u.address.sheetId},Cm=e.sheets.get(u.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":m="setSheetObject",h+=`_${u.address.objectKey}`,v={id:h,sheet:u.address.sheetId,key:u.address.objectKey};break}t.send({event:m,target:"app",data:v})})});let n=0;const r=()=>{if(Cm!==void 0&&n!==Cm.sequence.position){n=Cm.sequence.position;const o=Cm;t.send({event:"updateTimeline",target:"app",data:{position:n,sheet:o.address.sheetId}})}},i=()=>{r(),requestAnimationFrame(i)};r(),i()}else Bw.ui.hide()}function $8e(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function USe(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(USe(n))}),e}function K8e(t){const e={};for(const n in t){const r=t[n].value;e[n]={value:r},r===null?e[n].value={src:""}:r.isTexture&&(e[n].value={src:r.image.src})}return e}function X8e(t){switch(t){case"blendSrcAlpha":case"blendDstAlpha":case"blendEquationAlpha":case"clippingPlanes":case"shadowSide":case"precision":return!0}return!1}function cbe(t){const e={};for(const n in t){if(n.substring(0,1)==="_"||n.substring(0,2)==="is"||X8e(n))continue;const r=typeof t[n],i=t[n];switch(r){case"boolean":case"number":case"string":e[n]=i;break;case"object":if(i!==null)if(e[n]=i,i.isTexture)if(i instanceof is){const o=i.source.toJSON();e[n]={src:o.url}}else i instanceof yF&&(console.log("env map"),console.log(i.source.data),console.log(i.source.toJSON()),e[n]={src:""});else n==="uniforms"&&(e[n]=K8e(e[n]));else e[n]={src:""};break}}return e}function kG(t){t.updateMatrix();const e={name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements,animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};t.animations.forEach(r=>{e.animations.push({name:r.name,duration:r.duration,blendMode:r.blendMode})});const n=t.type.toLowerCase();if(n.search("mesh")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(cbe(o))}),e.material=i}else e.material=cbe(r.material)}else n.search("camera")>-1?t.type==="PerspectiveCamera"?e.perspectiveCameraInfo={fov:t.fov,zoom:t.zoom,near:t.near,far:t.far,focus:t.focus,aspect:t.aspect,filmGauge:t.filmGauge,filmOffset:t.filmOffset}:t.type==="OrthographicCamera"&&(e.orthographicCameraInfo={zoom:t.zoom,near:t.near,far:t.far,left:t.left,right:t.right,top:t.top,bottom:t.bottom}):n.search("light")>-1&&(e.lightInfo={color:t.color,intensity:t.intensity,decay:t.decay,distance:t.distance,angle:t.angle,penumbra:t.penumbra,groundColor:t.groundColor});return e}function to(t,e,n){const r=e.split(".");switch(r.length){case 1:t[r[0]]=n;break;case 2:t[r[0]][r[1]]=n;break;case 3:t[r[0]][r[1]][r[2]]=n;break;case 4:t[r[0]][r[1]][r[2]][r[3]]=n;break;case 5:t[r[0]][r[1]][r[2]][r[3]][r[4]]=n;break}}function RN(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{const i=new is(r);i.wrapS=vp,i.wrapT=vp,i.needsUpdate=!0,e(i)},r.onerror=n,r.src=t})}class q8e extends EF{constructor(){super(...arguments);Jr(this,"scene")}getObject(n){this.app.send({event:"getObject",target:"app",data:n})}setObject(n){const r=kG(n);this.app.send({event:"setObject",target:"editor",data:r})}requestMethod(n,r,i){this.app.send({event:"requestMethod",target:"app",data:{uuid:n,key:r,value:i}})}updateObject(n,r,i){this.app.send({event:"updateObject",target:"app",data:{uuid:n,key:r,value:i}})}createTexture(n,r,i){this.app.send({event:"createTexture",target:"app",data:{uuid:n,key:r,value:i}})}setScene(n){if(n===void 0)return;this.scene=n,j8e(),CF(this.scene);const r=USe(this.scene);this.app.send({event:"setScene",target:"editor",data:r})}addCamera(n){const r=kG(n);this.app.send({event:"addCamera",target:"editor",data:r})}removeCamera(n){const r=kG(n);this.app.send({event:"removeCamera",target:"editor",data:r})}}function Y8e(t,e){switch(e.event){case"getObject":_r.dispatchEvent({type:wr.GET_OBJECT,value:e.data});break;case"updateObject":_r.dispatchEvent({type:wr.UPDATE_OBJECT,value:e.data});break;case"createTexture":_r.dispatchEvent({type:wr.CREATE_TEXTURE,value:e.data});break;case"requestMethod":_r.dispatchEvent({type:wr.REQUEST_METHOD,value:e.data});break}}function Z8e(t,e){switch(e.event){case"setObject":_r.dispatchEvent({type:wr.SET_OBJECT,value:e.data});break;case"setScene":_r.dispatchEvent({type:wr.SET_SCENE,value:e.data});break;case"addCamera":_r.dispatchEvent({type:wr.ADD_CAMERA,value:e.data});break;case"removeCamera":_r.dispatchEvent({type:wr.REMOVE_CAMERA,value:e.data});break}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function gi(t){return t==null}function g7(t){return t!==null&&typeof t=="object"}function MW(t){return t!==null&&typeof t=="object"}function Q8e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function N0(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return MW(o)&&MW(u)?Object.assign(Object.assign({},r),{[i]:N0(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function v7(t){return g7(t)?"target"in t:!1}const J8e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let Qo=class cw{static alreadyDisposed(){return new cw({type:"alreadydisposed"})}static notBindable(){return new cw({type:"notbindable"})}static notCompatible(e,n){return new cw({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new cw({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new cw({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=J8e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},dbe=class zSe{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!zSe.isBindable(r))throw Qo.notBindable();if(!(e in r))throw Qo.propertyNotFound(e);r[e]=n}},Is=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}},eHe=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new Is,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}},tHe=class{constructor(e){this.emitter=new Is,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}},nHe=class{constructor(e){this.emitter=new Is,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Ni(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new tHe(t):new eHe(t,e)}function rHe(t){return[new nHe(t),(e,n)=>{t.setRawValue(e,n)}]}let vr=class VSe{constructor(e){this.emitter=new Is,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:Ni(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new VSe(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},nM=class{constructor(e){this.values=vr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},iHe=class{constructor(e){this.values=vr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return gi(r)||(i=Math.max(i,r)),gi(n)||(i=Math.min(i,n)),i}},sHe=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},oHe=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const aHe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let lHe=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=aHe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const uHe={"+":t=>t,"-":t=>-t,"~":t=>~t};let cHe=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=uHe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function y7(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function AT(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function dHe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function IT(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function hHe(t,e){const n=IT(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=IT(t,e);return i===""?"":r+i}function b7(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=hHe(t,e);return r===""?"":n+r}function jSe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=dHe(t,e);return e+=r.length,r===""?"":r+IT(t,e)}function pHe(t,e){const n=jSe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=IT(t,e);return e+=i.length,n+r+i+b7(t,e)}function fHe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=IT(t,e);return e+=r.length,r===""?"":n+r+b7(t,e)}function mHe(t,e){const n=jSe(t,e);return e+=n.length,n===""?"":n+b7(t,e)}const gHe=y7([pHe,fHe,mHe]);function vHe(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function yHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=vHe(t,e);return r===""?"":n+r}function bHe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function _He(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=bHe(t,e);return r===""?"":n+r}function wHe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function xHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=wHe(t,e);return r===""?"":n+r}const SHe=y7([yHe,_He,xHe]),EHe=y7([SHe,gHe]);function CHe(t,e){const n=EHe(t,e);return e+=n.length,n===""?null:{evaluable:new oHe(n),cursor:e}}function PHe(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=GSe(t,e);if(!r)return null;e=r.cursor,e+=AT(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function THe(t,e){var n;return(n=CHe(t,e))!==null&&n!==void 0?n:PHe(t,e)}function HSe(t,e){const n=THe(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=HSe(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new cHe(r,i.evaluable)}):null}function MHe(t,e,n){n+=AT(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=AT(e,n).length,{cursor:n,operator:r}):null}function kHe(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=MHe(e,n,r);if(!u)break;r=u.cursor;const h=t(n,r);if(!h)return null;r=h.cursor,o=new lHe(u.operator,o,h.evaluable)}return o?{cursor:r,evaluable:o}:null}}const AHe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>kHe(t,e),HSe);function GSe(t,e){return e+=AT(t,e).length,AHe(t,e)}function IHe(t){const e=GSe(t,0);return!e||e.cursor+AT(t,e.cursor).length!==t.length?null:e.evaluable}function bp(t){var e;const n=IHe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function WSe(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=bp(t);if(!gi(e))return e}return 0}function RHe(t){return String(t)}function tl(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function $r(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function hbe(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function js(t,e,n){return Math.min(Math.max(t,e),n)}function $Se(t,e){return(t%e+e)%e}function DHe(t,e){return gi(t.step)?Math.max(hbe(e),2):hbe(t.step)}function KSe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function XSe(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function qSe(t,e){return gi(t.step)?null:new sHe(t.step,e)}function YSe(t){return!gi(t.max)&&!gi(t.min)?new nM({max:t.max,min:t.min}):!gi(t.max)||!gi(t.min)?new iHe({max:t.max,min:t.min}):null}function ZSe(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:tl(DHe(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:KSe(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:XSe(t,e)}}function QSe(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function _7(t){return{constraint:t.constraint,textProps:vr.fromObject(ZSe(t.params,t.initialValue))}}let $0=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},PF=class{constructor(e){this.target=e}},rM=class extends PF{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},OHe=class extends PF{constructor(e,n){super(e),this.expanded=n}},LHe=class extends PF{constructor(e,n){super(e),this.index=n}},RT=class extends $0{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Is,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new rM(this,n.binding.target.read(),e.options.last))}};class NHe{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Is}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function FHe(t){if(!("binding"in t))return!1;const e=t.binding;return v7(e)&&"read"in e&&"write"in e}function BHe(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],h=u(t[o]);return h.succeeded?Object.assign(Object.assign({},i),{[o]:h.value}):void 0},{});return r}function UHe(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function zHe(t){return t===null?!1:typeof t=="object"}function Wh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function pbe(t){return{custom:e=>Wh(e)(t),boolean:Wh(e=>typeof e=="boolean"?e:void 0)(t),number:Wh(e=>typeof e=="number"?e:void 0)(t),string:Wh(e=>typeof e=="string"?e:void 0)(t),function:Wh(e=>typeof e=="function"?e:void 0)(t),constant:e=>Wh(n=>n===e?e:void 0)(t),raw:Wh(e=>e)(t),object:e=>Wh(n=>{if(zHe(n))return BHe(n,e)})(t),array:e=>Wh(n=>{if(Array.isArray(n))return UHe(n,e)})(t)}}const kW={optional:pbe(!0),required:pbe(!1)};function Yi(t,e){const n=e(kW),r=kW.required.object(n)(t);return r.succeeded?r.value:void 0}function kl(t,e,n,r){if(e&&!e(t))return!1;const i=Yi(t,n);return i?r(i):!1}function Al(t,e){var n;return N0((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function C0(t){return"value"in t}function JSe(t){if(!g7(t)||!("binding"in t))return!1;const e=t.binding;return v7(e)}const Pd="http://www.w3.org/2000/svg";function DN(t){t.offsetHeight}function VHe(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function w7(t){return t.ontouchstart!==void 0}function jHe(){return globalThis}function HHe(){return jHe().document}function GHe(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const WHe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function TF(t,e){const n=t.createElementNS(Pd,"svg");return n.innerHTML=WHe[e],n}function eEe(t,e,n){t.insertBefore(e,t.children[n])}function x7(t){t.parentElement&&t.parentElement.removeChild(t)}function tEe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function $He(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function nEe(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function up(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Ad(t,e,n){up(t.value(e),n)}const KHe="tp";function Lr(t){return(n,r)=>[KHe,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const bP=Lr("lbl");function XHe(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}let rEe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(bP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(bP("l")),Ad(n.props,"label",o=>{gi(o)?this.element.classList.add(bP(void 0,"nol")):(this.element.classList.remove(bP(void 0,"nol")),$He(r),r.appendChild(XHe(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(bP("v")),this.element.appendChild(i),this.valueElement=i}},iEe=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new rEe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return kl(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Al(null,{label:this.props.get("label")})}};function qHe(){return["veryfirst","first","last","verylast"]}const fbe=Lr(""),mbe={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let MF=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{qHe().forEach(r=>{n.classList.remove(fbe(void 0,mbe[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(fbe(void 0,mbe[r]))})}),this.viewProps.handleDispose(()=>{x7(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return kl(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Al(null,Object.assign({},this.viewProps.exportState()))}},F0=class extends MF{constructor(e,n){if(n.value!==n.valueController.value)throw Qo.shouldNeverHappen();const r=n.valueController.viewProps,i=new iEe(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new rEe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return kl(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Al(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function gbe(t){const e=Object.assign({},t);return delete e.value,e}class sEe extends F0{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return kl(e,n=>super.importState(gbe(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return Al(()=>gbe(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function YHe(t){return C0(t)&&JSe(t.value)}class ZHe extends sEe{importState(e){return kl(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function QHe(t){return C0(t)&&FHe(t.value)}function oEe(t,e){for(;t.length<e;)t.push(void 0)}function JHe(t){const e=[];return oEe(e,t),e}function eGe(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function tGe(t,e){const n=[...eGe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):oEe(n,t.length),n}class nGe{constructor(e){this.emitter=new Is,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Ni(JHe(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=tGe(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function rGe(t){if(!("binding"in t))return!1;const e=t.binding;return v7(e)&&"read"in e&&!("write"in e)}class iGe extends sEe{exportState(){return Al(()=>super.exportState(),{binding:{readonly:!0}})}}function sGe(t){return C0(t)&&rGe(t.value)}let oGe=class extends $0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new PF(this))}),this}};function aGe(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function m1(t,e){return n=>{aGe(t,e,n)}}function S7(t,e){up(t,n=>{e.textContent=n??""})}const AG=Lr("btn");let lGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(AG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(AG("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(AG("t")),S7(n.props.value("title"),i),this.buttonElement.appendChild(i)}},uGe=class{constructor(e,n){this.emitter=new Is,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new lGe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return kl(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Al(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},vbe=class extends MF{constructor(e,n){const r=new uGe(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new iEe(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return kl(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Al(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},aEe=class{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const g1=new aEe("2.0.0");function Ia(t){return Object.assign({core:g1},t)}const cGe=Ia({id:"button",type:"blade",accept(t){const e=Yi(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new vbe(t.document,{blade:t.blade,buttonProps:vr.fromObject({title:t.params.title}),labelProps:vr.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof vbe?new oGe(t.controller):null}});function dGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function hGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function pGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function fGe(t){return g7(t)?"refresh"in t&&typeof t.refresh=="function":!1}function mGe(t,e){if(!dbe.isBindable(t))throw Qo.notBindable();return new dbe(t,e)}let gGe=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Is,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,mGe(e,n),i),h=this.pool_.createBindingApi(u);return this.add(h,i.index)}addFolder(e){return hGe(this,e)}addButton(e){return dGe(this,e)}addTab(e){return pGe(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{fGe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=JSe(n.value)?n.value.binding:null;this.emitter_.emit("change",new rM(r,i?i.target.read():n.value.rawValue,e.options.last))}},E7=class extends $0{constructor(e,n){super(e),this.rackApi_=new gGe(e.rackController,n)}},C7=class extends MF{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return kl(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Al(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function AW(t){return"rackController"in t}let vGe=class{constructor(e){this.emitter=new Is,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Qo.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function yGe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(C0(r)&&r.value===e)return r}return null}function bGe(t){return AW(t)?t.rackController.rack.bcSet_:null}let _Ge=class{constructor(e){var n,r;this.emitter=new Is,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new vGe(bGe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),C0(r))r.value.emitter.on("change",this.onChildValueChange_);else if(AW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(C0(r))r.value.emitter.off("change",this.onChildValueChange_);else if(AW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=yGe(this.find(C0),e.sender);if(!n)throw Qo.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},P7=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new _Ge({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&eEe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&x7(e.bladeController.view.element)}};function v1(){return new vr({positions:Ni([],{equals:Q8e})})}let T7=class lEe extends vr{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=vr.createCore(n);return new lEe(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!gi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Ad(this,"expanded",r),Ad(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function wGe(t,e){let n=0;return VHe(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),DN(e),n=e.clientHeight,t.set("temporaryExpanded",null),DN(e)}),n}function ybe(t,e){e.style.height=t.styleHeight}function M7(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),gi(t.get("expandedHeight"))){const n=wGe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),DN(e)}),t.emitter.on("change",()=>{ybe(t,e)}),ybe(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let uEe=class extends E7{constructor(e,n){super(e,n),this.emitter_=new Is,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new OHe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}};const cEe=Lr("cnt");let xGe=class{constructor(e,n){var r;this.className_=Lr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),cEe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ad(this.foldable_,"completed",m1(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Ad(n.props,"title",v=>{gi(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),S7(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const h=e.createElement("div");h.classList.add(this.className_("m")),this.buttonElement.appendChild(h);const m=e.createElement("div");m.classList.add(this.className_("c")),this.element.appendChild(m),this.containerElement=m}},IW=class extends C7{constructor(e,n){var r;const i=T7.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new xGe(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new P7({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,M7(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return kl(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Al(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const SGe=Ia({id:"folder",type:"blade",accept(t){const e=Yi(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new IW(t.document,{blade:t.blade,expanded:t.params.expanded,props:vr.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof IW?new uEe(t.controller,t.pool):null}}),EGe=Lr("");function bbe(t,e){return m1(t,EGe(void 0,e))}let K0=class dEe extends vr{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=rHe(Ni(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new dEe(vr.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){up(this.globalDisabled_,bbe(e,"disabled")),Ad(this,"hidden",bbe(e,"hidden"))}bindDisabled(e){up(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){up(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const _be=Lr("tbp");let CGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(_be()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(_be("c")),this.element.appendChild(r),this.containerElement=r}};const _P=Lr("tbi");let PGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(_P()),n.viewProps.bindClassModifiers(this.element),Ad(n.props,"selected",o=>{o?this.element.classList.add(_P(void 0,"sel")):this.element.classList.remove(_P(void 0,"sel"))});const r=e.createElement("button");r.classList.add(_P("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(_P("t")),S7(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},TGe=class{constructor(e,n){this.emitter=new Is,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new PGe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},RW=class extends C7{constructor(e,n){const r=new CGe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new P7({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new TGe(e,{props:n.itemProps,viewProps:K0.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Ad(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return kl(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Al(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},MGe=class extends E7{constructor(e,n){super(e,n),this.emitter_=new Is,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new RW(n,{blade:v1(),itemProps:vr.fromObject({selected:!1,title:e.title}),props:vr.fromObject({selected:!1}),viewProps:K0.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new LHe(this,e.rawValue))}},kGe=class extends E7{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const wbe=-1;let AGe=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Ni(!0),this.selectedIndex=Ni(wbe),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=wbe,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const wP=Lr("tab");let IGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(wP(),cEe()),n.viewProps.bindClassModifiers(this.element),up(n.empty,m1(this.element,wP(void 0,"nop")));const r=e.createElement("div");r.classList.add(wP("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(wP("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(wP("c")),this.element.appendChild(o),this.contentsElement=o}},xbe=class extends C7{constructor(e,n){const r=new AGe,i=new IGe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new P7({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;eEe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;x7(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const hEe=Ia({id:"tab",type:"blade",accept(t){const e=Yi(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new xbe(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new RW(t.document,{blade:v1(),itemProps:vr.fromObject({selected:!1,title:n.title}),props:vr.fromObject({selected:!1}),viewProps:K0.create()});e.add(r)}),e},api(t){return t.controller instanceof xbe?new MGe(t.controller,t.pool):t.controller instanceof RW?new kGe(t.controller,t.pool):null}});function RGe(t,e){const n=t.accept(e.params);if(!n)return null;const r=Yi(e.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return t.controller({blade:v1(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:K0.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let k7=class extends RT{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},DGe=class{constructor(){this.disabled=!1,this.emitter=new Is}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},OGe=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Is,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},iM=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function ON(t,e){if(t instanceof e)return t;if(t instanceof iM){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}let sM=class{constructor(e){this.values=vr.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}};function oM(t){var e;const n=kW;if(Array.isArray(t))return(e=Yi({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function A7(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function I7(t){return gi(t)?null:new sM(A7(t))}const IG=Lr("lst");let LGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(IG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(IG("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(IG("m")),i.appendChild(TF(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Ad(this.props_,"options",o=>{tEe(this.selectElement),o.forEach(u=>{const h=e.createElement("option");h.textContent=u.text,this.selectElement.appendChild(h)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Xm=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new LGe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return kl(e,null,n=>({options:n.required.custom(oM)}),n=>(this.props.set("options",A7(n.options)),!0))}exportProps(){return Al(null,{options:this.props.get("options")})}};const Sbe=Lr("pop");let NGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Sbe()),n.viewProps.bindClassModifiers(this.element),up(n.shows,m1(this.element,Sbe(void 0,"v")))}},pEe=class{constructor(e,n){this.shows=Ni(!1),this.viewProps=n.viewProps,this.view=new NGe(e,{shows:this.shows,viewProps:this.viewProps})}};const Ebe=Lr("txt");let FGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ebe()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Ebe("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},DT=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new FGe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);gi(i)||(this.value.rawValue=i),this.view.refresh()}};function BGe(t){return String(t)}function fEe(t){return t==="false"?!1:!!t}function Cbe(t){return BGe(t)}function UGe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const zGe=tl(0);function LN(t){return zGe(t)+"%"}function mEe(t){return String(t)}function DW(t){return t}function y1({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ya(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function OT(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function _p(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function VGe(t){return t==="ArrowUp"||t==="ArrowDown"}function gEe(t){return VGe(t)||t==="ArrowLeft"||t==="ArrowRight"}function RG(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}let X0=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Is,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(RG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(RG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(RG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const ou=Lr("txt");let jGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ou(),ou(void 0,"num")),n.arrayPosition&&this.element.classList.add(ou(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(ou("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ou()),this.inputElement.classList.add(ou("i"));const i=e.createElement("div");i.classList.add(ou("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(Pd,"svg");o.classList.add(ou("g")),this.knobElement.appendChild(o);const u=e.createElementNS(Pd,"path");u.classList.add(ou("gb")),o.appendChild(u),this.guideBodyElem_=u;const h=e.createElementNS(Pd,"path");h.classList.add(ou("gh")),o.appendChild(h),this.guideHeadElem_=h;const m=e.createElement("div");m.classList.add(Lr("tt")()),this.knobElement.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(ou(void 0,"drg"));return}this.element.classList.add(ou(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=js(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},aM=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Ni(null),this.view=new jGe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new X0(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);gi(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=Ya(this.props.get("keyScale"),OT(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ya(this.props.get("keyScale"),OT(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const DG=Lr("sld");let HGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(DG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(DG("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(DG("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=js($r(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},GGe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new HGe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue($r(js(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ya(this.props.get("keyScale"),_p(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ya(this.props.get("keyScale"),_p(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const OG=Lr("sldtxt");let WGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(OG());const r=e.createElement("div");r.classList.add(OG("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(OG("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},NN=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new GGe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new aM(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new WGe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return kl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Al(null,{max:e.get("max"),min:e.get("min")})}};function vEe(t){return{sliderProps:new vr({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new vr({formatter:Ni(t.formatter),keyScale:t.keyScale,pointerScale:Ni(t.pointerScale)})}}const $Ge={containerUnitSize:"cnt-usz"};function yEe(t){return`--${$Ge[t]}`}function LT(t){return QSe(t)}function Mm(t){if(MW(t))return Yi(t,LT)}function rp(t,e){if(!t)return;const n=[],r=qSe(t,e);r&&n.push(r);const i=YSe(t);return i&&n.push(i),new iM(n)}function KGe(t){return t?t.major===g1.major:!1}function bEe(t){if(t==="inline"||t==="popup")return t}function lM(t,e){t.write(e)}const mL=Lr("ckb");let XGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(mL()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(mL("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(mL("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(mL("w")),r.appendChild(o);const u=TF(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},qGe=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new XGe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function YGe(t){const e=[],n=I7(t.options);return n&&e.push(n),new iM(e)}const ZGe=Ia({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Yi(e,r=>({options:r.optional.custom(oM),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>fEe,constraint:t=>YGe(t.params),writer:t=>lM},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&ON(r,sM);return i?new Xm(e,{props:new vr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new qGe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Xm?new k7(t.controller):null}}),t0=Lr("col");let QGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(t0()),n.foldable.bindExpandedClass(this.element,t0(void 0,"expanded")),Ad(n.foldable,"completed",m1(this.element,t0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(t0("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(t0("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(t0("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(t0("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};function JGe(t,e,n){const r=js(t/255,0,1),i=js(e/255,0,1),o=js(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v=0,x=0;const E=(h+u)/2;return m!==0&&(x=m/(1-Math.abs(u+h-1)),r===u?v=(i-o)/m:i===u?v=2+(o-r)/m:v=4+(r-i)/m,v=v/6+(v<0?1:0)),[v*360,x*100,E*100]}function e9e(t,e,n){const r=(t%360+360)%360,i=js(e/100,0,1),o=js(n/100,0,1),u=(1-Math.abs(2*o-1))*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u/2;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function t9e(t,e,n){const r=js(t/255,0,1),i=js(e/255,0,1),o=js(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v;m===0?v=0:u===r?v=60*(((i-o)/m%6+6)%6):u===i?v=60*((o-r)/m+2):v=60*((r-i)/m+4);const x=u===0?0:m/u,E=u;return[v,x*100,E*100]}function _Ee(t,e,n){const r=$Se(t,360),i=js(e/100,0,1),o=js(n/100,0,1),u=o*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function n9e(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function r9e(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Id(t){return[t[0],t[1],t[2]]}function kF(t,e){return[t[0],t[1],t[2],e]}const i9e={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:n9e,rgb:e9e},hsv:{hsl:r9e,hsv:(t,e,n)=>[t,e,n],rgb:_Ee},rgb:{hsl:JGe,hsv:t9e,rgb:(t,e,n)=>[t,e,n]}};function n1(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function s9e(t,e){return t===e?e:$Se(t,e)}function wEe(t,e,n){var r;const i=n1(e,n);return[e==="rgb"?js(t[0],0,i[0]):s9e(t[0],i[0]),js(t[1],0,i[1]),js(t[2],0,i[2]),js((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function Pbe(t,e,n,r){const i=n1(e,n),o=n1(e,r);return t.map((u,h)=>u/i[h]*o[h])}function xEe(t,e,n){const r=Pbe(t,e.mode,e.type,"int"),i=i9e[e.mode][n.mode](...r);return Pbe(i,n.mode,"int",n.type)}let Xr=class SEe{static black(){return new SEe([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=wEe(e,n,this.type)}getComponents(e){return kF(xEe(Id(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const lm=Lr("colp");let o9e=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(lm()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(lm("hsv"));const i=e.createElement("div");i.classList.add(lm("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(lm("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(lm("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const h=e.createElement("div");h.classList.add(lm("a"));const m=e.createElement("div");m.classList.add(lm("ap")),m.appendChild(this.alphaViews_.palette.element),h.appendChild(m);const v=e.createElement("div");v.classList.add(lm("at")),v.appendChild(this.alphaViews_.text.element),h.appendChild(v),this.element.appendChild(h)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function a9e(t){return t==="int"?"int":t==="float"?"float":void 0}function R7(t){return Yi(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(a9e)}),expanded:e.optional.boolean,picker:e.optional.custom(bEe),readonly:e.optional.constant(!1)}))}function B0(t){return t?.1:1}function EEe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let D7=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=wEe(e,n,this.type)}getComponents(e){return kF(xEe(Id(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const l9e={int:(t,e)=>new Xr(t,e),float:(t,e)=>new D7(t,e)};function O7(t,e,n){return l9e[n](t,e)}function u9e(t){return t.type==="float"}function c9e(t){return t.type==="int"}function d9e(t){const e=t.getComponents(),n=n1(t.mode,"int");return new Xr([Math.round($r(e[0],0,1,0,n[0])),Math.round($r(e[1],0,1,0,n[1])),Math.round($r(e[2],0,1,0,n[2])),e[3]],t.mode)}function h9e(t){const e=t.getComponents(),n=n1(t.mode,"int");return new D7([$r(e[0],0,n[0],0,1),$r(e[1],0,n[1],0,1),$r(e[2],0,n[2],0,1),e[3]],t.mode)}function Pa(t,e){if(t.type===e)return t;if(c9e(t)&&e==="float")return h9e(t);if(u9e(t)&&e==="int")return d9e(t);throw Qo.shouldNeverHappen()}function p9e(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function vu(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const f9e={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function CEe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return f9e[r](n)}function PEe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[vu(e[1],255),vu(e[2],255),vu(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function m9e(t){const e=PEe(t);return e?new Xr(e,"rgb"):null}function TEe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[vu(e[1],255),vu(e[2],255),vu(e[3],255),vu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function g9e(t){const e=TEe(t);return e?new Xr(e,"rgb"):null}function MEe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[CEe(e[1]),vu(e[2],100),vu(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function v9e(t){const e=MEe(t);return e?new Xr(e,"hsl"):null}function kEe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[CEe(e[1]),vu(e[2],100),vu(e[3],100),vu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function y9e(t){const e=kEe(t);return e?new Xr(e,"hsl"):null}function AEe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function b9e(t){const e=AEe(t);return e?new Xr(e,"rgb"):null}function IEe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),$r(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),$r(parseInt(n[4],16),0,255,0,1)]:null}function _9e(t){const e=IEe(t);return e?new Xr(e,"rgb"):null}function REe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Tbe(t){return e=>{const n=REe(e);return n?O7(n,"rgb",t):null}}function DEe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Mbe(t){return e=>{const n=DEe(e);return n?O7(n,"rgb",t):null}}const w9e=[{parser:AEe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:IEe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:PEe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:TEe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:MEe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:kEe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:REe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:DEe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function x9e(t){return w9e.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function S9e(t,e="int"){const n=x9e(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function uM(t){const e=[b9e,_9e,m9e,g9e,v9e,y9e];t==="int"&&e.push(Tbe("int"),Mbe("int")),t==="float"&&e.push(Tbe("float"),Mbe("float"));const n=UGe(e);return r=>{const i=n(r);return i?Pa(i,t):null}}function E9e(t){const e=uM("int");if(typeof t!="string")return Xr.black();const n=e(t);return n??Xr.black()}function OEe(t){const e=js(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function L7(t,e="#"){const n=Id(t.getComponents("rgb")).map(OEe).join("");return`${e}${n}`}function N7(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(OEe).join("");return`${e}${r}`}function LEe(t){const e=tl(0),n=Pa(t,"int");return`rgb(${Id(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function UL(t){const e=tl(2),n=tl(0);return`rgba(${Pa(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function C9e(t){const e=[tl(0),LN,LN],n=Pa(t,"int");return`hsl(${Id(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function P9e(t){const e=[tl(0),LN,LN,tl(2)];return`hsla(${Pa(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function NEe(t,e){const n=tl(e==="float"?2:0),r=["r","g","b"],i=Pa(t,e);return`{${Id(i.getComponents("rgb")).map((u,h)=>`${r[h]}: ${n(u)}`).join(", ")}}`}function T9e(t){return e=>NEe(e,t)}function FEe(t,e){const n=tl(2),r=tl(e==="float"?2:0),i=["r","g","b","a"];return`{${Pa(t,e).getComponents("rgb").map((h,m)=>{const v=m===3?n:r;return`${i[m]}: ${v(h)}`}).join(", ")}}`}function M9e(t){return e=>FEe(e,t)}const k9e=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:L7},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:N7},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:LEe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:UL},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:C9e},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:P9e},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:T9e(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:M9e(e)}],[])];function BEe(t){return k9e.reduce((e,n)=>e||(p9e(n.format,t)?n.stringifier:null),null)}const xP=Lr("apl");let A9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(xP()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(xP("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(xP("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(xP("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(xP("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Xr([n[0],n[1],n[2],0],"rgb"),i=new Xr([n[0],n[1],n[2],255],"rgb"),o=["to right",UL(r),UL(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=UL(e);const u=$r(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}},I9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new A9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Xr([o,u,h,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ya(B0(!0),_p(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Xr([i,o,u,h+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ya(B0(!0),_p(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const nw=Lr("coltxt");function R9e(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}let D9e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(nw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(nw("m")),this.modeElem_=R9e(e),this.modeElem_.classList.add(nw("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(nw("mm")),i.appendChild(TF(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(nw("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),up(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){tEe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(nw("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function O9e(t){return tl(t==="float"?2:0)}function L9e(t,e,n){const r=n1(t,e)[n];return new nM({min:0,max:r})}function N9e(t,e,n){return new aM(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:vr.fromObject({formatter:O9e(e.colorType),keyScale:B0(!1),pointerScale:e.colorType==="float"?.01:1}),value:Ni(0,{constraint:L9e(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function F9e(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:bp,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=N9e(t,n,r);return y1({primary:e.value,secondary:i.value,forward(o){return Pa(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const h=e.colorMode,v=Pa(o,e.colorType).getComponents(h);v[r]=u;const x=O7(kF(Id(v),v[3]),h,e.colorType);return Pa(x,"int")}}),i})}function B9e(t,e){const n=new DT(t,{parser:uM("int"),props:vr.fromObject({formatter:L7}),value:Ni(Xr.black()),viewProps:e.viewProps});return y1({primary:e.value,secondary:n.value,forward:r=>new Xr(Id(r.getComponents()),r.mode),backward:(r,i)=>new Xr(kF(Id(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function U9e(t){return t!=="hex"}let z9e=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Ni(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new D9e(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return U9e(n)?F9e(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):B9e(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const LG=Lr("hpl");let V9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(LG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(LG("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(LG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=LEe(new Xr([n,100,100],"hsv"));const r=$r(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},j9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new V9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=$r(js(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Xr([r,o,u,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ya(B0(!1),_p(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Xr([i+n,o,u,h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ya(B0(!1),_p(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const NG=Lr("svp"),kbe=64;let H9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(NG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=kbe,r.width=kbe,r.classList.add(NG("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(NG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=GHe(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),h=u.data;for(let x=0;x<o;x++)for(let E=0;E<i;E++){const k=$r(E,0,i,0,100),D=$r(x,0,o,100,0),G=_Ee(r[0],k,D),N=(x*i+E)*4;h[N]=G[0],h[N+1]=G[1],h[N+2]=G[2],h[N+3]=255}e.putImageData(u,0,0);const m=$r(r[1],0,100,0,100);this.markerElem_.style.left=`${m}%`;const v=$r(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}},G9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new H9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=$r(e.point.x,0,e.bounds.width,0,100),i=$r(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Xr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){gEe(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=B0(!1),h=Ya(u,_p(e)),m=Ya(u,OT(e));h===0&&m===0||this.value.setRawValue(new Xr([n,r+h,i+m,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=B0(!1),r=Ya(n,_p(e)),i=Ya(n,OT(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},W9e=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new j9e(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new G9e(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new I9e(e,{value:this.value,viewProps:this.viewProps}),text:new aM(e,{parser:bp,props:vr.fromObject({pointerScale:.01,keyScale:.1,formatter:tl(2)}),value:Ni(0,{constraint:new nM({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&y1({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Xr(o,r.mode)}}),this.textsC_=new z9e(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new o9e(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const FG=Lr("colsw");let $9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(FG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(FG("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(FG("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=N7(e)}onValueChange_(){this.update_()}},K9e=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new $9e(e,{value:this.value,viewProps:this.viewProps})}},F7=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=T7.create(n.expanded),this.swatchC_=new K9e(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new DT(e,{parser:n.parser,props:vr.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new QGe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new pEe(e,{viewProps:this.viewProps}):null;const i=new W9e(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),y1({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),M7(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=nEe(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!w7(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function X9e(t){return Id(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function q9e(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function Y9e(t){return new Xr([t>>16&255,t>>8&255,t&255],"rgb")}function Z9e(t){return new Xr([t>>24&255,t>>16&255,t>>8&255,$r(t&255,0,255,0,1)],"rgb")}function Q9e(t){return typeof t!="number"?Xr.black():Y9e(t)}function J9e(t){return typeof t!="number"?Xr.black():Z9e(t)}function zL(t,e){return typeof t!="object"||gi(t)?!1:e in t&&typeof t[e]=="number"}function UEe(t){return zL(t,"r")&&zL(t,"g")&&zL(t,"b")}function zEe(t){return UEe(t)&&zL(t,"a")}function VEe(t){return UEe(t)}function B7(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Abe(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function eWe(t){const e=BEe(t);return e?(n,r)=>{lM(n,e(r))}:null}function tWe(t){const e=t?q9e:X9e;return(n,r)=>{lM(n,e(r))}}function nWe(t,e,n){const i=Pa(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function rWe(t,e,n){const i=Pa(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function iWe(t,e){return(n,r)=>{t?nWe(n,r,e):rWe(n,r,e)}}function sWe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function oWe(t){return t?e=>N7(e,"0x"):e=>L7(e,"0x")}function aWe(t){return"color"in t||t.view==="color"}const lWe=Ia({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!aWe(e))return null;const n=R7(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:sWe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?J9e:Q9e,equals:B7,writer:t=>tWe(t.params.supportsAlpha)},controller:t=>{var e,n;return new F7(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:oWe(t.params.supportsAlpha),parser:uM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function uWe(t,e){if(!VEe(t))return Pa(Xr.black(),e);if(e==="int"){const n=Abe(t);return new Xr(n,"rgb")}if(e==="float"){const n=Abe(t);return new D7(n,"rgb")}return Pa(Xr.black(),"int")}function cWe(t){return zEe(t)}function dWe(t){return e=>{const n=uWe(e,t);return Pa(n,"int")}}function hWe(t,e){return n=>t?FEe(n,e):NEe(n,e)}const pWe=Ia({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!VEe(t))return null;const r=R7(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=EEe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>dWe(t.params.colorType),equals:B7,writer:t=>iWe(cWe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=zEe(t.initialValue);return new F7(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:hWe(r,t.params.colorType),parser:uM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),fWe=Ia({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=S9e(t,EEe(e));if(!n)return null;const r=BEe(n);if(!r)return null;const i=R7(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>E9e,equals:B7,writer:t=>{const e=eWe(t.params.format);if(!e)throw Qo.notBindable();return e}},controller:t=>{var e,n;return new F7(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:uM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let U7=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}};const Ibe=Lr("pndtxt");let mWe=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Ibe()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(Ibe("a")),i.appendChild(r.element),this.element.appendChild(i)})}};function gWe(t,e,n){return new aM(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Ni(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let z7=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>gWe(e,n,i)),this.acs_.forEach((r,i)=>{y1({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const h=n.assembly.toComponents(o);return h[i]=u,n.assembly.fromComponents(h)}})}),this.view=new mWe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},vWe=class extends RT{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function yWe(t,e){const n=[],r=qSe(t,e);r&&n.push(r);const i=YSe(t);i&&n.push(i);const o=I7(t.options);return o&&n.push(o),new iM(n)}const bWe=Ia({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Yi(e,r=>Object.assign(Object.assign({},QSe(r)),{options:r.optional.custom(oM),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>WSe,constraint:t=>yWe(t.params,t.initialValue),writer:t=>lM},controller:t=>{const e=t.value,n=t.constraint,r=n&&ON(n,sM);if(r)return new Xm(t.document,{props:new vr({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=ZSe(t.params,e.rawValue),o=n&&ON(n,nM);return o?new NN(t.document,Object.assign(Object.assign({},vEe(Object.assign(Object.assign({},i),{keyScale:Ni(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:bp,value:e,viewProps:t.viewProps})):new aM(t.document,{parser:bp,props:vr.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof NN?new vWe(t.controller):t.controller.valueController instanceof Xm?new k7(t.controller):null}});let Vm=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(gi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const jEe={toComponents:t=>t.getComponents(),fromComponents:t=>new Vm(...t)},rw=Lr("p2d");let _We=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(rw()),n.viewProps.bindClassModifiers(this.element),up(n.expanded,m1(this.element,rw(void 0,"expanded")));const r=e.createElement("div");r.classList.add(rw("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(rw("b")),i.appendChild(TF(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(rw("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(rw("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};const um=Lr("p2dp");let wWe=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(um()),n.layout==="popup"&&this.element.classList.add(um(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(um("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(Pd,"svg");i.classList.add(um("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(Pd,"line");o.classList.add(um("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(Pd,"line");u.classList.add(um("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const h=e.createElementNS(Pd,"line");h.classList.add(um("l")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(h),this.lineElem_=h;const m=e.createElement("div");m.classList.add(um("m")),this.padElement.appendChild(m),this.markerElem_=m,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=$r(e,-r,+r,0,100),o=$r(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function Rbe(t,e,n){return[Ya(e[0],_p(t)),Ya(e[1],OT(t))*(n?1:-1)]}let xWe=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new wWe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=$r(e.point.x,0,e.bounds.width,-r,+r),o=$r(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Vm(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){gEe(e.key)&&e.preventDefault();const[n,r]=Rbe(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Vm(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=Rbe(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},SWe=class{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=T7.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new pEe(e,{viewProps:this.viewProps}):null;const o=new xWe(e,{layout:n.pickerLayout,props:new vr({invertsY:Ni(n.invertsY),max:Ni(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new z7(e,{assembly:jEe,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new _We(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),y1({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),M7(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=nEe(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!w7(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function EWe(t){return Vm.isObject(t)?new Vm(t.x,t.y):new Vm}function CWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function PWe(t,e){return new U7({assembly:jEe,components:[rp(Object.assign(Object.assign({},t),t.x),e.x),rp(Object.assign(Object.assign({},t),t.y),e.y)]})}function Dbe(t,e){var n,r;if(!gi(t.min)||!gi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=KSe(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function TWe(t,e){var n,r;const i=Dbe(N0(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=Dbe(N0(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function MWe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const kWe=Ia({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Vm.isObject(t))return null;const n=Yi(e,r=>Object.assign(Object.assign({},LT(r)),{expanded:r.optional.boolean,picker:r.optional.custom(bEe),readonly:r.optional.constant(!1),x:r.optional.custom(Mm),y:r.optional.object(Object.assign(Object.assign({},LT(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>EWe,constraint:t=>PWe(t.params,t.initialValue),equals:Vm.equals,writer:()=>CWe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new SWe(r,{axes:i.rawValue.getComponents().map((h,m)=>{var v;return _7({constraint:o.components[m],initialValue:h,params:N0(t.params,(v=u[m])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:MWe(t.params),max:TWe(t.params,i.rawValue),parser:bp,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});let Vw=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(gi(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const HEe={toComponents:t=>t.getComponents(),fromComponents:t=>new Vw(...t)};function AWe(t){return Vw.isObject(t)?new Vw(t.x,t.y,t.z):new Vw}function IWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function RWe(t,e){return new U7({assembly:HEe,components:[rp(Object.assign(Object.assign({},t),t.x),e.x),rp(Object.assign(Object.assign({},t),t.y),e.y),rp(Object.assign(Object.assign({},t),t.z),e.z)]})}const DWe=Ia({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Vw.isObject(t))return null;const n=Yi(e,r=>Object.assign(Object.assign({},LT(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Mm),y:r.optional.custom(Mm),z:r.optional.custom(Mm)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>AWe,constraint:t=>RWe(t.params,t.initialValue),equals:Vw.equals,writer:t=>IWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new z7(t.document,{assembly:HEe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return _7({constraint:n.components[o],initialValue:i,params:N0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:bp,value:e,viewProps:t.viewProps})}});let jw=class{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(gi(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const GEe={toComponents:t=>t.getComponents(),fromComponents:t=>new jw(...t)};function OWe(t){return jw.isObject(t)?new jw(t.x,t.y,t.z,t.w):new jw}function LWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function NWe(t,e){return new U7({assembly:GEe,components:[rp(Object.assign(Object.assign({},t),t.x),e.x),rp(Object.assign(Object.assign({},t),t.y),e.y),rp(Object.assign(Object.assign({},t),t.z),e.z),rp(Object.assign(Object.assign({},t),t.w),e.w)]})}const FWe=Ia({id:"input-point4d",type:"input",accept:(t,e)=>{if(!jw.isObject(t))return null;const n=Yi(e,r=>Object.assign(Object.assign({},LT(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Mm),x:r.optional.custom(Mm),y:r.optional.custom(Mm),z:r.optional.custom(Mm)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>OWe,constraint:t=>NWe(t.params,t.initialValue),equals:jw.equals,writer:t=>LWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new z7(t.document,{assembly:GEe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return _7({constraint:n.components[o],initialValue:i,params:N0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:bp,value:e,viewProps:t.viewProps})}});function BWe(t){const e=[],n=I7(t.options);return n&&e.push(n),new iM(e)}const UWe=Ia({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Yi(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(oM)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>mEe,constraint:t=>BWe(t.params),writer:t=>lM},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&ON(r,sM);return i?new Xm(e,{props:new vr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new DT(e,{parser:o=>o,props:vr.fromObject({formatter:DW}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Xm?new k7(t.controller):null}}),cM={monitor:{defaultInterval:200,defaultRows:3}},Obe=Lr("mll");let zWe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Obe()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(Obe("i")),r.style.height=`calc(var(${yEe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},V7=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new zWe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const Lbe=Lr("sgl");let VWe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Lbe()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Lbe("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},j7=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new VWe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const jWe=Ia({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Yi(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>fEe},controller:t=>{var e;return t.value.rawValue.length===1?new j7(t.document,{formatter:Cbe,value:t.value,viewProps:t.viewProps}):new V7(t.document,{formatter:Cbe,rows:(e=t.params.rows)!==null&&e!==void 0?e:cM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let HWe=class extends RT{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const cm=Lr("grl");let GWe=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cm()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Pd,"svg");r.classList.add(cm("g")),r.style.height=`calc(var(${yEe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(Pd,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(cm("t"),Lr("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,E)=>{if(x===void 0)return;const k=$r(E,0,n,0,e.width),D=$r(x,r,i,e.height,0);o.push([k,D].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){u.classList.remove(cm("t","a"));return}const m=$r(this.cursor_.rawValue,0,n,0,e.width),v=$r(h,r,i,e.height,0);u.style.left=`${m}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(h)}`,u.classList.contains(cm("t","a"))||(u.classList.add(cm("t","a"),cm("t","in")),DN(u),u.classList.remove(cm("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},WEe=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Ni(-1),this.view=new GWe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!w7(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new X0(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return kl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Al(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor($r(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor($r(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function OW(t){return gi(t.format)?tl(2):t.format}function WWe(t){var e;return t.value.rawValue.length===1?new j7(t.document,{formatter:OW(t.params),value:t.value,viewProps:t.viewProps}):new V7(t.document,{formatter:OW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:cM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function $We(t){var e,n,r;return new WEe(t.document,{formatter:OW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:cM.monitor.defaultRows,props:vr.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function Nbe(t){return t.view==="graph"}const KWe=Ia({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Yi(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Nbe(t)?64:1,reader:t=>WSe},controller:t=>Nbe(t.params)?$We(t):WWe(t),api:t=>t.controller.valueController instanceof WEe?new HWe(t.controller):null}),XWe=Ia({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Yi(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>mEe},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new V7(t.document,{formatter:DW,rows:(e=t.params.rows)!==null&&e!==void 0?e:cM.monitor.defaultRows,value:n,viewProps:t.viewProps}):new j7(t.document,{formatter:DW,value:n,viewProps:t.viewProps})}});class qWe{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class YWe{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function ZWe(t,e){var n;const r=t.accept(e.target.read(),e.params);if(gi(r))return null;const i={target:e.target,initialValue:r.initialValue,params:r.params},o=Yi(e.params,E=>({disabled:E.optional.boolean,hidden:E.optional.boolean,label:E.optional.string,tag:E.optional.string})),u=t.binding.reader(i),h=t.binding.constraint?t.binding.constraint(i):void 0,m=new YWe({reader:u,target:e.target,writer:t.binding.writer(i)}),v=new NHe(Ni(u(r.initialValue),{constraint:h,equals:t.binding.equals}),m),x=t.controller({constraint:h,document:e.document,initialValue:r.initialValue,params:r.params,value:v,viewProps:K0.create({disabled:o==null?void 0:o.disabled,hidden:o==null?void 0:o.hidden})});return new ZHe(e.document,{blade:v1(),props:vr.fromObject({label:"label"in e.params?(n=o==null?void 0:o.label)!==null&&n!==void 0?n:null:e.target.key}),tag:o==null?void 0:o.tag,value:v,valueController:x})}class QWe{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function JWe(t,e){return e===0?new DGe:new OGe(t,e??cM.monitor.defaultInterval)}function e$e(t,e){var n,r,i;const o=t.accept(e.target.read(),e.params);if(gi(o))return null;const u={target:e.target,initialValue:o.initialValue,params:o.params},h=Yi(e.params,k=>({bufferSize:k.optional.number,disabled:k.optional.boolean,hidden:k.optional.boolean,interval:k.optional.number,label:k.optional.string})),m=t.binding.reader(u),v=(r=(n=h==null?void 0:h.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))!==null&&r!==void 0?r:1,x=new nGe({binding:new QWe({reader:m,target:e.target}),bufferSize:v,ticker:JWe(e.document,h==null?void 0:h.interval)}),E=t.controller({document:e.document,params:o.params,value:x,viewProps:K0.create({disabled:h==null?void 0:h.disabled,hidden:h==null?void 0:h.hidden})});return E.viewProps.bindDisabled(x.ticker),E.viewProps.handleDispose(()=>{x.ticker.dispose()}),new iGe(e.document,{blade:v1(),props:vr.fromObject({label:"label"in e.params?(i=h==null?void 0:h.label)!==null&&i!==void 0?i:null:e.target.key}),value:x,valueController:E})}class t$e{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!KGe(n.core))throw Qo.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((i,o)=>i??ZWe(o,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((i,o)=>i??e$e(o,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const i=n.read();if(gi(i))throw new Qo({context:{key:n.key},type:"nomatchingcontroller"});const o=this.createInput_(e,n,r);if(o)return o;const u=this.createMonitor_(e,n,r);if(u)return u;throw new Qo({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((i,o)=>i??RGe(o,{document:e,params:n}),null);if(!r)throw new Qo({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new RT(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new RT(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(QHe(e))return this.createInputBindingApi_(e);if(sGe(e))return this.createMonitorBindingApi_(e);throw Qo.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(YHe(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:e,pool:this}),null);if(!n)throw Qo.shouldNeverHappen();return this.apiCache_.add(e,n)}}const n$e=new qWe;function r$e(){const t=new t$e(n$e);return[kWe,DWe,FWe,UWe,bWe,fWe,pWe,lWe,ZGe,jWe,XWe,KWe,cGe,SGe,hEe].forEach(e=>{t.register("core",e)}),t}class i$e extends $0{constructor(e){super(e),this.emitter_=new Is,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new rM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class s$e extends $0{}class o$e extends $0{constructor(e){super(e),this.emitter_=new Is,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new rM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class a$e extends $0{constructor(e){super(e),this.emitter_=new Is,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new rM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}const l$e=function(){return{id:"list",type:"blade",core:g1,accept(t){const e=Yi(t,n=>({options:n.required.custom(oM),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new sM(A7(t.params.options)),n=Ni(t.params.value,{constraint:e}),r=new Xm(t.document,{props:new vr({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new F0(t.document,{blade:t.blade,props:vr.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof F0)||!(t.controller.valueController instanceof Xm)?null:new i$e(t.controller)}}}();class u$e extends uEe{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class c$e extends IW{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const Fbe=Lr("spr");class d$e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Fbe()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(Fbe("r")),this.element.appendChild(r)}}class Bbe extends MF{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new d$e(e,{viewProps:n.viewProps})}))}}const h$e={id:"separator",type:"blade",core:g1,accept(t){const e=Yi(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new Bbe(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof Bbe?new s$e(t.controller):null}},p$e={id:"slider",type:"blade",core:g1,accept(t){const e=Yi(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,i=new nM({max:t.params.max,min:t.params.min}),o=Ni(r,{constraint:i}),u=new NN(t.document,Object.assign(Object.assign({},vEe({formatter:(n=t.params.format)!==null&&n!==void 0?n:RHe,keyScale:Ni(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:XSe(t.params,r)})),{parser:bp,value:o,viewProps:t.viewProps}));return new F0(t.document,{blade:t.blade,props:vr.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof F0)||!(t.controller.valueController instanceof NN)?null:new o$e(t.controller)}},f$e=function(){return{id:"text",type:"blade",core:g1,accept(t){const e=Yi(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Ni(t.params.value),r=new DT(t.document,{parser:t.params.parse,props:vr.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:i=>String(i)}),value:n,viewProps:t.viewProps});return new F0(t.document,{blade:t.blade,props:vr.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof F0)||!(t.controller.valueController instanceof DT)?null:new a$e(t.controller)}}}();function m$e(t){const e=t.createElement("div");return e.classList.add(Lr("dfw")()),t.body&&t.body.appendChild(e),e}function g$e(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class v$e extends u$e{constructor(e){var n,r;const i=e??{},o=(n=i.document)!==null&&n!==void 0?n:HHe(),u=r$e(),h=new c$e(o,{expanded:i.expanded,blade:v1(),props:vr.fromObject({title:i.title}),viewProps:K0.create()});super(h,u),this.pool_=u,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:m$e(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Qo.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Qo.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&g$e(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[l$e,h$e,p$e,hEe,f$e]})}}new aEe("4.0.0");function Oi(t){return t==null}function H7(t){return t!==null&&typeof t=="object"}function LW(t){return t!==null&&typeof t=="object"}function y$e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function U0(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return LW(o)&&LW(u)?Object.assign(Object.assign({},r),{[i]:U0(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function b$e(t){return H7(t)?"target"in t:!1}const _$e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Ea{static alreadyDisposed(){return new Ea({type:"alreadydisposed"})}static notBindable(){return new Ea({type:"notbindable"})}static notCompatible(e,n){return new Ea({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Ea({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Ea({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=_$e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class FN{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!FN.isBindable(r))throw Ea.notBindable();if(!(e in r))throw Ea.propertyNotFound(e);r[e]=n}}class na{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}}class w$e{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new na,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}}class x$e{constructor(e){this.emitter=new na,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class S$e{constructor(e){this.emitter=new na,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function ss(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new x$e(t):new w$e(t,e)}function E$e(t){return[new S$e(t),(e,n)=>{t.setRawValue(e,n)}]}class cr{constructor(e){this.emitter=new na,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:ss(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new cr(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class dM{constructor(e){this.values=cr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class G7{constructor(e){this.values=cr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return Oi(r)||(i=Math.max(i,r)),Oi(n)||(i=Math.min(i,n)),i}}class C$e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class P$e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const T$e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class M$e{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=T$e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const k$e={"+":t=>t,"-":t=>-t,"~":t=>~t};class A$e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=k$e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function W7(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function NT(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function I$e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function FT(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function R$e(t,e){const n=FT(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=FT(t,e);return i===""?"":r+i}function $7(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=R$e(t,e);return r===""?"":n+r}function $Ee(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=I$e(t,e);return e+=r.length,r===""?"":r+FT(t,e)}function D$e(t,e){const n=$Ee(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=FT(t,e);return e+=i.length,n+r+i+$7(t,e)}function O$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=FT(t,e);return e+=r.length,r===""?"":n+r+$7(t,e)}function L$e(t,e){const n=$Ee(t,e);return e+=n.length,n===""?"":n+$7(t,e)}const N$e=W7([D$e,O$e,L$e]);function F$e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function B$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=F$e(t,e);return r===""?"":n+r}function U$e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function z$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=U$e(t,e);return r===""?"":n+r}function V$e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function j$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=V$e(t,e);return r===""?"":n+r}const H$e=W7([B$e,z$e,j$e]),G$e=W7([H$e,N$e]);function W$e(t,e){const n=G$e(t,e);return e+=n.length,n===""?null:{evaluable:new P$e(n),cursor:e}}function $$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=XEe(t,e);if(!r)return null;e=r.cursor,e+=NT(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function K$e(t,e){var n;return(n=W$e(t,e))!==null&&n!==void 0?n:$$e(t,e)}function KEe(t,e){const n=K$e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=KEe(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new A$e(r,i.evaluable)}):null}function X$e(t,e,n){n+=NT(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=NT(e,n).length,{cursor:n,operator:r}):null}function q$e(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=X$e(e,n,r);if(!u)break;r=u.cursor;const h=t(n,r);if(!h)return null;r=h.cursor,o=new M$e(u.operator,o,h.evaluable)}return o?{cursor:r,evaluable:o}:null}}const Y$e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>q$e(t,e),KEe);function XEe(t,e){return e+=NT(t,e).length,Y$e(t,e)}function Z$e(t){const e=XEe(t,0);return!e||e.cursor+NT(t,e.cursor).length!==t.length?null:e.evaluable}function Cc(t){var e;const n=Z$e(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function K7(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Cc(t);if(!Oi(e))return e}return 0}function Mo(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ar(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function Ube(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ki(t,e,n){return Math.min(Math.max(t,e),n)}function qEe(t,e){return(t%e+e)%e}function Q$e(t,e){return Oi(t.step)?Math.max(Ube(e),2):Ube(t.step)}function YEe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function J$e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function X7(t,e){return Oi(t.step)?null:new C$e(t.step,e)}function q7(t){return!Oi(t.max)&&!Oi(t.min)?new dM({max:t.max,min:t.min}):!Oi(t.max)||!Oi(t.min)?new G7({max:t.max,min:t.min}):null}function Y7(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:Mo(Q$e(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:YEe(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:J$e(t,e)}}function Z7(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function Q7(t){return{constraint:t.constraint,textProps:cr.fromObject(Y7(t.params,t.initialValue))}}class q0{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class b1{constructor(e){this.target=e}}class AF extends b1{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class e7e extends b1{constructor(e,n){super(e),this.expanded=n}}class t7e extends b1{constructor(e,n){super(e),this.index=n}}class J7 extends q0{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new na,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new AF(this,n.binding.target.read(),e.options.last))}}function n7e(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],h=u(t[o]);return h.succeeded?Object.assign(Object.assign({},i),{[o]:h.value}):void 0},{});return r}function r7e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function i7e(t){return t===null?!1:typeof t=="object"}function $h(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function zbe(t){return{custom:e=>$h(e)(t),boolean:$h(e=>typeof e=="boolean"?e:void 0)(t),number:$h(e=>typeof e=="number"?e:void 0)(t),string:$h(e=>typeof e=="string"?e:void 0)(t),function:$h(e=>typeof e=="function"?e:void 0)(t),constant:e=>$h(n=>n===e?e:void 0)(t),raw:$h(e=>e)(t),object:e=>$h(n=>{if(i7e(n))return n7e(n,e)})(t),array:e=>$h(n=>{if(Array.isArray(n))return r7e(n,e)})(t)}}const NW={optional:zbe(!0),required:zbe(!1)};function os(t,e){const n=e(NW),r=NW.required.object(n)(t);return r.succeeded?r.value:void 0}function Tc(t,e,n,r){if(e&&!e(t))return!1;const i=os(t,n);return i?r(i):!1}function Mc(t,e){var n;return U0((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function VL(t){return"value"in t}function s7e(t){if(!H7(t)||!("binding"in t))return!1;const e=t.binding;return b$e(e)}const no="http://www.w3.org/2000/svg";function BN(t){t.offsetHeight}function o7e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function IF(t){return t.ontouchstart!==void 0}function a7e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const l7e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function RF(t,e){const n=t.createElementNS(no,"svg");return n.innerHTML=l7e[e],n}function ZEe(t,e,n){t.insertBefore(e,t.children[n])}function eK(t){t.parentElement&&t.parentElement.removeChild(t)}function QEe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function u7e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function tK(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function _u(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Su(t,e,n){_u(t.value(e),n)}const c7e="tp";function hr(t){return(n,r)=>[c7e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const SP=hr("lbl");function d7e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class JEe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(SP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(SP("l")),Su(n.props,"label",o=>{Oi(o)?this.element.classList.add(SP(void 0,"nol")):(this.element.classList.remove(SP(void 0,"nol")),u7e(r),r.appendChild(d7e(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(SP("v")),this.element.appendChild(i),this.valueElement=i}}class DF{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new JEe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Tc(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Mc(null,{label:this.props.get("label")})}}function h7e(){return["veryfirst","first","last","verylast"]}const Vbe=hr(""),jbe={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class hM{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{h7e().forEach(r=>{n.classList.remove(Vbe(void 0,jbe[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Vbe(void 0,jbe[r]))})}),this.viewProps.handleDispose(()=>{eK(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Tc(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Mc(null,Object.assign({},this.viewProps.exportState()))}}class UN extends hM{constructor(e,n){if(n.value!==n.valueController.value)throw Ea.shouldNeverHappen();const r=n.valueController.viewProps,i=new DF(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new JEe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Tc(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Mc(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function eCe(t,e){for(;t.length<e;)t.push(void 0)}function p7e(t){const e=[];return eCe(e,t),e}function f7e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function m7e(t,e){const n=[...f7e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):eCe(n,t.length),n}class g7e extends q0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new b1(this))}),this}}function v7e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function ng(t,e){return n=>{v7e(t,e,n)}}function nK(t,e){_u(t,n=>{e.textContent=n??""})}const BG=hr("btn");class y7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(BG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(BG("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(BG("t")),nK(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class tCe{constructor(e,n){this.emitter=new na,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new y7e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Tc(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Mc(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class Hbe extends hM{constructor(e,n){const r=new tCe(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new DF(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Tc(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Mc(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class b7e{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const _7e=new b7e("2.0.0-beta.2");function bs(t){return Object.assign({core:_7e},t)}bs({id:"button",type:"blade",accept(t){const e=os(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Hbe(t.document,{blade:t.blade,buttonProps:cr.fromObject({title:t.params.title}),labelProps:cr.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Hbe?new g7e(t.controller):null}});function w7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function x7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function S7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function E7e(t){return H7(t)?"refresh"in t&&typeof t.refresh=="function":!1}function C7e(t,e){if(!FN.isBindable(t))throw Ea.notBindable();return new FN(t,e)}class P7e{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new na,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,C7e(e,n),i),h=this.pool_.createBindingApi(u);return this.add(h,i.index)}addFolder(e){return x7e(this,e)}addButton(e){return w7e(this,e)}addTab(e){return S7e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{E7e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=s7e(n.value)?n.value.binding:null;this.emitter_.emit("change",new AF(r,i?i.target.read():n.value.rawValue,e.options.last))}}class rK extends q0{constructor(e,n){super(e),this.rackApi_=new P7e(e.rackController,n)}}class iK extends hM{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Tc(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Mc(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function FW(t){return"rackController"in t}class T7e{constructor(e){this.emitter=new na,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Ea.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function M7e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(VL(r)&&r.value===e)return r}return null}function k7e(t){return FW(t)?t.rackController.rack.bcSet_:null}class A7e{constructor(e){var n,r;this.emitter=new na,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new T7e(k7e),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),VL(r))r.value.emitter.on("change",this.onChildValueChange_);else if(FW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(VL(r))r.value.emitter.off("change",this.onChildValueChange_);else if(FW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=M7e(this.find(VL),e.sender);if(!n)throw Ea.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class sK{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new A7e({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&ZEe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&eK(e.bladeController.view.element)}}function nCe(){return new cr({positions:ss([],{equals:y$e})})}class _1 extends cr{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=cr.createCore(n);return new _1(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Oi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Su(this,"expanded",r),Su(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function I7e(t,e){let n=0;return o7e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),BN(e),n=e.clientHeight,t.set("temporaryExpanded",null),BN(e)}),n}function Gbe(t,e){e.style.height=t.styleHeight}function OF(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Oi(t.get("expandedHeight"))){const n=I7e(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),BN(e)}),t.emitter.on("change",()=>{Gbe(t,e)}),Gbe(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class R7e extends rK{constructor(e,n){super(e,n),this.emitter_=new na,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new e7e(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}}const rCe=hr("cnt");class D7e{constructor(e,n){var r;this.className_=hr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),rCe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Su(this.foldable_,"completed",ng(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Su(n.props,"title",v=>{Oi(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),nK(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const h=e.createElement("div");h.classList.add(this.className_("m")),this.buttonElement.appendChild(h);const m=e.createElement("div");m.classList.add(this.className_("c")),this.element.appendChild(m),this.containerElement=m}}class Wbe extends iK{constructor(e,n){var r;const i=_1.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new D7e(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new sK({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,OF(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Tc(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Mc(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}bs({id:"folder",type:"blade",accept(t){const e=os(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new Wbe(t.document,{blade:t.blade,expanded:t.params.expanded,props:cr.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof Wbe?new R7e(t.controller,t.pool):null}});const O7e=hr("");function $be(t,e){return ng(t,O7e(void 0,e))}class wp extends cr{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=E$e(ss(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new wp(cr.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){_u(this.globalDisabled_,$be(e,"disabled")),Su(this,"hidden",$be(e,"hidden"))}bindDisabled(e){_u(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){_u(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Kbe=hr("tbp");class L7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Kbe()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Kbe("c")),this.element.appendChild(r),this.containerElement=r}}const EP=hr("tbi");class N7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(EP()),n.viewProps.bindClassModifiers(this.element),Su(n.props,"selected",o=>{o?this.element.classList.add(EP(void 0,"sel")):this.element.classList.remove(EP(void 0,"sel"))});const r=e.createElement("button");r.classList.add(EP("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(EP("t")),nK(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class F7e{constructor(e,n){this.emitter=new na,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new N7e(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class BW extends iK{constructor(e,n){const r=new L7e(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new sK({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new F7e(e,{props:n.itemProps,viewProps:wp.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Su(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Tc(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Mc(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class B7e extends rK{constructor(e,n){super(e,n),this.emitter_=new na,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new BW(n,{blade:nCe(),itemProps:cr.fromObject({selected:!1,title:e.title}),props:cr.fromObject({selected:!1}),viewProps:wp.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new t7e(this,e.rawValue))}}class U7e extends rK{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const Xbe=-1;class z7e{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ss(!0),this.selectedIndex=ss(Xbe),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Xbe,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const CP=hr("tab");class V7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(CP(),rCe()),n.viewProps.bindClassModifiers(this.element),_u(n.empty,ng(this.element,CP(void 0,"nop")));const r=e.createElement("div");r.classList.add(CP("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(CP("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(CP("c")),this.element.appendChild(o),this.contentsElement=o}}class qbe extends iK{constructor(e,n){const r=new z7e,i=new V7e(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new sK({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;ZEe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;eK(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}bs({id:"tab",type:"blade",accept(t){const e=os(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new qbe(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new BW(t.document,{blade:nCe(),itemProps:cr.fromObject({selected:!1,title:n.title}),props:cr.fromObject({selected:!1}),viewProps:wp.create()});e.add(r)}),e},api(t){return t.controller instanceof qbe?new B7e(t.controller,t.pool):t.controller instanceof BW?new U7e(t.controller,t.pool):null}});class oK extends J7{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class j7e{constructor(){this.disabled=!1,this.emitter=new na}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class H7e{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new na,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class w1{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function BT(t,e){if(t instanceof e)return t;if(t instanceof w1){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}class LF{constructor(e){this.values=cr.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function NF(t){var e;const n=NW;if(Array.isArray(t))return(e=os({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function iCe(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function aK(t){return Oi(t)?null:new LF(iCe(t))}const UG=hr("lst");class G7e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(UG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(UG("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(UG("m")),i.appendChild(RF(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Su(this.props_,"options",o=>{QEe(this.selectElement),o.forEach(u=>{const h=e.createElement("option");h.textContent=u.text,this.selectElement.appendChild(h)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class r1{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new G7e(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Tc(e,null,n=>({options:n.required.custom(NF)}),n=>(this.props.set("options",iCe(n.options)),!0))}exportProps(){return Mc(null,{options:this.props.get("options")})}}const Ybe=hr("pop");class W7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ybe()),n.viewProps.bindClassModifiers(this.element),_u(n.shows,ng(this.element,Ybe(void 0,"v")))}}class lK{constructor(e,n){this.shows=ss(!1),this.viewProps=n.viewProps,this.view=new W7e(e,{shows:this.shows,viewProps:this.viewProps})}}const Zbe=hr("txt");class $7e{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Zbe()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Zbe("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class FF{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new $7e(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Oi(i)||(this.value.rawValue=i),this.view.refresh()}}function K7e(t){return String(t)}function uK(t){return t==="false"?!1:!!t}function Qbe(t){return K7e(t)}function X7e(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const q7e=Mo(0);function zN(t){return q7e(t)+"%"}function cK(t){return String(t)}function UW(t){return t}function Y0({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function ro(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function z0(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Pc(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function Y7e(t){return t==="ArrowUp"||t==="ArrowDown"}function VN(t){return Y7e(t)||t==="ArrowLeft"||t==="ArrowRight"}function zG(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}class Sp{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new na,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(zG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(zG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(zG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const au=hr("txt");class Z7e{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(au(),au(void 0,"num")),n.arrayPosition&&this.element.classList.add(au(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(au("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(au()),this.inputElement.classList.add(au("i"));const i=e.createElement("div");i.classList.add(au("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(no,"svg");o.classList.add(au("g")),this.knobElement.appendChild(o);const u=e.createElementNS(no,"path");u.classList.add(au("gb")),o.appendChild(u),this.guideBodyElem_=u;const h=e.createElementNS(no,"path");h.classList.add(au("gh")),o.appendChild(h),this.guideHeadElem_=h;const m=e.createElement("div");m.classList.add(hr("tt")()),this.knobElement.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(au(void 0,"drg"));return}this.element.classList.add(au(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Ki(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class pM{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=ss(null),this.view=new Z7e(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Sp(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Oi(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=ro(this.props.get("keyScale"),z0(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){ro(this.props.get("keyScale"),z0(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const VG=hr("sld");class Q7e{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(VG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(VG("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(VG("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Ki(ar(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class J7e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Q7e(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sp(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(ar(Ki(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=ro(this.props.get("keyScale"),Pc(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){ro(this.props.get("keyScale"),Pc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const jG=hr("sldtxt");class eKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(jG());const r=e.createElement("div");r.classList.add(jG("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(jG("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Jbe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new J7e(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new pM(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new eKe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Tc(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Mc(null,{max:e.get("max"),min:e.get("min")})}}function tKe(t){return{sliderProps:new cr({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new cr({formatter:ss(t.formatter),keyScale:t.keyScale,pointerScale:ss(t.pointerScale)})}}const nKe={containerUnitSize:"cnt-usz"};function sCe(t){return`--${nKe[t]}`}class oCe{constructor(e,n){const r=hr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function UT(t){return Z7(t)}function km(t){if(LW(t))return os(t,UT)}function ip(t,e){if(!t)return;const n=[],r=X7(t,e);r&&n.push(r);const i=q7(t);return i&&n.push(i),new w1(n)}function aCe(t){if(t==="inline"||t==="popup")return t}function rg(t,e){t.write(e)}const gL=hr("ckb");class rKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(gL()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(gL("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(gL("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(gL("w")),r.appendChild(o);const u=RF(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class iKe{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new rKe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function sKe(t){const e=[],n=aK(t.options);return n&&e.push(n),new w1(e)}bs({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=os(e,r=>({options:r.optional.custom(NF),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>uK,constraint:t=>sKe(t.params),writer:t=>rg},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&BT(r,LF);return i?new r1(e,{props:new cr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new iKe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof r1?new oK(t.controller):null}});const n0=hr("col");class oKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(n0()),n.foldable.bindExpandedClass(this.element,n0(void 0,"expanded")),Su(n.foldable,"completed",ng(this.element,n0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(n0("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(n0("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(n0("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(n0("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}function aKe(t,e,n){const r=Ki(t/255,0,1),i=Ki(e/255,0,1),o=Ki(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v=0,x=0;const E=(h+u)/2;return m!==0&&(x=m/(1-Math.abs(u+h-1)),r===u?v=(i-o)/m:i===u?v=2+(o-r)/m:v=4+(r-i)/m,v=v/6+(v<0?1:0)),[v*360,x*100,E*100]}function lKe(t,e,n){const r=(t%360+360)%360,i=Ki(e/100,0,1),o=Ki(n/100,0,1),u=(1-Math.abs(2*o-1))*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u/2;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function uKe(t,e,n){const r=Ki(t/255,0,1),i=Ki(e/255,0,1),o=Ki(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v;m===0?v=0:u===r?v=60*(((i-o)/m%6+6)%6):u===i?v=60*((o-r)/m+2):v=60*((r-i)/m+4);const x=u===0?0:m/u,E=u;return[v,x*100,E*100]}function lCe(t,e,n){const r=qEe(t,360),i=Ki(e/100,0,1),o=Ki(n/100,0,1),u=o*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function cKe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function dKe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Rd(t){return[t[0],t[1],t[2]]}function BF(t,e){return[t[0],t[1],t[2],e]}const hKe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:cKe,rgb:lKe},hsv:{hsl:dKe,hsv:(t,e,n)=>[t,e,n],rgb:lCe},rgb:{hsl:aKe,hsv:uKe,rgb:(t,e,n)=>[t,e,n]}};function i1(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function pKe(t,e){return t===e?e:qEe(t,e)}function uCe(t,e,n){var r;const i=i1(e,n);return[e==="rgb"?Ki(t[0],0,i[0]):pKe(t[0],i[0]),Ki(t[1],0,i[1]),Ki(t[2],0,i[2]),Ki((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function e_e(t,e,n,r){const i=i1(e,n),o=i1(e,r);return t.map((u,h)=>u/i[h]*o[h])}function cCe(t,e,n){const r=e_e(t,e.mode,e.type,"int"),i=hKe[e.mode][n.mode](...r);return e_e(i,n.mode,"int",n.type)}class Gr{static black(){return new Gr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=uCe(e,n,this.type)}getComponents(e){return BF(cCe(Rd(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const dm=hr("colp");class fKe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(dm()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(dm("hsv"));const i=e.createElement("div");i.classList.add(dm("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(dm("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(dm("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const h=e.createElement("div");h.classList.add(dm("a"));const m=e.createElement("div");m.classList.add(dm("ap")),m.appendChild(this.alphaViews_.palette.element),h.appendChild(m);const v=e.createElement("div");v.classList.add(dm("at")),v.appendChild(this.alphaViews_.text.element),h.appendChild(v),this.element.appendChild(h)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function mKe(t){return t==="int"?"int":t==="float"?"float":void 0}function dK(t){return os(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(mKe)}),expanded:e.optional.boolean,picker:e.optional.custom(aCe),readonly:e.optional.constant(!1)}))}function V0(t){return t?.1:1}function dCe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class hK{constructor(e,n){this.type="float",this.mode=n,this.comps_=uCe(e,n,this.type)}getComponents(e){return BF(cCe(Rd(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const gKe={int:(t,e)=>new Gr(t,e),float:(t,e)=>new hK(t,e)};function pK(t,e,n){return gKe[n](t,e)}function vKe(t){return t.type==="float"}function yKe(t){return t.type==="int"}function bKe(t){const e=t.getComponents(),n=i1(t.mode,"int");return new Gr([Math.round(ar(e[0],0,1,0,n[0])),Math.round(ar(e[1],0,1,0,n[1])),Math.round(ar(e[2],0,1,0,n[2])),e[3]],t.mode)}function _Ke(t){const e=t.getComponents(),n=i1(t.mode,"int");return new hK([ar(e[0],0,n[0],0,1),ar(e[1],0,n[1],0,1),ar(e[2],0,n[2],0,1),e[3]],t.mode)}function Ta(t,e){if(t.type===e)return t;if(yKe(t)&&e==="float")return _Ke(t);if(vKe(t)&&e==="int")return bKe(t);throw Ea.shouldNeverHappen()}function wKe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function yu(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const xKe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function hCe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return xKe[r](n)}function pCe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[yu(e[1],255),yu(e[2],255),yu(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function SKe(t){const e=pCe(t);return e?new Gr(e,"rgb"):null}function fCe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[yu(e[1],255),yu(e[2],255),yu(e[3],255),yu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function EKe(t){const e=fCe(t);return e?new Gr(e,"rgb"):null}function mCe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[hCe(e[1]),yu(e[2],100),yu(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function CKe(t){const e=mCe(t);return e?new Gr(e,"hsl"):null}function gCe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[hCe(e[1]),yu(e[2],100),yu(e[3],100),yu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function PKe(t){const e=gCe(t);return e?new Gr(e,"hsl"):null}function vCe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function TKe(t){const e=vCe(t);return e?new Gr(e,"rgb"):null}function yCe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ar(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),ar(parseInt(n[4],16),0,255,0,1)]:null}function MKe(t){const e=yCe(t);return e?new Gr(e,"rgb"):null}function bCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function t_e(t){return e=>{const n=bCe(e);return n?pK(n,"rgb",t):null}}function _Ce(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function n_e(t){return e=>{const n=_Ce(e);return n?pK(n,"rgb",t):null}}const kKe=[{parser:vCe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:yCe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:pCe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:fCe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:mCe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:gCe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:bCe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:_Ce,result:{alpha:!0,mode:"rgb",notation:"object"}}];function AKe(t){return kKe.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function IKe(t,e="int"){const n=AKe(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function fM(t){const e=[TKe,MKe,SKe,EKe,CKe,PKe];t==="int"&&e.push(t_e("int"),n_e("int")),t==="float"&&e.push(t_e("float"),n_e("float"));const n=X7e(e);return r=>{const i=n(r);return i?Ta(i,t):null}}function RKe(t){const e=fM("int");if(typeof t!="string")return Gr.black();const n=e(t);return n??Gr.black()}function wCe(t){const e=Ki(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function fK(t,e="#"){const n=Rd(t.getComponents("rgb")).map(wCe).join("");return`${e}${n}`}function mK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(wCe).join("");return`${e}${r}`}function xCe(t){const e=Mo(0),n=Ta(t,"int");return`rgb(${Rd(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function jL(t){const e=Mo(2),n=Mo(0);return`rgba(${Ta(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function DKe(t){const e=[Mo(0),zN,zN],n=Ta(t,"int");return`hsl(${Rd(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function OKe(t){const e=[Mo(0),zN,zN,Mo(2)];return`hsla(${Ta(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function SCe(t,e){const n=Mo(e==="float"?2:0),r=["r","g","b"],i=Ta(t,e);return`{${Rd(i.getComponents("rgb")).map((u,h)=>`${r[h]}: ${n(u)}`).join(", ")}}`}function LKe(t){return e=>SCe(e,t)}function ECe(t,e){const n=Mo(2),r=Mo(e==="float"?2:0),i=["r","g","b","a"];return`{${Ta(t,e).getComponents("rgb").map((h,m)=>{const v=m===3?n:r;return`${i[m]}: ${v(h)}`}).join(", ")}}`}function NKe(t){return e=>ECe(e,t)}const FKe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:fK},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:mK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:xCe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:jL},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:DKe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:OKe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:LKe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:NKe(e)}],[])];function CCe(t){return FKe.reduce((e,n)=>e||(wKe(n.format,t)?n.stringifier:null),null)}const PP=hr("apl");class BKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(PP()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(PP("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(PP("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(PP("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(PP("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Gr([n[0],n[1],n[2],0],"rgb"),i=new Gr([n[0],n[1],n[2],255],"rgb"),o=["to right",jL(r),jL(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=jL(e);const u=ar(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}}class UKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new BKe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Gr([o,u,h,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=ro(V0(!0),Pc(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Gr([i,o,u,h+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){ro(V0(!0),Pc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const iw=hr("coltxt");function zKe(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}class VKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(iw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(iw("m")),this.modeElem_=zKe(e),this.modeElem_.classList.add(iw("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(iw("mm")),i.appendChild(RF(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(iw("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),_u(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){QEe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(iw("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function jKe(t){return Mo(t==="float"?2:0)}function HKe(t,e,n){const r=i1(t,e)[n];return new dM({min:0,max:r})}function GKe(t,e,n){return new pM(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:cr.fromObject({formatter:jKe(e.colorType),keyScale:V0(!1),pointerScale:e.colorType==="float"?.01:1}),value:ss(0,{constraint:HKe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function WKe(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Cc,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=GKe(t,n,r);return Y0({primary:e.value,secondary:i.value,forward(o){return Ta(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const h=e.colorMode,v=Ta(o,e.colorType).getComponents(h);v[r]=u;const x=pK(BF(Rd(v),v[3]),h,e.colorType);return Ta(x,"int")}}),i})}function $Ke(t,e){const n=new FF(t,{parser:fM("int"),props:cr.fromObject({formatter:fK}),value:ss(Gr.black()),viewProps:e.viewProps});return Y0({primary:e.value,secondary:n.value,forward:r=>new Gr(Rd(r.getComponents()),r.mode),backward:(r,i)=>new Gr(BF(Rd(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function KKe(t){return t!=="hex"}class XKe{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=ss(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new VKe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return KKe(n)?WKe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):$Ke(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const HG=hr("hpl");class qKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(HG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(HG("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(HG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=xCe(new Gr([n,100,100],"hsv"));const r=ar(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class YKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new qKe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=ar(Ki(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Gr([r,o,u,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=ro(V0(!1),Pc(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Gr([i+n,o,u,h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){ro(V0(!1),Pc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const GG=hr("svp"),r_e=64;class ZKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(GG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=r_e,r.width=r_e,r.classList.add(GG("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(GG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=a7e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),h=u.data;for(let x=0;x<o;x++)for(let E=0;E<i;E++){const k=ar(E,0,i,0,100),D=ar(x,0,o,100,0),G=lCe(r[0],k,D),N=(x*i+E)*4;h[N]=G[0],h[N+1]=G[1],h[N+2]=G[2],h[N+3]=255}e.putImageData(u,0,0);const m=ar(r[1],0,100,0,100);this.markerElem_.style.left=`${m}%`;const v=ar(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}}class QKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ZKe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=ar(e.point.x,0,e.bounds.width,0,100),i=ar(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Gr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){VN(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=V0(!1),h=ro(u,Pc(e)),m=ro(u,z0(e));h===0&&m===0||this.value.setRawValue(new Gr([n,r+h,i+m,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=V0(!1),r=ro(n,Pc(e)),i=ro(n,z0(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class JKe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new YKe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new QKe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new UKe(e,{value:this.value,viewProps:this.viewProps}),text:new pM(e,{parser:Cc,props:cr.fromObject({pointerScale:.01,keyScale:.1,formatter:Mo(2)}),value:ss(0,{constraint:new dM({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Y0({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Gr(o,r.mode)}}),this.textsC_=new XKe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new fKe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const WG=hr("colsw");class eXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(WG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(WG("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(WG("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=mK(e)}onValueChange_(){this.update_()}}class tXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new eXe(e,{value:this.value,viewProps:this.viewProps})}}class gK{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=_1.create(n.expanded),this.swatchC_=new tXe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new FF(e,{parser:n.parser,props:cr.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new oKe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new lK(e,{viewProps:this.viewProps}):null;const i=new JKe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Y0({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),OF(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=tK(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!IF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function nXe(t){return Rd(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function rXe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function iXe(t){return new Gr([t>>16&255,t>>8&255,t&255],"rgb")}function sXe(t){return new Gr([t>>24&255,t>>16&255,t>>8&255,ar(t&255,0,255,0,1)],"rgb")}function oXe(t){return typeof t!="number"?Gr.black():iXe(t)}function aXe(t){return typeof t!="number"?Gr.black():sXe(t)}function HL(t,e){return typeof t!="object"||Oi(t)?!1:e in t&&typeof t[e]=="number"}function PCe(t){return HL(t,"r")&&HL(t,"g")&&HL(t,"b")}function TCe(t){return PCe(t)&&HL(t,"a")}function MCe(t){return PCe(t)}function vK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function i_e(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function lXe(t){const e=CCe(t);return e?(n,r)=>{rg(n,e(r))}:null}function uXe(t){const e=t?rXe:nXe;return(n,r)=>{rg(n,e(r))}}function cXe(t,e,n){const i=Ta(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function dXe(t,e,n){const i=Ta(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function hXe(t,e){return(n,r)=>{t?cXe(n,r,e):dXe(n,r,e)}}function pXe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function fXe(t){return t?e=>mK(e,"0x"):e=>fK(e,"0x")}function mXe(t){return"color"in t||t.view==="color"}bs({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!mXe(e))return null;const n=dK(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:pXe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?aXe:oXe,equals:vK,writer:t=>uXe(t.params.supportsAlpha)},controller:t=>{var e,n;return new gK(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:fXe(t.params.supportsAlpha),parser:fM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function gXe(t,e){if(!MCe(t))return Ta(Gr.black(),e);if(e==="int"){const n=i_e(t);return new Gr(n,"rgb")}if(e==="float"){const n=i_e(t);return new hK(n,"rgb")}return Ta(Gr.black(),"int")}function vXe(t){return TCe(t)}function yXe(t){return e=>{const n=gXe(e,t);return Ta(n,"int")}}function bXe(t,e){return n=>t?ECe(n,e):SCe(n,e)}bs({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!MCe(t))return null;const r=dK(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=dCe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>yXe(t.params.colorType),equals:vK,writer:t=>hXe(vXe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=TCe(t.initialValue);return new gK(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:bXe(r,t.params.colorType),parser:fM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});bs({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=IKe(t,dCe(e));if(!n)return null;const r=CCe(n);if(!r)return null;const i=dK(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>RKe,equals:vK,writer:t=>{const e=lXe(t.params.format);if(!e)throw Ea.notBindable();return e}},controller:t=>{var e,n;return new gK(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:fM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class UF{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}}const s_e=hr("pndtxt");class _Xe{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(s_e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(s_e("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function wXe(t,e,n){return new pM(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:ss(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class x1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>wXe(e,n,i)),this.acs_.forEach((r,i)=>{Y0({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const h=n.assembly.toComponents(o);return h[i]=u,n.assembly.fromComponents(h)}})}),this.view=new _Xe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class xXe extends J7{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function SXe(t,e){const n=[],r=X7(t,e);r&&n.push(r);const i=q7(t);i&&n.push(i);const o=aK(t.options);return o&&n.push(o),new w1(n)}bs({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=os(e,r=>Object.assign(Object.assign({},Z7(r)),{options:r.optional.custom(NF),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>K7,constraint:t=>SXe(t.params,t.initialValue),writer:t=>rg},controller:t=>{const e=t.value,n=t.constraint,r=n&&BT(n,LF);if(r)return new r1(t.document,{props:new cr({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=Y7(t.params,e.rawValue),o=n&&BT(n,dM);return o?new Jbe(t.document,Object.assign(Object.assign({},tKe(Object.assign(Object.assign({},i),{keyScale:ss(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:Cc,value:e,viewProps:t.viewProps})):new pM(t.document,{parser:Cc,props:cr.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof Jbe?new xXe(t.controller):t.controller.valueController instanceof r1?new oK(t.controller):null}});class jm{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Oi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const kCe={toComponents:t=>t.getComponents(),fromComponents:t=>new jm(...t)},sw=hr("p2d");class EXe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sw()),n.viewProps.bindClassModifiers(this.element),_u(n.expanded,ng(this.element,sw(void 0,"expanded")));const r=e.createElement("div");r.classList.add(sw("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(sw("b")),i.appendChild(RF(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(sw("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(sw("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}const hm=hr("p2dp");class CXe{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(hm()),n.layout==="popup"&&this.element.classList.add(hm(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(hm("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(no,"svg");i.classList.add(hm("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(no,"line");o.classList.add(hm("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(no,"line");u.classList.add(hm("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const h=e.createElementNS(no,"line");h.classList.add(hm("l")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(h),this.lineElem_=h;const m=e.createElement("div");m.classList.add(hm("m")),this.padElement.appendChild(m),this.markerElem_=m,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=ar(e,-r,+r,0,100),o=ar(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function o_e(t,e,n){return[ro(e[0],Pc(t)),ro(e[1],z0(t))*(n?1:-1)]}class PXe{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new CXe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sp(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=ar(e.point.x,0,e.bounds.width,-r,+r),o=ar(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new jm(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){VN(e.key)&&e.preventDefault();const[n,r]=o_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new jm(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=o_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class TXe{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=_1.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new lK(e,{viewProps:this.viewProps}):null;const o=new PXe(e,{layout:n.pickerLayout,props:new cr({invertsY:ss(n.invertsY),max:ss(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new x1(e,{assembly:kCe,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new EXe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Y0({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),OF(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=tK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!IF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function MXe(t){return jm.isObject(t)?new jm(t.x,t.y):new jm}function kXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function AXe(t,e){return new UF({assembly:kCe,components:[ip(Object.assign(Object.assign({},t),t.x),e.x),ip(Object.assign(Object.assign({},t),t.y),e.y)]})}function a_e(t,e){var n,r;if(!Oi(t.min)||!Oi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=YEe(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function IXe(t,e){var n,r;const i=a_e(U0(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=a_e(U0(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function RXe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}bs({id:"input-point2d",type:"input",accept:(t,e)=>{if(!jm.isObject(t))return null;const n=os(e,r=>Object.assign(Object.assign({},UT(r)),{expanded:r.optional.boolean,picker:r.optional.custom(aCe),readonly:r.optional.constant(!1),x:r.optional.custom(km),y:r.optional.object(Object.assign(Object.assign({},UT(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>MXe,constraint:t=>AXe(t.params,t.initialValue),equals:jm.equals,writer:()=>kXe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new TXe(r,{axes:i.rawValue.getComponents().map((h,m)=>{var v;return Q7({constraint:o.components[m],initialValue:h,params:U0(t.params,(v=u[m])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:RXe(t.params),max:IXe(t.params,i.rawValue),parser:Cc,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class Hw{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Oi(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ACe={toComponents:t=>t.getComponents(),fromComponents:t=>new Hw(...t)};function DXe(t){return Hw.isObject(t)?new Hw(t.x,t.y,t.z):new Hw}function OXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function LXe(t,e){return new UF({assembly:ACe,components:[ip(Object.assign(Object.assign({},t),t.x),e.x),ip(Object.assign(Object.assign({},t),t.y),e.y),ip(Object.assign(Object.assign({},t),t.z),e.z)]})}bs({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Hw.isObject(t))return null;const n=os(e,r=>Object.assign(Object.assign({},UT(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(km),y:r.optional.custom(km),z:r.optional.custom(km)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>DXe,constraint:t=>LXe(t.params,t.initialValue),equals:Hw.equals,writer:t=>OXe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new x1(t.document,{assembly:ACe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return Q7({constraint:n.components[o],initialValue:i,params:U0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:Cc,value:e,viewProps:t.viewProps})}});class Gw{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Oi(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const ICe={toComponents:t=>t.getComponents(),fromComponents:t=>new Gw(...t)};function NXe(t){return Gw.isObject(t)?new Gw(t.x,t.y,t.z,t.w):new Gw}function FXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function BXe(t,e){return new UF({assembly:ICe,components:[ip(Object.assign(Object.assign({},t),t.x),e.x),ip(Object.assign(Object.assign({},t),t.y),e.y),ip(Object.assign(Object.assign({},t),t.z),e.z),ip(Object.assign(Object.assign({},t),t.w),e.w)]})}bs({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Gw.isObject(t))return null;const n=os(e,r=>Object.assign(Object.assign({},UT(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(km),x:r.optional.custom(km),y:r.optional.custom(km),z:r.optional.custom(km)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>NXe,constraint:t=>BXe(t.params,t.initialValue),equals:Gw.equals,writer:t=>FXe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new x1(t.document,{assembly:ICe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return Q7({constraint:n.components[o],initialValue:i,params:U0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:Cc,value:e,viewProps:t.viewProps})}});function UXe(t){const e=[],n=aK(t.options);return n&&e.push(n),new w1(e)}bs({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=os(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(NF)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>cK,constraint:t=>UXe(t.params),writer:t=>rg},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&BT(r,LF);return i?new r1(e,{props:new cr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new FF(e,{parser:o=>o,props:cr.fromObject({formatter:UW}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof r1?new oK(t.controller):null}});const mM={monitor:{defaultInterval:200,defaultRows:3}},l_e=hr("mll");class zXe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(l_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(l_e("i")),r.style.height=`calc(var(${sCe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class yK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new zXe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const u_e=hr("sgl");class VXe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(u_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(u_e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class bK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new VXe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}bs({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=os(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>uK},controller:t=>{var e;return t.value.rawValue.length===1?new bK(t.document,{formatter:Qbe,value:t.value,viewProps:t.viewProps}):new yK(t.document,{formatter:Qbe,rows:(e=t.params.rows)!==null&&e!==void 0?e:mM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class jXe extends J7{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const pm=hr("grl");class HXe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(pm()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(no,"svg");r.classList.add(pm("g")),r.style.height=`calc(var(${sCe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(no,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(pm("t"),hr("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,E)=>{if(x===void 0)return;const k=ar(E,0,n,0,e.width),D=ar(x,r,i,e.height,0);o.push([k,D].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){u.classList.remove(pm("t","a"));return}const m=ar(this.cursor_.rawValue,0,n,0,e.width),v=ar(h,r,i,e.height,0);u.style.left=`${m}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(h)}`,u.classList.contains(pm("t","a"))||(u.classList.add(pm("t","a"),pm("t","in")),BN(u),u.classList.remove(pm("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class _K{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=ss(-1),this.view=new HXe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!IF(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Sp(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Tc(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Mc(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(ar(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ar(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function zW(t){return Oi(t.format)?Mo(2):t.format}function GXe(t){var e;return t.value.rawValue.length===1?new bK(t.document,{formatter:zW(t.params),value:t.value,viewProps:t.viewProps}):new yK(t.document,{formatter:zW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:mM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function WXe(t){var e,n,r;return new _K(t.document,{formatter:zW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:mM.monitor.defaultRows,props:cr.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function c_e(t){return t.view==="graph"}bs({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=os(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>c_e(t)?64:1,reader:t=>K7},controller:t=>c_e(t.params)?WXe(t):GXe(t),api:t=>t.controller.valueController instanceof _K?new jXe(t.controller):null});bs({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=os(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>cK},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new yK(t.document,{formatter:UW,rows:(e=t.params.rows)!==null&&e!==void 0?e:mM.monitor.defaultRows,value:n,viewProps:t.viewProps}):new bK(t.document,{formatter:UW,value:n,viewProps:t.viewProps})}});class RCe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new b1(this))}),this}}class $Xe extends b1{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class DCe extends q0{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new na;const n=this.controller.valueController;n.cellControllers.forEach((r,i)=>{const o=new RCe(r);this.cellToApiMap_.set(r,o),r.emitter.on("click",()=>{const u=i%n.size[0],h=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new $Xe(this,o,[u,h])})})})}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i.event)}),this}}class OCe{constructor(e,n){this.size=n.size;const[r,i]=this.size,o=[];for(let u=0;u<i;u++)for(let h=0;h<r;h++){const m=new tCe(e,{props:cr.fromObject(Object.assign({},n.cellConfig(h,u))),viewProps:wp.create()});o.push(m)}this.cellCs_=o,this.viewProps=wp.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(u=>{u.viewProps.set("disposed",!0)})}),this.view=new oCe(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}}class d_e extends hM{constructor(e,n){const r=n.valueController,i=new DF(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}const KXe=bs({id:"buttongrid",type:"blade",accept(t){const e=os(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new d_e(t.document,{blade:t.blade,labelProps:cr.fromObject({label:t.params.label}),valueController:new OCe(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof d_e?new DCe(t.controller):null}});class LCe extends q0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,i=>{r(new AF(this,i.rawValue,i.options.last))}),this}}function lu(t,e,n){return t*(1-n)+e*n}const XXe=20,qXe=.001,$G=100;function YXe(t,e){let n=.25,r=.5,i=-1;for(let o=0;o<XXe;o++){const[u,h]=t.curve(r);if(r+=n*(u<e?1:-1),i=h,n*=.5,Math.abs(e-u)<qXe)break}return i}class qm{constructor(e=0,n=0,r=1,i=1){this.cache_=[],this.comps_=[e,n,r,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return Oi(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=lu(0,this.x1,e),r=lu(0,this.y1,e),i=lu(this.x1,this.x2,e),o=lu(this.y1,this.y2,e),u=lu(this.x2,1,e),h=lu(this.y2,1,e),m=lu(n,i,e),v=lu(r,o,e),x=lu(i,u,e),E=lu(o,h,e);return[lu(m,x,e),lu(v,E,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<$G;r++)n.push(YXe(this,ar(r,0,$G-1,0,1)));this.cache_=n}return this.cache_[Math.round(ar(Ki(e,0,1),0,1,0,$G-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const wK={toComponents:t=>t.toObject(),fromComponents:t=>new qm(...t)};function ZXe(t){const e=Mo(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const h_e=[0,.5,.5,1];function QXe(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new qm(...h_e);const n=[e[1],e[2],e[3],e[4]].reduce((r,i)=>{if(!r)return null;const o=Number(i);return isNaN(o)?null:[...r,o]},[]);return new qm(...n??h_e)}const r0=hr("cbz");class NCe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(r0()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,r0(void 0,"expanded")),Su(n.foldable,"completed",ng(this.element,r0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(r0("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(r0("b")),n.viewProps.bindDisabled(i);const o=e.createElementNS(no,"svg");o.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(o),r.appendChild(i),this.buttonElement=i;const u=e.createElement("div");if(u.classList.add(r0("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(r0("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}const KG=hr("cbzp");class FCe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(KG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(KG("g")),this.element.appendChild(r),this.graphElement=r;const i=e.createElement("div");i.classList.add(KG("t")),this.element.appendChild(i),this.textElement=i}}function BCe(t,e){const n=new MutationObserver(i=>{for(const o of i)o.type==="childList"&&o.addedNodes.forEach(u=>{u.contains(u)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const fm=hr("cbzg");function JXe(t,e){return n=>e(t(n))}class UCe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(fm()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(fm("p")),this.element.appendChild(r),this.previewElement=r;const i=e.createElementNS(no,"svg");i.classList.add(fm("g")),this.element.appendChild(i),this.svgElem_=i;const o=e.createElementNS(no,"path");o.classList.add(fm("u")),this.svgElem_.appendChild(o),this.guideElem_=o;const u=e.createElementNS(no,"polyline");u.classList.add(fm("l")),this.svgElem_.appendChild(u),this.lineElem_=u,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(h=>{h.classList.add(fm("h")),this.element.appendChild(h)}),this.vectorElems_=[e.createElementNS(no,"line"),e.createElementNS(no,"line")],this.vectorElems_.forEach(h=>{h.classList.add(fm("v")),this.svgElem_.appendChild(h)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((h,m)=>{_u(this.sel_,JXe(v=>v===m,ng(h,fm("h","sel"))))}),BCe(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:ar(e,0,1,0,i),y:ar(n,0,1,o-u,u)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:Ki(ar(e,0,i,0,1),0,1),y:ar(n,o-u,u,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(o=>{const u=this.valueToPosition(0,o),h=this.valueToPosition(1,o);return[`M ${u.x},${u.y}`,`L ${h.x},${h.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const o=this.valueToPosition(...e.curve(r));if(n.push([o.x,o.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=e.toObject();[0,1].forEach(o=>{const u=this.valueToPosition(o,o),h=this.valueToPosition(i[o*2],i[o*2+1]),m=this.vectorElems_[o];m.setAttributeNS(null,"x1",String(u.x)),m.setAttributeNS(null,"y1",String(u.y)),m.setAttributeNS(null,"x2",String(h.x)),m.setAttributeNS(null,"y2",String(h.y));const v=this.handleElems_[o];v.style.left=`${h.x}px`,v.style.top=`${h.y}px`})}onValueChange_(){this.refresh()}}const p_e=24,f_e=400,m_e=1e3,ow=hr("cbzprv");class zCe{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ow()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(no,"svg");r.classList.add(ow("g")),this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(no,"path");i.classList.add(ow("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const o=e.createElement("div");o.classList.add(ow("m")),this.element.appendChild(o),this.markerElem_=o,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),BCe(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(ow("m","a")),this.startTime_=new Date().getTime()+f_e,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(ow("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Ki(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,i=[],o=this.value_.rawValue;for(let u=0;u<p_e;u++){const h=ar(u,0,p_e-1,0,1),m=ar(o.y(h),0,1,0,n);i.push(`M ${m},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",i.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/m_e;this.updateMarker_(n),e>m_e+f_e&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function VW(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}function eqe(t,e,n,r){const i=VW(t,e,n,r),o=Math.atan2(r-e,n-t),u=Math.round(o/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(u)*i,y:e+Math.sin(u)*i}}class VCe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=ss(0),this.viewProps=n.viewProps,this.view=new UCe(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new zCe(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new Sp(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const i=this.sel_.rawValue,o=this.value.rawValue.toObject(),u=this.view.positionToValue(e.x,e.y),h=n?eqe(i,i,u.x,u.y):u;o[i*2]=h.x,o[i*2+1]=h.y,this.value.setRawValue(new qm(...o),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,i=this.view.valueToPosition(r.x1,r.y1),o=VW(n.point.x,n.point.y,i.x,i.y),u=this.view.valueToPosition(r.x2,r.y2),h=VW(n.point.x,n.point.y,u.x,u.y);this.sel_.rawValue=o<=h?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){VN(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;r[n*2]+=ro(i,Pc(e)),r[n*2+1]+=ro(i,z0(e)),this.value.setRawValue(new qm(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){VN(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=ro(n,Pc(e)),i=ro(n,z0(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class jCe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new FCe(e,{viewProps:this.viewProps}),this.gc_=new VCe(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new G7({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new x1(e,{assembly:wK,axes:[r,i,r,i],parser:Cc,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class jW{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=_1.create(n.expanded),this.view=new NCe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new FF(e,{parser:QXe,props:cr.fromObject({formatter:ZXe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new lK(e,{viewProps:this.viewProps}):null;const r=new jCe(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),_u(this.popC_.shows,i=>{i&&r.refresh()}),Y0({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),OF(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=tK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!IF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function tqe(){return new UF({assembly:wK,components:[0,1,2,3].map(t=>t%2===0?new G7({min:0,max:1}):void 0)})}const nqe=bs({id:"cubicbezier",type:"blade",accept(t){const e=os(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new qm(...t.params.value),i=ss(r,{constraint:tqe(),equals:qm.equals}),o=new jW(t.document,{axis:{textProps:cr.fromObject({keyScale:.1,pointerScale:.01,formatter:Mo(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps});return new UN(t.document,{blade:t.blade,props:cr.fromObject({label:t.params.label}),value:i,valueController:o})},api(t){return!(t.controller instanceof UN)||!(t.controller.valueController instanceof jW)?null:new LCe(t.controller)}});class HCe extends q0{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const g_e=20;class GCe{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=g_e)return;const e=this.timestamps_.length-g_e;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const TP=hr("fps");class WCe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(TP()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(TP("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(TP("l")),this.element.appendChild(r);const i=e.createElement("span");i.classList.add(TP("v")),i.textContent="--",r.appendChild(i),this.valueElement=i;const o=e.createElement("span");o.classList.add(TP("u")),o.textContent="FPS",r.appendChild(o)}}class $Ce{constructor(e,n){this.stopwatch_=new GCe,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new WCe(e,{viewProps:this.viewProps}),this.graphC_=new _K(e,{formatter:Mo(0),props:cr.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=m7e(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class v_e extends hM{constructor(e,n){const r=n.valueController,i=new DF(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}function rqe(t,e){return e===0?new j7e:new H7e(t,e??mM.monitor.defaultInterval)}const iqe=bs({id:"fpsgraph",type:"blade",accept(t){const e=os(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,i;const o=(e=t.params.interval)!==null&&e!==void 0?e:500;return new v_e(t.document,{blade:t.blade,labelProps:cr.fromObject({label:t.params.label}),valueController:new $Ce(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(i=t.params.min)!==null&&i!==void 0?i:0,ticker:rqe(t.document,o),value:ss(p7e(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof v_e?new HCe(t.controller):null}});class Sl{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const xK={fromComponents:t=>new Sl(t[0],t[1]),toComponents:t=>[t.min,t.max]};class SK{constructor(e){this.edge=e}constrain(e){var n,r,i,o,u,h,m,v;if(e.min<=e.max)return new Sl((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(o=(i=this.edge)===null||i===void 0?void 0:i.constrain(e.max))!==null&&o!==void 0?o:e.max);const x=(e.min+e.max)/2;return new Sl((h=(u=this.edge)===null||u===void 0?void 0:u.constrain(x))!==null&&h!==void 0?h:x,(v=(m=this.edge)===null||m===void 0?void 0:m.constrain(x))!==null&&v!==void 0?v:x)}}const XG=hr("rsltxt");class KCe{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(XG());const r=e.createElement("div");r.classList.add(XG("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(XG("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const i0=hr("rsl");class XCe{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(i0()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(i0("t")),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(i0("b")),r.appendChild(i),this.barElement=i;const o=["min","max"].map(u=>{const h=e.createElement("div");return h.classList.add(i0("k"),i0("k",u)),r.appendChild(h),h});this.knobElements=[o[0],o[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Ki(ar(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(i0(void 0,"zero")):this.element.classList.remove(i0(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,i)=>{r.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class qCe{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new XCe(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new Sp(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),i=this.sliderProps.get("max");return ar(n,0,1,r,i)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,i=this.sliderProps.get("min"),o=this.sliderProps.get("max"),u=ar(r.min,i,o,0,1),h=ar(r.max,i,o,0,1);Math.abs(h-n)<=.025?this.grabbing_="max":Math.abs(u-n)<=.025?this.grabbing_="min":n>=u&&n<=h?(this.grabbing_="length",this.grabOffset_=ar(n-u,0,1,0,o-i)):n<u?(this.grabbing_="min",this.onPointerMove_(e)):n>h&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const i=this.sliderProps.get("min"),o=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new Sl(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new Sl(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const u=this.value.rawValue.length;let h=r-this.grabOffset_,m=h+u;h<i?(h=i,m=i+u):m>o&&(h=o-u,m=o),this.value.setRawValue(new Sl(h,m),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class YCe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new qCe(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new x1(e,{assembly:xK,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new KCe(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function sqe(t){return Sl.isObject(t)?new Sl(t.min,t.max):new Sl(0,0)}function oqe(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function aqe(t){const e=[],n=q7(t);n&&e.push(n);const r=X7(t);return r&&e.push(r),new SK(new w1(e))}const lqe=bs({id:"input-interval",type:"input",accept:(t,e)=>{if(!Sl.isObject(t))return null;const n=os(e,r=>Object.assign(Object.assign({},Z7(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new Sl(t.min,t.max),params:n}:null},binding:{reader:t=>sqe,constraint:t=>aqe(t.params),equals:Sl.equals,writer:t=>oqe},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof SK))throw Ea.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,i=cr.fromObject(Y7(t.params,r)),o=n.edge&&BT(n.edge,dM);if(o)return new YCe(t.document,{constraint:n.edge,parser:Cc,sliderProps:new cr({keyScale:i.value("keyScale"),max:o.values.value("max"),min:o.values.value("min")}),textProps:i,value:e,viewProps:t.viewProps});const u={constraint:n.edge,textProps:i};return new x1(t.document,{assembly:xK,axes:[u,u],parser:Cc,value:e,viewProps:t.viewProps})}});class ZCe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class QCe extends AF{constructor(e,n,r,i,o){super(e,i,o),this.cell=n,this.index=r}}class JCe extends q0{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const i=new ZCe(r);this.cellToApiMap_.set(r,i)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,i=>{const o=this.controller.valueController,u=o.findCellByValue(i.rawValue);if(!u)return;const h=this.cellToApiMap_.get(u);if(!h)return;const m=o.cellControllers.indexOf(u);r(new QCe(this,h,[m%o.size[0],Math.floor(m/o.size[0])],i.rawValue))})}}const MP=hr("rad");class ePe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(MP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(MP("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(MP("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),r.appendChild(i),this.inputElement=i;const o=e.createElement("div");o.classList.add(MP("b")),r.appendChild(o);const u=e.createElement("div");u.classList.add(MP("t")),o.appendChild(u),Su(n.props,"title",h=>{u.textContent=h})}}class tPe{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new ePe(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class jN{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,i]=this.size;for(let o=0;o<i;o++)for(let u=0;u<r;u++){const h=new tPe(e,{name:n.groupName,props:cr.fromObject(Object.assign({},n.cellConfig(u,o))),viewProps:wp.create()});this.cellCs_.push(h),this.cellValues_.push(n.cellConfig(u,o).value)}this.value=n.value,_u(this.value,o=>{const u=this.findCellByValue(o);u&&(u.view.inputElement.checked=!0)}),this.viewProps=wp.create(),this.view=new oCe(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(o=>{o.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(i=>i.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const uqe=function(){return bs({id:"radiogrid",type:"blade",accept(t){const e=os(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=ss(t.params.value);return new UN(t.document,{blade:t.blade,props:cr.fromObject({label:t.params.label}),value:e,valueController:new jN(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof UN)||!(t.controller.valueController instanceof jN)?null:new JCe(t.controller)}})}();function EK(t){return bs({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=os(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new jN(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const cqe=EK({isType:t=>typeof t=="number",binding:{reader:t=>K7,writer:t=>rg}}),dqe=EK({isType:t=>typeof t=="string",binding:{reader:t=>cK,writer:t=>rg}}),hqe=EK({isType:t=>typeof t=="boolean",binding:{reader:t=>uK,writer:t=>rg}}),pqe="essentials",fqe='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',mqe=[KXe,nqe,iqe,lqe,uqe,hqe,cqe,dqe],gqe=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:RCe,ButtonGridApi:DCe,ButtonGridController:OCe,CubicBezier:qm,CubicBezierApi:LCe,CubicBezierAssembly:wK,CubicBezierController:jW,CubicBezierGraphController:VCe,CubicBezierGraphView:UCe,CubicBezierPickerController:jCe,CubicBezierPickerView:FCe,CubicBezierPreviewView:zCe,CubicBezierView:NCe,FpsGraphBladeApi:HCe,FpsGraphController:$Ce,FpsView:WCe,Fpswatch:GCe,Interval:Sl,IntervalAssembly:xK,IntervalConstraint:SK,RadioCellApi:ZCe,RadioController:tPe,RadioGridApi:JCe,RadioGridController:jN,RadioView:ePe,RangeSliderController:qCe,RangeSliderTextController:YCe,RangeSliderTextView:KCe,RangeSliderView:XCe,TpRadioGridChangeEvent:QCe,css:fqe,id:pqe,plugins:mqe},Symbol.toStringTag,{value:"Module"}));class nPe extends EF{constructor(n){super(n);Jr(this,"bindCBs");Jr(this,"buttonCBs");Jr(this,"pane");Jr(this,"appCallbacks",0);Jr(this,"editorCallbacks",0);Jr(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new v$e({title:"GUI"}),this.pane.registerPlugin(gqe)}dispose(){var n;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.pane)==null||n.dispose(),this.pane=void 0)}addFolder(n,r=void 0,i=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:i}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,i,o=void 0){const u=this.bindID,h=i.onChange!==void 0?i.onChange:BSe;this.bindCBs.set(u,h),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.pane).addBinding(n,r,i).on("change",v=>{this.app.send({event:"updateBind",target:"app",data:{id:u,value:v.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:u,name:r,params:i,parent:o}}),this.appCallbacks++)}triggerBind(n,r){const i=this.bindCBs.get(n);i!==void 0?i(r):console.warn(`No callback for: ${n}`,r)}button(n,r,i=void 0){const o=this.bindID;this.buttonCBs.set(o,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:o}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:o,name:n,callback:r,parent:i}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.pane)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}}function vqe(t,e){t.components.forEach(n=>{if(n instanceof nPe){const r=n;switch(e.event){case"addFolder":r.addFolder(e.data.name,e.data.params,e.data.parent);break;case"bindObject":r.bind(e.data.name,e.data.params,e.data.parent);break;case"updateBind":r.triggerBind(e.data.id,e.data.value);break;case"addButton":r.button(e.data.name,e.data.callback,e.data.parent);break;case"clickButton":r.triggerButton(e.data.id);break}return}})}const yqe=!0;class bqe extends oUe{constructor(){super("Hermes",yqe),this.addComponent("theatre",new m7(this,"RemoteApp",{})),this.addComponent("components",new F8e(this)),this.addComponent("debug",new nPe(this)),this.addComponent("three",new q8e(this))}get debug(){return this.components.get("debug")}get debugComponents(){return this.components.get("components")}get theatre(){return this.components.get("theatre")}get three(){return this.components.get("three")}}const fi=new bqe;class _qe{constructor(e,n,r){this.name=e,this.fg=n,this.bg=r,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,n,r,i,o=0){let u=1/0,h=0;this.context&&(u=Math.min(u,e),h=Math.max(r,e),i=Math.max(i,n),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(o)+" "+this.name+" ("+u.toFixed(o)+"-"+parseFloat(h.toFixed(o))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-n/i)*this.GRAPH_HEIGHT))}}const rPe=class GL{constructor({logsPerSecond:e=20,samplesLog:n=100,samplesGraph:r=10,precision:i=2,minimal:o=!1,horizontal:u=!0,mode:h=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=h,this.horizontal=u,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",o&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=o,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new GL.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new GL.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=n,this.samplesGraph=r,this.precision=i,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",m=>{m.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=h,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}patchThreeRenderer(e){const n=e.render,r=this;e.render=function(i,o){r.begin(),n.call(this,i,o),r.end()},this.threeRendererPatched=!0}resizePanel(e,n){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=n*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=n*e.HEIGHT/e.PR+"px"))}addPanel(e,n){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,n)),e}showPanel(e){for(let n=0;n<this.dom.children.length;n++){const r=this.dom.children[n];r.style.display=n===e?"block":"none"}this.mode=e}init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const n=e;this.patchThreeRenderer(n),this.gl=n.getContext()}if(!this.gl&&e instanceof WebGL2RenderingContext)this.gl=e;else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new GL.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,n)=>{if(this.gl){const r=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),i=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(r&&!i){const u=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=u,this.gl.deleteQuery(e.query),this.gpuQueries.splice(n,1)}}}))}update(){this.processGpuQueries(),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=e),e>=this.prevTime+1e3){const n=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(n,n,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,n){n.logs.push(e),n.logs.length>this.samplesLog&&n.logs.shift(),n.graph.push(e),n.graph.length>this.samplesGraph&&n.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,n,r){if(window.performance&&n&&this.isRunningCPUProfiling){window.performance.mark(n);const i=performance.measure(r,e,n);this.totalCpuDuration+=i.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,n){if(n.logs.length>0){let r=0,i=.01;for(let h=0;h<n.logs.length;h++)r+=n.logs[h],n.logs[h]>i&&(i=n.logs[h]);let o=0,u=.01;for(let h=0;h<n.graph.length;h++)o+=n.graph[h],n.graph[h]>u&&(u=n.graph[h]);e&&e.update(r/Math.min(n.logs.length,this.samplesLog),o/Math.min(n.graph.length,this.samplesGraph),i,u,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};rPe.Panel=_qe;let wqe=rPe;/**
 * postprocessing v6.34.1 build Wed Dec 27 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var xqe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",gr={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},iPe="",Jo="srgb",zF="srgb-linear",P0={NONE:0,DEPTH:1,CONVOLUTION:2},Hr={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},gM={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},vL={DEFAULT:0,ESKIL:1},sPe=Number(YT.replace(/\D+/g,"")),oPe=sPe>=152,Sqe=new Map([[mF,zF],[lp,Jo]]),Eqe=new Map([[zF,mF],[Jo,lp]]);function zT(t){return t===null?null:oPe?t.outputColorSpace:Sqe.get(t.outputEncoding)}function T0(t,e){t!==null&&(oPe?t.colorSpace=e:t.encoding=Eqe.get(e))}function VF(t){return sPe<154?t.replace("colorspace_fragment","encodings_fragment"):t}var Cqe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Pqe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Tqe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],aPe=class extends el{constructor(t=new Pr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ti(null),texelSize:new Ti(new Pr),scale:new Ti(1),kernel:new Ti(0)},blending:Sc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Cqe,vertexShader:Pqe}),this.fragmentShader=VF(this.fragmentShader),this.setTexelSize(t.x,t.y),this.kernelSize=gM.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Tqe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},Mqe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,lPe=class extends el{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ti(null),opacity:new Ti(1)},blending:Sc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Mqe,vertexShader:xqe}),this.fragmentShader=VF(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},kqe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Aqe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Iqe=class extends el{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:YT.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ti(null),depthBuffer:new Ti(null),resolution:new Ti(new un),texelSize:new Ti(new un),cameraNear:new Ti(.3),cameraFar:new Ti(1e3),aspect:new Ti(1),time:new Ti(0)},blending:Sc,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=ZT){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=kqe.replace(Hr.FRAGMENT_HEAD,t.get(Hr.FRAGMENT_HEAD)||"").replace(Hr.FRAGMENT_MAIN_UV,t.get(Hr.FRAGMENT_MAIN_UV)||"").replace(Hr.FRAGMENT_MAIN_IMAGE,t.get(Hr.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Aqe.replace(Hr.VERTEX_HEAD,t.get(Hr.VERTEX_HEAD)||"").replace(Hr.VERTEX_MAIN_SUPPORT,t.get(Hr.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=VF(this.fragmentShader),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Us?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Hr}},Rqe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Dqe="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",Oqe=class extends aPe{constructor({kernelSize:t=gM.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=Rqe,this.vertexShader=Dqe,this.kernelSize=t,this.fragmentShader=VF(this.fragmentShader),this.uniforms.aspect=new Ti(1),this.uniforms.rotation=new Ti(new un),this.uniforms.maskParams=new Ti(new Pr),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},Lqe=new vF,mm=null;function Nqe(){if(mm===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);mm=new ea,mm.setAttribute!==void 0?(mm.setAttribute("position",new qa(t,3)),mm.setAttribute("uv",new qa(e,2))):(mm.addAttribute("position",new qa(t,3)),mm.addAttribute("uv",new qa(e,2)))}return mm}var ig=class uPe{constructor(e="Pass",n=new ST,r=Lqe){this.name=e,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new ks(Nqe(),e),n.frustumCulled=!1,this.scene===null&&(this.scene=new ST),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=ZT){}render(e,n,r,i,o){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,r){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof Cl||n instanceof Cu||n instanceof is||n instanceof uPe)&&this[e].dispose()}}},Fqe=class extends ig{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new lPe,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Cl(1,1,{minFilter:Zo,magFilter:Zo,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==xl?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":zT(t)===Jo&&T0(this.renderTarget.texture,Jo))}},Bqe=class extends ig{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const o=t.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},y_e=new Sn,cPe=class extends ig{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const o=this.overrideClearColor,u=this.overrideClearAlpha,h=t.getClearAlpha(),m=o!==null,v=u>=0;m?(t.getClearColor(y_e),t.setClearColor(o,v?u:h)):v&&t.setClearAlpha(u),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),m?t.setClearColor(y_e,h):v&&t.setClearAlpha(h)}},Uqe=class extends ig{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new cPe,this.overrideMaterialManager=n===null?null:new __e(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new __e(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const o=this.scene,u=this.camera,h=this.selection,m=u.layers.mask,v=o.background,x=t.shadowMap.autoUpdate,E=this.renderToScreen?null:e;h!==null&&u.layers.set(h.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(E),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,o,u):t.render(o,u),u.layers.mask=m,o.background=v,t.shadowMap.autoUpdate=x}};function b_e(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const u of n.entries())u[1]!==null&&n.set(u[0],u[1].replace(o,i))}}function zqe(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const o=r!==void 0&&/mainImage/.test(r),u=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(u&&n.attributes&P0.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!o&&!u)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const h=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,m=n.shaderParts;let v=m.get(Hr.FRAGMENT_HEAD)||"",x=m.get(Hr.FRAGMENT_MAIN_UV)||"",E=m.get(Hr.FRAGMENT_MAIN_IMAGE)||"",k=m.get(Hr.VERTEX_HEAD)||"",D=m.get(Hr.VERTEX_MAIN_SUPPORT)||"";const G=new Set,N=new Set;if(u&&(x+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const P=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);D+=`	${t}MainSupport(`,D+=P?`vUv);
`:`);
`;for(const $ of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const Q of $[1].split(/\s*,\s*/))n.varyings.add(Q),G.add(Q),N.add(Q);for(const $ of i.matchAll(h))N.add($[1])}for(const P of r.matchAll(h))N.add(P[1]);for(const P of e.defines.keys())N.add(P.replace(/\([\w\s,]*\)/g,""));for(const P of e.uniforms.keys())N.add(P);N.delete("while"),N.delete("for"),N.delete("if"),e.uniforms.forEach((P,$)=>n.uniforms.set(t+$.charAt(0).toUpperCase()+$.slice(1),P)),e.defines.forEach((P,$)=>n.defines.set(t+$.charAt(0).toUpperCase()+$.slice(1),P));const z=new Map([["fragment",r],["vertex",i]]);b_e(t,N,n.defines),b_e(t,N,z),r=z.get("fragment"),i=z.get("vertex");const U=e.blendMode;if(n.blendModes.set(U.blendFunction,U),o){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(E+=e.inputColorSpace===Jo?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==iPe?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const P=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;E+=`${t}MainImage(color0, UV, `,n.attributes&P0.DEPTH&&P.test(r)&&(E+="depth, ",n.readDepth=!0),E+=`color1);
	`;const $=t+"BlendOpacity";n.uniforms.set($,U.opacity),E+=`color0 = blend${U.blendFunction}(color0, color1, ${$});

	`,v+=`uniform float ${$};

`}if(v+=r+`
`,i!==null&&(k+=i+`
`),m.set(Hr.FRAGMENT_HEAD,v),m.set(Hr.FRAGMENT_MAIN_UV,x),m.set(Hr.FRAGMENT_MAIN_IMAGE,E),m.set(Hr.VERTEX_HEAD,k),m.set(Hr.VERTEX_MAIN_SUPPORT,D),e.extensions!==null)for(const P of e.extensions)n.extensions.add(P)}}var qG=class extends ig{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new Iqe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new Kqe;let e=0;for(const u of this.effects)if(u.blendMode.blendFunction===gr.DST)t.attributes|=u.getAttributes()&P0.DEPTH;else{if(t.attributes&u.getAttributes()&P0.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${u.name})`);zqe("e"+e++,u,t)}let n=t.shaderParts.get(Hr.FRAGMENT_HEAD),r=t.shaderParts.get(Hr.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Hr.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const u of t.blendModes.values())n+=u.getShaderCode().replace(o,`blend${u.blendFunction}`)+`
`;t.attributes&P0.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Jo&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Hr.FRAGMENT_HEAD,n),t.shaderParts.set(Hr.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Hr.FRAGMENT_MAIN_UV,i);for(const[u,h]of t.shaderParts)h!==null&&t.shaderParts.set(u,h.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=ZT){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const o of this.effects)o.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==xl&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},Vqe=class extends ig{constructor({kernelSize:t=gM.MEDIUM,resolutionScale:e=.5,width:n=sp.AUTO_SIZE,height:r=sp.AUTO_SIZE,resolutionX:i=n,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Cl(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const u=this.resolution=new sp(this,i,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight)),this._blurMaterial=new aPe,this._blurMaterial.kernelSize=t,this.copyMaterial=new lPe}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const o=this.scene,u=this.camera,h=this.renderTargetA,m=this.renderTargetB,v=this.blurMaterial,x=v.kernelSequence;let E=e;this.fullscreenMaterial=v;for(let k=0,D=x.length;k<D;++k){const G=k&1?m:h;v.kernel=x[k],v.inputBuffer=E.texture,t.setRenderTarget(G),t.render(o,u),E=G}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=E.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(o,u)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==xl?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):zT(t)===Jo&&(T0(this.renderTargetA.texture,Jo),T0(this.renderTargetB.texture,Jo)))}static get AUTO_SIZE(){return sp.AUTO_SIZE}},jqe=class extends ig{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new cPe(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const o=t.getContext(),u=t.state.buffers,h=this.scene,m=this.camera,v=this.clearPass,x=this.inverted?0:1,E=1-x;u.color.setMask(!1),u.depth.setMask(!1),u.color.setLocked(!0),u.depth.setLocked(!0),u.stencil.setTest(!0),u.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),u.stencil.setFunc(o.ALWAYS,x,4294967295),u.stencil.setClear(E),u.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?v.render(t,null):(v.render(t,e),v.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(h,m)):(t.setRenderTarget(e),t.render(h,m),t.setRenderTarget(n),t.render(h,m)),u.color.setLocked(!1),u.depth.setLocked(!1),u.stencil.setLocked(!1),u.stencil.setFunc(o.EQUAL,1,4294967295),u.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),u.stencil.setLocked(!0)}},Hqe=class extends Vqe{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=gM.MEDIUM,resolutionScale:o=.5,resolutionX:u=sp.AUTO_SIZE,resolutionY:h=sp.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:o,resolutionX:u,resolutionY:h}),this.blurMaterial=new Oqe({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},YG=1/1e3,Gqe=1e3,Wqe=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*YG}get fixedDelta(){return this._fixedDelta*YG}set fixedDelta(t){this._fixedDelta=t*Gqe}get elapsed(){return this._elapsed*YG}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},$qe=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Fqe,this.depthTexture=null,this.passes=[],this.timer=new Wqe,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new un),n=t.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===xl&&zT(t)===Jo&&(T0(this.inputBuffer.texture,Jo),T0(this.outputBuffer.texture,Jo),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(t,n,r)}}replaceRenderer(t,e=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(t),e&&r!==null&&(r.removeChild(n.domElement),r.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new a7;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=D0,t.type=zm):t.type=ep,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,r){const i=this.renderer,o=i===null?new un:i.getDrawingBufferSize(new un),u={minFilter:Zo,magFilter:Zo,stencilBuffer:e,depthBuffer:t,type:n},h=new Cl(o.width,o.height,u);return r>0&&(h.ignoreDepthForMultisampleCopy=!1,h.samples=r),n===xl&&zT(i)===Jo&&T0(h.texture,Jo),h.texture.name="EffectComposer.Buffer",h.texture.generateMipmaps=!1,h}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new un),o=r.getContext().getContextAttributes().alpha,u=this.inputBuffer.texture.type;if(t.setRenderer(r),t.setSize(i.width,i.height),t.initialize(r,o,u),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const h=this.createDepthTexture();for(t of n)t.setDepthTexture(h)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const o=(h,m)=>h||m.needsDepthTexture;e.reduce(o,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,o=!1,u,h,m;t===void 0&&(this.timer.update(),t=this.timer.delta);for(const v of this.passes)v.enabled&&(v.render(e,r,i,t,o),v.needsSwap&&(o&&(n.renderToScreen=v.renderToScreen,u=e.getContext(),h=e.state.buffers.stencil,h.setFunc(u.NOTEQUAL,1,4294967295),n.render(e,r,i,t,o),h.setFunc(u.EQUAL,1,4294967295)),m=r,r=i,i=m),v instanceof jqe?o=!0:v instanceof Bqe&&(o=!1))}setSize(t,e,n){const r=this.renderer,i=r.getSize(new un);(t===void 0||e===void 0)&&(t=i.width,e=i.height),(i.width!==t||i.height!==e)&&r.setSize(t,e,n);const o=r.getDrawingBufferSize(new un);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const u of this.passes)u.setSize(o.width,o.height)}reset(){const t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Kqe=class{constructor(){this.shaderParts=new Map([[Hr.FRAGMENT_HEAD,null],[Hr.FRAGMENT_MAIN_UV,null],[Hr.FRAGMENT_MAIN_IMAGE,null],[Hr.VERTEX_HEAD,null],[Hr.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=P0.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=zF}},ZG=!1,__e=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case Ka:n=this.materialsFlatShadedDoubleSide;break;case Vs:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case Ka:n=this.materialsDoubleSide;break;case Vs:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof el))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const o=e[i].value;o.isRenderTargetTexture&&(e[i].value=null,n.set(i,o))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=gp;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Vs,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Ka,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Vs,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Ka,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,ZG){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return ZG}static set workaroundEnabled(t){ZG=t}},gm=-1,sp=class extends Eu{constructor(t,e=gm,n=gm,r=1){super(),this.resizable=t,this.baseSize=new un(1,1),this.preferredSize=new un(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new un,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==gm?n.width=e.width:e.height!==gm?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==gm?n.height=e.height:e.width!==gm?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(gm),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return gm}},Xqe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",qqe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Yqe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Zqe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Qqe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Jqe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",eYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",tYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",nYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",rYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",iYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",sYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",oYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",aYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",lYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",uYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",cYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",dYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",hYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",pYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",fYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",mYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",gYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",vYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",yYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",bYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",_Ye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",wYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",xYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",SYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",EYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",CYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",PYe=new Map([[gr.ADD,Xqe],[gr.ALPHA,qqe],[gr.AVERAGE,Yqe],[gr.COLOR,Zqe],[gr.COLOR_BURN,Qqe],[gr.COLOR_DODGE,Jqe],[gr.DARKEN,eYe],[gr.DIFFERENCE,tYe],[gr.DIVIDE,nYe],[gr.DST,null],[gr.EXCLUSION,rYe],[gr.HARD_LIGHT,iYe],[gr.HARD_MIX,sYe],[gr.HUE,oYe],[gr.INVERT,aYe],[gr.INVERT_RGB,lYe],[gr.LIGHTEN,uYe],[gr.LINEAR_BURN,cYe],[gr.LINEAR_DODGE,dYe],[gr.LINEAR_LIGHT,hYe],[gr.LUMINOSITY,pYe],[gr.MULTIPLY,fYe],[gr.NEGATION,mYe],[gr.NORMAL,gYe],[gr.OVERLAY,vYe],[gr.PIN_LIGHT,yYe],[gr.REFLECT,bYe],[gr.SATURATION,_Ye],[gr.SCREEN,wYe],[gr.SOFT_LIGHT,xYe],[gr.SRC,SYe],[gr.SUBTRACT,EYe],[gr.VIVID_LIGHT,CYe]]),TYe=class extends Eu{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Ti(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return PYe.get(this.blendFunction)}},jF=class extends Eu{constructor(t,e,{attributes:n=P0.NONE,blendFunction:r=gr.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:u=null,vertexShader:h=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=h,this.defines=i,this.uniforms=o,this.extensions=u,this.blendMode=new TYe(r),this.blendMode.addEventListener("change",m=>this.setChanged()),this._inputColorSpace=zF,this._outputColorSpace=iPe}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=ZT){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Cl||e instanceof Cu||e instanceof is||e instanceof ig)&&this[t].dispose()}}},MYe=`#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))
#define ONE_OVER_TWELVE 0.08333333333333333
varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}`,kYe="varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",AYe=class extends jF{constructor({blendFunction:t=gr.SRC}={}){super("FXAAEffect",MYe,{vertexShader:kYe,blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}},IYe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,RYe=class extends jF{constructor({blendFunction:t=gr.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",IYe,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},DYe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,OYe="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",LYe=class extends jF{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:o=gM.MEDIUM,resolutionScale:u=.5,resolutionX:h=sp.AUTO_SIZE,resolutionY:m=sp.AUTO_SIZE}={}){super("TiltShiftEffect",DYe,{vertexShader:OYe,blendFunction:t,uniforms:new Map([["rotation",new Ti(new un)],["maskParams",new Ti(new un)],["map",new Ti(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new Cl(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new Hqe({kernelSize:o,resolutionScale:u,resolutionX:h,resolutionY:m,offset:e,rotation:n,focusArea:r,feather:i});const v=this.resolution=new sp(this,h,m,u);v.addEventListener("change",x=>this.setSize(v.baseWidth,v.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,zT(t)===Jo&&T0(this.renderTarget.texture,Jo))}},NYe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,FYe=class extends jF{constructor({blendFunction:t,technique:e=vL.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",NYe,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Ti(r)],["darkness",new Ti(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===vL.ESKIL}set eskil(t){this.technique=t?vL.ESKIL:vL.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const BYe=`varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,UYe=`uniform float time;
uniform float opacity;
uniform sampler2D map;
varying vec2 vUv;

#define MIN_ALPHA 2.0 / 255.0

void main() {
  if (opacity < MIN_ALPHA) discard;
  vec3 gradient = 0.5 + 0.5 * cos(time + vUv.xyx + vec3(0.0, 2.0, 4.0));
  vec3 image = texture2D(map, vUv * 10.0).rgb;
  // vec3 col = mix(image, gradient, 0.15);
  vec3 col = image + gradient;
  gl_FragColor = vec4(col, opacity);
}`,zYe="data:image/png;base64,R0lGODlhCAAIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OTc3NywgMjAyMy8wNi8yNS0yMzo1NzoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjVENjQyODM4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjVENjQyODQ4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NUQ2NDI4MThBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NUQ2NDI4MjhBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAIAAgAAAIOjH8AprzRkHyspqSoNAUAOw==";class VYe extends el{constructor(){super({vertexShader:BYe,fragmentShader:UYe,name:"ExampleScene/SimpleShader",transparent:!0,uniforms:{opacity:{value:1},time:{value:0},map:{value:null}}}),RN(zYe).then(e=>{this.uniforms.map.value=e})}update(e){this.uniforms.opacity.value=this.opacity,this.uniforms.time.value+=e}}function jYe(t){const e=new Map,n=new Map,r=t.clone();return dPe(t,r,function(i,o){e.set(o,i),n.set(i,o)}),r.traverse(function(i){if(!i.isSkinnedMesh)return;const o=i,u=e.get(i),h=u.skeleton.bones;o.skeleton=u.skeleton.clone(),o.bindMatrix.copy(u.bindMatrix),o.skeleton.bones=h.map(function(m){return n.get(m)}),o.bind(o.skeleton,o.bindMatrix)}),r}function dPe(t,e,n){n(t,e);for(let r=0;r<t.children.length;r++)dPe(t.children[r],e.children[r],n)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var w_e=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(w_e(""))}catch{w_e=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var mu=Uint8Array,Am=Uint16Array,HW=Uint32Array,hPe=new mu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pPe=new mu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HYe=new mu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fPe=function(t,e){for(var n=new Am(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new HW(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},mPe=fPe(hPe,2),gPe=mPe[0],GYe=mPe[1];gPe[28]=258,GYe[258]=28;var WYe=fPe(pPe,0),$Ye=WYe[0],GW=new Am(32768);for(var ki=0;ki<32768;++ki){var vm=(ki&43690)>>>1|(ki&21845)<<1;vm=(vm&52428)>>>2|(vm&13107)<<2,vm=(vm&61680)>>>4|(vm&3855)<<4,GW[ki]=((vm&65280)>>>8|(vm&255)<<8)>>>1}var YP=function(t,e,n){for(var r=t.length,i=0,o=new Am(e);i<r;++i)++o[t[i]-1];var u=new Am(e);for(i=0;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;var h;if(n){h=new Am(1<<e);var m=15-e;for(i=0;i<r;++i)if(t[i])for(var v=i<<4|t[i],x=e-t[i],E=u[t[i]-1]++<<x,k=E|(1<<x)-1;E<=k;++E)h[GW[E]>>>m]=v}else for(h=new Am(r),i=0;i<r;++i)t[i]&&(h[i]=GW[u[t[i]-1]++]>>>15-t[i]);return h},vM=new mu(288);for(var ki=0;ki<144;++ki)vM[ki]=8;for(var ki=144;ki<256;++ki)vM[ki]=9;for(var ki=256;ki<280;++ki)vM[ki]=7;for(var ki=280;ki<288;++ki)vM[ki]=8;var vPe=new mu(32);for(var ki=0;ki<32;++ki)vPe[ki]=5;var KYe=YP(vM,9,1),XYe=YP(vPe,5,1),QG=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},gc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},JG=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},qYe=function(t){return(t/8|0)+(t&7&&1)},YYe=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Am?Am:t instanceof HW?HW:mu)(n-e);return r.set(t.subarray(e,n)),r},ZYe=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new mu(0);var i=!e||n,o=!n||n.i;n||(n={}),e||(e=new mu(r*3));var u=function(Jt){var Yt=e.length;if(Jt>Yt){var In=new mu(Math.max(Yt*2,Jt));In.set(e),e=In}},h=n.f||0,m=n.p||0,v=n.b||0,x=n.l,E=n.d,k=n.m,D=n.n,G=r*8;do{if(!x){n.f=h=gc(t,m,1);var N=gc(t,m+1,3);if(m+=3,N)if(N==1)x=KYe,E=XYe,k=9,D=5;else if(N==2){var $=gc(t,m,31)+257,Q=gc(t,m+10,15)+4,ye=$+gc(t,m+5,31)+1;m+=14;for(var q=new mu(ye),ie=new mu(19),pe=0;pe<Q;++pe)ie[HYe[pe]]=gc(t,m+pe*3,7);m+=Q*3;for(var W=QG(ie),he=(1<<W)-1,Ye=YP(ie,W,1),pe=0;pe<ye;){var at=Ye[gc(t,m,he)];m+=at&15;var z=at>>>4;if(z<16)q[pe++]=z;else{var Et=0,ue=0;for(z==16?(ue=3+gc(t,m,3),m+=2,Et=q[pe-1]):z==17?(ue=3+gc(t,m,7),m+=3):z==18&&(ue=11+gc(t,m,127),m+=7);ue--;)q[pe++]=Et}}var Ge=q.subarray(0,$),Te=q.subarray($);k=QG(Ge),D=QG(Te),x=YP(Ge,k,1),E=YP(Te,D,1)}else throw"invalid block type";else{var z=qYe(m)+4,U=t[z-4]|t[z-3]<<8,P=z+U;if(P>r){if(o)throw"unexpected EOF";break}i&&u(v+U),e.set(t.subarray(z,P),v),n.b=v+=U,n.p=m=P*8;continue}if(m>G){if(o)throw"unexpected EOF";break}}i&&u(v+131072);for(var it=(1<<k)-1,Ne=(1<<D)-1,Xe=m;;Xe=m){var Et=x[JG(t,m)&it],qe=Et>>>4;if(m+=Et&15,m>G){if(o)throw"unexpected EOF";break}if(!Et)throw"invalid length/literal";if(qe<256)e[v++]=qe;else if(qe==256){Xe=m,x=null;break}else{var ft=qe-254;if(qe>264){var pe=qe-257,Ct=hPe[pe];ft=gc(t,m,(1<<Ct)-1)+gPe[pe],m+=Ct}var mt=E[JG(t,m)&Ne],Pt=mt>>>4;if(!mt)throw"invalid distance";m+=mt&15;var Te=$Ye[Pt];if(Pt>3){var Ct=pPe[Pt];Te+=JG(t,m)&(1<<Ct)-1,m+=Ct}if(m>G){if(o)throw"unexpected EOF";break}i&&u(v+131072);for(var Rt=v+ft;v<Rt;v+=4)e[v]=e[v-Te],e[v+1]=e[v+1-Te],e[v+2]=e[v+2-Te],e[v+3]=e[v+3-Te];v=Rt}}n.l=x,n.p=Xe,n.b=v,x&&(h=1,n.m=k,n.d=E,n.n=D)}while(!h);return v==e.length?e:YYe(e,0,v)},QYe=new mu(0),JYe=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function eZe(t,e){return ZYe((JYe(t),t.subarray(2,-4)),e)}var tZe=typeof TextDecoder<"u"&&new TextDecoder,nZe=0;try{tZe.decode(QYe,{stream:!0}),nZe=1}catch{}function yPe(t,e,n){const r=n.length-t-1;if(e>=n[r])return r-1;if(e<=n[t])return t;let i=t,o=r,u=Math.floor((i+o)/2);for(;e<n[u]||e>=n[u+1];)e<n[u]?o=u:i=u,u=Math.floor((i+o)/2);return u}function rZe(t,e,n,r){const i=[],o=[],u=[];i[0]=1;for(let h=1;h<=n;++h){o[h]=e-r[t+1-h],u[h]=r[t+h]-e;let m=0;for(let v=0;v<h;++v){const x=u[v+1],E=o[h-v],k=i[v]/(x+E);i[v]=m+x*k,m=E*k}i[h]=m}return i}function iZe(t,e,n,r){const i=yPe(t,r,e),o=rZe(i,r,t,e),u=new Pr(0,0,0,0);for(let h=0;h<=t;++h){const m=n[i-t+h],v=o[h],x=m.w*v;u.x+=m.x*x,u.y+=m.y*x,u.z+=m.z*x,u.w+=m.w*v}return u}function sZe(t,e,n,r,i){const o=[];for(let E=0;E<=n;++E)o[E]=0;const u=[];for(let E=0;E<=r;++E)u[E]=o.slice(0);const h=[];for(let E=0;E<=n;++E)h[E]=o.slice(0);h[0][0]=1;const m=o.slice(0),v=o.slice(0);for(let E=1;E<=n;++E){m[E]=e-i[t+1-E],v[E]=i[t+E]-e;let k=0;for(let D=0;D<E;++D){const G=v[D+1],N=m[E-D];h[E][D]=G+N;const z=h[D][E-1]/h[E][D];h[D][E]=k+G*z,k=N*z}h[E][E]=k}for(let E=0;E<=n;++E)u[0][E]=h[E][n];for(let E=0;E<=n;++E){let k=0,D=1;const G=[];for(let N=0;N<=n;++N)G[N]=o.slice(0);G[0][0]=1;for(let N=1;N<=r;++N){let z=0;const U=E-N,P=n-N;E>=N&&(G[D][0]=G[k][0]/h[P+1][U],z=G[D][0]*h[U][P]);const $=U>=-1?1:-U,Q=E-1<=P?N-1:n-E;for(let q=$;q<=Q;++q)G[D][q]=(G[k][q]-G[k][q-1])/h[P+1][U+q],z+=G[D][q]*h[U+q][P];E<=P&&(G[D][N]=-G[k][N-1]/h[P+1][E],z+=G[D][N]*h[E][P]),u[N][E]=z;const ye=k;k=D,D=ye}}let x=n;for(let E=1;E<=r;++E){for(let k=0;k<=n;++k)u[E][k]*=x;x*=n-E}return u}function oZe(t,e,n,r,i){const o=i<t?i:t,u=[],h=yPe(t,r,e),m=sZe(h,r,t,o,e),v=[];for(let x=0;x<n.length;++x){const E=n[x].clone(),k=E.w;E.x*=k,E.y*=k,E.z*=k,v[x]=E}for(let x=0;x<=o;++x){const E=v[h-t].clone().multiplyScalar(m[x][0]);for(let k=1;k<=t;++k)E.add(v[h-t+k].clone().multiplyScalar(m[x][k]));u[x]=E}for(let x=o+1;x<=i+1;++x)u[x]=new Pr(0,0,0);return u}function aZe(t,e){let n=1;for(let i=2;i<=t;++i)n*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=t-e;++i)r*=i;return n/r}function lZe(t){const e=t.length,n=[],r=[];for(let o=0;o<e;++o){const u=t[o];n[o]=new Le(u.x,u.y,u.z),r[o]=u.w}const i=[];for(let o=0;o<e;++o){const u=n[o].clone();for(let h=1;h<=o;++h)u.sub(i[o-h].clone().multiplyScalar(aZe(o,h)*r[h]));i[o]=u.divideScalar(r[0])}return i}function uZe(t,e,n,r,i){const o=oZe(t,e,n,r,i);return lZe(o)}class cZe extends D6e{constructor(e,n,r,i,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let u=0;u<r.length;++u){const h=r[u];this.controlPoints[u]=new Pr(h.x,h.y,h.z,h.w)}}getPoint(e,n=new Le){const r=n,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=iZe(this.degree,this.knots,this.controlPoints,i);return o.w!==1&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)}getTangent(e,n=new Le){const r=n,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=uZe(this.degree,this.knots,this.controlPoints,i,1);return r.copy(o[1]).normalize(),r}}let fr,vs,_a;class dZe extends Km{constructor(e){super(e)}load(e,n,r,i){const o=this,u=o.path===""?y8e.extractUrlBase(e):o.path,h=new d8e(this.manager);h.setPath(o.path),h.setResponseType("arraybuffer"),h.setRequestHeader(o.requestHeader),h.setWithCredentials(o.withCredentials),h.load(e,function(m){try{n(o.parse(m,u))}catch(v){i?i(v):console.error(v),o.manager.itemError(e)}},r,i)}parse(e,n){if(vZe(e))fr=new gZe().parse(e);else{const i=xPe(e);if(!yZe(i))throw new Error("THREE.FBXLoader: Unknown format.");if(S_e(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+S_e(i));fr=new mZe().parse(i)}const r=new OSe(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new hZe(r,this.manager).parse(fr)}}class hZe{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){vs=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),r=this.parseMaterials(n),i=this.parseDeformers(),o=new pZe().parse(i);return this.parseScene(i,o,r),_a}parseConnections(){const e=new Map;return"Connections"in fr&&fr.Connections.connections.forEach(function(r){const i=r[0],o=r[1],u=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const h={ID:o,relationship:u};e.get(i).parents.push(h),e.has(o)||e.set(o,{parents:[],children:[]});const m={ID:i,relationship:u};e.get(o).children.push(m)}),e}parseImages(){const e={},n={};if("Video"in fr.Objects){const r=fr.Objects.Video;for(const i in r){const o=r[i],u=parseInt(i);if(e[u]=o.RelativeFilename||o.Filename,"Content"in o){const h=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,m=typeof o.Content=="string"&&o.Content!=="";if(h||m){const v=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=v}}}}for(const r in e){const i=e[r];n[i]!==void 0?e[r]=n[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let o;switch(i){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const u=new Uint8Array(n);return window.URL.createObjectURL(new Blob([u],{type:o}))}}parseTextures(e){const n=new Map;if("Texture"in fr.Objects){const r=fr.Objects.Texture;for(const i in r){const o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n}parseTexture(e,n){const r=this.loadTexture(e,n);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,o=e.WrapModeV,u=i!==void 0?i.value:0,h=o!==void 0?o.value:0;if(r.wrapS=u===0?vp:bl,r.wrapT=h===0?vp:bl,"Scaling"in e){const m=e.Scaling.value;r.repeat.x=m[0],r.repeat.y=m[1]}if("Translation"in e){const m=e.Translation.value;r.offset.x=m[0],r.offset.y=m[1]}return r}loadTexture(e,n){let r;const i=this.textureLoader.path,o=vs.get(e.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(r=n[o[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let u;const h=e.FileName.slice(-3).toLowerCase();if(h==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),u=new is):(m.setPath(this.textureLoader.path),u=m.load(r))}else if(h==="dds"){const m=this.manager.getHandler(".dds");m===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),u=new is):(m.setPath(this.textureLoader.path),u=m.load(r))}else h==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),u=new is):u=this.textureLoader.load(r);return this.textureLoader.setPath(i),u}parseMaterials(e){const n=new Map;if("Material"in fr.Objects){const r=fr.Objects.Material;for(const i in r){const o=this.parseMaterial(r[i],e);o!==null&&n.set(parseInt(i),o)}}return n}parseMaterial(e,n){const r=e.id,i=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!vs.has(r))return null;const u=this.parseParameters(e,n,r);let h;switch(o.toLowerCase()){case"phong":h=new qP;break;case"lambert":h=new e8e;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),h=new qP;break}return h.setValues(u),h.name=i,h}parseParameters(e,n,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Sn().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Sn().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Sn().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Sn().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Sn().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Sn().fromArray(e.SpecularColor.value).convertSRGBToLinear());const o=this;return vs.get(r).children.forEach(function(u){const h=u.relationship;switch(h){case"Bump":i.bumpMap=o.getTexture(n,u.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(n,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(n,u.ID),i.map!==void 0&&(i.map.colorSpace=ns);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,u.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,u.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=ns);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(n,u.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,u.ID),i.envMap!==void 0&&(i.envMap.mapping=_N,i.envMap.colorSpace=ns);break;case"SpecularColor":i.specularMap=o.getTexture(n,u.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=ns);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(n,u.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",h);break}}),i}getTexture(e,n){return"LayeredTexture"in fr.Objects&&n in fr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=vs.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in fr.Objects){const r=fr.Objects.Deformer;for(const i in r){const o=r[i],u=vs.get(parseInt(i));if(o.attrType==="Skin"){const h=this.parseSkeleton(u,r);h.ID=i,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=u.parents[0].ID,e[i]=h}else if(o.attrType==="BlendShape"){const h={id:i};h.rawTargets=this.parseMorphTargets(u,r),h.id=i,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=h}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const r=[];return e.children.forEach(function(i){const o=n[i.ID];if(o.attrType!=="Cluster")return;const u={ID:i.ID,indices:[],weights:[],transformLink:new zn().fromArray(o.TransformLink.a)};"Indexes"in o&&(u.indices=o.Indexes.a,u.weights=o.Weights.a),r.push(u)}),{rawBones:r,bones:[]}}parseMorphTargets(e,n){const r=[];for(let i=0;i<e.children.length;i++){const o=e.children[i],u=n[o.ID],h={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;h.geoID=vs.get(parseInt(o.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,r.push(h)}return r}parseScene(e,n,r){_a=new _0;const i=this.parseModels(e.skeletons,n,r),o=fr.Objects.Model,u=this;i.forEach(function(m){const v=o[m.ID];u.setLookAtProperties(m,v),vs.get(m.ID).parents.forEach(function(E){const k=i.get(E.ID);k!==void 0&&k.add(m)}),m.parent===null&&_a.add(m)}),this.bindSkeleton(e.skeletons,n,i),this.addGlobalSceneSettings(),_a.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const v=_Pe(m.userData.transformData);m.applyMatrix4(v),m.updateWorldMatrix()}});const h=new fZe().parse();_a.children.length===1&&_a.children[0].isGroup&&(_a.children[0].animations=h,_a=_a.children[0]),_a.animations=h}parseModels(e,n,r){const i=new Map,o=fr.Objects.Model;for(const u in o){const h=parseInt(u),m=o[u],v=vs.get(h);let x=this.buildSkeleton(v,e,h,m.attrName);if(!x){switch(m.attrType){case"Camera":x=this.createCamera(v);break;case"Light":x=this.createLight(v);break;case"Mesh":x=this.createMesh(v,n,r);break;case"NurbsCurve":x=this.createCurve(v,n);break;case"LimbNode":case"Root":x=new wW;break;case"Null":default:x=new _0;break}x.name=m.attrName?Dr.sanitizeNodeName(m.attrName):"",x.userData.originalName=m.attrName,x.ID=h}this.getTransformData(x,m),i.set(h,x)}return i}buildSkeleton(e,n,r,i){let o=null;return e.parents.forEach(function(u){for(const h in n){const m=n[h];m.rawBones.forEach(function(v,x){if(v.ID===u.ID){const E=o;o=new wW,o.matrixWorld.copy(v.transformLink),o.name=i?Dr.sanitizeNodeName(i):"",o.userData.originalName=i,o.ID=r,m.bones[x]=o,E!==null&&o.add(E)}})}}),o}createCamera(e){let n,r;if(e.children.forEach(function(i){const o=fr.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new Kr;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let o=1;r.NearPlane!==void 0&&(o=r.NearPlane.value/1e3);let u=1e3;r.FarPlane!==void 0&&(u=r.FarPlane.value/1e3);let h=window.innerWidth,m=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(h=r.AspectWidth.value,m=r.AspectHeight.value);const v=h/m;let x=45;r.FieldOfView!==void 0&&(x=r.FieldOfView.value);const E=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new Us(x,v,o,u),E!==null&&n.setFocalLength(E);break;case 1:n=new eM(-h/2,h/2,m/2,-m/2,o,u);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new Kr;break}}return n}createLight(e){let n,r;if(e.children.forEach(function(i){const o=fr.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new Kr;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let o=16777215;r.Color!==void 0&&(o=new Sn().fromArray(r.Color.value).convertSRGBToLinear());let u=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(u=0);let h=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?h=0:h=r.FarAttenuationEnd.value);const m=1;switch(i){case 0:n=new obe(o,u,h,m);break;case 1:n=new NSe(o,u);break;case 2:let v=Math.PI/3;r.InnerAngle!==void 0&&(v=qo.degToRad(r.InnerAngle.value));let x=0;r.OuterAngle!==void 0&&(x=qo.degToRad(r.OuterAngle.value),x=Math.max(x,1)),n=new LSe(o,u,h,v,x,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new obe(o,u);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,r){let i,o=null,u=null;const h=[];return e.children.forEach(function(m){n.has(m.ID)&&(o=n.get(m.ID)),r.has(m.ID)&&h.push(r.get(m.ID))}),h.length>1?u=h:h.length>0?u=h[0]:(u=new qP({name:Km.DEFAULT_MATERIAL_NAME,color:13421772}),h.push(u)),"color"in o.attributes&&h.forEach(function(m){m.vertexColors=!0}),o.FBX_Deformer?(i=new A6e(o,u),i.normalizeSkinWeights()):i=new ks(o,u),i}createCurve(e,n){const r=e.children.reduce(function(o,u){return n.has(u.ID)&&(o=n.get(u.ID)),o},null),i=new wF({name:Km.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new ESe(r,i)}getTransformData(e,n){const r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=wPe(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,n){"LookAtProperty"in n&&vs.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const o=fr.Objects.Model[i.ID];if("Lcl_Translation"in o){const u=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(u),_a.add(e.target)):e.lookAt(new Le().fromArray(u))}}})}bindSkeleton(e,n,r){const i=this.parsePoseNodes();for(const o in e){const u=e[o];vs.get(parseInt(u.ID)).parents.forEach(function(m){if(n.has(m.ID)){const v=m.ID;vs.get(v).parents.forEach(function(E){r.has(E.ID)&&r.get(E.ID).bind(new u7(u.bones),i[E.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in fr.Objects){const n=fr.Objects.Pose;for(const r in n)if(n[r].attrType==="BindPose"&&n[r].NbPoseNodes>0){const i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(o){e[o.Node]=new zn().fromArray(o.Matrix.a)}):e[i.Node]=new zn().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in fr){if("AmbientColor"in fr.GlobalSettings){const e=fr.GlobalSettings.AmbientColor.value,n=e[0],r=e[1],i=e[2];if(n!==0||r!==0||i!==0){const o=new Sn(n,r,i).convertSRGBToLinear();_a.add(new v8e(o,1))}}"UnitScaleFactor"in fr.GlobalSettings&&(_a.userData.unitScaleFactor=fr.GlobalSettings.UnitScaleFactor.value)}}}class pZe{constructor(){this.negativeMaterialIndices=!1}parse(e){const n=new Map;if("Geometry"in fr.Objects){const r=fr.Objects.Geometry;for(const i in r){const o=vs.get(parseInt(i)),u=this.parseGeometry(o,r[i],e);n.set(parseInt(i),u)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(e,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,r){const i=r.skeletons,o=[],u=e.parents.map(function(E){return fr.Objects.Model[E.ID]});if(u.length===0)return;const h=e.children.reduce(function(E,k){return i[k.ID]!==void 0&&(E=i[k.ID]),E},null);e.children.forEach(function(E){r.morphTargets[E.ID]!==void 0&&o.push(r.morphTargets[E.ID])});const m=u[0],v={};"RotationOrder"in m&&(v.eulerOrder=wPe(m.RotationOrder.value)),"InheritType"in m&&(v.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(v.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(v.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(v.scale=m.GeometricScaling.value);const x=_Pe(v);return this.genGeometry(n,h,o,x)}genGeometry(e,n,r,i){const o=new ea;e.attrName&&(o.name=e.attrName);const u=this.parseGeoNode(e,n),h=this.genBuffers(u),m=new Mi(h.vertex,3);if(m.applyMatrix4(i),o.setAttribute("position",m),h.colors.length>0&&o.setAttribute("color",new Mi(h.colors,3)),n&&(o.setAttribute("skinIndex",new i7(h.weightsIndices,4)),o.setAttribute("skinWeight",new Mi(h.vertexWeights,4)),o.FBX_Deformer=n),h.normal.length>0){const v=new mr().getNormalMatrix(i),x=new Mi(h.normal,3);x.applyNormalMatrix(v),o.setAttribute("normal",x)}if(h.uvs.forEach(function(v,x){const E=x===0?"uv":`uv${x}`;o.setAttribute(E,new Mi(h.uvs[x],2))}),u.material&&u.material.mappingType!=="AllSame"){let v=h.materialIndex[0],x=0;if(h.materialIndex.forEach(function(E,k){E!==v&&(o.addGroup(x,k-x,v),v=E,x=k)}),o.groups.length>0){const E=o.groups[o.groups.length-1],k=E.start+E.count;k!==h.materialIndex.length&&o.addGroup(k,h.materialIndex.length-k,v)}o.groups.length===0&&o.addGroup(0,h.materialIndex.length,h.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o}parseGeoNode(e,n){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},n!==null&&(r.skeleton=n,n.rawBones.forEach(function(i,o){i.indices.forEach(function(u,h){r.weightTable[u]===void 0&&(r.weightTable[u]=[]),r.weightTable[u].push({id:o,weight:i.weights[h]})})})),r}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,o=!1,u=[],h=[],m=[],v=[],x=[],E=[];const k=this;return e.vertexIndices.forEach(function(D,G){let N,z=!1;D<0&&(D=D^-1,z=!0);let U=[],P=[];if(u.push(D*3,D*3+1,D*3+2),e.color){const $=yL(G,r,D,e.color);m.push($[0],$[1],$[2])}if(e.skeleton){if(e.weightTable[D]!==void 0&&e.weightTable[D].forEach(function($){P.push($.weight),U.push($.id)}),P.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const $=[0,0,0,0],Q=[0,0,0,0];P.forEach(function(ye,q){let ie=ye,pe=U[q];Q.forEach(function(W,he,Ye){if(ie>W){Ye[he]=ie,ie=W;const at=$[he];$[he]=pe,pe=at}})}),U=$,P=Q}for(;P.length<4;)P.push(0),U.push(0);for(let $=0;$<4;++$)x.push(P[$]),E.push(U[$])}if(e.normal){const $=yL(G,r,D,e.normal);h.push($[0],$[1],$[2])}e.material&&e.material.mappingType!=="AllSame"&&(N=yL(G,r,D,e.material)[0],N<0&&(k.negativeMaterialIndices=!0,N=0)),e.uv&&e.uv.forEach(function($,Q){const ye=yL(G,r,D,$);v[Q]===void 0&&(v[Q]=[]),v[Q].push(ye[0]),v[Q].push(ye[1])}),i++,z&&(k.genFace(n,e,u,N,h,m,v,x,E,i),r++,i=0,u=[],h=[],m=[],v=[],x=[],E=[])}),n}getNormalNewell(e){const n=new Le(0,0,0);for(let r=0;r<e.length;r++){const i=e[r],o=e[(r+1)%e.length];n.x+=(i.y-o.y)*(i.z+o.z),n.y+=(i.z-o.z)*(i.x+o.x),n.z+=(i.x-o.x)*(i.y+o.y)}return n.normalize(),n}getNormalTangentAndBitangent(e){const n=this.getNormalNewell(e),i=(Math.abs(n.z)>.5?new Le(0,1,0):new Le(0,0,1)).cross(n).normalize(),o=n.clone().cross(i).normalize();return{normal:n,tangent:i,bitangent:o}}flattenVertex(e,n,r){return new un(e.dot(n),e.dot(r))}genFace(e,n,r,i,o,u,h,m,v,x){let E;if(x>3){const k=[];for(let z=0;z<r.length;z+=3)k.push(new Le(n.vertexPositions[r[z]],n.vertexPositions[r[z+1]],n.vertexPositions[r[z+2]]));const{tangent:D,bitangent:G}=this.getNormalTangentAndBitangent(k),N=[];for(const z of k)N.push(this.flattenVertex(z,D,G));E=d7.triangulateShape(N,[])}else E=[[0,1,2]];for(const[k,D,G]of E)e.vertex.push(n.vertexPositions[r[k*3]]),e.vertex.push(n.vertexPositions[r[k*3+1]]),e.vertex.push(n.vertexPositions[r[k*3+2]]),e.vertex.push(n.vertexPositions[r[D*3]]),e.vertex.push(n.vertexPositions[r[D*3+1]]),e.vertex.push(n.vertexPositions[r[D*3+2]]),e.vertex.push(n.vertexPositions[r[G*3]]),e.vertex.push(n.vertexPositions[r[G*3+1]]),e.vertex.push(n.vertexPositions[r[G*3+2]]),n.skeleton&&(e.vertexWeights.push(m[k*4]),e.vertexWeights.push(m[k*4+1]),e.vertexWeights.push(m[k*4+2]),e.vertexWeights.push(m[k*4+3]),e.vertexWeights.push(m[D*4]),e.vertexWeights.push(m[D*4+1]),e.vertexWeights.push(m[D*4+2]),e.vertexWeights.push(m[D*4+3]),e.vertexWeights.push(m[G*4]),e.vertexWeights.push(m[G*4+1]),e.vertexWeights.push(m[G*4+2]),e.vertexWeights.push(m[G*4+3]),e.weightsIndices.push(v[k*4]),e.weightsIndices.push(v[k*4+1]),e.weightsIndices.push(v[k*4+2]),e.weightsIndices.push(v[k*4+3]),e.weightsIndices.push(v[D*4]),e.weightsIndices.push(v[D*4+1]),e.weightsIndices.push(v[D*4+2]),e.weightsIndices.push(v[D*4+3]),e.weightsIndices.push(v[G*4]),e.weightsIndices.push(v[G*4+1]),e.weightsIndices.push(v[G*4+2]),e.weightsIndices.push(v[G*4+3])),n.color&&(e.colors.push(u[k*3]),e.colors.push(u[k*3+1]),e.colors.push(u[k*3+2]),e.colors.push(u[D*3]),e.colors.push(u[D*3+1]),e.colors.push(u[D*3+2]),e.colors.push(u[G*3]),e.colors.push(u[G*3+1]),e.colors.push(u[G*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),n.normal&&(e.normal.push(o[k*3]),e.normal.push(o[k*3+1]),e.normal.push(o[k*3+2]),e.normal.push(o[D*3]),e.normal.push(o[D*3+1]),e.normal.push(o[D*3+2]),e.normal.push(o[G*3]),e.normal.push(o[G*3+1]),e.normal.push(o[G*3+2])),n.uv&&n.uv.forEach(function(N,z){e.uvs[z]===void 0&&(e.uvs[z]=[]),e.uvs[z].push(h[z][k*2]),e.uvs[z].push(h[z][k*2+1]),e.uvs[z].push(h[z][D*2]),e.uvs[z].push(h[z][D*2+1]),e.uvs[z].push(h[z][G*2]),e.uvs[z].push(h[z][G*2+1])})}addMorphTargets(e,n,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;r.forEach(function(u){u.rawTargets.forEach(function(h){const m=fr.Objects.Geometry[h.geoID];m!==void 0&&o.genMorphGeometry(e,n,m,i,h.name)})})}genMorphGeometry(e,n,r,i,o){const u=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],h=r.Vertices!==void 0?r.Vertices.a:[],m=r.Indexes!==void 0?r.Indexes.a:[],v=e.attributes.position.count*3,x=new Float32Array(v);for(let G=0;G<m.length;G++){const N=m[G]*3;x[N]=h[G*3],x[N+1]=h[G*3+1],x[N+2]=h[G*3+2]}const E={vertexIndices:u,vertexPositions:x},k=this.genBuffers(E),D=new Mi(k.vertex,3);D.name=o||r.attrName,D.applyMatrix4(i),e.morphAttributes.position.push(D)}parseNormals(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let o=[];return r==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:n,referenceType:r}}parseUVs(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let o=[];return r==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:n,referenceType:r}}parseVertexColors(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let o=[];r==="IndexToDirect"&&(o=e.ColorIndex.a);for(let u=0,h=new Sn;u<i.length;u+=4)h.fromArray(i,u).convertSRGBToLinear().toArray(i,u);return{dataSize:4,buffer:i,indices:o,mappingType:n,referenceType:r}}parseMaterialIndices(e){const n=e.MappingInformationType,r=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,o=[];for(let u=0;u<i.length;++u)o.push(u);return{dataSize:1,buffer:i,indices:o,mappingType:n,referenceType:r}}parseNurbsGeometry(e){const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ea;const r=n-1,i=e.KnotVector.a,o=[],u=e.Points.a;for(let E=0,k=u.length;E<k;E+=4)o.push(new Pr().fromArray(u,E));let h,m;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){h=r,m=i.length-1-h;for(let E=0;E<r;++E)o.push(o[E])}const x=new cZe(r,i,o,h,m).getPoints(o.length*12);return new ea().setFromPoints(x)}}class fZe{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const r in n){const i=n[r],o=this.addClip(i);e.push(o)}return e}parseClips(){if(fr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=fr.Objects.AnimationCurveNode,n=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(e){const n=fr.Objects.AnimationCurve;for(const r in n){const i={id:n[r].id,times:n[r].KeyTime.a.map(bZe),values:n[r].KeyValueFloat.a},o=vs.get(i.id);if(o!==void 0){const u=o.parents[0].ID,h=o.parents[0].relationship;h.match(/X/)?e.get(u).curves.x=i:h.match(/Y/)?e.get(u).curves.y=i:h.match(/Z/)?e.get(u).curves.z=i:h.match(/DeformPercent/)&&e.has(u)&&(e.get(u).curves.morph=i)}}}parseAnimationLayers(e){const n=fr.Objects.AnimationLayer,r=new Map;for(const i in n){const o=[],u=vs.get(parseInt(i));u!==void 0&&(u.children.forEach(function(m,v){if(e.has(m.ID)){const x=e.get(m.ID);if(x.curves.x!==void 0||x.curves.y!==void 0||x.curves.z!==void 0){if(o[v]===void 0){const E=vs.get(m.ID).parents.filter(function(k){return k.relationship!==void 0})[0].ID;if(E!==void 0){const k=fr.Objects.Model[E.toString()];if(k===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const D={modelName:k.attrName?Dr.sanitizeNodeName(k.attrName):"",ID:k.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};_a.traverse(function(G){G.ID===k.id&&(D.transform=G.matrix,G.userData.transformData&&(D.eulerOrder=G.userData.transformData.eulerOrder))}),D.transform||(D.transform=new zn),"PreRotation"in k&&(D.preRotation=k.PreRotation.value),"PostRotation"in k&&(D.postRotation=k.PostRotation.value),o[v]=D}}o[v]&&(o[v][x.attr]=x)}else if(x.curves.morph!==void 0){if(o[v]===void 0){const E=vs.get(m.ID).parents.filter(function(U){return U.relationship!==void 0})[0].ID,k=vs.get(E).parents[0].ID,D=vs.get(k).parents[0].ID,G=vs.get(D).parents[0].ID,N=fr.Objects.Model[G],z={modelName:N.attrName?Dr.sanitizeNodeName(N.attrName):"",morphName:fr.Objects.Deformer[E].attrName};o[v]=z}o[v][x.attr]=x}}}),r.set(parseInt(i),o))}return r}parseAnimStacks(e){const n=fr.Objects.AnimationStack,r={};for(const i in n){const o=vs.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=e.get(o[0].ID);r[i]={name:n[i].attrName,layer:u}}return r}addClip(e){let n=[];const r=this;return e.layer.forEach(function(i){n=n.concat(r.generateTracks(i))}),new EW(e.name,-1,n)}generateTracks(e){const n=[];let r=new Le,i=new Le;if(e.transform&&e.transform.decompose(r,new Ms,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,r,i){const o=this.getTimesForAllAxes(n),u=this.getKeyframeTrackValues(o,n,r);return new kT(e+"."+i,o,u)}generateRotationTrack(e,n,r,i,o){let u,h;if(n.x!==void 0&&n.y!==void 0&&n.z!==void 0){const E=this.interpolateRotations(n.x,n.y,n.z,o);u=E[0],h=E[1]}r!==void 0&&(r=r.map(qo.degToRad),r.push(o),r=new Sa().fromArray(r),r=new Ms().setFromEuler(r)),i!==void 0&&(i=i.map(qo.degToRad),i.push(o),i=new Sa().fromArray(i),i=new Ms().setFromEuler(i).invert());const m=new Ms,v=new Sa,x=[];if(!h||!u)return new L0(e+".quaternion",[],[]);for(let E=0;E<h.length;E+=3)v.set(h[E],h[E+1],h[E+2],o),m.setFromEuler(v),r!==void 0&&m.premultiply(r),i!==void 0&&m.multiply(i),E>2&&new Ms().fromArray(x,(E-3)/3*4).dot(m)<0&&m.set(-m.x,-m.y,-m.z,-m.w),m.toArray(x,E/3*4);return new L0(e+".quaternion",u,x)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,r=n.values.map(function(o){return o/100}),i=_a.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new MT(e.modelName+".morphTargetInfluences["+i+"]",n.times,r)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(r,i){return r-i}),n.length>1){let r=1,i=n[0];for(let o=1;o<n.length;o++){const u=n[o];u!==i&&(n[r]=u,i=u,r++)}n=n.slice(0,r)}return n}getKeyframeTrackValues(e,n,r){const i=r,o=[];let u=-1,h=-1,m=-1;return e.forEach(function(v){if(n.x&&(u=n.x.times.indexOf(v)),n.y&&(h=n.y.times.indexOf(v)),n.z&&(m=n.z.times.indexOf(v)),u!==-1){const x=n.x.values[u];o.push(x),i[0]=x}else o.push(i[0]);if(h!==-1){const x=n.y.values[h];o.push(x),i[1]=x}else o.push(i[1]);if(m!==-1){const x=n.z.values[m];o.push(x),i[2]=x}else o.push(i[2])}),o}interpolateRotations(e,n,r,i){const o=[],u=[];o.push(e.times[0]),u.push(qo.degToRad(e.values[0])),u.push(qo.degToRad(n.values[0])),u.push(qo.degToRad(r.values[0]));for(let h=1;h<e.values.length;h++){const m=[e.values[h-1],n.values[h-1],r.values[h-1]];if(isNaN(m[0])||isNaN(m[1])||isNaN(m[2]))continue;const v=m.map(qo.degToRad),x=[e.values[h],n.values[h],r.values[h]];if(isNaN(x[0])||isNaN(x[1])||isNaN(x[2]))continue;const E=x.map(qo.degToRad),k=[x[0]-m[0],x[1]-m[1],x[2]-m[2]],D=[Math.abs(k[0]),Math.abs(k[1]),Math.abs(k[2])];if(D[0]>=180||D[1]>=180||D[2]>=180){const N=Math.max(...D)/180,z=new Sa(...v,i),U=new Sa(...E,i),P=new Ms().setFromEuler(z),$=new Ms().setFromEuler(U);P.dot($)&&$.set(-$.x,-$.y,-$.z,-$.w);const Q=e.times[h-1],ye=e.times[h]-Q,q=new Ms,ie=new Sa;for(let pe=0;pe<1;pe+=1/N)q.copy(P.clone().slerp($.clone(),pe)),o.push(Q+pe*ye),ie.setFromQuaternion(q,i),u.push(ie.x),u.push(ie.y),u.push(ie.z)}else o.push(e.times[h]),u.push(qo.degToRad(e.values[h])),u.push(qo.degToRad(n.values[h])),u.push(qo.degToRad(r.values[h]))}return[o,u]}}class mZe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new bPe,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,o){const u=i.match(/^[\s\t]*;/),h=i.match(/^[\s\t]*$/);if(u||h)return;const m=i.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),v=i.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),x=i.match("^\\t{"+(n.currentIndent-1)+"}}");m?n.parseNodeBegin(i,m):v?n.parseNodeProperty(i,v,r[++o]):x?n.popStack():i.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,n){const r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},u=this.parseNodeAttr(i),h=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,o):r in h?(r==="PoseNode"?h.PoseNode.push(o):h[r].id!==void 0&&(h[r]={},h[r][h[r].id]=h[r]),u.id!==""&&(h[r][u.id]=o)):typeof u.id=="number"?(h[r]={},h[r][u.id]=o):r!=="Properties70"&&(r==="PoseNode"?h[r]=[o]:h[r]=o),typeof u.id=="number"&&(o.id=u.id),u.name!==""&&(o.attrName=u.name),u.type!==""&&(o.attrType=u.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:n,name:r,type:i}}parseNodeProperty(e,n,r){let i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&o===","&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(e,i,o);return}if(i==="C"){const m=o.split(",").slice(1),v=parseInt(m[0]),x=parseInt(m[1]);let E=o.split(",").slice(3);E=E.map(function(k){return k.trim().replace(/^"/,"")}),i="connections",o=[v,x],wZe(o,E),u[i]===void 0&&(u[i]=[])}i==="Node"&&(u.id=o),i in u&&Array.isArray(u[i])?u[i].push(o):i!=="a"?u[i]=o:u.a=o,this.setCurrentProp(u,i),i==="a"&&o.slice(-1)!==","&&(u.a=t9(o))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=t9(n.a))}parseNodeSpecialProperty(e,n,r){const i=r.split('",').map(function(x){return x.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],u=i[1],h=i[2],m=i[3];let v=i[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=t9(v);break}this.getPrevNode()[o]={type:u,type2:h,flag:m,value:v},this.setCurrentProp(this.getPrevNode(),o)}}class gZe{parse(e){const n=new x_e(e);n.skip(23);const r=n.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new bPe;for(;!this.endOfContent(n);){const o=this.parseNode(n,r);o!==null&&i.add(o.name,o)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const r={},i=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const u=e.getUint8(),h=e.getString(u);if(i===0)return null;const m=[];for(let k=0;k<o;k++)m.push(this.parseProperty(e));const v=m.length>0?m[0]:"",x=m.length>1?m[1]:"",E=m.length>2?m[2]:"";for(r.singleProperty=o===1&&e.getOffset()===i;i>e.getOffset();){const k=this.parseNode(e,n);k!==null&&this.parseSubNode(h,r,k)}return r.propertyList=m,typeof v=="number"&&(r.id=v),x!==""&&(r.attrName=x),E!==""&&(r.attrType=E),h!==""&&(r.name=h),r}parseSubNode(e,n,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(n[r.name]=r,r.a=i):n[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(o,u){u!==0&&i.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(o){n[o]=r[o]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],o=r.propertyList[1];const u=r.propertyList[2],h=r.propertyList[3];let m;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?m=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:m=r.propertyList[4],n[i]={type:o,type2:u,flag:h,value:m}}else n[r.name]===void 0?typeof r.id=="number"?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:r.name==="PoseNode"?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):n[r.name][r.id]===void 0&&(n[r.name][r.id]=r)}parseProperty(e){const n=e.getString(1);let r;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),o=e.getUint32(),u=e.getUint32();if(o===0)switch(n){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const h=eZe(new Uint8Array(e.getArrayBuffer(u))),m=new x_e(h.buffer);switch(n){case"b":case"c":return m.getBooleanArray(i);case"d":return m.getFloat64Array(i);case"f":return m.getFloat32Array(i);case"i":return m.getInt32Array(i);case"l":return m.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class x_e{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let r=0;r<e;r++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){const n=this.offset;let r=new Uint8Array(this.dv.buffer,n,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,n,i)),this._textDecoder.decode(r)}}class bPe{add(e,n){this[e]=n}}function vZe(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===xPe(t,0,e.length)}function yZe(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(i){const o=t[i-1];return t=t.slice(n+i),n++,o}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function S_e(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function bZe(t){return t/46186158e3}const _Ze=[];function yL(t,e,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const o=i*r.dataSize,u=o+r.dataSize;return xZe(_Ze,r.buffer,o,u)}const e9=new Sa,aw=new Le;function _Pe(t){const e=new zn,n=new zn,r=new zn,i=new zn,o=new zn,u=new zn,h=new zn,m=new zn,v=new zn,x=new zn,E=new zn,k=new zn,D=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(aw.fromArray(t.translation)),t.preRotation){const he=t.preRotation.map(qo.degToRad);he.push(t.eulerOrder||Sa.DEFAULT_ORDER),n.makeRotationFromEuler(e9.fromArray(he))}if(t.rotation){const he=t.rotation.map(qo.degToRad);he.push(t.eulerOrder||Sa.DEFAULT_ORDER),r.makeRotationFromEuler(e9.fromArray(he))}if(t.postRotation){const he=t.postRotation.map(qo.degToRad);he.push(t.eulerOrder||Sa.DEFAULT_ORDER),i.makeRotationFromEuler(e9.fromArray(he)),i.invert()}t.scale&&o.scale(aw.fromArray(t.scale)),t.scalingOffset&&h.setPosition(aw.fromArray(t.scalingOffset)),t.scalingPivot&&u.setPosition(aw.fromArray(t.scalingPivot)),t.rotationOffset&&m.setPosition(aw.fromArray(t.rotationOffset)),t.rotationPivot&&v.setPosition(aw.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(E.copy(t.parentMatrix),x.copy(t.parentMatrixWorld));const G=n.clone().multiply(r).multiply(i),N=new zn;N.extractRotation(x);const z=new zn;z.copyPosition(x);const U=z.clone().invert().multiply(x),P=N.clone().invert().multiply(U),$=o,Q=new zn;if(D===0)Q.copy(N).multiply(G).multiply(P).multiply($);else if(D===1)Q.copy(N).multiply(P).multiply(G).multiply($);else{const Ye=new zn().scale(new Le().setFromMatrixScale(E)).clone().invert(),at=P.clone().multiply(Ye);Q.copy(N).multiply(G).multiply(at).multiply($)}const ye=v.clone().invert(),q=u.clone().invert();let ie=e.clone().multiply(m).multiply(v).multiply(n).multiply(r).multiply(i).multiply(ye).multiply(h).multiply(u).multiply(o).multiply(q);const pe=new zn().copyPosition(ie),W=x.clone().multiply(pe);return k.copyPosition(W),ie=k.clone().multiply(Q),ie.premultiply(x.invert()),ie}function wPe(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function t9(t){return t.split(",").map(function(n){return parseFloat(n)})}function xPe(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,n))}function wZe(t,e){for(let n=0,r=t.length,i=e.length;n<i;n++,r++)t[r]=e[n]}function xZe(t,e,n,r){for(let i=n,o=0;i<r;i++,o++)t[o]=e[i];return t}const SPe=new Map,EPe=new Map,CPe=new Map;function SZe(t,e){return new Promise((n,r)=>{new h8e().setPath("images/milkyWay/").load(e,i=>{SPe.set(t,i),n(i)},void 0,()=>{r()})})}function n9(t,e){return new Promise((n,r)=>{new dZe().setPath("./models/").loadAsync(e).then(i=>{i.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),EPe.set(t,i),n(i)}).catch(i=>{console.log("Couldn't load:",e),console.log(i),r()})})}function EZe(t,e){return new Promise((n,r)=>{new OSe().load(e,i=>{i.wrapS=vp,i.wrapT=vp,i.needsUpdate=!0,CPe.set(t,i),n(i)},void 0,()=>{r()})})}function CZe(){return new Promise((t,e)=>{const n=[()=>SZe("environment",["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]),()=>EZe("uv_grid","images/uv_grid_opengl.jpg"),()=>n9("Thriller2","Thriller2.fbx"),()=>n9("Flair","Flair.fbx"),()=>n9("Thriller4","Thriller4.fbx")];Promise.all(n.map(r=>r())).then(()=>{t()}).catch(()=>{e()})})}class r9 extends Kr{constructor(n){super();Jr(this,"mixer");this.name=n,this.scale.setScalar(.5);const r=EPe.get(n),i=jYe(r);this.add(i),this.mixer=new O8e(i),this.mixer.clipAction(i.animations[0]).play()}update(n){var r;(r=this.mixer)==null||r.update(n)}}class PPe extends ST{constructor(n){super();Jr(this,"camera");Jr(this,"renderer");this.renderer=n;const r=new Kr;r.name="cameras",this.add(r),this.camera=new Us(90,1,10,1e3),this.camera.name="Main",this.camera.position.set(0,100,125),this.camera.lookAt(0,50,0),r.add(this.camera)}resize(n,r){this.camera.aspect=n/r,this.camera.updateProjectionMatrix()}update(){}draw(){this.renderer.render(this,this.camera)}}class TPe extends PPe{constructor(n){super(n);Jr(this,"dance0");Jr(this,"dance1");Jr(this,"dance2");Jr(this,"customMat");Jr(this,"post");Jr(this,"lastUpdate",-1);this.name="Scene1";const r=SPe.get("environment");if(this.background=r,fi.editor){const i=new ks(new TT,new xT({envMap:r,side:Vs}));i.name="bg",i.scale.setScalar(1e3),this.add(i)}this.createLights(),this.createWorld(),fi.editor||this.createPost(),this.lastUpdate=Date.now(),CF(this)}createLights(){const n=new Kr;n.name="lights",this.add(n);const r=new NSe(16777215,.25);r.name="sun",r.castShadow=!0,r.position.set(0,50,50);const i=256;r.shadow.camera.top=i,r.shadow.camera.bottom=-i,r.shadow.camera.left=-i,r.shadow.camera.right=i,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.camera.near=10,r.shadow.camera.far=1e3,r.shadow.bias=1e-4,n.add(r);const o=new p8e(7320802,12872999,.5);o.name="hemi",n.add(o);const u=new LSe(16777215,3);u.angle=5.8,u.decay=0,u.distance=1e3,u.penumbra=Math.PI,u.name="spotlight",u.castShadow=!0,u.position.set(-50,200,200),u.lookAt(0,50,0),n.add(u)}createWorld(){const n=new Kr;n.name="world",this.add(n);const r=CPe.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new qP({map:r}),o=new ks(new c7(500,36),i);o.name="floor",o.receiveShadow=!0,o.rotateX(-Math.PI/2),n.add(o),this.dance0=new r9("Thriller2"),this.dance0.position.set(-150,0,-175),n.add(this.dance0),this.dance1=new r9("Flair"),this.dance1.position.set(0,0,0),n.add(this.dance1),this.dance2=new r9("Thriller4"),this.dance2.position.set(150,0,-185),n.add(this.dance2),this.createTestMaterials(n)}createTestMaterials(n){const r=new TT(20),i=[],o=new ks(r,new xT({name:"BasicMaterial",transparent:!0}));o.name="Basic",n.add(o),i.push(o);const u=new ks(r,new kSe({transparent:!0}));u.name="Matcap",n.add(u),i.push(u);const h=new ks(r,new qP({name:"PhongMaterial",transparent:!0}));h.name="Phong",n.add(h),i.push(h);const m=new ks(r,new Q6e({name:"PhysicalMaterial",transparent:!0}));m.name="Physical",n.add(m),i.push(m),this.customMat=new VYe;const v=new ks(r,this.customMat);v.name="Shader",n.add(v),i.push(v);const x=50,E=i.length,k=(E-1)/2*x;for(let D=0;D<E;D++){const G=D*x-k;i[D].position.set(G,100,-150),i[D].castShadow=!0}}createPost(){this.post=new $qe(this.renderer),this.post.addPass(new Uqe(this,this.camera));const n=new AYe;n.minEdgeThreshold=.01,this.post.addPass(new qG(this.camera,n));const r=new LYe({focusArea:.6});this.post.addPass(new qG(this.camera,r));const i=new RYe({});i.blendMode.opacity.value=.33,i.blendMode.blendFunction=gr.MULTIPLY;const o=new FYe({});this.post.addPass(new qG(this.camera,i,o))}update(){const n=Date.now(),r=(n-this.lastUpdate)/1e3;this.lastUpdate=n,this.customMat.update(r),this.dance0.update(r),this.dance1.update(r),this.dance2.update(r)}draw(){fi.editor,this.post.render()}resize(n,r){super.resize(n,r),fi.editor||this.post.setSize(n,r)}}class MPe extends PPe{constructor(e){super(e),this.name="Scene2",this.camera.position.set(0,0,125),this.camera.lookAt(0,0,0),this.createWorld(),CF(this)}createWorld(){const e=new Kr;e.name="world",this.add(e);const n=new ks(new TT(50),new kSe);n.name="sphere",e.add(n)}}function PZe(t){function e(){return t.three.scene===void 0?(console.log("No scene:",t.three),!1):!0}const n=h=>{var v;if(!e())return;const m=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",h.value);m!==void 0&&t.three.setObject(m)},r=(h,m,v)=>{var E;if(!e())return;const x=(E=t.three.scene)==null?void 0:E.getObjectByProperty("uuid",h);x!==void 0&&to(x,m,v)},i=h=>{if(!e())return;const m=h.value,{key:v,value:x,uuid:E}=m;r(E,v,x)},o=h=>{if(!e())return;const m=h.value;RN(m.value).then(v=>{r(m.uuid,m.key,v),r(m.uuid,"material.needsUpdate",!0)})},u=h=>{var k;if(!e())return;const{key:m,uuid:v,value:x}=h.value,E=(k=t.three.scene)==null?void 0:k.getObjectByProperty("uuid",v);if(E!==void 0)try{E[m](x)}catch(D){console.log("Error requesting method:"),console.log(D),console.log(m),console.log(x)}};return Gt.useEffect(()=>(_r.addEventListener(wr.GET_OBJECT,n),_r.addEventListener(wr.UPDATE_OBJECT,i),_r.addEventListener(wr.CREATE_TEXTURE,o),_r.addEventListener(wr.REQUEST_METHOD,u),()=>{_r.removeEventListener(wr.GET_OBJECT,n),_r.removeEventListener(wr.UPDATE_OBJECT,i),_r.removeEventListener(wr.CREATE_TEXTURE,o),_r.removeEventListener(wr.REQUEST_METHOD,u)}),[]),null}let uu,Ps;function TZe(){const t=Gt.useRef(null),[e,n]=Gt.useState(!1);Gt.useEffect(()=>{var m;if(fi.theatre===void 0)return;const u=t.current;u.style.visibility=fi.editor?"hidden":"inherit",fi.theatre.sheet("App");const h=(m=fi.theatre)==null?void 0:m.sheetObject("App","Box",{x:PW.types.number(100,{range:[0,window.innerWidth]}),y:PW.types.number(100,{range:[0,window.innerHeight]})},v=>{u.style.left=`${v.x}px`,u.style.top=`${v.y}px`});return()=>{var v;h!==void 0&&((v=fi.theatre)==null||v.unsubscribe(h)),fi.dispose()}},[]),fi.editor||Gt.useEffect(()=>(uu=new l7({stencil:!1}),uu.autoClear=!1,uu.shadowMap.enabled=!0,uu.setPixelRatio(devicePixelRatio),uu.setClearColor(0),t.current.parentElement.appendChild(uu.domElement),()=>{uu.dispose()}),[]),Gt.useEffect(()=>{if(!e)return;let u;fi.editor||(u=new wqe,u.init(uu),document.body.appendChild(u.dom));let h=-1;const m=()=>{const x=window.innerWidth,E=window.innerHeight;Ps==null||Ps.resize(x,E),uu.setSize(x,E)},v=()=>{Ps==null||Ps.update(),u.begin(),uu.clear(),Ps==null||Ps.draw(),u.end(),u.update(),h=requestAnimationFrame(v)};return fi.editor||(window.addEventListener("resize",m),m(),v()),()=>{Ps!==void 0&&(fi.three.removeCamera(Ps.camera),IN(Ps)),window.removeEventListener("resize",m),cancelAnimationFrame(h),h=-1}},[e]),Gt.useEffect(()=>{CZe().then(()=>{n(!0)}).catch(()=>{console.log("Error loading files...")})},[n]);const r=u=>{Ps!==void 0&&(Ps.camera!==void 0&&fi.three.removeCamera(Ps.camera),IN(Ps)),Ps=u,Ps.resize(window.innerWidth,window.innerHeight),fi.three.setScene(Ps),fi.three.addCamera(Ps.camera)},i=()=>{r(new TPe(uu))},o=()=>{r(new MPe(uu))};return Gt.useEffect(()=>{const u=t.current;u.style.visibility=fi.editor?"hidden":"inherit";const h=v=>{console.log("Custom:",v.value)},m=v=>{console.log(`Dropdown: ${v.value.dropdown}, value: ${v.value.value}`)};return _r.addEventListener(wr.CUSTOM,h),_r.addEventListener(wr.SELECT_DROPDOWN,m),()=>{_r.removeEventListener(wr.CUSTOM,h),_r.removeEventListener(wr.SELECT_DROPDOWN,m)}},[]),_t.jsxs(_t.Fragment,{children:[!e&&_t.jsx("p",{children:"Loading..."}),_t.jsx("div",{id:"box",ref:t,children:_t.jsx("button",{onClick:()=>{fi.send({target:"editor",event:"custom",data:"hello editor!"})},children:"Click"})}),_t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px"},children:[_t.jsx("button",{onClick:i,children:"Scene 1"}),_t.jsx("button",{onClick:o,children:"Scene 2"})]}),_t.jsx(PZe,{three:fi.three})]})}function MZe(t){return _t.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[_t.jsx("header",{children:t.header}),t.children,_t.jsx("footer",{children:t.footer})]})}function kPe(t){return t.title.search("<")>-1?_t.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):_t.jsx("button",{children:t.title})}const CK=Gt.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),HF=Gt.createContext({}),PK=Gt.createContext(null),GF=typeof document<"u",WW=GF?Gt.useLayoutEffect:Gt.useEffect,APe=Gt.createContext({strict:!1});function kZe(t,e,n,r){const{visualElement:i}=Gt.useContext(HF),o=Gt.useContext(APe),u=Gt.useContext(PK),h=Gt.useContext(CK).reducedMotion,m=Gt.useRef();r=r||o.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:i,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const v=m.current;return Gt.useInsertionEffect(()=>{v&&v.update(n,u)}),WW(()=>{v&&v.render()}),Gt.useEffect(()=>{v&&v.updateFeatures()}),(window.HandoffAppearAnimations?WW:Gt.useEffect)(()=>{v&&v.animationState&&v.animationState.animateChanges()}),v}function Mw(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function AZe(t,e,n){return Gt.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Mw(n)&&(n.current=r))},[e])}function VT(t){return typeof t=="string"||Array.isArray(t)}function WF(t){return typeof t=="object"&&typeof t.start=="function"}const TK=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MK=["initial",...TK];function $F(t){return WF(t.animate)||MK.some(e=>VT(t[e]))}function IPe(t){return!!($F(t)||t.variants)}function IZe(t,e){if($F(t)){const{initial:n,animate:r}=t;return{initial:n===!1||VT(n)?n:void 0,animate:VT(r)?r:void 0}}return t.inherit!==!1?e:{}}function RZe(t){const{initial:e,animate:n}=IZe(t,Gt.useContext(HF));return Gt.useMemo(()=>({initial:e,animate:n}),[E_e(e),E_e(n)])}function E_e(t){return Array.isArray(t)?t.join(" "):t}const C_e={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jT={};for(const t in C_e)jT[t]={isEnabled:e=>C_e[t].some(n=>!!e[n])};function DZe(t){for(const e in t)jT[e]={...jT[e],...t[e]}}const RPe=Gt.createContext({}),DPe=Gt.createContext({}),OZe=Symbol.for("motionComponentSymbol");function LZe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&DZe(t);function o(h,m){let v;const x={...Gt.useContext(CK),...h,layoutId:NZe(h)},{isStatic:E}=x,k=RZe(h),D=r(h,E);if(!E&&GF){k.visualElement=kZe(i,D,x,e);const G=Gt.useContext(DPe),N=Gt.useContext(APe).strict;k.visualElement&&(v=k.visualElement.loadFeatures(x,N,t,G))}return Gt.createElement(HF.Provider,{value:k},v&&k.visualElement?Gt.createElement(v,{visualElement:k.visualElement,...x}):null,n(i,h,AZe(D,k.visualElement,m),D,E,k.visualElement))}const u=Gt.forwardRef(o);return u[OZe]=i,u}function NZe({layoutId:t}){const e=Gt.useContext(RPe).id;return e&&t!==void 0?e+"-"+t:t}function FZe(t){function e(r,i={}){return LZe(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const BZe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kK(t){return typeof t!="string"||t.includes("-")?!1:!!(BZe.indexOf(t)>-1||/[A-Z]/.test(t))}const HN={};function UZe(t){Object.assign(HN,t)}const yM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Z0=new Set(yM);function OPe(t,{layout:e,layoutId:n}){return Z0.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!HN[t]||t==="opacity")}const Ma=t=>!!(t&&t.getVelocity),zZe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},VZe=yM.length;function jZe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let u=0;u<VZe;u++){const h=yM[u];if(t[h]!==void 0){const m=zZe[h]||h;o+=`${m}(${t[h]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const LPe=t=>e=>typeof e=="string"&&e.startsWith(t),NPe=LPe("--"),$W=LPe("var(--"),HZe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,GZe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ym=(t,e,n)=>Math.min(Math.max(n,t),e),Q0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ZP={...Q0,transform:t=>Ym(0,1,t)},bL={...Q0,default:1},QP=t=>Math.round(t*1e5)/1e5,KF=/(-)?([\d]*\.?[\d])+/g,FPe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,WZe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function bM(t){return typeof t=="string"}const _M=t=>({test:e=>bM(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ym=_M("deg"),kd=_M("%"),Xn=_M("px"),$Ze=_M("vh"),KZe=_M("vw"),P_e={...kd,parse:t=>kd.parse(t)/100,transform:t=>kd.transform(t*100)},T_e={...Q0,transform:Math.round},BPe={borderWidth:Xn,borderTopWidth:Xn,borderRightWidth:Xn,borderBottomWidth:Xn,borderLeftWidth:Xn,borderRadius:Xn,radius:Xn,borderTopLeftRadius:Xn,borderTopRightRadius:Xn,borderBottomRightRadius:Xn,borderBottomLeftRadius:Xn,width:Xn,maxWidth:Xn,height:Xn,maxHeight:Xn,size:Xn,top:Xn,right:Xn,bottom:Xn,left:Xn,padding:Xn,paddingTop:Xn,paddingRight:Xn,paddingBottom:Xn,paddingLeft:Xn,margin:Xn,marginTop:Xn,marginRight:Xn,marginBottom:Xn,marginLeft:Xn,rotate:ym,rotateX:ym,rotateY:ym,rotateZ:ym,scale:bL,scaleX:bL,scaleY:bL,scaleZ:bL,skew:ym,skewX:ym,skewY:ym,distance:Xn,translateX:Xn,translateY:Xn,translateZ:Xn,x:Xn,y:Xn,z:Xn,perspective:Xn,transformPerspective:Xn,opacity:ZP,originX:P_e,originY:P_e,originZ:Xn,zIndex:T_e,fillOpacity:ZP,strokeOpacity:ZP,numOctaves:T_e};function AK(t,e,n,r){const{style:i,vars:o,transform:u,transformOrigin:h}=t;let m=!1,v=!1,x=!0;for(const E in e){const k=e[E];if(NPe(E)){o[E]=k;continue}const D=BPe[E],G=GZe(k,D);if(Z0.has(E)){if(m=!0,u[E]=G,!x)continue;k!==(D.default||0)&&(x=!1)}else E.startsWith("origin")?(v=!0,h[E]=G):i[E]=G}if(e.transform||(m||r?i.transform=jZe(t.transform,n,x,r):i.transform&&(i.transform="none")),v){const{originX:E="50%",originY:k="50%",originZ:D=0}=h;i.transformOrigin=`${E} ${k} ${D}`}}const IK=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UPe(t,e,n){for(const r in e)!Ma(e[r])&&!OPe(r,n)&&(t[r]=e[r])}function XZe({transformTemplate:t},e,n){return Gt.useMemo(()=>{const r=IK();return AK(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function qZe(t,e,n){const r=t.style||{},i={};return UPe(i,r,t),Object.assign(i,XZe(t,e,n)),t.transformValues?t.transformValues(i):i}function YZe(t,e,n){const r={},i=qZe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const ZZe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function GN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||ZZe.has(t)}let zPe=t=>!GN(t);function QZe(t){t&&(zPe=e=>e.startsWith("on")?!GN(e):t(e))}try{QZe(require("@emotion/is-prop-valid").default)}catch{}function JZe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(zPe(i)||n===!0&&GN(i)||!e&&!GN(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function M_e(t,e,n){return typeof t=="string"?t:Xn.transform(e+n*t)}function eQe(t,e,n){const r=M_e(e,t.x,t.width),i=M_e(n,t.y,t.height);return`${r} ${i}`}const tQe={offset:"stroke-dashoffset",array:"stroke-dasharray"},nQe={offset:"strokeDashoffset",array:"strokeDasharray"};function rQe(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?tQe:nQe;t[o.offset]=Xn.transform(-r);const u=Xn.transform(e),h=Xn.transform(n);t[o.array]=`${u} ${h}`}function RK(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:u,pathSpacing:h=1,pathOffset:m=0,...v},x,E,k){if(AK(t,v,x,k),E){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:D,style:G,dimensions:N}=t;D.transform&&(N&&(G.transform=D.transform),delete D.transform),N&&(i!==void 0||o!==void 0||G.transform)&&(G.transformOrigin=eQe(N,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(D.x=e),n!==void 0&&(D.y=n),r!==void 0&&(D.scale=r),u!==void 0&&rQe(D,u,h,m,!1)}const VPe=()=>({...IK(),attrs:{}}),DK=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iQe(t,e,n,r){const i=Gt.useMemo(()=>{const o=VPe();return RK(o,e,{enableHardwareAcceleration:!1},DK(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};UPe(o,t.style,t),i.style={...o,...i.style}}return i}function sQe(t=!1){return(n,r,i,{latestValues:o},u)=>{const m=(kK(n)?iQe:YZe)(r,o,u,n),x={...JZe(r,typeof n=="string",t),...m,ref:i},{children:E}=r,k=Gt.useMemo(()=>Ma(E)?E.get():E,[E]);return Gt.createElement(n,{...x,children:k})}}const OK=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function jPe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const HPe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GPe(t,e,n,r){jPe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(HPe.has(i)?i:OK(i),e.attrs[i])}function LK(t,e){const{style:n}=t,r={};for(const i in n)(Ma(n[i])||e.style&&Ma(e.style[i])||OPe(i,t))&&(r[i]=n[i]);return r}function WPe(t,e){const n=LK(t,e);for(const r in t)if(Ma(t[r])||Ma(e[r])){const i=yM.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function NK(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function wM(t){const e=Gt.useRef(null);return e.current===null&&(e.current=t()),e.current}const WN=t=>Array.isArray(t),oQe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),aQe=t=>WN(t)?t[t.length-1]||0:t;function WL(t){const e=Ma(t)?t.get():t;return oQe(e)?e.toValue():e}function lQe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const u={latestValues:uQe(r,i,o,t),renderState:e()};return n&&(u.mount=h=>n(r,h,u)),u}const $Pe=t=>(e,n)=>{const r=Gt.useContext(HF),i=Gt.useContext(PK),o=()=>lQe(t,e,r,i);return n?o():wM(o)};function uQe(t,e,n,r){const i={},o=r(t,{});for(const k in o)i[k]=WL(o[k]);let{initial:u,animate:h}=t;const m=$F(t),v=IPe(t);e&&v&&!m&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let x=n?n.initial===!1:!1;x=x||u===!1;const E=x?h:u;return E&&typeof E!="boolean"&&!WF(E)&&(Array.isArray(E)?E:[E]).forEach(D=>{const G=NK(t,D);if(!G)return;const{transitionEnd:N,transition:z,...U}=G;for(const P in U){let $=U[P];if(Array.isArray($)){const Q=x?$.length-1:0;$=$[Q]}$!==null&&(i[P]=$)}for(const P in N)i[P]=N[P]}),i}const cQe={useVisualState:$Pe({scrapeMotionValuesFromProps:WPe,createRenderState:VPe,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}RK(n,r,{enableHardwareAcceleration:!1},DK(e.tagName),t.transformTemplate),GPe(e,n)}})},dQe={useVisualState:$Pe({scrapeMotionValuesFromProps:LK,createRenderState:IK})};function hQe(t,{forwardMotionProps:e=!1},n,r){return{...kK(t)?cQe:dQe,preloadedFeatures:n,useRender:sQe(e),createVisualElement:r,Component:t}}function op(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const KPe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function XF(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const pQe=t=>e=>KPe(e)&&t(e,XF(e));function cp(t,e,n,r){return op(t,e,pQe(n),r)}const fQe=(t,e)=>n=>e(t(n)),Hm=(...t)=>t.reduce(fQe);function XPe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const k_e=XPe("dragHorizontal"),A_e=XPe("dragVertical");function qPe(t){let e=!1;if(t==="y")e=A_e();else if(t==="x")e=k_e();else{const n=k_e(),r=A_e();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function YPe(){const t=qPe(!0);return t?(t(),!1):!0}class sg{constructor(e){this.isMounted=!1,this.node=e}update(){}}const rs=t=>t;function mQe(t){let e=[],n=[],r=0,i=!1,o=!1;const u=new WeakSet,h={schedule:(m,v=!1,x=!1)=>{const E=x&&i,k=E?e:n;return v&&u.add(m),k.indexOf(m)===-1&&(k.push(m),E&&i&&(r=e.length)),m},cancel:m=>{const v=n.indexOf(m);v!==-1&&n.splice(v,1),u.delete(m)},process:m=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let v=0;v<r;v++){const x=e[v];x(m),u.has(x)&&(h.schedule(x),t())}i=!1,o&&(o=!1,h.process(m))}};return h}const _L=["prepare","read","update","preRender","render","postRender"],gQe=40;function vQe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=_L.reduce((E,k)=>(E[k]=mQe(()=>n=!0),E),{}),u=E=>o[E].process(i),h=()=>{const E=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,gQe),1),i.timestamp=E,i.isProcessing=!0,_L.forEach(u),i.isProcessing=!1,n&&e&&(r=!1,t(h))},m=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:_L.reduce((E,k)=>{const D=o[k];return E[k]=(G,N=!1,z=!1)=>(n||m(),D.schedule(G,N,z)),E},{}),cancel:E=>_L.forEach(k=>o[k].cancel(E)),state:i,steps:o}}const{schedule:Li,cancel:Dd,state:Xo,steps:i9}=vQe(typeof requestAnimationFrame<"u"?requestAnimationFrame:rs,!0);function I_e(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,u)=>{if(o.type==="touch"||YPe())return;const h=t.getProps();t.animationState&&h.whileHover&&t.animationState.setActive("whileHover",e),h[r]&&Li.update(()=>h[r](o,u))};return cp(t.current,n,i,{passive:!t.getProps()[r]})}class yQe extends sg{mount(){this.unmount=Hm(I_e(this.node,!0),I_e(this.node,!1))}unmount(){}}class bQe extends sg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hm(op(this.node.current,"focus",()=>this.onFocus()),op(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZPe=(t,e)=>e?t===e?!0:ZPe(t,e.parentElement):!1;function s9(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,XF(n))}class _Qe extends sg{constructor(){super(...arguments),this.removeStartListeners=rs,this.removeEndListeners=rs,this.removeAccessibleListeners=rs,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),o=cp(window,"pointerup",(h,m)=>{if(!this.checkPressEnd())return;const{onTap:v,onTapCancel:x}=this.node.getProps();Li.update(()=>{ZPe(this.node.current,h.target)?v&&v(h,m):x&&x(h,m)})},{passive:!(r.onTap||r.onPointerUp)}),u=cp(window,"pointercancel",(h,m)=>this.cancelPress(h,m),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Hm(o,u),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||s9("up",(m,v)=>{const{onTap:x}=this.node.getProps();x&&Li.update(()=>x(m,v))})};this.removeEndListeners(),this.removeEndListeners=op(this.node.current,"keyup",u),s9("down",(h,m)=>{this.startPress(h,m)})},n=op(this.node.current,"keydown",e),r=()=>{this.isPressing&&s9("cancel",(o,u)=>this.cancelPress(o,u))},i=op(this.node.current,"blur",r);this.removeAccessibleListeners=Hm(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Li.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!YPe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Li.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=cp(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=op(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Hm(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const KW=new WeakMap,o9=new WeakMap,wQe=t=>{const e=KW.get(t.target);e&&e(t)},xQe=t=>{t.forEach(wQe)};function SQe({root:t,...e}){const n=t||document;o9.has(n)||o9.set(n,{});const r=o9.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(xQe,{root:t,...e})),r[i]}function EQe(t,e,n){const r=SQe(e);return KW.set(t,n),r.observe(t),()=>{KW.delete(t),r.unobserve(t)}}const CQe={some:0,all:1};class PQe extends sg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:CQe[i]},h=m=>{const{isIntersecting:v}=m;if(this.isInView===v||(this.isInView=v,o&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:x,onViewportLeave:E}=this.node.getProps(),k=v?x:E;k&&k(m)};return EQe(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(TQe(e,n))&&this.startObserver()}unmount(){}}function TQe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const MQe={inView:{Feature:PQe},tap:{Feature:_Qe},focus:{Feature:bQe},hover:{Feature:yQe}};function QPe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function kQe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function AQe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function qF(t,e,n){const r=t.getProps();return NK(r,e,n!==void 0?n:r.custom,kQe(t),AQe(t))}const IQe="framerAppearId",RQe="data-"+OK(IQe);let DQe=rs,FK=rs;const Gm=t=>t*1e3,dp=t=>t/1e3,OQe={current:!1},JPe=t=>Array.isArray(t)&&typeof t[0]=="number";function eTe(t){return!!(!t||typeof t=="string"&&tTe[t]||JPe(t)||Array.isArray(t)&&t.every(eTe))}const LP=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,tTe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:LP([0,.65,.55,1]),circOut:LP([.55,0,1,.45]),backIn:LP([.31,.01,.66,-.59]),backOut:LP([.33,1.53,.69,.99])};function nTe(t){if(t)return JPe(t)?LP(t):Array.isArray(t)?t.map(nTe):tTe[t]}function LQe(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:u="loop",ease:h,times:m}={}){const v={[e]:n};m&&(v.offset=m);const x=nTe(h);return Array.isArray(x)&&(v.easing=x),t.animate(v,{delay:r,duration:i,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}function NQe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const rTe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,FQe=1e-7,BQe=12;function UQe(t,e,n,r,i){let o,u,h=0;do u=e+(n-e)/2,o=rTe(u,r,i)-t,o>0?n=u:e=u;while(Math.abs(o)>FQe&&++h<BQe);return u}function xM(t,e,n,r){if(t===e&&n===r)return rs;const i=o=>UQe(o,0,1,t,n);return o=>o===0||o===1?o:rTe(i(o),e,r)}const zQe=xM(.42,0,1,1),VQe=xM(0,0,.58,1),iTe=xM(.42,0,.58,1),jQe=t=>Array.isArray(t)&&typeof t[0]!="number",sTe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oTe=t=>e=>1-t(1-e),aTe=t=>1-Math.sin(Math.acos(t)),BK=oTe(aTe),HQe=sTe(BK),lTe=xM(.33,1.53,.69,.99),UK=oTe(lTe),GQe=sTe(UK),WQe=t=>(t*=2)<1?.5*UK(t):.5*(2-Math.pow(2,-10*(t-1))),$Qe={linear:rs,easeIn:zQe,easeInOut:iTe,easeOut:VQe,circIn:aTe,circInOut:HQe,circOut:BK,backIn:UK,backInOut:GQe,backOut:lTe,anticipate:WQe},R_e=t=>{if(Array.isArray(t)){FK(t.length===4);const[e,n,r,i]=t;return xM(e,n,r,i)}else if(typeof t=="string")return $Qe[t];return t},zK=(t,e)=>n=>!!(bM(n)&&WZe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),uTe=(t,e,n)=>r=>{if(!bM(r))return r;const[i,o,u,h]=r.match(KF);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},KQe=t=>Ym(0,255,t),a9={...Q0,transform:t=>Math.round(KQe(t))},w0={test:zK("rgb","red"),parse:uTe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+a9.transform(t)+", "+a9.transform(e)+", "+a9.transform(n)+", "+QP(ZP.transform(r))+")"};function XQe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const XW={test:zK("#"),parse:XQe,transform:w0.transform},kw={test:zK("hsl","hue"),parse:uTe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+kd.transform(QP(e))+", "+kd.transform(QP(n))+", "+QP(ZP.transform(r))+")"},wa={test:t=>w0.test(t)||XW.test(t)||kw.test(t),parse:t=>w0.test(t)?w0.parse(t):kw.test(t)?kw.parse(t):XW.parse(t),transform:t=>bM(t)?t:t.hasOwnProperty("red")?w0.transform(t):kw.transform(t)},Di=(t,e,n)=>-n*t+n*e+t;function l9(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qQe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,m=2*n-h;i=l9(m,h,t+1/3),o=l9(m,h,t),u=l9(m,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}const u9=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},YQe=[XW,w0,kw],ZQe=t=>YQe.find(e=>e.test(t));function D_e(t){const e=ZQe(t);let n=e.parse(t);return e===kw&&(n=qQe(n)),n}const cTe=(t,e)=>{const n=D_e(t),r=D_e(e),i={...n};return o=>(i.red=u9(n.red,r.red,o),i.green=u9(n.green,r.green,o),i.blue=u9(n.blue,r.blue,o),i.alpha=Di(n.alpha,r.alpha,o),w0.transform(i))};function QQe(t){var e,n;return isNaN(t)&&bM(t)&&(((e=t.match(KF))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(FPe))===null||n===void 0?void 0:n.length)||0)>0}const dTe={regex:HZe,countKey:"Vars",token:"${v}",parse:rs},hTe={regex:FPe,countKey:"Colors",token:"${c}",parse:wa.parse},pTe={regex:KF,countKey:"Numbers",token:"${n}",parse:Q0.parse};function c9(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function $N(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&c9(n,dTe),c9(n,hTe),c9(n,pTe),n}function fTe(t){return $N(t).values}function mTe(t){const{values:e,numColors:n,numVars:r,tokenised:i}=$N(t),o=e.length;return u=>{let h=i;for(let m=0;m<o;m++)m<r?h=h.replace(dTe.token,u[m]):m<r+n?h=h.replace(hTe.token,wa.transform(u[m])):h=h.replace(pTe.token,QP(u[m]));return h}}const JQe=t=>typeof t=="number"?0:t;function eJe(t){const e=fTe(t);return mTe(t)(e.map(JQe))}const Zm={test:QQe,parse:fTe,createTransformer:mTe,getAnimatableNone:eJe},gTe=(t,e)=>n=>`${n>0?e:t}`;function vTe(t,e){return typeof t=="number"?n=>Di(t,e,n):wa.test(t)?cTe(t,e):t.startsWith("var(")?gTe(t,e):bTe(t,e)}const yTe=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,u)=>vTe(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=i[u](o);return n}},tJe=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=vTe(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},bTe=(t,e)=>{const n=Zm.createTransformer(e),r=$N(t),i=$N(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Hm(yTe(r.values,i.values),n):gTe(t,e)},HT=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},O_e=(t,e)=>n=>Di(t,e,n);function nJe(t){return typeof t=="number"?O_e:typeof t=="string"?wa.test(t)?cTe:bTe:Array.isArray(t)?yTe:typeof t=="object"?tJe:O_e}function rJe(t,e,n){const r=[],i=n||nJe(t[0]),o=t.length-1;for(let u=0;u<o;u++){let h=i(t[u],t[u+1]);if(e){const m=Array.isArray(e)?e[u]||rs:e;h=Hm(m,h)}r.push(h)}return r}function VK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(FK(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=rJe(e,r,i),h=u.length,m=v=>{let x=0;if(h>1)for(;x<t.length-2&&!(v<t[x+1]);x++);const E=HT(t[x],t[x+1],v);return u[x](E)};return n?v=>m(Ym(t[0],t[o-1],v)):m}function iJe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=HT(0,e,r);t.push(Di(n,1,i))}}function sJe(t){const e=[0];return iJe(e,t.length-1),e}function oJe(t,e){return t.map(n=>n*e)}function aJe(t,e){return t.map(()=>e||iTe).splice(0,t.length-1)}function KN({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=jQe(r)?r.map(R_e):R_e(r),o={done:!1,value:e[0]},u=oJe(n&&n.length===e.length?n:sJe(e),t),h=VK(u,e,{ease:Array.isArray(i)?i:aJe(e,i)});return{calculatedDuration:t,next:m=>(o.value=h(m),o.done=m>=t,o)}}function _Te(t,e){return e?t*(1e3/e):0}const lJe=5;function wTe(t,e,n){const r=Math.max(e-lJe,0);return _Te(n-t(r),e-r)}const d9=.001,uJe=.01,L_e=10,cJe=.05,dJe=1;function hJe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o;DQe(t<=Gm(L_e));let u=1-e;u=Ym(cJe,dJe,u),t=Ym(uJe,L_e,dp(t)),u<1?(i=v=>{const x=v*u,E=x*t,k=x-n,D=qW(v,u),G=Math.exp(-E);return d9-k/D*G},o=v=>{const E=v*u*t,k=E*n+n,D=Math.pow(u,2)*Math.pow(v,2)*t,G=Math.exp(-E),N=qW(Math.pow(v,2),u);return(-i(v)+d9>0?-1:1)*((k-D)*G)/N}):(i=v=>{const x=Math.exp(-v*t),E=(v-n)*t+1;return-d9+x*E},o=v=>{const x=Math.exp(-v*t),E=(n-v)*(t*t);return x*E});const h=5/t,m=fJe(i,o,h);if(t=Gm(t),isNaN(m))return{stiffness:100,damping:10,duration:t};{const v=Math.pow(m,2)*r;return{stiffness:v,damping:u*2*Math.sqrt(r*v),duration:t}}}const pJe=12;function fJe(t,e,n){let r=n;for(let i=1;i<pJe;i++)r=r-t(r)/e(r);return r}function qW(t,e){return t*Math.sqrt(1-e*e)}const mJe=["duration","bounce"],gJe=["stiffness","damping","mass"];function N_e(t,e){return e.some(n=>t[n]!==void 0)}function vJe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!N_e(t,gJe)&&N_e(t,mJe)){const n=hJe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function xTe({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],u={done:!1,value:i},{stiffness:h,damping:m,mass:v,velocity:x,duration:E,isResolvedFromDuration:k}=vJe(r),D=x?-dp(x):0,G=m/(2*Math.sqrt(h*v)),N=o-i,z=dp(Math.sqrt(h/v)),U=Math.abs(N)<5;n||(n=U?.01:2),e||(e=U?.005:.5);let P;if(G<1){const $=qW(z,G);P=Q=>{const ye=Math.exp(-G*z*Q);return o-ye*((D+G*z*N)/$*Math.sin($*Q)+N*Math.cos($*Q))}}else if(G===1)P=$=>o-Math.exp(-z*$)*(N+(D+z*N)*$);else{const $=z*Math.sqrt(G*G-1);P=Q=>{const ye=Math.exp(-G*z*Q),q=Math.min($*Q,300);return o-ye*((D+G*z*N)*Math.sinh(q)+$*N*Math.cosh(q))/$}}return{calculatedDuration:k&&E||null,next:$=>{const Q=P($);if(k)u.done=$>=E;else{let ye=D;$!==0&&(G<1?ye=wTe(P,$,Q):ye=0);const q=Math.abs(ye)<=n,ie=Math.abs(o-Q)<=e;u.done=q&&ie}return u.value=u.done?o:Q,u}}}function F_e({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:m,restDelta:v=.5,restSpeed:x}){const E=t[0],k={done:!1,value:E},D=pe=>h!==void 0&&pe<h||m!==void 0&&pe>m,G=pe=>h===void 0?m:m===void 0||Math.abs(h-pe)<Math.abs(m-pe)?h:m;let N=n*e;const z=E+N,U=u===void 0?z:u(z);U!==z&&(N=U-E);const P=pe=>-N*Math.exp(-pe/r),$=pe=>U+P(pe),Q=pe=>{const W=P(pe),he=$(pe);k.done=Math.abs(W)<=v,k.value=k.done?U:he};let ye,q;const ie=pe=>{D(k.value)&&(ye=pe,q=xTe({keyframes:[k.value,G(k.value)],velocity:wTe($,pe,k.value),damping:i,stiffness:o,restDelta:v,restSpeed:x}))};return ie(0),{calculatedDuration:null,next:pe=>{let W=!1;return!q&&ye===void 0&&(W=!0,Q(pe),ie(pe)),ye!==void 0&&pe>ye?q.next(pe-ye):(!W&&Q(pe),k)}}}const yJe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Li.update(e,!0),stop:()=>Dd(e),now:()=>Xo.isProcessing?Xo.timestamp:performance.now()}},B_e=2e4;function U_e(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<B_e;)e+=n,r=t.next(e);return e>=B_e?1/0:e}const bJe={decay:F_e,inertia:F_e,tween:KN,keyframes:KN,spring:xTe};function XN({autoplay:t=!0,delay:e=0,driver:n=yJe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:h="loop",onPlay:m,onStop:v,onComplete:x,onUpdate:E,...k}){let D=1,G=!1,N,z;const U=()=>{z=new Promise(ft=>{N=ft})};U();let P;const $=bJe[i]||KN;let Q;$!==KN&&typeof r[0]!="number"&&(Q=VK([0,100],r,{clamp:!1}),r=[0,100]);const ye=$({...k,keyframes:r});let q;h==="mirror"&&(q=$({...k,keyframes:[...r].reverse(),velocity:-(k.velocity||0)}));let ie="idle",pe=null,W=null,he=null;ye.calculatedDuration===null&&o&&(ye.calculatedDuration=U_e(ye));const{calculatedDuration:Ye}=ye;let at=1/0,Et=1/0;Ye!==null&&(at=Ye+u,Et=at*(o+1)-u);let ue=0;const Ge=ft=>{if(W===null)return;D>0&&(W=Math.min(W,ft)),D<0&&(W=Math.min(ft-Et/D,W)),pe!==null?ue=pe:ue=Math.round(ft-W)*D;const Ct=ue-e*(D>=0?1:-1),mt=D>=0?Ct<0:Ct>Et;ue=Math.max(Ct,0),ie==="finished"&&pe===null&&(ue=Et);let Pt=ue,Rt=ye;if(o){const Tn=ue/at;let bn=Math.floor(Tn),On=Tn%1;!On&&Tn>=1&&(On=1),On===1&&bn--,bn=Math.min(bn,o+1);const lt=!!(bn%2);lt&&(h==="reverse"?(On=1-On,u&&(On-=u/at)):h==="mirror"&&(Rt=q));let ti=Ym(0,1,On);ue>Et&&(ti=h==="reverse"&&lt?1:0),Pt=ti*at}const Jt=mt?{done:!1,value:r[0]}:Rt.next(Pt);Q&&(Jt.value=Q(Jt.value));let{done:Yt}=Jt;!mt&&Ye!==null&&(Yt=D>=0?ue>=Et:ue<=0);const In=pe===null&&(ie==="finished"||ie==="running"&&Yt);return E&&E(Jt.value),In&&Ne(),Jt},Te=()=>{P&&P.stop(),P=void 0},it=()=>{ie="idle",Te(),N(),U(),W=he=null},Ne=()=>{ie="finished",x&&x(),Te(),N()},Xe=()=>{if(G)return;P||(P=n(Ge));const ft=P.now();m&&m(),pe!==null?W=ft-pe:(!W||ie==="finished")&&(W=ft),ie==="finished"&&U(),he=W,pe=null,ie="running",P.start()};t&&Xe();const qe={then(ft,Ct){return z.then(ft,Ct)},get time(){return dp(ue)},set time(ft){ft=Gm(ft),ue=ft,pe!==null||!P||D===0?pe=ft:W=P.now()-ft/D},get duration(){const ft=ye.calculatedDuration===null?U_e(ye):ye.calculatedDuration;return dp(ft)},get speed(){return D},set speed(ft){ft===D||!P||(D=ft,qe.time=dp(ue))},get state(){return ie},play:Xe,pause:()=>{ie="paused",pe=ue},stop:()=>{G=!0,ie!=="idle"&&(ie="idle",v&&v(),it())},cancel:()=>{he!==null&&Ge(he),it()},complete:()=>{ie="finished"},sample:ft=>(W=0,Ge(ft))};return qe}function _Je(t){let e;return()=>(e===void 0&&(e=t()),e)}const wJe=_Je(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xJe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),wL=10,SJe=2e4,EJe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!eTe(e.ease);function CJe(t,e,{onUpdate:n,onComplete:r,...i}){if(!(wJe()&&xJe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let u=!1,h,m;const v=()=>{m=new Promise(P=>{h=P})};v();let{keyframes:x,duration:E=300,ease:k,times:D}=i;if(EJe(e,i)){const P=XN({...i,repeat:0,delay:0});let $={done:!1,value:x[0]};const Q=[];let ye=0;for(;!$.done&&ye<SJe;)$=P.sample(ye),Q.push($.value),ye+=wL;D=void 0,x=Q,E=ye-wL,k="linear"}const G=LQe(t.owner.current,e,x,{...i,duration:E,ease:k,times:D}),N=()=>G.cancel(),z=()=>{Li.update(N),h(),v()};return G.onfinish=()=>{t.set(NQe(x,i)),r&&r(),z()},{then(P,$){return m.then(P,$)},attachTimeline(P){return G.timeline=P,G.onfinish=null,rs},get time(){return dp(G.currentTime||0)},set time(P){G.currentTime=Gm(P)},get speed(){return G.playbackRate},set speed(P){G.playbackRate=P},get duration(){return dp(E)},play:()=>{u||(G.play(),Dd(N))},pause:()=>G.pause(),stop:()=>{if(u=!0,G.playState==="idle")return;const{currentTime:P}=G;if(P){const $=XN({...i,autoplay:!1});t.setWithVelocity($.sample(P-wL).value,$.sample(P).value,wL)}z()},complete:()=>G.finish(),cancel:z}}function PJe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:rs,pause:rs,stop:rs,then:o=>(o(),Promise.resolve()),cancel:rs,complete:rs});return e?XN({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const TJe={type:"spring",stiffness:500,damping:25,restSpeed:10},MJe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kJe={type:"keyframes",duration:.8},AJe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IJe=(t,{keyframes:e})=>e.length>2?kJe:Z0.has(t)?t.startsWith("scale")?MJe(e[1]):TJe:AJe,YW=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zm.test(e)||e==="0")&&!e.startsWith("url(")),RJe=new Set(["brightness","contrast","saturate","opacity"]);function DJe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(KF)||[];if(!r)return t;const i=n.replace(r,"");let o=RJe.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const OJe=/([a-z-]*)\(.*?\)/g,ZW={...Zm,getAnimatableNone:t=>{const e=t.match(OJe);return e?e.map(DJe).join(" "):t}},LJe={...BPe,color:wa,backgroundColor:wa,outlineColor:wa,fill:wa,stroke:wa,borderColor:wa,borderTopColor:wa,borderRightColor:wa,borderBottomColor:wa,borderLeftColor:wa,filter:ZW,WebkitFilter:ZW},jK=t=>LJe[t];function STe(t,e){let n=jK(t);return n!==ZW&&(n=Zm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ETe=t=>/^0[^.\s]+$/.test(t);function NJe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||ETe(t)}function FJe(t,e,n,r){const i=YW(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const u=r.from!==void 0?r.from:t.get();let h;const m=[];for(let v=0;v<o.length;v++)o[v]===null&&(o[v]=v===0?u:o[v-1]),NJe(o[v])&&m.push(v),typeof o[v]=="string"&&o[v]!=="none"&&o[v]!=="0"&&(h=o[v]);if(i&&m.length&&h)for(let v=0;v<m.length;v++){const x=m[v];o[x]=STe(e,h)}return o}function BJe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:h,from:m,elapsed:v,...x}){return!!Object.keys(x).length}function CTe(t,e){return t[e]||t.default||t}const HK=(t,e,n,r={})=>i=>{const o=CTe(r,t)||{},u=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Gm(u);const m=FJe(e,t,n,o),v=m[0],x=m[m.length-1],E=YW(t,v),k=YW(t,x);let D={keyframes:m,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-h,onUpdate:G=>{e.set(G),o.onUpdate&&o.onUpdate(G)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(BJe(o)||(D={...D,...IJe(t,D)}),D.duration&&(D.duration=Gm(D.duration)),D.repeatDelay&&(D.repeatDelay=Gm(D.repeatDelay)),!E||!k||OQe.current||o.type===!1)return PJe(D);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const G=CJe(e,t,D);if(G)return G}return XN(D)};function qN(t){return!!(Ma(t)&&t.add)}const PTe=t=>/^\-?\d*\.?\d+$/.test(t);function GK(t,e){t.indexOf(e)===-1&&t.push(e)}function WK(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function UJe([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(i,0,o)}return t}class $K{constructor(){this.subscriptions=[]}add(e){return GK(this.subscriptions,e),()=>WK(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zJe=t=>!isNaN(parseFloat(t)),JP={current:void 0};class VJe{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:u}=Xo;this.lastUpdated!==u&&(this.timeDelta=o,this.lastUpdated=u,Li.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Li.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=zJe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new $K);const r=this.events[e].add(n);return e==="change"?()=>{r(),Li.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return JP.current&&JP.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?_Te(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function j0(t,e){return new VJe(t,e)}const TTe=t=>e=>e.test(t),jJe={test:t=>t==="auto",parse:t=>t},MTe=[Q0,Xn,kd,ym,KZe,$Ze,jJe],kP=t=>MTe.find(TTe(t)),HJe=[...MTe,wa,Zm],GJe=t=>HJe.find(TTe(t));function WJe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,j0(n))}function $Je(t,e){const n=qF(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const u in o){const h=aQe(o[u]);WJe(t,u,h)}}function KJe(t,e,n){var r,i;const o=Object.keys(e).filter(h=>!t.hasValue(h)),u=o.length;if(u)for(let h=0;h<u;h++){const m=o[h],v=e[m];let x=null;Array.isArray(v)&&(x=v[0]),x===null&&(x=(i=(r=n[m])!==null&&r!==void 0?r:t.readValue(m))!==null&&i!==void 0?i:e[m]),x!=null&&(typeof x=="string"&&(PTe(x)||ETe(x))?x=parseFloat(x):!GJe(x)&&Zm.test(v)&&(x=STe(m,v)),t.addValue(m,j0(x,{owner:t})),n[m]===void 0&&(n[m]=x),x!==null&&t.setBaseTarget(m,x))}}function XJe(t,e){return e?(e[t]||e.default||e).from:void 0}function qJe(t,e,n){const r={};for(const i in t){const o=XJe(i,e);if(o!==void 0)r[i]=o;else{const u=n.getValue(i);u&&(r[i]=u.get())}}return r}function YJe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function kTe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...h}=t.makeTargetAnimatable(e);const m=t.getValue("willChange");r&&(o=r);const v=[],x=i&&t.animationState&&t.animationState.getState()[i];for(const E in h){const k=t.getValue(E),D=h[E];if(!k||D===void 0||x&&YJe(x,E))continue;const G={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!k.hasAnimated){const z=t.getProps()[RQe];z&&(G.elapsed=window.HandoffAppearAnimations(z,E,k,Li))}k.start(HK(E,k,D,t.shouldReduceMotion&&Z0.has(E)?{type:!1}:G));const N=k.animation;qN(m)&&(m.add(E),N.then(()=>m.remove(E))),v.push(N)}return u&&Promise.all(v).then(()=>{u&&$Je(t,u)}),v}function QW(t,e,n={}){const r=qF(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(kTe(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:v=0,staggerChildren:x,staggerDirection:E}=i;return ZJe(t,e,v+m,x,E,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[m,v]=h==="beforeChildren"?[o,u]:[u,o];return m().then(()=>v())}else return Promise.all([o(),u(n.delay)])}function ZJe(t,e,n=0,r=0,i=1,o){const u=[],h=(t.variantChildren.size-1)*r,m=i===1?(v=0)=>v*r:(v=0)=>h-v*r;return Array.from(t.variantChildren).sort(QJe).forEach((v,x)=>{v.notify("AnimationStart",e),u.push(QW(v,e,{...o,delay:n+m(x)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(u)}function QJe(t,e){return t.sortNodePosition(e)}function JJe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>QW(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=QW(t,e,n);else{const i=typeof e=="function"?qF(t,e,n.custom):e;r=Promise.all(kTe(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const eet=[...TK].reverse(),tet=TK.length;function net(t){return e=>Promise.all(e.map(({animation:n,options:r})=>JJe(t,n,r)))}function ret(t){let e=net(t);const n=set();let r=!0;const i=(m,v)=>{const x=qF(t,v);if(x){const{transition:E,transitionEnd:k,...D}=x;m={...m,...D,...k}}return m};function o(m){e=m(t)}function u(m,v){const x=t.getProps(),E=t.getVariantContext(!0)||{},k=[],D=new Set;let G={},N=1/0;for(let U=0;U<tet;U++){const P=eet[U],$=n[P],Q=x[P]!==void 0?x[P]:E[P],ye=VT(Q),q=P===v?$.isActive:null;q===!1&&(N=U);let ie=Q===E[P]&&Q!==x[P]&&ye;if(ie&&r&&t.manuallyAnimateOnMount&&(ie=!1),$.protectedKeys={...G},!$.isActive&&q===null||!Q&&!$.prevProp||WF(Q)||typeof Q=="boolean")continue;const pe=iet($.prevProp,Q);let W=pe||P===v&&$.isActive&&!ie&&ye||U>N&&ye;const he=Array.isArray(Q)?Q:[Q];let Ye=he.reduce(i,{});q===!1&&(Ye={});const{prevResolvedValues:at={}}=$,Et={...at,...Ye},ue=Ge=>{W=!0,D.delete(Ge),$.needsAnimating[Ge]=!0};for(const Ge in Et){const Te=Ye[Ge],it=at[Ge];G.hasOwnProperty(Ge)||(Te!==it?WN(Te)&&WN(it)?!QPe(Te,it)||pe?ue(Ge):$.protectedKeys[Ge]=!0:Te!==void 0?ue(Ge):D.add(Ge):Te!==void 0&&D.has(Ge)?ue(Ge):$.protectedKeys[Ge]=!0)}$.prevProp=Q,$.prevResolvedValues=Ye,$.isActive&&(G={...G,...Ye}),r&&t.blockInitialAnimation&&(W=!1),W&&!ie&&k.push(...he.map(Ge=>({animation:Ge,options:{type:P,...m}})))}if(D.size){const U={};D.forEach(P=>{const $=t.getBaseTarget(P);$!==void 0&&(U[P]=$)}),k.push({animation:U})}let z=!!k.length;return r&&x.initial===!1&&!t.manuallyAnimateOnMount&&(z=!1),r=!1,z?e(k):Promise.resolve()}function h(m,v,x){var E;if(n[m].isActive===v)return Promise.resolve();(E=t.variantChildren)===null||E===void 0||E.forEach(D=>{var G;return(G=D.animationState)===null||G===void 0?void 0:G.setActive(m,v)}),n[m].isActive=v;const k=u(x,m);for(const D in n)n[D].protectedKeys={};return k}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>n}}function iet(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!QPe(e,t):!1}function s0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function set(){return{animate:s0(!0),whileInView:s0(),whileHover:s0(),whileTap:s0(),whileDrag:s0(),whileFocus:s0(),exit:s0()}}class oet extends sg{constructor(e){super(e),e.animationState||(e.animationState=ret(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),WF(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let aet=0;class uet extends sg{constructor(){super(...arguments),this.id=aet++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const cet={animation:{Feature:oet},exit:{Feature:uet}},z_e=(t,e)=>Math.abs(t-e);function det(t,e){const n=z_e(t.x,e.x),r=z_e(t.y,e.y);return Math.sqrt(n**2+r**2)}class ATe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=p9(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,E=det(v.offset,{x:0,y:0})>=3;if(!x&&!E)return;const{point:k}=v,{timestamp:D}=Xo;this.history.push({...k,timestamp:D});const{onStart:G,onMove:N}=this.handlers;x||(G&&G(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=h9(x,this.transformPagePoint),Li.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:E,onSessionEnd:k}=this.handlers,D=p9(v.type==="pointercancel"?this.lastMoveEventInfo:h9(x,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,D),k&&k(v,D)},!KPe(e))return;this.handlers=n,this.transformPagePoint=r;const i=XF(e),o=h9(i,this.transformPagePoint),{point:u}=o,{timestamp:h}=Xo;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,p9(o,this.history)),this.removeListeners=Hm(cp(window,"pointermove",this.handlePointerMove),cp(window,"pointerup",this.handlePointerUp),cp(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Dd(this.updatePoint)}}function h9(t,e){return e?{point:e(t.point)}:t}function V_e(t,e){return{x:t.x-e.x,y:t.y-e.y}}function p9({point:t},e){return{point:t,delta:V_e(t,ITe(e)),offset:V_e(t,het(e)),velocity:pet(e,.1)}}function het(t){return t[0]}function ITe(t){return t[t.length-1]}function pet(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ITe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Gm(e)));)n--;if(!r)return{x:0,y:0};const o=dp(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function Pl(t){return t.max-t.min}function JW(t,e=0,n=.01){return Math.abs(t-e)<=n}function j_e(t,e,n,r=.5){t.origin=r,t.originPoint=Di(e.min,e.max,t.origin),t.scale=Pl(n)/Pl(e),(JW(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Di(n.min,n.max,t.origin)-t.originPoint,(JW(t.translate)||isNaN(t.translate))&&(t.translate=0)}function eT(t,e,n,r){j_e(t.x,e.x,n.x,r?r.originX:void 0),j_e(t.y,e.y,n.y,r?r.originY:void 0)}function H_e(t,e,n){t.min=n.min+e.min,t.max=t.min+Pl(e)}function fet(t,e,n){H_e(t.x,e.x,n.x),H_e(t.y,e.y,n.y)}function G_e(t,e,n){t.min=e.min-n.min,t.max=t.min+Pl(e)}function tT(t,e,n){G_e(t.x,e.x,n.x),G_e(t.y,e.y,n.y)}function met(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Di(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Di(n,t,r.max):Math.min(t,n)),t}function W_e(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function get(t,{top:e,left:n,bottom:r,right:i}){return{x:W_e(t.x,n,i),y:W_e(t.y,e,r)}}function $_e(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function vet(t,e){return{x:$_e(t.x,e.x),y:$_e(t.y,e.y)}}function yet(t,e){let n=.5;const r=Pl(t),i=Pl(e);return i>r?n=HT(e.min,e.max-r,t.min):r>i&&(n=HT(t.min,t.max-i,e.min)),Ym(0,1,n)}function bet(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const e$=.35;function _et(t=e$){return t===!1?t=0:t===!0&&(t=e$),{x:K_e(t,"left","right"),y:K_e(t,"top","bottom")}}function K_e(t,e,n){return{min:X_e(t,e),max:X_e(t,n)}}function X_e(t,e){return typeof t=="number"?t:t[e]||0}const q_e=()=>({translate:0,scale:1,origin:0,originPoint:0}),Aw=()=>({x:q_e(),y:q_e()}),Y_e=()=>({min:0,max:0}),Ts=()=>({x:Y_e(),y:Y_e()});function Sd(t){return[t("x"),t("y")]}function RTe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function wet({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xet(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function f9(t){return t===void 0||t===1}function t$({scale:t,scaleX:e,scaleY:n}){return!f9(t)||!f9(e)||!f9(n)}function p0(t){return t$(t)||DTe(t)||t.z||t.rotate||t.rotateX||t.rotateY}function DTe(t){return Z_e(t.x)||Z_e(t.y)}function Z_e(t){return t&&t!=="0%"}function YN(t,e,n){const r=t-n,i=e*r;return n+i}function Q_e(t,e,n,r,i){return i!==void 0&&(t=YN(t,i,r)),YN(t,n,r)+e}function n$(t,e=0,n=1,r,i){t.min=Q_e(t.min,e,n,r,i),t.max=Q_e(t.max,e,n,r,i)}function OTe(t,{x:e,y:n}){n$(t.x,e.translate,e.scale,e.originPoint),n$(t.y,n.translate,n.scale,n.originPoint)}function Eet(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let h=0;h<i;h++){o=n[h],u=o.projectionDelta;const m=o.instance;m&&m.style&&m.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Iw(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,OTe(t,u)),r&&p0(o.latestValues)&&Iw(t,o.latestValues))}e.x=J_e(e.x),e.y=J_e(e.y)}function J_e(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function xm(t,e){t.min=t.min+e,t.max=t.max+e}function ewe(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,u=Di(t.min,t.max,o);n$(t,e[n],e[r],u,e.scale)}const Cet=["x","scaleX","originX"],Pet=["y","scaleY","originY"];function Iw(t,e){ewe(t.x,e,Cet),ewe(t.y,e,Pet)}function LTe(t,e){return RTe(xet(t.getBoundingClientRect(),e))}function Tet(t,e,n){const r=LTe(t,n),{scroll:i}=e;return i&&(xm(r.x,i.offset.x),xm(r.y,i.offset.y)),r}const Met=new WeakMap;class ket{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ts(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{this.stopAnimation(),n&&this.snapToCursor(XF(m,"page").point)},o=(m,v)=>{const{drag:x,dragPropagation:E,onDragStart:k}=this.getProps();if(x&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=qPe(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sd(G=>{let N=this.getAxisMotionValue(G).get()||0;if(kd.test(N)){const{projection:z}=this.visualElement;if(z&&z.layout){const U=z.layout.layoutBox[G];U&&(N=Pl(U)*(parseFloat(N)/100))}}this.originPoint[G]=N}),k&&Li.update(()=>k(m,v),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(m,v)=>{const{dragPropagation:x,dragDirectionLock:E,onDirectionLock:k,onDrag:D}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:G}=v;if(E&&this.currentDirection===null){this.currentDirection=Aet(G),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",v.point,G),this.updateAxis("y",v.point,G),this.visualElement.render(),D&&D(m,v)},h=(m,v)=>this.stop(m,v);this.panSession=new ATe(e,{onSessionStart:i,onStart:o,onMove:u,onSessionEnd:h},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Li.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!xL(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=met(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&Mw(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=get(r.layoutBox,e):this.constraints=!1,this.elastic=_et(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Sd(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=bet(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Mw(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Tet(r,i.root,this.visualElement.getTransformPagePoint());let u=vet(i.layout.layoutBox,o);if(n){const h=n(wet(u));this.hasMutatedConstraints=!!h,h&&(u=RTe(h))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},v=Sd(x=>{if(!xL(x,n,this.currentDirection))return;let E=m&&m[x]||{};u&&(E={min:0,max:0});const k=i?200:1e6,D=i?40:1e7,G={type:"inertia",velocity:r?e[x]:0,bounceStiffness:k,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(x,G)});return Promise.all(v).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(HK(e,r,0,n))}stopAnimation(){Sd(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Sd(n=>{const{drag:r}=this.getProps();if(!xL(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:h}=i.layout.layoutBox[n];o.set(e[n]-Di(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Mw(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Sd(u=>{const h=this.getAxisMotionValue(u);if(h){const m=h.get();i[u]=yet({min:m,max:m},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sd(u=>{if(!xL(u,e,null))return;const h=this.getAxisMotionValue(u),{min:m,max:v}=this.constraints[u];h.set(Di(m,v,i[u]))})}addListeners(){if(!this.visualElement.current)return;Met.set(this.visualElement,this);const e=this.visualElement.current,n=cp(e,"pointerdown",m=>{const{drag:v,dragListener:x=!0}=this.getProps();v&&x&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();Mw(m)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const u=op(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v})=>{this.isDragging&&v&&(Sd(x=>{const E=this.getAxisMotionValue(x);E&&(this.originPoint[x]+=m[x].translate,E.set(E.get()+m[x].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=e$,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function xL(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Aet(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Iet extends sg{constructor(e){super(e),this.removeGroupControls=rs,this.removeListeners=rs,this.controls=new ket(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const twe=t=>(e,n)=>{t&&Li.update(()=>t(e,n))};class Ret extends sg{constructor(){super(...arguments),this.removePointerDownListener=rs}onPointerDown(e){this.session=new ATe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:twe(e),onStart:twe(n),onMove:r,onEnd:(o,u)=>{delete this.session,i&&Li.update(()=>i(o,u))}}}mount(){this.removePointerDownListener=cp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Det(){const t=Gt.useContext(PK);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=Gt.useId();return Gt.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const $L={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nwe(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const AP={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xn.test(t))t=parseFloat(t);else return t;const n=nwe(t,e.target.x),r=nwe(t,e.target.y);return`${n}% ${r}%`}},Oet={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zm.parse(t);if(i.length>5)return r;const o=Zm.createTransformer(t),u=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,m=n.y.scale*e.y;i[0+u]/=h,i[1+u]/=m;const v=Di(h,m,.5);return typeof i[2+u]=="number"&&(i[2+u]/=v),typeof i[3+u]=="number"&&(i[3+u]/=v),o(i)}};class Let extends qwe.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;UZe(Net),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),$L.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,i||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Li.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function NTe(t){const[e,n]=Det(),r=Gt.useContext(RPe);return qwe.createElement(Let,{...t,layoutGroup:r,switchLayoutGroup:Gt.useContext(DPe),isPresent:e,safeToRemove:n})}const Net={borderRadius:{...AP,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:AP,borderTopRightRadius:AP,borderBottomLeftRadius:AP,borderBottomRightRadius:AP,boxShadow:Oet},FTe=["TopLeft","TopRight","BottomLeft","BottomRight"],Fet=FTe.length,rwe=t=>typeof t=="string"?parseFloat(t):t,iwe=t=>typeof t=="number"||Xn.test(t);function Bet(t,e,n,r,i,o){i?(t.opacity=Di(0,n.opacity!==void 0?n.opacity:1,Uet(r)),t.opacityExit=Di(e.opacity!==void 0?e.opacity:1,0,zet(r))):o&&(t.opacity=Di(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<Fet;u++){const h=`border${FTe[u]}Radius`;let m=swe(e,h),v=swe(n,h);if(m===void 0&&v===void 0)continue;m||(m=0),v||(v=0),m===0||v===0||iwe(m)===iwe(v)?(t[h]=Math.max(Di(rwe(m),rwe(v),r),0),(kd.test(v)||kd.test(m))&&(t[h]+="%")):t[h]=v}(e.rotate||n.rotate)&&(t.rotate=Di(e.rotate||0,n.rotate||0,r))}function swe(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Uet=BTe(0,.5,BK),zet=BTe(.5,.95,rs);function BTe(t,e,n){return r=>r<t?0:r>e?1:n(HT(t,e,r))}function owe(t,e){t.min=e.min,t.max=e.max}function cu(t,e){owe(t.x,e.x),owe(t.y,e.y)}function awe(t,e,n,r,i){return t-=e,t=YN(t,1/n,r),i!==void 0&&(t=YN(t,1/i,r)),t}function Vet(t,e=0,n=1,r=.5,i,o=t,u=t){if(kd.test(e)&&(e=parseFloat(e),e=Di(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=Di(o.min,o.max,r);t===o&&(h-=e),t.min=awe(t.min,e,n,h,i),t.max=awe(t.max,e,n,h,i)}function lwe(t,e,[n,r,i],o,u){Vet(t,e[n],e[r],e[i],e.scale,o,u)}const jet=["x","scaleX","originX"],Het=["y","scaleY","originY"];function uwe(t,e,n,r){lwe(t.x,e,jet,n?n.x:void 0,r?r.x:void 0),lwe(t.y,e,Het,n?n.y:void 0,r?r.y:void 0)}function cwe(t){return t.translate===0&&t.scale===1}function UTe(t){return cwe(t.x)&&cwe(t.y)}function Get(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function zTe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function dwe(t){return Pl(t.x)/Pl(t.y)}class Wet{constructor(){this.members=[]}add(e){GK(this.members,e),e.scheduleRender()}remove(e){if(WK(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hwe(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:m,rotateX:v,rotateY:x}=n;m&&(r+=`rotate(${m}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const $et=(t,e)=>t.depth-e.depth;class Ket{constructor(){this.children=[],this.isDirty=!1}add(e){GK(this.children,e),this.isDirty=!0}remove(e){WK(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($et),this.isDirty=!1,this.children.forEach(e)}}function Xet(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Dd(r),t(o-e))};return Li.read(r,!0),()=>Dd(r)}function qet(t){window.MotionDebug&&window.MotionDebug.record(t)}function Yet(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Zet(t,e,n){const r=Ma(t)?t:j0(t);return r.start(HK("",r,e,n)),r.animation}const pwe=["","X","Y","Z"],fwe=1e3;let Qet=0;const f0={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function VTe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},h=e==null?void 0:e()){this.id=Qet++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{f0.totalNodes=f0.resolvedTargetDeltas=f0.recalculatedProjection=0,this.nodes.forEach(ttt),this.nodes.forEach(ott),this.nodes.forEach(att),this.nodes.forEach(ntt),qet(f0)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ket)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new $K),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const m=this.eventHandlers.get(u);m&&m.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Yet(u),this.instance=u;const{layoutId:m,layout:v,visualElement:x}=this.options;if(x&&!x.current&&x.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(v||m)&&(this.isLayoutDirty=!0),t){let E;const k=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,E&&E(),E=Xet(k,250),$L.hasAnimatedSinceResize&&($L.hasAnimatedSinceResize=!1,this.nodes.forEach(gwe))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&x&&(m||v)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:k,hasRelativeTargetChanged:D,layout:G})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||x.getDefaultTransition()||htt,{onLayoutAnimationStart:z,onLayoutAnimationComplete:U}=x.getProps(),P=!this.targetLayout||!zTe(this.targetLayout,G)||D,$=!k&&D;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||$||k&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(E,$);const Q={...CTe(N,"layout"),onPlay:z,onComplete:U};(x.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else k||gwe(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=G})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Dd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ltt),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const E=this.path[x];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mwe);return}this.isUpdating||this.nodes.forEach(itt),this.isUpdating=!1,this.nodes.forEach(stt),this.nodes.forEach(Jet),this.nodes.forEach(ett),this.clearAllSnapshots();const h=performance.now();Xo.delta=Ym(0,1e3/60,h-Xo.timestamp),Xo.timestamp=h,Xo.isProcessing=!0,i9.update.process(Xo),i9.preRender.process(Xo),i9.render.process(Xo),Xo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(rtt),this.sharedNodes.forEach(utt)}scheduleUpdateProjection(){Li.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Li.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ts(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!UTe(this.projectionDelta),m=this.getTransformTemplate(),v=m?m(this.latestValues,""):void 0,x=v!==this.prevTransformTemplateValue;u&&(h||p0(this.latestValues)||x)&&(i(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return u&&(m=this.removeTransform(m)),ptt(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Ts();const h=u.measureViewportBox(),{scroll:m}=this.root;return m&&(xm(h.x,m.offset.x),xm(h.y,m.offset.y)),h}removeElementScroll(u){const h=Ts();cu(h,u);for(let m=0;m<this.path.length;m++){const v=this.path[m],{scroll:x,options:E}=v;if(v!==this.root&&x&&E.layoutScroll){if(x.isRoot){cu(h,u);const{scroll:k}=this.root;k&&(xm(h.x,-k.offset.x),xm(h.y,-k.offset.y))}xm(h.x,x.offset.x),xm(h.y,x.offset.y)}}return h}applyTransform(u,h=!1){const m=Ts();cu(m,u);for(let v=0;v<this.path.length;v++){const x=this.path[v];!h&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Iw(m,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),p0(x.latestValues)&&Iw(m,x.latestValues)}return p0(this.latestValues)&&Iw(m,this.latestValues),m}removeTransform(u){const h=Ts();cu(h,u);for(let m=0;m<this.path.length;m++){const v=this.path[m];if(!v.instance||!p0(v.latestValues))continue;t$(v.latestValues)&&v.updateSnapshot();const x=Ts(),E=v.measurePageBox();cu(x,E),uwe(h,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,x)}return p0(this.latestValues)&&uwe(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==m;if(!(u||v&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:E,layoutId:k}=this.options;if(!(!this.layout||!(E||k))){if(this.resolvedRelativeTargetAt=Xo.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ts(),this.relativeTargetOrigin=Ts(),tT(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),cu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ts(),this.targetWithTransforms=Ts()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fet(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cu(this.target,this.layout.layoutBox),OTe(this.target,this.targetDelta)):cu(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ts(),this.relativeTargetOrigin=Ts(),tT(this.relativeTargetOrigin,this.target,D.target),cu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}f0.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||t$(this.parent.latestValues)||DTe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),m=!!this.resumingFrom||this!==h;let v=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(v=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===Xo.timestamp&&(v=!1),v)return;const{layout:x,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||E))return;cu(this.layoutCorrected,this.layout.layoutBox);const k=this.treeScale.x,D=this.treeScale.y;Eet(this.layoutCorrected,this.treeScale,this.path,m),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:G}=h;if(!G){this.projectionTransform&&(this.projectionDelta=Aw(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Aw(),this.projectionDeltaWithTransform=Aw());const N=this.projectionTransform;eT(this.projectionDelta,this.layoutCorrected,G,this.latestValues),this.projectionTransform=hwe(this.projectionDelta,this.treeScale),(this.projectionTransform!==N||this.treeScale.x!==k||this.treeScale.y!==D)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",G)),f0.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,h=!1){const m=this.snapshot,v=m?m.latestValues:{},x={...this.latestValues},E=Aw();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const k=Ts(),D=m?m.source:void 0,G=this.layout?this.layout.source:void 0,N=D!==G,z=this.getStack(),U=!z||z.members.length<=1,P=!!(N&&!U&&this.options.crossfade===!0&&!this.path.some(dtt));this.animationProgress=0;let $;this.mixTargetDelta=Q=>{const ye=Q/1e3;vwe(E.x,u.x,ye),vwe(E.y,u.y,ye),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tT(k,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ctt(this.relativeTarget,this.relativeTargetOrigin,k,ye),$&&Get(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=Ts()),cu($,this.relativeTarget)),N&&(this.animationValues=x,Bet(x,v,this.latestValues,ye,P,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ye},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Dd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Li.update(()=>{$L.hasAnimatedSinceResize=!0,this.currentAnimation=Zet(0,fwe,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fwe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:m,layout:v,latestValues:x}=u;if(!(!h||!m||!v)){if(this!==u&&this.layout&&v&&jTe(this.options.animationType,this.layout.layoutBox,v.layoutBox)){m=this.target||Ts();const E=Pl(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+E;const k=Pl(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+k}cu(h,m),Iw(h,x),eT(this.projectionDeltaWithTransform,this.layoutCorrected,h,x)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new Wet),this.sharedNodes.get(u).add(h);const v=h.options.initialPromotionConfig;h.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:m}={}){const v=this.getStack();v&&v.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:m}=u;if((m.rotate||m.rotateX||m.rotateY||m.rotateZ)&&(h=!0),!h)return;const v={};for(let x=0;x<pwe.length;x++){const E="rotate"+pwe[x];m[E]&&(v[E]=m[E],u.setStaticValue(E,0))}u.render();for(const x in v)u.setStaticValue(x,v[x]);u.scheduleRender()}getProjectionStyles(u={}){var h,m;const v={};if(!this.instance||this.isSVG)return v;if(this.isVisible)v.visibility="";else return{visibility:"hidden"};const x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,v.opacity="",v.pointerEvents=WL(u.pointerEvents)||"",v.transform=x?x(this.latestValues,""):"none",v;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=WL(u.pointerEvents)||""),this.hasProjected&&!p0(this.latestValues)&&(N.transform=x?x({},""):"none",this.hasProjected=!1),N}const k=E.animationValues||E.latestValues;this.applyTransformsToTarget(),v.transform=hwe(this.projectionDeltaWithTransform,this.treeScale,k),x&&(v.transform=x(k,v.transform));const{x:D,y:G}=this.projectionDelta;v.transformOrigin=`${D.origin*100}% ${G.origin*100}% 0`,E.animationValues?v.opacity=E===this?(m=(h=k.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&m!==void 0?m:1:this.preserveOpacity?this.latestValues.opacity:k.opacityExit:v.opacity=E===this?k.opacity!==void 0?k.opacity:"":k.opacityExit!==void 0?k.opacityExit:0;for(const N in HN){if(k[N]===void 0)continue;const{correct:z,applyTo:U}=HN[N],P=v.transform==="none"?k[N]:z(k[N],E);if(U){const $=U.length;for(let Q=0;Q<$;Q++)v[U[Q]]=P}else v[N]=P}return this.options.layoutId&&(v.pointerEvents=E===this?WL(u.pointerEvents)||"":"none"),v}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(mwe),this.root.sharedNodes.clear()}}}function Jet(t){t.updateLayout()}function ett(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?Sd(E=>{const k=u?n.measuredBox[E]:n.layoutBox[E],D=Pl(k);k.min=r[E].min,k.max=k.min+D}):jTe(o,n.layoutBox,r)&&Sd(E=>{const k=u?n.measuredBox[E]:n.layoutBox[E],D=Pl(r[E]);k.max=k.min+D,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[E].max=t.relativeTarget[E].min+D)});const h=Aw();eT(h,r,n.layoutBox);const m=Aw();u?eT(m,t.applyTransform(i,!0),n.measuredBox):eT(m,r,n.layoutBox);const v=!UTe(h);let x=!1;if(!t.resumeFrom){const E=t.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:k,layout:D}=E;if(k&&D){const G=Ts();tT(G,n.layoutBox,k.layoutBox);const N=Ts();tT(N,r,D.layoutBox),zTe(G,N)||(x=!0),E.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=G,t.relativeParent=E)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:m,layoutDelta:h,hasLayoutChanged:v,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function ttt(t){f0.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ntt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rtt(t){t.clearSnapshot()}function mwe(t){t.clearMeasurements()}function itt(t){t.isLayoutDirty=!1}function stt(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gwe(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ott(t){t.resolveTargetDelta()}function att(t){t.calcProjection()}function ltt(t){t.resetRotation()}function utt(t){t.removeLeadSnapshot()}function vwe(t,e,n){t.translate=Di(e.translate,0,n),t.scale=Di(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ywe(t,e,n,r){t.min=Di(e.min,n.min,r),t.max=Di(e.max,n.max,r)}function ctt(t,e,n,r){ywe(t.x,e.x,n.x,r),ywe(t.y,e.y,n.y,r)}function dtt(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const htt={duration:.45,ease:[.4,0,.1,1]},bwe=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),_we=bwe("applewebkit/")&&!bwe("chrome/")?Math.round:rs;function wwe(t){t.min=_we(t.min),t.max=_we(t.max)}function ptt(t){wwe(t.x),wwe(t.y)}function jTe(t,e,n){return t==="position"||t==="preserve-aspect"&&!JW(dwe(e),dwe(n),.2)}const ftt=VTe({attachResizeListener:(t,e)=>op(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),m9={current:void 0},HTe=VTe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!m9.current){const t=new ftt({});t.mount(window),t.setOptions({layoutScroll:!0}),m9.current=t}return m9.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mtt={pan:{Feature:Ret},drag:{Feature:Iet,ProjectionNode:HTe,MeasureLayout:NTe}},gtt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function vtt(t){const e=gtt.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function r$(t,e,n=1){const[r,i]=vtt(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return PTe(u)?parseFloat(u):u}else return $W(i)?r$(i,e,n+1):i}function ytt(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const o=i.get();if(!$W(o))return;const u=r$(o,r);u&&i.set(u)});for(const i in e){const o=e[i];if(!$W(o))continue;const u=r$(o,r);u&&(e[i]=u,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:e,transitionEnd:n}}const btt=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),GTe=t=>btt.has(t),_tt=t=>Object.keys(t).some(GTe),xwe=t=>t===Q0||t===Xn,Swe=(t,e)=>parseFloat(t.split(", ")[e]),Ewe=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Swe(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?Swe(o[1],t):0}},wtt=new Set(["x","y","z"]),xtt=yM.filter(t=>!wtt.has(t));function Stt(t){const e=[];return xtt.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const s1={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ewe(4,13),y:Ewe(5,14)};s1.translateX=s1.x;s1.translateY=s1.y;const Ett=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:u}=o,h={};u==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(v=>{h[v]=s1[v](r,o)}),e.render();const m=e.measureViewportBox();return n.forEach(v=>{const x=e.getValue(v);x&&x.jump(h[v]),t[v]=s1[v](m,o)}),t},Ctt=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(GTe);let o=[],u=!1;const h=[];if(i.forEach(m=>{const v=t.getValue(m);if(!t.hasValue(m))return;let x=n[m],E=kP(x);const k=e[m];let D;if(WN(k)){const G=k.length,N=k[0]===null?1:0;x=k[N],E=kP(x);for(let z=N;z<G&&k[z]!==null;z++)D?FK(kP(k[z])===D):D=kP(k[z])}else D=kP(k);if(E!==D)if(xwe(E)&&xwe(D)){const G=v.get();typeof G=="string"&&v.set(parseFloat(G)),typeof k=="string"?e[m]=parseFloat(k):Array.isArray(k)&&D===Xn&&(e[m]=k.map(parseFloat))}else E!=null&&E.transform&&(D!=null&&D.transform)&&(x===0||k===0)?x===0?v.set(D.transform(x)):e[m]=E.transform(k):(u||(o=Stt(t),u=!0),h.push(m),r[m]=r[m]!==void 0?r[m]:e[m],v.jump(k))}),h.length){const m=h.indexOf("height")>=0?window.pageYOffset:null,v=Ett(e,t,h);return o.length&&o.forEach(([x,E])=>{t.getValue(x).set(E)}),t.render(),GF&&m!==null&&window.scrollTo({top:m}),{target:v,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Ptt(t,e,n,r){return _tt(e)?Ctt(t,e,n,r):{target:e,transitionEnd:r}}const Ttt=(t,e,n,r)=>{const i=ytt(t,e,r);return e=i.target,r=i.transitionEnd,Ptt(t,e,n,r)},i$={current:null},WTe={current:!1};function Mtt(){if(WTe.current=!0,!!GF)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>i$.current=t.matches;t.addListener(e),e()}else i$.current=!1}function ktt(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],u=n[i];if(Ma(o))t.addValue(i,o),qN(r)&&r.add(i);else if(Ma(u))t.addValue(i,j0(o,{owner:t})),qN(r)&&r.remove(i);else if(u!==o)if(t.hasValue(i)){const h=t.getValue(i);!h.hasAnimated&&h.set(o)}else{const h=t.getStaticValue(i);t.addValue(i,j0(h!==void 0?h:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Cwe=new WeakMap,$Te=Object.keys(jT),Att=$Te.length,Pwe=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Itt=MK.length;class Rtt{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Li.render(this.render,!1,!0);const{latestValues:h,renderState:m}=o;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.isControllingVariants=$F(n),this.isVariantNode=IPe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{});for(const E in x){const k=x[E];h[E]!==void 0&&Ma(k)&&(k.set(h[E],!1),qN(v)&&v.add(E))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Cwe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),WTe.current||Mtt(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:i$.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Cwe.delete(this.current),this.projection&&this.projection.unmount(),Dd(this.notifyUpdate),Dd(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Z0.has(e),i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Li.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,o){let u,h;for(let m=0;m<Att;m++){const v=$Te[m],{isEnabled:x,Feature:E,ProjectionNode:k,MeasureLayout:D}=jT[v];k&&(u=k),x(n)&&(!this.features[v]&&E&&(this.features[v]=new E(this)),D&&(h=D))}if(!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:m,layout:v,drag:x,dragConstraints:E,layoutScroll:k,layoutRoot:D}=n;this.projection.setOptions({layoutId:m,layout:v,alwaysMeasureLayout:!!x||E&&Mw(E),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof v=="string"?v:"both",initialPromotionConfig:o,layoutScroll:k,layoutRoot:D})}return h}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ts()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Pwe.length;r++){const i=Pwe[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=ktt(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Itt;r++){const i=MK[r],o=this.props[i];(VT(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=j0(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=NK(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ma(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new $K),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class KTe extends Rtt{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},o){let u=qJe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),u&&(u=i(u))),o){KJe(this,r,u);const h=Ttt(this,r,u,n);n=h.transitionEnd,r=h.target}return{transition:e,transitionEnd:n,...r}}}function Dtt(t){return window.getComputedStyle(t)}class Ott extends KTe{readValueFromInstance(e,n){if(Z0.has(n)){const r=jK(n);return r&&r.default||0}else{const r=Dtt(e),i=(NPe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return LTe(e,n)}build(e,n,r,i){AK(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return LK(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ma(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){jPe(e,n,r,i)}}class Ltt extends KTe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Z0.has(n)){const r=jK(n);return r&&r.default||0}return n=HPe.has(n)?n:OK(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ts()}scrapeMotionValuesFromProps(e,n){return WPe(e,n)}build(e,n,r,i){RK(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){GPe(e,n,r,i)}mount(e){this.isSVGTag=DK(e.tagName),super.mount(e)}}const Ntt=(t,e)=>kK(t)?new Ltt(e,{enableHardwareAcceleration:!1}):new Ott(e,{enableHardwareAcceleration:!0}),Ftt={layout:{ProjectionNode:HTe,MeasureLayout:NTe}},Btt={...cet,...MQe,...mtt,...Ftt},XTe=FZe((t,e)=>hQe(t,e,Btt,Ntt)),qTe=Gt.createContext(null);function Utt(t,e,n,r){if(!r)return t;const i=t.findIndex(x=>x.value===e);if(i===-1)return t;const o=r>0?1:-1,u=t[i+o];if(!u)return t;const h=t[i],m=u.layout,v=Di(m.min,m.max,.5);return o===1&&h.layout.max+n>v||o===-1&&h.layout.min+n<v?UJe(t,i,i+o):t}function ztt({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...o},u){const h=wM(()=>XTe(e)),m=[],v=Gt.useRef(!1),x={axis:n,registerItem:(E,k)=>{k&&m.findIndex(D=>E===D.value)===-1&&(m.push({value:E,layout:k[n]}),m.sort(Htt))},updateOrder:(E,k,D)=>{if(v.current)return;const G=Utt(m,E,k,D);m!==G&&(v.current=!0,r(G.map(jtt).filter(N=>i.indexOf(N)!==-1)))}};return Gt.useEffect(()=>{v.current=!1}),Gt.createElement(h,{...o,ref:u,ignoreStrict:!0},Gt.createElement(qTe.Provider,{value:x},t))}const Vtt=Gt.forwardRef(ztt);function jtt(t){return t.value}function Htt(t,e){return t.layout.min-e.layout.min}function YTe(t){const e=wM(()=>j0(t)),{isStatic:n}=Gt.useContext(CK);if(n){const[,r]=Gt.useState(t);Gt.useEffect(()=>e.on("change",r),[])}return e}const Gtt=t=>typeof t=="object"&&t.mix,Wtt=t=>Gtt(t)?t.mix:void 0;function $tt(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],o=t[2+n],u=t[3+n],h=VK(i,o,{mixer:Wtt(o[0]),...u});return e?h(r):h}function ZTe(t,e){const n=YTe(e()),r=()=>n.set(e());return r(),WW(()=>{const i=()=>Li.update(r,!1,!0),o=t.map(u=>u.on("change",i));return()=>{o.forEach(u=>u()),Dd(r)}}),n}function Ktt(t){JP.current=[],t();const e=ZTe(JP.current,t);return JP.current=void 0,e}function Xtt(t,e,n,r){if(typeof t=="function")return Ktt(t);const i=typeof e=="function"?e:$tt(e,n,r);return Array.isArray(t)?Twe(t,i):Twe([t],([o])=>i(o))}function Twe(t,e){const n=wM(()=>[]);return ZTe(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function Mwe(t,e=0){return Ma(t)?t:YTe(e)}function qtt({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:o=!0,...u},h){const m=wM(()=>XTe(r)),v=Gt.useContext(qTe),x={x:Mwe(e.x),y:Mwe(e.y)},E=Xtt([x.x,x.y],([z,U])=>z||U?1:"unset"),k=Gt.useRef(null),{axis:D,registerItem:G,updateOrder:N}=v;return Gt.useEffect(()=>{G(n,k.current)},[v]),Gt.createElement(m,{drag:D,...u,dragSnapToOrigin:!0,style:{...e,x:x.x,y:x.y,zIndex:E},layout:o,onDrag:(z,U)=>{const{velocity:P}=U;P[D]&&N(n,x[D].get(),P[D]),i&&i(z,U)},onLayoutMeasure:z=>{k.current=z},ref:h,ignoreStrict:!0},t)}const Ytt=Gt.forwardRef(qtt),QTe={Group:Vtt,Item:Ytt},Ztt=_t.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[_t.jsx("circle",{cx:"7",cy:"7",r:"6"}),_t.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),_t.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),Qtt=_t.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:_t.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function Jtt(t){return _t.jsx(QTe.Item,{value:t.title,children:_t.jsxs("div",{children:[Qtt,_t.jsx("span",{children:t.title}),_t.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:Ztt})]})},t.title)}function ent(t){const[e,n]=Gt.useState(!1),[r,i]=Gt.useState(t.options),o=v=>{t.onDragComplete(v),i(v)},u=v=>{const x=[...r];x.splice(v,1),o(x)},h=[];r.forEach((v,x)=>{h.push(_t.jsx(Jtt,{index:x,title:v,onDelete:u},v))});let m="dropdown draggable";return t.subdropdown&&(m+=" subdropdown"),_t.jsxs("div",{className:m,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[_t.jsx(kPe,{title:t.title}),_t.jsx(QTe.Group,{axis:"y",values:r,onReorder:o,style:{visibility:e?"visible":"hidden"},children:h})]})}function tnt(t){const{option:e}=t,[n,r]=Gt.useState("");let i;switch(e.type){case"draggable":i=_t.jsx(ent,{title:e.title,options:e.value,onDragComplete:o=>{e.onDragComplete!==void 0&&e.onDragComplete(o)},subdropdown:!0});break;case"dropdown":i=_t.jsx(JTe,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":i=_t.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return _t.jsx("li",{className:n===e.title?"selected":"",children:i},U8e())}function JTe(t){const[e,n]=Gt.useState(!1),r=[];t.options.map((o,u)=>{t.onSelect!==void 0&&(o.onSelect=t.onSelect),r.push(_t.jsx(tnt,{option:o},u))});let i="dropdown";return t.subdropdown&&(i+=" subdropdown"),_t.jsxs("div",{className:i,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[_t.jsx(kPe,{title:t.title}),_t.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function KK(t){const[e,n]=Gt.useState(t.open!==void 0?t.open:!0),r=!e||t.children===void 0;return _t.jsxs("div",{className:`accordion ${r?"hide":""}`,children:[_t.jsxs("button",{className:"toggle",onClick:()=>{const i=!e;t.onToggle!==void 0&&t.onToggle(i),n(i)},children:[_t.jsx("p",{className:`status ${e?"open":""}`,children:"Toggle"}),_t.jsx("p",{className:"label",children:t.label})]}),t.button,_t.jsx("div",{className:e?"open":"",children:_t.jsx("div",{children:t.children})})]})}function eMe(t){const[e,n]=Gt.useState(!1),r=t.child.children.length>0,i=[];return t.child.children.length>0&&t.child.children.map(o=>{i.push(_t.jsx(eMe,{child:o,three:t.three},Math.random()))}),_t.jsxs("div",{className:"childObject",children:[_t.jsxs("div",{className:"child",children:[r?_t.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,_t.jsx("button",{className:"name",style:{left:r?"20px":"5px"},onClick:()=>{t.three.getObject(t.child.uuid)},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),_t.jsx("div",{className:`icon ${$8e(t.child)}`})]}),_t.jsx("div",{className:e?"open":"",children:_t.jsx("div",{className:"container",children:i})})]},Math.random())}function nnt(t){const e=[];return t.child.children.map(n=>{e.push(_t.jsx(eMe,{child:n,three:t.three},Math.random()))}),_t.jsx("div",{className:`scene ${t.class!==void 0?t.class:""}`,children:e})}const rnt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVRoge2Y0Q6EIAwE6cX//+X6cCFpSMEKVTdk501OpRNKiyelFC0b8Ps6gCwoggZF0KAIGhRBgyJoUAQNiqCxjciR9SLV//eZiAyvK3U8i/QVaQO2YyLSFVvlkdTKDjJCukh2ykR5ZEW+kHmlatl90RaBtDkK/w7CYhuRUEO0ee3l+J3m55Vm+17vtwjTnV1V3QA8qfbeUXCzRWDpiLLS+OyzvRW7IzW9R+okvclsqR09743bo0yUpc1+lSJvNsa002+Euk9GKzV7SmZDRIMiaFAEDYqgQRE0KIIGRdCgCBoUQeMEMERadX7YUz8AAAAASUVORK5CYII=";function int(t){return"items"in t}function H0(t){function e(r,i){console.log("onChange:",r,i)}const n=[];return t.items.forEach(r=>{int(r)?n.push(_t.jsx(H0,{title:r.title,items:r.items},Math.random())):n.push(_t.jsx(NP,{title:r.title,prop:r.prop,value:r.value,type:r.type,min:r.min,max:r.max,step:r.step,disabled:r.disabled,onChange:(i,o)=>{r.onChange!==void 0?r.onChange(i,o):e(i,o)}},Math.random()))}),_t.jsx(KK,{label:t.title,open:!1,children:n})}function snt(t){return!(t==="alphaHash"||t==="alphaToCoverage"||t==="attenuationDistance"||t==="colorWrite"||t==="combine"||t==="defaultAttributeValues"||t==="depthFunc"||t==="forceSinglePass"||t==="glslVersion"||t==="linewidth"||t==="normalMapType"||t==="precision"||t==="premultipliedAlpha"||t==="shadowSide"||t==="side"||t==="toneMapped"||t==="uniformsGroups"||t==="uniformsNeedUpdate"||t==="userData"||t==="vertexColors"||t==="version"||t==="wireframeLinecap"||t==="wireframeLinejoin"||t==="wireframeLinewidth"||t.slice(0,5)==="blend"||t.slice(0,4)==="clip"||t.slice(0,7)==="polygon"||t.slice(0,7)==="stencil"||t.slice(0,2)==="is")}function o0(t){switch(t){case"alphaMap":return"Alpha Map";case"anisotropyMap":return"Anisotropy Map";case"anisotropyRotation":return"Anisotropy Rotation";case"aoMap":return"AO Map";case"aoMapIntensity":return"AO Map Intensity";case"attenuationColor":return"Attenuation Color";case"bumpMap":return"Bump Map";case"bumpScale":return"Bump Scale";case"clearcoatMap":return"Clearcoat Map";case"clearcoatNormalMap":return"Clearcoat Normal Map";case"clearcoatNormalScale":return"Clearcoat Normal Scale";case"clearcoatRoughness":return"Clearcoat Roughness";case"clearcoatRoughnessMap":return"Clearcoat Roughness Map";case"color":return"Color";case"defines":return"Defines";case"depthTest":return"Depth Test";case"depthWrite":return"Depth Write";case"displacementBias":return"Displacement Bias";case"displacementMap":return"Displacement Map";case"displacementScale":return"Displacement Scale";case"dithering":return"Dithering";case"emissive":return"Emissive";case"emissiveMap":return"Emissive Map";case"emissiveIntensity":return"Emissive Intensity";case"envMap":return"Environment Map";case"envMapIntensity":return"Environment Map Intensity";case"extensions":return"Extensions";case"flatShading":return"Flat Shading";case"fragmentShader":return"Fragment Shader";case"fog":return"Fog";case"gradientMap":return"Gradient Map";case"ior":return"IOR";case"iridescenceIOR":return"Iridescence IOR";case"iridescenceMap":return"Iridescence Map";case"iridescenceThicknessMap":return"Iridescence Thickness Map";case"iridescenceThicknessRange":return"Iridescence Thickness Range";case"lights":return"Lights";case"lightMap":return"Light Map";case"lightMapIntensity":return"Light Map Intensity";case"map":return"Map";case"matcap":return"Matcap";case"metalness":return"Metalness";case"metalnessMap":return"Metalness Map";case"name":return"Name";case"normalMap":return"Normal Map";case"normalScale":return"Normal Scale";case"opacity":return"Opacity";case"reflectivity":return"Reflectivity";case"refractionRatio":return"Refraction Ratio";case"roughness":return"Roughness";case"roughnessMap":return"Roughness Map";case"sheenColor":return"Sheen Color";case"sheenColorMap":return"Sheen Color Map";case"sheenRoughness":return"Sheen Roughness";case"sheenRoughnessMap":return"Sheen Roughness Map";case"shininess":return"Shininess";case"specular":return"Specular";case"specularColor":return"Specular Color";case"specularColorMap":return"Specular Color Map";case"specularIntensity":return"Specular Intensity";case"specularIntensityMap":return"Specular Map Intensity";case"thickness":return"Thickness";case"thicknessMap":return"Thickness Map";case"transmission":return"Transmission";case"transmissionMap":return"Transmission Map";case"transparent":return"Transparent";case"type":return"Type";case"uuid":return"UUID";case"uniforms":return"Uniforms";case"vertexShader":return"Vertex Shader";case"visible":return"Visible";case"wireframe":return"Wireframe"}return t}function ont(t){return t.toLowerCase().search("intensity")>-1||t==="anisotropyRotation"||t==="bumpScale"||t==="clearcoatRoughness"||t==="displacementBias"||t==="displacementScale"||t==="metalness"||t==="opacity"||t==="reflectivity"||t==="refractionRatio"||t==="roughness"||t==="sheenRoughness"||t==="thickness"}function ant(){const t=document.createElement("input");return t.type="file",new Promise((e,n)=>{t.addEventListener("change",function(){if(t.files===null)n();else{const r=t.files[0],i=new FileReader;i.onload=function(o){e(o.target.result)},i.readAsDataURL(r)}}),t.click()})}function kwe(t,e,n){const r=[];for(const i in t){if(!snt(i))continue;const o=typeof t[i],u=t[i];if(o==="boolean"||o==="number"||o==="string"){const h={title:o0(i),prop:i,type:o,value:u,min:void 0,max:void 0,onChange:(m,v)=>{var E;n.updateObject(e.uuid,`material.${m}`,v),o==="boolean"&&n.updateObject(e.uuid,"material.needsUpdate",!0);const x=(E=n.scene)==null?void 0:E.getObjectByProperty("uuid",e.uuid);x!==void 0&&to(x,`material.${m}`,v)}};ont(i)&&(h.value=Number(u),h.type="range",h.min=0,h.max=1,h.step=.01),r.push(h)}else if(o==="object")if(u.isColor)r.push({title:o0(i),prop:i,type:"color",value:u,onChange:(h,m)=>{var E;const v=new Sn(m);n.updateObject(e.uuid,`material.${h}`,v);const x=(E=n.scene)==null?void 0:E.getObjectByProperty("uuid",e.uuid);x!==void 0&&to(x,`material.${h}`,v)}});else if(Array.isArray(u)){const h=[];for(const m in u)h.push({title:`${m}`,type:`${typeof u[m]}`,value:u[m],onChange:(v,x)=>{var k;n.updateObject(e.uuid,`material.${i}`,x);const E=(k=n.scene)==null?void 0:k.getObjectByProperty("uuid",e.uuid);E!==void 0&&to(E,`material.${i}`,x)}});r.push({title:o0(i),items:h})}else{const h=[];for(const m in u){const v=u[m];switch(typeof v){case"boolean":case"number":case"string":m==="src"?r.push({title:o0(i),type:"image",value:v,onChange:(E,k)=>{var G;n.createTexture(e.uuid,`material.${i}`,k);const D=(G=n.scene)==null?void 0:G.getObjectByProperty("uuid",e.uuid);D!==void 0&&RN(k).then(N=>{to(D,`material.${i}`,N),to(D,"material.needsUpdate",!0)})}}):h.push({title:`${o0(m)}`,prop:`material.${i}.${m}`,type:`${typeof t[i][m]}`,value:u[m],onChange:(E,k)=>{var G;n.updateObject(e.uuid,`material.${i}.${m}`,k);const D=(G=n.scene)==null?void 0:G.getObjectByProperty("uuid",e.uuid);D!==void 0&&to(D,`material.${i}.${m}`,k)}});break;case"object":v.value!==void 0&&v.value.src!==void 0?h.push({title:o0(m),type:"image",value:v.value.src,onChange:(E,k)=>{var G;n.createTexture(e.uuid,`material.${i}.${m}.value`,k);const D=(G=n.scene)==null?void 0:G.getObjectByProperty("uuid",e.uuid);D!==void 0&&RN(k).then(N=>{to(D,`material.${i}.${m}.value`,N)})}}):h.push({title:m,type:`${typeof v.value}`,value:v.value,onChange:(E,k)=>{var G;n.updateObject(e.uuid,`material.${i}.${m}.value`,k);const D=(G=n.scene)==null?void 0:G.getObjectByProperty("uuid",e.uuid);D!==void 0&&to(D,`material.${i}.${m}.value`,k)}});break}}h.length>0&&r.push({title:o0(i),items:h})}else u!==void 0&&console.log("other:",i,o,u)}return r.sort((i,o)=>i.title<o.title?-1:i.title>o.title?1:0),r.push({title:"Update Material",type:"button",onChange:()=>{n.updateObject(e.uuid,"material.needsUpdate",!0)}}),r}function lnt(t,e){const n=t.material;if(Array.isArray(n)){const r=[],i=n.length;for(let o=0;o<i;o++)r.push(_t.jsx(H0,{title:`Material ${o}`,items:kwe(n[o],t,e)},`Material ${o}`));return _t.jsx(_t.Fragment,{children:r})}else return _t.jsx(H0,{title:"Material",items:kwe(n,t,e)})}function NP(t){let e=t.value;e!==void 0&&e.isColor!==void 0&&(e=V8e(t.value));const[n,r]=Gt.useState(e),i=Gt.useRef(null),o=Gt.useRef(null),u=Gt.useRef(null);Gt.useEffect(()=>{var $;let x=!1,E=-1,k=0,D=Number(n);const G=Q=>{x=!0,k=D,E=Q.clientX},N=Q=>{if(!x)return;const ye=t.step!==void 0?t.step:1,q=(Q.clientX-E)*ye;D=Number((k+q).toFixed(4)),o.current!==null&&(o.current.value=D.toString()),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,D)},z=()=>{x=!1},U=()=>{x=!1},P=t.type==="number";return P&&(($=i.current)==null||$.addEventListener("mousedown",G,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("mousemove",N,!1),document.addEventListener("contextmenu",U,!1)),()=>{var Q;P&&((Q=i.current)==null||Q.removeEventListener("mousedown",G),document.removeEventListener("mouseup",z),document.removeEventListener("mousemove",N),document.removeEventListener("contextmenu",U))}},[n]);const h=t.type==="string"&&(n.length>100||n.search(`
`)>-1),m=h||t.type==="image",v=x=>{let E=x.target.value;t.type==="boolean"&&(E=x.target.checked),r(E),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,E)};return _t.jsxs("div",{className:`field ${m?"block":""}`,children:[t.type!=="button"&&_t.jsx("label",{ref:i,children:t.title},"fieldLabel"),t.type==="string"&&!h&&_t.jsx("input",{type:"text",disabled:t.disabled,onChange:v,value:n}),t.type==="string"&&h&&_t.jsx("textarea",{cols:50,rows:10,disabled:!0,onChange:v,value:n}),t.type==="boolean"&&_t.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:v,checked:n}),t.type==="number"&&_t.jsx("input",{ref:o,type:"number",value:n,min:t.min,max:t.max,step:t.step,onChange:v}),t.type==="range"&&_t.jsxs(_t.Fragment,{children:[_t.jsx("input",{type:"text",value:n.toString(),onChange:v,className:"min"}),_t.jsx("input",{disabled:t.disabled,type:"range",value:n,min:t.min,max:t.max,step:t.step,onChange:v})]}),t.type==="color"&&_t.jsxs(_t.Fragment,{children:[_t.jsx("input",{type:"text",value:n.toString(),onChange:v,className:"color"}),_t.jsx("input",{type:"color",value:n,onChange:v})]}),t.type==="button"&&_t.jsx("button",{onClick:()=>{t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,!0)},children:t.title}),t.type==="image"&&_t.jsx("img",{ref:u,onClick:()=>{ant().then(x=>{u.current.src=x,t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,x)})},src:n.length>0?n:rnt})]})}function Awe(t){switch(t){case"fov":return"FOV";case"zoom":return"Zoom";case"near":return"Near";case"far":return"Far";case"focus":return"Focus";case"aspect":return"Aspect";case"filmGauge":return"Film Gauge";case"filmOffset":return"Film Offset";case"left":return"Left";case"right":return"Right";case"top":return"Top";case"bottom":return"Bottom"}return t}function unt(t,e){const n=[];if(t.perspectiveCameraInfo!==void 0)for(const r in t.perspectiveCameraInfo)n.push({title:Awe(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&(to(u,i,o),u.updateProjectionMatrix())}});else if(t.orthographicCameraInfo!==void 0)for(const r in t.orthographicCameraInfo)n.push({title:Awe(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&(to(u,i,o),u.updateProjectionMatrix())}});return _t.jsx(H0,{title:"Camera",items:n})}const cnt=Math.PI/180,dnt=180/Math.PI;function lw(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function hnt(t){return t*cnt}function g9(t){return t*dnt}function pnt(t,e){const n=new zn;n.elements=t.matrix;const r=new Le,i=new Sa,o=new Le;t.uuid.length>0&&(r.setFromMatrixPosition(n),i.setFromRotationMatrix(n),o.setFromMatrixScale(n));const u=(m,v)=>{var E;e.updateObject(t.uuid,m,v);const x=(E=e.scene)==null?void 0:E.getObjectByProperty("uuid",t.uuid);x!==void 0&&to(x,m,v)},h=(m,v)=>{u(m,hnt(v))};return _t.jsx(H0,{title:"Transform",items:[{title:"Position X",prop:"position.x",type:"number",value:r.x,onChange:u},{title:"Position Y",prop:"position.y",type:"number",value:r.y,onChange:u},{title:"Position Z",prop:"position.z",type:"number",value:r.z,onChange:u},{title:"Rotation X",prop:"rotation.x",type:"number",value:MG(g9(i.x)),min:-360,max:360,step:.1,onChange:h},{title:"Rotation Y",prop:"rotation.y",type:"number",value:MG(g9(i.y)),min:-360,max:360,step:.1,onChange:h},{title:"Rotation Z",prop:"rotation.z",type:"number",value:MG(g9(i.z)),min:-360,max:360,step:.1,onChange:h},{title:"Scale X",prop:"scale.x",type:"number",value:o.x,step:.01,onChange:u},{title:"Scale Y",prop:"scale.y",type:"number",value:o.y,step:.01,onChange:u},{title:"Scale Z",prop:"scale.z",type:"number",value:o.z,step:.01,onChange:u}]})}function Iwe(t){switch(t){case"color":return"Color";case"intensity":return"Intensity";case"decay":return"Decay";case"distance":return"Distance";case"angle":return"Angle";case"penumbra":return"Penumbra";case"groundColor":return"Ground Color"}return t}function fnt(t,e){const n=[];if(t.lightInfo!==void 0)for(const r in t.lightInfo){const i=t.lightInfo[r];i!==void 0&&(i.isColor!==void 0?n.push({title:Iwe(r),prop:r,type:"color",value:i,onChange:(o,u)=>{var v;const h=new Sn(u);e.updateObject(t.uuid,o,h);const m=(v=e.scene)==null?void 0:v.getObjectByProperty("uuid",t.uuid);m!==void 0&&to(m,o,h)}}):n.push({title:Iwe(r),prop:r,type:typeof i,value:i,step:typeof i=="number"?.01:void 0,onChange:(o,u)=>{var m;e.updateObject(t.uuid,o,u);const h=(m=e.scene)==null?void 0:m.getObjectByProperty("uuid",t.uuid);h!==void 0&&to(h,o,u)}}))}return _t.jsx(H0,{title:"Light",items:n})}function mnt(t,e){const n=[];return t.animations.forEach(r=>{n.push({title:"Name",type:"string",prop:"name",value:r.name,disabled:!0,onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o);const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&to(u,i,o)}}),n.push({title:"Duration",type:"number",prop:"duration",value:r.duration,disabled:!0,onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o);const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&to(u,i,o)}}),n.push({title:"Blend Mode",type:"number",prop:"blendMode",value:r.blendMode,disabled:!0,onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o);const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&to(u,i,o)}})}),_t.jsx(H0,{title:"Animations",items:n})}const Rwe={name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};function gnt(t){const[e,n]=Gt.useState(Rwe);Gt.useEffect(()=>{function i(u){const h=u.value;n(h)}function o(){n(Rwe)}return _r.addEventListener(wr.SET_SCENE,o),_r.addEventListener(wr.SET_OBJECT,i),()=>{_r.removeEventListener(wr.SET_SCENE,o),_r.removeEventListener(wr.SET_OBJECT,i)}},[]);const r=e.type.toLowerCase();return _t.jsx(KK,{label:"Inspector",children:_t.jsx("div",{id:"Inspector",className:t.class,children:e.uuid.length>0&&_t.jsxs(_t.Fragment,{children:[_t.jsxs(_t.Fragment,{children:[_t.jsx(NP,{type:"string",title:"Name",prop:"name",value:e.name,disabled:!0}),_t.jsx(NP,{type:"string",title:"Type",prop:"type",value:e.type,disabled:!0}),_t.jsx(NP,{type:"string",title:"UUID",prop:"uuid",value:e.uuid,disabled:!0}),_t.jsx(NP,{type:"boolean",title:"Visible",prop:"visible",value:e.visible,onChange:(i,o)=>{var h;t.three.updateObject(e.uuid,i,o);const u=(h=t.three.scene)==null?void 0:h.getObjectByProperty("uuid",e.uuid);u!==void 0&&to(u,i,o)}})]}),_t.jsxs(_t.Fragment,{children:[pnt(e,t.three),e.animations.length>0?mnt(e,t.three):null,r.search("camera")>-1?unt(e,t.three):null,r.search("light")>-1?fnt(e,t.three):null,r.search("mesh")>-1?lnt(e,t.three):null]})]})})},"Inspector")}class vnt extends Gt.Component{constructor(n){super(n);Jr(this,"three");Jr(this,"setScene",n=>{this.setState(()=>({scene:n.value}))});this.state={scene:n.scene!==void 0?n.scene:null},this.three=n.three,_r.addEventListener(wr.SET_SCENE,this.setScene)}componentWillUnmount(){_r.removeEventListener(wr.SET_SCENE,this.setScene)}render(){var i;const n=this.componentState.scene!==null,r="Hierarchy - "+(n?`${(i=this.componentState.scene)==null?void 0:i.name}`:"No Scene");return _t.jsx("div",{id:"SidePanel",children:_t.jsxs(_t.Fragment,{children:[_t.jsx(KK,{label:r,open:!0,children:_t.jsx(_t.Fragment,{children:n&&_t.jsx(nnt,{child:this.componentState.scene,three:this.three})})}),_t.jsx(gnt,{three:this.three})]})},"SidePanel")}get componentState(){return this.state}}const Dwe={type:"change"},v9={type:"start"},Owe={type:"end"},SL=new QT,Lwe=new wm,ynt=Math.cos(70*qo.DEG2RAD);class bnt extends Eu{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Le,this.cursor=new Le,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:B_.ROTATE,MIDDLE:B_.DOLLY,RIGHT:B_.PAN},this.touches={ONE:U_.ROTATE,TWO:U_.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ae){Ae.addEventListener("keydown",kt),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",kt),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(Dwe),r.update(),o=i.NONE},this.update=function(){const Ae=new Le,Tt=new Ms().setFromUnitVectors(e.up,new Le(0,1,0)),qt=Tt.clone().invert(),Vt=new Le,ln=new Ms,$n=new Le,lr=2*Math.PI;return function(jt=null){const Fe=r.object.position;Ae.copy(Fe).sub(r.target),Ae.applyQuaternion(Tt),h.setFromVector3(Ae),r.autoRotate&&o===i.NONE&&Ye(W(jt)),r.enableDamping?(h.theta+=m.theta*r.dampingFactor,h.phi+=m.phi*r.dampingFactor):(h.theta+=m.theta,h.phi+=m.phi);let Kt=r.minAzimuthAngle,Wt=r.maxAzimuthAngle;isFinite(Kt)&&isFinite(Wt)&&(Kt<-Math.PI?Kt+=lr:Kt>Math.PI&&(Kt-=lr),Wt<-Math.PI?Wt+=lr:Wt>Math.PI&&(Wt-=lr),Kt<=Wt?h.theta=Math.max(Kt,Math.min(Wt,h.theta)):h.theta=h.theta>(Kt+Wt)/2?Math.max(Kt,h.theta):Math.min(Wt,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(x,r.dampingFactor):r.target.add(x),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&q||r.object.isOrthographicCamera?h.radius=Xe(h.radius):h.radius=Xe(h.radius*v),Ae.setFromSpherical(h),Ae.applyQuaternion(qt),Fe.copy(r.target).add(Ae),r.object.lookAt(r.target),r.enableDamping===!0?(m.theta*=1-r.dampingFactor,m.phi*=1-r.dampingFactor,x.multiplyScalar(1-r.dampingFactor)):(m.set(0,0,0),x.set(0,0,0));let Cn=!1;if(r.zoomToCursor&&q){let xn=null;if(r.object.isPerspectiveCamera){const or=Ae.length();xn=Xe(or*v);const pr=or-xn;r.object.position.addScaledVector(Q,pr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const or=new Le(ye.x,ye.y,0);or.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix(),Cn=!0;const pr=new Le(ye.x,ye.y,0);pr.unproject(r.object),r.object.position.sub(pr).add(or),r.object.updateMatrixWorld(),xn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;xn!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(xn).add(r.object.position):(SL.origin.copy(r.object.position),SL.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(SL.direction))<ynt?e.lookAt(r.target):(Lwe.setFromNormalAndCoplanarPoint(r.object.up,r.target),SL.intersectPlane(Lwe,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix(),Cn=!0);return v=1,q=!1,Cn||Vt.distanceToSquared(r.object.position)>u||8*(1-ln.dot(r.object.quaternion))>u||$n.distanceToSquared(r.target)>0?(r.dispatchEvent(Dwe),Vt.copy(r.object.position),ln.copy(r.object.quaternion),$n.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",sn),r.domElement.removeEventListener("pointerdown",En),r.domElement.removeEventListener("pointercancel",fe),r.domElement.removeEventListener("wheel",Nt),r.domElement.removeEventListener("pointermove",xe),r.domElement.removeEventListener("pointerup",fe),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",kt),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const u=1e-6,h=new ube,m=new ube;let v=1;const x=new Le,E=new un,k=new un,D=new un,G=new un,N=new un,z=new un,U=new un,P=new un,$=new un,Q=new Le,ye=new un;let q=!1;const ie=[],pe={};function W(Ae){return Ae!==null?2*Math.PI/60*r.autoRotateSpeed*Ae:2*Math.PI/60/60*r.autoRotateSpeed}function he(Ae){const Tt=Math.abs(Ae)/(100*(window.devicePixelRatio|0));return Math.pow(.95,r.zoomSpeed*Tt)}function Ye(Ae){m.theta-=Ae}function at(Ae){m.phi-=Ae}const Et=function(){const Ae=new Le;return function(qt,Vt){Ae.setFromMatrixColumn(Vt,0),Ae.multiplyScalar(-qt),x.add(Ae)}}(),ue=function(){const Ae=new Le;return function(qt,Vt){r.screenSpacePanning===!0?Ae.setFromMatrixColumn(Vt,1):(Ae.setFromMatrixColumn(Vt,0),Ae.crossVectors(r.object.up,Ae)),Ae.multiplyScalar(qt),x.add(Ae)}}(),Ge=function(){const Ae=new Le;return function(qt,Vt){const ln=r.domElement;if(r.object.isPerspectiveCamera){const $n=r.object.position;Ae.copy($n).sub(r.target);let lr=Ae.length();lr*=Math.tan(r.object.fov/2*Math.PI/180),Et(2*qt*lr/ln.clientHeight,r.object.matrix),ue(2*Vt*lr/ln.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(Et(qt*(r.object.right-r.object.left)/r.object.zoom/ln.clientWidth,r.object.matrix),ue(Vt*(r.object.top-r.object.bottom)/r.object.zoom/ln.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function Te(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function it(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Ne(Ae,Tt){if(!r.zoomToCursor)return;q=!0;const qt=r.domElement.getBoundingClientRect(),Vt=Ae-qt.left,ln=Tt-qt.top,$n=qt.width,lr=qt.height;ye.x=Vt/$n*2-1,ye.y=-(ln/lr)*2+1,Q.set(ye.x,ye.y,1).unproject(r.object).sub(r.object.position).normalize()}function Xe(Ae){return Math.max(r.minDistance,Math.min(r.maxDistance,Ae))}function qe(Ae){E.set(Ae.clientX,Ae.clientY)}function ft(Ae){Ne(Ae.clientX,Ae.clientX),U.set(Ae.clientX,Ae.clientY)}function Ct(Ae){G.set(Ae.clientX,Ae.clientY)}function mt(Ae){k.set(Ae.clientX,Ae.clientY),D.subVectors(k,E).multiplyScalar(r.rotateSpeed);const Tt=r.domElement;Ye(2*Math.PI*D.x/Tt.clientHeight),at(2*Math.PI*D.y/Tt.clientHeight),E.copy(k),r.update()}function Pt(Ae){P.set(Ae.clientX,Ae.clientY),$.subVectors(P,U),$.y>0?Te(he($.y)):$.y<0&&it(he($.y)),U.copy(P),r.update()}function Rt(Ae){N.set(Ae.clientX,Ae.clientY),z.subVectors(N,G).multiplyScalar(r.panSpeed),Ge(z.x,z.y),G.copy(N),r.update()}function Jt(Ae){Ne(Ae.clientX,Ae.clientY),Ae.deltaY<0?it(he(Ae.deltaY)):Ae.deltaY>0&&Te(he(Ae.deltaY)),r.update()}function Yt(Ae){let Tt=!1;switch(Ae.code){case r.keys.UP:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?at(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Ge(0,r.keyPanSpeed),Tt=!0;break;case r.keys.BOTTOM:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?at(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Ge(0,-r.keyPanSpeed),Tt=!0;break;case r.keys.LEFT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?Ye(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Ge(r.keyPanSpeed,0),Tt=!0;break;case r.keys.RIGHT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?Ye(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Ge(-r.keyPanSpeed,0),Tt=!0;break}Tt&&(Ae.preventDefault(),r.update())}function In(Ae){if(ie.length===1)E.set(Ae.pageX,Ae.pageY);else{const Tt=sr(Ae),qt=.5*(Ae.pageX+Tt.x),Vt=.5*(Ae.pageY+Tt.y);E.set(qt,Vt)}}function Tn(Ae){if(ie.length===1)G.set(Ae.pageX,Ae.pageY);else{const Tt=sr(Ae),qt=.5*(Ae.pageX+Tt.x),Vt=.5*(Ae.pageY+Tt.y);G.set(qt,Vt)}}function bn(Ae){const Tt=sr(Ae),qt=Ae.pageX-Tt.x,Vt=Ae.pageY-Tt.y,ln=Math.sqrt(qt*qt+Vt*Vt);U.set(0,ln)}function On(Ae){r.enableZoom&&bn(Ae),r.enablePan&&Tn(Ae)}function lt(Ae){r.enableZoom&&bn(Ae),r.enableRotate&&In(Ae)}function ti(Ae){if(ie.length==1)k.set(Ae.pageX,Ae.pageY);else{const qt=sr(Ae),Vt=.5*(Ae.pageX+qt.x),ln=.5*(Ae.pageY+qt.y);k.set(Vt,ln)}D.subVectors(k,E).multiplyScalar(r.rotateSpeed);const Tt=r.domElement;Ye(2*Math.PI*D.x/Tt.clientHeight),at(2*Math.PI*D.y/Tt.clientHeight),E.copy(k)}function Mn(Ae){if(ie.length===1)N.set(Ae.pageX,Ae.pageY);else{const Tt=sr(Ae),qt=.5*(Ae.pageX+Tt.x),Vt=.5*(Ae.pageY+Tt.y);N.set(qt,Vt)}z.subVectors(N,G).multiplyScalar(r.panSpeed),Ge(z.x,z.y),G.copy(N)}function _n(Ae){const Tt=sr(Ae),qt=Ae.pageX-Tt.x,Vt=Ae.pageY-Tt.y,ln=Math.sqrt(qt*qt+Vt*Vt);P.set(0,ln),$.set(0,Math.pow(P.y/U.y,r.zoomSpeed)),Te($.y),U.copy(P);const $n=(Ae.pageX+Tt.x)*.5,lr=(Ae.pageY+Tt.y)*.5;Ne($n,lr)}function rn(Ae){r.enableZoom&&_n(Ae),r.enablePan&&Mn(Ae)}function Nr(Ae){r.enableZoom&&_n(Ae),r.enableRotate&&ti(Ae)}function En(Ae){r.enabled!==!1&&(ie.length===0&&(r.domElement.setPointerCapture(Ae.pointerId),r.domElement.addEventListener("pointermove",xe),r.domElement.addEventListener("pointerup",fe)),Dn(Ae),Ae.pointerType==="touch"?fn(Ae):dt(Ae))}function xe(Ae){r.enabled!==!1&&(Ae.pointerType==="touch"?en(Ae):Dt(Ae))}function fe(Ae){qn(Ae),ie.length===0&&(r.domElement.releasePointerCapture(Ae.pointerId),r.domElement.removeEventListener("pointermove",xe),r.domElement.removeEventListener("pointerup",fe)),r.dispatchEvent(Owe),o=i.NONE}function dt(Ae){let Tt;switch(Ae.button){case 0:Tt=r.mouseButtons.LEFT;break;case 1:Tt=r.mouseButtons.MIDDLE;break;case 2:Tt=r.mouseButtons.RIGHT;break;default:Tt=-1}switch(Tt){case B_.DOLLY:if(r.enableZoom===!1)return;ft(Ae),o=i.DOLLY;break;case B_.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enablePan===!1)return;Ct(Ae),o=i.PAN}else{if(r.enableRotate===!1)return;qe(Ae),o=i.ROTATE}break;case B_.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enableRotate===!1)return;qe(Ae),o=i.ROTATE}else{if(r.enablePan===!1)return;Ct(Ae),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(v9)}function Dt(Ae){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;mt(Ae);break;case i.DOLLY:if(r.enableZoom===!1)return;Pt(Ae);break;case i.PAN:if(r.enablePan===!1)return;Rt(Ae);break}}function Nt(Ae){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Ae.preventDefault(),r.dispatchEvent(v9),Jt(Ae),r.dispatchEvent(Owe))}function kt(Ae){r.enabled===!1||r.enablePan===!1||Yt(Ae)}function fn(Ae){switch(Lt(Ae),ie.length){case 1:switch(r.touches.ONE){case U_.ROTATE:if(r.enableRotate===!1)return;In(Ae),o=i.TOUCH_ROTATE;break;case U_.PAN:if(r.enablePan===!1)return;Tn(Ae),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case U_.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;On(Ae),o=i.TOUCH_DOLLY_PAN;break;case U_.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;lt(Ae),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(v9)}function en(Ae){switch(Lt(Ae),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;ti(Ae),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;Mn(Ae),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;rn(Ae),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Nr(Ae),r.update();break;default:o=i.NONE}}function sn(Ae){r.enabled!==!1&&Ae.preventDefault()}function Dn(Ae){ie.push(Ae.pointerId)}function qn(Ae){delete pe[Ae.pointerId];for(let Tt=0;Tt<ie.length;Tt++)if(ie[Tt]==Ae.pointerId){ie.splice(Tt,1);return}}function Lt(Ae){let Tt=pe[Ae.pointerId];Tt===void 0&&(Tt=new un,pe[Ae.pointerId]=Tt),Tt.set(Ae.pageX,Ae.pageY)}function sr(Ae){const Tt=Ae.pointerId===ie[0]?ie[1]:ie[0];return pe[Tt]}r.domElement.addEventListener("contextmenu",sn),r.domElement.addEventListener("pointerdown",En),r.domElement.addEventListener("pointercancel",fe),r.domElement.addEventListener("wheel",Nt,{passive:!1}),this.update()}}const KL=t=>{const[e,n]=Gt.useState(t.options[t.index]),r=()=>{t.onToggle(!t.open)},i=o=>{o!==e&&(t.onSelect(o),n(o)),t.onToggle(!1)};return _t.jsxs("div",{className:`dropdown ${t.up===!0?"up":""}`,children:[_t.jsx("div",{className:"dropdown-toggle",onClick:r,children:e}),t.open&&_t.jsx("ul",{className:"dropdown-menu",children:t.options.map(o=>_t.jsx("li",{onClick:()=>i(o),children:o},o))})]})},a0=Gt.forwardRef(function(e,n){const[r,i]=Gt.useState(!1),o=e.options.indexOf(e.camera.name);return _t.jsxs("div",{className:"CameraWindow",children:[_t.jsx("div",{ref:n,className:"clickable",onClick:()=>{r&&i(!1)}}),_t.jsx(KL,{index:o,open:r,options:e.options,onSelect:e.onSelect,onToggle:u=>{i(u)},up:!0})]})}),_nt=`out vec3 worldPosition;
uniform float uDistance;

void main() {
  // Scale the plane by the drawing distance
  worldPosition = position.xzy * uDistance;
  worldPosition.xz += cameraPosition.xz;

  gl_Position = projectionMatrix * modelViewMatrix * vec4(worldPosition, 1.0);
}`,wnt=`out vec4 fragColor;
in vec3 worldPosition;

uniform float uDivisions;
uniform float uScale;
uniform vec3 uColor;
uniform float uDistance;
uniform float uSubgridOpacity;
uniform float uGridOpacity;

float getGrid(float gapSize) {
  vec2 worldPositionByDivision = worldPosition.xz / gapSize;

  // Inverted, 0 where line, >1 where there's no line
  // We use the worldPosition (which in this case we use similarly to UVs) differential to control the anti-aliasing
  // We need to do the -0.5)-0.5 trick because the result fades out from 0 to 1, and we want both
  // worldPositionByDivision == 0.3 and worldPositionByDivision == 0.7 to result in the same fade, i.e. 0.3,
  // otherwise only one side of the line will be anti-aliased
  vec2 grid = abs(fract(worldPositionByDivision-0.5)-0.5) / fwidth(worldPositionByDivision) / 2.0;
  float gridLine = min(grid.x, grid.y);

  // Uninvert and clamp
  return 1.0 - min(gridLine, 1.0);
}

void main() {
  float cameraDistanceToGridPlane = distance(cameraPosition.y, worldPosition.y);
  float cameraDistanceToFragmentOnGridPlane = distance(cameraPosition.xz, worldPosition.xz);

  // The size of the grid and subgrid are powers of each other and they are determined based on camera distance.
  // The current grid will become the next subgrid when it becomes too small, and its next power becomes the new grid.
  float subGridPower = pow(uDivisions, floor(log(cameraDistanceToGridPlane) / log(uDivisions)));
  float gridPower = subGridPower * uDivisions;

  // If we want to fade both the grid and its subgrid, we need to displays 3 different opacities, with the next grid being the third
  float nextGridPower = gridPower * uDivisions;

  // 1 where grid, 0 where no grid
  float subgrid = getGrid(subGridPower * uScale);
  float grid = getGrid(gridPower * uScale);
  float nextGrid = getGrid(nextGridPower * uScale);

  // Where we are between the introduction of the current grid power and when we switch to the next grid power
  float stepPercentage = (cameraDistanceToGridPlane - subGridPower)/(gridPower - subGridPower);

  // The last x percentage of the current step over which we want to fade
  float fadeRange = 0.3;

  // We calculate the fade percentage from the step percentage and the fade range
  float fadePercentage = max(stepPercentage - 1.0 + fadeRange, 0.0) / fadeRange;

  // Set base opacity based on how close we are to the drawing distance, with a cubic falloff
  float baseOpacity = subgrid * pow(1.0 - min(cameraDistanceToFragmentOnGridPlane / uDistance, 1.0), 3.0);

  // Shade the subgrid
  fragColor = vec4(uColor.rgb, (baseOpacity - fadePercentage) * uSubgridOpacity);

  // Somewhat arbitrary additional fade coefficient to counter anti-aliasing popping when switching between grid powers
  float fadeCoefficient = 0.5;

  // Shade the grid
  fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity - fadePercentage * (uGridOpacity - uSubgridOpacity) * fadeCoefficient, grid);

  // Shade the next grid
  fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity, nextGrid);

  if (fragColor.a <= 0.0) discard;
}`;class xnt extends el{constructor(e){super({extensions:{derivatives:!0},glslVersion:vW,side:Ka,transparent:!0,uniforms:{uScale:{value:(e==null?void 0:e.scale)!==void 0?e==null?void 0:e.scale:.1},uDivisions:{value:(e==null?void 0:e.divisions)!==void 0?e==null?void 0:e.divisions:10},uColor:{value:(e==null?void 0:e.color)!==void 0?e==null?void 0:e.color:new Sn(16777215)},uDistance:{value:(e==null?void 0:e.distance)!==void 0?e==null?void 0:e.distance:1e4},uSubgridOpacity:{value:(e==null?void 0:e.subgridOpacity)!==void 0?e==null?void 0:e.subgridOpacity:.15},uGridOpacity:{value:(e==null?void 0:e.gridOpacity)!==void 0?e==null?void 0:e.gridOpacity:.25}},vertexShader:_nt,fragmentShader:wnt,name:"InfiniteGrid",depthWrite:!1})}}class Snt extends ks{constructor(){const n=new xnt;super(new bF(2,2),n);Jr(this,"gridMaterial");this.gridMaterial=n,this.frustumCulled=!1,this.name="InfiniteGridHelper",this.position.y=.1}update(){this.gridMaterial.needsUpdate=!0}}const Ent=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#if defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
}`,Cnt=`
#include <common>
#include <uv_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {
	#include <clipping_planes_fragment>
	gl_FragColor = vec4(vec3(vUv, 0.0), 1.0);
}`;class Pnt extends el{constructor(){super({defines:{USE_UV:""},vertexShader:Ent,fragmentShader:Cnt})}}const Nwe=["Single","Side by Side","Stacked","Quad"],Eo=new Map,$o=new Map,Kh=new Map;function J0(t,e){const n=new eM(-100,100,100,-100,50,3e3);return n.name=t,n.position.copy(e),n.lookAt(0,0,0),Eo.set(t,n),n}J0("Top",new Le(0,1e3,0));J0("Bottom",new Le(0,-1e3,0));J0("Left",new Le(-1e3,0,0));J0("Right",new Le(1e3,0,0));J0("Front",new Le(0,0,1e3));J0("Back",new Le(0,0,-1e3));J0("Orthographic",new Le(1e3,1e3,1e3));const YF=new Us(60,1,50,3e3);YF.name="Debug";YF.position.set(500,500,500);YF.lookAt(0,0,0);Eo.set("Debug",YF);const Fwe=["Renderer","Depth","Normals","UVs","Wireframe"],Tnt=new SSe,Mnt=new J6e,knt=new Pnt,Ant=new xT({opacity:.33,transparent:!0,wireframe:!0});let EL="Renderer";const Hi=new ST;Hi.name="Debug Scene";let qh=new ST;Hi.add(qh);const SM=new _0;SM.name="helpers";Hi.add(SM);const Int=new Snt;SM.add(Int);const tMe=new FSe(500);tMe.name="axisHelper";SM.add(tMe);const GT=new FSe(100);GT.name="interactionHelper";SM.add(GT);GT.visible=!1;let CL=!1,ji=Eo.get("Debug"),Ko=Eo.get("Orthographic"),l0=Eo.get("Front"),u0=Eo.get("Top"),Bwe=!1;function Rnt(t){const[e,n]=Gt.useState(t.mode!==void 0?t.mode:"Single"),[r,i]=Gt.useState(null),[o,u]=Gt.useState(!1),[h,m]=Gt.useState(!1),[v,x]=Gt.useState(!1),[,E]=Gt.useState(Date.now()),k=Gt.useRef(null),D=Gt.useRef(null),G=Gt.useRef(null),N=Gt.useRef(null),z=Gt.useRef(null),U=Gt.useRef(null),P=(ie,pe)=>{const W=$o.get(ie.name);W!==void 0&&W.dispose(),$o.delete(ie.name);const he=Kh.get(ie.name);he!==void 0&&(Hi.remove(he),he.dispose()),Kh.delete(ie.name);const Ye=new bnt(ie,pe);switch(Ye.enableDamping=!0,Ye.dampingFactor=.05,ie.name){case"Top":case"Bottom":case"Left":case"Right":case"Front":case"Back":Ye.enableRotate=!1;break}if($o.set(ie.name,Ye),ie instanceof Us){const at=new N8e(ie);Kh.set(ie.name,at),Hi.add(at)}},$=ie=>{const pe=Kh.get(ie.name);pe!==void 0&&(Hi.remove(pe),pe.dispose(),Kh.delete(ie.name));const W=$o.get(ie.name);W!==void 0&&(W.dispose(),$o.delete(ie.name))},Q=()=>{$o.forEach((ie,pe)=>{ie.dispose();const W=Kh.get(pe);W!==void 0&&(Hi.remove(W),W.dispose()),Kh.delete(pe),$o.delete(pe)}),$o.clear(),Kh.clear()},ye=()=>{switch(e){case"Single":P(ji,G.current);break;case"Side by Side":case"Stacked":P(ji,G.current),P(Ko,N.current);break;case"Quad":P(ji,G.current),P(Ko,N.current),P(l0,z.current),P(u0,U.current);break}};Gt.useEffect(()=>{const ie=new l7({canvas:k.current,stencil:!1});ie.autoClear=!1,ie.shadowMap.enabled=!0,ie.setPixelRatio(devicePixelRatio),ie.setClearColor(0),i(ie)},[]),Gt.useEffect(()=>{const ie=he=>{IN(qh),Hi.remove(qh);const Ye=t.scenes.get(he.value.name);if(Ye!==void 0){const at=new Ye;t.onSceneSet!==void 0&&t.onSceneSet(at),qh=at,t.three.scene=qh,Hi.add(qh),Bwe=!0}},pe=he=>{var Et;const Ye=he.value,at=(Et=t.three.scene)==null?void 0:Et.getObjectByProperty("uuid",Ye.uuid);at!==void 0&&Eo.set(Ye.name,at),E(Date.now())},W=he=>{Eo.delete(he.value.name),E(Date.now())};return _r.addEventListener(wr.SET_SCENE,ie),_r.addEventListener(wr.ADD_CAMERA,pe),_r.addEventListener(wr.REMOVE_CAMERA,W),()=>{_r.removeEventListener(wr.SET_SCENE,ie),_r.removeEventListener(wr.ADD_CAMERA,pe),_r.removeEventListener(wr.REMOVE_CAMERA,W)}},[]),Gt.useEffect(()=>{if(r===null)return;let ie=window.innerWidth,pe=window.innerHeight,W=Math.floor(ie/2),he=Math.floor(pe/2),Ye=-1;const at=()=>{ie=window.innerWidth-300,pe=window.innerHeight,W=Math.floor(ie/2),he=Math.floor(pe/2),r.setSize(ie,pe);let it=ie,Ne=pe;switch(e){case"Side by Side":it=W,Ne=pe;break;case"Stacked":it=ie,Ne=he;break;case"Quad":it=W,Ne=he;break}Eo.forEach(Xe=>{var qe;Xe instanceof eM?(Xe.left=it/-2,Xe.right=it/2,Xe.top=Ne/2,Xe.bottom=Ne/-2,Xe.updateProjectionMatrix()):Xe instanceof Us&&(Xe.aspect=it/Ne,Xe.updateProjectionMatrix(),(qe=Kh.get(Xe.name))==null||qe.update())})},Et=()=>{r.setViewport(0,0,ie,pe),r.setScissor(0,0,ie,pe),r.render(Hi,ji)},ue=()=>{if(e==="Side by Side")r.setViewport(0,0,W,pe),r.setScissor(0,0,W,pe),r.render(Hi,ji),r.setViewport(W,0,W,pe),r.setScissor(W,0,W,pe),r.render(Hi,Ko);else{const it=pe-he;r.setViewport(0,it,ie,he),r.setScissor(0,it,ie,he),r.render(Hi,ji),r.setViewport(0,0,ie,he),r.setScissor(0,0,ie,he),r.render(Hi,Ko)}},Ge=()=>{let it=0,Ne=0;Ne=pe-he,it=0,r.setViewport(it,Ne,W,he),r.setScissor(it,Ne,W,he),r.render(Hi,ji),it=W,r.setViewport(it,Ne,W,he),r.setScissor(it,Ne,W,he),r.render(Hi,Ko),Ne=0,it=0,r.setViewport(it,Ne,W,he),r.setScissor(it,Ne,W,he),r.render(Hi,l0),it=W,r.setViewport(it,Ne,W,he),r.setScissor(it,Ne,W,he),r.render(Hi,u0)},Te=()=>{switch($o.forEach(it=>{it.update()}),t.onSceneUpdate!==void 0&&Bwe&&t.onSceneUpdate(qh),r.clear(),e){case"Single":Et();break;case"Side by Side":case"Stacked":ue();break;case"Quad":Ge();break}Ye=requestAnimationFrame(Te)};return ye(),window.addEventListener("resize",at),at(),Te(),()=>{window.removeEventListener("resize",at),cancelAnimationFrame(Ye),Ye=-1}},[e,r]),Gt.useEffect(()=>{if(r!==null){const ie=new L8e,pe=new un,W=(Et,ue,Ge,Te)=>{switch(e){case"Quad":Et<Ge?ue<Te?ie.setFromCamera(pe,ji):ie.setFromCamera(pe,l0):ue<Te?ie.setFromCamera(pe,Ko):ie.setFromCamera(pe,u0);break;case"Side by Side":Et<Ge?ie.setFromCamera(pe,ji):ie.setFromCamera(pe,Ko);break;case"Single":ie.setFromCamera(pe,ji);break;case"Stacked":ue<Te?ie.setFromCamera(pe,ji):ie.setFromCamera(pe,Ko);break}},he=Et=>{if(!CL)return;const ue=new un;r.getSize(ue);const Ge=Math.min(Et.clientX,ue.x),Te=Math.min(Et.clientY,ue.y);pe.x=lw(Ge,0,ue.x,-1,1),pe.y=lw(Te,0,ue.y,1,-1);const it=ue.x/2,Ne=ue.y/2,Xe=()=>{Ge<it?pe.x=lw(Ge,0,it,-1,1):pe.x=lw(Ge,it,ue.x,-1,1)},qe=()=>{Te<Ne?pe.y=lw(Te,0,Ne,1,-1):pe.y=lw(Te,Ne,ue.y,1,-1)};switch(e){case"Quad":Xe(),qe();break;case"Side by Side":Xe();break;case"Stacked":qe(),qe();break}W(Ge,Te,it,Ne);const ft=ie.intersectObjects(qh.children);ft.length>0&&GT.position.copy(ft[0].point)},Ye=Et=>{if(!CL)return;const ue=new un;if(r.getSize(ue),Et.clientX>=ue.x)return;he(Et);const Ge=ie.intersectObjects(qh.children);Ge.length>0&&t.three.getObject(Ge[0].object.uuid)},at=D.current;return at.addEventListener("mousemove",he,!1),at.addEventListener("click",Ye,!1),()=>{at.removeEventListener("mousemove",he),at.removeEventListener("click",Ye)}}},[e,r]);const q=[];return Eo.forEach((ie,pe)=>{q.push(pe)}),_t.jsxs("div",{className:"multiview",children:[_t.jsx("canvas",{ref:k}),_t.jsxs("div",{className:`cameras ${e==="Single"||e==="Stacked"?"single":""}`,ref:D,children:[e==="Single"&&_t.jsx(_t.Fragment,{children:_t.jsx(a0,{camera:ji,options:q,ref:G,onSelect:ie=>{var W;(W=$o.get(ji.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(ji),ji=pe,P(pe,G.current))}})}),(e==="Side by Side"||e==="Stacked")&&_t.jsxs(_t.Fragment,{children:[_t.jsx(a0,{camera:ji,options:q,ref:G,onSelect:ie=>{var W;(W=$o.get(ji.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(ji),ji=pe,P(pe,G.current))}}),_t.jsx(a0,{camera:Ko,options:q,ref:N,onSelect:ie=>{var W;(W=$o.get(Ko.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(Ko),Ko=pe,P(pe,N.current))}})]}),e==="Quad"&&_t.jsxs(_t.Fragment,{children:[_t.jsx(a0,{camera:ji,options:q,ref:G,onSelect:ie=>{var W;(W=$o.get(ji.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(ji),ji=pe,P(pe,G.current))}}),_t.jsx(a0,{camera:Ko,options:q,ref:N,onSelect:ie=>{var W;(W=$o.get(Ko.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(Ko),Ko=pe,P(pe,N.current))}}),_t.jsx(a0,{camera:l0,options:q,ref:z,onSelect:ie=>{var W;(W=$o.get(l0.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(l0),l0=pe,P(pe,z.current))}}),_t.jsx(a0,{camera:u0,options:q,ref:U,onSelect:ie=>{var W;(W=$o.get(u0.name))==null||W.dispose();const pe=Eo.get(ie);pe!==void 0&&($(u0),u0=pe,P(pe,U.current))}})]})]}),_t.jsxs("div",{className:"settings",children:[_t.jsx(KL,{index:Nwe.indexOf(e),options:Nwe,onSelect:ie=>{ie!==e&&(Q(),n(ie))},open:o,onToggle:ie=>{u(ie),h&&m(!1),v&&x(!1)}}),_t.jsx(KL,{index:Fwe.indexOf(EL),options:Fwe,onSelect:ie=>{if(ie!==EL)switch(EL=ie,EL){case"Depth":Hi.overrideMaterial=Tnt;break;case"Normals":Hi.overrideMaterial=Mnt;break;default:case"Renderer":Hi.overrideMaterial=null;break;case"Wireframe":Hi.overrideMaterial=Ant;break;case"UVs":Hi.overrideMaterial=knt;break}},open:h,onToggle:ie=>{o&&u(!1),m(ie),v&&x(!1)}}),_t.jsx(KL,{index:0,options:["Orbit Mode","Selection Mode"],onSelect:ie=>{CL=ie==="Selection Mode",GT.visible=CL},open:v,onToggle:ie=>{o&&u(!1),h&&m(!1),x(ie)}})]})]})}const XK=new Map;XK.set("Scene1",TPe);XK.set("Scene2",MPe);function Dnt(){return _t.jsxs(MZe,{header:[_t.jsx(JTe,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:t=>{fi.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:t}})}},"Scenes")],children:[_t.jsx(Rnt,{three:fi.three,scenes:XK,onSceneUpdate:t=>{t.update()}}),_t.jsx(vnt,{three:fi.three})]})}function Ont(t,e,n){function r(o){switch(e.forEach(u=>u(t,o)),o.event){case"custom":_r.dispatchEvent({type:wr.CUSTOM,value:o.data});break}}function i(o){switch(n.forEach(u=>u(t,o)),o.event){case"custom":_r.dispatchEvent({type:wr.CUSTOM,value:o.data});break}}t.listen(o=>{t.editor?i(o):r(o)})}{Bw.initialize();const t=[B8e,G8e,Y8e,vqe],e=[Z8e];W8e(fi),Ont(fi,t,e)}y9.createRoot(document.getElementById("root")).render(_t.jsx(_t.Fragment,{children:_t.jsxs(_t.Fragment,{children:[_t.jsx(TZe,{}),fi.editor?_t.jsx(Dnt,{}):null]})}));
