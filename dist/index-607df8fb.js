var bIe=Object.defineProperty;var _Ie=(t,e,n)=>e in t?bIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yr=(t,e,n)=>(_Ie(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xge(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sge={exports:{}},pI={},Ege={exports:{}},Tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_=Symbol.for("react.element"),wIe=Symbol.for("react.portal"),xIe=Symbol.for("react.fragment"),SIe=Symbol.for("react.strict_mode"),EIe=Symbol.for("react.profiler"),CIe=Symbol.for("react.provider"),PIe=Symbol.for("react.context"),TIe=Symbol.for("react.forward_ref"),MIe=Symbol.for("react.suspense"),kIe=Symbol.for("react.memo"),AIe=Symbol.for("react.lazy"),$me=Symbol.iterator;function IIe(t){return t===null||typeof t!="object"?null:(t=$me&&t[$me]||t["@@iterator"],typeof t=="function"?t:null)}var Cge={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pge=Object.assign,Tge={};function fg(t,e,n){this.props=t,this.context=e,this.refs=Tge,this.updater=n||Cge}fg.prototype.isReactComponent={};fg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mge(){}Mge.prototype=fg.prototype;function xW(t,e,n){this.props=t,this.context=e,this.refs=Tge,this.updater=n||Cge}var SW=xW.prototype=new Mge;SW.constructor=xW;Pge(SW,fg.prototype);SW.isPureReactComponent=!0;var Kme=Array.isArray,kge=Object.prototype.hasOwnProperty,EW={current:null},Age={key:!0,ref:!0,__self:!0,__source:!0};function Ige(t,e,n){var r,i={},o=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(o=""+e.key),e)kge.call(e,r)&&!Age.hasOwnProperty(r)&&(i[r]=e[r]);var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){for(var f=Array(d),v=0;v<d;v++)f[v]=arguments[v+2];i.children=f}if(t&&t.defaultProps)for(r in d=t.defaultProps,d)i[r]===void 0&&(i[r]=d[r]);return{$$typeof:a_,type:t,key:o,ref:u,props:i,_owner:EW.current}}function RIe(t,e){return{$$typeof:a_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function CW(t){return typeof t=="object"&&t!==null&&t.$$typeof===a_}function DIe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xme=/\/+/g;function LV(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DIe(""+t.key):e.toString(36)}function zk(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case a_:case wIe:u=!0}}if(u)return u=t,i=i(u),t=r===""?"."+LV(u,0):r,Kme(i)?(n="",t!=null&&(n=t.replace(Xme,"$&/")+"/"),zk(i,e,n,"",function(v){return v})):i!=null&&(CW(i)&&(i=RIe(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(Xme,"$&/")+"/")+t)),e.push(i)),1;if(u=0,r=r===""?".":r+":",Kme(t))for(var d=0;d<t.length;d++){o=t[d];var f=r+LV(o,d);u+=zk(o,e,n,f,i)}else if(f=IIe(t),typeof f=="function")for(t=f.call(t),d=0;!(o=t.next()).done;)o=o.value,f=r+LV(o,d++),u+=zk(o,e,n,f,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function LM(t,e,n){if(t==null)return t;var r=[],i=0;return zk(t,r,"","",function(o){return e.call(n,o,i++)}),r}function OIe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Da={current:null},Vk={transition:null},LIe={ReactCurrentDispatcher:Da,ReactCurrentBatchConfig:Vk,ReactCurrentOwner:EW};Tr.Children={map:LM,forEach:function(t,e,n){LM(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return LM(t,function(){e++}),e},toArray:function(t){return LM(t,function(e){return e})||[]},only:function(t){if(!CW(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Tr.Component=fg;Tr.Fragment=xIe;Tr.Profiler=EIe;Tr.PureComponent=xW;Tr.StrictMode=SIe;Tr.Suspense=MIe;Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LIe;Tr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Pge({},t.props),i=t.key,o=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,u=EW.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(f in e)kge.call(e,f)&&!Age.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&d!==void 0?d[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){d=Array(f);for(var v=0;v<f;v++)d[v]=arguments[v+2];r.children=d}return{$$typeof:a_,type:t.type,key:i,ref:o,props:r,_owner:u}};Tr.createContext=function(t){return t={$$typeof:PIe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CIe,_context:t},t.Consumer=t};Tr.createElement=Ige;Tr.createFactory=function(t){var e=Ige.bind(null,t);return e.type=t,e};Tr.createRef=function(){return{current:null}};Tr.forwardRef=function(t){return{$$typeof:TIe,render:t}};Tr.isValidElement=CW;Tr.lazy=function(t){return{$$typeof:AIe,_payload:{_status:-1,_result:t},_init:OIe}};Tr.memo=function(t,e){return{$$typeof:kIe,type:t,compare:e===void 0?null:e}};Tr.startTransition=function(t){var e=Vk.transition;Vk.transition={};try{t()}finally{Vk.transition=e}};Tr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Tr.useCallback=function(t,e){return Da.current.useCallback(t,e)};Tr.useContext=function(t){return Da.current.useContext(t)};Tr.useDebugValue=function(){};Tr.useDeferredValue=function(t){return Da.current.useDeferredValue(t)};Tr.useEffect=function(t,e){return Da.current.useEffect(t,e)};Tr.useId=function(){return Da.current.useId()};Tr.useImperativeHandle=function(t,e,n){return Da.current.useImperativeHandle(t,e,n)};Tr.useInsertionEffect=function(t,e){return Da.current.useInsertionEffect(t,e)};Tr.useLayoutEffect=function(t,e){return Da.current.useLayoutEffect(t,e)};Tr.useMemo=function(t,e){return Da.current.useMemo(t,e)};Tr.useReducer=function(t,e,n){return Da.current.useReducer(t,e,n)};Tr.useRef=function(t){return Da.current.useRef(t)};Tr.useState=function(t){return Da.current.useState(t)};Tr.useSyncExternalStore=function(t,e,n){return Da.current.useSyncExternalStore(t,e,n)};Tr.useTransition=function(){return Da.current.useTransition()};Tr.version="18.2.0";Ege.exports=Tr;var Et=Ege.exports;const Rge=xge(Et);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NIe=Et,FIe=Symbol.for("react.element"),BIe=Symbol.for("react.fragment"),UIe=Object.prototype.hasOwnProperty,zIe=NIe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VIe={key:!0,ref:!0,__self:!0,__source:!0};function Dge(t,e,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)UIe.call(e,r)&&!VIe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FIe,type:t,key:o,ref:u,props:i,_owner:zIe.current}}pI.Fragment=BIe;pI.jsx=Dge;pI.jsxs=Dge;Sge.exports=pI;var Ke=Sge.exports,RH={},Oge={exports:{}},T0={},Lge={exports:{}},Nge={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(We,tt){var Ze=We.length;We.push(tt);e:for(;0<Ze;){var dt=Ze-1>>>1,At=We[dt];if(0<i(At,tt))We[dt]=tt,We[Ze]=At,Ze=dt;else break e}}function n(We){return We.length===0?null:We[0]}function r(We){if(We.length===0)return null;var tt=We[0],Ze=We.pop();if(Ze!==tt){We[0]=Ze;e:for(var dt=0,At=We.length,pn=At>>>1;dt<pn;){var et=2*(dt+1)-1,wt=We[et],Zt=et+1,rn=We[Zt];if(0>i(wt,Ze))Zt<At&&0>i(rn,wt)?(We[dt]=rn,We[Zt]=Ze,dt=Zt):(We[dt]=wt,We[et]=Ze,dt=et);else if(Zt<At&&0>i(rn,Ze))We[dt]=rn,We[Zt]=Ze,dt=Zt;else break e}}return tt}function i(We,tt){var Ze=We.sortIndex-tt.sortIndex;return Ze!==0?Ze:We.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],v=[],x=1,S=null,M=3,D=!1,G=!1,B=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(We){for(var tt=n(v);tt!==null;){if(tt.callback===null)r(v);else if(tt.startTime<=We)r(v),tt.sortIndex=tt.expirationTime,e(f,tt);else break;tt=n(v)}}function X(We){if(B=!1,H(We),!G)if(n(f)!==null)G=!0,Me(fe);else{var tt=n(v);tt!==null&&Ct(X,tt.startTime-We)}}function fe(We,tt){G=!1,B&&(B=!1,U(xe),xe=-1),D=!0;var Ze=M;try{for(H(tt),S=n(f);S!==null&&(!(S.expirationTime>tt)||We&&!Pe());){var dt=S.callback;if(typeof dt=="function"){S.callback=null,M=S.priorityLevel;var At=dt(S.expirationTime<=tt);tt=t.unstable_now(),typeof At=="function"?S.callback=At:S===n(f)&&r(f),H(tt)}else r(f);S=n(f)}if(S!==null)var pn=!0;else{var et=n(v);et!==null&&Ct(X,et.startTime-tt),pn=!1}return pn}finally{S=null,M=Ze,D=!1}}var q=!1,pe=null,xe=-1,J=5,ne=-1;function Pe(){return!(t.unstable_now()-ne<J)}function mt(){if(pe!==null){var We=t.unstable_now();ne=We;var tt=!0;try{tt=pe(!0,We)}finally{tt?_t():(q=!1,pe=null)}}else q=!1}var _t;if(typeof C=="function")_t=function(){C(mt)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,je=de.port2;de.port1.onmessage=mt,_t=function(){je.postMessage(null)}}else _t=function(){L(mt,0)};function Me(We){pe=We,q||(q=!0,_t())}function Ct(We,tt){xe=L(function(){We(t.unstable_now())},tt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(We){We.callback=null},t.unstable_continueExecution=function(){G||D||(G=!0,Me(fe))},t.unstable_forceFrameRate=function(We){0>We||125<We?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<We?Math.floor(1e3/We):5},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(We){switch(M){case 1:case 2:case 3:var tt=3;break;default:tt=M}var Ze=M;M=tt;try{return We()}finally{M=Ze}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(We,tt){switch(We){case 1:case 2:case 3:case 4:case 5:break;default:We=3}var Ze=M;M=We;try{return tt()}finally{M=Ze}},t.unstable_scheduleCallback=function(We,tt,Ze){var dt=t.unstable_now();switch(typeof Ze=="object"&&Ze!==null?(Ze=Ze.delay,Ze=typeof Ze=="number"&&0<Ze?dt+Ze:dt):Ze=dt,We){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=Ze+At,We={id:x++,callback:tt,priorityLevel:We,startTime:Ze,expirationTime:At,sortIndex:-1},Ze>dt?(We.sortIndex=Ze,e(v,We),n(f)===null&&We===n(v)&&(B?(U(xe),xe=-1):B=!0,Ct(X,Ze-dt))):(We.sortIndex=At,e(f,We),G||D||(G=!0,Me(fe))),We},t.unstable_shouldYield=Pe,t.unstable_wrapCallback=function(We){var tt=M;return function(){var Ze=M;M=tt;try{return We.apply(this,arguments)}finally{M=Ze}}}})(Nge);Lge.exports=Nge;var jIe=Lge.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fge=Et,E0=jIe;function Yt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bge=new Set,yb={};function q2(t,e){Z4(t,e),Z4(t+"Capture",e)}function Z4(t,e){for(yb[t]=e,t=0;t<e.length;t++)Bge.add(e[t])}var hh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),DH=Object.prototype.hasOwnProperty,HIe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qme={},Yme={};function GIe(t){return DH.call(Yme,t)?!0:DH.call(qme,t)?!1:HIe.test(t)?Yme[t]=!0:(qme[t]=!0,!1)}function WIe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $Ie(t,e,n,r){if(e===null||typeof e>"u"||WIe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oa(t,e,n,r,i,o,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=u}var Io={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Io[t]=new Oa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Io[e]=new Oa(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Io[t]=new Oa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Io[t]=new Oa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Io[t]=new Oa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Io[t]=new Oa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Io[t]=new Oa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Io[t]=new Oa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Io[t]=new Oa(t,5,!1,t.toLowerCase(),null,!1,!1)});var PW=/[\-:]([a-z])/g;function TW(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(PW,TW);Io[e]=new Oa(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(PW,TW);Io[e]=new Oa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(PW,TW);Io[e]=new Oa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Io[t]=new Oa(t,1,!1,t.toLowerCase(),null,!1,!1)});Io.xlinkHref=new Oa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Io[t]=new Oa(t,1,!1,t.toLowerCase(),null,!0,!0)});function MW(t,e,n,r){var i=Io.hasOwnProperty(e)?Io[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($Ie(e,n,i,r)&&(n=null),r||i===null?GIe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wh=Fge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,NM=Symbol.for("react.element"),v4=Symbol.for("react.portal"),y4=Symbol.for("react.fragment"),kW=Symbol.for("react.strict_mode"),OH=Symbol.for("react.profiler"),Uge=Symbol.for("react.provider"),zge=Symbol.for("react.context"),AW=Symbol.for("react.forward_ref"),LH=Symbol.for("react.suspense"),NH=Symbol.for("react.suspense_list"),IW=Symbol.for("react.memo"),xf=Symbol.for("react.lazy"),Vge=Symbol.for("react.offscreen"),Zme=Symbol.iterator;function gy(t){return t===null||typeof t!="object"?null:(t=Zme&&t[Zme]||t["@@iterator"],typeof t=="function"?t:null)}var es=Object.assign,NV;function Gy(t){if(NV===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);NV=e&&e[1]||""}return`
`+NV+t}var FV=!1;function BV(t,e){if(!t||FV)return"";FV=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var r=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){r=v}t.call(e.prototype)}else{try{throw Error()}catch(v){r=v}t()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,d=o.length-1;1<=u&&0<=d&&i[u]!==o[d];)d--;for(;1<=u&&0<=d;u--,d--)if(i[u]!==o[d]){if(u!==1||d!==1)do if(u--,d--,0>d||i[u]!==o[d]){var f=`
`+i[u].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=u&&0<=d);break}}}finally{FV=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gy(t):""}function KIe(t){switch(t.tag){case 5:return Gy(t.type);case 16:return Gy("Lazy");case 13:return Gy("Suspense");case 19:return Gy("SuspenseList");case 0:case 2:case 15:return t=BV(t.type,!1),t;case 11:return t=BV(t.type.render,!1),t;case 1:return t=BV(t.type,!0),t;default:return""}}function FH(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case y4:return"Fragment";case v4:return"Portal";case OH:return"Profiler";case kW:return"StrictMode";case LH:return"Suspense";case NH:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zge:return(t.displayName||"Context")+".Consumer";case Uge:return(t._context.displayName||"Context")+".Provider";case AW:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case IW:return e=t.displayName||null,e!==null?e:FH(t.type)||"Memo";case xf:e=t._payload,t=t._init;try{return FH(t(e))}catch{}}return null}function XIe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return FH(e);case 8:return e===kW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jge(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qIe(t){var e=jge(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function FM(t){t._valueTracker||(t._valueTracker=qIe(t))}function Hge(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jge(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lA(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function BH(t,e){var n=e.checked;return es({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qme(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gge(t,e){e=e.checked,e!=null&&MW(t,"checked",e,!1)}function UH(t,e){Gge(t,e);var n=qf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zH(t,e.type,n):e.hasOwnProperty("defaultValue")&&zH(t,e.type,qf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jme(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zH(t,e,n){(e!=="number"||lA(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wy=Array.isArray;function U4(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qf(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function VH(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Yt(91));return es({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e2e(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Yt(92));if(Wy(n)){if(1<n.length)throw Error(Yt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qf(n)}}function Wge(t,e){var n=qf(e.value),r=qf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function t2e(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $ge(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jH(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$ge(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var BM,Kge=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(BM=BM||document.createElement("div"),BM.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=BM.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bb(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YIe=["Webkit","ms","Moz","O"];Object.keys(Qy).forEach(function(t){YIe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qy[e]=Qy[t]})});function Xge(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qy.hasOwnProperty(t)&&Qy[t]?(""+e).trim():e+"px"}function qge(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Xge(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ZIe=es({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HH(t,e){if(e){if(ZIe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Yt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Yt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Yt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Yt(62))}}function GH(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WH=null;function RW(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $H=null,z4=null,V4=null;function n2e(t){if(t=c_(t)){if(typeof $H!="function")throw Error(Yt(280));var e=t.stateNode;e&&(e=yI(e),$H(t.stateNode,t.type,e))}}function Yge(t){z4?V4?V4.push(t):V4=[t]:z4=t}function Zge(){if(z4){var t=z4,e=V4;if(V4=z4=null,n2e(t),e)for(t=0;t<e.length;t++)n2e(e[t])}}function Qge(t,e){return t(e)}function Jge(){}var UV=!1;function eve(t,e,n){if(UV)return t(e,n);UV=!0;try{return Qge(t,e,n)}finally{UV=!1,(z4!==null||V4!==null)&&(Jge(),Zge())}}function _b(t,e){var n=t.stateNode;if(n===null)return null;var r=yI(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Yt(231,e,typeof n));return n}var KH=!1;if(hh)try{var vy={};Object.defineProperty(vy,"passive",{get:function(){KH=!0}}),window.addEventListener("test",vy,vy),window.removeEventListener("test",vy,vy)}catch{KH=!1}function QIe(t,e,n,r,i,o,u,d,f){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(x){this.onError(x)}}var Jy=!1,uA=null,cA=!1,XH=null,JIe={onError:function(t){Jy=!0,uA=t}};function eRe(t,e,n,r,i,o,u,d,f){Jy=!1,uA=null,QIe.apply(JIe,arguments)}function tRe(t,e,n,r,i,o,u,d,f){if(eRe.apply(this,arguments),Jy){if(Jy){var v=uA;Jy=!1,uA=null}else throw Error(Yt(198));cA||(cA=!0,XH=v)}}function Y2(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tve(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function r2e(t){if(Y2(t)!==t)throw Error(Yt(188))}function nRe(t){var e=t.alternate;if(!e){if(e=Y2(t),e===null)throw Error(Yt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return r2e(i),t;if(o===r)return r2e(i),e;o=o.sibling}throw Error(Yt(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,d=i.child;d;){if(d===n){u=!0,n=i,r=o;break}if(d===r){u=!0,r=i,n=o;break}d=d.sibling}if(!u){for(d=o.child;d;){if(d===n){u=!0,n=o,r=i;break}if(d===r){u=!0,r=o,n=i;break}d=d.sibling}if(!u)throw Error(Yt(189))}}if(n.alternate!==r)throw Error(Yt(190))}if(n.tag!==3)throw Error(Yt(188));return n.stateNode.current===n?t:e}function nve(t){return t=nRe(t),t!==null?rve(t):null}function rve(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rve(t);if(e!==null)return e;t=t.sibling}return null}var ive=E0.unstable_scheduleCallback,i2e=E0.unstable_cancelCallback,rRe=E0.unstable_shouldYield,iRe=E0.unstable_requestPaint,Cs=E0.unstable_now,sRe=E0.unstable_getCurrentPriorityLevel,DW=E0.unstable_ImmediatePriority,sve=E0.unstable_UserBlockingPriority,dA=E0.unstable_NormalPriority,oRe=E0.unstable_LowPriority,ove=E0.unstable_IdlePriority,fI=null,Tc=null;function aRe(t){if(Tc&&typeof Tc.onCommitFiberRoot=="function")try{Tc.onCommitFiberRoot(fI,t,void 0,(t.current.flags&128)===128)}catch{}}var wu=Math.clz32?Math.clz32:cRe,lRe=Math.log,uRe=Math.LN2;function cRe(t){return t>>>=0,t===0?32:31-(lRe(t)/uRe|0)|0}var UM=64,zM=4194304;function $y(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hA(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,u=n&268435455;if(u!==0){var d=u&~i;d!==0?r=$y(d):(o&=u,o!==0&&(r=$y(o)))}else u=n&~i,u!==0?r=$y(u):o!==0&&(r=$y(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wu(e),i=1<<n,r|=t[n],e&=~i;return r}function dRe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hRe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var u=31-wu(o),d=1<<u,f=i[u];f===-1?(!(d&n)||d&r)&&(i[u]=dRe(d,e)):f<=e&&(t.expiredLanes|=d),o&=~d}}function qH(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ave(){var t=UM;return UM<<=1,!(UM&4194240)&&(UM=64),t}function zV(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function l_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wu(e),t[e]=n}function pRe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wu(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function OW(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wu(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var si=0;function lve(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uve,LW,cve,dve,hve,YH=!1,VM=[],Of=null,Lf=null,Nf=null,wb=new Map,xb=new Map,Pf=[],fRe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s2e(t,e){switch(t){case"focusin":case"focusout":Of=null;break;case"dragenter":case"dragleave":Lf=null;break;case"mouseover":case"mouseout":Nf=null;break;case"pointerover":case"pointerout":wb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xb.delete(e.pointerId)}}function yy(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=c_(e),e!==null&&LW(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mRe(t,e,n,r,i){switch(e){case"focusin":return Of=yy(Of,t,e,n,r,i),!0;case"dragenter":return Lf=yy(Lf,t,e,n,r,i),!0;case"mouseover":return Nf=yy(Nf,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return wb.set(o,yy(wb.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xb.set(o,yy(xb.get(o)||null,t,e,n,r,i)),!0}return!1}function pve(t){var e=y2(t.target);if(e!==null){var n=Y2(e);if(n!==null){if(e=n.tag,e===13){if(e=tve(n),e!==null){t.blockedOn=e,hve(t.priority,function(){cve(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jk(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ZH(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);WH=r,n.target.dispatchEvent(r),WH=null}else return e=c_(n),e!==null&&LW(e),t.blockedOn=n,!1;e.shift()}return!0}function o2e(t,e,n){jk(t)&&n.delete(e)}function gRe(){YH=!1,Of!==null&&jk(Of)&&(Of=null),Lf!==null&&jk(Lf)&&(Lf=null),Nf!==null&&jk(Nf)&&(Nf=null),wb.forEach(o2e),xb.forEach(o2e)}function by(t,e){t.blockedOn===e&&(t.blockedOn=null,YH||(YH=!0,E0.unstable_scheduleCallback(E0.unstable_NormalPriority,gRe)))}function Sb(t){function e(i){return by(i,t)}if(0<VM.length){by(VM[0],t);for(var n=1;n<VM.length;n++){var r=VM[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Of!==null&&by(Of,t),Lf!==null&&by(Lf,t),Nf!==null&&by(Nf,t),wb.forEach(e),xb.forEach(e),n=0;n<Pf.length;n++)r=Pf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pf.length&&(n=Pf[0],n.blockedOn===null);)pve(n),n.blockedOn===null&&Pf.shift()}var j4=wh.ReactCurrentBatchConfig,pA=!0;function vRe(t,e,n,r){var i=si,o=j4.transition;j4.transition=null;try{si=1,NW(t,e,n,r)}finally{si=i,j4.transition=o}}function yRe(t,e,n,r){var i=si,o=j4.transition;j4.transition=null;try{si=4,NW(t,e,n,r)}finally{si=i,j4.transition=o}}function NW(t,e,n,r){if(pA){var i=ZH(t,e,n,r);if(i===null)YV(t,e,r,fA,n),s2e(t,r);else if(mRe(i,t,e,n,r))r.stopPropagation();else if(s2e(t,r),e&4&&-1<fRe.indexOf(t)){for(;i!==null;){var o=c_(i);if(o!==null&&uve(o),o=ZH(t,e,n,r),o===null&&YV(t,e,r,fA,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else YV(t,e,r,null,n)}}var fA=null;function ZH(t,e,n,r){if(fA=null,t=RW(r),t=y2(t),t!==null)if(e=Y2(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tve(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fA=t,null}function fve(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sRe()){case DW:return 1;case sve:return 4;case dA:case oRe:return 16;case ove:return 536870912;default:return 16}default:return 16}}var kf=null,FW=null,Hk=null;function mve(){if(Hk)return Hk;var t,e=FW,n=e.length,r,i="value"in kf?kf.value:kf.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===i[o-r];r++);return Hk=i.slice(t,1<r?1-r:void 0)}function Gk(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jM(){return!0}function a2e(){return!1}function M0(t){function e(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?jM:a2e,this.isPropagationStopped=a2e,this}return es(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jM)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jM)},persist:function(){},isPersistent:jM}),e}var mg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},BW=M0(mg),u_=es({},mg,{view:0,detail:0}),bRe=M0(u_),VV,jV,_y,mI=es({},u_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UW,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_y&&(_y&&t.type==="mousemove"?(VV=t.screenX-_y.screenX,jV=t.screenY-_y.screenY):jV=VV=0,_y=t),VV)},movementY:function(t){return"movementY"in t?t.movementY:jV}}),l2e=M0(mI),_Re=es({},mI,{dataTransfer:0}),wRe=M0(_Re),xRe=es({},u_,{relatedTarget:0}),HV=M0(xRe),SRe=es({},mg,{animationName:0,elapsedTime:0,pseudoElement:0}),ERe=M0(SRe),CRe=es({},mg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PRe=M0(CRe),TRe=es({},mg,{data:0}),u2e=M0(TRe),MRe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kRe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ARe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IRe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ARe[t])?!!e[t]:!1}function UW(){return IRe}var RRe=es({},u_,{key:function(t){if(t.key){var e=MRe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gk(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kRe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UW,charCode:function(t){return t.type==="keypress"?Gk(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gk(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DRe=M0(RRe),ORe=es({},mI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c2e=M0(ORe),LRe=es({},u_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UW}),NRe=M0(LRe),FRe=es({},mg,{propertyName:0,elapsedTime:0,pseudoElement:0}),BRe=M0(FRe),URe=es({},mI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zRe=M0(URe),VRe=[9,13,27,32],zW=hh&&"CompositionEvent"in window,eb=null;hh&&"documentMode"in document&&(eb=document.documentMode);var jRe=hh&&"TextEvent"in window&&!eb,gve=hh&&(!zW||eb&&8<eb&&11>=eb),d2e=String.fromCharCode(32),h2e=!1;function vve(t,e){switch(t){case"keyup":return VRe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yve(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var b4=!1;function HRe(t,e){switch(t){case"compositionend":return yve(e);case"keypress":return e.which!==32?null:(h2e=!0,d2e);case"textInput":return t=e.data,t===d2e&&h2e?null:t;default:return null}}function GRe(t,e){if(b4)return t==="compositionend"||!zW&&vve(t,e)?(t=mve(),Hk=FW=kf=null,b4=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gve&&e.locale!=="ko"?null:e.data;default:return null}}var WRe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p2e(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WRe[t.type]:e==="textarea"}function bve(t,e,n,r){Yge(r),e=mA(e,"onChange"),0<e.length&&(n=new BW("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tb=null,Eb=null;function $Re(t){Ave(t,0)}function gI(t){var e=x4(t);if(Hge(e))return t}function KRe(t,e){if(t==="change")return e}var _ve=!1;if(hh){var GV;if(hh){var WV="oninput"in document;if(!WV){var f2e=document.createElement("div");f2e.setAttribute("oninput","return;"),WV=typeof f2e.oninput=="function"}GV=WV}else GV=!1;_ve=GV&&(!document.documentMode||9<document.documentMode)}function m2e(){tb&&(tb.detachEvent("onpropertychange",wve),Eb=tb=null)}function wve(t){if(t.propertyName==="value"&&gI(Eb)){var e=[];bve(e,Eb,t,RW(t)),eve($Re,e)}}function XRe(t,e,n){t==="focusin"?(m2e(),tb=e,Eb=n,tb.attachEvent("onpropertychange",wve)):t==="focusout"&&m2e()}function qRe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gI(Eb)}function YRe(t,e){if(t==="click")return gI(e)}function ZRe(t,e){if(t==="input"||t==="change")return gI(e)}function QRe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Su=typeof Object.is=="function"?Object.is:QRe;function Cb(t,e){if(Su(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!DH.call(e,i)||!Su(t[i],e[i]))return!1}return!0}function g2e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v2e(t,e){var n=g2e(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=g2e(n)}}function xve(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xve(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sve(){for(var t=window,e=lA();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lA(t.document)}return e}function VW(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JRe(t){var e=Sve(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xve(n.ownerDocument.documentElement,n)){if(r!==null&&VW(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=v2e(n,o);var u=v2e(n,r);i&&u&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eDe=hh&&"documentMode"in document&&11>=document.documentMode,_4=null,QH=null,nb=null,JH=!1;function y2e(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;JH||_4==null||_4!==lA(r)||(r=_4,"selectionStart"in r&&VW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nb&&Cb(nb,r)||(nb=r,r=mA(QH,"onSelect"),0<r.length&&(e=new BW("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_4)))}function HM(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var w4={animationend:HM("Animation","AnimationEnd"),animationiteration:HM("Animation","AnimationIteration"),animationstart:HM("Animation","AnimationStart"),transitionend:HM("Transition","TransitionEnd")},$V={},Eve={};hh&&(Eve=document.createElement("div").style,"AnimationEvent"in window||(delete w4.animationend.animation,delete w4.animationiteration.animation,delete w4.animationstart.animation),"TransitionEvent"in window||delete w4.transitionend.transition);function vI(t){if($V[t])return $V[t];if(!w4[t])return t;var e=w4[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Eve)return $V[t]=e[n];return t}var Cve=vI("animationend"),Pve=vI("animationiteration"),Tve=vI("animationstart"),Mve=vI("transitionend"),kve=new Map,b2e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function r1(t,e){kve.set(t,e),q2(e,[t])}for(var KV=0;KV<b2e.length;KV++){var XV=b2e[KV],tDe=XV.toLowerCase(),nDe=XV[0].toUpperCase()+XV.slice(1);r1(tDe,"on"+nDe)}r1(Cve,"onAnimationEnd");r1(Pve,"onAnimationIteration");r1(Tve,"onAnimationStart");r1("dblclick","onDoubleClick");r1("focusin","onFocus");r1("focusout","onBlur");r1(Mve,"onTransitionEnd");Z4("onMouseEnter",["mouseout","mouseover"]);Z4("onMouseLeave",["mouseout","mouseover"]);Z4("onPointerEnter",["pointerout","pointerover"]);Z4("onPointerLeave",["pointerout","pointerover"]);q2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));q2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));q2("onBeforeInput",["compositionend","keypress","textInput","paste"]);q2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));q2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));q2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ky="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rDe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ky));function _2e(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tRe(r,e,void 0,t),t.currentTarget=null}function Ave(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var u=r.length-1;0<=u;u--){var d=r[u],f=d.instance,v=d.currentTarget;if(d=d.listener,f!==o&&i.isPropagationStopped())break e;_2e(i,d,v),o=f}else for(u=0;u<r.length;u++){if(d=r[u],f=d.instance,v=d.currentTarget,d=d.listener,f!==o&&i.isPropagationStopped())break e;_2e(i,d,v),o=f}}}if(cA)throw t=XH,cA=!1,XH=null,t}function ki(t,e){var n=e[iG];n===void 0&&(n=e[iG]=new Set);var r=t+"__bubble";n.has(r)||(Ive(e,t,2,!1),n.add(r))}function qV(t,e,n){var r=0;e&&(r|=4),Ive(n,t,r,e)}var GM="_reactListening"+Math.random().toString(36).slice(2);function Pb(t){if(!t[GM]){t[GM]=!0,Bge.forEach(function(n){n!=="selectionchange"&&(rDe.has(n)||qV(n,!1,t),qV(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[GM]||(e[GM]=!0,qV("selectionchange",!1,e))}}function Ive(t,e,n,r){switch(fve(e)){case 1:var i=vRe;break;case 4:i=yRe;break;default:i=NW}n=i.bind(null,e,n,t),i=void 0,!KH||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function YV(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var d=r.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===i||f.nodeType===8&&f.parentNode===i))return;u=u.return}for(;d!==null;){if(u=y2(d),u===null)return;if(f=u.tag,f===5||f===6){r=o=u;continue e}d=d.parentNode}}r=r.return}eve(function(){var v=o,x=RW(n),S=[];e:{var M=kve.get(t);if(M!==void 0){var D=BW,G=t;switch(t){case"keypress":if(Gk(n)===0)break e;case"keydown":case"keyup":D=DRe;break;case"focusin":G="focus",D=HV;break;case"focusout":G="blur",D=HV;break;case"beforeblur":case"afterblur":D=HV;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=l2e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=wRe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=NRe;break;case Cve:case Pve:case Tve:D=ERe;break;case Mve:D=BRe;break;case"scroll":D=bRe;break;case"wheel":D=zRe;break;case"copy":case"cut":case"paste":D=PRe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=c2e}var B=(e&4)!==0,L=!B&&t==="scroll",U=B?M!==null?M+"Capture":null:M;B=[];for(var C=v,H;C!==null;){H=C;var X=H.stateNode;if(H.tag===5&&X!==null&&(H=X,U!==null&&(X=_b(C,U),X!=null&&B.push(Tb(C,X,H)))),L)break;C=C.return}0<B.length&&(M=new D(M,G,null,n,x),S.push({event:M,listeners:B}))}}if(!(e&7)){e:{if(M=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",M&&n!==WH&&(G=n.relatedTarget||n.fromElement)&&(y2(G)||G[ph]))break e;if((D||M)&&(M=x.window===x?x:(M=x.ownerDocument)?M.defaultView||M.parentWindow:window,D?(G=n.relatedTarget||n.toElement,D=v,G=G?y2(G):null,G!==null&&(L=Y2(G),G!==L||G.tag!==5&&G.tag!==6)&&(G=null)):(D=null,G=v),D!==G)){if(B=l2e,X="onMouseLeave",U="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(B=c2e,X="onPointerLeave",U="onPointerEnter",C="pointer"),L=D==null?M:x4(D),H=G==null?M:x4(G),M=new B(X,C+"leave",D,n,x),M.target=L,M.relatedTarget=H,X=null,y2(x)===v&&(B=new B(U,C+"enter",G,n,x),B.target=H,B.relatedTarget=L,X=B),L=X,D&&G)t:{for(B=D,U=G,C=0,H=B;H;H=j5(H))C++;for(H=0,X=U;X;X=j5(X))H++;for(;0<C-H;)B=j5(B),C--;for(;0<H-C;)U=j5(U),H--;for(;C--;){if(B===U||U!==null&&B===U.alternate)break t;B=j5(B),U=j5(U)}B=null}else B=null;D!==null&&w2e(S,M,D,B,!1),G!==null&&L!==null&&w2e(S,L,G,B,!0)}}e:{if(M=v?x4(v):window,D=M.nodeName&&M.nodeName.toLowerCase(),D==="select"||D==="input"&&M.type==="file")var fe=KRe;else if(p2e(M))if(_ve)fe=ZRe;else{fe=qRe;var q=XRe}else(D=M.nodeName)&&D.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(fe=YRe);if(fe&&(fe=fe(t,v))){bve(S,fe,n,x);break e}q&&q(t,M,v),t==="focusout"&&(q=M._wrapperState)&&q.controlled&&M.type==="number"&&zH(M,"number",M.value)}switch(q=v?x4(v):window,t){case"focusin":(p2e(q)||q.contentEditable==="true")&&(_4=q,QH=v,nb=null);break;case"focusout":nb=QH=_4=null;break;case"mousedown":JH=!0;break;case"contextmenu":case"mouseup":case"dragend":JH=!1,y2e(S,n,x);break;case"selectionchange":if(eDe)break;case"keydown":case"keyup":y2e(S,n,x)}var pe;if(zW)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else b4?vve(t,n)&&(xe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(gve&&n.locale!=="ko"&&(b4||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&b4&&(pe=mve()):(kf=x,FW="value"in kf?kf.value:kf.textContent,b4=!0)),q=mA(v,xe),0<q.length&&(xe=new u2e(xe,t,null,n,x),S.push({event:xe,listeners:q}),pe?xe.data=pe:(pe=yve(n),pe!==null&&(xe.data=pe)))),(pe=jRe?HRe(t,n):GRe(t,n))&&(v=mA(v,"onBeforeInput"),0<v.length&&(x=new u2e("onBeforeInput","beforeinput",null,n,x),S.push({event:x,listeners:v}),x.data=pe))}Ave(S,e)})}function Tb(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mA(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_b(t,n),o!=null&&r.unshift(Tb(t,o,i)),o=_b(t,e),o!=null&&r.push(Tb(t,o,i))),t=t.return}return r}function j5(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w2e(t,e,n,r,i){for(var o=e._reactName,u=[];n!==null&&n!==r;){var d=n,f=d.alternate,v=d.stateNode;if(f!==null&&f===r)break;d.tag===5&&v!==null&&(d=v,i?(f=_b(n,o),f!=null&&u.unshift(Tb(n,f,d))):i||(f=_b(n,o),f!=null&&u.push(Tb(n,f,d)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var iDe=/\r\n?/g,sDe=/\u0000|\uFFFD/g;function x2e(t){return(typeof t=="string"?t:""+t).replace(iDe,`
`).replace(sDe,"")}function WM(t,e,n){if(e=x2e(e),x2e(t)!==e&&n)throw Error(Yt(425))}function gA(){}var eG=null,tG=null;function nG(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rG=typeof setTimeout=="function"?setTimeout:void 0,oDe=typeof clearTimeout=="function"?clearTimeout:void 0,S2e=typeof Promise=="function"?Promise:void 0,aDe=typeof queueMicrotask=="function"?queueMicrotask:typeof S2e<"u"?function(t){return S2e.resolve(null).then(t).catch(lDe)}:rG;function lDe(t){setTimeout(function(){throw t})}function ZV(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sb(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sb(e)}function Ff(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E2e(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gg=Math.random().toString(36).slice(2),Ec="__reactFiber$"+gg,Mb="__reactProps$"+gg,ph="__reactContainer$"+gg,iG="__reactEvents$"+gg,uDe="__reactListeners$"+gg,cDe="__reactHandles$"+gg;function y2(t){var e=t[Ec];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ph]||n[Ec]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E2e(t);t!==null;){if(n=t[Ec])return n;t=E2e(t)}return e}t=n,n=t.parentNode}return null}function c_(t){return t=t[Ec]||t[ph],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function x4(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Yt(33))}function yI(t){return t[Mb]||null}var sG=[],S4=-1;function i1(t){return{current:t}}function Oi(t){0>S4||(t.current=sG[S4],sG[S4]=null,S4--)}function bi(t,e){S4++,sG[S4]=t.current,t.current=e}var Yf={},na=i1(Yf),Ja=i1(!1),R2=Yf;function Q4(t,e){var n=t.type.contextTypes;if(!n)return Yf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function e0(t){return t=t.childContextTypes,t!=null}function vA(){Oi(Ja),Oi(na)}function C2e(t,e,n){if(na.current!==Yf)throw Error(Yt(168));bi(na,e),bi(Ja,n)}function Rve(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Yt(108,XIe(t)||"Unknown",i));return es({},n,r)}function yA(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yf,R2=na.current,bi(na,t),bi(Ja,Ja.current),!0}function P2e(t,e,n){var r=t.stateNode;if(!r)throw Error(Yt(169));n?(t=Rve(t,e,R2),r.__reactInternalMemoizedMergedChildContext=t,Oi(Ja),Oi(na),bi(na,t)):Oi(Ja),bi(Ja,n)}var Zd=null,bI=!1,QV=!1;function Dve(t){Zd===null?Zd=[t]:Zd.push(t)}function dDe(t){bI=!0,Dve(t)}function s1(){if(!QV&&Zd!==null){QV=!0;var t=0,e=si;try{var n=Zd;for(si=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zd=null,bI=!1}catch(i){throw Zd!==null&&(Zd=Zd.slice(t+1)),ive(DW,s1),i}finally{si=e,QV=!1}}return null}var E4=[],C4=0,bA=null,_A=0,pl=[],fl=0,D2=null,Jd=1,eh="";function d2(t,e){E4[C4++]=_A,E4[C4++]=bA,bA=t,_A=e}function Ove(t,e,n){pl[fl++]=Jd,pl[fl++]=eh,pl[fl++]=D2,D2=t;var r=Jd;t=eh;var i=32-wu(r)-1;r&=~(1<<i),n+=1;var o=32-wu(e)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Jd=1<<32-wu(e)+i|n<<i|r,eh=o+t}else Jd=1<<o|n<<i|r,eh=t}function jW(t){t.return!==null&&(d2(t,1),Ove(t,1,0))}function HW(t){for(;t===bA;)bA=E4[--C4],E4[C4]=null,_A=E4[--C4],E4[C4]=null;for(;t===D2;)D2=pl[--fl],pl[fl]=null,eh=pl[--fl],pl[fl]=null,Jd=pl[--fl],pl[fl]=null}var w0=null,_0=null,Fi=!1,_u=null;function Lve(t,e){var n=yl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function T2e(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,w0=t,_0=Ff(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,w0=t,_0=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=D2!==null?{id:Jd,overflow:eh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,w0=t,_0=null,!0):!1;default:return!1}}function oG(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aG(t){if(Fi){var e=_0;if(e){var n=e;if(!T2e(t,e)){if(oG(t))throw Error(Yt(418));e=Ff(n.nextSibling);var r=w0;e&&T2e(t,e)?Lve(r,n):(t.flags=t.flags&-4097|2,Fi=!1,w0=t)}}else{if(oG(t))throw Error(Yt(418));t.flags=t.flags&-4097|2,Fi=!1,w0=t}}}function M2e(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;w0=t}function $M(t){if(t!==w0)return!1;if(!Fi)return M2e(t),Fi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nG(t.type,t.memoizedProps)),e&&(e=_0)){if(oG(t))throw Nve(),Error(Yt(418));for(;e;)Lve(t,e),e=Ff(e.nextSibling)}if(M2e(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Yt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_0=Ff(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_0=null}}else _0=w0?Ff(t.stateNode.nextSibling):null;return!0}function Nve(){for(var t=_0;t;)t=Ff(t.nextSibling)}function J4(){_0=w0=null,Fi=!1}function GW(t){_u===null?_u=[t]:_u.push(t)}var hDe=wh.ReactCurrentBatchConfig;function yu(t,e){if(t&&t.defaultProps){e=es({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var wA=i1(null),xA=null,P4=null,WW=null;function $W(){WW=P4=xA=null}function KW(t){var e=wA.current;Oi(wA),t._currentValue=e}function lG(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function H4(t,e){xA=t,WW=P4=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Za=!0),t.firstContext=null)}function El(t){var e=t._currentValue;if(WW!==t)if(t={context:t,memoizedValue:e,next:null},P4===null){if(xA===null)throw Error(Yt(308));P4=t,xA.dependencies={lanes:0,firstContext:t}}else P4=P4.next=t;return e}var b2=null;function XW(t){b2===null?b2=[t]:b2.push(t)}function Fve(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,XW(e)):(n.next=i.next,i.next=n),e.interleaved=n,fh(t,r)}function fh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sf=!1;function qW(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bve(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ah(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,jr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fh(t,n)}return i=r.interleaved,i===null?(e.next=e,XW(r)):(e.next=i.next,i.next=e),r.interleaved=e,fh(t,n)}function Wk(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,OW(t,n)}}function k2e(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function SA(t,e,n,r){var i=t.updateQueue;Sf=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var f=d,v=f.next;f.next=null,u===null?o=v:u.next=v,u=f;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==u&&(d===null?x.firstBaseUpdate=v:d.next=v,x.lastBaseUpdate=f))}if(o!==null){var S=i.baseState;u=0,x=v=f=null,d=o;do{var M=d.lane,D=d.eventTime;if((r&M)===M){x!==null&&(x=x.next={eventTime:D,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var G=t,B=d;switch(M=e,D=n,B.tag){case 1:if(G=B.payload,typeof G=="function"){S=G.call(D,S,M);break e}S=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=B.payload,M=typeof G=="function"?G.call(D,S,M):G,M==null)break e;S=es({},S,M);break e;case 2:Sf=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,M=i.effects,M===null?i.effects=[d]:M.push(d))}else D={eventTime:D,lane:M,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(v=x=D,f=S):x=x.next=D,u|=M;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;M=d,d=M.next,M.next=null,i.lastBaseUpdate=M,i.shared.pending=null}}while(1);if(x===null&&(f=S),i.baseState=f,i.firstBaseUpdate=v,i.lastBaseUpdate=x,e=i.shared.interleaved,e!==null){i=e;do u|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);L2|=u,t.lanes=u,t.memoizedState=S}}function A2e(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Yt(191,i));i.call(r)}}}var Uve=new Fge.Component().refs;function uG(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:es({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _I={isMounted:function(t){return(t=t._reactInternals)?Y2(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ma(),i=zf(t),o=ah(r,i);o.payload=e,n!=null&&(o.callback=n),e=Bf(t,o,i),e!==null&&(xu(e,t,i,r),Wk(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ma(),i=zf(t),o=ah(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Bf(t,o,i),e!==null&&(xu(e,t,i,r),Wk(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ma(),r=zf(t),i=ah(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bf(t,i,r),e!==null&&(xu(e,t,r,n),Wk(e,t,r))}};function I2e(t,e,n,r,i,o,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,u):e.prototype&&e.prototype.isPureReactComponent?!Cb(n,r)||!Cb(i,o):!0}function zve(t,e,n){var r=!1,i=Yf,o=e.contextType;return typeof o=="object"&&o!==null?o=El(o):(i=e0(e)?R2:na.current,r=e.contextTypes,o=(r=r!=null)?Q4(t,i):Yf),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_I,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function R2e(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_I.enqueueReplaceState(e,e.state,null)}function cG(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Uve,qW(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=El(o):(o=e0(e)?R2:na.current,i.context=Q4(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(uG(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_I.enqueueReplaceState(i,i.state,null),SA(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wy(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Yt(309));var r=n.stateNode}if(!r)throw Error(Yt(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(u){var d=i.refs;d===Uve&&(d=i.refs={}),u===null?delete d[o]:d[o]=u},e._stringRef=o,e)}if(typeof t!="string")throw Error(Yt(284));if(!n._owner)throw Error(Yt(290,t))}return t}function KM(t,e){throw t=Object.prototype.toString.call(e),Error(Yt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D2e(t){var e=t._init;return e(t._payload)}function Vve(t){function e(U,C){if(t){var H=U.deletions;H===null?(U.deletions=[C],U.flags|=16):H.push(C)}}function n(U,C){if(!t)return null;for(;C!==null;)e(U,C),C=C.sibling;return null}function r(U,C){for(U=new Map;C!==null;)C.key!==null?U.set(C.key,C):U.set(C.index,C),C=C.sibling;return U}function i(U,C){return U=Vf(U,C),U.index=0,U.sibling=null,U}function o(U,C,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<C?(U.flags|=2,C):H):(U.flags|=2,C)):(U.flags|=1048576,C)}function u(U){return t&&U.alternate===null&&(U.flags|=2),U}function d(U,C,H,X){return C===null||C.tag!==6?(C=sj(H,U.mode,X),C.return=U,C):(C=i(C,H),C.return=U,C)}function f(U,C,H,X){var fe=H.type;return fe===y4?x(U,C,H.props.children,X,H.key):C!==null&&(C.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===xf&&D2e(fe)===C.type)?(X=i(C,H.props),X.ref=wy(U,C,H),X.return=U,X):(X=Zk(H.type,H.key,H.props,null,U.mode,X),X.ref=wy(U,C,H),X.return=U,X)}function v(U,C,H,X){return C===null||C.tag!==4||C.stateNode.containerInfo!==H.containerInfo||C.stateNode.implementation!==H.implementation?(C=oj(H,U.mode,X),C.return=U,C):(C=i(C,H.children||[]),C.return=U,C)}function x(U,C,H,X,fe){return C===null||C.tag!==7?(C=C2(H,U.mode,X,fe),C.return=U,C):(C=i(C,H),C.return=U,C)}function S(U,C,H){if(typeof C=="string"&&C!==""||typeof C=="number")return C=sj(""+C,U.mode,H),C.return=U,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case NM:return H=Zk(C.type,C.key,C.props,null,U.mode,H),H.ref=wy(U,null,C),H.return=U,H;case v4:return C=oj(C,U.mode,H),C.return=U,C;case xf:var X=C._init;return S(U,X(C._payload),H)}if(Wy(C)||gy(C))return C=C2(C,U.mode,H,null),C.return=U,C;KM(U,C)}return null}function M(U,C,H,X){var fe=C!==null?C.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return fe!==null?null:d(U,C,""+H,X);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case NM:return H.key===fe?f(U,C,H,X):null;case v4:return H.key===fe?v(U,C,H,X):null;case xf:return fe=H._init,M(U,C,fe(H._payload),X)}if(Wy(H)||gy(H))return fe!==null?null:x(U,C,H,X,null);KM(U,H)}return null}function D(U,C,H,X,fe){if(typeof X=="string"&&X!==""||typeof X=="number")return U=U.get(H)||null,d(C,U,""+X,fe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case NM:return U=U.get(X.key===null?H:X.key)||null,f(C,U,X,fe);case v4:return U=U.get(X.key===null?H:X.key)||null,v(C,U,X,fe);case xf:var q=X._init;return D(U,C,H,q(X._payload),fe)}if(Wy(X)||gy(X))return U=U.get(H)||null,x(C,U,X,fe,null);KM(C,X)}return null}function G(U,C,H,X){for(var fe=null,q=null,pe=C,xe=C=0,J=null;pe!==null&&xe<H.length;xe++){pe.index>xe?(J=pe,pe=null):J=pe.sibling;var ne=M(U,pe,H[xe],X);if(ne===null){pe===null&&(pe=J);break}t&&pe&&ne.alternate===null&&e(U,pe),C=o(ne,C,xe),q===null?fe=ne:q.sibling=ne,q=ne,pe=J}if(xe===H.length)return n(U,pe),Fi&&d2(U,xe),fe;if(pe===null){for(;xe<H.length;xe++)pe=S(U,H[xe],X),pe!==null&&(C=o(pe,C,xe),q===null?fe=pe:q.sibling=pe,q=pe);return Fi&&d2(U,xe),fe}for(pe=r(U,pe);xe<H.length;xe++)J=D(pe,U,xe,H[xe],X),J!==null&&(t&&J.alternate!==null&&pe.delete(J.key===null?xe:J.key),C=o(J,C,xe),q===null?fe=J:q.sibling=J,q=J);return t&&pe.forEach(function(Pe){return e(U,Pe)}),Fi&&d2(U,xe),fe}function B(U,C,H,X){var fe=gy(H);if(typeof fe!="function")throw Error(Yt(150));if(H=fe.call(H),H==null)throw Error(Yt(151));for(var q=fe=null,pe=C,xe=C=0,J=null,ne=H.next();pe!==null&&!ne.done;xe++,ne=H.next()){pe.index>xe?(J=pe,pe=null):J=pe.sibling;var Pe=M(U,pe,ne.value,X);if(Pe===null){pe===null&&(pe=J);break}t&&pe&&Pe.alternate===null&&e(U,pe),C=o(Pe,C,xe),q===null?fe=Pe:q.sibling=Pe,q=Pe,pe=J}if(ne.done)return n(U,pe),Fi&&d2(U,xe),fe;if(pe===null){for(;!ne.done;xe++,ne=H.next())ne=S(U,ne.value,X),ne!==null&&(C=o(ne,C,xe),q===null?fe=ne:q.sibling=ne,q=ne);return Fi&&d2(U,xe),fe}for(pe=r(U,pe);!ne.done;xe++,ne=H.next())ne=D(pe,U,xe,ne.value,X),ne!==null&&(t&&ne.alternate!==null&&pe.delete(ne.key===null?xe:ne.key),C=o(ne,C,xe),q===null?fe=ne:q.sibling=ne,q=ne);return t&&pe.forEach(function(mt){return e(U,mt)}),Fi&&d2(U,xe),fe}function L(U,C,H,X){if(typeof H=="object"&&H!==null&&H.type===y4&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case NM:e:{for(var fe=H.key,q=C;q!==null;){if(q.key===fe){if(fe=H.type,fe===y4){if(q.tag===7){n(U,q.sibling),C=i(q,H.props.children),C.return=U,U=C;break e}}else if(q.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===xf&&D2e(fe)===q.type){n(U,q.sibling),C=i(q,H.props),C.ref=wy(U,q,H),C.return=U,U=C;break e}n(U,q);break}else e(U,q);q=q.sibling}H.type===y4?(C=C2(H.props.children,U.mode,X,H.key),C.return=U,U=C):(X=Zk(H.type,H.key,H.props,null,U.mode,X),X.ref=wy(U,C,H),X.return=U,U=X)}return u(U);case v4:e:{for(q=H.key;C!==null;){if(C.key===q)if(C.tag===4&&C.stateNode.containerInfo===H.containerInfo&&C.stateNode.implementation===H.implementation){n(U,C.sibling),C=i(C,H.children||[]),C.return=U,U=C;break e}else{n(U,C);break}else e(U,C);C=C.sibling}C=oj(H,U.mode,X),C.return=U,U=C}return u(U);case xf:return q=H._init,L(U,C,q(H._payload),X)}if(Wy(H))return G(U,C,H,X);if(gy(H))return B(U,C,H,X);KM(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,C!==null&&C.tag===6?(n(U,C.sibling),C=i(C,H),C.return=U,U=C):(n(U,C),C=sj(H,U.mode,X),C.return=U,U=C),u(U)):n(U,C)}return L}var eg=Vve(!0),jve=Vve(!1),d_={},Mc=i1(d_),kb=i1(d_),Ab=i1(d_);function _2(t){if(t===d_)throw Error(Yt(174));return t}function YW(t,e){switch(bi(Ab,e),bi(kb,t),bi(Mc,d_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jH(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jH(e,t)}Oi(Mc),bi(Mc,e)}function tg(){Oi(Mc),Oi(kb),Oi(Ab)}function Hve(t){_2(Ab.current);var e=_2(Mc.current),n=jH(e,t.type);e!==n&&(bi(kb,t),bi(Mc,n))}function ZW(t){kb.current===t&&(Oi(Mc),Oi(kb))}var Xi=i1(0);function EA(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var JV=[];function QW(){for(var t=0;t<JV.length;t++)JV[t]._workInProgressVersionPrimary=null;JV.length=0}var $k=wh.ReactCurrentDispatcher,ej=wh.ReactCurrentBatchConfig,O2=0,Zi=null,Gs=null,oo=null,CA=!1,rb=!1,Ib=0,pDe=0;function $o(){throw Error(Yt(321))}function JW(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Su(t[n],e[n]))return!1;return!0}function e$(t,e,n,r,i,o){if(O2=o,Zi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$k.current=t===null||t.memoizedState===null?vDe:yDe,t=n(r,i),rb){o=0;do{if(rb=!1,Ib=0,25<=o)throw Error(Yt(301));o+=1,oo=Gs=null,e.updateQueue=null,$k.current=bDe,t=n(r,i)}while(rb)}if($k.current=PA,e=Gs!==null&&Gs.next!==null,O2=0,oo=Gs=Zi=null,CA=!1,e)throw Error(Yt(300));return t}function t$(){var t=Ib!==0;return Ib=0,t}function wc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oo===null?Zi.memoizedState=oo=t:oo=oo.next=t,oo}function Cl(){if(Gs===null){var t=Zi.alternate;t=t!==null?t.memoizedState:null}else t=Gs.next;var e=oo===null?Zi.memoizedState:oo.next;if(e!==null)oo=e,Gs=t;else{if(t===null)throw Error(Yt(310));Gs=t,t={memoizedState:Gs.memoizedState,baseState:Gs.baseState,baseQueue:Gs.baseQueue,queue:Gs.queue,next:null},oo===null?Zi.memoizedState=oo=t:oo=oo.next=t}return oo}function Rb(t,e){return typeof e=="function"?e(t):e}function tj(t){var e=Cl(),n=e.queue;if(n===null)throw Error(Yt(311));n.lastRenderedReducer=t;var r=Gs,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var d=u=null,f=null,v=o;do{var x=v.lane;if((O2&x)===x)f!==null&&(f=f.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:t(r,v.action);else{var S={lane:x,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};f===null?(d=f=S,u=r):f=f.next=S,Zi.lanes|=x,L2|=x}v=v.next}while(v!==null&&v!==o);f===null?u=r:f.next=d,Su(r,e.memoizedState)||(Za=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Zi.lanes|=o,L2|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nj(t){var e=Cl(),n=e.queue;if(n===null)throw Error(Yt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=t(o,u.action),u=u.next;while(u!==i);Su(o,e.memoizedState)||(Za=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Gve(){}function Wve(t,e){var n=Zi,r=Cl(),i=e(),o=!Su(r.memoizedState,i);if(o&&(r.memoizedState=i,Za=!0),r=r.queue,n$(Xve.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||oo!==null&&oo.memoizedState.tag&1){if(n.flags|=2048,Db(9,Kve.bind(null,n,r,i,e),void 0,null),uo===null)throw Error(Yt(349));O2&30||$ve(n,e,i)}return i}function $ve(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zi.updateQueue,e===null?(e={lastEffect:null,stores:null},Zi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kve(t,e,n,r){e.value=n,e.getSnapshot=r,qve(e)&&Yve(t)}function Xve(t,e,n){return n(function(){qve(e)&&Yve(t)})}function qve(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Su(t,n)}catch{return!0}}function Yve(t){var e=fh(t,1);e!==null&&xu(e,t,1,-1)}function O2e(t){var e=wc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rb,lastRenderedState:t},e.queue=t,t=t.dispatch=gDe.bind(null,Zi,t),[e.memoizedState,t]}function Db(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zi.updateQueue,e===null?(e={lastEffect:null,stores:null},Zi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zve(){return Cl().memoizedState}function Kk(t,e,n,r){var i=wc();Zi.flags|=t,i.memoizedState=Db(1|e,n,void 0,r===void 0?null:r)}function wI(t,e,n,r){var i=Cl();r=r===void 0?null:r;var o=void 0;if(Gs!==null){var u=Gs.memoizedState;if(o=u.destroy,r!==null&&JW(r,u.deps)){i.memoizedState=Db(e,n,o,r);return}}Zi.flags|=t,i.memoizedState=Db(1|e,n,o,r)}function L2e(t,e){return Kk(8390656,8,t,e)}function n$(t,e){return wI(2048,8,t,e)}function Qve(t,e){return wI(4,2,t,e)}function Jve(t,e){return wI(4,4,t,e)}function e8e(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function t8e(t,e,n){return n=n!=null?n.concat([t]):null,wI(4,4,e8e.bind(null,e,t),n)}function r$(){}function n8e(t,e){var n=Cl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&JW(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function r8e(t,e){var n=Cl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&JW(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i8e(t,e,n){return O2&21?(Su(n,e)||(n=ave(),Zi.lanes|=n,L2|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Za=!0),t.memoizedState=n)}function fDe(t,e){var n=si;si=n!==0&&4>n?n:4,t(!0);var r=ej.transition;ej.transition={};try{t(!1),e()}finally{si=n,ej.transition=r}}function s8e(){return Cl().memoizedState}function mDe(t,e,n){var r=zf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},o8e(t))a8e(e,n);else if(n=Fve(t,e,n,r),n!==null){var i=Ma();xu(n,t,r,i),l8e(n,e,r)}}function gDe(t,e,n){var r=zf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(o8e(t))a8e(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var u=e.lastRenderedState,d=o(u,n);if(i.hasEagerState=!0,i.eagerState=d,Su(d,u)){var f=e.interleaved;f===null?(i.next=i,XW(e)):(i.next=f.next,f.next=i),e.interleaved=i;return}}catch{}finally{}n=Fve(t,e,i,r),n!==null&&(i=Ma(),xu(n,t,r,i),l8e(n,e,r))}}function o8e(t){var e=t.alternate;return t===Zi||e!==null&&e===Zi}function a8e(t,e){rb=CA=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function l8e(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,OW(t,n)}}var PA={readContext:El,useCallback:$o,useContext:$o,useEffect:$o,useImperativeHandle:$o,useInsertionEffect:$o,useLayoutEffect:$o,useMemo:$o,useReducer:$o,useRef:$o,useState:$o,useDebugValue:$o,useDeferredValue:$o,useTransition:$o,useMutableSource:$o,useSyncExternalStore:$o,useId:$o,unstable_isNewReconciler:!1},vDe={readContext:El,useCallback:function(t,e){return wc().memoizedState=[t,e===void 0?null:e],t},useContext:El,useEffect:L2e,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kk(4194308,4,e8e.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kk(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kk(4,2,t,e)},useMemo:function(t,e){var n=wc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mDe.bind(null,Zi,t),[r.memoizedState,t]},useRef:function(t){var e=wc();return t={current:t},e.memoizedState=t},useState:O2e,useDebugValue:r$,useDeferredValue:function(t){return wc().memoizedState=t},useTransition:function(){var t=O2e(!1),e=t[0];return t=fDe.bind(null,t[1]),wc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zi,i=wc();if(Fi){if(n===void 0)throw Error(Yt(407));n=n()}else{if(n=e(),uo===null)throw Error(Yt(349));O2&30||$ve(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,L2e(Xve.bind(null,r,o,t),[t]),r.flags|=2048,Db(9,Kve.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=wc(),e=uo.identifierPrefix;if(Fi){var n=eh,r=Jd;n=(r&~(1<<32-wu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ib++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pDe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yDe={readContext:El,useCallback:n8e,useContext:El,useEffect:n$,useImperativeHandle:t8e,useInsertionEffect:Qve,useLayoutEffect:Jve,useMemo:r8e,useReducer:tj,useRef:Zve,useState:function(){return tj(Rb)},useDebugValue:r$,useDeferredValue:function(t){var e=Cl();return i8e(e,Gs.memoizedState,t)},useTransition:function(){var t=tj(Rb)[0],e=Cl().memoizedState;return[t,e]},useMutableSource:Gve,useSyncExternalStore:Wve,useId:s8e,unstable_isNewReconciler:!1},bDe={readContext:El,useCallback:n8e,useContext:El,useEffect:n$,useImperativeHandle:t8e,useInsertionEffect:Qve,useLayoutEffect:Jve,useMemo:r8e,useReducer:nj,useRef:Zve,useState:function(){return nj(Rb)},useDebugValue:r$,useDeferredValue:function(t){var e=Cl();return Gs===null?e.memoizedState=t:i8e(e,Gs.memoizedState,t)},useTransition:function(){var t=nj(Rb)[0],e=Cl().memoizedState;return[t,e]},useMutableSource:Gve,useSyncExternalStore:Wve,useId:s8e,unstable_isNewReconciler:!1};function ng(t,e){try{var n="",r=e;do n+=KIe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function rj(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dG(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _De=typeof WeakMap=="function"?WeakMap:Map;function u8e(t,e,n){n=ah(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){MA||(MA=!0,wG=r),dG(t,e)},n}function c8e(t,e,n){n=ah(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dG(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){dG(t,e),typeof r!="function"&&(Uf===null?Uf=new Set([this]):Uf.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function N2e(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _De;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ODe.bind(null,t,e,n),e.then(t,t))}function F2e(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function B2e(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ah(-1,1),e.tag=2,Bf(n,e,1))),n.lanes|=1),t)}var wDe=wh.ReactCurrentOwner,Za=!1;function Sa(t,e,n,r){e.child=t===null?jve(e,null,n,r):eg(e,t.child,n,r)}function U2e(t,e,n,r,i){n=n.render;var o=e.ref;return H4(e,i),r=e$(t,e,n,r,o,i),n=t$(),t!==null&&!Za?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mh(t,e,i)):(Fi&&n&&jW(e),e.flags|=1,Sa(t,e,r,i),e.child)}function z2e(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!d$(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,d8e(t,e,o,r,i)):(t=Zk(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cb,n(u,r)&&t.ref===e.ref)return mh(t,e,i)}return e.flags|=1,t=Vf(o,r),t.ref=e.ref,t.return=e,e.child=t}function d8e(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Cb(o,r)&&t.ref===e.ref)if(Za=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Za=!0);else return e.lanes=t.lanes,mh(t,e,i)}return hG(t,e,n,r,i)}function h8e(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(M4,b0),b0|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bi(M4,b0),b0|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,bi(M4,b0),b0|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,bi(M4,b0),b0|=r;return Sa(t,e,i,n),e.child}function p8e(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hG(t,e,n,r,i){var o=e0(n)?R2:na.current;return o=Q4(e,o),H4(e,i),n=e$(t,e,n,r,o,i),r=t$(),t!==null&&!Za?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mh(t,e,i)):(Fi&&r&&jW(e),e.flags|=1,Sa(t,e,n,i),e.child)}function V2e(t,e,n,r,i){if(e0(n)){var o=!0;yA(e)}else o=!1;if(H4(e,i),e.stateNode===null)Xk(t,e),zve(e,n,r),cG(e,n,r,i),r=!0;else if(t===null){var u=e.stateNode,d=e.memoizedProps;u.props=d;var f=u.context,v=n.contextType;typeof v=="object"&&v!==null?v=El(v):(v=e0(n)?R2:na.current,v=Q4(e,v));var x=n.getDerivedStateFromProps,S=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";S||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==r||f!==v)&&R2e(e,u,r,v),Sf=!1;var M=e.memoizedState;u.state=M,SA(e,r,u,i),f=e.memoizedState,d!==r||M!==f||Ja.current||Sf?(typeof x=="function"&&(uG(e,n,x,r),f=e.memoizedState),(d=Sf||I2e(e,n,d,r,M,f,v))?(S||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),u.props=r,u.state=f,u.context=v,r=d):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,Bve(t,e),d=e.memoizedProps,v=e.type===e.elementType?d:yu(e.type,d),u.props=v,S=e.pendingProps,M=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=El(f):(f=e0(n)?R2:na.current,f=Q4(e,f));var D=n.getDerivedStateFromProps;(x=typeof D=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==S||M!==f)&&R2e(e,u,r,f),Sf=!1,M=e.memoizedState,u.state=M,SA(e,r,u,i);var G=e.memoizedState;d!==S||M!==G||Ja.current||Sf?(typeof D=="function"&&(uG(e,n,D,r),G=e.memoizedState),(v=Sf||I2e(e,n,v,r,M,G,f)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,G,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,G,f)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=G),u.props=r,u.state=G,u.context=f,r=v):(typeof u.componentDidUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=1024),r=!1)}return pG(t,e,n,r,o,i)}function pG(t,e,n,r,i,o){p8e(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return i&&P2e(e,n,!1),mh(t,e,o);r=e.stateNode,wDe.current=e;var d=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=eg(e,t.child,null,o),e.child=eg(e,null,d,o)):Sa(t,e,d,o),e.memoizedState=r.state,i&&P2e(e,n,!0),e.child}function f8e(t){var e=t.stateNode;e.pendingContext?C2e(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C2e(t,e.context,!1),YW(t,e.containerInfo)}function j2e(t,e,n,r,i){return J4(),GW(i),e.flags|=256,Sa(t,e,n,r),e.child}var fG={dehydrated:null,treeContext:null,retryLane:0};function mG(t){return{baseLanes:t,cachePool:null,transitions:null}}function m8e(t,e,n){var r=e.pendingProps,i=Xi.current,o=!1,u=(e.flags&128)!==0,d;if((d=u)||(d=t!==null&&t.memoizedState===null?!1:(i&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),bi(Xi,i&1),t===null)return aG(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,o?(r=e.mode,o=e.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=EI(u,r,0,null),t=C2(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=mG(n),e.memoizedState=fG,t):i$(e,u));if(i=t.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return xDe(t,e,u,r,d,i,n);if(o){o=r.fallback,u=e.mode,i=t.child,d=i.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=Vf(i,f),r.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=Vf(d,o):(o=C2(o,u,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,u=t.child.memoizedState,u=u===null?mG(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=fG,r}return o=t.child,t=o.sibling,r=Vf(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function i$(t,e){return e=EI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function XM(t,e,n,r){return r!==null&&GW(r),eg(e,t.child,null,n),t=i$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xDe(t,e,n,r,i,o,u){if(n)return e.flags&256?(e.flags&=-257,r=rj(Error(Yt(422))),XM(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=EI({mode:"visible",children:r.children},i,0,null),o=C2(o,i,u,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&eg(e,t.child,null,u),e.child.memoizedState=mG(u),e.memoizedState=fG,o);if(!(e.mode&1))return XM(t,e,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var d=r.dgst;return r=d,o=Error(Yt(419)),r=rj(o,r,void 0),XM(t,e,u,r)}if(d=(u&t.childLanes)!==0,Za||d){if(r=uo,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,fh(t,i),xu(r,t,i,-1))}return c$(),r=rj(Error(Yt(421))),XM(t,e,u,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=LDe.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,_0=Ff(i.nextSibling),w0=e,Fi=!0,_u=null,t!==null&&(pl[fl++]=Jd,pl[fl++]=eh,pl[fl++]=D2,Jd=t.id,eh=t.overflow,D2=e),e=i$(e,r.children),e.flags|=4096,e)}function H2e(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lG(t.return,e,n)}function ij(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function g8e(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Sa(t,e,r.children,n),r=Xi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H2e(t,n,e);else if(t.tag===19)H2e(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(bi(Xi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&EA(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ij(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&EA(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ij(e,!0,n,null,o);break;case"together":ij(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xk(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mh(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),L2|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Yt(153));if(e.child!==null){for(t=e.child,n=Vf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SDe(t,e,n){switch(e.tag){case 3:f8e(e),J4();break;case 5:Hve(e);break;case 1:e0(e.type)&&yA(e);break;case 4:YW(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;bi(wA,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(bi(Xi,Xi.current&1),e.flags|=128,null):n&e.child.childLanes?m8e(t,e,n):(bi(Xi,Xi.current&1),t=mh(t,e,n),t!==null?t.sibling:null);bi(Xi,Xi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return g8e(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bi(Xi,Xi.current),r)break;return null;case 22:case 23:return e.lanes=0,h8e(t,e,n)}return mh(t,e,n)}var v8e,gG,y8e,b8e;v8e=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gG=function(){};y8e=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_2(Mc.current);var o=null;switch(n){case"input":i=BH(t,i),r=BH(t,r),o=[];break;case"select":i=es({},i,{value:void 0}),r=es({},r,{value:void 0}),o=[];break;case"textarea":i=VH(t,i),r=VH(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gA)}HH(n,r);var u;n=null;for(v in i)if(!r.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var d=i[v];for(u in d)d.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(yb.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in r){var f=r[v];if(d=i!=null?i[v]:void 0,r.hasOwnProperty(v)&&f!==d&&(f!=null||d!=null))if(v==="style")if(d){for(u in d)!d.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&d[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(o||(o=[]),o.push(v,n)),n=f;else v==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,d=d?d.__html:void 0,f!=null&&d!==f&&(o=o||[]).push(v,f)):v==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(v,""+f):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(yb.hasOwnProperty(v)?(f!=null&&v==="onScroll"&&ki("scroll",t),o||d===f||(o=[])):(o=o||[]).push(v,f))}n&&(o=o||[]).push("style",n);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};b8e=function(t,e,n,r){n!==r&&(e.flags|=4)};function xy(t,e){if(!Fi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ko(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EDe(t,e,n){var r=e.pendingProps;switch(HW(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(e),null;case 1:return e0(e.type)&&vA(),Ko(e),null;case 3:return r=e.stateNode,tg(),Oi(Ja),Oi(na),QW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($M(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_u!==null&&(EG(_u),_u=null))),gG(t,e),Ko(e),null;case 5:ZW(e);var i=_2(Ab.current);if(n=e.type,t!==null&&e.stateNode!=null)y8e(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Yt(166));return Ko(e),null}if(t=_2(Mc.current),$M(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ec]=e,r[Mb]=o,t=(e.mode&1)!==0,n){case"dialog":ki("cancel",r),ki("close",r);break;case"iframe":case"object":case"embed":ki("load",r);break;case"video":case"audio":for(i=0;i<Ky.length;i++)ki(Ky[i],r);break;case"source":ki("error",r);break;case"img":case"image":case"link":ki("error",r),ki("load",r);break;case"details":ki("toggle",r);break;case"input":Qme(r,o),ki("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ki("invalid",r);break;case"textarea":e2e(r,o),ki("invalid",r)}HH(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var d=o[u];u==="children"?typeof d=="string"?r.textContent!==d&&(o.suppressHydrationWarning!==!0&&WM(r.textContent,d,t),i=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&WM(r.textContent,d,t),i=["children",""+d]):yb.hasOwnProperty(u)&&d!=null&&u==="onScroll"&&ki("scroll",r)}switch(n){case"input":FM(r),Jme(r,o,!0);break;case"textarea":FM(r),t2e(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=gA)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$ge(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[Ec]=e,t[Mb]=r,v8e(t,e,!1,!1),e.stateNode=t;e:{switch(u=GH(n,r),n){case"dialog":ki("cancel",t),ki("close",t),i=r;break;case"iframe":case"object":case"embed":ki("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ky.length;i++)ki(Ky[i],t);i=r;break;case"source":ki("error",t),i=r;break;case"img":case"image":case"link":ki("error",t),ki("load",t),i=r;break;case"details":ki("toggle",t),i=r;break;case"input":Qme(t,r),i=BH(t,r),ki("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=es({},r,{value:void 0}),ki("invalid",t);break;case"textarea":e2e(t,r),i=VH(t,r),ki("invalid",t);break;default:i=r}HH(n,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var f=d[o];o==="style"?qge(t,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Kge(t,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&bb(t,f):typeof f=="number"&&bb(t,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yb.hasOwnProperty(o)?f!=null&&o==="onScroll"&&ki("scroll",t):f!=null&&MW(t,o,f,u))}switch(n){case"input":FM(t),Jme(t,r,!1);break;case"textarea":FM(t),t2e(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qf(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?U4(t,!!r.multiple,o,!1):r.defaultValue!=null&&U4(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gA)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ko(e),null;case 6:if(t&&e.stateNode!=null)b8e(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Yt(166));if(n=_2(Ab.current),_2(Mc.current),$M(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ec]=e,(o=r.nodeValue!==n)&&(t=w0,t!==null))switch(t.tag){case 3:WM(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&WM(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ec]=e,e.stateNode=r}return Ko(e),null;case 13:if(Oi(Xi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fi&&_0!==null&&e.mode&1&&!(e.flags&128))Nve(),J4(),e.flags|=98560,o=!1;else if(o=$M(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Yt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Yt(317));o[Ec]=e}else J4(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ko(e),o=!1}else _u!==null&&(EG(_u),_u=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xi.current&1?Ks===0&&(Ks=3):c$())),e.updateQueue!==null&&(e.flags|=4),Ko(e),null);case 4:return tg(),gG(t,e),t===null&&Pb(e.stateNode.containerInfo),Ko(e),null;case 10:return KW(e.type._context),Ko(e),null;case 17:return e0(e.type)&&vA(),Ko(e),null;case 19:if(Oi(Xi),o=e.memoizedState,o===null)return Ko(e),null;if(r=(e.flags&128)!==0,u=o.rendering,u===null)if(r)xy(o,!1);else{if(Ks!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=EA(t),u!==null){for(e.flags|=128,xy(o,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return bi(Xi,Xi.current&1|2),e.child}t=t.sibling}o.tail!==null&&Cs()>rg&&(e.flags|=128,r=!0,xy(o,!1),e.lanes=4194304)}else{if(!r)if(t=EA(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xy(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Fi)return Ko(e),null}else 2*Cs()-o.renderingStartTime>rg&&n!==1073741824&&(e.flags|=128,r=!0,xy(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(n=o.last,n!==null?n.sibling=u:e.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Cs(),e.sibling=null,n=Xi.current,bi(Xi,r?n&1|2:n&1),e):(Ko(e),null);case 22:case 23:return u$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?b0&1073741824&&(Ko(e),e.subtreeFlags&6&&(e.flags|=8192)):Ko(e),null;case 24:return null;case 25:return null}throw Error(Yt(156,e.tag))}function CDe(t,e){switch(HW(e),e.tag){case 1:return e0(e.type)&&vA(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tg(),Oi(Ja),Oi(na),QW(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ZW(e),null;case 13:if(Oi(Xi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Yt(340));J4()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oi(Xi),null;case 4:return tg(),null;case 10:return KW(e.type._context),null;case 22:case 23:return u$(),null;case 24:return null;default:return null}}var qM=!1,Qo=!1,PDe=typeof WeakSet=="function"?WeakSet:Set,wn=null;function T4(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){os(t,e,r)}else n.current=null}function vG(t,e,n){try{n()}catch(r){os(t,e,r)}}var G2e=!1;function TDe(t,e){if(eG=pA,t=Sve(),VW(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,d=-1,f=-1,v=0,x=0,S=t,M=null;t:for(;;){for(var D;S!==n||i!==0&&S.nodeType!==3||(d=u+i),S!==o||r!==0&&S.nodeType!==3||(f=u+r),S.nodeType===3&&(u+=S.nodeValue.length),(D=S.firstChild)!==null;)M=S,S=D;for(;;){if(S===t)break t;if(M===n&&++v===i&&(d=u),M===o&&++x===r&&(f=u),(D=S.nextSibling)!==null)break;S=M,M=S.parentNode}S=D}n=d===-1||f===-1?null:{start:d,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(tG={focusedElem:t,selectionRange:n},pA=!1,wn=e;wn!==null;)if(e=wn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,wn=t;else for(;wn!==null;){e=wn;try{var G=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var B=G.memoizedProps,L=G.memoizedState,U=e.stateNode,C=U.getSnapshotBeforeUpdate(e.elementType===e.type?B:yu(e.type,B),L);U.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var H=e.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Yt(163))}}catch(X){os(e,e.return,X)}if(t=e.sibling,t!==null){t.return=e.return,wn=t;break}wn=e.return}return G=G2e,G2e=!1,G}function ib(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&vG(e,n,o)}i=i.next}while(i!==r)}}function xI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yG(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _8e(t){var e=t.alternate;e!==null&&(t.alternate=null,_8e(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ec],delete e[Mb],delete e[iG],delete e[uDe],delete e[cDe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function w8e(t){return t.tag===5||t.tag===3||t.tag===4}function W2e(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||w8e(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bG(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gA));else if(r!==4&&(t=t.child,t!==null))for(bG(t,e,n),t=t.sibling;t!==null;)bG(t,e,n),t=t.sibling}function _G(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_G(t,e,n),t=t.sibling;t!==null;)_G(t,e,n),t=t.sibling}var ko=null,bu=!1;function ef(t,e,n){for(n=n.child;n!==null;)x8e(t,e,n),n=n.sibling}function x8e(t,e,n){if(Tc&&typeof Tc.onCommitFiberUnmount=="function")try{Tc.onCommitFiberUnmount(fI,n)}catch{}switch(n.tag){case 5:Qo||T4(n,e);case 6:var r=ko,i=bu;ko=null,ef(t,e,n),ko=r,bu=i,ko!==null&&(bu?(t=ko,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ko.removeChild(n.stateNode));break;case 18:ko!==null&&(bu?(t=ko,n=n.stateNode,t.nodeType===8?ZV(t.parentNode,n):t.nodeType===1&&ZV(t,n),Sb(t)):ZV(ko,n.stateNode));break;case 4:r=ko,i=bu,ko=n.stateNode.containerInfo,bu=!0,ef(t,e,n),ko=r,bu=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&vG(n,e,u),i=i.next}while(i!==r)}ef(t,e,n);break;case 1:if(!Qo&&(T4(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){os(n,e,d)}ef(t,e,n);break;case 21:ef(t,e,n);break;case 22:n.mode&1?(Qo=(r=Qo)||n.memoizedState!==null,ef(t,e,n),Qo=r):ef(t,e,n);break;default:ef(t,e,n)}}function $2e(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PDe),e.forEach(function(r){var i=NDe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pu(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,u=e,d=u;e:for(;d!==null;){switch(d.tag){case 5:ko=d.stateNode,bu=!1;break e;case 3:ko=d.stateNode.containerInfo,bu=!0;break e;case 4:ko=d.stateNode.containerInfo,bu=!0;break e}d=d.return}if(ko===null)throw Error(Yt(160));x8e(o,u,i),ko=null,bu=!1;var f=i.alternate;f!==null&&(f.return=null),i.return=null}catch(v){os(i,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S8e(e,t),e=e.sibling}function S8e(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pu(e,t),_c(t),r&4){try{ib(3,t,t.return),xI(3,t)}catch(B){os(t,t.return,B)}try{ib(5,t,t.return)}catch(B){os(t,t.return,B)}}break;case 1:pu(e,t),_c(t),r&512&&n!==null&&T4(n,n.return);break;case 5:if(pu(e,t),_c(t),r&512&&n!==null&&T4(n,n.return),t.flags&32){var i=t.stateNode;try{bb(i,"")}catch(B){os(t,t.return,B)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,u=n!==null?n.memoizedProps:o,d=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&Gge(i,o),GH(d,u);var v=GH(d,o);for(u=0;u<f.length;u+=2){var x=f[u],S=f[u+1];x==="style"?qge(i,S):x==="dangerouslySetInnerHTML"?Kge(i,S):x==="children"?bb(i,S):MW(i,x,S,v)}switch(d){case"input":UH(i,o);break;case"textarea":Wge(i,o);break;case"select":var M=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?U4(i,!!o.multiple,D,!1):M!==!!o.multiple&&(o.defaultValue!=null?U4(i,!!o.multiple,o.defaultValue,!0):U4(i,!!o.multiple,o.multiple?[]:"",!1))}i[Mb]=o}catch(B){os(t,t.return,B)}}break;case 6:if(pu(e,t),_c(t),r&4){if(t.stateNode===null)throw Error(Yt(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(B){os(t,t.return,B)}}break;case 3:if(pu(e,t),_c(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sb(e.containerInfo)}catch(B){os(t,t.return,B)}break;case 4:pu(e,t),_c(t);break;case 13:pu(e,t),_c(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(a$=Cs())),r&4&&$2e(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(Qo=(v=Qo)||x,pu(e,t),Qo=v):pu(e,t),_c(t),r&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!x&&t.mode&1)for(wn=t,x=t.child;x!==null;){for(S=wn=x;wn!==null;){switch(M=wn,D=M.child,M.tag){case 0:case 11:case 14:case 15:ib(4,M,M.return);break;case 1:T4(M,M.return);var G=M.stateNode;if(typeof G.componentWillUnmount=="function"){r=M,n=M.return;try{e=r,G.props=e.memoizedProps,G.state=e.memoizedState,G.componentWillUnmount()}catch(B){os(r,n,B)}}break;case 5:T4(M,M.return);break;case 22:if(M.memoizedState!==null){X2e(S);continue}}D!==null?(D.return=M,wn=D):X2e(S)}x=x.sibling}e:for(x=null,S=t;;){if(S.tag===5){if(x===null){x=S;try{i=S.stateNode,v?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=S.stateNode,f=S.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,d.style.display=Xge("display",u))}catch(B){os(t,t.return,B)}}}else if(S.tag===6){if(x===null)try{S.stateNode.nodeValue=v?"":S.memoizedProps}catch(B){os(t,t.return,B)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===t)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break e;for(;S.sibling===null;){if(S.return===null||S.return===t)break e;x===S&&(x=null),S=S.return}x===S&&(x=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:pu(e,t),_c(t),r&4&&$2e(t);break;case 21:break;default:pu(e,t),_c(t)}}function _c(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(w8e(n)){var r=n;break e}n=n.return}throw Error(Yt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bb(i,""),r.flags&=-33);var o=W2e(t);_G(t,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,d=W2e(t);bG(t,d,u);break;default:throw Error(Yt(161))}}catch(f){os(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MDe(t,e,n){wn=t,E8e(t)}function E8e(t,e,n){for(var r=(t.mode&1)!==0;wn!==null;){var i=wn,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||qM;if(!u){var d=i.alternate,f=d!==null&&d.memoizedState!==null||Qo;d=qM;var v=Qo;if(qM=u,(Qo=f)&&!v)for(wn=i;wn!==null;)u=wn,f=u.child,u.tag===22&&u.memoizedState!==null?q2e(i):f!==null?(f.return=u,wn=f):q2e(i);for(;o!==null;)wn=o,E8e(o),o=o.sibling;wn=i,qM=d,Qo=v}K2e(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,wn=o):K2e(t)}}function K2e(t){for(;wn!==null;){var e=wn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qo||xI(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qo)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yu(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&A2e(e,o,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}A2e(e,u,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var x=v.memoizedState;if(x!==null){var S=x.dehydrated;S!==null&&Sb(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Yt(163))}Qo||e.flags&512&&yG(e)}catch(M){os(e,e.return,M)}}if(e===t){wn=null;break}if(n=e.sibling,n!==null){n.return=e.return,wn=n;break}wn=e.return}}function X2e(t){for(;wn!==null;){var e=wn;if(e===t){wn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,wn=n;break}wn=e.return}}function q2e(t){for(;wn!==null;){var e=wn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xI(4,e)}catch(f){os(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(f){os(e,i,f)}}var o=e.return;try{yG(e)}catch(f){os(e,o,f)}break;case 5:var u=e.return;try{yG(e)}catch(f){os(e,u,f)}}}catch(f){os(e,e.return,f)}if(e===t){wn=null;break}var d=e.sibling;if(d!==null){d.return=e.return,wn=d;break}wn=e.return}}var kDe=Math.ceil,TA=wh.ReactCurrentDispatcher,s$=wh.ReactCurrentOwner,wl=wh.ReactCurrentBatchConfig,jr=0,uo=null,Ns=null,Ao=0,b0=0,M4=i1(0),Ks=0,Ob=null,L2=0,SI=0,o$=0,sb=null,Ya=null,a$=0,rg=1/0,Yd=null,MA=!1,wG=null,Uf=null,YM=!1,Af=null,kA=0,ob=0,xG=null,qk=-1,Yk=0;function Ma(){return jr&6?Cs():qk!==-1?qk:qk=Cs()}function zf(t){return t.mode&1?jr&2&&Ao!==0?Ao&-Ao:hDe.transition!==null?(Yk===0&&(Yk=ave()),Yk):(t=si,t!==0||(t=window.event,t=t===void 0?16:fve(t.type)),t):1}function xu(t,e,n,r){if(50<ob)throw ob=0,xG=null,Error(Yt(185));l_(t,n,r),(!(jr&2)||t!==uo)&&(t===uo&&(!(jr&2)&&(SI|=n),Ks===4&&Tf(t,Ao)),t0(t,r),n===1&&jr===0&&!(e.mode&1)&&(rg=Cs()+500,bI&&s1()))}function t0(t,e){var n=t.callbackNode;hRe(t,e);var r=hA(t,t===uo?Ao:0);if(r===0)n!==null&&i2e(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&i2e(n),e===1)t.tag===0?dDe(Y2e.bind(null,t)):Dve(Y2e.bind(null,t)),aDe(function(){!(jr&6)&&s1()}),n=null;else{switch(lve(r)){case 1:n=DW;break;case 4:n=sve;break;case 16:n=dA;break;case 536870912:n=ove;break;default:n=dA}n=R8e(n,C8e.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C8e(t,e){if(qk=-1,Yk=0,jr&6)throw Error(Yt(327));var n=t.callbackNode;if(G4()&&t.callbackNode!==n)return null;var r=hA(t,t===uo?Ao:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=AA(t,r);else{e=r;var i=jr;jr|=2;var o=T8e();(uo!==t||Ao!==e)&&(Yd=null,rg=Cs()+500,E2(t,e));do try{RDe();break}catch(d){P8e(t,d)}while(1);$W(),TA.current=o,jr=i,Ns!==null?e=0:(uo=null,Ao=0,e=Ks)}if(e!==0){if(e===2&&(i=qH(t),i!==0&&(r=i,e=SG(t,i))),e===1)throw n=Ob,E2(t,0),Tf(t,r),t0(t,Cs()),n;if(e===6)Tf(t,r);else{if(i=t.current.alternate,!(r&30)&&!ADe(i)&&(e=AA(t,r),e===2&&(o=qH(t),o!==0&&(r=o,e=SG(t,o))),e===1))throw n=Ob,E2(t,0),Tf(t,r),t0(t,Cs()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Yt(345));case 2:h2(t,Ya,Yd);break;case 3:if(Tf(t,r),(r&130023424)===r&&(e=a$+500-Cs(),10<e)){if(hA(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ma(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rG(h2.bind(null,t,Ya,Yd),e);break}h2(t,Ya,Yd);break;case 4:if(Tf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var u=31-wu(r);o=1<<u,u=e[u],u>i&&(i=u),r&=~o}if(r=i,r=Cs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kDe(r/1960))-r,10<r){t.timeoutHandle=rG(h2.bind(null,t,Ya,Yd),r);break}h2(t,Ya,Yd);break;case 5:h2(t,Ya,Yd);break;default:throw Error(Yt(329))}}}return t0(t,Cs()),t.callbackNode===n?C8e.bind(null,t):null}function SG(t,e){var n=sb;return t.current.memoizedState.isDehydrated&&(E2(t,e).flags|=256),t=AA(t,e),t!==2&&(e=Ya,Ya=n,e!==null&&EG(e)),t}function EG(t){Ya===null?Ya=t:Ya.push.apply(Ya,t)}function ADe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Su(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tf(t,e){for(e&=~o$,e&=~SI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wu(e),r=1<<n;t[n]=-1,e&=~r}}function Y2e(t){if(jr&6)throw Error(Yt(327));G4();var e=hA(t,0);if(!(e&1))return t0(t,Cs()),null;var n=AA(t,e);if(t.tag!==0&&n===2){var r=qH(t);r!==0&&(e=r,n=SG(t,r))}if(n===1)throw n=Ob,E2(t,0),Tf(t,e),t0(t,Cs()),n;if(n===6)throw Error(Yt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,h2(t,Ya,Yd),t0(t,Cs()),null}function l$(t,e){var n=jr;jr|=1;try{return t(e)}finally{jr=n,jr===0&&(rg=Cs()+500,bI&&s1())}}function N2(t){Af!==null&&Af.tag===0&&!(jr&6)&&G4();var e=jr;jr|=1;var n=wl.transition,r=si;try{if(wl.transition=null,si=1,t)return t()}finally{si=r,wl.transition=n,jr=e,!(jr&6)&&s1()}}function u$(){b0=M4.current,Oi(M4)}function E2(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oDe(n)),Ns!==null)for(n=Ns.return;n!==null;){var r=n;switch(HW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vA();break;case 3:tg(),Oi(Ja),Oi(na),QW();break;case 5:ZW(r);break;case 4:tg();break;case 13:Oi(Xi);break;case 19:Oi(Xi);break;case 10:KW(r.type._context);break;case 22:case 23:u$()}n=n.return}if(uo=t,Ns=t=Vf(t.current,null),Ao=b0=e,Ks=0,Ob=null,o$=SI=L2=0,Ya=sb=null,b2!==null){for(e=0;e<b2.length;e++)if(n=b2[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}b2=null}return t}function P8e(t,e){do{var n=Ns;try{if($W(),$k.current=PA,CA){for(var r=Zi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}CA=!1}if(O2=0,oo=Gs=Zi=null,rb=!1,Ib=0,s$.current=null,n===null||n.return===null){Ks=1,Ob=e,Ns=null;break}e:{var o=t,u=n.return,d=n,f=e;if(e=Ao,d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var v=f,x=d,S=x.tag;if(!(x.mode&1)&&(S===0||S===11||S===15)){var M=x.alternate;M?(x.updateQueue=M.updateQueue,x.memoizedState=M.memoizedState,x.lanes=M.lanes):(x.updateQueue=null,x.memoizedState=null)}var D=F2e(u);if(D!==null){D.flags&=-257,B2e(D,u,d,o,e),D.mode&1&&N2e(o,v,e),e=D,f=v;var G=e.updateQueue;if(G===null){var B=new Set;B.add(f),e.updateQueue=B}else G.add(f);break e}else{if(!(e&1)){N2e(o,v,e),c$();break e}f=Error(Yt(426))}}else if(Fi&&d.mode&1){var L=F2e(u);if(L!==null){!(L.flags&65536)&&(L.flags|=256),B2e(L,u,d,o,e),GW(ng(f,d));break e}}o=f=ng(f,d),Ks!==4&&(Ks=2),sb===null?sb=[o]:sb.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var U=u8e(o,f,e);k2e(o,U);break e;case 1:d=f;var C=o.type,H=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Uf===null||!Uf.has(H)))){o.flags|=65536,e&=-e,o.lanes|=e;var X=c8e(o,d,e);k2e(o,X);break e}}o=o.return}while(o!==null)}k8e(n)}catch(fe){e=fe,Ns===n&&n!==null&&(Ns=n=n.return);continue}break}while(1)}function T8e(){var t=TA.current;return TA.current=PA,t===null?PA:t}function c$(){(Ks===0||Ks===3||Ks===2)&&(Ks=4),uo===null||!(L2&268435455)&&!(SI&268435455)||Tf(uo,Ao)}function AA(t,e){var n=jr;jr|=2;var r=T8e();(uo!==t||Ao!==e)&&(Yd=null,E2(t,e));do try{IDe();break}catch(i){P8e(t,i)}while(1);if($W(),jr=n,TA.current=r,Ns!==null)throw Error(Yt(261));return uo=null,Ao=0,Ks}function IDe(){for(;Ns!==null;)M8e(Ns)}function RDe(){for(;Ns!==null&&!rRe();)M8e(Ns)}function M8e(t){var e=I8e(t.alternate,t,b0);t.memoizedProps=t.pendingProps,e===null?k8e(t):Ns=e,s$.current=null}function k8e(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CDe(n,e),n!==null){n.flags&=32767,Ns=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ks=6,Ns=null;return}}else if(n=EDe(n,e,b0),n!==null){Ns=n;return}if(e=e.sibling,e!==null){Ns=e;return}Ns=e=t}while(e!==null);Ks===0&&(Ks=5)}function h2(t,e,n){var r=si,i=wl.transition;try{wl.transition=null,si=1,DDe(t,e,n,r)}finally{wl.transition=i,si=r}return null}function DDe(t,e,n,r){do G4();while(Af!==null);if(jr&6)throw Error(Yt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Yt(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(pRe(t,o),t===uo&&(Ns=uo=null,Ao=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||YM||(YM=!0,R8e(dA,function(){return G4(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=wl.transition,wl.transition=null;var u=si;si=1;var d=jr;jr|=4,s$.current=null,TDe(t,n),S8e(n,t),JRe(tG),pA=!!eG,tG=eG=null,t.current=n,MDe(n),iRe(),jr=d,si=u,wl.transition=o}else t.current=n;if(YM&&(YM=!1,Af=t,kA=i),o=t.pendingLanes,o===0&&(Uf=null),aRe(n.stateNode),t0(t,Cs()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(MA)throw MA=!1,t=wG,wG=null,t;return kA&1&&t.tag!==0&&G4(),o=t.pendingLanes,o&1?t===xG?ob++:(ob=0,xG=t):ob=0,s1(),null}function G4(){if(Af!==null){var t=lve(kA),e=wl.transition,n=si;try{if(wl.transition=null,si=16>t?16:t,Af===null)var r=!1;else{if(t=Af,Af=null,kA=0,jr&6)throw Error(Yt(331));var i=jr;for(jr|=4,wn=t.current;wn!==null;){var o=wn,u=o.child;if(wn.flags&16){var d=o.deletions;if(d!==null){for(var f=0;f<d.length;f++){var v=d[f];for(wn=v;wn!==null;){var x=wn;switch(x.tag){case 0:case 11:case 15:ib(8,x,o)}var S=x.child;if(S!==null)S.return=x,wn=S;else for(;wn!==null;){x=wn;var M=x.sibling,D=x.return;if(_8e(x),x===v){wn=null;break}if(M!==null){M.return=D,wn=M;break}wn=D}}}var G=o.alternate;if(G!==null){var B=G.child;if(B!==null){G.child=null;do{var L=B.sibling;B.sibling=null,B=L}while(B!==null)}}wn=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,wn=u;else e:for(;wn!==null;){if(o=wn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ib(9,o,o.return)}var U=o.sibling;if(U!==null){U.return=o.return,wn=U;break e}wn=o.return}}var C=t.current;for(wn=C;wn!==null;){u=wn;var H=u.child;if(u.subtreeFlags&2064&&H!==null)H.return=u,wn=H;else e:for(u=C;wn!==null;){if(d=wn,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:xI(9,d)}}catch(fe){os(d,d.return,fe)}if(d===u){wn=null;break e}var X=d.sibling;if(X!==null){X.return=d.return,wn=X;break e}wn=d.return}}if(jr=i,s1(),Tc&&typeof Tc.onPostCommitFiberRoot=="function")try{Tc.onPostCommitFiberRoot(fI,t)}catch{}r=!0}return r}finally{si=n,wl.transition=e}}return!1}function Z2e(t,e,n){e=ng(n,e),e=u8e(t,e,1),t=Bf(t,e,1),e=Ma(),t!==null&&(l_(t,1,e),t0(t,e))}function os(t,e,n){if(t.tag===3)Z2e(t,t,n);else for(;e!==null;){if(e.tag===3){Z2e(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Uf===null||!Uf.has(r))){t=ng(n,t),t=c8e(e,t,1),e=Bf(e,t,1),t=Ma(),e!==null&&(l_(e,1,t),t0(e,t));break}}e=e.return}}function ODe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ma(),t.pingedLanes|=t.suspendedLanes&n,uo===t&&(Ao&n)===n&&(Ks===4||Ks===3&&(Ao&130023424)===Ao&&500>Cs()-a$?E2(t,0):o$|=n),t0(t,e)}function A8e(t,e){e===0&&(t.mode&1?(e=zM,zM<<=1,!(zM&130023424)&&(zM=4194304)):e=1);var n=Ma();t=fh(t,e),t!==null&&(l_(t,e,n),t0(t,n))}function LDe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A8e(t,n)}function NDe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Yt(314))}r!==null&&r.delete(e),A8e(t,n)}var I8e;I8e=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ja.current)Za=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Za=!1,SDe(t,e,n);Za=!!(t.flags&131072)}else Za=!1,Fi&&e.flags&1048576&&Ove(e,_A,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xk(t,e),t=e.pendingProps;var i=Q4(e,na.current);H4(e,n),i=e$(null,e,r,t,i,n);var o=t$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,e0(r)?(o=!0,yA(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qW(e),i.updater=_I,e.stateNode=i,i._reactInternals=e,cG(e,r,t,n),e=pG(null,e,r,!0,o,n)):(e.tag=0,Fi&&o&&jW(e),Sa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xk(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BDe(r),t=yu(r,t),i){case 0:e=hG(null,e,r,t,n);break e;case 1:e=V2e(null,e,r,t,n);break e;case 11:e=U2e(null,e,r,t,n);break e;case 14:e=z2e(null,e,r,yu(r.type,t),n);break e}throw Error(Yt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yu(r,i),hG(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yu(r,i),V2e(t,e,r,i,n);case 3:e:{if(f8e(e),t===null)throw Error(Yt(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Bve(t,e),SA(e,r,null,n);var u=e.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ng(Error(Yt(423)),e),e=j2e(t,e,r,n,i);break e}else if(r!==i){i=ng(Error(Yt(424)),e),e=j2e(t,e,r,n,i);break e}else for(_0=Ff(e.stateNode.containerInfo.firstChild),w0=e,Fi=!0,_u=null,n=jve(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(J4(),r===i){e=mh(t,e,n);break e}Sa(t,e,r,n)}e=e.child}return e;case 5:return Hve(e),t===null&&aG(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,u=i.children,nG(r,i)?u=null:o!==null&&nG(r,o)&&(e.flags|=32),p8e(t,e),Sa(t,e,u,n),e.child;case 6:return t===null&&aG(e),null;case 13:return m8e(t,e,n);case 4:return YW(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eg(e,null,r,n):Sa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yu(r,i),U2e(t,e,r,i,n);case 7:return Sa(t,e,e.pendingProps,n),e.child;case 8:return Sa(t,e,e.pendingProps.children,n),e.child;case 12:return Sa(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,u=i.value,bi(wA,r._currentValue),r._currentValue=u,o!==null)if(Su(o.value,u)){if(o.children===i.children&&!Ja.current){e=mh(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){u=o.child;for(var f=d.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=ah(-1,n&-n),f.tag=2;var v=o.updateQueue;if(v!==null){v=v.shared;var x=v.pending;x===null?f.next=f:(f.next=x.next,x.next=f),v.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),lG(o.return,n,e),d.lanes|=n;break}f=f.next}}else if(o.tag===10)u=o.type===e.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(Yt(341));u.lanes|=n,d=u.alternate,d!==null&&(d.lanes|=n),lG(u,n,e),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===e){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Sa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,H4(e,n),i=El(i),r=r(i),e.flags|=1,Sa(t,e,r,n),e.child;case 14:return r=e.type,i=yu(r,e.pendingProps),i=yu(r.type,i),z2e(t,e,r,i,n);case 15:return d8e(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yu(r,i),Xk(t,e),e.tag=1,e0(r)?(t=!0,yA(e)):t=!1,H4(e,n),zve(e,r,i),cG(e,r,i,n),pG(null,e,r,!0,t,n);case 19:return g8e(t,e,n);case 22:return h8e(t,e,n)}throw Error(Yt(156,e.tag))};function R8e(t,e){return ive(t,e)}function FDe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yl(t,e,n,r){return new FDe(t,e,n,r)}function d$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BDe(t){if(typeof t=="function")return d$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===AW)return 11;if(t===IW)return 14}return 2}function Vf(t,e){var n=t.alternate;return n===null?(n=yl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zk(t,e,n,r,i,o){var u=2;if(r=t,typeof t=="function")d$(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case y4:return C2(n.children,i,o,e);case kW:u=8,i|=8;break;case OH:return t=yl(12,n,e,i|2),t.elementType=OH,t.lanes=o,t;case LH:return t=yl(13,n,e,i),t.elementType=LH,t.lanes=o,t;case NH:return t=yl(19,n,e,i),t.elementType=NH,t.lanes=o,t;case Vge:return EI(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uge:u=10;break e;case zge:u=9;break e;case AW:u=11;break e;case IW:u=14;break e;case xf:u=16,r=null;break e}throw Error(Yt(130,t==null?t:typeof t,""))}return e=yl(u,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function C2(t,e,n,r){return t=yl(7,t,r,e),t.lanes=n,t}function EI(t,e,n,r){return t=yl(22,t,r,e),t.elementType=Vge,t.lanes=n,t.stateNode={isHidden:!1},t}function sj(t,e,n){return t=yl(6,t,null,e),t.lanes=n,t}function oj(t,e,n){return e=yl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UDe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zV(0),this.expirationTimes=zV(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zV(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function h$(t,e,n,r,i,o,u,d,f){return t=new UDe(t,e,n,d,f),e===1?(e=1,o===!0&&(e|=8)):e=0,o=yl(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qW(o),t}function zDe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v4,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function D8e(t){if(!t)return Yf;t=t._reactInternals;e:{if(Y2(t)!==t||t.tag!==1)throw Error(Yt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(e0(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Yt(171))}if(t.tag===1){var n=t.type;if(e0(n))return Rve(t,n,e)}return e}function O8e(t,e,n,r,i,o,u,d,f){return t=h$(n,r,!0,t,i,o,u,d,f),t.context=D8e(null),n=t.current,r=Ma(),i=zf(n),o=ah(r,i),o.callback=e??null,Bf(n,o,i),t.current.lanes=i,l_(t,i,r),t0(t,r),t}function CI(t,e,n,r){var i=e.current,o=Ma(),u=zf(i);return n=D8e(n),e.context===null?e.context=n:e.pendingContext=n,e=ah(o,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bf(i,e,u),t!==null&&(xu(t,i,u,o),Wk(t,i,u)),u}function IA(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Q2e(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function p$(t,e){Q2e(t,e),(t=t.alternate)&&Q2e(t,e)}function VDe(){return null}var L8e=typeof reportError=="function"?reportError:function(t){console.error(t)};function f$(t){this._internalRoot=t}PI.prototype.render=f$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Yt(409));CI(t,e,null,null)};PI.prototype.unmount=f$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;N2(function(){CI(null,t,null,null)}),e[ph]=null}};function PI(t){this._internalRoot=t}PI.prototype.unstable_scheduleHydration=function(t){if(t){var e=dve();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pf.length&&e!==0&&e<Pf[n].priority;n++);Pf.splice(n,0,t),n===0&&pve(t)}};function m$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function TI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function J2e(){}function jDe(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var v=IA(u);o.call(v)}}var u=O8e(e,r,t,0,null,!1,!1,"",J2e);return t._reactRootContainer=u,t[ph]=u.current,Pb(t.nodeType===8?t.parentNode:t),N2(),u}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var d=r;r=function(){var v=IA(f);d.call(v)}}var f=h$(t,0,!1,null,null,!1,!1,"",J2e);return t._reactRootContainer=f,t[ph]=f.current,Pb(t.nodeType===8?t.parentNode:t),N2(function(){CI(e,f,n,r)}),f}function MI(t,e,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var d=i;i=function(){var f=IA(u);d.call(f)}}CI(e,u,t,i)}else u=jDe(n,e,t,i,r);return IA(u)}uve=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$y(e.pendingLanes);n!==0&&(OW(e,n|1),t0(e,Cs()),!(jr&6)&&(rg=Cs()+500,s1()))}break;case 13:N2(function(){var r=fh(t,1);if(r!==null){var i=Ma();xu(r,t,1,i)}}),p$(t,1)}};LW=function(t){if(t.tag===13){var e=fh(t,134217728);if(e!==null){var n=Ma();xu(e,t,134217728,n)}p$(t,134217728)}};cve=function(t){if(t.tag===13){var e=zf(t),n=fh(t,e);if(n!==null){var r=Ma();xu(n,t,e,r)}p$(t,e)}};dve=function(){return si};hve=function(t,e){var n=si;try{return si=t,e()}finally{si=n}};$H=function(t,e,n){switch(e){case"input":if(UH(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yI(r);if(!i)throw Error(Yt(90));Hge(r),UH(r,i)}}}break;case"textarea":Wge(t,n);break;case"select":e=n.value,e!=null&&U4(t,!!n.multiple,e,!1)}};Qge=l$;Jge=N2;var HDe={usingClientEntryPoint:!1,Events:[c_,x4,yI,Yge,Zge,l$]},Sy={findFiberByHostInstance:y2,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},GDe={bundleType:Sy.bundleType,version:Sy.version,rendererPackageName:Sy.rendererPackageName,rendererConfig:Sy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nve(t),t===null?null:t.stateNode},findFiberByHostInstance:Sy.findFiberByHostInstance||VDe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ZM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ZM.isDisabled&&ZM.supportsFiber)try{fI=ZM.inject(GDe),Tc=ZM}catch{}}T0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HDe;T0.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m$(e))throw Error(Yt(200));return zDe(t,e,null,n)};T0.createRoot=function(t,e){if(!m$(t))throw Error(Yt(299));var n=!1,r="",i=L8e;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=h$(t,1,!1,null,null,n,!1,r,i),t[ph]=e.current,Pb(t.nodeType===8?t.parentNode:t),new f$(e)};T0.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Yt(188)):(t=Object.keys(t).join(","),Error(Yt(268,t)));return t=nve(e),t=t===null?null:t.stateNode,t};T0.flushSync=function(t){return N2(t)};T0.hydrate=function(t,e,n){if(!TI(e))throw Error(Yt(200));return MI(null,t,e,!0,n)};T0.hydrateRoot=function(t,e,n){if(!m$(t))throw Error(Yt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=L8e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=O8e(e,null,t,1,n??null,i,!1,o,u),t[ph]=e.current,Pb(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new PI(e)};T0.render=function(t,e,n){if(!TI(e))throw Error(Yt(200));return MI(null,t,e,!1,n)};T0.unmountComponentAtNode=function(t){if(!TI(t))throw Error(Yt(40));return t._reactRootContainer?(N2(function(){MI(null,null,t,!1,function(){t._reactRootContainer=null,t[ph]=null})}),!0):!1};T0.unstable_batchedUpdates=l$;T0.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!TI(n))throw Error(Yt(200));if(t==null||t._reactInternals===void 0)throw Error(Yt(38));return MI(t,e,n,!1,r)};T0.version="18.2.0-next-9e3b772b8-20220608";function N8e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N8e)}catch(t){console.error(t)}}N8e(),Oge.exports=T0;var WDe=Oge.exports,e9e=WDe;RH.createRoot=e9e.createRoot,RH.hydrateRoot=e9e.hydrateRoot;function QM(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var RA={exports:{}},zt={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(te,_e,Ue)=>_e in te?e(te,_e,{enumerable:!0,configurable:!0,writable:!0,value:Ue}):te[_e]=Ue,f=(te,_e)=>{for(var Ue in _e||(_e={}))o.call(_e,Ue)&&d(te,Ue,_e[Ue]);if(i)for(var Ue of i(_e))u.call(_e,Ue)&&d(te,Ue,_e[Ue]);return te},v=(te,_e)=>n(te,r(_e)),x=te=>e(te,"__esModule",{value:!0}),S=(te,_e)=>{x(te);for(var Ue in _e)e(te,Ue,{get:_e[Ue],enumerable:!0})};S(t,{Atom:()=>A1,PointerProxy:()=>Jg,Ticker:()=>Kc,getPointerParts:()=>Hc,isPointer:()=>F0,isPrism:()=>Wc,iterateAndCountTicks:()=>Qg,iterateOver:()=>I1,pointer:()=>Al,pointerToPrism:()=>Nu,prism:()=>Lu,val:()=>Nh});var M=Array.isArray,D=M,G=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,B=G,L=typeof self=="object"&&self&&self.Object===Object&&self,U=B||L||Function("return this")(),C=U,H=C.Symbol,X=H,fe=Object.prototype,q=fe.hasOwnProperty,pe=fe.toString,xe=X?X.toStringTag:void 0;function J(te){var _e=q.call(te,xe),Ue=te[xe];try{te[xe]=void 0;var bt=!0}catch{}var Hn=pe.call(te);return bt&&(_e?te[xe]=Ue:delete te[xe]),Hn}var ne=J,Pe=Object.prototype,mt=Pe.toString;function _t(te){return mt.call(te)}var de=_t,je="[object Null]",Me="[object Undefined]",Ct=X?X.toStringTag:void 0;function We(te){return te==null?te===void 0?Me:je:Ct&&Ct in Object(te)?ne(te):de(te)}var tt=We;function Ze(te){return te!=null&&typeof te=="object"}var dt=Ze,At="[object Symbol]";function pn(te){return typeof te=="symbol"||dt(te)&&tt(te)==At}var et=pn,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/;function rn(te,_e){if(D(te))return!1;var Ue=typeof te;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||te==null||et(te)?!0:Zt.test(te)||!wt.test(te)||_e!=null&&te in Object(_e)}var un=rn;function nt(te){var _e=typeof te;return te!=null&&(_e=="object"||_e=="function")}var Tt=nt,Mt="[object AsyncFunction]",Ve="[object Function]",or="[object GeneratorFunction]",$t="[object Proxy]";function Ht(te){if(!Tt(te))return!1;var _e=tt(te);return _e==Ve||_e==or||_e==Mt||_e==$t}var Kt=Ht,Kn=C["__core-js_shared__"],cn=Kn,ve=function(){var te=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}();function he(te){return!!ve&&ve in te}var Je=he,Dt=Function.prototype,Ft=Dt.toString;function Rt(te){if(te!=null){try{return Ft.call(te)}catch{}try{return te+""}catch{}}return""}var bn=Rt,sn=/[\\^$.*+?()[\]{}|]/g,dn=/^\[object .+?Constructor\]$/,Dn=Function.prototype,Xn=Object.prototype,Ut=Dn.toString,vr=Xn.hasOwnProperty,sr=RegExp("^"+Ut.call(vr).replace(sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tn(te){if(!Tt(te)||Je(te))return!1;var _e=Kt(te)?sr:dn;return _e.test(bn(te))}var kn=Tn;function on(te,_e){return te==null?void 0:te[_e]}var Un=on;function Ae(te,_e){var Ue=Un(te,_e);return kn(Ue)?Ue:void 0}var Xt=Ae,Jt=Xt(Object,"create"),mn=Jt;function Te(){this.__data__=mn?mn(null):{},this.size=0}var Wt=Te;function Nt(te){var _e=this.has(te)&&delete this.__data__[te];return this.size-=_e?1:0,_e}var gn=Nt,On="__lodash_hash_undefined__",cr=Object.prototype,ar=cr.hasOwnProperty;function pr(te){var _e=this.__data__;if(mn){var Ue=_e[te];return Ue===On?void 0:Ue}return ar.call(_e,te)?_e[te]:void 0}var Mr=pr,Zn=Object.prototype,oi=Zn.hasOwnProperty;function ns(te){var _e=this.__data__;return mn?_e[te]!==void 0:oi.call(_e,te)}var Mu=ns,Nc="__lodash_hash_undefined__";function Tl(te,_e){var Ue=this.__data__;return this.size+=this.has(te)?0:1,Ue[te]=mn&&_e===void 0?Nc:_e,this}var Sh=Tl;function ia(te){var _e=-1,Ue=te==null?0:te.length;for(this.clear();++_e<Ue;){var bt=te[_e];this.set(bt[0],bt[1])}}ia.prototype.clear=Wt,ia.prototype.delete=gn,ia.prototype.get=Mr,ia.prototype.has=Mu,ia.prototype.set=Sh;var ku=ia;function Fc(){this.__data__=[],this.size=0}var h1=Fc;function r0(te,_e){return te===_e||te!==te&&_e!==_e}var Eh=r0;function be(te,_e){for(var Ue=te.length;Ue--;)if(Eh(te[Ue][0],_e))return Ue;return-1}var Qe=be,yt=Array.prototype,gt=yt.splice;function ht(te){var _e=this.__data__,Ue=Qe(_e,te);if(Ue<0)return!1;var bt=_e.length-1;return Ue==bt?_e.pop():gt.call(_e,Ue,1),--this.size,!0}var hn=ht;function Cn(te){var _e=this.__data__,Ue=Qe(_e,te);return Ue<0?void 0:_e[Ue][1]}var Nn=Cn;function jn(te){return Qe(this.__data__,te)>-1}var rr=jn;function qn(te,_e){var Ue=this.__data__,bt=Qe(Ue,te);return bt<0?(++this.size,Ue.push([te,_e])):Ue[bt][1]=_e,this}var Fn=qn;function xr(te){var _e=-1,Ue=te==null?0:te.length;for(this.clear();++_e<Ue;){var bt=te[_e];this.set(bt[0],bt[1])}}xr.prototype.clear=h1,xr.prototype.delete=hn,xr.prototype.get=Nn,xr.prototype.has=rr,xr.prototype.set=Fn;var Bs=xr,pi=Xt(C,"Map"),Do=pi;function Gr(){this.size=0,this.__data__={hash:new ku,map:new(Do||Bs),string:new ku}}var $n=Gr;function Au(te){var _e=typeof te;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?te!=="__proto__":te===null}var Wr=Au;function Oo(te,_e){var Ue=te.__data__;return Wr(_e)?Ue[typeof _e=="string"?"string":"hash"]:Ue.map}var Ml=Oo;function co(te){var _e=Ml(this,te).delete(te);return this.size-=_e?1:0,_e}var D0=co;function wi(te){return Ml(this,te).get(te)}var Na=wi;function Iu(te){return Ml(this,te).has(te)}var Us=Iu;function Ru(te,_e){var Ue=Ml(this,te),bt=Ue.size;return Ue.set(te,_e),this.size+=Ue.size==bt?0:1,this}var Bc=Ru;function Fa(te){var _e=-1,Ue=te==null?0:te.length;for(this.clear();++_e<Ue;){var bt=te[_e];this.set(bt[0],bt[1])}}Fa.prototype.clear=$n,Fa.prototype.delete=D0,Fa.prototype.get=Na,Fa.prototype.has=Us,Fa.prototype.set=Bc;var p1=Fa,Ch="Expected a function";function f1(te,_e){if(typeof te!="function"||_e!=null&&typeof _e!="function")throw new TypeError(Ch);var Ue=function(){var bt=arguments,Hn=_e?_e.apply(this,bt):bt[0],Ir=Ue.cache;if(Ir.has(Hn))return Ir.get(Hn);var Ms=te.apply(this,bt);return Ue.cache=Ir.set(Hn,Ms)||Ir,Ms};return Ue.cache=new(f1.Cache||p1),Ue}f1.Cache=p1;var Dg=f1,O0=500;function Uc(te){var _e=Dg(te,function(bt){return Ue.size===O0&&Ue.clear(),bt}),Ue=_e.cache;return _e}var Og=Uc,zc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s9=/\\(\\)?/g,o9=Og(function(te){var _e=[];return te.charCodeAt(0)===46&&_e.push(""),te.replace(zc,function(Ue,bt,Hn,Ir){_e.push(Hn?Ir.replace(s9,"$1"):bt||Ue)}),_e}),L0=o9;function a9(te,_e){for(var Ue=-1,bt=te==null?0:te.length,Hn=Array(bt);++Ue<bt;)Hn[Ue]=_e(te[Ue],Ue,te);return Hn}var Lg=a9,Vc=1/0,m1=X?X.prototype:void 0,g1=m1?m1.toString:void 0;function v1(te){if(typeof te=="string")return te;if(D(te))return Lg(te,v1)+"";if(et(te))return g1?g1.call(te):"";var _e=te+"";return _e=="0"&&1/te==-Vc?"-0":_e}var l9=v1;function u9(te){return te==null?"":l9(te)}var c9=u9;function d9(te,_e){return D(te)?te:un(te,_e)?[te]:L0(c9(te))}var Ng=d9,Du=1/0;function jc(te){if(typeof te=="string"||et(te))return te;var _e=te+"";return _e=="0"&&1/te==-Du?"-0":_e}var Fg=jc;function y1(te,_e){_e=Ng(_e,te);for(var Ue=0,bt=_e.length;te!=null&&Ue<bt;)te=te[Fg(_e[Ue++])];return Ue&&Ue==bt?te:void 0}var N0=y1;function kl(te,_e,Ue){var bt=te==null?void 0:N0(te,_e);return bt===void 0?Ue:bt}var h9=kl;function Ph(te,_e){return function(Ue){return te(_e(Ue))}}var Bg=Ph,Ug=Bg(Object.getPrototypeOf,Object),p9=Ug,zg="[object Object]",Vg=Function.prototype,f9=Object.prototype,m9=Vg.toString,g9=f9.hasOwnProperty,b1=m9.call(Object);function v9(te){if(!dt(te)||tt(te)!=zg)return!1;var _e=p9(te);if(_e===null)return!0;var Ue=g9.call(_e,"constructor")&&_e.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&m9.call(Ue)==b1}var y9=v9;function b9(te){var _e=te==null?0:te.length;return _e?te[_e-1]:void 0}var _1=b9,Th=new WeakMap,Ou=new WeakMap,_9=Symbol("pointerMeta"),jg={get(te,_e){if(_e===_9)return Th.get(te);let Ue=Ou.get(te);Ue||(Ue=new Map,Ou.set(te,Ue));const bt=Ue.get(_e);if(bt!==void 0)return bt;const Hn=Th.get(te),Ir=Gc({root:Hn.root,path:[...Hn.path,_e]});return Ue.set(_e,Ir),Ir}},Ba=te=>te[_9],Hc=te=>{const{root:_e,path:Ue}=Ba(te);return{root:_e,path:Ue}};function Gc(te){var _e;const Ue={root:te.root,path:(_e=te.path)!=null?_e:[]},bt={};return Th.set(bt,Ue),new Proxy(bt,jg)}var Al=Gc,F0=te=>te&&!!Ba(te);function w1(te,_e,Ue){return _e.length===0?Ue(te):Il(te,_e,Ue)}var Il=(te,_e,Ue)=>{if(_e.length===0)return Ue(te);if(Array.isArray(te)){let[bt,...Hn]=_e;bt=parseInt(String(bt),10),isNaN(bt)&&(bt=0);const Ir=te[bt],Ms=Il(Ir,Hn,Ue);if(Ir===Ms)return te;const sa=[...te];return sa.splice(bt,1,Ms),sa}else if(typeof te=="object"&&te!==null){const[bt,...Hn]=_e,Ir=te[bt],Ms=Il(Ir,Hn,Ue);return Ir===Ms?te:v(f({},te),{[bt]:Ms})}else{const[bt,...Hn]=_e;return{[bt]:Il(void 0,Hn,Ue)}}},hs=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const te=this._head;if(te)return this._head=te.next,te.data}push(te){const _e={next:this._head,data:te};this._head=_e}};function Wc(te){return!!(te&&te.isPrism&&te.isPrism===!0)}function Mh(){const te=()=>{},_e=new hs,Ue=te;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{_e.push(Ue)},stopIgnoringDependencies:()=>{_e.peek()!==Ue||_e.pop()},reportResolutionStart:Fu=>{const Bu=_e.peek();Bu&&Bu(Fu),_e.push(Ue)},reportResolutionEnd:Fu=>{_e.pop()},pushCollector:Fu=>{_e.push(Fu)},popCollector:Fu=>{if(_e.peek()!==Fu)throw new Error("Popped collector is not on top of the stack");_e.pop()}}}function Hg(){const te="__dataverse_discoveryMechanism_sharedStack",_e=typeof window<"u"?window:typeof Ki<"u"?Ki:{};if(_e){const Ue=_e[te];if(Ue&&typeof Ue=="object"&&Ue.type==="Dataverse_discoveryMechanism")return Ue;{const bt=Mh();return _e[te]=bt,bt}}else return Mh()}var{startIgnoringDependencies:Rl,stopIgnoringDependencies:B0,reportResolutionEnd:x1,reportResolutionStart:Gg,pushCollector:kh,popCollector:Wg}=Hg(),w9=()=>{},x9=class{constructor(te,_e){this._fn=te,this._prismInstance=_e,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Ah(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=Ue=>{this._possiblyStaleDeps.add(Ue),this._markAsStale()};for(const Ue of this._dependencies)Ue._addDependent(this._reactToDependencyGoingStale);Rl(),this.getValue(),B0()}get hasDependents(){return this._dependents.size>0}removeDependent(te){this._dependents.delete(te)}addDependent(te){this._dependents.add(te)}destroy(){for(const te of this._dependencies)te._removeDependent(this._reactToDependencyGoingStale);E1(this._scope)}getValue(){if(!this._isFresh){const te=this._recalculate();this._lastValue=te,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let te;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let bt=!1;Rl();for(const Hn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Hn)!==Hn.getValue()){bt=!0;break}if(B0(),this._possiblyStaleDeps.clear(),!bt)return this._lastValue}const _e=new Set;this._cacheOfDendencyValues.clear();const Ue=bt=>{_e.add(bt),this._addDependency(bt)};kh(Ue),ps.push(this._scope);try{te=this._fn()}catch(bt){console.error(bt)}finally{ps.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}Wg(Ue);for(const bt of this._dependencies)_e.has(bt)||this._removeDependency(bt);this._dependencies=_e,Rl();for(const bt of _e)this._cacheOfDendencyValues.set(bt,bt.getValue());return B0(),te}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const te of this._dependents)te(this._prismInstance)}}_addDependency(te){this._dependencies.has(te)||(this._dependencies.add(te),te._addDependent(this._reactToDependencyGoingStale))}_removeDependency(te){this._dependencies.has(te)&&(this._dependencies.delete(te),te._removeDependent(this._reactToDependencyGoingStale))}},S1={},$g=class{constructor(te){this._fn=te,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(te,_e,Ue=!1){const bt=()=>{te.onThisOrNextTick(Ir)};let Hn=S1;const Ir=()=>{const sa=this.getValue();sa!==Hn&&(Hn=sa,_e(sa))};return this._addDependent(bt),Ue&&(Hn=this.getValue(),_e(Hn)),()=>{this._removeDependent(bt),te.offThisOrNextTick(Ir),te.offNextTick(Ir)}}onStale(te){const _e=()=>{this._removeDependent(Ue)},Ue=()=>te();return this._addDependent(Ue),_e}keepHot(){return this.onStale(()=>{})}_addDependent(te){this._state.hot||this._goHot(),this._state.handle.addDependent(te)}_goHot(){const te=new x9(this._fn,this);this._state={hot:!0,handle:te}}_removeDependent(te){const _e=this._state;if(!_e.hot)return;const Ue=_e.handle;Ue.removeDependent(te),Ue.hasDependents||(this._state={hot:!1,handle:void 0},Ue.destroy())}getValue(){Gg(this);const te=this._state;let _e;return te.hot?_e=te.handle.getValue():_e=$c(this._fn),x1(this),_e}},Ah=class{constructor(te){this._hotHandle=te,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(te,_e){let Ue=this._refs.get(te);if(Ue!==void 0)return Ue;{const bt={current:_e};return this._refs.set(te,bt),bt}}effect(te,_e,Ue){let bt=this.effects.get(te);bt===void 0&&(bt={cleanup:w9,deps:void 0},this.effects.set(te,bt)),P1(bt.deps,Ue)&&(bt.cleanup(),Rl(),bt.cleanup=Ih(_e,w9).value,B0(),bt.deps=Ue)}memo(te,_e,Ue){let bt=this.memos.get(te);return bt===void 0&&(bt={cachedValue:null,deps:void 0},this.memos.set(te,bt)),P1(bt.deps,Ue)&&(Rl(),bt.cachedValue=Ih(_e,void 0).value,B0(),bt.deps=Ue),bt.cachedValue}state(te,_e){const{value:Ue,setValue:bt}=this.memo("state/"+te,()=>{const Hn={current:_e};return{value:Hn,setValue:Ms=>{Hn.current=Ms,this._hotHandle.forceStale()}}},[]);return[Ue.current,bt]}sub(te){return this.subs[te]||(this.subs[te]=new Ah(this._hotHandle)),this.subs[te]}cleanupEffects(){for(const te of this.effects.values())Ih(te.cleanup,void 0);this.effects.clear()}source(te,_e){const Ue="$$source/blah";return this.effect(Ue,()=>te(()=>{this._hotHandle.forceStale()}),[te]),_e()}};function E1(te){for(const _e of Object.values(te.subs))E1(_e);te.cleanupEffects()}function Ih(te,_e){try{return{value:te(),ok:!0}}catch(Ue){return setTimeout(function(){throw Ue}),{value:_e,ok:!1}}}var ps=new hs;function Kg(te,_e){const Ue=ps.peek();if(!Ue)throw new Error("prism.ref() is called outside of a prism() call.");return Ue.ref(te,_e)}function C1(te,_e,Ue){const bt=ps.peek();if(!bt)throw new Error("prism.effect() is called outside of a prism() call.");return bt.effect(te,_e,Ue)}function P1(te,_e){if(te===void 0||_e===void 0)return!0;const Ue=te.length;if(Ue!==_e.length)return!0;for(let bt=0;bt<Ue;bt++)if(te[bt]!==_e[bt])return!0;return!1}function T1(te,_e,Ue){const bt=ps.peek();if(!bt)throw new Error("prism.memo() is called outside of a prism() call.");return bt.memo(te,_e,Ue)}function fs(te,_e){const Ue=ps.peek();if(!Ue)throw new Error("prism.state() is called outside of a prism() call.");return Ue.state(te,_e)}function Rh(){if(!ps.peek())throw new Error("The parent function is called outside of a prism() call.")}function Xg(te,_e){const Ue=ps.peek();if(!Ue)throw new Error("prism.scope() is called outside of a prism() call.");const bt=Ue.sub(te);ps.push(bt);const Hn=Ih(_e,void 0).value;return ps.pop(),Hn}function Dh(te,_e,Ue){return T1(te,()=>xi(_e),Ue).getValue()}function Oh(){return!!ps.peek()}function qg(te,_e){const Ue=ps.peek();if(!Ue)throw new Error("prism.source() is called outside of a prism() call.");return Ue.source(te,_e)}var xi=te=>new $g(te),U0=class{effect(te,_e,Ue){console.warn("prism.effect() does not run in cold prisms")}memo(te,_e,Ue){return _e()}state(te,_e){return[_e,()=>{}]}ref(te,_e){return{current:_e}}sub(te){return new U0}source(te,_e){return _e()}};function $c(te){const _e=new U0;ps.push(_e);let Ue;try{Ue=te()}catch(bt){console.error(bt)}finally{ps.pop()!==_e&&console.warn("The Prism hook stack has slipped. This is a bug.")}return Ue}xi.ref=Kg,xi.effect=C1,xi.memo=T1,xi.ensurePrism=Rh,xi.state=fs,xi.scope=Xg,xi.sub=Dh,xi.inPrism=Oh,xi.source=qg;var Lu=xi,M1;(function(te){te[te.Dict=0]="Dict",te[te.Array=1]="Array",te[te.Other=2]="Other"})(M1||(M1={}));var $r=te=>Array.isArray(te)?1:y9(te)?0:2,k1=(te,_e,Ue=$r(te))=>Ue===0&&typeof _e=="string"||Ue===1&&Yg(_e)?te[_e]:void 0,Yg=te=>{const _e=typeof te=="number"?te:parseInt(te,10);return!isNaN(_e)&&_e>=0&&_e<1/0&&(_e|0)===_e},Lh=class{constructor(te,_e){this._parent=te,this._path=_e,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(te){this.identityChangeListeners.add(te)}removeIdentityChangeListener(te){this.identityChangeListeners.delete(te),this._checkForGC()}removeChild(te){this.children.delete(te),this._checkForGC()}getChild(te){return this.children.get(te)}getOrCreateChild(te){let _e=this.children.get(te);return _e||(_e=_e=new Lh(this,this._path.concat([te])),this.children.set(te,_e)),_e}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(_1(this._path))}},A1=class{constructor(te){this.$$isPointerToPrismProvider=!0,this.pointer=Al({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(_e,Ue)=>{const{path:bt}=Hc(_e),Hn=this._getOrCreateScopeForPath(bt);return Hn.identityChangeListeners.add(Ue),()=>{Hn.identityChangeListeners.delete(Ue)}},this._currentState=te,this._rootScope=new Lh(void 0,[])}set(te){const _e=this._currentState;this._currentState=te,this._checkUpdates(this._rootScope,_e,te)}get(){return this._currentState}getByPointer(te){const _e=F0(te)?te:te(this.pointer),Ue=Hc(_e).path;return this._getIn(Ue)}_getIn(te){return te.length===0?this.get():h9(this.get(),te)}reduce(te){this.set(te(this.get()))}reduceByPointer(te,_e){const Ue=F0(te)?te:te(this.pointer),bt=Hc(Ue).path,Hn=w1(this.get(),bt,_e);this.set(Hn)}setByPointer(te,_e){this.reduceByPointer(te,()=>_e)}_checkUpdates(te,_e,Ue){if(_e===Ue)return;for(const Ir of te.identityChangeListeners)Ir(Ue);if(te.children.size===0)return;const bt=$r(_e),Hn=$r(Ue);if(!(bt===2&&bt===Hn))for(const[Ir,Ms]of te.children){const sa=k1(_e,Ir,bt),C9=k1(Ue,Ir,Hn);this._checkUpdates(Ms,sa,C9)}}_getOrCreateScopeForPath(te){let _e=this._rootScope;for(const Ue of te)_e=_e.getOrCreateChild(Ue);return _e}pointerToPrism(te){const{path:_e}=Hc(te),Ue=Hn=>this._onPointerValueChange(te,Hn),bt=()=>this._getIn(_e);return Lu(()=>Lu.source(Ue,bt))}},S9=new WeakMap;function Zg(te){return typeof te=="object"&&te!==null&&te.$$isPointerToPrismProvider===!0}var Nu=te=>{const _e=Ba(te);let Ue=S9.get(_e);if(!Ue){const bt=_e.root;if(!Zg(bt))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");Ue=bt.pointerToPrism(te),S9.set(_e,Ue)}return Ue},Nh=te=>F0(te)?Nu(te).getValue():Wc(te)?te.getValue():te;function*Qg(te){let _e;if(F0(te))_e=Nu(te);else if(Wc(te))_e=te;else throw new Error("Only pointers and prisms are supported");let Ue=0;const bt=_e.onStale(()=>{Ue++});try{for(;;){const Hn=Ue;Ue=0,yield{value:_e.getValue(),ticks:Hn}}}finally{bt()}}var E9=60*3,Kc=class{constructor(te){this._conf=te,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(te){this._scheduledForThisOrNextTick.add(te),this._dormant&&this._goActive()}onNextTick(te){this._scheduledForNextTick.add(te),this._dormant&&this._goActive()}offThisOrNextTick(te){this._scheduledForThisOrNextTick.delete(te)}offNextTick(te){this._scheduledForNextTick.delete(te)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var te,_e;this._dormant&&(this._dormant=!1,(_e=(te=this._conf)==null?void 0:te.onActive)==null||_e.call(te))}_goDormant(){var te,_e;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(_e=(te=this._conf)==null?void 0:te.onDormant)==null||_e.call(te))}tick(te=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=E9)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=te;for(const _e of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(_e);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(te){const _e=this.time;if(te>10&&console.warn("_tick() recursing for 10 times"),te>100)throw new Error("Maximum recursion limit for _tick()");const Ue=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const bt of Ue)bt(_e);if(this._scheduledForThisOrNextTick.size>0)return this._tick(te+1)}};function*I1(te){let _e;if(F0(te))_e=Nu(te);else if(Wc(te))_e=te;else throw new Error("Only pointers and prisms are supported");const Ue=new Kc,bt=_e.onChange(Ue,Hn=>{});try{for(;;)Ue.tick(),yield _e.getValue()}finally{bt()}}var Jg=class{constructor(te){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new A1(te),this.pointer=Al({root:this,path:[]})}setPointer(te){this._currentPointerBox.set(te)}pointerToPrism(te){const{path:_e}=Ba(te);return Lu(()=>{const Ue=this._currentPointerBox.prism.getValue(),bt=_e.reduce((Hn,Ir)=>Hn[Ir],Ue);return Nh(bt)})}}})(zt);RA.exports;(function(t,e){var n=Object.create,r=Object.freeze,i=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(s,a)=>{if(a=Symbol[s])return a;throw Error("Symbol."+s+" is not defined")},G=(s,a,l)=>a in s?i(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,B=(s,a)=>{for(var l in a||(a={}))S.call(a,l)&&G(s,l,a[l]);if(v)for(var l of v(a))M.call(a,l)&&G(s,l,a[l]);return s},L=(s,a)=>o(s,d(a)),U=(s,a)=>{var l={};for(var h in s)S.call(s,h)&&a.indexOf(h)<0&&(l[h]=s[h]);if(s!=null&&v)for(var h of v(s))a.indexOf(h)<0&&M.call(s,h)&&(l[h]=s[h]);return l},C=(s,a)=>()=>(s&&(a=s(s=0)),a),H=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),X=(s,a)=>{for(var l in a)i(s,l,{get:a[l],enumerable:!0})},fe=(s,a,l,h)=>{if(a&&typeof a=="object"||typeof a=="function")for(let m of f(a))!S.call(s,m)&&m!==l&&i(s,m,{get:()=>a[m],enumerable:!(h=u(a,m))||h.enumerable});return s},q=(s,a,l)=>(l=s!=null?n(x(s)):{},fe(a||!s||!s.__esModule?i(l,"default",{value:s,enumerable:!0}):l,s)),pe=s=>fe(i({},"__esModule",{value:!0}),s),xe=(s,a,l)=>(G(s,typeof a!="symbol"?a+"":a,l),l),J=(s,a)=>r(i(s,"raw",{value:r(a||s.slice())})),ne=(s,a,l)=>new Promise((h,m)=>{var g=E=>{try{_(l.next(E))}catch(P){m(P)}},b=E=>{try{_(l.throw(E))}catch(P){m(P)}},_=E=>E.done?h(E.value):Promise.resolve(E.value).then(g,b);_((l=l.apply(s,a)).next())}),Pe=function(s,a){this[0]=s,this[1]=a},mt=s=>{var a=s[D("asyncIterator")],l=!1,h,m={};return a==null?(a=s[D("iterator")](),h=g=>m[g]=b=>a[g](b)):(a=a.call(s),h=g=>m[g]=b=>{if(l){if(l=!1,g==="throw")throw b;return b}return l=!0,{done:!1,value:new Pe(new Promise(_=>{var E=a[g](b);if(!(E instanceof Object))throw TypeError("Object expected");_(E)}),1)}}),m[D("iterator")]=()=>m,h("next"),"throw"in a?h("throw"):m.throw=g=>{throw g},"return"in a&&h("return"),m};function _t(s){je=s}function de(){return je}var je,Me=C(()=>{});function Ct(s,a,l=[]){if(typeof s=="object"&&s){if(We(s)||tt(s)){a(s,l);return}for(let[h,m]of Object.entries(s))Ct(m,a,[...l,h])}else{if(s==null)return;a(s,l)}}var We,tt,Ze=C(()=>{We=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"type")&&s.type==="image"&&Object.hasOwnProperty.call(s,"id")&&typeof s.id=="string"&&s.id!=="",tt=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"r")&&Object.hasOwnProperty.call(s,"g")&&Object.hasOwnProperty.call(s,"b")&&Object.hasOwnProperty.call(s,"a")&&typeof s.r=="number"&&typeof s.g=="number"&&typeof s.b=="number"&&typeof s.a=="number"});function dt(s){return a=>typeof a=="object"&&!!a&&a.type===s}var At,pn,et,wt,Zt,rn,un,nt=C(()=>{At=dt("Theatre_Project"),pn=dt("Theatre_Sheet"),et=dt("Theatre_SheetTemplate"),wt=dt("Theatre_SheetObject"),Zt=dt("Theatre_SheetObjectTemplate"),rn=dt("Theatre_Sheet_PublicAPI"),un=dt("Theatre_SheetObject_PublicAPI")}),Tt,Mt,Ve=C(()=>{Tt=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,Mt=Tt}),or,$t,Ht,Kt=C(()=>{Ve(),or=typeof self=="object"&&self&&self.Object===Object&&self,$t=Mt||or||Function("return this")(),Ht=$t}),Kn,cn,ve=C(()=>{Kt(),Kn=Ht.Symbol,cn=Kn});function he(s){var a=Dt.call(s,Rt),l=s[Rt];try{s[Rt]=void 0;var h=!0}catch{}var m=Ft.call(s);return h&&(a?s[Rt]=l:delete s[Rt]),m}var Je,Dt,Ft,Rt,bn,sn=C(()=>{ve(),Je=Object.prototype,Dt=Je.hasOwnProperty,Ft=Je.toString,Rt=cn?cn.toStringTag:void 0,bn=he});function dn(s){return Xn.call(s)}var Dn,Xn,Ut,vr=C(()=>{Dn=Object.prototype,Xn=Dn.toString,Ut=dn});function sr(s){return s==null?s===void 0?kn:Tn:on&&on in Object(s)?bn(s):Ut(s)}var Tn,kn,on,Un,Ae=C(()=>{ve(),sn(),vr(),Tn="[object Null]",kn="[object Undefined]",on=cn?cn.toStringTag:void 0,Un=sr});function Xt(s){return s!=null&&typeof s=="object"}var Jt,mn=C(()=>{Jt=Xt});function Te(s){return typeof s=="symbol"||Jt(s)&&Un(s)==Wt}var Wt,Nt,gn=C(()=>{Ae(),mn(),Wt="[object Symbol]",Nt=Te});function On(s,a){for(var l=-1,h=s==null?0:s.length,m=Array(h);++l<h;)m[l]=a(s[l],l,s);return m}var cr,ar=C(()=>{cr=On}),pr,Mr,Zn=C(()=>{pr=Array.isArray,Mr=pr});function oi(s){if(typeof s=="string")return s;if(Mr(s))return cr(s,oi)+"";if(Nt(s))return Nc?Nc.call(s):"";var a=s+"";return a=="0"&&1/s==-ns?"-0":a}var ns,Mu,Nc,Tl,Sh=C(()=>{ve(),ar(),Zn(),gn(),ns=1/0,Mu=cn?cn.prototype:void 0,Nc=Mu?Mu.toString:void 0,Tl=oi});function ia(s){for(var a=s.length;a--&&ku.test(s.charAt(a)););return a}var ku,Fc,h1=C(()=>{ku=/\s/,Fc=ia});function r0(s){return s&&s.slice(0,Fc(s)+1).replace(Eh,"")}var Eh,be,Qe=C(()=>{h1(),Eh=/^\s+/,be=r0});function yt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var gt,ht=C(()=>{gt=yt});function hn(s){if(typeof s=="number")return s;if(Nt(s))return Cn;if(gt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=gt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=be(s);var l=jn.test(s);return l||rr.test(s)?qn(s.slice(2),l?2:8):Nn.test(s)?Cn:+s}var Cn,Nn,jn,rr,qn,Fn,xr=C(()=>{Qe(),ht(),gn(),Cn=0/0,Nn=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,rr=/^0o[0-7]+$/i,qn=parseInt,Fn=hn});function Bs(s){if(!s)return s===0?s:0;if(s=Fn(s),s===pi||s===-pi){var a=s<0?-1:1;return a*Do}return s===s?s:0}var pi,Do,Gr,$n=C(()=>{xr(),pi=1/0,Do=17976931348623157e292,Gr=Bs});function Au(s){var a=Gr(s),l=a%1;return a===a?l?a-l:a:0}var Wr,Oo=C(()=>{$n(),Wr=Au});function Ml(s){return s}var co,D0=C(()=>{co=Ml});function wi(s){if(!gt(s))return!1;var a=Un(s);return a==Iu||a==Us||a==Na||a==Ru}var Na,Iu,Us,Ru,Bc,Fa=C(()=>{Ae(),ht(),Na="[object AsyncFunction]",Iu="[object Function]",Us="[object GeneratorFunction]",Ru="[object Proxy]",Bc=wi}),p1,Ch,f1=C(()=>{Kt(),p1=Ht["__core-js_shared__"],Ch=p1});function Dg(s){return!!O0&&O0 in s}var O0,Uc,Og=C(()=>{f1(),O0=function(){var s=/[^.]+$/.exec(Ch&&Ch.keys&&Ch.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Uc=Dg});function zc(s){if(s!=null){try{return o9.call(s)}catch{}try{return s+""}catch{}}return""}var s9,o9,L0,a9=C(()=>{s9=Function.prototype,o9=s9.toString,L0=zc});function Lg(s){if(!gt(s)||Uc(s))return!1;var a=Bc(s)?c9:m1;return a.test(L0(s))}var Vc,m1,g1,v1,l9,u9,c9,d9,Ng=C(()=>{Fa(),Og(),ht(),a9(),Vc=/[\\^$.*+?()[\]{}|]/g,m1=/^\[object .+?Constructor\]$/,g1=Function.prototype,v1=Object.prototype,l9=g1.toString,u9=v1.hasOwnProperty,c9=RegExp("^"+l9.call(u9).replace(Vc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d9=Lg});function Du(s,a){return s==null?void 0:s[a]}var jc,Fg=C(()=>{jc=Du});function y1(s,a){var l=jc(s,a);return d9(l)?l:void 0}var N0,kl=C(()=>{Ng(),Fg(),N0=y1}),h9,Ph,Bg=C(()=>{kl(),Kt(),h9=N0(Ht,"WeakMap"),Ph=h9});function Ug(s,a,l){switch(l.length){case 0:return s.call(a);case 1:return s.call(a,l[0]);case 2:return s.call(a,l[0],l[1]);case 3:return s.call(a,l[0],l[1],l[2])}return s.apply(a,l)}var p9,zg=C(()=>{p9=Ug});function Vg(){}var f9,m9=C(()=>{f9=Vg});function g9(s,a){var l=-1,h=s.length;for(a||(a=Array(h));++l<h;)a[l]=s[l];return a}var b1,v9=C(()=>{b1=g9});function y9(s){var a=0,l=0;return function(){var h=Th(),m=_1-(h-l);if(l=h,m>0){if(++a>=b9)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var b9,_1,Th,Ou,_9=C(()=>{b9=800,_1=16,Th=Date.now,Ou=y9});function jg(s){return function(){return s}}var Ba,Hc=C(()=>{Ba=jg}),Gc,Al,F0=C(()=>{kl(),Gc=function(){try{var s=N0(Object,"defineProperty");return s({},"",{}),s}catch{}}(),Al=Gc}),w1,Il,hs=C(()=>{Hc(),F0(),D0(),w1=Al?function(s,a){return Al(s,"toString",{configurable:!0,enumerable:!1,value:Ba(a),writable:!0})}:co,Il=w1}),Wc,Mh,Hg=C(()=>{hs(),_9(),Wc=Ou(Il),Mh=Wc});function Rl(s,a,l,h){for(var m=s.length,g=l+(h?1:-1);h?g--:++g<m;)if(a(s[g],g,s))return g;return-1}var B0,x1=C(()=>{B0=Rl});function Gg(s){return s!==s}var kh,Wg=C(()=>{kh=Gg});function w9(s,a,l){for(var h=l-1,m=s.length;++h<m;)if(s[h]===a)return h;return-1}var x9,S1=C(()=>{x9=w9});function $g(s,a,l){return a===a?x9(s,a,l):B0(s,kh,l)}var Ah,E1=C(()=>{x1(),Wg(),S1(),Ah=$g});function Ih(s,a){var l=s==null?0:s.length;return!!l&&Ah(s,a,0)>-1}var ps,Kg=C(()=>{E1(),ps=Ih});function C1(s,a){var l=typeof s;return a=a??P1,!!a&&(l=="number"||l!="symbol"&&T1.test(s))&&s>-1&&s%1==0&&s<a}var P1,T1,fs,Rh=C(()=>{P1=9007199254740991,T1=/^(?:0|[1-9]\d*)$/,fs=C1});function Xg(s,a,l){a=="__proto__"&&Al?Al(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}var Dh,Oh=C(()=>{F0(),Dh=Xg});function qg(s,a){return s===a||s!==s&&a!==a}var xi,U0=C(()=>{xi=qg});function $c(s,a,l){var h=s[a];(!(M1.call(s,a)&&xi(h,l))||l===void 0&&!(a in s))&&Dh(s,a,l)}var Lu,M1,$r,k1=C(()=>{Oh(),U0(),Lu=Object.prototype,M1=Lu.hasOwnProperty,$r=$c});function Yg(s,a,l){return a=Lh(a===void 0?s.length-1:a,0),function(){for(var h=arguments,m=-1,g=Lh(h.length-a,0),b=Array(g);++m<g;)b[m]=h[a+m];m=-1;for(var _=Array(a+1);++m<a;)_[m]=h[m];return _[a]=l(b),p9(s,this,_)}}var Lh,A1,S9=C(()=>{zg(),Lh=Math.max,A1=Yg});function Zg(s,a){return Mh(A1(s,a,co),s+"")}var Nu,Nh=C(()=>{D0(),S9(),Hg(),Nu=Zg});function Qg(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=E9}var E9,Kc,I1=C(()=>{E9=9007199254740991,Kc=Qg});function Jg(s){return s!=null&&Kc(s.length)&&!Bc(s)}var te,_e=C(()=>{Fa(),I1(),te=Jg});function Ue(s,a,l){if(!gt(l))return!1;var h=typeof a;return(h=="number"?te(l)&&fs(a,l.length):h=="string"&&a in l)?xi(l[a],s):!1}var bt,Hn=C(()=>{U0(),_e(),Rh(),ht(),bt=Ue});function Ir(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||Ms;return s===l}var Ms,sa,C9=C(()=>{Ms=Object.prototype,sa=Ir});function Fu(s,a){for(var l=-1,h=Array(s);++l<s;)h[l]=a(l);return h}var Bu,N_=C(()=>{Bu=Fu});function dR(s){return Jt(s)&&Un(s)==F_}var F_,ev,hR=C(()=>{Ae(),mn(),F_="[object Arguments]",ev=dR}),tv,B_,U_,R1,P9,nv=C(()=>{hR(),mn(),tv=Object.prototype,B_=tv.hasOwnProperty,U_=tv.propertyIsEnumerable,R1=ev(function(){return arguments}())?ev:function(s){return Jt(s)&&B_.call(s,"callee")&&!U_.call(s,"callee")},P9=R1});function rv(){return!1}var z_,V_=C(()=>{z_=rv}),iv,sv,T9,ov,j_,H_,M9,av=C(()=>{Kt(),V_(),iv=e&&!e.nodeType&&e,sv=iv&&!0&&t&&!t.nodeType&&t,T9=sv&&sv.exports===iv,ov=T9?Ht.Buffer:void 0,j_=ov?ov.isBuffer:void 0,H_=j_||z_,M9=H_});function G_(s){return Jt(s)&&Kc(s.length)&&!!ai[Un(s)]}var W_,$_,K_,lv,X_,q_,uv,cv,Y_,dv,Z_,Q_,D1,J_,ew,tw,nw,rw,iw,sw,ow,aw,lw,uw,ai,cw,pR=C(()=>{Ae(),I1(),mn(),W_="[object Arguments]",$_="[object Array]",K_="[object Boolean]",lv="[object Date]",X_="[object Error]",q_="[object Function]",uv="[object Map]",cv="[object Number]",Y_="[object Object]",dv="[object RegExp]",Z_="[object Set]",Q_="[object String]",D1="[object WeakMap]",J_="[object ArrayBuffer]",ew="[object DataView]",tw="[object Float32Array]",nw="[object Float64Array]",rw="[object Int8Array]",iw="[object Int16Array]",sw="[object Int32Array]",ow="[object Uint8Array]",aw="[object Uint8ClampedArray]",lw="[object Uint16Array]",uw="[object Uint32Array]",ai={},ai[tw]=ai[nw]=ai[rw]=ai[iw]=ai[sw]=ai[ow]=ai[aw]=ai[lw]=ai[uw]=!0,ai[W_]=ai[$_]=ai[J_]=ai[K_]=ai[ew]=ai[lv]=ai[X_]=ai[q_]=ai[uv]=ai[cv]=ai[Y_]=ai[dv]=ai[Z_]=ai[Q_]=ai[D1]=!1,cw=G_});function fR(s){return function(a){return s(a)}}var k9,hv=C(()=>{k9=fR}),pv,Fh,dw,A9,hw,fv,mR=C(()=>{Ve(),pv=e&&!e.nodeType&&e,Fh=pv&&!0&&t&&!t.nodeType&&t,dw=Fh&&Fh.exports===pv,A9=dw&&Mt.process,hw=function(){try{var s=Fh&&Fh.require&&Fh.require("util").types;return s||A9&&A9.binding&&A9.binding("util")}catch{}}(),fv=hw}),ei,pw,mv,fw=C(()=>{pR(),hv(),mR(),ei=fv&&fv.isTypedArray,pw=ei?k9(ei):cw,mv=pw});function gv(s,a){var l=Mr(s),h=!l&&P9(s),m=!l&&!h&&M9(s),g=!l&&!h&&!m&&mv(s),b=l||h||m||g,_=b?Bu(s.length,String):[],E=_.length;for(var P in s)(a||Bh.call(s,P))&&!(b&&(P=="length"||m&&(P=="offset"||P=="parent")||g&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||fs(P,E)))&&_.push(P);return _}var vv,Bh,mw,yv=C(()=>{N_(),nv(),Zn(),av(),Rh(),fw(),vv=Object.prototype,Bh=vv.hasOwnProperty,mw=gv});function gR(s,a){return function(l){return s(a(l))}}var Uu,bv=C(()=>{Uu=gR}),gw,_v,vR=C(()=>{bv(),gw=Uu(Object.keys,Object),_v=gw});function yR(s){if(!sa(s))return _v(s);var a=[];for(var l in Object(s))wv.call(s,l)&&l!="constructor"&&a.push(l);return a}var vw,wv,yw,bw=C(()=>{C9(),vR(),vw=Object.prototype,wv=vw.hasOwnProperty,yw=yR});function bR(s){return te(s)?mw(s):yw(s)}var I9,xv=C(()=>{yv(),bw(),_e(),I9=bR});function _R(s,a){if(Mr(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||Nt(s)?!0:ww.test(s)||!_w.test(s)||a!=null&&s in Object(a)}var _w,ww,R9,Xc=C(()=>{Zn(),gn(),_w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ww=/^\w*$/,R9=_R}),xw,Uh,D9=C(()=>{kl(),xw=N0(Object,"create"),Uh=xw});function wR(){this.__data__=Uh?Uh(null):{},this.size=0}var Sw,xR=C(()=>{D9(),Sw=wR});function SR(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var O9,ER=C(()=>{O9=SR});function Ew(s){var a=this.__data__;if(Uh){var l=a[s];return l===Cw?void 0:l}return Pw.call(a,s)?a[s]:void 0}var Cw,L9,Pw,Tw,CR=C(()=>{D9(),Cw="__lodash_hash_undefined__",L9=Object.prototype,Pw=L9.hasOwnProperty,Tw=Ew});function Mw(s){var a=this.__data__;return Uh?a[s]!==void 0:Aw.call(a,s)}var kw,Aw,Iw,PR=C(()=>{D9(),kw=Object.prototype,Aw=kw.hasOwnProperty,Iw=Mw});function TR(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=Uh&&a===void 0?Sv:a,this}var Sv,Rw,MR=C(()=>{D9(),Sv="__lodash_hash_undefined__",Rw=TR});function zh(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var h=s[a];this.set(h[0],h[1])}}var Ev,kR=C(()=>{xR(),ER(),CR(),PR(),MR(),zh.prototype.clear=Sw,zh.prototype.delete=O9,zh.prototype.get=Tw,zh.prototype.has=Iw,zh.prototype.set=Rw,Ev=zh});function AR(){this.__data__=[],this.size=0}var Dw,IR=C(()=>{Dw=AR});function RR(s,a){for(var l=s.length;l--;)if(xi(s[l][0],a))return l;return-1}var O1,N9=C(()=>{U0(),O1=RR});function Cv(s){var a=this.__data__,l=O1(a,s);if(l<0)return!1;var h=a.length-1;return l==h?a.pop():Lw.call(a,l,1),--this.size,!0}var Ow,Lw,Pv,DR=C(()=>{N9(),Ow=Array.prototype,Lw=Ow.splice,Pv=Cv});function OR(s){var a=this.__data__,l=O1(a,s);return l<0?void 0:a[l][1]}var Nw,LR=C(()=>{N9(),Nw=OR});function NR(s){return O1(this.__data__,s)>-1}var Fw,Tv=C(()=>{N9(),Fw=NR});function Mv(s,a){var l=this.__data__,h=O1(l,s);return h<0?(++this.size,l.push([s,a])):l[h][1]=a,this}var Bw,Uw=C(()=>{N9(),Bw=Mv});function qc(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var h=s[a];this.set(h[0],h[1])}}var Vh,F9=C(()=>{IR(),DR(),LR(),Tv(),Uw(),qc.prototype.clear=Dw,qc.prototype.delete=Pv,qc.prototype.get=Nw,qc.prototype.has=Fw,qc.prototype.set=Bw,Vh=qc}),kv,Yc,Av=C(()=>{kl(),Kt(),kv=N0(Ht,"Map"),Yc=kv});function FR(){this.size=0,this.__data__={hash:new Ev,map:new(Yc||Vh),string:new Ev}}var zw,BR=C(()=>{kR(),F9(),Av(),zw=FR});function UR(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}var Vw,zR=C(()=>{Vw=UR});function VR(s,a){var l=s.__data__;return Vw(a)?l[typeof a=="string"?"string":"hash"]:l.map}var L1,B9=C(()=>{zR(),L1=VR});function jR(s){var a=L1(this,s).delete(s);return this.size-=a?1:0,a}var Iv,HR=C(()=>{B9(),Iv=jR});function GR(s){return L1(this,s).get(s)}var jw,WR=C(()=>{B9(),jw=GR});function $R(s){return L1(this,s).has(s)}var Hw,KR=C(()=>{B9(),Hw=$R});function XR(s,a){var l=L1(this,s),h=l.size;return l.set(s,a),this.size+=l.size==h?0:1,this}var Gw,qR=C(()=>{B9(),Gw=XR});function jh(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var h=s[a];this.set(h[0],h[1])}}var z0,Zc=C(()=>{BR(),HR(),WR(),KR(),qR(),jh.prototype.clear=zw,jh.prototype.delete=Iv,jh.prototype.get=jw,jh.prototype.has=Hw,jh.prototype.set=Gw,z0=jh});function Rv(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(Ww);var l=function(){var h=arguments,m=a?a.apply(this,h):h[0],g=l.cache;if(g.has(m))return g.get(m);var b=s.apply(this,h);return l.cache=g.set(m,b)||g,b};return l.cache=new(Rv.Cache||z0),l}var Ww,Dv,$w=C(()=>{Zc(),Ww="Expected a function",Rv.Cache=z0,Dv=Rv});function Kw(s){var a=Dv(s,function(h){return l.size===Ov&&l.clear(),h}),l=a.cache;return a}var Ov,Xw,qw=C(()=>{$w(),Ov=500,Xw=Kw}),Lv,Yw,Zw,Qw,YR=C(()=>{qw(),Lv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yw=/\\(\\)?/g,Zw=Xw(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Lv,function(l,h,m,g){a.push(m?g.replace(Yw,"$1"):h||l)}),a}),Qw=Zw});function ZR(s){return s==null?"":Tl(s)}var N1,Jw=C(()=>{Sh(),N1=ZR});function QR(s,a){return Mr(s)?s:R9(s,a)?[s]:Qw(N1(s))}var F1,Nv=C(()=>{Zn(),Xc(),YR(),Jw(),F1=QR});function Fv(s){if(typeof s=="string"||Nt(s))return s;var a=s+"";return a=="0"&&1/s==-ex?"-0":a}var ex,Hh,B1=C(()=>{gn(),ex=1/0,Hh=Fv});function JR(s,a){a=F1(a,s);for(var l=0,h=a.length;s!=null&&l<h;)s=s[Hh(a[l++])];return l&&l==h?s:void 0}var U1,Bv=C(()=>{Nv(),B1(),U1=JR});function eD(s,a,l){var h=s==null?void 0:U1(s,a);return h===void 0?l:h}var Qc,Gh=C(()=>{Bv(),Qc=eD});function tD(s,a){for(var l=-1,h=a.length,m=s.length;++l<h;)s[m+l]=a[l];return s}var z1,tx=C(()=>{z1=tD});function nD(s){return Mr(s)||P9(s)||!!(Uv&&s&&s[Uv])}var Uv,U9,rD=C(()=>{ve(),nv(),Zn(),Uv=cn?cn.isConcatSpreadable:void 0,U9=nD});function z9(s,a,l,h,m){var g=-1,b=s.length;for(l||(l=U9),m||(m=[]);++g<b;){var _=s[g];a>0&&l(_)?a>1?z9(_,a-1,l,h,m):z1(m,_):h||(m[m.length]=_)}return m}var nx,zv=C(()=>{tx(),rD(),nx=z9}),Vv,rx,ix=C(()=>{bv(),Vv=Uu(Object.getPrototypeOf,Object),rx=Vv});function sx(s){if(!Jt(s)||Un(s)!=jv)return!1;var a=rx(s);if(a===null)return!0;var l=ax.call(a,"constructor")&&a.constructor;return typeof l=="function"&&l instanceof l&&Gv.call(l)==lx}var jv,Hv,ox,Gv,ax,lx,V9,zu=C(()=>{Ae(),ix(),mn(),jv="[object Object]",Hv=Function.prototype,ox=Object.prototype,Gv=Hv.toString,ax=ox.hasOwnProperty,lx=Gv.call(Object),V9=sx});function V1(s){var a=Math[s];return function(l,h){if(l=Fn(l),h=h==null?0:cx(Wr(h),292),h&&ux(l)){var m=(N1(l)+"e").split("e"),g=a(m[0]+"e"+(+m[1]+h));return m=(N1(g)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return a(l)}}var ux,cx,dx,iD=C(()=>{Kt(),Oo(),xr(),Jw(),ux=Ht.isFinite,cx=Math.min,dx=V1});function sD(s,a,l){return s===s&&(l!==void 0&&(s=s<=l?s:l),a!==void 0&&(s=s>=a?s:a)),s}var j1,oD=C(()=>{j1=sD});function Wv(s,a,l){return l===void 0&&(l=a,a=void 0),l!==void 0&&(l=Fn(l),l=l===l?l:0),a!==void 0&&(a=Fn(a),a=a===a?a:0),j1(Fn(s),a,l)}var Si,j9=C(()=>{oD(),xr(),Si=Wv});function aD(){this.__data__=new Vh,this.size=0}var hx,lD=C(()=>{F9(),hx=aD});function px(s){var a=this.__data__,l=a.delete(s);return this.size=a.size,l}var $v,uD=C(()=>{$v=px});function cD(s){return this.__data__.get(s)}var fx,dD=C(()=>{fx=cD});function hD(s){return this.__data__.has(s)}var mx,pD=C(()=>{mx=hD});function fD(s,a){var l=this.__data__;if(l instanceof Vh){var h=l.__data__;if(!Yc||h.length<gx-1)return h.push([s,a]),this.size=++l.size,this;l=this.__data__=new z0(h)}return l.set(s,a),this.size=l.size,this}var gx,vx,mD=C(()=>{F9(),Av(),Zc(),gx=200,vx=fD});function Wh(s){var a=this.__data__=new Vh(s);this.size=a.size}var H1,yx=C(()=>{F9(),lD(),uD(),dD(),pD(),mD(),Wh.prototype.clear=hx,Wh.prototype.delete=$v,Wh.prototype.get=fx,Wh.prototype.has=mx,Wh.prototype.set=vx,H1=Wh});function gD(s,a){for(var l=-1,h=s==null?0:s.length,m=0,g=[];++l<h;){var b=s[l];a(b,l,s)&&(g[m++]=b)}return g}var bx,vD=C(()=>{bx=gD});function yD(){return[]}var _x,bD=C(()=>{_x=yD}),wx,xx,Kv,Sx,Ex,_D=C(()=>{vD(),bD(),wx=Object.prototype,xx=wx.propertyIsEnumerable,Kv=Object.getOwnPropertySymbols,Sx=Kv?function(s){return s==null?[]:(s=Object(s),bx(Kv(s),function(a){return xx.call(s,a)}))}:_x,Ex=Sx});function wD(s,a,l){var h=a(s);return Mr(s)?h:z1(h,l(s))}var Cx,xD=C(()=>{tx(),Zn(),Cx=wD});function SD(s){return Cx(s,I9,Ex)}var H9,ED=C(()=>{xD(),_D(),xv(),H9=SD}),Px,G9,CD=C(()=>{kl(),Kt(),Px=N0(Ht,"DataView"),G9=Px}),Tx,G1,PD=C(()=>{kl(),Kt(),Tx=N0(Ht,"Promise"),G1=Tx}),Mx,Jc,kx=C(()=>{kl(),Kt(),Mx=N0(Ht,"Set"),Jc=Mx}),Xv,qv,Yv,Zv,Qv,Jv,e8,Ax,Ix,Rx,t8,Vu,n8,TD=C(()=>{CD(),Av(),PD(),kx(),Bg(),Ae(),a9(),Xv="[object Map]",qv="[object Object]",Yv="[object Promise]",Zv="[object Set]",Qv="[object WeakMap]",Jv="[object DataView]",e8=L0(G9),Ax=L0(Yc),Ix=L0(G1),Rx=L0(Jc),t8=L0(Ph),Vu=Un,(G9&&Vu(new G9(new ArrayBuffer(1)))!=Jv||Yc&&Vu(new Yc)!=Xv||G1&&Vu(G1.resolve())!=Yv||Jc&&Vu(new Jc)!=Zv||Ph&&Vu(new Ph)!=Qv)&&(Vu=function(s){var a=Un(s),l=a==qv?s.constructor:void 0,h=l?L0(l):"";if(h)switch(h){case e8:return Jv;case Ax:return Xv;case Ix:return Yv;case Rx:return Zv;case t8:return Qv}return a}),n8=Vu}),Dx,r8,MD=C(()=>{Kt(),Dx=Ht.Uint8Array,r8=Dx});function kD(s){return this.__data__.set(s,Ox),this}var Ox,Lx,AD=C(()=>{Ox="__lodash_hash_undefined__",Lx=kD});function ID(s){return this.__data__.has(s)}var Nx,RD=C(()=>{Nx=ID});function W9(s){var a=-1,l=s==null?0:s.length;for(this.__data__=new z0;++a<l;)this.add(s[a])}var i8,Fx=C(()=>{Zc(),AD(),RD(),W9.prototype.add=W9.prototype.push=Lx,W9.prototype.has=Nx,i8=W9});function li(s,a){for(var l=-1,h=s==null?0:s.length;++l<h;)if(a(s[l],l,s))return!0;return!1}var W1,DD=C(()=>{W1=li});function OD(s,a){return s.has(a)}var s8,Bx=C(()=>{s8=OD});function LD(s,a,l,h,m,g){var b=l&Ux,_=s.length,E=a.length;if(_!=E&&!(b&&E>_))return!1;var P=g.get(s),I=g.get(a);if(P&&I)return P==a&&I==s;var O=-1,R=!0,A=l&zx?new i8:void 0;for(g.set(s,a),g.set(a,s);++O<_;){var F=s[O],N=a[O];if(h)var V=b?h(N,F,O,a,s,g):h(F,N,O,s,a,g);if(V!==void 0){if(V)continue;R=!1;break}if(A){if(!W1(a,function(W,$){if(!s8(A,$)&&(F===W||m(F,W,l,h,g)))return A.push($)})){R=!1;break}}else if(!(F===N||m(F,N,l,h,g))){R=!1;break}}return g.delete(s),g.delete(a),R}var Ux,zx,o8,Vx=C(()=>{Fx(),DD(),Bx(),Ux=1,zx=2,o8=LD});function ND(s){var a=-1,l=Array(s.size);return s.forEach(function(h,m){l[++a]=[m,h]}),l}var $1,FD=C(()=>{$1=ND});function BD(s){var a=-1,l=Array(s.size);return s.forEach(function(h){l[++a]=h}),l}var $9,a8=C(()=>{$9=BD});function UD(s,a,l,h,m,g,b){switch(l){case Jx:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Qx:return!(s.byteLength!=a.byteLength||!g(new r8(s),new r8(a)));case Gx:case l8:case Kx:return xi(+s,+a);case Wx:return s.name==a.name&&s.message==a.message;case Xx:case Yx:return s==a+"";case $x:var _=$1;case qx:var E=h&jx;if(_||(_=$9),s.size!=a.size&&!E)return!1;var P=b.get(s);if(P)return P==a;h|=Hx,b.set(s,a);var I=o8(_(s),_(a),h,m,g,b);return b.delete(s),I;case Zx:if(K9)return K9.call(s)==K9.call(a)}return!1}var jx,Hx,Gx,l8,Wx,$x,Kx,Xx,qx,Yx,Zx,Qx,Jx,u8,K9,eS,zD=C(()=>{ve(),MD(),U0(),Vx(),FD(),a8(),jx=1,Hx=2,Gx="[object Boolean]",l8="[object Date]",Wx="[object Error]",$x="[object Map]",Kx="[object Number]",Xx="[object RegExp]",qx="[object Set]",Yx="[object String]",Zx="[object Symbol]",Qx="[object ArrayBuffer]",Jx="[object DataView]",u8=cn?cn.prototype:void 0,K9=u8?u8.valueOf:void 0,eS=UD});function VD(s,a,l,h,m,g){var b=l&tS,_=H9(s),E=_.length,P=H9(a),I=P.length;if(E!=I&&!b)return!1;for(var O=E;O--;){var R=_[O];if(!(b?R in a:rS.call(a,R)))return!1}var A=g.get(s),F=g.get(a);if(A&&F)return A==a&&F==s;var N=!0;g.set(s,a),g.set(a,s);for(var V=b;++O<E;){R=_[O];var W=s[R],$=a[R];if(h)var Z=b?h($,W,R,a,s,g):h(W,$,R,s,a,g);if(!(Z===void 0?W===$||m(W,$,l,h,g):Z)){N=!1;break}V||(V=R=="constructor")}if(N&&!V){var ie=s.constructor,re=a.constructor;ie!=re&&"constructor"in s&&"constructor"in a&&!(typeof ie=="function"&&ie instanceof ie&&typeof re=="function"&&re instanceof re)&&(N=!1)}return g.delete(s),g.delete(a),N}var tS,nS,rS,c8,d8=C(()=>{ED(),tS=1,nS=Object.prototype,rS=nS.hasOwnProperty,c8=VD});function jD(s,a,l,h,m,g){var b=Mr(s),_=Mr(a),E=b?p8:n8(s),P=_?p8:n8(a);E=E==h8?K1:E,P=P==h8?K1:P;var I=E==K1,O=P==K1,R=E==P;if(R&&M9(s)){if(!M9(a))return!1;b=!0,I=!1}if(R&&!I)return g||(g=new H1),b||mv(s)?o8(s,a,l,h,m,g):eS(s,a,E,l,h,m,g);if(!(l&iS)){var A=I&&f8.call(s,"__wrapped__"),F=O&&f8.call(a,"__wrapped__");if(A||F){var N=A?s.value():s,V=F?a.value():a;return g||(g=new H1),m(N,V,l,h,g)}}return R?(g||(g=new H1),c8(s,a,l,h,m,g)):!1}var iS,h8,p8,K1,sS,f8,oS,aS=C(()=>{yx(),Vx(),zD(),d8(),TD(),Zn(),av(),fw(),iS=1,h8="[object Arguments]",p8="[object Array]",K1="[object Object]",sS=Object.prototype,f8=sS.hasOwnProperty,oS=jD});function m8(s,a,l,h,m){return s===a?!0:s==null||a==null||!Jt(s)&&!Jt(a)?s!==s&&a!==a:oS(s,a,l,h,m8,m)}var $h,lS=C(()=>{aS(),mn(),$h=m8});function uS(s,a,l,h){var m=l.length,g=m,b=!h;if(s==null)return!g;for(s=Object(s);m--;){var _=l[m];if(b&&_[2]?_[1]!==s[_[0]]:!(_[0]in s))return!1}for(;++m<g;){_=l[m];var E=_[0],P=s[E],I=_[1];if(b&&_[2]){if(P===void 0&&!(E in s))return!1}else{var O=new H1;if(h)var R=h(P,I,E,s,a,O);if(!(R===void 0?$h(I,P,cS|dS,h,O):R))return!1}}return!0}var cS,dS,g8,hS=C(()=>{yx(),lS(),cS=1,dS=2,g8=uS});function HD(s){return s===s&&!gt(s)}var v8,pS=C(()=>{ht(),v8=HD});function GD(s){for(var a=I9(s),l=a.length;l--;){var h=a[l],m=s[h];a[l]=[h,m,v8(m)]}return a}var fS,mS=C(()=>{pS(),xv(),fS=GD});function WD(s,a){return function(l){return l==null?!1:l[s]===a&&(a!==void 0||s in Object(l))}}var y8,gS=C(()=>{y8=WD});function vS(s){var a=fS(s);return a.length==1&&a[0][2]?y8(a[0][0],a[0][1]):function(l){return l===s||g8(l,s,a)}}var yS,$D=C(()=>{hS(),mS(),gS(),yS=vS});function KD(s,a){return s!=null&&a in Object(s)}var bS,XD=C(()=>{bS=KD});function qD(s,a,l){a=F1(a,s);for(var h=-1,m=a.length,g=!1;++h<m;){var b=Hh(a[h]);if(!(g=s!=null&&l(s,b)))break;s=s[b]}return g||++h!=m?g:(m=s==null?0:s.length,!!m&&Kc(m)&&fs(b,m)&&(Mr(s)||P9(s)))}var _S,YD=C(()=>{Nv(),nv(),Zn(),Rh(),I1(),B1(),_S=qD});function ZD(s,a){return s!=null&&_S(s,a,bS)}var wS,QD=C(()=>{XD(),YD(),wS=ZD});function JD(s,a){return R9(s)&&v8(a)?y8(Hh(s),a):function(l){var h=Qc(l,s);return h===void 0&&h===a?wS(l,s):$h(a,h,xS|b8)}}var xS,b8,SS,eO=C(()=>{lS(),Gh(),QD(),Xc(),pS(),gS(),B1(),xS=1,b8=2,SS=JD});function tO(s){return function(a){return a==null?void 0:a[s]}}var ES,nO=C(()=>{ES=tO});function rO(s){return function(a){return U1(a,s)}}var CS,iO=C(()=>{Bv(),CS=rO});function sO(s){return R9(s)?ES(Hh(s)):CS(s)}var PS,oO=C(()=>{nO(),iO(),Xc(),B1(),PS=sO});function aO(s){return typeof s=="function"?s:s==null?co:typeof s=="object"?Mr(s)?SS(s[0],s[1]):yS(s):PS(s)}var Kh,ed=C(()=>{$D(),eO(),D0(),Zn(),oO(),Kh=aO});function lO(s,a,l,h){for(var m=-1,g=s==null?0:s.length;++m<g;){var b=s[m];a(h,b,l(b),s)}return h}var TS,uO=C(()=>{TS=lO});function cO(s){return function(a,l,h){for(var m=-1,g=Object(a),b=h(a),_=b.length;_--;){var E=b[s?_:++m];if(l(g[E],E,g)===!1)break}return a}}var MS,dO=C(()=>{MS=cO}),kS,AS,hO=C(()=>{dO(),kS=MS(),AS=kS});function pO(s,a){return s&&AS(s,a,I9)}var _8,IS=C(()=>{hO(),xv(),_8=pO});function fO(s,a){return function(l,h){if(l==null)return l;if(!te(l))return s(l,h);for(var m=l.length,g=a?m:-1,b=Object(l);(a?g--:++g<m)&&h(b[g],g,b)!==!1;);return l}}var RS,mO=C(()=>{_e(),RS=fO}),DS,w8,OS=C(()=>{IS(),mO(),DS=RS(_8),w8=DS});function LS(s,a,l,h){return w8(s,function(m,g,b){a(h,m,l(m),b)}),h}var NS,gO=C(()=>{OS(),NS=LS});function FS(s,a){return function(l,h){var m=Mr(l)?TS:NS,g=a?a():{};return m(l,s,Kh(h,2),g)}}var BS,vO=C(()=>{uO(),gO(),ed(),Zn(),BS=FS}),US,X9,yO=C(()=>{Kt(),US=function(){return Ht.Date.now()},X9=US});function bO(s,a,l){var h,m,g,b,_,E,P=0,I=!1,O=!1,R=!0;if(typeof s!="function")throw new TypeError(q9);a=Fn(a)||0,gt(l)&&(I=!!l.leading,O="maxWait"in l,g=O?Y9(Fn(l.maxWait)||0,a):g,R="trailing"in l?!!l.trailing:R);function A(le){var Ce=h,ye=m;return h=m=void 0,P=le,b=s.apply(ye,Ce),b}function F(le){return P=le,_=setTimeout(W,a),I?A(le):b}function N(le){var Ce=le-E,ye=le-P,we=a-Ce;return O?zS(we,g-ye):we}function V(le){var Ce=le-E,ye=le-P;return E===void 0||Ce>=a||Ce<0||O&&ye>=g}function W(){var le=X9();if(V(le))return $(le);_=setTimeout(W,N(le))}function $(le){return _=void 0,R&&h?A(le):(h=m=void 0,b)}function Z(){_!==void 0&&clearTimeout(_),P=0,h=E=m=_=void 0}function ie(){return _===void 0?b:$(X9())}function re(){var le=X9(),Ce=V(le);if(h=arguments,m=this,E=le,Ce){if(_===void 0)return F(E);if(O)return clearTimeout(_),_=setTimeout(W,a),A(E)}return _===void 0&&(_=setTimeout(W,a)),b}return re.cancel=Z,re.flush=ie,re}var q9,Y9,zS,Z9,x8=C(()=>{ht(),yO(),xr(),q9="Expected a function",Y9=Math.max,zS=Math.min,Z9=bO});function VS(s,a,l){for(var h=-1,m=s==null?0:s.length;++h<m;)if(l(a,s[h]))return!0;return!1}var jS,HS=C(()=>{jS=VS});function GS(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}var td,Q9=C(()=>{td=GS});function _O(s,a,l){var h=s==null?0:s.length;if(!h)return-1;var m=l==null?0:Wr(l);return m<0&&(m=S8(h+m,0)),B0(s,Kh(a,3),m)}var S8,E8,wO=C(()=>{x1(),ed(),Oo(),S8=Math.max,E8=_O});function xO(s,a,l){var h=s==null?0:s.length;if(!h)return-1;var m=h-1;return l!==void 0&&(m=Wr(l),m=l<0?C8(h+m,0):WS(m,h-1)),B0(s,Kh(a,3),m,!0)}var C8,WS,$S,SO=C(()=>{x1(),ed(),Oo(),C8=Math.max,WS=Math.min,$S=xO});function EO(s,a){var l=-1,h=te(s)?Array(s.length):[];return w8(s,function(m,g,b){h[++l]=a(m,g,b)}),h}var Xh,CO=C(()=>{OS(),_e(),Xh=EO});function KS(s,a,l){return s>=qS(a,l)&&s<XS(a,l)}var XS,qS,YS,J9=C(()=>{XS=Math.max,qS=Math.min,YS=KS});function P8(s,a,l){return a=Gr(a),l===void 0?(l=a,a=0):l=Gr(l),s=Fn(s),YS(s,a,l)}var T8,PO=C(()=>{J9(),$n(),xr(),T8=P8});function ui(s){return typeof s=="number"&&s==Wr(s)}var Lo,oa=C(()=>{Oo(),Lo=ui}),ju,Kr,Dl=C(()=>{Oh(),vO(),ju=BS(function(s,a,l){Dh(s,l,a)}),Kr=ju});function ZS(s,a){var l={};return a=Kh(a,3),_8(s,function(h,m,g){Dh(l,m,a(h,m,g))}),l}var nd,QS=C(()=>{Oh(),IS(),ed(),nd=ZS});function TO(s,a,l,h){if(!gt(s))return s;a=F1(a,s);for(var m=-1,g=a.length,b=g-1,_=s;_!=null&&++m<g;){var E=Hh(a[m]),P=l;if(E==="__proto__"||E==="constructor"||E==="prototype")return s;if(m!=b){var I=_[E];P=h?h(I,E,_):void 0,P===void 0&&(P=gt(I)?I:fs(a[m+1])?[]:{})}$r(_,E,P),_=_[E]}return s}var JS,MO=C(()=>{k1(),Nv(),Rh(),ht(),B1(),JS=TO});function eE(s,a){var l=s.length;for(s.sort(a);l--;)s[l]=s[l].value;return s}var M8,e3=C(()=>{M8=eE});function tE(s,a){if(s!==a){var l=s!==void 0,h=s===null,m=s===s,g=Nt(s),b=a!==void 0,_=a===null,E=a===a,P=Nt(a);if(!_&&!P&&!g&&s>a||g&&b&&E&&!_&&!P||h&&b&&E||!l&&E||!m)return 1;if(!h&&!g&&!P&&s<a||P&&l&&m&&!h&&!g||_&&l&&m||!b&&m||!E)return-1}return 0}var nE,rE=C(()=>{gn(),nE=tE});function iE(s,a,l){for(var h=-1,m=s.criteria,g=a.criteria,b=m.length,_=l.length;++h<b;){var E=nE(m[h],g[h]);if(E){if(h>=_)return E;var P=l[h];return E*(P=="desc"?-1:1)}}return s.index-a.index}var k8,kO=C(()=>{rE(),k8=iE});function AO(s,a,l){a.length?a=cr(a,function(g){return Mr(g)?function(b){return U1(b,g.length===1?g[0]:g)}:g}):a=[co];var h=-1;a=cr(a,k9(Kh));var m=Xh(s,function(g,b,_){var E=cr(a,function(P){return P(g)});return{criteria:E,index:++h,value:g}});return M8(m,function(g,b){return k8(g,b,l)})}var A8,IO=C(()=>{ar(),Bv(),ed(),CO(),e3(),hv(),kO(),D0(),Zn(),A8=AO});function RO(s,a,l,h){for(var m=l-1,g=s.length;++m<g;)if(h(s[m],a))return m;return-1}var qh,sE=C(()=>{qh=RO});function DO(s,a,l,h){var m=h?qh:Ah,g=-1,b=a.length,_=s;for(s===a&&(a=b1(a)),l&&(_=cr(s,k9(l)));++g<b;)for(var E=0,P=a[g],I=l?l(P):P;(E=m(_,I,E,h))>-1;)_!==s&&ms.call(_,E,1),ms.call(s,E,1);return s}var oE,ms,Ol,OO=C(()=>{ar(),E1(),sE(),hv(),v9(),oE=Array.prototype,ms=oE.splice,Ol=DO});function t3(s,a){return s&&s.length&&a&&a.length?Ol(s,a):s}var aE,LO=C(()=>{OO(),aE=t3}),lE,uE,I8=C(()=>{Nh(),LO(),lE=Nu(aE),uE=lE}),cE,X1,Yh=C(()=>{iD(),cE=dx("round"),X1=cE});function NO(s,a,l){return s==null?s:JS(s,a,l)}var Zh,n3=C(()=>{MO(),Zh=NO}),r3,dE,i3=C(()=>{zv(),IO(),Nh(),Hn(),r3=Nu(function(s,a){if(s==null)return[];var l=a.length;return l>1&&bt(s,a[0],a[1])?a=[]:l>2&&bt(a[0],a[1],a[2])&&(a=[a[0]]),A8(s,nx(a,1),[])}),dE=r3}),R8,D8,hE,FO=C(()=>{kx(),m9(),a8(),R8=1/0,D8=Jc&&1/$9(new Jc([,-0]))[1]==R8?function(s){return new Jc(s)}:f9,hE=D8});function BO(s,a,l){var h=-1,m=ps,g=s.length,b=!0,_=[],E=_;if(l)b=!1,m=jS;else if(g>=pE){var P=a?null:hE(s);if(P)return $9(P);b=!1,m=s8,E=new i8}else E=a?[]:_;e:for(;++h<g;){var I=s[h],O=a?a(I):I;if(I=l||I!==0?I:0,b&&O===O){for(var R=E.length;R--;)if(E[R]===O)continue e;a&&E.push(O),_.push(I)}else m(E,O,l)||(E!==_&&E.push(O),_.push(I))}return _}var pE,fE,UO=C(()=>{Fx(),Kg(),HS(),Bx(),FO(),a8(),pE=200,fE=BO});function zO(s){return s&&s.length?fE(s):[]}var No,rd=C(()=>{UO(),No=zO}),fi=C(()=>{j9(),x8(),wO(),PO(),oa(),zu(),Q9(),QS(),$w(),Yh(),rd()}),O8=H((s,a)=>{var l;a.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ki):h=>(l||(l=Promise.resolve())).then(h).catch(m=>setTimeout(()=>{throw m},0))}),mE=H(s=>{var a=Symbol.for("react.element"),l=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),R=Symbol.iterator;function A(ce){return ce===null||typeof ce!="object"?null:(ce=R&&ce[R]||ce["@@iterator"],typeof ce=="function"?ce:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,V={};function W(ce,ge,it){this.props=ce,this.context=ge,this.refs=V,this.updater=it||F}W.prototype.isReactComponent={},W.prototype.setState=function(ce,ge){if(typeof ce!="object"&&typeof ce!="function"&&ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ce,ge,"setState")},W.prototype.forceUpdate=function(ce){this.updater.enqueueForceUpdate(this,ce,"forceUpdate")};function $(){}$.prototype=W.prototype;function Z(ce,ge,it){this.props=ce,this.context=ge,this.refs=V,this.updater=it||F}var ie=Z.prototype=new $;ie.constructor=Z,N(ie,W.prototype),ie.isPureReactComponent=!0;var re=Array.isArray,le=Object.prototype.hasOwnProperty,Ce={current:null},ye={key:!0,ref:!0,__self:!0,__source:!0};function we(ce,ge,it){var at,ct={},Xe=null,an=null;if(ge!=null)for(at in ge.ref!==void 0&&(an=ge.ref),ge.key!==void 0&&(Xe=""+ge.key),ge)le.call(ge,at)&&!ye.hasOwnProperty(at)&&(ct[at]=ge[at]);var St=arguments.length-2;if(St===1)ct.children=it;else if(1<St){for(var nn=Array(St),Sn=0;Sn<St;Sn++)nn[Sn]=arguments[Sn+2];ct.children=nn}if(ce&&ce.defaultProps)for(at in St=ce.defaultProps,St)ct[at]===void 0&&(ct[at]=St[at]);return{$$typeof:a,type:ce,key:Xe,ref:an,props:ct,_owner:Ce.current}}function Ne(ce,ge){return{$$typeof:a,type:ce.type,key:ge,ref:ce.ref,props:ce.props,_owner:ce._owner}}function lt(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===a}function ue(ce){var ge={"=":"=0",":":"=2"};return"$"+ce.replace(/[=:]/g,function(it){return ge[it]})}var Le=/\/+/g;function Q(ce,ge){return typeof ce=="object"&&ce!==null&&ce.key!=null?ue(""+ce.key):ge.toString(36)}function He(ce,ge,it,at,ct){var Xe=typeof ce;(Xe==="undefined"||Xe==="boolean")&&(ce=null);var an=!1;if(ce===null)an=!0;else switch(Xe){case"string":case"number":an=!0;break;case"object":switch(ce.$$typeof){case a:case l:an=!0}}if(an)return an=ce,ct=ct(an),ce=at===""?"."+Q(an,0):at,re(ct)?(it="",ce!=null&&(it=ce.replace(Le,"$&/")+"/"),He(ct,ge,it,"",function(Sn){return Sn})):ct!=null&&(lt(ct)&&(ct=Ne(ct,it+(!ct.key||an&&an.key===ct.key?"":(""+ct.key).replace(Le,"$&/")+"/")+ce)),ge.push(ct)),1;if(an=0,at=at===""?".":at+":",re(ce))for(var St=0;St<ce.length;St++){Xe=ce[St];var nn=at+Q(Xe,St);an+=He(Xe,ge,it,nn,ct)}else if(nn=A(ce),typeof nn=="function")for(ce=nn.call(ce),St=0;!(Xe=ce.next()).done;)Xe=Xe.value,nn=at+Q(Xe,St++),an+=He(Xe,ge,it,nn,ct);else if(Xe==="object")throw ge=String(ce),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(ce).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.");return an}function Bt(ce,ge,it){if(ce==null)return ce;var at=[],ct=0;return He(ce,at,"","",function(Xe){return ge.call(it,Xe,ct++)}),at}function Ie(ce){if(ce._status===-1){var ge=ce._result;ge=ge(),ge.then(function(it){(ce._status===0||ce._status===-1)&&(ce._status=1,ce._result=it)},function(it){(ce._status===0||ce._status===-1)&&(ce._status=2,ce._result=it)}),ce._status===-1&&(ce._status=0,ce._result=ge)}if(ce._status===1)return ce._result.default;throw ce._result}var Re={current:null},$e={transition:null},Pt={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:$e,ReactCurrentOwner:Ce};s.Children={map:Bt,forEach:function(ce,ge,it){Bt(ce,function(){ge.apply(this,arguments)},it)},count:function(ce){var ge=0;return Bt(ce,function(){ge++}),ge},toArray:function(ce){return Bt(ce,function(ge){return ge})||[]},only:function(ce){if(!lt(ce))throw Error("React.Children.only expected to receive a single React element child.");return ce}},s.Component=W,s.Fragment=h,s.Profiler=g,s.PureComponent=Z,s.StrictMode=m,s.Suspense=P,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pt,s.cloneElement=function(ce,ge,it){if(ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ce+".");var at=N({},ce.props),ct=ce.key,Xe=ce.ref,an=ce._owner;if(ge!=null){if(ge.ref!==void 0&&(Xe=ge.ref,an=Ce.current),ge.key!==void 0&&(ct=""+ge.key),ce.type&&ce.type.defaultProps)var St=ce.type.defaultProps;for(nn in ge)le.call(ge,nn)&&!ye.hasOwnProperty(nn)&&(at[nn]=ge[nn]===void 0&&St!==void 0?St[nn]:ge[nn])}var nn=arguments.length-2;if(nn===1)at.children=it;else if(1<nn){St=Array(nn);for(var Sn=0;Sn<nn;Sn++)St[Sn]=arguments[Sn+2];at.children=St}return{$$typeof:a,type:ce.type,key:ct,ref:Xe,props:at,_owner:an}},s.createContext=function(ce){return ce={$$typeof:_,_currentValue:ce,_currentValue2:ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ce.Provider={$$typeof:b,_context:ce},ce.Consumer=ce},s.createElement=we,s.createFactory=function(ce){var ge=we.bind(null,ce);return ge.type=ce,ge},s.createRef=function(){return{current:null}},s.forwardRef=function(ce){return{$$typeof:E,render:ce}},s.isValidElement=lt,s.lazy=function(ce){return{$$typeof:O,_payload:{_status:-1,_result:ce},_init:Ie}},s.memo=function(ce,ge){return{$$typeof:I,type:ce,compare:ge===void 0?null:ge}},s.startTransition=function(ce){var ge=$e.transition;$e.transition={};try{ce()}finally{$e.transition=ge}},s.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},s.useCallback=function(ce,ge){return Re.current.useCallback(ce,ge)},s.useContext=function(ce){return Re.current.useContext(ce)},s.useDebugValue=function(){},s.useDeferredValue=function(ce){return Re.current.useDeferredValue(ce)},s.useEffect=function(ce,ge){return Re.current.useEffect(ce,ge)},s.useId=function(){return Re.current.useId()},s.useImperativeHandle=function(ce,ge,it){return Re.current.useImperativeHandle(ce,ge,it)},s.useInsertionEffect=function(ce,ge){return Re.current.useInsertionEffect(ce,ge)},s.useLayoutEffect=function(ce,ge){return Re.current.useLayoutEffect(ce,ge)},s.useMemo=function(ce,ge){return Re.current.useMemo(ce,ge)},s.useReducer=function(ce,ge,it){return Re.current.useReducer(ce,ge,it)},s.useRef=function(ce){return Re.current.useRef(ce)},s.useState=function(ce){return Re.current.useState(ce)},s.useSyncExternalStore=function(ce,ge,it){return Re.current.useSyncExternalStore(ce,ge,it)},s.useTransition=function(){return Re.current.useTransition()},s.version="18.2.0"}),Fe=H((s,a)=>{a.exports=mE()}),gE=H(s=>{function a(Re,$e){var Pt=Re.length;Re.push($e);e:for(;0<Pt;){var ce=Pt-1>>>1,ge=Re[ce];if(0<m(ge,$e))Re[ce]=$e,Re[Pt]=ge,Pt=ce;else break e}}function l(Re){return Re.length===0?null:Re[0]}function h(Re){if(Re.length===0)return null;var $e=Re[0],Pt=Re.pop();if(Pt!==$e){Re[0]=Pt;e:for(var ce=0,ge=Re.length,it=ge>>>1;ce<it;){var at=2*(ce+1)-1,ct=Re[at],Xe=at+1,an=Re[Xe];if(0>m(ct,Pt))Xe<ge&&0>m(an,ct)?(Re[ce]=an,Re[Xe]=Pt,ce=Xe):(Re[ce]=ct,Re[at]=Pt,ce=at);else if(Xe<ge&&0>m(an,Pt))Re[ce]=an,Re[Xe]=Pt,ce=Xe;else break e}}return $e}function m(Re,$e){var Pt=Re.sortIndex-$e.sortIndex;return Pt!==0?Pt:Re.id-$e.id}typeof performance=="object"&&typeof performance.now=="function"?(g=performance,s.unstable_now=function(){return g.now()}):(b=Date,_=b.now(),s.unstable_now=function(){return b.now()-_});var g,b,_,E=[],P=[],I=1,O=null,R=3,A=!1,F=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(Re){for(var $e=l(P);$e!==null;){if($e.callback===null)h(P);else if($e.startTime<=Re)h(P),$e.sortIndex=$e.expirationTime,a(E,$e);else break;$e=l(P)}}function ie(Re){if(N=!1,Z(Re),!F)if(l(E)!==null)F=!0,Bt(re);else{var $e=l(P);$e!==null&&Ie(ie,$e.startTime-Re)}}function re(Re,$e){F=!1,N&&(N=!1,W(ye),ye=-1),A=!0;var Pt=R;try{for(Z($e),O=l(E);O!==null&&(!(O.expirationTime>$e)||Re&&!lt());){var ce=O.callback;if(typeof ce=="function"){O.callback=null,R=O.priorityLevel;var ge=ce(O.expirationTime<=$e);$e=s.unstable_now(),typeof ge=="function"?O.callback=ge:O===l(E)&&h(E),Z($e)}else h(E);O=l(E)}if(O!==null)var it=!0;else{var at=l(P);at!==null&&Ie(ie,at.startTime-$e),it=!1}return it}finally{O=null,R=Pt,A=!1}}var le=!1,Ce=null,ye=-1,we=5,Ne=-1;function lt(){return!(s.unstable_now()-Ne<we)}function ue(){if(Ce!==null){var Re=s.unstable_now();Ne=Re;var $e=!0;try{$e=Ce(!0,Re)}finally{$e?Le():(le=!1,Ce=null)}}else le=!1}var Le;typeof $=="function"?Le=function(){$(ue)}:typeof MessageChannel<"u"?(Q=new MessageChannel,He=Q.port2,Q.port1.onmessage=ue,Le=function(){He.postMessage(null)}):Le=function(){V(ue,0)};var Q,He;function Bt(Re){Ce=Re,le||(le=!0,Le())}function Ie(Re,$e){ye=V(function(){Re(s.unstable_now())},$e)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Re){Re.callback=null},s.unstable_continueExecution=function(){F||A||(F=!0,Bt(re))},s.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<Re?Math.floor(1e3/Re):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return l(E)},s.unstable_next=function(Re){switch(R){case 1:case 2:case 3:var $e=3;break;default:$e=R}var Pt=R;R=$e;try{return Re()}finally{R=Pt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Re,$e){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var Pt=R;R=Re;try{return $e()}finally{R=Pt}},s.unstable_scheduleCallback=function(Re,$e,Pt){var ce=s.unstable_now();switch(typeof Pt=="object"&&Pt!==null?(Pt=Pt.delay,Pt=typeof Pt=="number"&&0<Pt?ce+Pt:ce):Pt=ce,Re){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Pt+ge,Re={id:I++,callback:$e,priorityLevel:Re,startTime:Pt,expirationTime:ge,sortIndex:-1},Pt>ce?(Re.sortIndex=Pt,a(P,Re),l(E)===null&&Re===l(P)&&(N?(W(ye),ye=-1):N=!0,Ie(ie,Pt-ce))):(Re.sortIndex=ge,a(E,Re),F||A||(F=!0,Bt(re))),Re},s.unstable_shouldYield=lt,s.unstable_wrapCallback=function(Re){var $e=R;return function(){var Pt=R;R=$e;try{return Re.apply(this,arguments)}finally{R=Pt}}}}),VO=H((s,a)=>{a.exports=gE()}),L8=H(s=>{var a=Fe(),l=VO();function h(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m=new Set,g={};function b(c,p){_(c,p),_(c+"Capture",p)}function _(c,p){for(g[c]=p,c=0;c<p.length;c++)m.add(p[c])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},R={};function A(c){return P.call(R,c)?!0:P.call(O,c)?!1:I.test(c)?R[c]=!0:(O[c]=!0,!1)}function F(c,p,w,k){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function N(c,p,w,k){if(p===null||typeof p>"u"||F(c,p,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function V(c,p,w,k,j,K,oe){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=k,this.attributeNamespace=j,this.mustUseProperty=w,this.propertyName=c,this.type=p,this.sanitizeURL=K,this.removeEmptyString=oe}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){W[c]=new V(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];W[p]=new V(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){W[c]=new V(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){W[c]=new V(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){W[c]=new V(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){W[c]=new V(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){W[c]=new V(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){W[c]=new V(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){W[c]=new V(c,5,!1,c.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Z(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace($,Z);W[p]=new V(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace($,Z);W[p]=new V(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace($,Z);W[p]=new V(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){W[c]=new V(c,1,!1,c.toLowerCase(),null,!1,!1)}),W.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){W[c]=new V(c,1,!1,c.toLowerCase(),null,!0,!0)});function ie(c,p,w,k){var j=W.hasOwnProperty(p)?W[p]:null;(j!==null?j.type!==0:k||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(N(p,w,j,k)&&(w=null),k||j===null?A(p)&&(w===null?c.removeAttribute(p):c.setAttribute(p,""+w)):j.mustUseProperty?c[j.propertyName]=w===null?j.type===3?!1:"":w:(p=j.attributeName,k=j.attributeNamespace,w===null?c.removeAttribute(p):(j=j.type,w=j===3||j===4&&w===!0?"":""+w,k?c.setAttributeNS(k,p,w):c.setAttribute(p,w))))}var re=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),ye=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),Ne=Symbol.for("react.profiler"),lt=Symbol.for("react.provider"),ue=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),Bt=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),$e=Symbol.iterator;function Pt(c){return c===null||typeof c!="object"?null:(c=$e&&c[$e]||c["@@iterator"],typeof c=="function"?c:null)}var ce=Object.assign,ge;function it(c){if(ge===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);ge=p&&p[1]||""}return`
`+ge+c}var at=!1;function ct(c,p){if(!c||at)return"";at=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(vt){var k=vt}Reflect.construct(c,[],p)}else{try{p.call()}catch(vt){k=vt}c.call(p.prototype)}else{try{throw Error()}catch(vt){k=vt}c()}}catch(vt){if(vt&&k&&typeof vt.stack=="string"){for(var j=vt.stack.split(`
`),K=k.stack.split(`
`),oe=j.length-1,ke=K.length-1;1<=oe&&0<=ke&&j[oe]!==K[ke];)ke--;for(;1<=oe&&0<=ke;oe--,ke--)if(j[oe]!==K[ke]){if(oe!==1||ke!==1)do if(oe--,ke--,0>ke||j[oe]!==K[ke]){var Be=`
`+j[oe].replace(" at new "," at ");return c.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",c.displayName)),Be}while(1<=oe&&0<=ke);break}}}finally{at=!1,Error.prepareStackTrace=w}return(c=c?c.displayName||c.name:"")?it(c):""}function Xe(c){switch(c.tag){case 5:return it(c.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 2:case 15:return c=ct(c.type,!1),c;case 11:return c=ct(c.type.render,!1),c;case 1:return c=ct(c.type,!0),c;default:return""}}function an(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case ye:return"Fragment";case Ce:return"Portal";case Ne:return"Profiler";case we:return"StrictMode";case Q:return"Suspense";case He:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case ue:return(c.displayName||"Context")+".Consumer";case lt:return(c._context.displayName||"Context")+".Provider";case Le:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Bt:return p=c.displayName||null,p!==null?p:an(c.type)||"Memo";case Ie:p=c._payload,c=c._init;try{return an(c(p))}catch{}}return null}function St(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return an(p);case 8:return p===we?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function nn(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Sn(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Vn(c){var p=Sn(c)?"checked":"value",w=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),k=""+c[p];if(!c.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var j=w.get,K=w.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return j.call(this)},set:function(oe){k=""+oe,K.call(this,oe)}}),Object.defineProperty(c,p,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(oe){k=""+oe},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function Ln(c){c._valueTracker||(c._valueTracker=Vn(c))}function Xr(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var w=p.getValue(),k="";return c&&(k=Sn(c)?c.checked?"true":"false":c.value),c=k,c!==w?(p.setValue(c),!0):!1}function ee(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function ft(c,p){var w=p.checked;return ce({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??c._wrapperState.initialChecked})}function pt(c,p){var w=p.defaultValue==null?"":p.defaultValue,k=p.checked!=null?p.checked:p.defaultChecked;w=nn(p.value!=null?p.value:w),c._wrapperState={initialChecked:k,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ee(c,p){p=p.checked,p!=null&&ie(c,"checked",p,!1)}function Se(c,p){Ee(c,p);var w=nn(p.value),k=p.type;if(w!=null)k==="number"?(w===0&&c.value===""||c.value!=w)&&(c.value=""+w):c.value!==""+w&&(c.value=""+w);else if(k==="submit"||k==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?kt(c,p.type,w):p.hasOwnProperty("defaultValue")&&kt(c,p.type,nn(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function qe(c,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var k=p.type;if(!(k!=="submit"&&k!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,w||p===c.value||(c.value=p),c.defaultValue=p}w=c.name,w!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,w!==""&&(c.name=w)}function kt(c,p,w){(p!=="number"||ee(c.ownerDocument)!==c)&&(w==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+w&&(c.defaultValue=""+w))}var Ot=Array.isArray;function st(c,p,w,k){if(c=c.options,p){p={};for(var j=0;j<w.length;j++)p["$"+w[j]]=!0;for(w=0;w<c.length;w++)j=p.hasOwnProperty("$"+c[w].value),c[w].selected!==j&&(c[w].selected=j),j&&k&&(c[w].defaultSelected=!0)}else{for(w=""+nn(w),p=null,j=0;j<c.length;j++){if(c[j].value===w){c[j].selected=!0,k&&(c[j].defaultSelected=!0);return}p!==null||c[j].disabled||(p=c[j])}p!==null&&(p.selected=!0)}}function Vt(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(h(91));return ce({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function It(c,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(h(92));if(Ot(w)){if(1<w.length)throw Error(h(93));w=w[0]}p=w}p==null&&(p=""),w=p}c._wrapperState={initialValue:nn(w)}}function Lt(c,p){var w=nn(p.value),k=nn(p.defaultValue);w!=null&&(w=""+w,w!==c.value&&(c.value=w),p.defaultValue==null&&c.defaultValue!==w&&(c.defaultValue=w)),k!=null&&(c.defaultValue=""+k)}function Rn(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function Br(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?Br(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Eo,Op=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,k,j){MSApp.execUnsafeLocalFunction(function(){return c(p,w,k,j)})}:c}(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(Eo=Eo||document.createElement("div"),Eo.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Eo.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function Vo(c,p){if(p){var w=c.firstChild;if(w&&w===c.lastChild&&w.nodeType===3){w.nodeValue=p;return}}c.textContent=p}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gi=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(c){Gi.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),ru[p]=ru[c]})});function Vm(c,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||ru.hasOwnProperty(c)&&ru[c]?(""+p).trim():p+"px"}function g5(c,p){c=c.style;for(var w in p)if(p.hasOwnProperty(w)){var k=w.indexOf("--")===0,j=Vm(w,p[w],k);w==="float"&&(w="cssFloat"),k?c.setProperty(w,j):c[w]=j}}var iu=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v5(c,p){if(p){if(iu[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(h(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(h(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(h(61))}if(p.style!=null&&typeof p.style!="object")throw Error(h(62))}}function I7(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R7=null;function D7(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var y5=null,el=null,su=null;function ofe(c){if(c=ey(c)){if(typeof y5!="function")throw Error(h(280));var p=c.stateNode;p&&(p=ZT(p),y5(c.stateNode,c.type,p))}}function afe(c){el?su?su.push(c):su=[c]:el=c}function lfe(){if(el){var c=el,p=su;if(su=el=null,ofe(c),p)for(c=0;c<p.length;c++)ofe(p[c])}}function ufe(c,p){return c(p)}function cfe(){}var tz=!1;function dfe(c,p,w){if(tz)return c(p,w);tz=!0;try{return ufe(c,p,w)}finally{tz=!1,(el!==null||su!==null)&&(cfe(),lfe())}}function O7(c,p){var w=c.stateNode;if(w===null)return null;var k=ZT(w);if(k===null)return null;w=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(c=c.type,k=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!k;break e;default:c=!1}if(c)return null;if(w&&typeof w!="function")throw Error(h(231,p,typeof w));return w}var nz=!1;if(E)try{b5={},Object.defineProperty(b5,"passive",{get:function(){nz=!0}}),window.addEventListener("test",b5,b5),window.removeEventListener("test",b5,b5)}catch{nz=!1}var b5;function Tke(c,p,w,k,j,K,oe,ke,Be){var vt=Array.prototype.slice.call(arguments,3);try{p.apply(w,vt)}catch(Gt){this.onError(Gt)}}var L7=!1,PT=null,TT=!1,rz=null,Mke={onError:function(c){L7=!0,PT=c}};function kke(c,p,w,k,j,K,oe,ke,Be){L7=!1,PT=null,Tke.apply(Mke,arguments)}function Ake(c,p,w,k,j,K,oe,ke,Be){if(kke.apply(this,arguments),L7){if(L7){var vt=PT;L7=!1,PT=null}else throw Error(h(198));TT||(TT=!0,rz=vt)}}function jm(c){var p=c,w=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,p.flags&4098&&(w=p.return),c=p.return;while(c)}return p.tag===3?w:null}function hfe(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function pfe(c){if(jm(c)!==c)throw Error(h(188))}function Ike(c){var p=c.alternate;if(!p){if(p=jm(c),p===null)throw Error(h(188));return p!==c?null:c}for(var w=c,k=p;;){var j=w.return;if(j===null)break;var K=j.alternate;if(K===null){if(k=j.return,k!==null){w=k;continue}break}if(j.child===K.child){for(K=j.child;K;){if(K===w)return pfe(j),c;if(K===k)return pfe(j),p;K=K.sibling}throw Error(h(188))}if(w.return!==k.return)w=j,k=K;else{for(var oe=!1,ke=j.child;ke;){if(ke===w){oe=!0,w=j,k=K;break}if(ke===k){oe=!0,k=j,w=K;break}ke=ke.sibling}if(!oe){for(ke=K.child;ke;){if(ke===w){oe=!0,w=K,k=j;break}if(ke===k){oe=!0,k=K,w=j;break}ke=ke.sibling}if(!oe)throw Error(h(189))}}if(w.alternate!==k)throw Error(h(190))}if(w.tag!==3)throw Error(h(188));return w.stateNode.current===w?c:p}function ffe(c){return c=Ike(c),c!==null?mfe(c):null}function mfe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=mfe(c);if(p!==null)return p;c=c.sibling}return null}var gfe=l.unstable_scheduleCallback,vfe=l.unstable_cancelCallback,Rke=l.unstable_shouldYield,Dke=l.unstable_requestPaint,bs=l.unstable_now,Oke=l.unstable_getCurrentPriorityLevel,iz=l.unstable_ImmediatePriority,yfe=l.unstable_UserBlockingPriority,MT=l.unstable_NormalPriority,Lke=l.unstable_LowPriority,bfe=l.unstable_IdlePriority,kT=null,mc=null;function Nke(c){if(mc&&typeof mc.onCommitFiberRoot=="function")try{mc.onCommitFiberRoot(kT,c,void 0,(c.current.flags&128)===128)}catch{}}var ou=Math.clz32?Math.clz32:Uke,Fke=Math.log,Bke=Math.LN2;function Uke(c){return c>>>=0,c===0?32:31-(Fke(c)/Bke|0)|0}var AT=64,IT=4194304;function N7(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function RT(c,p){var w=c.pendingLanes;if(w===0)return 0;var k=0,j=c.suspendedLanes,K=c.pingedLanes,oe=w&268435455;if(oe!==0){var ke=oe&~j;ke!==0?k=N7(ke):(K&=oe,K!==0&&(k=N7(K)))}else oe=w&~j,oe!==0?k=N7(oe):K!==0&&(k=N7(K));if(k===0)return 0;if(p!==0&&p!==k&&!(p&j)&&(j=k&-k,K=p&-p,j>=K||j===16&&(K&4194240)!==0))return p;if(k&4&&(k|=w&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=k;0<p;)w=31-ou(p),j=1<<w,k|=c[w],p&=~j;return k}function zke(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vke(c,p){for(var w=c.suspendedLanes,k=c.pingedLanes,j=c.expirationTimes,K=c.pendingLanes;0<K;){var oe=31-ou(K),ke=1<<oe,Be=j[oe];Be===-1?(!(ke&w)||ke&k)&&(j[oe]=zke(ke,p)):Be<=p&&(c.expiredLanes|=ke),K&=~ke}}function sz(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function _fe(){var c=AT;return AT<<=1,!(AT&4194240)&&(AT=64),c}function oz(c){for(var p=[],w=0;31>w;w++)p.push(c);return p}function F7(c,p,w){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-ou(p),c[p]=w}function jke(c,p){var w=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var k=c.eventTimes;for(c=c.expirationTimes;0<w;){var j=31-ou(w),K=1<<j;p[j]=0,k[j]=-1,c[j]=-1,w&=~K}}function az(c,p){var w=c.entangledLanes|=p;for(c=c.entanglements;w;){var k=31-ou(w),j=1<<k;j&p|c[k]&p&&(c[k]|=p),w&=~j}}var ri=0;function wfe(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var xfe,lz,Sfe,Efe,Cfe,uz=!1,DT=[],Lp=null,Np=null,Fp=null,B7=new Map,U7=new Map,Bp=[],Hke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pfe(c,p){switch(c){case"focusin":case"focusout":Lp=null;break;case"dragenter":case"dragleave":Np=null;break;case"mouseover":case"mouseout":Fp=null;break;case"pointerover":case"pointerout":B7.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":U7.delete(p.pointerId)}}function z7(c,p,w,k,j,K){return c===null||c.nativeEvent!==K?(c={blockedOn:p,domEventName:w,eventSystemFlags:k,nativeEvent:K,targetContainers:[j]},p!==null&&(p=ey(p),p!==null&&lz(p)),c):(c.eventSystemFlags|=k,p=c.targetContainers,j!==null&&p.indexOf(j)===-1&&p.push(j),c)}function Gke(c,p,w,k,j){switch(p){case"focusin":return Lp=z7(Lp,c,p,w,k,j),!0;case"dragenter":return Np=z7(Np,c,p,w,k,j),!0;case"mouseover":return Fp=z7(Fp,c,p,w,k,j),!0;case"pointerover":var K=j.pointerId;return B7.set(K,z7(B7.get(K)||null,c,p,w,k,j)),!0;case"gotpointercapture":return K=j.pointerId,U7.set(K,z7(U7.get(K)||null,c,p,w,k,j)),!0}return!1}function Tfe(c){var p=Hm(c.target);if(p!==null){var w=jm(p);if(w!==null){if(p=w.tag,p===13){if(p=hfe(w),p!==null){c.blockedOn=p,Cfe(c.priority,function(){Sfe(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){c.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}c.blockedOn=null}function OT(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var w=dz(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(w===null){w=c.nativeEvent;var k=new w.constructor(w.type,w);R7=k,w.target.dispatchEvent(k),R7=null}else return p=ey(w),p!==null&&lz(p),c.blockedOn=w,!1;p.shift()}return!0}function Mfe(c,p,w){OT(c)&&w.delete(p)}function Wke(){uz=!1,Lp!==null&&OT(Lp)&&(Lp=null),Np!==null&&OT(Np)&&(Np=null),Fp!==null&&OT(Fp)&&(Fp=null),B7.forEach(Mfe),U7.forEach(Mfe)}function V7(c,p){c.blockedOn===p&&(c.blockedOn=null,uz||(uz=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Wke)))}function j7(c){function p(j){return V7(j,c)}if(0<DT.length){V7(DT[0],c);for(var w=1;w<DT.length;w++){var k=DT[w];k.blockedOn===c&&(k.blockedOn=null)}}for(Lp!==null&&V7(Lp,c),Np!==null&&V7(Np,c),Fp!==null&&V7(Fp,c),B7.forEach(p),U7.forEach(p),w=0;w<Bp.length;w++)k=Bp[w],k.blockedOn===c&&(k.blockedOn=null);for(;0<Bp.length&&(w=Bp[0],w.blockedOn===null);)Tfe(w),w.blockedOn===null&&Bp.shift()}var _5=re.ReactCurrentBatchConfig,LT=!0;function $ke(c,p,w,k){var j=ri,K=_5.transition;_5.transition=null;try{ri=1,cz(c,p,w,k)}finally{ri=j,_5.transition=K}}function Kke(c,p,w,k){var j=ri,K=_5.transition;_5.transition=null;try{ri=4,cz(c,p,w,k)}finally{ri=j,_5.transition=K}}function cz(c,p,w,k){if(LT){var j=dz(c,p,w,k);if(j===null)Pz(c,p,k,NT,w),Pfe(c,k);else if(Gke(j,c,p,w,k))k.stopPropagation();else if(Pfe(c,k),p&4&&-1<Hke.indexOf(c)){for(;j!==null;){var K=ey(j);if(K!==null&&xfe(K),K=dz(c,p,w,k),K===null&&Pz(c,p,k,NT,w),K===j)break;j=K}j!==null&&k.stopPropagation()}else Pz(c,p,k,null,w)}}var NT=null;function dz(c,p,w,k){if(NT=null,c=D7(k),c=Hm(c),c!==null)if(p=jm(c),p===null)c=null;else if(w=p.tag,w===13){if(c=hfe(p),c!==null)return c;c=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return NT=c,null}function kfe(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oke()){case iz:return 1;case yfe:return 4;case MT:case Lke:return 16;case bfe:return 536870912;default:return 16}default:return 16}}var Up=null,hz=null,FT=null;function Afe(){if(FT)return FT;var c,p=hz,w=p.length,k,j="value"in Up?Up.value:Up.textContent,K=j.length;for(c=0;c<w&&p[c]===j[c];c++);var oe=w-c;for(k=1;k<=oe&&p[w-k]===j[K-k];k++);return FT=j.slice(c,1<k?1-k:void 0)}function BT(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function UT(){return!0}function Ife(){return!1}function p0(c){function p(w,k,j,K,oe){this._reactName=w,this._targetInst=j,this.type=k,this.nativeEvent=K,this.target=oe,this.currentTarget=null;for(var ke in c)c.hasOwnProperty(ke)&&(w=c[ke],this[ke]=w?w(K):K[ke]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?UT:Ife,this.isPropagationStopped=Ife,this}return ce(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=UT)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=UT)},persist:function(){},isPersistent:UT}),p}var w5={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pz=p0(w5),H7=ce({},w5,{view:0,detail:0}),Xke=p0(H7),fz,mz,G7,zT=ce({},H7,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vz,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==G7&&(G7&&c.type==="mousemove"?(fz=c.screenX-G7.screenX,mz=c.screenY-G7.screenY):mz=fz=0,G7=c),fz)},movementY:function(c){return"movementY"in c?c.movementY:mz}}),Rfe=p0(zT),qke=ce({},zT,{dataTransfer:0}),Yke=p0(qke),Zke=ce({},H7,{relatedTarget:0}),gz=p0(Zke),Qke=ce({},w5,{animationName:0,elapsedTime:0,pseudoElement:0}),Jke=p0(Qke),eAe=ce({},w5,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),tAe=p0(eAe),nAe=ce({},w5,{data:0}),Dfe=p0(nAe),rAe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iAe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sAe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oAe(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=sAe[c])?!!p[c]:!1}function vz(){return oAe}var aAe=ce({},H7,{key:function(c){if(c.key){var p=rAe[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=BT(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?iAe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vz,charCode:function(c){return c.type==="keypress"?BT(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?BT(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),lAe=p0(aAe),uAe=ce({},zT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ofe=p0(uAe),cAe=ce({},H7,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vz}),dAe=p0(cAe),hAe=ce({},w5,{propertyName:0,elapsedTime:0,pseudoElement:0}),pAe=p0(hAe),fAe=ce({},zT,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),mAe=p0(fAe),gAe=[9,13,27,32],yz=E&&"CompositionEvent"in window,W7=null;E&&"documentMode"in document&&(W7=document.documentMode);var vAe=E&&"TextEvent"in window&&!W7,Lfe=E&&(!yz||W7&&8<W7&&11>=W7),Nfe=String.fromCharCode(32),Ffe=!1;function Bfe(c,p){switch(c){case"keyup":return gAe.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ufe(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var x5=!1;function yAe(c,p){switch(c){case"compositionend":return Ufe(p);case"keypress":return p.which!==32?null:(Ffe=!0,Nfe);case"textInput":return c=p.data,c===Nfe&&Ffe?null:c;default:return null}}function bAe(c,p){if(x5)return c==="compositionend"||!yz&&Bfe(c,p)?(c=Afe(),FT=hz=Up=null,x5=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Lfe&&p.locale!=="ko"?null:p.data;default:return null}}var _Ae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zfe(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!_Ae[c.type]:p==="textarea"}function Vfe(c,p,w,k){afe(k),p=XT(p,"onChange"),0<p.length&&(w=new pz("onChange","change",null,w,k),c.push({event:w,listeners:p}))}var $7=null,K7=null;function wAe(c){o1e(c,0)}function VT(c){var p=T5(c);if(Xr(p))return c}function xAe(c,p){if(c==="change")return p}var jfe=!1;E&&(E?(jT="oninput"in document,jT||(_z=document.createElement("div"),_z.setAttribute("oninput","return;"),jT=typeof _z.oninput=="function"),bz=jT):bz=!1,jfe=bz&&(!document.documentMode||9<document.documentMode));var bz,jT,_z;function Hfe(){$7&&($7.detachEvent("onpropertychange",Gfe),K7=$7=null)}function Gfe(c){if(c.propertyName==="value"&&VT(K7)){var p=[];Vfe(p,K7,c,D7(c)),dfe(wAe,p)}}function SAe(c,p,w){c==="focusin"?(Hfe(),$7=p,K7=w,$7.attachEvent("onpropertychange",Gfe)):c==="focusout"&&Hfe()}function EAe(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return VT(K7)}function CAe(c,p){if(c==="click")return VT(p)}function PAe(c,p){if(c==="input"||c==="change")return VT(p)}function TAe(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var au=typeof Object.is=="function"?Object.is:TAe;function X7(c,p){if(au(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var w=Object.keys(c),k=Object.keys(p);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var j=w[k];if(!P.call(p,j)||!au(c[j],p[j]))return!1}return!0}function Wfe(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function $fe(c,p){var w=Wfe(c);c=0;for(var k;w;){if(w.nodeType===3){if(k=c+w.textContent.length,c<=p&&k>=p)return{node:w,offset:p-c};c=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Wfe(w)}}function Kfe(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Kfe(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function Xfe(){for(var c=window,p=ee();p instanceof c.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)c=p.contentWindow;else break;p=ee(c.document)}return p}function wz(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function MAe(c){var p=Xfe(),w=c.focusedElem,k=c.selectionRange;if(p!==w&&w&&w.ownerDocument&&Kfe(w.ownerDocument.documentElement,w)){if(k!==null&&wz(w)){if(p=k.start,c=k.end,c===void 0&&(c=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(c,w.value.length);else if(c=(p=w.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var j=w.textContent.length,K=Math.min(k.start,j);k=k.end===void 0?K:Math.min(k.end,j),!c.extend&&K>k&&(j=k,k=K,K=j),j=$fe(w,K);var oe=$fe(w,k);j&&oe&&(c.rangeCount!==1||c.anchorNode!==j.node||c.anchorOffset!==j.offset||c.focusNode!==oe.node||c.focusOffset!==oe.offset)&&(p=p.createRange(),p.setStart(j.node,j.offset),c.removeAllRanges(),K>k?(c.addRange(p),c.extend(oe.node,oe.offset)):(p.setEnd(oe.node,oe.offset),c.addRange(p)))}}for(p=[],c=w;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)c=p[w],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var kAe=E&&"documentMode"in document&&11>=document.documentMode,S5=null,xz=null,q7=null,Sz=!1;function qfe(c,p,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Sz||S5==null||S5!==ee(k)||(k=S5,"selectionStart"in k&&wz(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),q7&&X7(q7,k)||(q7=k,k=XT(xz,"onSelect"),0<k.length&&(p=new pz("onSelect","select",null,p,w),c.push({event:p,listeners:k}),p.target=S5)))}function HT(c,p){var w={};return w[c.toLowerCase()]=p.toLowerCase(),w["Webkit"+c]="webkit"+p,w["Moz"+c]="moz"+p,w}var E5={animationend:HT("Animation","AnimationEnd"),animationiteration:HT("Animation","AnimationIteration"),animationstart:HT("Animation","AnimationStart"),transitionend:HT("Transition","TransitionEnd")},Ez={},Yfe={};E&&(Yfe=document.createElement("div").style,"AnimationEvent"in window||(delete E5.animationend.animation,delete E5.animationiteration.animation,delete E5.animationstart.animation),"TransitionEvent"in window||delete E5.transitionend.transition);function GT(c){if(Ez[c])return Ez[c];if(!E5[c])return c;var p=E5[c],w;for(w in p)if(p.hasOwnProperty(w)&&w in Yfe)return Ez[c]=p[w];return c}var Zfe=GT("animationend"),Qfe=GT("animationiteration"),Jfe=GT("animationstart"),e1e=GT("transitionend"),t1e=new Map,n1e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zp(c,p){t1e.set(c,p),b(p,[c])}for($T=0;$T<n1e.length;$T++)WT=n1e[$T],r1e=WT.toLowerCase(),i1e=WT[0].toUpperCase()+WT.slice(1),zp(r1e,"on"+i1e);var WT,r1e,i1e,$T;zp(Zfe,"onAnimationEnd"),zp(Qfe,"onAnimationIteration"),zp(Jfe,"onAnimationStart"),zp("dblclick","onDoubleClick"),zp("focusin","onFocus"),zp("focusout","onBlur"),zp(e1e,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Y7="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AAe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Y7));function s1e(c,p,w){var k=c.type||"unknown-event";c.currentTarget=w,Ake(k,p,void 0,c),c.currentTarget=null}function o1e(c,p){p=(p&4)!==0;for(var w=0;w<c.length;w++){var k=c[w],j=k.event;k=k.listeners;e:{var K=void 0;if(p)for(var oe=k.length-1;0<=oe;oe--){var ke=k[oe],Be=ke.instance,vt=ke.currentTarget;if(ke=ke.listener,Be!==K&&j.isPropagationStopped())break e;s1e(j,ke,vt),K=Be}else for(oe=0;oe<k.length;oe++){if(ke=k[oe],Be=ke.instance,vt=ke.currentTarget,ke=ke.listener,Be!==K&&j.isPropagationStopped())break e;s1e(j,ke,vt),K=Be}}}if(TT)throw c=rz,TT=!1,rz=null,c}function Ti(c,p){var w=p[Rz];w===void 0&&(w=p[Rz]=new Set);var k=c+"__bubble";w.has(k)||(a1e(p,c,2,!1),w.add(k))}function Cz(c,p,w){var k=0;p&&(k|=4),a1e(w,c,k,p)}var KT="_reactListening"+Math.random().toString(36).slice(2);function Z7(c){if(!c[KT]){c[KT]=!0,m.forEach(function(w){w!=="selectionchange"&&(AAe.has(w)||Cz(w,!1,c),Cz(w,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[KT]||(p[KT]=!0,Cz("selectionchange",!1,p))}}function a1e(c,p,w,k){switch(kfe(p)){case 1:var j=$ke;break;case 4:j=Kke;break;default:j=cz}w=j.bind(null,p,w,c),j=void 0,!nz||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(j=!0),k?j!==void 0?c.addEventListener(p,w,{capture:!0,passive:j}):c.addEventListener(p,w,!0):j!==void 0?c.addEventListener(p,w,{passive:j}):c.addEventListener(p,w,!1)}function Pz(c,p,w,k,j){var K=k;if(!(p&1)&&!(p&2)&&k!==null)e:for(;;){if(k===null)return;var oe=k.tag;if(oe===3||oe===4){var ke=k.stateNode.containerInfo;if(ke===j||ke.nodeType===8&&ke.parentNode===j)break;if(oe===4)for(oe=k.return;oe!==null;){var Be=oe.tag;if((Be===3||Be===4)&&(Be=oe.stateNode.containerInfo,Be===j||Be.nodeType===8&&Be.parentNode===j))return;oe=oe.return}for(;ke!==null;){if(oe=Hm(ke),oe===null)return;if(Be=oe.tag,Be===5||Be===6){k=K=oe;continue e}ke=ke.parentNode}}k=k.return}dfe(function(){var vt=K,Gt=D7(w),qt=[];e:{var jt=t1e.get(c);if(jt!==void 0){var fn=pz,En=c;switch(c){case"keypress":if(BT(w)===0)break e;case"keydown":case"keyup":fn=lAe;break;case"focusin":En="focus",fn=gz;break;case"focusout":En="blur",fn=gz;break;case"beforeblur":case"afterblur":fn=gz;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fn=Rfe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fn=Yke;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fn=dAe;break;case Zfe:case Qfe:case Jfe:fn=Jke;break;case e1e:fn=pAe;break;case"scroll":fn=Xke;break;case"wheel":fn=mAe;break;case"copy":case"cut":case"paste":fn=tAe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fn=Ofe}var Mn=(p&4)!==0,_s=!Mn&&c==="scroll",ot=Mn?jt!==null?jt+"Capture":null:jt;Mn=[];for(var Ge=vt,ut;Ge!==null;){ut=Ge;var Qt=ut.stateNode;if(ut.tag===5&&Qt!==null&&(ut=Qt,ot!==null&&(Qt=O7(Ge,ot),Qt!=null&&Mn.push(Q7(Ge,Qt,ut)))),_s)break;Ge=Ge.return}0<Mn.length&&(jt=new fn(jt,En,null,w,Gt),qt.push({event:jt,listeners:Mn}))}}if(!(p&7)){e:{if(jt=c==="mouseover"||c==="pointerover",fn=c==="mouseout"||c==="pointerout",jt&&w!==R7&&(En=w.relatedTarget||w.fromElement)&&(Hm(En)||En[Rd]))break e;if((fn||jt)&&(jt=Gt.window===Gt?Gt:(jt=Gt.ownerDocument)?jt.defaultView||jt.parentWindow:window,fn?(En=w.relatedTarget||w.toElement,fn=vt,En=En?Hm(En):null,En!==null&&(_s=jm(En),En!==_s||En.tag!==5&&En.tag!==6)&&(En=null)):(fn=null,En=vt),fn!==En)){if(Mn=Rfe,Qt="onMouseLeave",ot="onMouseEnter",Ge="mouse",(c==="pointerout"||c==="pointerover")&&(Mn=Ofe,Qt="onPointerLeave",ot="onPointerEnter",Ge="pointer"),_s=fn==null?jt:T5(fn),ut=En==null?jt:T5(En),jt=new Mn(Qt,Ge+"leave",fn,w,Gt),jt.target=_s,jt.relatedTarget=ut,Qt=null,Hm(Gt)===vt&&(Mn=new Mn(ot,Ge+"enter",En,w,Gt),Mn.target=ut,Mn.relatedTarget=_s,Qt=Mn),_s=Qt,fn&&En)t:{for(Mn=fn,ot=En,Ge=0,ut=Mn;ut;ut=C5(ut))Ge++;for(ut=0,Qt=ot;Qt;Qt=C5(Qt))ut++;for(;0<Ge-ut;)Mn=C5(Mn),Ge--;for(;0<ut-Ge;)ot=C5(ot),ut--;for(;Ge--;){if(Mn===ot||ot!==null&&Mn===ot.alternate)break t;Mn=C5(Mn),ot=C5(ot)}Mn=null}else Mn=null;fn!==null&&l1e(qt,jt,fn,Mn,!1),En!==null&&_s!==null&&l1e(qt,_s,En,Mn,!0)}}e:{if(jt=vt?T5(vt):window,fn=jt.nodeName&&jt.nodeName.toLowerCase(),fn==="select"||fn==="input"&&jt.type==="file")var An=xAe;else if(zfe(jt))if(jfe)An=PAe;else{An=EAe;var Gn=SAe}else(fn=jt.nodeName)&&fn.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(An=CAe);if(An&&(An=An(c,vt))){Vfe(qt,An,w,Gt);break e}Gn&&Gn(c,jt,vt),c==="focusout"&&(Gn=jt._wrapperState)&&Gn.controlled&&jt.type==="number"&&kt(jt,"number",jt.value)}switch(Gn=vt?T5(vt):window,c){case"focusin":(zfe(Gn)||Gn.contentEditable==="true")&&(S5=Gn,xz=vt,q7=null);break;case"focusout":q7=xz=S5=null;break;case"mousedown":Sz=!0;break;case"contextmenu":case"mouseup":case"dragend":Sz=!1,qfe(qt,w,Gt);break;case"selectionchange":if(kAe)break;case"keydown":case"keyup":qfe(qt,w,Gt)}var Wn;if(yz)e:{switch(c){case"compositionstart":var nr="onCompositionStart";break e;case"compositionend":nr="onCompositionEnd";break e;case"compositionupdate":nr="onCompositionUpdate";break e}nr=void 0}else x5?Bfe(c,w)&&(nr="onCompositionEnd"):c==="keydown"&&w.keyCode===229&&(nr="onCompositionStart");nr&&(Lfe&&w.locale!=="ko"&&(x5||nr!=="onCompositionStart"?nr==="onCompositionEnd"&&x5&&(Wn=Afe()):(Up=Gt,hz="value"in Up?Up.value:Up.textContent,x5=!0)),Gn=XT(vt,nr),0<Gn.length&&(nr=new Dfe(nr,c,null,w,Gt),qt.push({event:nr,listeners:Gn}),Wn?nr.data=Wn:(Wn=Ufe(w),Wn!==null&&(nr.data=Wn)))),(Wn=vAe?yAe(c,w):bAe(c,w))&&(vt=XT(vt,"onBeforeInput"),0<vt.length&&(Gt=new Dfe("onBeforeInput","beforeinput",null,w,Gt),qt.push({event:Gt,listeners:vt}),Gt.data=Wn))}o1e(qt,p)})}function Q7(c,p,w){return{instance:c,listener:p,currentTarget:w}}function XT(c,p){for(var w=p+"Capture",k=[];c!==null;){var j=c,K=j.stateNode;j.tag===5&&K!==null&&(j=K,K=O7(c,w),K!=null&&k.unshift(Q7(c,K,j)),K=O7(c,p),K!=null&&k.push(Q7(c,K,j))),c=c.return}return k}function C5(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function l1e(c,p,w,k,j){for(var K=p._reactName,oe=[];w!==null&&w!==k;){var ke=w,Be=ke.alternate,vt=ke.stateNode;if(Be!==null&&Be===k)break;ke.tag===5&&vt!==null&&(ke=vt,j?(Be=O7(w,K),Be!=null&&oe.unshift(Q7(w,Be,ke))):j||(Be=O7(w,K),Be!=null&&oe.push(Q7(w,Be,ke)))),w=w.return}oe.length!==0&&c.push({event:p,listeners:oe})}var IAe=/\r\n?/g,RAe=/\u0000|\uFFFD/g;function u1e(c){return(typeof c=="string"?c:""+c).replace(IAe,`
`).replace(RAe,"")}function qT(c,p,w){if(p=u1e(p),u1e(c)!==p&&w)throw Error(h(425))}function YT(){}var Tz=null,Mz=null;function kz(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Az=typeof setTimeout=="function"?setTimeout:void 0,DAe=typeof clearTimeout=="function"?clearTimeout:void 0,c1e=typeof Promise=="function"?Promise:void 0,OAe=typeof queueMicrotask=="function"?queueMicrotask:typeof c1e<"u"?function(c){return c1e.resolve(null).then(c).catch(LAe)}:Az;function LAe(c){setTimeout(function(){throw c})}function Iz(c,p){var w=p,k=0;do{var j=w.nextSibling;if(c.removeChild(w),j&&j.nodeType===8)if(w=j.data,w==="/$"){if(k===0){c.removeChild(j),j7(p);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=j}while(w);j7(p)}function Vp(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function d1e(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return c;p--}else w==="/$"&&p++}c=c.previousSibling}return null}var P5=Math.random().toString(36).slice(2),gc="__reactFiber$"+P5,J7="__reactProps$"+P5,Rd="__reactContainer$"+P5,Rz="__reactEvents$"+P5,NAe="__reactListeners$"+P5,FAe="__reactHandles$"+P5;function Hm(c){var p=c[gc];if(p)return p;for(var w=c.parentNode;w;){if(p=w[Rd]||w[gc]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(c=d1e(c);c!==null;){if(w=c[gc])return w;c=d1e(c)}return p}c=w,w=c.parentNode}return null}function ey(c){return c=c[gc]||c[Rd],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function T5(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(h(33))}function ZT(c){return c[J7]||null}var Dz=[],M5=-1;function jp(c){return{current:c}}function Mi(c){0>M5||(c.current=Dz[M5],Dz[M5]=null,M5--)}function yi(c,p){M5++,Dz[M5]=c.current,c.current=p}var Hp={},jo=jp(Hp),Wa=jp(!1),Gm=Hp;function k5(c,p){var w=c.type.contextTypes;if(!w)return Hp;var k=c.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===p)return k.__reactInternalMemoizedMaskedChildContext;var j={},K;for(K in w)j[K]=p[K];return k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=j),j}function $a(c){return c=c.childContextTypes,c!=null}function QT(){Mi(Wa),Mi(jo)}function h1e(c,p,w){if(jo.current!==Hp)throw Error(h(168));yi(jo,p),yi(Wa,w)}function p1e(c,p,w){var k=c.stateNode;if(p=p.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var j in k)if(!(j in p))throw Error(h(108,St(c)||"Unknown",j));return ce({},w,k)}function JT(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Hp,Gm=jo.current,yi(jo,c),yi(Wa,Wa.current),!0}function f1e(c,p,w){var k=c.stateNode;if(!k)throw Error(h(169));w?(c=p1e(c,p,Gm),k.__reactInternalMemoizedMergedChildContext=c,Mi(Wa),Mi(jo),yi(jo,c)):Mi(Wa),yi(Wa,w)}var Dd=null,eM=!1,Oz=!1;function m1e(c){Dd===null?Dd=[c]:Dd.push(c)}function BAe(c){eM=!0,m1e(c)}function Gp(){if(!Oz&&Dd!==null){Oz=!0;var c=0,p=ri;try{var w=Dd;for(ri=1;c<w.length;c++){var k=w[c];do k=k(!0);while(k!==null)}Dd=null,eM=!1}catch(j){throw Dd!==null&&(Dd=Dd.slice(c+1)),gfe(iz,Gp),j}finally{ri=p,Oz=!1}}return null}var A5=[],I5=0,tM=null,nM=0,tl=[],nl=0,Wm=null,Od=1,Ld="";function $m(c,p){A5[I5++]=nM,A5[I5++]=tM,tM=c,nM=p}function g1e(c,p,w){tl[nl++]=Od,tl[nl++]=Ld,tl[nl++]=Wm,Wm=c;var k=Od;c=Ld;var j=32-ou(k)-1;k&=~(1<<j),w+=1;var K=32-ou(p)+j;if(30<K){var oe=j-j%5;K=(k&(1<<oe)-1).toString(32),k>>=oe,j-=oe,Od=1<<32-ou(p)+j|w<<j|k,Ld=K+c}else Od=1<<K|w<<j|k,Ld=c}function Lz(c){c.return!==null&&($m(c,1),g1e(c,1,0))}function Nz(c){for(;c===tM;)tM=A5[--I5],A5[I5]=null,nM=A5[--I5],A5[I5]=null;for(;c===Wm;)Wm=tl[--nl],tl[nl]=null,Ld=tl[--nl],tl[nl]=null,Od=tl[--nl],tl[nl]=null}var f0=null,m0=null,Li=!1,lu=null;function v1e(c,p){var w=ol(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=c,p=c.deletions,p===null?(c.deletions=[w],c.flags|=16):p.push(w)}function y1e(c,p){switch(c.tag){case 5:var w=c.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,f0=c,m0=Vp(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,f0=c,m0=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=Wm!==null?{id:Od,overflow:Ld}:null,c.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=ol(18,null,null,0),w.stateNode=p,w.return=c,c.child=w,f0=c,m0=null,!0):!1;default:return!1}}function Fz(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Bz(c){if(Li){var p=m0;if(p){var w=p;if(!y1e(c,p)){if(Fz(c))throw Error(h(418));p=Vp(w.nextSibling);var k=f0;p&&y1e(c,p)?v1e(k,w):(c.flags=c.flags&-4097|2,Li=!1,f0=c)}}else{if(Fz(c))throw Error(h(418));c.flags=c.flags&-4097|2,Li=!1,f0=c}}}function b1e(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;f0=c}function rM(c){if(c!==f0)return!1;if(!Li)return b1e(c),Li=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!kz(c.type,c.memoizedProps)),p&&(p=m0)){if(Fz(c))throw _1e(),Error(h(418));for(;p;)v1e(c,p),p=Vp(p.nextSibling)}if(b1e(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(h(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="/$"){if(p===0){m0=Vp(c.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}c=c.nextSibling}m0=null}}else m0=f0?Vp(c.stateNode.nextSibling):null;return!0}function _1e(){for(var c=m0;c;)c=Vp(c.nextSibling)}function R5(){m0=f0=null,Li=!1}function Uz(c){lu===null?lu=[c]:lu.push(c)}var UAe=re.ReactCurrentBatchConfig;function uu(c,p){if(c&&c.defaultProps){p=ce({},p),c=c.defaultProps;for(var w in c)p[w]===void 0&&(p[w]=c[w]);return p}return p}var iM=jp(null),sM=null,D5=null,zz=null;function Vz(){zz=D5=sM=null}function jz(c){var p=iM.current;Mi(iM),c._currentValue=p}function Hz(c,p,w){for(;c!==null;){var k=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),c===w)break;c=c.return}}function O5(c,p){sM=c,zz=D5=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&p&&(Ka=!0),c.firstContext=null)}function rl(c){var p=c._currentValue;if(zz!==c)if(c={context:c,memoizedValue:p,next:null},D5===null){if(sM===null)throw Error(h(308));D5=c,sM.dependencies={lanes:0,firstContext:c}}else D5=D5.next=c;return p}var Km=null;function Gz(c){Km===null?Km=[c]:Km.push(c)}function w1e(c,p,w,k){var j=p.interleaved;return j===null?(w.next=w,Gz(p)):(w.next=j.next,j.next=w),p.interleaved=w,Nd(c,k)}function Nd(c,p){c.lanes|=p;var w=c.alternate;for(w!==null&&(w.lanes|=p),w=c,c=c.return;c!==null;)c.childLanes|=p,w=c.alternate,w!==null&&(w.childLanes|=p),w=c,c=c.return;return w.tag===3?w.stateNode:null}var Wp=!1;function Wz(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x1e(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Fd(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function $p(c,p,w){var k=c.updateQueue;if(k===null)return null;if(k=k.shared,Ur&2){var j=k.pending;return j===null?p.next=p:(p.next=j.next,j.next=p),k.pending=p,Nd(c,w)}return j=k.interleaved,j===null?(p.next=p,Gz(k)):(p.next=j.next,j.next=p),k.interleaved=p,Nd(c,w)}function oM(c,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var k=p.lanes;k&=c.pendingLanes,w|=k,p.lanes=w,az(c,w)}}function S1e(c,p){var w=c.updateQueue,k=c.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var j=null,K=null;if(w=w.firstBaseUpdate,w!==null){do{var oe={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};K===null?j=K=oe:K=K.next=oe,w=w.next}while(w!==null);K===null?j=K=p:K=K.next=p}else j=K=p;w={baseState:k.baseState,firstBaseUpdate:j,lastBaseUpdate:K,shared:k.shared,effects:k.effects},c.updateQueue=w;return}c=w.lastBaseUpdate,c===null?w.firstBaseUpdate=p:c.next=p,w.lastBaseUpdate=p}function aM(c,p,w,k){var j=c.updateQueue;Wp=!1;var K=j.firstBaseUpdate,oe=j.lastBaseUpdate,ke=j.shared.pending;if(ke!==null){j.shared.pending=null;var Be=ke,vt=Be.next;Be.next=null,oe===null?K=vt:oe.next=vt,oe=Be;var Gt=c.alternate;Gt!==null&&(Gt=Gt.updateQueue,ke=Gt.lastBaseUpdate,ke!==oe&&(ke===null?Gt.firstBaseUpdate=vt:ke.next=vt,Gt.lastBaseUpdate=Be))}if(K!==null){var qt=j.baseState;oe=0,Gt=vt=Be=null,ke=K;do{var jt=ke.lane,fn=ke.eventTime;if((k&jt)===jt){Gt!==null&&(Gt=Gt.next={eventTime:fn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var En=c,Mn=ke;switch(jt=p,fn=w,Mn.tag){case 1:if(En=Mn.payload,typeof En=="function"){qt=En.call(fn,qt,jt);break e}qt=En;break e;case 3:En.flags=En.flags&-65537|128;case 0:if(En=Mn.payload,jt=typeof En=="function"?En.call(fn,qt,jt):En,jt==null)break e;qt=ce({},qt,jt);break e;case 2:Wp=!0}}ke.callback!==null&&ke.lane!==0&&(c.flags|=64,jt=j.effects,jt===null?j.effects=[ke]:jt.push(ke))}else fn={eventTime:fn,lane:jt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Gt===null?(vt=Gt=fn,Be=qt):Gt=Gt.next=fn,oe|=jt;if(ke=ke.next,ke===null){if(ke=j.shared.pending,ke===null)break;jt=ke,ke=jt.next,jt.next=null,j.lastBaseUpdate=jt,j.shared.pending=null}}while(1);if(Gt===null&&(Be=qt),j.baseState=Be,j.firstBaseUpdate=vt,j.lastBaseUpdate=Gt,p=j.shared.interleaved,p!==null){j=p;do oe|=j.lane,j=j.next;while(j!==p)}else K===null&&(j.shared.lanes=0);Ym|=oe,c.lanes=oe,c.memoizedState=qt}}function E1e(c,p,w){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var k=c[p],j=k.callback;if(j!==null){if(k.callback=null,k=w,typeof j!="function")throw Error(h(191,j));j.call(k)}}}var C1e=new a.Component().refs;function $z(c,p,w,k){p=c.memoizedState,w=w(k,p),w=w==null?p:ce({},p,w),c.memoizedState=w,c.lanes===0&&(c.updateQueue.baseState=w)}var lM={isMounted:function(c){return(c=c._reactInternals)?jm(c)===c:!1},enqueueSetState:function(c,p,w){c=c._reactInternals;var k=ya(),j=Yp(c),K=Fd(k,j);K.payload=p,w!=null&&(K.callback=w),p=$p(c,K,j),p!==null&&(hu(p,c,j,k),oM(p,c,j))},enqueueReplaceState:function(c,p,w){c=c._reactInternals;var k=ya(),j=Yp(c),K=Fd(k,j);K.tag=1,K.payload=p,w!=null&&(K.callback=w),p=$p(c,K,j),p!==null&&(hu(p,c,j,k),oM(p,c,j))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var w=ya(),k=Yp(c),j=Fd(w,k);j.tag=2,p!=null&&(j.callback=p),p=$p(c,j,k),p!==null&&(hu(p,c,k,w),oM(p,c,k))}};function P1e(c,p,w,k,j,K,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(k,K,oe):p.prototype&&p.prototype.isPureReactComponent?!X7(w,k)||!X7(j,K):!0}function T1e(c,p,w){var k=!1,j=Hp,K=p.contextType;return typeof K=="object"&&K!==null?K=rl(K):(j=$a(p)?Gm:jo.current,k=p.contextTypes,K=(k=k!=null)?k5(c,j):Hp),p=new p(w,K),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=lM,c.stateNode=p,p._reactInternals=c,k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=j,c.__reactInternalMemoizedMaskedChildContext=K),p}function M1e(c,p,w,k){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,k),p.state!==c&&lM.enqueueReplaceState(p,p.state,null)}function Kz(c,p,w,k){var j=c.stateNode;j.props=w,j.state=c.memoizedState,j.refs=C1e,Wz(c);var K=p.contextType;typeof K=="object"&&K!==null?j.context=rl(K):(K=$a(p)?Gm:jo.current,j.context=k5(c,K)),j.state=c.memoizedState,K=p.getDerivedStateFromProps,typeof K=="function"&&($z(c,p,K,w),j.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(p=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),p!==j.state&&lM.enqueueReplaceState(j,j.state,null),aM(c,w,j,k),j.state=c.memoizedState),typeof j.componentDidMount=="function"&&(c.flags|=4194308)}function ty(c,p,w){if(c=w.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(h(309));var k=w.stateNode}if(!k)throw Error(h(147,c));var j=k,K=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===K?p.ref:(p=function(oe){var ke=j.refs;ke===C1e&&(ke=j.refs={}),oe===null?delete ke[K]:ke[K]=oe},p._stringRef=K,p)}if(typeof c!="string")throw Error(h(284));if(!w._owner)throw Error(h(290,c))}return c}function uM(c,p){throw c=Object.prototype.toString.call(p),Error(h(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function k1e(c){var p=c._init;return p(c._payload)}function A1e(c){function p(ot,Ge){if(c){var ut=ot.deletions;ut===null?(ot.deletions=[Ge],ot.flags|=16):ut.push(Ge)}}function w(ot,Ge){if(!c)return null;for(;Ge!==null;)p(ot,Ge),Ge=Ge.sibling;return null}function k(ot,Ge){for(ot=new Map;Ge!==null;)Ge.key!==null?ot.set(Ge.key,Ge):ot.set(Ge.index,Ge),Ge=Ge.sibling;return ot}function j(ot,Ge){return ot=Qp(ot,Ge),ot.index=0,ot.sibling=null,ot}function K(ot,Ge,ut){return ot.index=ut,c?(ut=ot.alternate,ut!==null?(ut=ut.index,ut<Ge?(ot.flags|=2,Ge):ut):(ot.flags|=2,Ge)):(ot.flags|=1048576,Ge)}function oe(ot){return c&&ot.alternate===null&&(ot.flags|=2),ot}function ke(ot,Ge,ut,Qt){return Ge===null||Ge.tag!==6?(Ge=kV(ut,ot.mode,Qt),Ge.return=ot,Ge):(Ge=j(Ge,ut),Ge.return=ot,Ge)}function Be(ot,Ge,ut,Qt){var An=ut.type;return An===ye?Gt(ot,Ge,ut.props.children,Qt,ut.key):Ge!==null&&(Ge.elementType===An||typeof An=="object"&&An!==null&&An.$$typeof===Ie&&k1e(An)===Ge.type)?(Qt=j(Ge,ut.props),Qt.ref=ty(ot,Ge,ut),Qt.return=ot,Qt):(Qt=MM(ut.type,ut.key,ut.props,null,ot.mode,Qt),Qt.ref=ty(ot,Ge,ut),Qt.return=ot,Qt)}function vt(ot,Ge,ut,Qt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==ut.containerInfo||Ge.stateNode.implementation!==ut.implementation?(Ge=AV(ut,ot.mode,Qt),Ge.return=ot,Ge):(Ge=j(Ge,ut.children||[]),Ge.return=ot,Ge)}function Gt(ot,Ge,ut,Qt,An){return Ge===null||Ge.tag!==7?(Ge=e2(ut,ot.mode,Qt,An),Ge.return=ot,Ge):(Ge=j(Ge,ut),Ge.return=ot,Ge)}function qt(ot,Ge,ut){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return Ge=kV(""+Ge,ot.mode,ut),Ge.return=ot,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case le:return ut=MM(Ge.type,Ge.key,Ge.props,null,ot.mode,ut),ut.ref=ty(ot,null,Ge),ut.return=ot,ut;case Ce:return Ge=AV(Ge,ot.mode,ut),Ge.return=ot,Ge;case Ie:var Qt=Ge._init;return qt(ot,Qt(Ge._payload),ut)}if(Ot(Ge)||Pt(Ge))return Ge=e2(Ge,ot.mode,ut,null),Ge.return=ot,Ge;uM(ot,Ge)}return null}function jt(ot,Ge,ut,Qt){var An=Ge!==null?Ge.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number")return An!==null?null:ke(ot,Ge,""+ut,Qt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case le:return ut.key===An?Be(ot,Ge,ut,Qt):null;case Ce:return ut.key===An?vt(ot,Ge,ut,Qt):null;case Ie:return An=ut._init,jt(ot,Ge,An(ut._payload),Qt)}if(Ot(ut)||Pt(ut))return An!==null?null:Gt(ot,Ge,ut,Qt,null);uM(ot,ut)}return null}function fn(ot,Ge,ut,Qt,An){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return ot=ot.get(ut)||null,ke(Ge,ot,""+Qt,An);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case le:return ot=ot.get(Qt.key===null?ut:Qt.key)||null,Be(Ge,ot,Qt,An);case Ce:return ot=ot.get(Qt.key===null?ut:Qt.key)||null,vt(Ge,ot,Qt,An);case Ie:var Gn=Qt._init;return fn(ot,Ge,ut,Gn(Qt._payload),An)}if(Ot(Qt)||Pt(Qt))return ot=ot.get(ut)||null,Gt(Ge,ot,Qt,An,null);uM(Ge,Qt)}return null}function En(ot,Ge,ut,Qt){for(var An=null,Gn=null,Wn=Ge,nr=Ge=0,io=null;Wn!==null&&nr<ut.length;nr++){Wn.index>nr?(io=Wn,Wn=null):io=Wn.sibling;var qr=jt(ot,Wn,ut[nr],Qt);if(qr===null){Wn===null&&(Wn=io);break}c&&Wn&&qr.alternate===null&&p(ot,Wn),Ge=K(qr,Ge,nr),Gn===null?An=qr:Gn.sibling=qr,Gn=qr,Wn=io}if(nr===ut.length)return w(ot,Wn),Li&&$m(ot,nr),An;if(Wn===null){for(;nr<ut.length;nr++)Wn=qt(ot,ut[nr],Qt),Wn!==null&&(Ge=K(Wn,Ge,nr),Gn===null?An=Wn:Gn.sibling=Wn,Gn=Wn);return Li&&$m(ot,nr),An}for(Wn=k(ot,Wn);nr<ut.length;nr++)io=fn(Wn,ot,nr,ut[nr],Qt),io!==null&&(c&&io.alternate!==null&&Wn.delete(io.key===null?nr:io.key),Ge=K(io,Ge,nr),Gn===null?An=io:Gn.sibling=io,Gn=io);return c&&Wn.forEach(function(Jp){return p(ot,Jp)}),Li&&$m(ot,nr),An}function Mn(ot,Ge,ut,Qt){var An=Pt(ut);if(typeof An!="function")throw Error(h(150));if(ut=An.call(ut),ut==null)throw Error(h(151));for(var Gn=An=null,Wn=Ge,nr=Ge=0,io=null,qr=ut.next();Wn!==null&&!qr.done;nr++,qr=ut.next()){Wn.index>nr?(io=Wn,Wn=null):io=Wn.sibling;var Jp=jt(ot,Wn,qr.value,Qt);if(Jp===null){Wn===null&&(Wn=io);break}c&&Wn&&Jp.alternate===null&&p(ot,Wn),Ge=K(Jp,Ge,nr),Gn===null?An=Jp:Gn.sibling=Jp,Gn=Jp,Wn=io}if(qr.done)return w(ot,Wn),Li&&$m(ot,nr),An;if(Wn===null){for(;!qr.done;nr++,qr=ut.next())qr=qt(ot,qr.value,Qt),qr!==null&&(Ge=K(qr,Ge,nr),Gn===null?An=qr:Gn.sibling=qr,Gn=qr);return Li&&$m(ot,nr),An}for(Wn=k(ot,Wn);!qr.done;nr++,qr=ut.next())qr=fn(Wn,ot,nr,qr.value,Qt),qr!==null&&(c&&qr.alternate!==null&&Wn.delete(qr.key===null?nr:qr.key),Ge=K(qr,Ge,nr),Gn===null?An=qr:Gn.sibling=qr,Gn=qr);return c&&Wn.forEach(function(yIe){return p(ot,yIe)}),Li&&$m(ot,nr),An}function _s(ot,Ge,ut,Qt){if(typeof ut=="object"&&ut!==null&&ut.type===ye&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case le:e:{for(var An=ut.key,Gn=Ge;Gn!==null;){if(Gn.key===An){if(An=ut.type,An===ye){if(Gn.tag===7){w(ot,Gn.sibling),Ge=j(Gn,ut.props.children),Ge.return=ot,ot=Ge;break e}}else if(Gn.elementType===An||typeof An=="object"&&An!==null&&An.$$typeof===Ie&&k1e(An)===Gn.type){w(ot,Gn.sibling),Ge=j(Gn,ut.props),Ge.ref=ty(ot,Gn,ut),Ge.return=ot,ot=Ge;break e}w(ot,Gn);break}else p(ot,Gn);Gn=Gn.sibling}ut.type===ye?(Ge=e2(ut.props.children,ot.mode,Qt,ut.key),Ge.return=ot,ot=Ge):(Qt=MM(ut.type,ut.key,ut.props,null,ot.mode,Qt),Qt.ref=ty(ot,Ge,ut),Qt.return=ot,ot=Qt)}return oe(ot);case Ce:e:{for(Gn=ut.key;Ge!==null;){if(Ge.key===Gn)if(Ge.tag===4&&Ge.stateNode.containerInfo===ut.containerInfo&&Ge.stateNode.implementation===ut.implementation){w(ot,Ge.sibling),Ge=j(Ge,ut.children||[]),Ge.return=ot,ot=Ge;break e}else{w(ot,Ge);break}else p(ot,Ge);Ge=Ge.sibling}Ge=AV(ut,ot.mode,Qt),Ge.return=ot,ot=Ge}return oe(ot);case Ie:return Gn=ut._init,_s(ot,Ge,Gn(ut._payload),Qt)}if(Ot(ut))return En(ot,Ge,ut,Qt);if(Pt(ut))return Mn(ot,Ge,ut,Qt);uM(ot,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"?(ut=""+ut,Ge!==null&&Ge.tag===6?(w(ot,Ge.sibling),Ge=j(Ge,ut),Ge.return=ot,ot=Ge):(w(ot,Ge),Ge=kV(ut,ot.mode,Qt),Ge.return=ot,ot=Ge),oe(ot)):w(ot,Ge)}return _s}var L5=A1e(!0),I1e=A1e(!1),ny={},vc=jp(ny),ry=jp(ny),iy=jp(ny);function Xm(c){if(c===ny)throw Error(h(174));return c}function Xz(c,p){switch(yi(iy,p),yi(ry,c),yi(vc,ny),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:tr(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=tr(p,c)}Mi(vc),yi(vc,p)}function N5(){Mi(vc),Mi(ry),Mi(iy)}function R1e(c){Xm(iy.current);var p=Xm(vc.current),w=tr(p,c.type);p!==w&&(yi(ry,c),yi(vc,w))}function qz(c){ry.current===c&&(Mi(vc),Mi(ry))}var Wi=jp(0);function cM(c){for(var p=c;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Yz=[];function Zz(){for(var c=0;c<Yz.length;c++)Yz[c]._workInProgressVersionPrimary=null;Yz.length=0}var dM=re.ReactCurrentDispatcher,Qz=re.ReactCurrentBatchConfig,qm=0,$i=null,Vs=null,no=null,hM=!1,sy=!1,oy=0,zAe=0;function Ho(){throw Error(h(321))}function Jz(c,p){if(p===null)return!1;for(var w=0;w<p.length&&w<c.length;w++)if(!au(c[w],p[w]))return!1;return!0}function eV(c,p,w,k,j,K){if(qm=K,$i=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,dM.current=c===null||c.memoizedState===null?GAe:WAe,c=w(k,j),sy){K=0;do{if(sy=!1,oy=0,25<=K)throw Error(h(301));K+=1,no=Vs=null,p.updateQueue=null,dM.current=$Ae,c=w(k,j)}while(sy)}if(dM.current=mM,p=Vs!==null&&Vs.next!==null,qm=0,no=Vs=$i=null,hM=!1,p)throw Error(h(300));return c}function tV(){var c=oy!==0;return oy=0,c}function yc(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?$i.memoizedState=no=c:no=no.next=c,no}function il(){if(Vs===null){var c=$i.alternate;c=c!==null?c.memoizedState:null}else c=Vs.next;var p=no===null?$i.memoizedState:no.next;if(p!==null)no=p,Vs=c;else{if(c===null)throw Error(h(310));Vs=c,c={memoizedState:Vs.memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},no===null?$i.memoizedState=no=c:no=no.next=c}return no}function ay(c,p){return typeof p=="function"?p(c):p}function nV(c){var p=il(),w=p.queue;if(w===null)throw Error(h(311));w.lastRenderedReducer=c;var k=Vs,j=k.baseQueue,K=w.pending;if(K!==null){if(j!==null){var oe=j.next;j.next=K.next,K.next=oe}k.baseQueue=j=K,w.pending=null}if(j!==null){K=j.next,k=k.baseState;var ke=oe=null,Be=null,vt=K;do{var Gt=vt.lane;if((qm&Gt)===Gt)Be!==null&&(Be=Be.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),k=vt.hasEagerState?vt.eagerState:c(k,vt.action);else{var qt={lane:Gt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};Be===null?(ke=Be=qt,oe=k):Be=Be.next=qt,$i.lanes|=Gt,Ym|=Gt}vt=vt.next}while(vt!==null&&vt!==K);Be===null?oe=k:Be.next=ke,au(k,p.memoizedState)||(Ka=!0),p.memoizedState=k,p.baseState=oe,p.baseQueue=Be,w.lastRenderedState=k}if(c=w.interleaved,c!==null){j=c;do K=j.lane,$i.lanes|=K,Ym|=K,j=j.next;while(j!==c)}else j===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function rV(c){var p=il(),w=p.queue;if(w===null)throw Error(h(311));w.lastRenderedReducer=c;var k=w.dispatch,j=w.pending,K=p.memoizedState;if(j!==null){w.pending=null;var oe=j=j.next;do K=c(K,oe.action),oe=oe.next;while(oe!==j);au(K,p.memoizedState)||(Ka=!0),p.memoizedState=K,p.baseQueue===null&&(p.baseState=K),w.lastRenderedState=K}return[K,k]}function D1e(){}function O1e(c,p){var w=$i,k=il(),j=p(),K=!au(k.memoizedState,j);if(K&&(k.memoizedState=j,Ka=!0),k=k.queue,iV(F1e.bind(null,w,k,c),[c]),k.getSnapshot!==p||K||no!==null&&no.memoizedState.tag&1){if(w.flags|=2048,ly(9,N1e.bind(null,w,k,j,p),void 0,null),ro===null)throw Error(h(349));qm&30||L1e(w,p,j)}return j}function L1e(c,p,w){c.flags|=16384,c={getSnapshot:p,value:w},p=$i.updateQueue,p===null?(p={lastEffect:null,stores:null},$i.updateQueue=p,p.stores=[c]):(w=p.stores,w===null?p.stores=[c]:w.push(c))}function N1e(c,p,w,k){p.value=w,p.getSnapshot=k,B1e(p)&&U1e(c)}function F1e(c,p,w){return w(function(){B1e(p)&&U1e(c)})}function B1e(c){var p=c.getSnapshot;c=c.value;try{var w=p();return!au(c,w)}catch{return!0}}function U1e(c){var p=Nd(c,1);p!==null&&hu(p,c,1,-1)}function z1e(c){var p=yc();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ay,lastRenderedState:c},p.queue=c,c=c.dispatch=HAe.bind(null,$i,c),[p.memoizedState,c]}function ly(c,p,w,k){return c={tag:c,create:p,destroy:w,deps:k,next:null},p=$i.updateQueue,p===null?(p={lastEffect:null,stores:null},$i.updateQueue=p,p.lastEffect=c.next=c):(w=p.lastEffect,w===null?p.lastEffect=c.next=c:(k=w.next,w.next=c,c.next=k,p.lastEffect=c)),c}function V1e(){return il().memoizedState}function pM(c,p,w,k){var j=yc();$i.flags|=c,j.memoizedState=ly(1|p,w,void 0,k===void 0?null:k)}function fM(c,p,w,k){var j=il();k=k===void 0?null:k;var K=void 0;if(Vs!==null){var oe=Vs.memoizedState;if(K=oe.destroy,k!==null&&Jz(k,oe.deps)){j.memoizedState=ly(p,w,K,k);return}}$i.flags|=c,j.memoizedState=ly(1|p,w,K,k)}function j1e(c,p){return pM(8390656,8,c,p)}function iV(c,p){return fM(2048,8,c,p)}function H1e(c,p){return fM(4,2,c,p)}function G1e(c,p){return fM(4,4,c,p)}function W1e(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function $1e(c,p,w){return w=w!=null?w.concat([c]):null,fM(4,4,W1e.bind(null,p,c),w)}function sV(){}function K1e(c,p){var w=il();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&Jz(p,k[1])?k[0]:(w.memoizedState=[c,p],c)}function X1e(c,p){var w=il();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&Jz(p,k[1])?k[0]:(c=c(),w.memoizedState=[c,p],c)}function q1e(c,p,w){return qm&21?(au(w,p)||(w=_fe(),$i.lanes|=w,Ym|=w,c.baseState=!0),p):(c.baseState&&(c.baseState=!1,Ka=!0),c.memoizedState=w)}function VAe(c,p){var w=ri;ri=w!==0&&4>w?w:4,c(!0);var k=Qz.transition;Qz.transition={};try{c(!1),p()}finally{ri=w,Qz.transition=k}}function Y1e(){return il().memoizedState}function jAe(c,p,w){var k=Yp(c);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},Z1e(c))Q1e(p,w);else if(w=w1e(c,p,w,k),w!==null){var j=ya();hu(w,c,k,j),J1e(w,p,k)}}function HAe(c,p,w){var k=Yp(c),j={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(Z1e(c))Q1e(p,j);else{var K=c.alternate;if(c.lanes===0&&(K===null||K.lanes===0)&&(K=p.lastRenderedReducer,K!==null))try{var oe=p.lastRenderedState,ke=K(oe,w);if(j.hasEagerState=!0,j.eagerState=ke,au(ke,oe)){var Be=p.interleaved;Be===null?(j.next=j,Gz(p)):(j.next=Be.next,Be.next=j),p.interleaved=j;return}}catch{}finally{}w=w1e(c,p,j,k),w!==null&&(j=ya(),hu(w,c,k,j),J1e(w,p,k))}}function Z1e(c){var p=c.alternate;return c===$i||p!==null&&p===$i}function Q1e(c,p){sy=hM=!0;var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}function J1e(c,p,w){if(w&4194240){var k=p.lanes;k&=c.pendingLanes,w|=k,p.lanes=w,az(c,w)}}var mM={readContext:rl,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useInsertionEffect:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useDeferredValue:Ho,useTransition:Ho,useMutableSource:Ho,useSyncExternalStore:Ho,useId:Ho,unstable_isNewReconciler:!1},GAe={readContext:rl,useCallback:function(c,p){return yc().memoizedState=[c,p===void 0?null:p],c},useContext:rl,useEffect:j1e,useImperativeHandle:function(c,p,w){return w=w!=null?w.concat([c]):null,pM(4194308,4,W1e.bind(null,p,c),w)},useLayoutEffect:function(c,p){return pM(4194308,4,c,p)},useInsertionEffect:function(c,p){return pM(4,2,c,p)},useMemo:function(c,p){var w=yc();return p=p===void 0?null:p,c=c(),w.memoizedState=[c,p],c},useReducer:function(c,p,w){var k=yc();return p=w!==void 0?w(p):p,k.memoizedState=k.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},k.queue=c,c=c.dispatch=jAe.bind(null,$i,c),[k.memoizedState,c]},useRef:function(c){var p=yc();return c={current:c},p.memoizedState=c},useState:z1e,useDebugValue:sV,useDeferredValue:function(c){return yc().memoizedState=c},useTransition:function(){var c=z1e(!1),p=c[0];return c=VAe.bind(null,c[1]),yc().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,w){var k=$i,j=yc();if(Li){if(w===void 0)throw Error(h(407));w=w()}else{if(w=p(),ro===null)throw Error(h(349));qm&30||L1e(k,p,w)}j.memoizedState=w;var K={value:w,getSnapshot:p};return j.queue=K,j1e(F1e.bind(null,k,K,c),[c]),k.flags|=2048,ly(9,N1e.bind(null,k,K,w,p),void 0,null),w},useId:function(){var c=yc(),p=ro.identifierPrefix;if(Li){var w=Ld,k=Od;w=(k&~(1<<32-ou(k)-1)).toString(32)+w,p=":"+p+"R"+w,w=oy++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=zAe++,p=":"+p+"r"+w.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},WAe={readContext:rl,useCallback:K1e,useContext:rl,useEffect:iV,useImperativeHandle:$1e,useInsertionEffect:H1e,useLayoutEffect:G1e,useMemo:X1e,useReducer:nV,useRef:V1e,useState:function(){return nV(ay)},useDebugValue:sV,useDeferredValue:function(c){var p=il();return q1e(p,Vs.memoizedState,c)},useTransition:function(){var c=nV(ay)[0],p=il().memoizedState;return[c,p]},useMutableSource:D1e,useSyncExternalStore:O1e,useId:Y1e,unstable_isNewReconciler:!1},$Ae={readContext:rl,useCallback:K1e,useContext:rl,useEffect:iV,useImperativeHandle:$1e,useInsertionEffect:H1e,useLayoutEffect:G1e,useMemo:X1e,useReducer:rV,useRef:V1e,useState:function(){return rV(ay)},useDebugValue:sV,useDeferredValue:function(c){var p=il();return Vs===null?p.memoizedState=c:q1e(p,Vs.memoizedState,c)},useTransition:function(){var c=rV(ay)[0],p=il().memoizedState;return[c,p]},useMutableSource:D1e,useSyncExternalStore:O1e,useId:Y1e,unstable_isNewReconciler:!1};function F5(c,p){try{var w="",k=p;do w+=Xe(k),k=k.return;while(k);var j=w}catch(K){j=`
Error generating stack: `+K.message+`
`+K.stack}return{value:c,source:p,stack:j,digest:null}}function oV(c,p,w){return{value:c,source:null,stack:w??null,digest:p??null}}function aV(c,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var KAe=typeof WeakMap=="function"?WeakMap:Map;function eme(c,p,w){w=Fd(-1,w),w.tag=3,w.payload={element:null};var k=p.value;return w.callback=function(){xM||(xM=!0,wV=k),aV(c,p)},w}function tme(c,p,w){w=Fd(-1,w),w.tag=3;var k=c.type.getDerivedStateFromError;if(typeof k=="function"){var j=p.value;w.payload=function(){return k(j)},w.callback=function(){aV(c,p)}}var K=c.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(w.callback=function(){aV(c,p),typeof k!="function"&&(Xp===null?Xp=new Set([this]):Xp.add(this));var oe=p.stack;this.componentDidCatch(p.value,{componentStack:oe!==null?oe:""})}),w}function nme(c,p,w){var k=c.pingCache;if(k===null){k=c.pingCache=new KAe;var j=new Set;k.set(p,j)}else j=k.get(p),j===void 0&&(j=new Set,k.set(p,j));j.has(w)||(j.add(w),c=aIe.bind(null,c,p,w),p.then(c,c))}function rme(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function ime(c,p,w,k,j){return c.mode&1?(c.flags|=65536,c.lanes=j,c):(c===p?c.flags|=65536:(c.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Fd(-1,1),p.tag=2,$p(w,p,1))),w.lanes|=1),c)}var XAe=re.ReactCurrentOwner,Ka=!1;function va(c,p,w,k){p.child=c===null?I1e(p,null,w,k):L5(p,c.child,w,k)}function sme(c,p,w,k,j){w=w.render;var K=p.ref;return O5(p,j),k=eV(c,p,w,k,K,j),w=tV(),c!==null&&!Ka?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~j,Bd(c,p,j)):(Li&&w&&Lz(p),p.flags|=1,va(c,p,k,j),p.child)}function ome(c,p,w,k,j){if(c===null){var K=w.type;return typeof K=="function"&&!MV(K)&&K.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=K,ame(c,p,K,k,j)):(c=MM(w.type,null,k,p,p.mode,j),c.ref=p.ref,c.return=p,p.child=c)}if(K=c.child,!(c.lanes&j)){var oe=K.memoizedProps;if(w=w.compare,w=w!==null?w:X7,w(oe,k)&&c.ref===p.ref)return Bd(c,p,j)}return p.flags|=1,c=Qp(K,k),c.ref=p.ref,c.return=p,p.child=c}function ame(c,p,w,k,j){if(c!==null){var K=c.memoizedProps;if(X7(K,k)&&c.ref===p.ref)if(Ka=!1,p.pendingProps=k=K,(c.lanes&j)!==0)c.flags&131072&&(Ka=!0);else return p.lanes=c.lanes,Bd(c,p,j)}return lV(c,p,w,k,j)}function lme(c,p,w){var k=p.pendingProps,j=k.children,K=c!==null?c.memoizedState:null;if(k.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},yi(U5,g0),g0|=w;else{if(!(w&1073741824))return c=K!==null?K.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,yi(U5,g0),g0|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=K!==null?K.baseLanes:w,yi(U5,g0),g0|=k}else K!==null?(k=K.baseLanes|w,p.memoizedState=null):k=w,yi(U5,g0),g0|=k;return va(c,p,j,w),p.child}function ume(c,p){var w=p.ref;(c===null&&w!==null||c!==null&&c.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function lV(c,p,w,k,j){var K=$a(w)?Gm:jo.current;return K=k5(p,K),O5(p,j),w=eV(c,p,w,k,K,j),k=tV(),c!==null&&!Ka?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~j,Bd(c,p,j)):(Li&&k&&Lz(p),p.flags|=1,va(c,p,w,j),p.child)}function cme(c,p,w,k,j){if($a(w)){var K=!0;JT(p)}else K=!1;if(O5(p,j),p.stateNode===null)vM(c,p),T1e(p,w,k),Kz(p,w,k,j),k=!0;else if(c===null){var oe=p.stateNode,ke=p.memoizedProps;oe.props=ke;var Be=oe.context,vt=w.contextType;typeof vt=="object"&&vt!==null?vt=rl(vt):(vt=$a(w)?Gm:jo.current,vt=k5(p,vt));var Gt=w.getDerivedStateFromProps,qt=typeof Gt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";qt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ke!==k||Be!==vt)&&M1e(p,oe,k,vt),Wp=!1;var jt=p.memoizedState;oe.state=jt,aM(p,k,oe,j),Be=p.memoizedState,ke!==k||jt!==Be||Wa.current||Wp?(typeof Gt=="function"&&($z(p,w,Gt,k),Be=p.memoizedState),(ke=Wp||P1e(p,w,ke,k,jt,Be,vt))?(qt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=Be),oe.props=k,oe.state=Be,oe.context=vt,k=ke):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{oe=p.stateNode,x1e(c,p),ke=p.memoizedProps,vt=p.type===p.elementType?ke:uu(p.type,ke),oe.props=vt,qt=p.pendingProps,jt=oe.context,Be=w.contextType,typeof Be=="object"&&Be!==null?Be=rl(Be):(Be=$a(w)?Gm:jo.current,Be=k5(p,Be));var fn=w.getDerivedStateFromProps;(Gt=typeof fn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ke!==qt||jt!==Be)&&M1e(p,oe,k,Be),Wp=!1,jt=p.memoizedState,oe.state=jt,aM(p,k,oe,j);var En=p.memoizedState;ke!==qt||jt!==En||Wa.current||Wp?(typeof fn=="function"&&($z(p,w,fn,k),En=p.memoizedState),(vt=Wp||P1e(p,w,vt,k,jt,En,Be)||!1)?(Gt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(k,En,Be),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(k,En,Be)),typeof oe.componentDidUpdate=="function"&&(p.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof oe.componentDidUpdate!="function"||ke===c.memoizedProps&&jt===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ke===c.memoizedProps&&jt===c.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=En),oe.props=k,oe.state=En,oe.context=Be,k=vt):(typeof oe.componentDidUpdate!="function"||ke===c.memoizedProps&&jt===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ke===c.memoizedProps&&jt===c.memoizedState||(p.flags|=1024),k=!1)}return uV(c,p,w,k,K,j)}function uV(c,p,w,k,j,K){ume(c,p);var oe=(p.flags&128)!==0;if(!k&&!oe)return j&&f1e(p,w,!1),Bd(c,p,K);k=p.stateNode,XAe.current=p;var ke=oe&&typeof w.getDerivedStateFromError!="function"?null:k.render();return p.flags|=1,c!==null&&oe?(p.child=L5(p,c.child,null,K),p.child=L5(p,null,ke,K)):va(c,p,ke,K),p.memoizedState=k.state,j&&f1e(p,w,!0),p.child}function dme(c){var p=c.stateNode;p.pendingContext?h1e(c,p.pendingContext,p.pendingContext!==p.context):p.context&&h1e(c,p.context,!1),Xz(c,p.containerInfo)}function hme(c,p,w,k,j){return R5(),Uz(j),p.flags|=256,va(c,p,w,k),p.child}var cV={dehydrated:null,treeContext:null,retryLane:0};function dV(c){return{baseLanes:c,cachePool:null,transitions:null}}function pme(c,p,w){var k=p.pendingProps,j=Wi.current,K=!1,oe=(p.flags&128)!==0,ke;if((ke=oe)||(ke=c!==null&&c.memoizedState===null?!1:(j&2)!==0),ke?(K=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(j|=1),yi(Wi,j&1),c===null)return Bz(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(p.mode&1?c.data==="$!"?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(oe=k.children,c=k.fallback,K?(k=p.mode,K=p.child,oe={mode:"hidden",children:oe},!(k&1)&&K!==null?(K.childLanes=0,K.pendingProps=oe):K=kM(oe,k,0,null),c=e2(c,k,w,null),K.return=p,c.return=p,K.sibling=c,p.child=K,p.child.memoizedState=dV(w),p.memoizedState=cV,c):hV(p,oe));if(j=c.memoizedState,j!==null&&(ke=j.dehydrated,ke!==null))return qAe(c,p,oe,k,ke,j,w);if(K){K=k.fallback,oe=p.mode,j=c.child,ke=j.sibling;var Be={mode:"hidden",children:k.children};return!(oe&1)&&p.child!==j?(k=p.child,k.childLanes=0,k.pendingProps=Be,p.deletions=null):(k=Qp(j,Be),k.subtreeFlags=j.subtreeFlags&14680064),ke!==null?K=Qp(ke,K):(K=e2(K,oe,w,null),K.flags|=2),K.return=p,k.return=p,k.sibling=K,p.child=k,k=K,K=p.child,oe=c.child.memoizedState,oe=oe===null?dV(w):{baseLanes:oe.baseLanes|w,cachePool:null,transitions:oe.transitions},K.memoizedState=oe,K.childLanes=c.childLanes&~w,p.memoizedState=cV,k}return K=c.child,c=K.sibling,k=Qp(K,{mode:"visible",children:k.children}),!(p.mode&1)&&(k.lanes=w),k.return=p,k.sibling=null,c!==null&&(w=p.deletions,w===null?(p.deletions=[c],p.flags|=16):w.push(c)),p.child=k,p.memoizedState=null,k}function hV(c,p){return p=kM({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function gM(c,p,w,k){return k!==null&&Uz(k),L5(p,c.child,null,w),c=hV(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function qAe(c,p,w,k,j,K,oe){if(w)return p.flags&256?(p.flags&=-257,k=oV(Error(h(422))),gM(c,p,oe,k)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(K=k.fallback,j=p.mode,k=kM({mode:"visible",children:k.children},j,0,null),K=e2(K,j,oe,null),K.flags|=2,k.return=p,K.return=p,k.sibling=K,p.child=k,p.mode&1&&L5(p,c.child,null,oe),p.child.memoizedState=dV(oe),p.memoizedState=cV,K);if(!(p.mode&1))return gM(c,p,oe,null);if(j.data==="$!"){if(k=j.nextSibling&&j.nextSibling.dataset,k)var ke=k.dgst;return k=ke,K=Error(h(419)),k=oV(K,k,void 0),gM(c,p,oe,k)}if(ke=(oe&c.childLanes)!==0,Ka||ke){if(k=ro,k!==null){switch(oe&-oe){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(k.suspendedLanes|oe)?0:j,j!==0&&j!==K.retryLane&&(K.retryLane=j,Nd(c,j),hu(k,c,j,-1))}return TV(),k=oV(Error(h(421))),gM(c,p,oe,k)}return j.data==="$?"?(p.flags|=128,p.child=c.child,p=lIe.bind(null,c),j._reactRetry=p,null):(c=K.treeContext,m0=Vp(j.nextSibling),f0=p,Li=!0,lu=null,c!==null&&(tl[nl++]=Od,tl[nl++]=Ld,tl[nl++]=Wm,Od=c.id,Ld=c.overflow,Wm=p),p=hV(p,k.children),p.flags|=4096,p)}function fme(c,p,w){c.lanes|=p;var k=c.alternate;k!==null&&(k.lanes|=p),Hz(c.return,p,w)}function pV(c,p,w,k,j){var K=c.memoizedState;K===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:j}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=k,K.tail=w,K.tailMode=j)}function mme(c,p,w){var k=p.pendingProps,j=k.revealOrder,K=k.tail;if(va(c,p,k.children,w),k=Wi.current,k&2)k=k&1|2,p.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&fme(c,w,p);else if(c.tag===19)fme(c,w,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}k&=1}if(yi(Wi,k),!(p.mode&1))p.memoizedState=null;else switch(j){case"forwards":for(w=p.child,j=null;w!==null;)c=w.alternate,c!==null&&cM(c)===null&&(j=w),w=w.sibling;w=j,w===null?(j=p.child,p.child=null):(j=w.sibling,w.sibling=null),pV(p,!1,j,w,K);break;case"backwards":for(w=null,j=p.child,p.child=null;j!==null;){if(c=j.alternate,c!==null&&cM(c)===null){p.child=j;break}c=j.sibling,j.sibling=w,w=j,j=c}pV(p,!0,w,null,K);break;case"together":pV(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function vM(c,p){!(p.mode&1)&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function Bd(c,p,w){if(c!==null&&(p.dependencies=c.dependencies),Ym|=p.lanes,!(w&p.childLanes))return null;if(c!==null&&p.child!==c.child)throw Error(h(153));if(p.child!==null){for(c=p.child,w=Qp(c,c.pendingProps),p.child=w,w.return=p;c.sibling!==null;)c=c.sibling,w=w.sibling=Qp(c,c.pendingProps),w.return=p;w.sibling=null}return p.child}function YAe(c,p,w){switch(p.tag){case 3:dme(p),R5();break;case 5:R1e(p);break;case 1:$a(p.type)&&JT(p);break;case 4:Xz(p,p.stateNode.containerInfo);break;case 10:var k=p.type._context,j=p.memoizedProps.value;yi(iM,k._currentValue),k._currentValue=j;break;case 13:if(k=p.memoizedState,k!==null)return k.dehydrated!==null?(yi(Wi,Wi.current&1),p.flags|=128,null):w&p.child.childLanes?pme(c,p,w):(yi(Wi,Wi.current&1),c=Bd(c,p,w),c!==null?c.sibling:null);yi(Wi,Wi.current&1);break;case 19:if(k=(w&p.childLanes)!==0,c.flags&128){if(k)return mme(c,p,w);p.flags|=128}if(j=p.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),yi(Wi,Wi.current),k)break;return null;case 22:case 23:return p.lanes=0,lme(c,p,w)}return Bd(c,p,w)}var gme,fV,vme,yme;gme=function(c,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)c.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},fV=function(){},vme=function(c,p,w,k){var j=c.memoizedProps;if(j!==k){c=p.stateNode,Xm(vc.current);var K=null;switch(w){case"input":j=ft(c,j),k=ft(c,k),K=[];break;case"select":j=ce({},j,{value:void 0}),k=ce({},k,{value:void 0}),K=[];break;case"textarea":j=Vt(c,j),k=Vt(c,k),K=[];break;default:typeof j.onClick!="function"&&typeof k.onClick=="function"&&(c.onclick=YT)}v5(w,k);var oe;w=null;for(vt in j)if(!k.hasOwnProperty(vt)&&j.hasOwnProperty(vt)&&j[vt]!=null)if(vt==="style"){var ke=j[vt];for(oe in ke)ke.hasOwnProperty(oe)&&(w||(w={}),w[oe]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(g.hasOwnProperty(vt)?K||(K=[]):(K=K||[]).push(vt,null));for(vt in k){var Be=k[vt];if(ke=j!=null?j[vt]:void 0,k.hasOwnProperty(vt)&&Be!==ke&&(Be!=null||ke!=null))if(vt==="style")if(ke){for(oe in ke)!ke.hasOwnProperty(oe)||Be&&Be.hasOwnProperty(oe)||(w||(w={}),w[oe]="");for(oe in Be)Be.hasOwnProperty(oe)&&ke[oe]!==Be[oe]&&(w||(w={}),w[oe]=Be[oe])}else w||(K||(K=[]),K.push(vt,w)),w=Be;else vt==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,ke=ke?ke.__html:void 0,Be!=null&&ke!==Be&&(K=K||[]).push(vt,Be)):vt==="children"?typeof Be!="string"&&typeof Be!="number"||(K=K||[]).push(vt,""+Be):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(g.hasOwnProperty(vt)?(Be!=null&&vt==="onScroll"&&Ti("scroll",c),K||ke===Be||(K=[])):(K=K||[]).push(vt,Be))}w&&(K=K||[]).push("style",w);var vt=K;(p.updateQueue=vt)&&(p.flags|=4)}},yme=function(c,p,w,k){w!==k&&(p.flags|=4)};function uy(c,p){if(!Li)switch(c.tailMode){case"hidden":p=c.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:k.sibling=null}}function Go(c){var p=c.alternate!==null&&c.alternate.child===c.child,w=0,k=0;if(p)for(var j=c.child;j!==null;)w|=j.lanes|j.childLanes,k|=j.subtreeFlags&14680064,k|=j.flags&14680064,j.return=c,j=j.sibling;else for(j=c.child;j!==null;)w|=j.lanes|j.childLanes,k|=j.subtreeFlags,k|=j.flags,j.return=c,j=j.sibling;return c.subtreeFlags|=k,c.childLanes=w,p}function ZAe(c,p,w){var k=p.pendingProps;switch(Nz(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(p),null;case 1:return $a(p.type)&&QT(),Go(p),null;case 3:return k=p.stateNode,N5(),Mi(Wa),Mi(jo),Zz(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(c===null||c.child===null)&&(rM(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,lu!==null&&(EV(lu),lu=null))),fV(c,p),Go(p),null;case 5:qz(p);var j=Xm(iy.current);if(w=p.type,c!==null&&p.stateNode!=null)vme(c,p,w,k,j),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!k){if(p.stateNode===null)throw Error(h(166));return Go(p),null}if(c=Xm(vc.current),rM(p)){k=p.stateNode,w=p.type;var K=p.memoizedProps;switch(k[gc]=p,k[J7]=K,c=(p.mode&1)!==0,w){case"dialog":Ti("cancel",k),Ti("close",k);break;case"iframe":case"object":case"embed":Ti("load",k);break;case"video":case"audio":for(j=0;j<Y7.length;j++)Ti(Y7[j],k);break;case"source":Ti("error",k);break;case"img":case"image":case"link":Ti("error",k),Ti("load",k);break;case"details":Ti("toggle",k);break;case"input":pt(k,K),Ti("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!K.multiple},Ti("invalid",k);break;case"textarea":It(k,K),Ti("invalid",k)}v5(w,K),j=null;for(var oe in K)if(K.hasOwnProperty(oe)){var ke=K[oe];oe==="children"?typeof ke=="string"?k.textContent!==ke&&(K.suppressHydrationWarning!==!0&&qT(k.textContent,ke,c),j=["children",ke]):typeof ke=="number"&&k.textContent!==""+ke&&(K.suppressHydrationWarning!==!0&&qT(k.textContent,ke,c),j=["children",""+ke]):g.hasOwnProperty(oe)&&ke!=null&&oe==="onScroll"&&Ti("scroll",k)}switch(w){case"input":Ln(k),qe(k,K,!0);break;case"textarea":Ln(k),Rn(k);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(k.onclick=YT)}k=j,p.updateQueue=k,k!==null&&(p.flags|=4)}else{oe=j.nodeType===9?j:j.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Br(w)),c==="http://www.w3.org/1999/xhtml"?w==="script"?(c=oe.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof k.is=="string"?c=oe.createElement(w,{is:k.is}):(c=oe.createElement(w),w==="select"&&(oe=c,k.multiple?oe.multiple=!0:k.size&&(oe.size=k.size))):c=oe.createElementNS(c,w),c[gc]=p,c[J7]=k,gme(c,p,!1,!1),p.stateNode=c;e:{switch(oe=I7(w,k),w){case"dialog":Ti("cancel",c),Ti("close",c),j=k;break;case"iframe":case"object":case"embed":Ti("load",c),j=k;break;case"video":case"audio":for(j=0;j<Y7.length;j++)Ti(Y7[j],c);j=k;break;case"source":Ti("error",c),j=k;break;case"img":case"image":case"link":Ti("error",c),Ti("load",c),j=k;break;case"details":Ti("toggle",c),j=k;break;case"input":pt(c,k),j=ft(c,k),Ti("invalid",c);break;case"option":j=k;break;case"select":c._wrapperState={wasMultiple:!!k.multiple},j=ce({},k,{value:void 0}),Ti("invalid",c);break;case"textarea":It(c,k),j=Vt(c,k),Ti("invalid",c);break;default:j=k}v5(w,j),ke=j;for(K in ke)if(ke.hasOwnProperty(K)){var Be=ke[K];K==="style"?g5(c,Be):K==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,Be!=null&&Op(c,Be)):K==="children"?typeof Be=="string"?(w!=="textarea"||Be!=="")&&Vo(c,Be):typeof Be=="number"&&Vo(c,""+Be):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(g.hasOwnProperty(K)?Be!=null&&K==="onScroll"&&Ti("scroll",c):Be!=null&&ie(c,K,Be,oe))}switch(w){case"input":Ln(c),qe(c,k,!1);break;case"textarea":Ln(c),Rn(c);break;case"option":k.value!=null&&c.setAttribute("value",""+nn(k.value));break;case"select":c.multiple=!!k.multiple,K=k.value,K!=null?st(c,!!k.multiple,K,!1):k.defaultValue!=null&&st(c,!!k.multiple,k.defaultValue,!0);break;default:typeof j.onClick=="function"&&(c.onclick=YT)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Go(p),null;case 6:if(c&&p.stateNode!=null)yme(c,p,c.memoizedProps,k);else{if(typeof k!="string"&&p.stateNode===null)throw Error(h(166));if(w=Xm(iy.current),Xm(vc.current),rM(p)){if(k=p.stateNode,w=p.memoizedProps,k[gc]=p,(K=k.nodeValue!==w)&&(c=f0,c!==null))switch(c.tag){case 3:qT(k.nodeValue,w,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&qT(k.nodeValue,w,(c.mode&1)!==0)}K&&(p.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[gc]=p,p.stateNode=k}return Go(p),null;case 13:if(Mi(Wi),k=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Li&&m0!==null&&p.mode&1&&!(p.flags&128))_1e(),R5(),p.flags|=98560,K=!1;else if(K=rM(p),k!==null&&k.dehydrated!==null){if(c===null){if(!K)throw Error(h(318));if(K=p.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(h(317));K[gc]=p}else R5(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;Go(p),K=!1}else lu!==null&&(EV(lu),lu=null),K=!0;if(!K)return p.flags&65536?p:null}return p.flags&128?(p.lanes=w,p):(k=k!==null,k!==(c!==null&&c.memoizedState!==null)&&k&&(p.child.flags|=8192,p.mode&1&&(c===null||Wi.current&1?js===0&&(js=3):TV())),p.updateQueue!==null&&(p.flags|=4),Go(p),null);case 4:return N5(),fV(c,p),c===null&&Z7(p.stateNode.containerInfo),Go(p),null;case 10:return jz(p.type._context),Go(p),null;case 17:return $a(p.type)&&QT(),Go(p),null;case 19:if(Mi(Wi),K=p.memoizedState,K===null)return Go(p),null;if(k=(p.flags&128)!==0,oe=K.rendering,oe===null)if(k)uy(K,!1);else{if(js!==0||c!==null&&c.flags&128)for(c=p.child;c!==null;){if(oe=cM(c),oe!==null){for(p.flags|=128,uy(K,!1),k=oe.updateQueue,k!==null&&(p.updateQueue=k,p.flags|=4),p.subtreeFlags=0,k=w,w=p.child;w!==null;)K=w,c=k,K.flags&=14680066,oe=K.alternate,oe===null?(K.childLanes=0,K.lanes=c,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=oe.childLanes,K.lanes=oe.lanes,K.child=oe.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=oe.memoizedProps,K.memoizedState=oe.memoizedState,K.updateQueue=oe.updateQueue,K.type=oe.type,c=oe.dependencies,K.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),w=w.sibling;return yi(Wi,Wi.current&1|2),p.child}c=c.sibling}K.tail!==null&&bs()>z5&&(p.flags|=128,k=!0,uy(K,!1),p.lanes=4194304)}else{if(!k)if(c=cM(oe),c!==null){if(p.flags|=128,k=!0,w=c.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),uy(K,!0),K.tail===null&&K.tailMode==="hidden"&&!oe.alternate&&!Li)return Go(p),null}else 2*bs()-K.renderingStartTime>z5&&w!==1073741824&&(p.flags|=128,k=!0,uy(K,!1),p.lanes=4194304);K.isBackwards?(oe.sibling=p.child,p.child=oe):(w=K.last,w!==null?w.sibling=oe:p.child=oe,K.last=oe)}return K.tail!==null?(p=K.tail,K.rendering=p,K.tail=p.sibling,K.renderingStartTime=bs(),p.sibling=null,w=Wi.current,yi(Wi,k?w&1|2:w&1),p):(Go(p),null);case 22:case 23:return PV(),k=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==k&&(p.flags|=8192),k&&p.mode&1?g0&1073741824&&(Go(p),p.subtreeFlags&6&&(p.flags|=8192)):Go(p),null;case 24:return null;case 25:return null}throw Error(h(156,p.tag))}function QAe(c,p){switch(Nz(p),p.tag){case 1:return $a(p.type)&&QT(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return N5(),Mi(Wa),Mi(jo),Zz(),c=p.flags,c&65536&&!(c&128)?(p.flags=c&-65537|128,p):null;case 5:return qz(p),null;case 13:if(Mi(Wi),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(h(340));R5()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return Mi(Wi),null;case 4:return N5(),null;case 10:return jz(p.type._context),null;case 22:case 23:return PV(),null;case 24:return null;default:return null}}var yM=!1,Wo=!1,JAe=typeof WeakSet=="function"?WeakSet:Set,_n=null;function B5(c,p){var w=c.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){is(c,p,k)}else w.current=null}function bme(c,p,w){try{w()}catch(k){is(c,p,k)}}var _me=!1;function eIe(c,p){if(Tz=LT,c=Xfe(),wz(c)){if("selectionStart"in c)var w={start:c.selectionStart,end:c.selectionEnd};else e:{w=(w=c.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var j=k.anchorOffset,K=k.focusNode;k=k.focusOffset;try{w.nodeType,K.nodeType}catch{w=null;break e}var oe=0,ke=-1,Be=-1,vt=0,Gt=0,qt=c,jt=null;t:for(;;){for(var fn;qt!==w||j!==0&&qt.nodeType!==3||(ke=oe+j),qt!==K||k!==0&&qt.nodeType!==3||(Be=oe+k),qt.nodeType===3&&(oe+=qt.nodeValue.length),(fn=qt.firstChild)!==null;)jt=qt,qt=fn;for(;;){if(qt===c)break t;if(jt===w&&++vt===j&&(ke=oe),jt===K&&++Gt===k&&(Be=oe),(fn=qt.nextSibling)!==null)break;qt=jt,jt=qt.parentNode}qt=fn}w=ke===-1||Be===-1?null:{start:ke,end:Be}}else w=null}w=w||{start:0,end:0}}else w=null;for(Mz={focusedElem:c,selectionRange:w},LT=!1,_n=p;_n!==null;)if(p=_n,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,_n=c;else for(;_n!==null;){p=_n;try{var En=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(En!==null){var Mn=En.memoizedProps,_s=En.memoizedState,ot=p.stateNode,Ge=ot.getSnapshotBeforeUpdate(p.elementType===p.type?Mn:uu(p.type,Mn),_s);ot.__reactInternalSnapshotBeforeUpdate=Ge}break;case 3:var ut=p.stateNode.containerInfo;ut.nodeType===1?ut.textContent="":ut.nodeType===9&&ut.documentElement&&ut.removeChild(ut.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(h(163))}}catch(Qt){is(p,p.return,Qt)}if(c=p.sibling,c!==null){c.return=p.return,_n=c;break}_n=p.return}return En=_me,_me=!1,En}function cy(c,p,w){var k=p.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var j=k=k.next;do{if((j.tag&c)===c){var K=j.destroy;j.destroy=void 0,K!==void 0&&bme(p,w,K)}j=j.next}while(j!==k)}}function bM(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&c)===c){var k=w.create;w.destroy=k()}w=w.next}while(w!==p)}}function mV(c){var p=c.ref;if(p!==null){var w=c.stateNode;switch(c.tag){case 5:c=w;break;default:c=w}typeof p=="function"?p(c):p.current=c}}function wme(c){var p=c.alternate;p!==null&&(c.alternate=null,wme(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[gc],delete p[J7],delete p[Rz],delete p[NAe],delete p[FAe])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function xme(c){return c.tag===5||c.tag===3||c.tag===4}function Sme(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||xme(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function gV(c,p,w){var k=c.tag;if(k===5||k===6)c=c.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(c,p):w.insertBefore(c,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(c,w)):(p=w,p.appendChild(c)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=YT));else if(k!==4&&(c=c.child,c!==null))for(gV(c,p,w),c=c.sibling;c!==null;)gV(c,p,w),c=c.sibling}function vV(c,p,w){var k=c.tag;if(k===5||k===6)c=c.stateNode,p?w.insertBefore(c,p):w.appendChild(c);else if(k!==4&&(c=c.child,c!==null))for(vV(c,p,w),c=c.sibling;c!==null;)vV(c,p,w),c=c.sibling}var Co=null,cu=!1;function Kp(c,p,w){for(w=w.child;w!==null;)Eme(c,p,w),w=w.sibling}function Eme(c,p,w){if(mc&&typeof mc.onCommitFiberUnmount=="function")try{mc.onCommitFiberUnmount(kT,w)}catch{}switch(w.tag){case 5:Wo||B5(w,p);case 6:var k=Co,j=cu;Co=null,Kp(c,p,w),Co=k,cu=j,Co!==null&&(cu?(c=Co,w=w.stateNode,c.nodeType===8?c.parentNode.removeChild(w):c.removeChild(w)):Co.removeChild(w.stateNode));break;case 18:Co!==null&&(cu?(c=Co,w=w.stateNode,c.nodeType===8?Iz(c.parentNode,w):c.nodeType===1&&Iz(c,w),j7(c)):Iz(Co,w.stateNode));break;case 4:k=Co,j=cu,Co=w.stateNode.containerInfo,cu=!0,Kp(c,p,w),Co=k,cu=j;break;case 0:case 11:case 14:case 15:if(!Wo&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){j=k=k.next;do{var K=j,oe=K.destroy;K=K.tag,oe!==void 0&&(K&2||K&4)&&bme(w,p,oe),j=j.next}while(j!==k)}Kp(c,p,w);break;case 1:if(!Wo&&(B5(w,p),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ke){is(w,p,ke)}Kp(c,p,w);break;case 21:Kp(c,p,w);break;case 22:w.mode&1?(Wo=(k=Wo)||w.memoizedState!==null,Kp(c,p,w),Wo=k):Kp(c,p,w);break;default:Kp(c,p,w)}}function Cme(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var w=c.stateNode;w===null&&(w=c.stateNode=new JAe),p.forEach(function(k){var j=uIe.bind(null,c,k);w.has(k)||(w.add(k),k.then(j,j))})}}function du(c,p){var w=p.deletions;if(w!==null)for(var k=0;k<w.length;k++){var j=w[k];try{var K=c,oe=p,ke=oe;e:for(;ke!==null;){switch(ke.tag){case 5:Co=ke.stateNode,cu=!1;break e;case 3:Co=ke.stateNode.containerInfo,cu=!0;break e;case 4:Co=ke.stateNode.containerInfo,cu=!0;break e}ke=ke.return}if(Co===null)throw Error(h(160));Eme(K,oe,j),Co=null,cu=!1;var Be=j.alternate;Be!==null&&(Be.return=null),j.return=null}catch(vt){is(j,p,vt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Pme(p,c),p=p.sibling}function Pme(c,p){var w=c.alternate,k=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(du(p,c),bc(c),k&4){try{cy(3,c,c.return),bM(3,c)}catch(Mn){is(c,c.return,Mn)}try{cy(5,c,c.return)}catch(Mn){is(c,c.return,Mn)}}break;case 1:du(p,c),bc(c),k&512&&w!==null&&B5(w,w.return);break;case 5:if(du(p,c),bc(c),k&512&&w!==null&&B5(w,w.return),c.flags&32){var j=c.stateNode;try{Vo(j,"")}catch(Mn){is(c,c.return,Mn)}}if(k&4&&(j=c.stateNode,j!=null)){var K=c.memoizedProps,oe=w!==null?w.memoizedProps:K,ke=c.type,Be=c.updateQueue;if(c.updateQueue=null,Be!==null)try{ke==="input"&&K.type==="radio"&&K.name!=null&&Ee(j,K),I7(ke,oe);var vt=I7(ke,K);for(oe=0;oe<Be.length;oe+=2){var Gt=Be[oe],qt=Be[oe+1];Gt==="style"?g5(j,qt):Gt==="dangerouslySetInnerHTML"?Op(j,qt):Gt==="children"?Vo(j,qt):ie(j,Gt,qt,vt)}switch(ke){case"input":Se(j,K);break;case"textarea":Lt(j,K);break;case"select":var jt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!K.multiple;var fn=K.value;fn!=null?st(j,!!K.multiple,fn,!1):jt!==!!K.multiple&&(K.defaultValue!=null?st(j,!!K.multiple,K.defaultValue,!0):st(j,!!K.multiple,K.multiple?[]:"",!1))}j[J7]=K}catch(Mn){is(c,c.return,Mn)}}break;case 6:if(du(p,c),bc(c),k&4){if(c.stateNode===null)throw Error(h(162));j=c.stateNode,K=c.memoizedProps;try{j.nodeValue=K}catch(Mn){is(c,c.return,Mn)}}break;case 3:if(du(p,c),bc(c),k&4&&w!==null&&w.memoizedState.isDehydrated)try{j7(p.containerInfo)}catch(Mn){is(c,c.return,Mn)}break;case 4:du(p,c),bc(c);break;case 13:du(p,c),bc(c),j=c.child,j.flags&8192&&(K=j.memoizedState!==null,j.stateNode.isHidden=K,!K||j.alternate!==null&&j.alternate.memoizedState!==null||(_V=bs())),k&4&&Cme(c);break;case 22:if(Gt=w!==null&&w.memoizedState!==null,c.mode&1?(Wo=(vt=Wo)||Gt,du(p,c),Wo=vt):du(p,c),bc(c),k&8192){if(vt=c.memoizedState!==null,(c.stateNode.isHidden=vt)&&!Gt&&c.mode&1)for(_n=c,Gt=c.child;Gt!==null;){for(qt=_n=Gt;_n!==null;){switch(jt=_n,fn=jt.child,jt.tag){case 0:case 11:case 14:case 15:cy(4,jt,jt.return);break;case 1:B5(jt,jt.return);var En=jt.stateNode;if(typeof En.componentWillUnmount=="function"){k=jt,w=jt.return;try{p=k,En.props=p.memoizedProps,En.state=p.memoizedState,En.componentWillUnmount()}catch(Mn){is(k,w,Mn)}}break;case 5:B5(jt,jt.return);break;case 22:if(jt.memoizedState!==null){kme(qt);continue}}fn!==null?(fn.return=jt,_n=fn):kme(qt)}Gt=Gt.sibling}e:for(Gt=null,qt=c;;){if(qt.tag===5){if(Gt===null){Gt=qt;try{j=qt.stateNode,vt?(K=j.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(ke=qt.stateNode,Be=qt.memoizedProps.style,oe=Be!=null&&Be.hasOwnProperty("display")?Be.display:null,ke.style.display=Vm("display",oe))}catch(Mn){is(c,c.return,Mn)}}}else if(qt.tag===6){if(Gt===null)try{qt.stateNode.nodeValue=vt?"":qt.memoizedProps}catch(Mn){is(c,c.return,Mn)}}else if((qt.tag!==22&&qt.tag!==23||qt.memoizedState===null||qt===c)&&qt.child!==null){qt.child.return=qt,qt=qt.child;continue}if(qt===c)break e;for(;qt.sibling===null;){if(qt.return===null||qt.return===c)break e;Gt===qt&&(Gt=null),qt=qt.return}Gt===qt&&(Gt=null),qt.sibling.return=qt.return,qt=qt.sibling}}break;case 19:du(p,c),bc(c),k&4&&Cme(c);break;case 21:break;default:du(p,c),bc(c)}}function bc(c){var p=c.flags;if(p&2){try{e:{for(var w=c.return;w!==null;){if(xme(w)){var k=w;break e}w=w.return}throw Error(h(160))}switch(k.tag){case 5:var j=k.stateNode;k.flags&32&&(Vo(j,""),k.flags&=-33);var K=Sme(c);vV(c,K,j);break;case 3:case 4:var oe=k.stateNode.containerInfo,ke=Sme(c);gV(c,ke,oe);break;default:throw Error(h(161))}}catch(Be){is(c,c.return,Be)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function tIe(c,p,w){_n=c,Tme(c)}function Tme(c,p,w){for(var k=(c.mode&1)!==0;_n!==null;){var j=_n,K=j.child;if(j.tag===22&&k){var oe=j.memoizedState!==null||yM;if(!oe){var ke=j.alternate,Be=ke!==null&&ke.memoizedState!==null||Wo;ke=yM;var vt=Wo;if(yM=oe,(Wo=Be)&&!vt)for(_n=j;_n!==null;)oe=_n,Be=oe.child,oe.tag===22&&oe.memoizedState!==null?Ame(j):Be!==null?(Be.return=oe,_n=Be):Ame(j);for(;K!==null;)_n=K,Tme(K),K=K.sibling;_n=j,yM=ke,Wo=vt}Mme(c)}else j.subtreeFlags&8772&&K!==null?(K.return=j,_n=K):Mme(c)}}function Mme(c){for(;_n!==null;){var p=_n;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Wo||bM(5,p);break;case 1:var k=p.stateNode;if(p.flags&4&&!Wo)if(w===null)k.componentDidMount();else{var j=p.elementType===p.type?w.memoizedProps:uu(p.type,w.memoizedProps);k.componentDidUpdate(j,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var K=p.updateQueue;K!==null&&E1e(p,K,k);break;case 3:var oe=p.updateQueue;if(oe!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}E1e(p,oe,w)}break;case 5:var ke=p.stateNode;if(w===null&&p.flags&4){w=ke;var Be=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Be.autoFocus&&w.focus();break;case"img":Be.src&&(w.src=Be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var vt=p.alternate;if(vt!==null){var Gt=vt.memoizedState;if(Gt!==null){var qt=Gt.dehydrated;qt!==null&&j7(qt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(h(163))}Wo||p.flags&512&&mV(p)}catch(jt){is(p,p.return,jt)}}if(p===c){_n=null;break}if(w=p.sibling,w!==null){w.return=p.return,_n=w;break}_n=p.return}}function kme(c){for(;_n!==null;){var p=_n;if(p===c){_n=null;break}var w=p.sibling;if(w!==null){w.return=p.return,_n=w;break}_n=p.return}}function Ame(c){for(;_n!==null;){var p=_n;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{bM(4,p)}catch(Be){is(p,w,Be)}break;case 1:var k=p.stateNode;if(typeof k.componentDidMount=="function"){var j=p.return;try{k.componentDidMount()}catch(Be){is(p,j,Be)}}var K=p.return;try{mV(p)}catch(Be){is(p,K,Be)}break;case 5:var oe=p.return;try{mV(p)}catch(Be){is(p,oe,Be)}}}catch(Be){is(p,p.return,Be)}if(p===c){_n=null;break}var ke=p.sibling;if(ke!==null){ke.return=p.return,_n=ke;break}_n=p.return}}var nIe=Math.ceil,_M=re.ReactCurrentDispatcher,yV=re.ReactCurrentOwner,sl=re.ReactCurrentBatchConfig,Ur=0,ro=null,Rs=null,Po=0,g0=0,U5=jp(0),js=0,dy=null,Ym=0,wM=0,bV=0,hy=null,Xa=null,_V=0,z5=1/0,Ud=null,xM=!1,wV=null,Xp=null,SM=!1,qp=null,EM=0,py=0,xV=null,CM=-1,PM=0;function ya(){return Ur&6?bs():CM!==-1?CM:CM=bs()}function Yp(c){return c.mode&1?Ur&2&&Po!==0?Po&-Po:UAe.transition!==null?(PM===0&&(PM=_fe()),PM):(c=ri,c!==0||(c=window.event,c=c===void 0?16:kfe(c.type)),c):1}function hu(c,p,w,k){if(50<py)throw py=0,xV=null,Error(h(185));F7(c,w,k),(!(Ur&2)||c!==ro)&&(c===ro&&(!(Ur&2)&&(wM|=w),js===4&&Zp(c,Po)),qa(c,k),w===1&&Ur===0&&!(p.mode&1)&&(z5=bs()+500,eM&&Gp()))}function qa(c,p){var w=c.callbackNode;Vke(c,p);var k=RT(c,c===ro?Po:0);if(k===0)w!==null&&vfe(w),c.callbackNode=null,c.callbackPriority=0;else if(p=k&-k,c.callbackPriority!==p){if(w!=null&&vfe(w),p===1)c.tag===0?BAe(Rme.bind(null,c)):m1e(Rme.bind(null,c)),OAe(function(){!(Ur&6)&&Gp()}),w=null;else{switch(wfe(k)){case 1:w=iz;break;case 4:w=yfe;break;case 16:w=MT;break;case 536870912:w=bfe;break;default:w=MT}w=zme(w,Ime.bind(null,c))}c.callbackPriority=p,c.callbackNode=w}}function Ime(c,p){if(CM=-1,PM=0,Ur&6)throw Error(h(327));var w=c.callbackNode;if(V5()&&c.callbackNode!==w)return null;var k=RT(c,c===ro?Po:0);if(k===0)return null;if(k&30||k&c.expiredLanes||p)p=TM(c,k);else{p=k;var j=Ur;Ur|=2;var K=Ome();(ro!==c||Po!==p)&&(Ud=null,z5=bs()+500,Qm(c,p));do try{sIe();break}catch(ke){Dme(c,ke)}while(1);Vz(),_M.current=K,Ur=j,Rs!==null?p=0:(ro=null,Po=0,p=js)}if(p!==0){if(p===2&&(j=sz(c),j!==0&&(k=j,p=SV(c,j))),p===1)throw w=dy,Qm(c,0),Zp(c,k),qa(c,bs()),w;if(p===6)Zp(c,k);else{if(j=c.current.alternate,!(k&30)&&!rIe(j)&&(p=TM(c,k),p===2&&(K=sz(c),K!==0&&(k=K,p=SV(c,K))),p===1))throw w=dy,Qm(c,0),Zp(c,k),qa(c,bs()),w;switch(c.finishedWork=j,c.finishedLanes=k,p){case 0:case 1:throw Error(h(345));case 2:Jm(c,Xa,Ud);break;case 3:if(Zp(c,k),(k&130023424)===k&&(p=_V+500-bs(),10<p)){if(RT(c,0)!==0)break;if(j=c.suspendedLanes,(j&k)!==k){ya(),c.pingedLanes|=c.suspendedLanes&j;break}c.timeoutHandle=Az(Jm.bind(null,c,Xa,Ud),p);break}Jm(c,Xa,Ud);break;case 4:if(Zp(c,k),(k&4194240)===k)break;for(p=c.eventTimes,j=-1;0<k;){var oe=31-ou(k);K=1<<oe,oe=p[oe],oe>j&&(j=oe),k&=~K}if(k=j,k=bs()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*nIe(k/1960))-k,10<k){c.timeoutHandle=Az(Jm.bind(null,c,Xa,Ud),k);break}Jm(c,Xa,Ud);break;case 5:Jm(c,Xa,Ud);break;default:throw Error(h(329))}}}return qa(c,bs()),c.callbackNode===w?Ime.bind(null,c):null}function SV(c,p){var w=hy;return c.current.memoizedState.isDehydrated&&(Qm(c,p).flags|=256),c=TM(c,p),c!==2&&(p=Xa,Xa=w,p!==null&&EV(p)),c}function EV(c){Xa===null?Xa=c:Xa.push.apply(Xa,c)}function rIe(c){for(var p=c;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var j=w[k],K=j.getSnapshot;j=j.value;try{if(!au(K(),j))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Zp(c,p){for(p&=~bV,p&=~wM,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var w=31-ou(p),k=1<<w;c[w]=-1,p&=~k}}function Rme(c){if(Ur&6)throw Error(h(327));V5();var p=RT(c,0);if(!(p&1))return qa(c,bs()),null;var w=TM(c,p);if(c.tag!==0&&w===2){var k=sz(c);k!==0&&(p=k,w=SV(c,k))}if(w===1)throw w=dy,Qm(c,0),Zp(c,p),qa(c,bs()),w;if(w===6)throw Error(h(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,Jm(c,Xa,Ud),qa(c,bs()),null}function CV(c,p){var w=Ur;Ur|=1;try{return c(p)}finally{Ur=w,Ur===0&&(z5=bs()+500,eM&&Gp())}}function Zm(c){qp!==null&&qp.tag===0&&!(Ur&6)&&V5();var p=Ur;Ur|=1;var w=sl.transition,k=ri;try{if(sl.transition=null,ri=1,c)return c()}finally{ri=k,sl.transition=w,Ur=p,!(Ur&6)&&Gp()}}function PV(){g0=U5.current,Mi(U5)}function Qm(c,p){c.finishedWork=null,c.finishedLanes=0;var w=c.timeoutHandle;if(w!==-1&&(c.timeoutHandle=-1,DAe(w)),Rs!==null)for(w=Rs.return;w!==null;){var k=w;switch(Nz(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&QT();break;case 3:N5(),Mi(Wa),Mi(jo),Zz();break;case 5:qz(k);break;case 4:N5();break;case 13:Mi(Wi);break;case 19:Mi(Wi);break;case 10:jz(k.type._context);break;case 22:case 23:PV()}w=w.return}if(ro=c,Rs=c=Qp(c.current,null),Po=g0=p,js=0,dy=null,bV=wM=Ym=0,Xa=hy=null,Km!==null){for(p=0;p<Km.length;p++)if(w=Km[p],k=w.interleaved,k!==null){w.interleaved=null;var j=k.next,K=w.pending;if(K!==null){var oe=K.next;K.next=j,k.next=oe}w.pending=k}Km=null}return c}function Dme(c,p){do{var w=Rs;try{if(Vz(),dM.current=mM,hM){for(var k=$i.memoizedState;k!==null;){var j=k.queue;j!==null&&(j.pending=null),k=k.next}hM=!1}if(qm=0,no=Vs=$i=null,sy=!1,oy=0,yV.current=null,w===null||w.return===null){js=1,dy=p,Rs=null;break}e:{var K=c,oe=w.return,ke=w,Be=p;if(p=Po,ke.flags|=32768,Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var vt=Be,Gt=ke,qt=Gt.tag;if(!(Gt.mode&1)&&(qt===0||qt===11||qt===15)){var jt=Gt.alternate;jt?(Gt.updateQueue=jt.updateQueue,Gt.memoizedState=jt.memoizedState,Gt.lanes=jt.lanes):(Gt.updateQueue=null,Gt.memoizedState=null)}var fn=rme(oe);if(fn!==null){fn.flags&=-257,ime(fn,oe,ke,K,p),fn.mode&1&&nme(K,vt,p),p=fn,Be=vt;var En=p.updateQueue;if(En===null){var Mn=new Set;Mn.add(Be),p.updateQueue=Mn}else En.add(Be);break e}else{if(!(p&1)){nme(K,vt,p),TV();break e}Be=Error(h(426))}}else if(Li&&ke.mode&1){var _s=rme(oe);if(_s!==null){!(_s.flags&65536)&&(_s.flags|=256),ime(_s,oe,ke,K,p),Uz(F5(Be,ke));break e}}K=Be=F5(Be,ke),js!==4&&(js=2),hy===null?hy=[K]:hy.push(K),K=oe;do{switch(K.tag){case 3:K.flags|=65536,p&=-p,K.lanes|=p;var ot=eme(K,Be,p);S1e(K,ot);break e;case 1:ke=Be;var Ge=K.type,ut=K.stateNode;if(!(K.flags&128)&&(typeof Ge.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Xp===null||!Xp.has(ut)))){K.flags|=65536,p&=-p,K.lanes|=p;var Qt=tme(K,ke,p);S1e(K,Qt);break e}}K=K.return}while(K!==null)}Nme(w)}catch(An){p=An,Rs===w&&w!==null&&(Rs=w=w.return);continue}break}while(1)}function Ome(){var c=_M.current;return _M.current=mM,c===null?mM:c}function TV(){(js===0||js===3||js===2)&&(js=4),ro===null||!(Ym&268435455)&&!(wM&268435455)||Zp(ro,Po)}function TM(c,p){var w=Ur;Ur|=2;var k=Ome();(ro!==c||Po!==p)&&(Ud=null,Qm(c,p));do try{iIe();break}catch(j){Dme(c,j)}while(1);if(Vz(),Ur=w,_M.current=k,Rs!==null)throw Error(h(261));return ro=null,Po=0,js}function iIe(){for(;Rs!==null;)Lme(Rs)}function sIe(){for(;Rs!==null&&!Rke();)Lme(Rs)}function Lme(c){var p=Ume(c.alternate,c,g0);c.memoizedProps=c.pendingProps,p===null?Nme(c):Rs=p,yV.current=null}function Nme(c){var p=c;do{var w=p.alternate;if(c=p.return,p.flags&32768){if(w=QAe(w,p),w!==null){w.flags&=32767,Rs=w;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{js=6,Rs=null;return}}else if(w=ZAe(w,p,g0),w!==null){Rs=w;return}if(p=p.sibling,p!==null){Rs=p;return}Rs=p=c}while(p!==null);js===0&&(js=5)}function Jm(c,p,w){var k=ri,j=sl.transition;try{sl.transition=null,ri=1,oIe(c,p,w,k)}finally{sl.transition=j,ri=k}return null}function oIe(c,p,w,k){do V5();while(qp!==null);if(Ur&6)throw Error(h(327));w=c.finishedWork;var j=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(h(177));c.callbackNode=null,c.callbackPriority=0;var K=w.lanes|w.childLanes;if(jke(c,K),c===ro&&(Rs=ro=null,Po=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||SM||(SM=!0,zme(MT,function(){return V5(),null})),K=(w.flags&15990)!==0,w.subtreeFlags&15990||K){K=sl.transition,sl.transition=null;var oe=ri;ri=1;var ke=Ur;Ur|=4,yV.current=null,eIe(c,w),Pme(w,c),MAe(Mz),LT=!!Tz,Mz=Tz=null,c.current=w,tIe(w),Dke(),Ur=ke,ri=oe,sl.transition=K}else c.current=w;if(SM&&(SM=!1,qp=c,EM=j),K=c.pendingLanes,K===0&&(Xp=null),Nke(w.stateNode),qa(c,bs()),p!==null)for(k=c.onRecoverableError,w=0;w<p.length;w++)j=p[w],k(j.value,{componentStack:j.stack,digest:j.digest});if(xM)throw xM=!1,c=wV,wV=null,c;return EM&1&&c.tag!==0&&V5(),K=c.pendingLanes,K&1?c===xV?py++:(py=0,xV=c):py=0,Gp(),null}function V5(){if(qp!==null){var c=wfe(EM),p=sl.transition,w=ri;try{if(sl.transition=null,ri=16>c?16:c,qp===null)var k=!1;else{if(c=qp,qp=null,EM=0,Ur&6)throw Error(h(331));var j=Ur;for(Ur|=4,_n=c.current;_n!==null;){var K=_n,oe=K.child;if(_n.flags&16){var ke=K.deletions;if(ke!==null){for(var Be=0;Be<ke.length;Be++){var vt=ke[Be];for(_n=vt;_n!==null;){var Gt=_n;switch(Gt.tag){case 0:case 11:case 15:cy(8,Gt,K)}var qt=Gt.child;if(qt!==null)qt.return=Gt,_n=qt;else for(;_n!==null;){Gt=_n;var jt=Gt.sibling,fn=Gt.return;if(wme(Gt),Gt===vt){_n=null;break}if(jt!==null){jt.return=fn,_n=jt;break}_n=fn}}}var En=K.alternate;if(En!==null){var Mn=En.child;if(Mn!==null){En.child=null;do{var _s=Mn.sibling;Mn.sibling=null,Mn=_s}while(Mn!==null)}}_n=K}}if(K.subtreeFlags&2064&&oe!==null)oe.return=K,_n=oe;else e:for(;_n!==null;){if(K=_n,K.flags&2048)switch(K.tag){case 0:case 11:case 15:cy(9,K,K.return)}var ot=K.sibling;if(ot!==null){ot.return=K.return,_n=ot;break e}_n=K.return}}var Ge=c.current;for(_n=Ge;_n!==null;){oe=_n;var ut=oe.child;if(oe.subtreeFlags&2064&&ut!==null)ut.return=oe,_n=ut;else e:for(oe=Ge;_n!==null;){if(ke=_n,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:bM(9,ke)}}catch(An){is(ke,ke.return,An)}if(ke===oe){_n=null;break e}var Qt=ke.sibling;if(Qt!==null){Qt.return=ke.return,_n=Qt;break e}_n=ke.return}}if(Ur=j,Gp(),mc&&typeof mc.onPostCommitFiberRoot=="function")try{mc.onPostCommitFiberRoot(kT,c)}catch{}k=!0}return k}finally{ri=w,sl.transition=p}}return!1}function Fme(c,p,w){p=F5(w,p),p=eme(c,p,1),c=$p(c,p,1),p=ya(),c!==null&&(F7(c,1,p),qa(c,p))}function is(c,p,w){if(c.tag===3)Fme(c,c,w);else for(;p!==null;){if(p.tag===3){Fme(p,c,w);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Xp===null||!Xp.has(k))){c=F5(w,c),c=tme(p,c,1),p=$p(p,c,1),c=ya(),p!==null&&(F7(p,1,c),qa(p,c));break}}p=p.return}}function aIe(c,p,w){var k=c.pingCache;k!==null&&k.delete(p),p=ya(),c.pingedLanes|=c.suspendedLanes&w,ro===c&&(Po&w)===w&&(js===4||js===3&&(Po&130023424)===Po&&500>bs()-_V?Qm(c,0):bV|=w),qa(c,p)}function Bme(c,p){p===0&&(c.mode&1?(p=IT,IT<<=1,!(IT&130023424)&&(IT=4194304)):p=1);var w=ya();c=Nd(c,p),c!==null&&(F7(c,p,w),qa(c,w))}function lIe(c){var p=c.memoizedState,w=0;p!==null&&(w=p.retryLane),Bme(c,w)}function uIe(c,p){var w=0;switch(c.tag){case 13:var k=c.stateNode,j=c.memoizedState;j!==null&&(w=j.retryLane);break;case 19:k=c.stateNode;break;default:throw Error(h(314))}k!==null&&k.delete(p),Bme(c,w)}var Ume;Ume=function(c,p,w){if(c!==null)if(c.memoizedProps!==p.pendingProps||Wa.current)Ka=!0;else{if(!(c.lanes&w)&&!(p.flags&128))return Ka=!1,YAe(c,p,w);Ka=!!(c.flags&131072)}else Ka=!1,Li&&p.flags&1048576&&g1e(p,nM,p.index);switch(p.lanes=0,p.tag){case 2:var k=p.type;vM(c,p),c=p.pendingProps;var j=k5(p,jo.current);O5(p,w),j=eV(null,p,k,c,j,w);var K=tV();return p.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,$a(k)?(K=!0,JT(p)):K=!1,p.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Wz(p),j.updater=lM,p.stateNode=j,j._reactInternals=p,Kz(p,k,c,w),p=uV(null,p,k,!0,K,w)):(p.tag=0,Li&&K&&Lz(p),va(null,p,j,w),p=p.child),p;case 16:k=p.elementType;e:{switch(vM(c,p),c=p.pendingProps,j=k._init,k=j(k._payload),p.type=k,j=p.tag=dIe(k),c=uu(k,c),j){case 0:p=lV(null,p,k,c,w);break e;case 1:p=cme(null,p,k,c,w);break e;case 11:p=sme(null,p,k,c,w);break e;case 14:p=ome(null,p,k,uu(k.type,c),w);break e}throw Error(h(306,k,""))}return p;case 0:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uu(k,j),lV(c,p,k,j,w);case 1:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uu(k,j),cme(c,p,k,j,w);case 3:e:{if(dme(p),c===null)throw Error(h(387));k=p.pendingProps,K=p.memoizedState,j=K.element,x1e(c,p),aM(p,k,null,w);var oe=p.memoizedState;if(k=oe.element,K.isDehydrated)if(K={element:k,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},p.updateQueue.baseState=K,p.memoizedState=K,p.flags&256){j=F5(Error(h(423)),p),p=hme(c,p,k,w,j);break e}else if(k!==j){j=F5(Error(h(424)),p),p=hme(c,p,k,w,j);break e}else for(m0=Vp(p.stateNode.containerInfo.firstChild),f0=p,Li=!0,lu=null,w=I1e(p,null,k,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(R5(),k===j){p=Bd(c,p,w);break e}va(c,p,k,w)}p=p.child}return p;case 5:return R1e(p),c===null&&Bz(p),k=p.type,j=p.pendingProps,K=c!==null?c.memoizedProps:null,oe=j.children,kz(k,j)?oe=null:K!==null&&kz(k,K)&&(p.flags|=32),ume(c,p),va(c,p,oe,w),p.child;case 6:return c===null&&Bz(p),null;case 13:return pme(c,p,w);case 4:return Xz(p,p.stateNode.containerInfo),k=p.pendingProps,c===null?p.child=L5(p,null,k,w):va(c,p,k,w),p.child;case 11:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uu(k,j),sme(c,p,k,j,w);case 7:return va(c,p,p.pendingProps,w),p.child;case 8:return va(c,p,p.pendingProps.children,w),p.child;case 12:return va(c,p,p.pendingProps.children,w),p.child;case 10:e:{if(k=p.type._context,j=p.pendingProps,K=p.memoizedProps,oe=j.value,yi(iM,k._currentValue),k._currentValue=oe,K!==null)if(au(K.value,oe)){if(K.children===j.children&&!Wa.current){p=Bd(c,p,w);break e}}else for(K=p.child,K!==null&&(K.return=p);K!==null;){var ke=K.dependencies;if(ke!==null){oe=K.child;for(var Be=ke.firstContext;Be!==null;){if(Be.context===k){if(K.tag===1){Be=Fd(-1,w&-w),Be.tag=2;var vt=K.updateQueue;if(vt!==null){vt=vt.shared;var Gt=vt.pending;Gt===null?Be.next=Be:(Be.next=Gt.next,Gt.next=Be),vt.pending=Be}}K.lanes|=w,Be=K.alternate,Be!==null&&(Be.lanes|=w),Hz(K.return,w,p),ke.lanes|=w;break}Be=Be.next}}else if(K.tag===10)oe=K.type===p.type?null:K.child;else if(K.tag===18){if(oe=K.return,oe===null)throw Error(h(341));oe.lanes|=w,ke=oe.alternate,ke!==null&&(ke.lanes|=w),Hz(oe,w,p),oe=K.sibling}else oe=K.child;if(oe!==null)oe.return=K;else for(oe=K;oe!==null;){if(oe===p){oe=null;break}if(K=oe.sibling,K!==null){K.return=oe.return,oe=K;break}oe=oe.return}K=oe}va(c,p,j.children,w),p=p.child}return p;case 9:return j=p.type,k=p.pendingProps.children,O5(p,w),j=rl(j),k=k(j),p.flags|=1,va(c,p,k,w),p.child;case 14:return k=p.type,j=uu(k,p.pendingProps),j=uu(k.type,j),ome(c,p,k,j,w);case 15:return ame(c,p,p.type,p.pendingProps,w);case 17:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uu(k,j),vM(c,p),p.tag=1,$a(k)?(c=!0,JT(p)):c=!1,O5(p,w),T1e(p,k,j),Kz(p,k,j,w),uV(null,p,k,!0,c,w);case 19:return mme(c,p,w);case 22:return lme(c,p,w)}throw Error(h(156,p.tag))};function zme(c,p){return gfe(c,p)}function cIe(c,p,w,k){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ol(c,p,w,k){return new cIe(c,p,w,k)}function MV(c){return c=c.prototype,!(!c||!c.isReactComponent)}function dIe(c){if(typeof c=="function")return MV(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Le)return 11;if(c===Bt)return 14}return 2}function Qp(c,p){var w=c.alternate;return w===null?(w=ol(c.tag,p,c.key,c.mode),w.elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=p,w.type=c.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=c.flags&14680064,w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,p=c.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function MM(c,p,w,k,j,K){var oe=2;if(k=c,typeof c=="function")MV(c)&&(oe=1);else if(typeof c=="string")oe=5;else e:switch(c){case ye:return e2(w.children,j,K,p);case we:oe=8,j|=8;break;case Ne:return c=ol(12,w,p,j|2),c.elementType=Ne,c.lanes=K,c;case Q:return c=ol(13,w,p,j),c.elementType=Q,c.lanes=K,c;case He:return c=ol(19,w,p,j),c.elementType=He,c.lanes=K,c;case Re:return kM(w,j,K,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case lt:oe=10;break e;case ue:oe=9;break e;case Le:oe=11;break e;case Bt:oe=14;break e;case Ie:oe=16,k=null;break e}throw Error(h(130,c==null?c:typeof c,""))}return p=ol(oe,w,p,j),p.elementType=c,p.type=k,p.lanes=K,p}function e2(c,p,w,k){return c=ol(7,c,k,p),c.lanes=w,c}function kM(c,p,w,k){return c=ol(22,c,k,p),c.elementType=Re,c.lanes=w,c.stateNode={isHidden:!1},c}function kV(c,p,w){return c=ol(6,c,null,p),c.lanes=w,c}function AV(c,p,w){return p=ol(4,c.children!==null?c.children:[],c.key,p),p.lanes=w,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function hIe(c,p,w,k,j){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oz(0),this.expirationTimes=oz(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oz(0),this.identifierPrefix=k,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function IV(c,p,w,k,j,K,oe,ke,Be){return c=new hIe(c,p,w,ke,Be),p===1?(p=1,K===!0&&(p|=8)):p=0,K=ol(3,null,null,p),c.current=K,K.stateNode=c,K.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wz(K),c}function pIe(c,p,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ce,key:k==null?null:""+k,children:c,containerInfo:p,implementation:w}}function Vme(c){if(!c)return Hp;c=c._reactInternals;e:{if(jm(c)!==c||c.tag!==1)throw Error(h(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if($a(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(h(171))}if(c.tag===1){var w=c.type;if($a(w))return p1e(c,w,p)}return p}function jme(c,p,w,k,j,K,oe,ke,Be){return c=IV(w,k,!0,c,j,K,oe,ke,Be),c.context=Vme(null),w=c.current,k=ya(),j=Yp(w),K=Fd(k,j),K.callback=p??null,$p(w,K,j),c.current.lanes=j,F7(c,j,k),qa(c,k),c}function AM(c,p,w,k){var j=p.current,K=ya(),oe=Yp(j);return w=Vme(w),p.context===null?p.context=w:p.pendingContext=w,p=Fd(K,oe),p.payload={element:c},k=k===void 0?null:k,k!==null&&(p.callback=k),c=$p(j,p,oe),c!==null&&(hu(c,j,oe,K),oM(c,j,oe)),oe}function IM(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Hme(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var w=c.retryLane;c.retryLane=w!==0&&w<p?w:p}}function RV(c,p){Hme(c,p),(c=c.alternate)&&Hme(c,p)}function fIe(){return null}var Gme=typeof reportError=="function"?reportError:function(c){console.error(c)};function DV(c){this._internalRoot=c}RM.prototype.render=DV.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(h(409));AM(c,p,null,null)},RM.prototype.unmount=DV.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;Zm(function(){AM(null,c,null,null)}),p[Rd]=null}};function RM(c){this._internalRoot=c}RM.prototype.unstable_scheduleHydration=function(c){if(c){var p=Efe();c={blockedOn:null,target:c,priority:p};for(var w=0;w<Bp.length&&p!==0&&p<Bp[w].priority;w++);Bp.splice(w,0,c),w===0&&Tfe(c)}};function OV(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function DM(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Wme(){}function mIe(c,p,w,k,j){if(j){if(typeof k=="function"){var K=k;k=function(){var vt=IM(oe);K.call(vt)}}var oe=jme(p,k,c,0,null,!1,!1,"",Wme);return c._reactRootContainer=oe,c[Rd]=oe.current,Z7(c.nodeType===8?c.parentNode:c),Zm(),oe}for(;j=c.lastChild;)c.removeChild(j);if(typeof k=="function"){var ke=k;k=function(){var vt=IM(Be);ke.call(vt)}}var Be=IV(c,0,!1,null,null,!1,!1,"",Wme);return c._reactRootContainer=Be,c[Rd]=Be.current,Z7(c.nodeType===8?c.parentNode:c),Zm(function(){AM(p,Be,w,k)}),Be}function OM(c,p,w,k,j){var K=w._reactRootContainer;if(K){var oe=K;if(typeof j=="function"){var ke=j;j=function(){var Be=IM(oe);ke.call(Be)}}AM(p,oe,c,j)}else oe=mIe(w,p,c,j,k);return IM(oe)}xfe=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var w=N7(p.pendingLanes);w!==0&&(az(p,w|1),qa(p,bs()),!(Ur&6)&&(z5=bs()+500,Gp()))}break;case 13:Zm(function(){var k=Nd(c,1);if(k!==null){var j=ya();hu(k,c,1,j)}}),RV(c,1)}},lz=function(c){if(c.tag===13){var p=Nd(c,134217728);if(p!==null){var w=ya();hu(p,c,134217728,w)}RV(c,134217728)}},Sfe=function(c){if(c.tag===13){var p=Yp(c),w=Nd(c,p);if(w!==null){var k=ya();hu(w,c,p,k)}RV(c,p)}},Efe=function(){return ri},Cfe=function(c,p){var w=ri;try{return ri=c,p()}finally{ri=w}},y5=function(c,p,w){switch(p){case"input":if(Se(c,w),p=w.name,w.type==="radio"&&p!=null){for(w=c;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var k=w[p];if(k!==c&&k.form===c.form){var j=ZT(k);if(!j)throw Error(h(90));Xr(k),Se(k,j)}}}break;case"textarea":Lt(c,w);break;case"select":p=w.value,p!=null&&st(c,!!w.multiple,p,!1)}},ufe=CV,cfe=Zm;var gIe={usingClientEntryPoint:!1,Events:[ey,T5,ZT,afe,lfe,CV]},fy={findFiberByHostInstance:Hm,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vIe={bundleType:fy.bundleType,version:fy.version,rendererPackageName:fy.rendererPackageName,rendererConfig:fy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ffe(c),c===null?null:c.stateNode},findFiberByHostInstance:fy.findFiberByHostInstance||fIe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(my=__REACT_DEVTOOLS_GLOBAL_HOOK__,!my.isDisabled&&my.supportsFiber))try{kT=my.inject(vIe),mc=my}catch{}var my;s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gIe,s.createPortal=function(c,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OV(p))throw Error(h(200));return pIe(c,p,null,w)},s.createRoot=function(c,p){if(!OV(c))throw Error(h(299));var w=!1,k="",j=Gme;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onRecoverableError!==void 0&&(j=p.onRecoverableError)),p=IV(c,1,!1,null,null,w,!1,k,j),c[Rd]=p.current,Z7(c.nodeType===8?c.parentNode:c),new DV(p)},s.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(h(188)):(c=Object.keys(c).join(","),Error(h(268,c)));return c=ffe(p),c=c===null?null:c.stateNode,c},s.flushSync=function(c){return Zm(c)},s.hydrate=function(c,p,w){if(!DM(p))throw Error(h(200));return OM(null,c,p,!0,w)},s.hydrateRoot=function(c,p,w){if(!OV(c))throw Error(h(405));var k=w!=null&&w.hydratedSources||null,j=!1,K="",oe=Gme;if(w!=null&&(w.unstable_strictMode===!0&&(j=!0),w.identifierPrefix!==void 0&&(K=w.identifierPrefix),w.onRecoverableError!==void 0&&(oe=w.onRecoverableError)),p=jme(p,null,c,1,w??null,j,!1,K,oe),c[Rd]=p.current,Z7(c),k)for(c=0;c<k.length;c++)w=k[c],j=w._getVersion,j=j(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,j]:p.mutableSourceEagerHydrationData.push(w,j);return new RM(p)},s.render=function(c,p,w){if(!DM(p))throw Error(h(200));return OM(null,c,p,!1,w)},s.unmountComponentAtNode=function(c){if(!DM(c))throw Error(h(40));return c._reactRootContainer?(Zm(function(){OM(null,null,c,!1,function(){c._reactRootContainer=null,c[Rd]=null})}),!0):!1},s.unstable_batchedUpdates=CV,s.unstable_renderSubtreeIntoContainer=function(c,p,w,k){if(!DM(w))throw Error(h(200));if(c==null||c._reactInternals===void 0)throw Error(h(38));return OM(c,p,w,!1,k)},s.version="18.2.0-next-9e3b772b8-20220608"}),Ll=H((s,a)=>{function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(h){console.error(h)}}l(),a.exports=L8()});function jO(s){let[,a]=(0,Hu.useState)(0);return(0,Hu.useCallback)(()=>{a(l=>l+1)},[])}function Qn(s,a,l){let h=(0,Hu.useCallback)(s,a),m=(0,Hu.useRef)(null);m.current?m.current.set(h):m.current=new Ua.Atom(h);let g=(0,Hu.useRef)(null);return g.current||(g.current=(0,Ua.prism)(()=>m.current.prism.getValue()())),s3(g.current,l)}function vE(){q1||(q1=!0,(0,N8.default)(()=>{(0,yE.unstable_batchedUpdates)(function(){for(var s,a;i0.length>0;){let l=i0.shift();Qh.delete(l);let h;Nl&&((s=l.debug)==null||s.history.push("queue reached"));try{h=l.der.getValue()}catch(m){Nl&&((a=l.debug)==null||a.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(m),l.runUpdate();continue}h!==l.lastValue&&(l.lastValue=h,l.runUpdate())}q1=!1},1)}))}function s3(s,a){var l;let h=jO(),m=(0,Hu.useRef)(void 0);m.current||(F8++,m.current={order:F8,runUpdate:()=>{m.current.unmounted||h()},der:s,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var b;Nl&&((b=m.current.debug)==null||b.history.push("queueUpdate()")),bE(m.current)},untap:s.onStale(()=>{Nl&&m.current.debug.history.push("onStale(cb)"),m.current.queueUpdate()})},Nl&&(m.current.debug={label:a,traceOfFirstTimeRender:new Error,history:[]})),(0,Hu.useLayoutEffect)(()=>function(){m.current.unmounted=!0,m.current.untap(),B8(m.current)},[]),B8(m.current);let g=m.current.der.getValue();return m.current.lastValue=g,Nl&&((l=m.current.debug)==null||l.history.push("rendered")),g}var Ua,N8,Hu,yE,Nl,ir,F8,i0,Qh,q1,bE,_E,B8,Pn=C(()=>{Ua=zt,fi(),N8=q(O8()),Hu=q(Fe()),yE=q(Ll()),Nl=!1,ir=(s,a)=>Qn(()=>(0,Ua.val)(s),[s],a),F8=0,i0=[],Qh=new Set,q1=!1,bE=s=>{_E(s),vE()},_E=s=>{if(!Qh.has(s))if(Qh.add(s),i0.length===0)i0.push(s);else{let a=E8(i0,l=>l.order>=s.order);a===-1?i0.push(s):i0[a].order>s.order&&i0.splice(a,0,s)}},B8=s=>{if(!Qh.has(s))return;Qh.delete(s);let a=E8(i0,l=>l===s);i0.splice(a,1)}}),HO=H(s=>{var a=60103,l=60106,h=60107,m=60108,g=60114,b=60109,_=60110,E=60112,P=60113,I=60120,O=60115,R=60116,A=60121,F=60122,N=60117,V=60129,W=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,a=$("react.element"),l=$("react.portal"),h=$("react.fragment"),m=$("react.strict_mode"),g=$("react.profiler"),b=$("react.provider"),_=$("react.context"),E=$("react.forward_ref"),P=$("react.suspense"),I=$("react.suspense_list"),O=$("react.memo"),R=$("react.lazy"),A=$("react.block"),F=$("react.server.block"),N=$("react.fundamental"),V=$("react.debug_trace_mode"),W=$("react.legacy_hidden"));var $;function Z(Q){if(typeof Q=="object"&&Q!==null){var He=Q.$$typeof;switch(He){case a:switch(Q=Q.type,Q){case h:case g:case m:case P:case I:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case _:case E:case R:case O:case b:return Q;default:return He}}case l:return He}}}var ie=b,re=a,le=E,Ce=h,ye=R,we=O,Ne=l,lt=g,ue=m,Le=P;s.ContextConsumer=_,s.ContextProvider=ie,s.Element=re,s.ForwardRef=le,s.Fragment=Ce,s.Lazy=ye,s.Memo=we,s.Portal=Ne,s.Profiler=lt,s.StrictMode=ue,s.Suspense=Le,s.isAsyncMode=function(){return!1},s.isConcurrentMode=function(){return!1},s.isContextConsumer=function(Q){return Z(Q)===_},s.isContextProvider=function(Q){return Z(Q)===b},s.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===a},s.isForwardRef=function(Q){return Z(Q)===E},s.isFragment=function(Q){return Z(Q)===h},s.isLazy=function(Q){return Z(Q)===R},s.isMemo=function(Q){return Z(Q)===O},s.isPortal=function(Q){return Z(Q)===l},s.isProfiler=function(Q){return Z(Q)===g},s.isStrictMode=function(Q){return Z(Q)===m},s.isSuspense=function(Q){return Z(Q)===P},s.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===h||Q===g||Q===V||Q===m||Q===P||Q===I||Q===W||typeof Q=="object"&&Q!==null&&(Q.$$typeof===R||Q.$$typeof===O||Q.$$typeof===b||Q.$$typeof===_||Q.$$typeof===E||Q.$$typeof===N||Q.$$typeof===A||Q[0]===F)},s.typeOf=Z}),GO=H((s,a)=>{a.exports=HO()}),U8=H((s,a)=>{a.exports=function(l,h,m,g){var b=m?m.call(g,l,h):void 0;if(b!==void 0)return!!b;if(l===h)return!0;if(typeof l!="object"||!l||typeof h!="object"||!h)return!1;var _=Object.keys(l),E=Object.keys(h);if(_.length!==E.length)return!1;for(var P=Object.prototype.hasOwnProperty.bind(h),I=0;I<_.length;I++){var O=_[I];if(!P(O))return!1;var R=l[O],A=h[O];if(b=m?m.call(g,R,A,O):void 0,b===!1||b===void 0&&R!==A)return!1}return!0}});function WO(s){function a(ge,it,at,ct,Xe){for(var an=0,St=0,nn=0,Sn=0,Vn,Ln,Xr=0,ee=0,ft,pt=ft=Vn=0,Ee=0,Se=0,qe=0,kt=0,Ot=at.length,st=Ot-1,Vt,It="",Lt="",Rn="",Br="",tr;Ee<Ot;){if(Ln=at.charCodeAt(Ee),Ee===st&&St+Sn+nn+an!==0&&(St!==0&&(Ln=St===47?10:47),Sn=nn=an=0,Ot++,st++),St+Sn+nn+an===0){if(Ee===st&&(0<Se&&(It=It.replace(R,"")),0<It.trim().length)){switch(Ln){case 32:case 9:case 59:case 13:case 10:break;default:It+=at.charAt(Ee)}Ln=59}switch(Ln){case 123:for(It=It.trim(),Vn=It.charCodeAt(0),ft=1,kt=++Ee;Ee<Ot;){switch(Ln=at.charCodeAt(Ee)){case 123:ft++;break;case 125:ft--;break;case 47:switch(Ln=at.charCodeAt(Ee+1)){case 42:case 47:e:{for(pt=Ee+1;pt<st;++pt)switch(at.charCodeAt(pt)){case 47:if(Ln===42&&at.charCodeAt(pt-1)===42&&Ee+2!==pt){Ee=pt+1;break e}break;case 10:if(Ln===47){Ee=pt+1;break e}}Ee=pt}}break;case 91:Ln++;case 40:Ln++;case 34:case 39:for(;Ee++<st&&at.charCodeAt(Ee)!==Ln;);}if(ft===0)break;Ee++}switch(ft=at.substring(kt,Ee),Vn===0&&(Vn=(It=It.replace(O,"").trim()).charCodeAt(0)),Vn){case 64:switch(0<Se&&(It=It.replace(R,"")),Ln=It.charCodeAt(1),Ln){case 100:case 109:case 115:case 45:Se=it;break;default:Se=Bt}if(ft=a(it,Se,ft,Ln,Xe+1),kt=ft.length,0<Re&&(Se=l(Bt,It,qe),tr=_(3,ft,Se,it,Le,ue,kt,Ln,Xe,ct),It=Se.join(""),tr!==void 0&&(kt=(ft=tr.trim()).length)===0&&(Ln=0,ft="")),0<kt)switch(Ln){case 115:It=It.replace(le,b);case 100:case 109:case 45:ft=It+"{"+ft+"}";break;case 107:It=It.replace($,"$1 $2"),ft=It+"{"+ft+"}",ft=He===1||He===2&&g("@"+ft,3)?"@-webkit-"+ft+"@"+ft:"@"+ft;break;default:ft=It+ft,ct===112&&(ft=(Lt+=ft,""))}else ft="";break;default:ft=a(it,l(it,It,qe),ft,ct,Xe+1)}Rn+=ft,ft=qe=Se=pt=Vn=0,It="",Ln=at.charCodeAt(++Ee);break;case 125:case 59:if(It=(0<Se?It.replace(R,""):It).trim(),1<(kt=It.length))switch(pt===0&&(Vn=It.charCodeAt(0),Vn===45||96<Vn&&123>Vn)&&(kt=(It=It.replace(" ",":")).length),0<Re&&(tr=_(1,It,it,ge,Le,ue,Lt.length,ct,Xe,ct))!==void 0&&(kt=(It=tr.trim()).length)===0&&(It="\0\0"),Vn=It.charCodeAt(0),Ln=It.charCodeAt(1),Vn){case 0:break;case 64:if(Ln===105||Ln===99){Br+=It+at.charAt(Ee);break}default:It.charCodeAt(kt-1)!==58&&(Lt+=m(It,Vn,Ln,It.charCodeAt(2)))}qe=Se=pt=Vn=0,It="",Ln=at.charCodeAt(++Ee)}}switch(Ln){case 13:case 10:St===47?St=0:1+Vn===0&&ct!==107&&0<It.length&&(Se=1,It+="\0"),0<Re*Pt&&_(0,It,it,ge,Le,ue,Lt.length,ct,Xe,ct),ue=1,Le++;break;case 59:case 125:if(St+Sn+nn+an===0){ue++;break}default:switch(ue++,Vt=at.charAt(Ee),Ln){case 9:case 32:if(Sn+an+St===0)switch(Xr){case 44:case 58:case 9:case 32:Vt="";break;default:Ln!==32&&(Vt=" ")}break;case 0:Vt="\\0";break;case 12:Vt="\\f";break;case 11:Vt="\\v";break;case 38:Sn+St+an===0&&(Se=qe=1,Vt="\f"+Vt);break;case 108:if(Sn+St+an+Q===0&&0<pt)switch(Ee-pt){case 2:Xr===112&&at.charCodeAt(Ee-3)===58&&(Q=Xr);case 8:ee===111&&(Q=ee)}break;case 58:Sn+St+an===0&&(pt=Ee);break;case 44:St+nn+Sn+an===0&&(Se=1,Vt+="\r");break;case 34:case 39:St===0&&(Sn=Sn===Ln?0:Sn===0?Ln:Sn);break;case 91:Sn+St+nn===0&&an++;break;case 93:Sn+St+nn===0&&an--;break;case 41:Sn+St+an===0&&nn--;break;case 40:if(Sn+St+an===0){if(Vn===0)switch(2*Xr+3*ee){case 533:break;default:Vn=1}nn++}break;case 64:St+nn+Sn+an+pt+ft===0&&(ft=1);break;case 42:case 47:if(!(0<Sn+an+nn))switch(St){case 0:switch(2*Ln+3*at.charCodeAt(Ee+1)){case 235:St=47;break;case 220:kt=Ee,St=42}break;case 42:Ln===47&&Xr===42&&kt+2!==Ee&&(at.charCodeAt(kt+2)===33&&(Lt+=at.substring(kt,Ee+1)),Vt="",St=0)}}St===0&&(It+=Vt)}ee=Xr,Xr=Ln,Ee++}if(kt=Lt.length,0<kt){if(Se=it,0<Re&&(tr=_(2,Lt,Se,ge,Le,ue,kt,ct,Xe,ct),tr!==void 0&&(Lt=tr).length===0))return Br+Lt+Rn;if(Lt=Se.join(",")+"{"+Lt+"}",He*Q!==0){switch(He!==2||g(Lt,2)||(Q=0),Q){case 111:Lt=Lt.replace(ie,":-moz-$1")+Lt;break;case 112:Lt=Lt.replace(Z,"::-webkit-input-$1")+Lt.replace(Z,"::-moz-$1")+Lt.replace(Z,":-ms-input-$1")+Lt}Q=0}}return Br+Lt+Rn}function l(ge,it,at){var ct=it.trim().split(V);it=ct;var Xe=ct.length,an=ge.length;switch(an){case 0:case 1:var St=0;for(ge=an===0?"":ge[0]+" ";St<Xe;++St)it[St]=h(ge,it[St],at).trim();break;default:var nn=St=0;for(it=[];St<Xe;++St)for(var Sn=0;Sn<an;++Sn)it[nn++]=h(ge[Sn]+" ",ct[St],at).trim()}return it}function h(ge,it,at){var ct=it.charCodeAt(0);switch(33>ct&&(ct=(it=it.trim()).charCodeAt(0)),ct){case 38:return it.replace(W,"$1"+ge.trim());case 58:return ge.trim()+it.replace(W,"$1"+ge.trim());default:if(0<1*at&&0<it.indexOf("\f"))return it.replace(W,(ge.charCodeAt(0)===58?"":"$1")+ge.trim())}return ge+it}function m(ge,it,at,ct){var Xe=ge+";",an=2*it+3*at+4*ct;if(an===944){ge=Xe.indexOf(":",9)+1;var St=Xe.substring(ge,Xe.length-1).trim();return St=Xe.substring(0,ge).trim()+St+";",He===1||He===2&&g(St,1)?"-webkit-"+St+St:St}if(He===0||He===2&&!g(Xe,1))return Xe;switch(an){case 1015:return Xe.charCodeAt(10)===97?"-webkit-"+Xe+Xe:Xe;case 951:return Xe.charCodeAt(3)===116?"-webkit-"+Xe+Xe:Xe;case 963:return Xe.charCodeAt(5)===110?"-webkit-"+Xe+Xe:Xe;case 1009:if(Xe.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Xe+Xe;case 978:return"-webkit-"+Xe+"-moz-"+Xe+Xe;case 1019:case 983:return"-webkit-"+Xe+"-moz-"+Xe+"-ms-"+Xe+Xe;case 883:if(Xe.charCodeAt(8)===45)return"-webkit-"+Xe+Xe;if(0<Xe.indexOf("image-set(",11))return Xe.replace(lt,"$1-webkit-$2")+Xe;break;case 932:if(Xe.charCodeAt(4)===45)switch(Xe.charCodeAt(5)){case 103:return"-webkit-box-"+Xe.replace("-grow","")+"-webkit-"+Xe+"-ms-"+Xe.replace("grow","positive")+Xe;case 115:return"-webkit-"+Xe+"-ms-"+Xe.replace("shrink","negative")+Xe;case 98:return"-webkit-"+Xe+"-ms-"+Xe.replace("basis","preferred-size")+Xe}return"-webkit-"+Xe+"-ms-"+Xe+Xe;case 964:return"-webkit-"+Xe+"-ms-flex-"+Xe+Xe;case 1023:if(Xe.charCodeAt(8)!==99)break;return St=Xe.substring(Xe.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+St+"-webkit-"+Xe+"-ms-flex-pack"+St+Xe;case 1005:return F.test(Xe)?Xe.replace(A,":-webkit-")+Xe.replace(A,":-moz-")+Xe:Xe;case 1e3:switch(St=Xe.substring(13).trim(),it=St.indexOf("-")+1,St.charCodeAt(0)+St.charCodeAt(it)){case 226:St=Xe.replace(re,"tb");break;case 232:St=Xe.replace(re,"tb-rl");break;case 220:St=Xe.replace(re,"lr");break;default:return Xe}return"-webkit-"+Xe+"-ms-"+St+Xe;case 1017:if(Xe.indexOf("sticky",9)===-1)break;case 975:switch(it=(Xe=ge).length-10,St=(Xe.charCodeAt(it)===33?Xe.substring(0,it):Xe).substring(ge.indexOf(":",7)+1).trim(),an=St.charCodeAt(0)+(St.charCodeAt(7)|0)){case 203:if(111>St.charCodeAt(8))break;case 115:Xe=Xe.replace(St,"-webkit-"+St)+";"+Xe;break;case 207:case 102:Xe=Xe.replace(St,"-webkit-"+(102<an?"inline-":"")+"box")+";"+Xe.replace(St,"-webkit-"+St)+";"+Xe.replace(St,"-ms-"+St+"box")+";"+Xe}return Xe+";";case 938:if(Xe.charCodeAt(5)===45)switch(Xe.charCodeAt(6)){case 105:return St=Xe.replace("-items",""),"-webkit-"+Xe+"-webkit-box-"+St+"-ms-flex-"+St+Xe;case 115:return"-webkit-"+Xe+"-ms-flex-item-"+Xe.replace(ye,"")+Xe;default:return"-webkit-"+Xe+"-ms-flex-line-pack"+Xe.replace("align-content","").replace(ye,"")+Xe}break;case 973:case 989:if(Xe.charCodeAt(3)!==45||Xe.charCodeAt(4)===122)break;case 931:case 953:if(Ne.test(ge)===!0)return(St=ge.substring(ge.indexOf(":")+1)).charCodeAt(0)===115?m(ge.replace("stretch","fill-available"),it,at,ct).replace(":fill-available",":stretch"):Xe.replace(St,"-webkit-"+St)+Xe.replace(St,"-moz-"+St.replace("fill-",""))+Xe;break;case 962:if(Xe="-webkit-"+Xe+(Xe.charCodeAt(5)===102?"-ms-"+Xe:"")+Xe,at+ct===211&&Xe.charCodeAt(13)===105&&0<Xe.indexOf("transform",10))return Xe.substring(0,Xe.indexOf(";",27)+1).replace(N,"$1-webkit-$2")+Xe}return Xe}function g(ge,it){var at=ge.indexOf(it===1?":":"{"),ct=ge.substring(0,it!==3?at:10);return at=ge.substring(at+1,ge.length-1),$e(it!==2?ct:ct.replace(we,"$1"),at,it)}function b(ge,it){var at=m(it,it.charCodeAt(0),it.charCodeAt(1),it.charCodeAt(2));return at!==it+";"?at.replace(Ce," or ($1)").substring(4):"("+it+")"}function _(ge,it,at,ct,Xe,an,St,nn,Sn,Vn){for(var Ln=0,Xr=it,ee;Ln<Re;++Ln)switch(ee=Ie[Ln].call(I,ge,Xr,at,ct,Xe,an,St,nn,Sn,Vn)){case void 0:case!1:case!0:case null:break;default:Xr=ee}if(Xr!==it)return Xr}function E(ge){switch(ge){case void 0:case null:Re=Ie.length=0;break;default:if(typeof ge=="function")Ie[Re++]=ge;else if(typeof ge=="object")for(var it=0,at=ge.length;it<at;++it)E(ge[it]);else Pt=!!ge|0}return E}function P(ge){return ge=ge.prefix,ge!==void 0&&($e=null,ge?typeof ge!="function"?He=1:(He=2,$e=ge):He=0),P}function I(ge,it){var at=ge;if(33>at.charCodeAt(0)&&(at=at.trim()),ce=at,at=[ce],0<Re){var ct=_(-1,it,at,at,Le,ue,0,0,0,0);ct!==void 0&&typeof ct=="string"&&(it=ct)}var Xe=a(Bt,at,it,0,0);return 0<Re&&(ct=_(-2,Xe,at,at,Le,ue,Xe.length,0,0,0),ct!==void 0&&(Xe=ct)),ce="",Q=0,ue=Le=1,Xe}var O=/^\0+/g,R=/[\0\r\f]/g,A=/: */g,F=/zoo|gra/,N=/([,: ])(transform)/g,V=/,\r+?/g,W=/([\t\r\n ])*\f?&/g,$=/@(k\w+)\s*(\S*)\s*/,Z=/::(place)/g,ie=/:(read-only)/g,re=/[svh]\w+-[tblr]{2}/,le=/\(\s*(.*)\s*\)/g,Ce=/([\s\S]*?);/g,ye=/-self|flex-/g,we=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ne=/stretch|:\s*\w+\-(?:conte|avail)/,lt=/([^-])(image-set\()/,ue=1,Le=1,Q=0,He=1,Bt=[],Ie=[],Re=0,$e=null,Pt=0,ce="";return I.use=E,I.set=P,s!==void 0&&P(s),I}var Jh,wE=C(()=>{Jh=WO}),xE,SE,$O=C(()=>{xE={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},SE=xE});function KO(s){var a=Object.create(null);return function(l){return a[l]===void 0&&(a[l]=s(l)),a[l]}}var o3,XO=C(()=>{o3=KO}),ep,EE,z8,qO=C(()=>{XO(),ep=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,EE=o3(function(s){return ep.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),z8=EE}),YO=H(s=>{var a=typeof Symbol=="function"&&Symbol.for,l=a?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,m=a?Symbol.for("react.fragment"):60107,g=a?Symbol.for("react.strict_mode"):60108,b=a?Symbol.for("react.profiler"):60114,_=a?Symbol.for("react.provider"):60109,E=a?Symbol.for("react.context"):60110,P=a?Symbol.for("react.async_mode"):60111,I=a?Symbol.for("react.concurrent_mode"):60111,O=a?Symbol.for("react.forward_ref"):60112,R=a?Symbol.for("react.suspense"):60113,A=a?Symbol.for("react.suspense_list"):60120,F=a?Symbol.for("react.memo"):60115,N=a?Symbol.for("react.lazy"):60116,V=a?Symbol.for("react.block"):60121,W=a?Symbol.for("react.fundamental"):60117,$=a?Symbol.for("react.responder"):60118,Z=a?Symbol.for("react.scope"):60119;function ie(le){if(typeof le=="object"&&le!==null){var Ce=le.$$typeof;switch(Ce){case l:switch(le=le.type,le){case P:case I:case m:case b:case g:case R:return le;default:switch(le=le&&le.$$typeof,le){case E:case O:case N:case F:case _:return le;default:return Ce}}case h:return Ce}}}function re(le){return ie(le)===I}s.AsyncMode=P,s.ConcurrentMode=I,s.ContextConsumer=E,s.ContextProvider=_,s.Element=l,s.ForwardRef=O,s.Fragment=m,s.Lazy=N,s.Memo=F,s.Portal=h,s.Profiler=b,s.StrictMode=g,s.Suspense=R,s.isAsyncMode=function(le){return re(le)||ie(le)===P},s.isConcurrentMode=re,s.isContextConsumer=function(le){return ie(le)===E},s.isContextProvider=function(le){return ie(le)===_},s.isElement=function(le){return typeof le=="object"&&le!==null&&le.$$typeof===l},s.isForwardRef=function(le){return ie(le)===O},s.isFragment=function(le){return ie(le)===m},s.isLazy=function(le){return ie(le)===N},s.isMemo=function(le){return ie(le)===F},s.isPortal=function(le){return ie(le)===h},s.isProfiler=function(le){return ie(le)===b},s.isStrictMode=function(le){return ie(le)===g},s.isSuspense=function(le){return ie(le)===R},s.isValidElementType=function(le){return typeof le=="string"||typeof le=="function"||le===m||le===I||le===b||le===g||le===R||le===A||typeof le=="object"&&le!==null&&(le.$$typeof===N||le.$$typeof===F||le.$$typeof===_||le.$$typeof===E||le.$$typeof===O||le.$$typeof===W||le.$$typeof===$||le.$$typeof===Z||le.$$typeof===V)},s.typeOf=ie}),V8=H((s,a)=>{a.exports=YO()}),CE=H((s,a)=>{var l=V8(),h={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},m={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_={};_[l.ForwardRef]=g,_[l.Memo]=b;function E(V){return l.isMemo(V)?b:_[V.$$typeof]||h}var P=Object.defineProperty,I=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,R=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,F=Object.prototype;function N(V,W,$){if(typeof W!="string"){if(F){var Z=A(W);Z&&Z!==F&&N(V,Z,$)}var ie=I(W);O&&(ie=ie.concat(O(W)));for(var re=E(V),le=E(W),Ce=0;Ce<ie.length;++Ce){var ye=ie[Ce];if(!m[ye]&&!($&&$[ye])&&!(le&&le[ye])&&!(re&&re[ye])){var we=R(W,ye);try{P(V,ye,we)}catch{}}}}return V}a.exports=N});function s0(){return(s0=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s}).apply(this,arguments)}function Y1(s){return typeof s=="function"}function aa(s){return s.displayName||s.name||"Component"}function Fl(s){return s&&typeof s.styledComponentId=="string"}function ho(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];throw new Error("An error occurred. See https://git.io/JUIaE#"+s+" for more information."+(l.length>0?" Args: "+l.join(", "):""))}function j8(s){var a,l="";for(a=Math.abs(s);a>52;a=a/52|0)l=q8(a%52)+l;return(q8(a%52)+l).replace(em,"$1-$2")}function tp(s){for(var a=0;a<s.length;a+=1){var l=s[a];if(Y1(l)&&!Fl(l))return!1}return!0}function id(s){var a,l,h,m,g=s===void 0?za:s,b=g.options,_=b===void 0?za:b,E=g.plugins,P=E===void 0?sd:E,I=new Jh(_),O=[],R=function(N){function V(W){if(W)try{N(W+"}")}catch{}}return function(W,$,Z,ie,re,le,Ce,ye,we,Ne){switch(W){case 1:if(we===0&&$.charCodeAt(0)===64)return N($+";"),"";break;case 2:if(ye===0)return $+"/*|*/";break;case 3:switch(ye){case 102:case 112:return N(Z[0]+$),"";default:return $+(Ne===0?"/*|*/":"")}case-2:$.split("/*|*/}").forEach(V)}}}(function(N){O.push(N)}),A=function(N,V,W){return V===0&&Q8.indexOf(W[l.length])!==-1||W.match(m)?N:"."+a};function F(N,V,W,$){$===void 0&&($="&");var Z=N.replace(Z8,""),ie=V&&W?W+" "+V+" { "+Z+" }":Z;return a=$,l=V,h=new RegExp("\\"+l+"\\b","g"),m=new RegExp("(\\"+l+"\\b){2,}"),I(W||!V?"":V,ie)}return I.use([].concat(P,[function(N,V,W){N===2&&W.length&&W[0].lastIndexOf(l)>0&&(W[0]=W[0].replace(h,A))},R,function(N){if(N===-2){var V=O;return O=[],V}}])),F.hash=P.length?P.reduce(function(N,V){return V.name||ho(15),gs(N,V.name)},5381).toString():"",F}function Z1(){return(0,Ei.useContext)(y3)||J8}function PE(){return(0,Ei.useContext)(b3)||op}function H8(s){var a=(0,Ei.useState)(s.stylisPlugins),l=a[0],h=a[1],m=Z1(),g=(0,Ei.useMemo)(function(){var _=m;return s.sheet?_=s.sheet:s.target&&(_=_.reconstructWithOptions({target:s.target},!1)),s.disableCSSOMInjection&&(_=_.reconstructWithOptions({useCSSOMInjection:!1})),_},[s.disableCSSOMInjection,s.sheet,s.target]),b=(0,Ei.useMemo)(function(){return id({options:{prefix:!s.disableVendorPrefixes},plugins:l})},[s.disableVendorPrefixes,l]);return(0,Ei.useEffect)(function(){(0,Q1.default)(l,s.stylisPlugins)||h(s.stylisPlugins)},[s.stylisPlugins]),Ei.default.createElement(y3.Provider,{value:g},Ei.default.createElement(b3.Provider,{value:b},s.children))}function TE(s){return OE.test(s)?s.replace(LE,t6).replace(_3,"-ms-"):s}function Bl(s,a,l,h){if(Array.isArray(s)){for(var m,g=[],b=0,_=s.length;b<_;b+=1)(m=Bl(s[b],a,l,h))!==""&&(Array.isArray(m)?g.push.apply(g,m):g.push(m));return g}if(n6(s))return"";if(Fl(s))return"."+s.styledComponentId;if(Y1(s)){if(typeof(P=s)!="function"||P.prototype&&P.prototype.isReactComponent||!a)return s;var E=s(a);return Bl(E,a,l,h)}var P;return s instanceof e6?l?(s.inject(l,h),s.getName(h)):s:d3(s)?function I(O,R){var A,F,N=[];for(var V in O)O.hasOwnProperty(V)&&!n6(O[V])&&(Array.isArray(O[V])&&O[V].isCss||Y1(O[V])?N.push(TE(V)+":",O[V],";"):d3(O[V])?N.push.apply(N,I(O[V],V)):N.push(TE(V)+": "+(A=V,(F=O[V])==null||typeof F=="boolean"||F===""?"":typeof F!="number"||F===0||A in SE||A.startsWith("--")?String(F).trim():F+"px")+";"));return R?[R+" {"].concat(N,["}"]):N}(s):s.toString()}function po(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];return Y1(s)||d3(s)?r6(Bl(c3(sd,[s].concat(l)))):l.length===0&&s.length===1&&typeof s[0]=="string"?s:r6(Bl(c3(s,l)))}function Ul(s){return s.replace(T,"-").replace(z,"")}function np(s){return typeof s=="string"&&!0}function G8(s,a,l){var h=s[l];se(a)&&se(h)?ME(h,a):s[l]=a}function ME(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];for(var m=0,g=l;m<g.length;m++){var b=g[m];if(se(b))for(var _ in b)me(_)&&G8(s,b[_],_)}return s}function a3(s,a,l){var h=Fl(s),m=!np(s),g=a.attrs,b=g===void 0?sd:g,_=a.componentId,E=_===void 0?function($,Z){var ie=typeof $!="string"?"sc":Ul($);Ye[ie]=(Ye[ie]||0)+1;var re=ie+"-"+Y("5.3.11"+ie+Ye[ie]);return Z?Z+"-"+re:re}(a.displayName,a.parentComponentId):_,P=a.displayName,I=P===void 0?function($){return np($)?"styled."+$:"Styled("+aa($)+")"}(s):P,O=a.displayName&&a.componentId?Ul(a.displayName)+"-"+a.componentId:a.componentId||E,R=h&&s.attrs?Array.prototype.concat(s.attrs,b).filter(Boolean):b,A=a.shouldForwardProp;h&&s.shouldForwardProp&&(A=a.shouldForwardProp?function($,Z,ie){return s.shouldForwardProp($,Z,ie)&&a.shouldForwardProp($,Z,ie)}:s.shouldForwardProp);var F,N=new DE(l,O,h?s.componentStyle:void 0),V=N.isStatic&&b.length===0,W=function($,Z){return function(ie,re,le,Ce){var ye=ie.attrs,we=ie.componentStyle,Ne=ie.defaultProps,lt=ie.foldedComponentIds,ue=ie.shouldForwardProp,Le=ie.styledComponentId,Q=ie.target,He=function(ct,Xe,an){ct===void 0&&(ct=za);var St=s0({},Xe,{theme:ct}),nn={};return an.forEach(function(Sn){var Vn,Ln,Xr,ee=Sn;for(Vn in Y1(ee)&&(ee=ee(St)),ee)St[Vn]=nn[Vn]=Vn==="className"?(Ln=nn[Vn],Xr=ee[Vn],Ln&&Xr?Ln+" "+Xr:Ln||Xr):ee[Vn]}),[St,nn]}(y(re,(0,Ei.useContext)(De),Ne)||za,re,ye),Bt=He[0],Ie=He[1],Re=function(ct,Xe,an,St){var nn=Z1(),Sn=PE(),Vn=Xe?ct.generateAndInjectStyles(za,nn,Sn):ct.generateAndInjectStyles(an,nn,Sn);return Vn}(we,Ce,Bt),$e=le,Pt=Ie.$as||re.$as||Ie.as||re.as||Q,ce=np(Pt),ge=Ie!==re?s0({},re,{},Ie):re,it={};for(var at in ge)at[0]!=="$"&&at!=="as"&&(at==="forwardedAs"?it.as=ge[at]:(ue?ue(at,z8,Pt):!ce||z8(at))&&(it[at]=ge[at]));return re.style&&Ie.style!==re.style&&(it.style=s0({},re.style,{},Ie.style)),it.className=Array.prototype.concat(lt,Le,Re!==Le?Re:null,re.className,Ie.className).filter(Boolean).join(" "),it.ref=$e,(0,Ei.createElement)(Pt,it)}(F,$,Z,V)};return W.displayName=I,(F=Ei.default.forwardRef(W)).attrs=R,F.componentStyle=N,F.displayName=I,F.shouldForwardProp=A,F.foldedComponentIds=h?Array.prototype.concat(s.foldedComponentIds,s.styledComponentId):sd,F.styledComponentId=O,F.target=h?s.target:s,F.withComponent=function($){var Z=a.componentId,ie=function(le,Ce){if(le==null)return{};var ye,we,Ne={},lt=Object.keys(le);for(we=0;we<lt.length;we++)ye=lt[we],Ce.indexOf(ye)>=0||(Ne[ye]=le[ye]);return Ne}(a,["componentId"]),re=Z&&Z+"-"+(np($)?$:Ul(aa($)));return a3($,s0({},ie,{attrs:R,componentId:re}),l)},Object.defineProperty(F,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=h?ME({},s.defaultProps,$):$}}),Object.defineProperty(F,"toString",{value:function(){return"."+F.styledComponentId}}),m&&(0,u3.default)(F,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),F}function V0(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];var m=po.apply(void 0,[s].concat(l)),g="sc-global-"+Y(JSON.stringify(m)),b=new xt(m,g);function _(P){var I=Z1(),O=PE(),R=(0,Ei.useContext)(De),A=(0,Ei.useRef)(I.allocateGSInstance(g)).current;return I.server&&E(A,P,I,R,O),(0,Ei.useLayoutEffect)(function(){if(!I.server)return E(A,P,I,R,O),function(){return b.removeStyles(A,I)}},[A,P,I,R,O]),null}function E(P,I,O,R,A){if(b.isStatic)b.renderStyles(P,W8,O,A);else{var F=s0({},I,{theme:y(I,R,_.defaultProps)});b.renderStyles(P,F,O,A)}}return Ei.default.memo(_)}var l3,Ei,Q1,u3,c3,d3,sd,za,j0,od,h3,W8,p3,ad,ld,rp,ip,$8,sp,f3,kE,AE,K8,J1,m3,fo,IE,g3,X8,RE,zl,em,q8,gs,Y8,v3,DE,Z8,Q8,y3,b3,J8,op,e6,OE,LE,_3,t6,n6,r6,y,T,z,Y,se,me,De,Ye,rt,xt,ae,ze=C(()=>{l3=q(GO()),Ei=q(Fe()),Q1=q(U8()),wE(),$O(),qO(),u3=q(CE()),c3=function(s,a){for(var l=[s[0]],h=0,m=a.length;h<m;h+=1)l.push(a[h],s[h+1]);return l},d3=function(s){return s!==null&&typeof s=="object"&&(s.toString?s.toString():Object.prototype.toString.call(s))==="[object Object]"&&!(0,l3.typeOf)(s)},sd=Object.freeze([]),za=Object.freeze({}),j0=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",od=typeof window<"u"&&"HTMLElement"in window,h3=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),W8={},p3=function(){function s(l){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=l}var a=s.prototype;return a.indexOfGroup=function(l){for(var h=0,m=0;m<l;m++)h+=this.groupSizes[m];return h},a.insertRules=function(l,h){if(l>=this.groupSizes.length){for(var m=this.groupSizes,g=m.length,b=g;l>=b;)(b<<=1)<0&&ho(16,""+l);this.groupSizes=new Uint32Array(b),this.groupSizes.set(m),this.length=b;for(var _=g;_<b;_++)this.groupSizes[_]=0}for(var E=this.indexOfGroup(l+1),P=0,I=h.length;P<I;P++)this.tag.insertRule(E,h[P])&&(this.groupSizes[l]++,E++)},a.clearGroup=function(l){if(l<this.length){var h=this.groupSizes[l],m=this.indexOfGroup(l),g=m+h;this.groupSizes[l]=0;for(var b=m;b<g;b++)this.tag.deleteRule(m)}},a.getGroup=function(l){var h="";if(l>=this.length||this.groupSizes[l]===0)return h;for(var m=this.groupSizes[l],g=this.indexOfGroup(l),b=g+m,_=g;_<b;_++)h+=this.tag.getRule(_)+`/*!sc*/
`;return h},s}(),ad=new Map,ld=new Map,rp=1,ip=function(s){if(ad.has(s))return ad.get(s);for(;ld.has(rp);)rp++;var a=rp++;return ad.set(s,a),ld.set(a,s),a},$8=function(s){return ld.get(s)},sp=function(s,a){a>=rp&&(rp=a+1),ad.set(s,a),ld.set(a,s)},f3="style["+j0+'][data-styled-version="5.3.11"]',kE=new RegExp("^"+j0+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),AE=function(s,a,l){for(var h,m=l.split(","),g=0,b=m.length;g<b;g++)(h=m[g])&&s.registerName(a,h)},K8=function(s,a){for(var l=(a.textContent||"").split(`/*!sc*/
`),h=[],m=0,g=l.length;m<g;m++){var b=l[m].trim();if(b){var _=b.match(kE);if(_){var E=0|parseInt(_[1],10),P=_[2];E!==0&&(sp(P,E),AE(s,P,_[3]),s.getTag().insertRules(E,h)),h.length=0}else h.push(b)}}},J1=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},m3=function(s){var a=document.head,l=s||a,h=document.createElement("style"),m=function(_){for(var E=_.childNodes,P=E.length;P>=0;P--){var I=E[P];if(I&&I.nodeType===1&&I.hasAttribute(j0))return I}}(l),g=m!==void 0?m.nextSibling:null;h.setAttribute(j0,"active"),h.setAttribute("data-styled-version","5.3.11");var b=J1();return b&&h.setAttribute("nonce",b),l.insertBefore(h,g),h},fo=function(){function s(l){var h=this.element=m3(l);h.appendChild(document.createTextNode("")),this.sheet=function(m){if(m.sheet)return m.sheet;for(var g=document.styleSheets,b=0,_=g.length;b<_;b++){var E=g[b];if(E.ownerNode===m)return E}ho(17)}(h),this.length=0}var a=s.prototype;return a.insertRule=function(l,h){try{return this.sheet.insertRule(h,l),this.length++,!0}catch{return!1}},a.deleteRule=function(l){this.sheet.deleteRule(l),this.length--},a.getRule=function(l){var h=this.sheet.cssRules[l];return h!==void 0&&typeof h.cssText=="string"?h.cssText:""},s}(),IE=function(){function s(l){var h=this.element=m3(l);this.nodes=h.childNodes,this.length=0}var a=s.prototype;return a.insertRule=function(l,h){if(l<=this.length&&l>=0){var m=document.createTextNode(h),g=this.nodes[l];return this.element.insertBefore(m,g||null),this.length++,!0}return!1},a.deleteRule=function(l){this.element.removeChild(this.nodes[l]),this.length--},a.getRule=function(l){return l<this.length?this.nodes[l].textContent:""},s}(),g3=function(){function s(l){this.rules=[],this.length=0}var a=s.prototype;return a.insertRule=function(l,h){return l<=this.length&&(this.rules.splice(l,0,h),this.length++,!0)},a.deleteRule=function(l){this.rules.splice(l,1),this.length--},a.getRule=function(l){return l<this.length?this.rules[l]:""},s}(),X8=od,RE={isServer:!od,useCSSOMInjection:!h3},zl=function(){function s(l,h,m){l===void 0&&(l=za),h===void 0&&(h={}),this.options=s0({},RE,{},l),this.gs=h,this.names=new Map(m),this.server=!!l.isServer,!this.server&&od&&X8&&(X8=!1,function(g){for(var b=document.querySelectorAll(f3),_=0,E=b.length;_<E;_++){var P=b[_];P&&P.getAttribute(j0)!=="active"&&(K8(g,P),P.parentNode&&P.parentNode.removeChild(P))}}(this))}s.registerId=function(l){return ip(l)};var a=s.prototype;return a.reconstructWithOptions=function(l,h){return h===void 0&&(h=!0),new s(s0({},this.options,{},l),this.gs,h&&this.names||void 0)},a.allocateGSInstance=function(l){return this.gs[l]=(this.gs[l]||0)+1},a.getTag=function(){return this.tag||(this.tag=(m=(h=this.options).isServer,g=h.useCSSOMInjection,b=h.target,l=m?new g3(b):g?new fo(b):new IE(b),new p3(l)));var l,h,m,g,b},a.hasNameForId=function(l,h){return this.names.has(l)&&this.names.get(l).has(h)},a.registerName=function(l,h){if(ip(l),this.names.has(l))this.names.get(l).add(h);else{var m=new Set;m.add(h),this.names.set(l,m)}},a.insertRules=function(l,h,m){this.registerName(l,h),this.getTag().insertRules(ip(l),m)},a.clearNames=function(l){this.names.has(l)&&this.names.get(l).clear()},a.clearRules=function(l){this.getTag().clearGroup(ip(l)),this.clearNames(l)},a.clearTag=function(){this.tag=void 0},a.toString=function(){return function(l){for(var h=l.getTag(),m=h.length,g="",b=0;b<m;b++){var _=$8(b);if(_!==void 0){var E=l.names.get(_),P=h.getGroup(b);if(E&&P&&E.size){var I=j0+".g"+b+'[id="'+_+'"]',O="";E!==void 0&&E.forEach(function(R){R.length>0&&(O+=R+",")}),g+=""+P+I+'{content:"'+O+`"}/*!sc*/
`}}}return g}(this)},s}(),em=/(a)(d)/gi,q8=function(s){return String.fromCharCode(s+(s>25?39:97))},gs=function(s,a){for(var l=a.length;l;)s=33*s^a.charCodeAt(--l);return s},Y8=function(s){return gs(5381,s)},v3=Y8("5.3.11"),DE=function(){function s(a,l,h){this.rules=a,this.staticRulesId="",this.isStatic=(h===void 0||h.isStatic)&&tp(a),this.componentId=l,this.baseHash=gs(v3,l),this.baseStyle=h,zl.registerId(l)}return s.prototype.generateAndInjectStyles=function(a,l,h){var m=this.componentId,g=[];if(this.baseStyle&&g.push(this.baseStyle.generateAndInjectStyles(a,l,h)),this.isStatic&&!h.hash)if(this.staticRulesId&&l.hasNameForId(m,this.staticRulesId))g.push(this.staticRulesId);else{var b=Bl(this.rules,a,l,h).join(""),_=j8(gs(this.baseHash,b)>>>0);if(!l.hasNameForId(m,_)){var E=h(b,"."+_,void 0,m);l.insertRules(m,_,E)}g.push(_),this.staticRulesId=_}else{for(var P=this.rules.length,I=gs(this.baseHash,h.hash),O="",R=0;R<P;R++){var A=this.rules[R];if(typeof A=="string")O+=A;else if(A){var F=Bl(A,a,l,h),N=Array.isArray(F)?F.join(""):F;I=gs(I,N+R),O+=N}}if(O){var V=j8(I>>>0);if(!l.hasNameForId(m,V)){var W=h(O,"."+V,void 0,m);l.insertRules(m,V,W)}g.push(V)}}return g.join(" ")},s}(),Z8=/^\s*\/\/.*$/gm,Q8=[":","[",".","#"],y3=Ei.default.createContext(),y3.Consumer,b3=Ei.default.createContext(),J8=(b3.Consumer,new zl),op=id(),e6=function(){function s(a,l){var h=this;this.inject=function(m,g){g===void 0&&(g=op);var b=h.name+g.hash;m.hasNameForId(h.id,b)||m.insertRules(h.id,b,g(h.rules,b,"@keyframes"))},this.toString=function(){return ho(12,String(h.name))},this.name=a,this.id="sc-keyframes-"+a,this.rules=l}return s.prototype.getName=function(a){return a===void 0&&(a=op),this.name+a.hash},s}(),OE=/([A-Z])/,LE=/([A-Z])/g,_3=/^ms-/,t6=function(s){return"-"+s.toLowerCase()},n6=function(s){return s==null||s===!1||s===""},r6=function(s){return Array.isArray(s)&&(s.isCss=!0),s},y=function(s,a,l){return l===void 0&&(l=za),s.theme!==l.theme&&s.theme||a||l.theme},T=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,z=/(^-|-$)/g,Y=function(s){return j8(Y8(s)>>>0)},se=function(s){return typeof s=="function"||typeof s=="object"&&s!==null&&!Array.isArray(s)},me=function(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"},De=Ei.default.createContext(),De.Consumer,Ye={},rt=function(s){return function a(l,h,m){if(m===void 0&&(m=za),!(0,l3.isValidElementType)(h))return ho(1,String(h));var g=function(){return l(h,m,po.apply(void 0,arguments))};return g.withConfig=function(b){return a(l,h,s0({},m,{},b))},g.attrs=function(b){return a(l,h,s0({},m,{attrs:Array.prototype.concat(m.attrs,b).filter(Boolean)}))},g}(a3,s)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(s){rt[s]=rt(s)}),xt=function(){function s(l,h){this.rules=l,this.componentId=h,this.isStatic=tp(l),zl.registerId(this.componentId+1)}var a=s.prototype;return a.createStyles=function(l,h,m,g){var b=g(Bl(this.rules,h,m,g).join(""),""),_=this.componentId+l;m.insertRules(_,_,b)},a.removeStyles=function(l,h){h.clearRules(this.componentId+l)},a.renderStyles=function(l,h,m,g){l>2&&zl.registerId(this.componentId+l),this.removeStyles(l,m),this.createStyles(l,h,m,g)},s}(),function(){function s(){var l=this;this._emitSheetCSS=function(){var h=l.instance.toString();if(!h)return"";var m=J1();return"<style "+[m&&'nonce="'+m+'"',j0+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+h+"</style>"},this.getStyleTags=function(){return l.sealed?ho(2):l._emitSheetCSS()},this.getStyleElement=function(){var h;if(l.sealed)return ho(2);var m=((h={})[j0]="",h["data-styled-version"]="5.3.11",h.dangerouslySetInnerHTML={__html:l.instance.toString()},h),g=J1();return g&&(m.nonce=g),[Ei.default.createElement("style",s0({},m,{key:"sc-0-0"}))]},this.seal=function(){l.sealed=!0},this.instance=new zl({isServer:!0}),this.sealed=!1}var a=s.prototype;return a.collectStyles=function(l){return this.sealed?ho(2):Ei.default.createElement(H8,{sheet:this.instance},l)},a.interleaveWithNodeStream=function(l){return ho(3)},s}(),ae=rt});function tn(){return tn=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s},tn.apply(this,arguments)}var In=C(()=>{});function xn(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}var lr=C(()=>{});function ur(s,a){return ur=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},ur(s,a)}var er=C(()=>{});function Lr(s,a){s.prototype=Object.create(a.prototype),s.prototype.constructor=s,ur(s,a)}var Zs=C(()=>{er()});function Qs(s){return Qs=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},Qs(s)}var Js=C(()=>{});function ti(s){return Function.toString.call(s).indexOf("[native code]")!==-1}var eo=C(()=>{});function la(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H0=C(()=>{});function G0(s,a,l){return la()?G0=Reflect.construct:G0=function(h,m,g){var b=[null];b.push.apply(b,m);var _=Function.bind.apply(h,b),E=new _;return g&&ur(E,g.prototype),E},G0.apply(null,arguments)}var ud=C(()=>{er(),H0()});function Vl(s){var a=typeof Map=="function"?new Map:void 0;return Vl=function(l){if(l===null||!ti(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(l))return a.get(l);a.set(l,h)}function h(){return G0(l,arguments,Qs(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),ur(h,l)},Vl(s)}var cd=C(()=>{Js(),er(),eo(),ud()}),dd=C(()=>{});function rs(s){return s.charAt(0).toUpperCase()+s.slice(1)}function ua(s,a){if(!s)return a.toLowerCase();var l=s.split("-");if(l.length>1)return l.splice(1,0,a),l.reduce(function(m,g){return""+m+rs(g)});var h=s.replace(/([a-z])([A-Z])/g,"$1"+a+"$2");return s===h?""+s+a:h}function ci(s,a){for(var l={},h=0;h<a.length;h+=1)(a[h]||a[h]===0)&&(l[ua(s,AX[h])]=a[h]);return l}function W0(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];var m=l[0],g=l[1],b=g===void 0?m:g,_=l[2],E=_===void 0?m:_,P=l[3],I=P===void 0?b:P,O=[m,b,E,I];return ci(s,O)}function o0(s){return Math.round(s*255)}function H_e(s,a,l){return o0(s)+","+o0(a)+","+o0(l)}function i6(s,a,l,h){if(h===void 0&&(h=H_e),a===0)return h(l,l,l);var m=(s%360+360)%360/60,g=(1-Math.abs(2*l-1))*a,b=g*(1-Math.abs(m%2-1)),_=0,E=0,P=0;m>=0&&m<1?(_=g,E=b):m>=1&&m<2?(_=b,E=g):m>=2&&m<3?(E=g,P=b):m>=3&&m<4?(E=b,P=g):m>=4&&m<5?(_=b,P=g):m>=5&&m<6&&(_=g,P=b);var I=l-g/2,O=_+I,R=E+I,A=P+I;return h(O,R,A)}function G_e(s){if(typeof s!="string")return s;var a=s.toLowerCase();return rL[a]?"#"+rL[a]:s}function ZO(s){if(typeof s!="string")throw new jl(3);var a=G_e(s);if(a.match(IX))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(RX)){var l=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:l}}if(a.match(DX))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(OX)){var h=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:h}}var m=UE.exec(a);if(m)return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10)};var g=LX.exec(a.substring(0,50));if(g)return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:parseFloat(""+g[4])};var b=NX.exec(a);if(b){var _=parseInt(""+b[1],10),E=parseInt(""+b[2],10)/100,P=parseInt(""+b[3],10)/100,I="rgb("+i6(_,E,P)+")",O=UE.exec(I);if(!O)throw new jl(4,a,I);return{red:parseInt(""+O[1],10),green:parseInt(""+O[2],10),blue:parseInt(""+O[3],10)}}var R=FX.exec(a.substring(0,50));if(R){var A=parseInt(""+R[1],10),F=parseInt(""+R[2],10)/100,N=parseInt(""+R[3],10)/100,V="rgb("+i6(A,F,N)+")",W=UE.exec(V);if(!W)throw new jl(4,a,V);return{red:parseInt(""+W[1],10),green:parseInt(""+W[2],10),blue:parseInt(""+W[3],10),alpha:parseFloat(""+R[4])}}throw new jl(5)}function W_e(s){var a=s.red/255,l=s.green/255,h=s.blue/255,m=Math.max(a,l,h),g=Math.min(a,l,h),b=(m+g)/2;if(m===g)return s.alpha!==void 0?{hue:0,saturation:0,lightness:b,alpha:s.alpha}:{hue:0,saturation:0,lightness:b};var _,E=m-g,P=b>.5?E/(2-m-g):E/(m+g);switch(m){case a:_=(l-h)/E+(l<h?6:0);break;case l:_=(h-a)/E+2;break;default:_=(a-l)/E+4;break}return _*=60,s.alpha!==void 0?{hue:_,saturation:P,lightness:b,alpha:s.alpha}:{hue:_,saturation:P,lightness:b}}function QO(s){return W_e(ZO(s))}function tm(s){var a=s.toString(16);return a.length===1?"0"+a:a}function JO(s){return tm(Math.round(s*255))}function $_e(s,a,l){return zE("#"+JO(s)+JO(a)+JO(l))}function NE(s,a,l){return i6(s,a,l,$_e)}function K_e(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return NE(s,a,l);if(typeof s=="object"&&a===void 0&&l===void 0)return NE(s.hue,s.saturation,s.lightness);throw new jl(1)}function X_e(s,a,l,h){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof h=="number")return h>=1?NE(s,a,l):"rgba("+i6(s,a,l)+","+h+")";if(typeof s=="object"&&a===void 0&&l===void 0&&h===void 0)return s.alpha>=1?NE(s.hue,s.saturation,s.lightness):"rgba("+i6(s.hue,s.saturation,s.lightness)+","+s.alpha+")";throw new jl(2)}function eL(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return zE("#"+tm(s)+tm(a)+tm(l));if(typeof s=="object"&&a===void 0&&l===void 0)return zE("#"+tm(s.red)+tm(s.green)+tm(s.blue));throw new jl(6)}function MX(s,a,l,h){if(typeof s=="string"&&typeof a=="number"){var m=ZO(s);return"rgba("+m.red+","+m.green+","+m.blue+","+a+")"}else{if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof h=="number")return h>=1?eL(s,a,l):"rgba("+s+","+a+","+l+","+h+")";if(typeof s=="object"&&a===void 0&&l===void 0&&h===void 0)return s.alpha>=1?eL(s.red,s.green,s.blue):"rgba("+s.red+","+s.green+","+s.blue+","+s.alpha+")"}throw new jl(7)}function tL(s){if(typeof s!="object")throw new jl(8);if(UX(s))return MX(s);if(BX(s))return eL(s);if(VX(s))return X_e(s);if(zX(s))return K_e(s);throw new jl(8)}function kX(s,a,l){return function(){var h=l.concat(Array.prototype.slice.call(arguments));return h.length>=a?s.apply(this,h):kX(s,a,h)}}function FE(s){return kX(s,s.length,[])}function BE(s,a,l){return Math.max(s,Math.min(a,l))}function q_e(s,a){if(a==="transparent")return a;var l=QO(a);return tL(tn({},l,{lightness:BE(0,1,l.lightness-parseFloat(s))}))}function Y_e(s,a){if(a==="transparent")return a;var l=QO(a);return tL(tn({},l,{lightness:BE(0,1,l.lightness+parseFloat(s))}))}function Z_e(s,a){if(a==="transparent")return a;var l=QO(a);return tL(tn({},l,{saturation:BE(0,1,l.saturation+parseFloat(s))}))}function Q_e(s,a){if(a==="transparent")return a;var l=ZO(a),h=typeof l.alpha=="number"?l.alpha:1,m=tn({},l,{alpha:BE(0,1,+(h*100-parseFloat(s)*100).toFixed(2)/100)});return MX(m)}function nL(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];return jX.indexOf(s)>=0&&s?tn({},W0.apply(void 0,[""].concat(l)),{position:s}):W0.apply(void 0,["",s].concat(l))}var jl,AX,rL,IX,RX,DX,OX,UE,LX,NX,FX,zE,BX,UX,zX,VX,s6,w3,VE,Hl,jX,a0=C(()=>{In(),lr(),Zs(),cd(),dd(),jl=function(s){Lr(a,s);function a(l){var h;return h=s.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+l+" for more information.")||this,xn(h)}return a}(Vl(Error)),AX=["Top","Right","Bottom","Left"],rL={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},IX=/^#[a-fA-F0-9]{6}$/,RX=/^#[a-fA-F0-9]{8}$/,DX=/^#[a-fA-F0-9]{3}$/,OX=/^#[a-fA-F0-9]{4}$/,UE=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,LX=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,NX=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,FX=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,zE=function(s){return s.length===7&&s[1]===s[2]&&s[3]===s[4]&&s[5]===s[6]?"#"+s[1]+s[3]+s[5]:s},BX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},UX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&typeof s.alpha=="number"},zX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},VX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&typeof s.alpha=="number"},s6=FE(q_e),w3=FE(Y_e),VE=FE(Z_e),Hl=FE(Q_e),jX=["absolute","fixed","relative","static","sticky"]});function J_e(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function HX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(m){return Object.getOwnPropertyDescriptor(s,m).enumerable})),l.push.apply(l,h)}return l}function nm(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?HX(Object(l),!0).forEach(function(h){J_e(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):HX(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function x3(s,a){if(s==null)return{};var l={},h=Object.keys(s),m,g;for(g=0;g<h.length;g++)m=h[g],!(a.indexOf(m)>=0)&&(l[m]=s[m]);return l}var o6=C(()=>{}),GX,iL,WX=C(()=>{GX=q(Fe()),iL=(0,GX.createContext)({})});function ewe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function $X(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(m){return Object.getOwnPropertyDescriptor(s,m).enumerable})),l.push.apply(l,h)}return l}function S3(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?$X(Object(l),!0).forEach(function(h){ewe(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):$X(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function sL(s,a){if(s==null)return{};var l={},h=Object.keys(s),m,g;for(g=0;g<h.length;g++)m=h[g],!(a.indexOf(m)>=0)&&(l[m]=s[m]);return l}function twe(s,a){if(s){if(typeof s=="string")return KX(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return KX(s,a)}}function KX(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,h=new Array(a);l<a;l++)h[l]=s[l];return h}function XX(s,a){var l;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(l=twe(s))||a&&s&&typeof s.length=="number"){l&&(s=l);var h=0;return function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return l=s[Symbol.iterator](),l.next.bind(l)}var jE=C(()=>{});function nwe(s){return typeof s=="function"}var oL,qX,rwe=C(()=>{oL=q(Fe()),WX(),jE(),qX=function(s,a,l){l===void 0&&(l=a.children);var h=(0,oL.useContext)(iL);if(h.useCreateElement)return h.useCreateElement(s,a,l);if(typeof s=="string"&&nwe(l)){a.children;var m=sL(a,["children"]);return l(m)}return(0,oL.createElement)(s,a,l)}});function iwe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function YX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(m){return Object.getOwnPropertyDescriptor(s,m).enumerable})),l.push.apply(l,h)}return l}function E3(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?YX(Object(l),!0).forEach(function(h){iwe(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):YX(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function swe(s,a){if(s==null)return{};var l={},h=Object.keys(s),m,g;for(g=0;g<h.length;g++)m=h[g],!(a.indexOf(m)>=0)&&(l[m]=s[m]);return l}var ZX=C(()=>{});function owe(s){return typeof s=="object"&&s!=null}var awe=C(()=>{});function aL(s){var a;if(!owe(s))return!1;var l=Object.getPrototypeOf(s);return l==null?!0:((a=l.constructor)===null||a===void 0?void 0:a.toString())===Object.toString()}var QX=C(()=>{awe()});function JX(s,a){for(var l=Object.keys(s),h={},m={},g=0,b=l;g<b.length;g++){var _=b[g];a.indexOf(_)>=0?h[_]=s[_]:m[_]=s[_]}return[h,m]}function eq(s,a){if(a===void 0&&(a=[]),!aL(s.state))return JX(s,a);var l=JX(s,[].concat(a,["state"])),h=l[0],m=l[1],g=h.state,b=swe(h,["state"]);return[E3(E3({},g),b),m]}var lwe=C(()=>{ZX(),QX()});function HE(s,a){if(s===a)return!0;if(!s||!a||typeof s!="object"||typeof a!="object")return!1;var l=Object.keys(s),h=Object.keys(a),m=l.length;if(h.length!==m)return!1;for(var g=0,b=l;g<b.length;g++){var _=b[g];if(s[_]!==a[_])return!1}return!0}var lL=C(()=>{});function tq(s){return s.name==="normalizePropsAreEqualInner"?s:function(a,l){return!aL(a.state)||!aL(l.state)?s(a,l):s(E3(E3({},a.state),a),E3(E3({},l.state),l))}}var uwe=C(()=>{ZX(),QX()});function cwe(s){return(0,uL.forwardRef)(s)}function dwe(s,a){return(0,uL.memo)(s,a)}function a6(s){var a=s.as,l=s.useHook,h=s.memo,m=s.propsAreEqual,g=m===void 0?l==null?void 0:l.unstable_propsAreEqual:m,b=s.keys,_=b===void 0?(l==null?void 0:l.__keys)||[]:b,E=s.useCreateElement,P=E===void 0?qX:E,I=function(O,R){var A=O.as,F=A===void 0?a:A,N=sL(O,["as"]);if(l){var V,W=eq(N,_),$=W[0],Z=W[1],ie=l($,S3({ref:R},Z)),re=ie.wrapElement,le=sL(ie,["wrapElement"]),Ce=((V=F.render)===null||V===void 0?void 0:V.__keys)||F.__keys,ye=Ce&&eq(N,Ce)[0],we=ye?S3(S3({},le),ye):le,Ne=P(F,we);return re?re(Ne):Ne}return P(F,S3({ref:R},N))};return I=cwe(I),h&&(I=dwe(I,g&&tq(g))),I.__keys=_,I.unstable_propsAreEqual=tq(g||HE),I}var uL,l6=C(()=>{uL=q(Fe()),jE(),rwe(),lwe(),lL(),uwe()});function nq(s,a){(0,cL.useDebugValue)(s);var l=(0,cL.useContext)(iL);return l[s]!=null?l[s]:a}var cL,rq=C(()=>{cL=q(Fe()),WX()});function hwe(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var h="use"+s+"Props";(0,iq.useDebugValue)(h);var m=nq(h);return m?m(a,l):l}var iq,pwe=C(()=>{iq=q(Fe()),rq()});function fwe(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var h="use"+s+"Options";(0,sq.useDebugValue)(h);var m=nq(h);return m?S3(S3({},a),m(a,l)):a}var sq,mwe=C(()=>{sq=q(Fe()),rq(),jE()});function gwe(s){return Array.isArray(s)?s:typeof s<"u"?[s]:[]}var vwe=C(()=>{});function u6(s){var a,l,h=gwe(s.compose),m=function(_,E){if(s.useOptions&&(_=s.useOptions(_,E)),s.name&&(_=fwe(s.name,_,E)),s.compose)for(var P=XX(h),I;!(I=P()).done;){var O=I.value;_=O.__useOptions(_,E)}return _},g=function(_,E,P){if(_===void 0&&(_={}),E===void 0&&(E={}),P===void 0&&(P=!1),P||(_=m(_,E)),s.useProps&&(E=s.useProps(_,E)),s.name&&(E=hwe(s.name,_,E)),s.compose)if(s.useComposeOptions&&(_=s.useComposeOptions(_,E)),s.useComposeProps)E=s.useComposeProps(_,E);else for(var I=XX(h),O;!(O=I()).done;){var R=O.value;E=R(_,E,!0)}var A={},F=E||{};for(var N in F)F[N]!==void 0&&(A[N]=F[N]);return A};g.__useOptions=m;var b=h.reduce(function(_,E){return _.push.apply(_,E.__keys||[]),_},[]);return g.__keys=[].concat(b,((a=s.useState)===null||a===void 0?void 0:a.__keys)||[],s.keys||[]),g.unstable_propsAreEqual=s.propsAreEqual||((l=h[0])===null||l===void 0?void 0:l.unstable_propsAreEqual)||HE,g}var c6=C(()=>{q(Fe()),pwe(),jE(),mwe(),lL(),vwe()});function oq(s,a){a===void 0&&(a=null),s&&(typeof s=="function"?s(a):s.current=a)}function aq(s,a){return(0,lq.useMemo)(function(){return s==null&&a==null?null:function(l){oq(s,l),oq(a,l)}},[s,a])}var lq,uq=C(()=>{lq=q(Fe())});function dL(s){if(s.tagName==="BUTTON")return!0;if(s.tagName==="INPUT"){var a=s;return cq.indexOf(a.type)!==-1}return!1}var cq,hL=C(()=>{cq=["button","color","file","image","reset","submit"]}),pL=C(()=>{}),ywe=C(()=>{pL(),q(Fe())}),GE=C(()=>{pL(),q(Fe()),ywe()});function dq(s){return s?s.ownerDocument||s:document}var hq=C(()=>{});function bwe(s){return s&&dq(s).defaultView||pq}var pq,_we=C(()=>{hq();try{pq=window}catch{}});function wwe(){var s=bwe();return!!(typeof s<"u"&&s.document&&s.document.createElement)}var WE,fL=C(()=>{_we(),WE=wwe()}),mL,gL,vL=C(()=>{mL=q(Fe()),fL(),gL=WE?mL.useLayoutEffect:mL.useEffect});function C3(s){var a=(0,fq.useRef)(s);return gL(function(){a.current=s}),a}var fq,mq=C(()=>{fq=q(Fe()),vL()});function xwe(s){return s.target===s.currentTarget}var Swe=C(()=>{});function Ewe(s){var a=dq(s),l=a.activeElement;return l!=null&&l.nodeName?l:null}var Cwe=C(()=>{hq()});function gq(s,a){return s===a||s.contains(a)}var vq=C(()=>{});function Pwe(s){var a=Ewe(s);if(!a)return!1;if(gq(s,a))return!0;var l=a.getAttribute("aria-activedescendant");return l?l===s.id?!0:!!s.querySelector("#"+l):!1}var Twe=C(()=>{Cwe(),vq()});function Mwe(s){return!gq(s.currentTarget,s.target)}var kwe=C(()=>{vq()});function $E(s){return WE?window.navigator.userAgent.indexOf(s)!==-1:!1}var Awe=C(()=>{fL()});function Iwe(s,a){return"matches"in s?s.matches(a):"msMatchesSelector"in s?s.msMatchesSelector(a):s.webkitMatchesSelector(a)}var Rwe=C(()=>{});function Dwe(s){var a=s;return a.offsetWidth>0||a.offsetHeight>0||s.getClientRects().length>0}function Owe(s){return Iwe(s,yq)&&Dwe(s)}var yq,Lwe=C(()=>{Rwe(),yq="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),bq,KE,_q=C(()=>{o6(),l6(),c6(),lL(),bq=["unstable_system"],KE=u6({name:"Role",keys:bq,propsAreEqual:function(s,a){var l=s.unstable_system,h=x3(s,["unstable_system"]),m=a.unstable_system,g=x3(a,["unstable_system"]);return l!==m&&!HE(l,m)?!1:HE(h,g)}}),a6({as:"div",useHook:KE})});function wq(s){!Pwe(s)&&Owe(s)&&s.focus()}function Nwe(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.tagName==="A"}function Fwe(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"}function Bwe(s,a,l,h){return s?a&&!l?-1:void 0:a?h:h||0}function yL(s,a){return(0,P3.useCallback)(function(l){var h;(h=s.current)===null||h===void 0||h.call(s,l),!l.defaultPrevented&&a&&(l.stopPropagation(),l.preventDefault())},[s,a])}var P3,xq,Sq,bL,Uwe=C(()=>{o6(),l6(),c6(),P3=q(Fe()),uq(),hL(),GE(),mq(),vL(),Twe(),kwe(),Awe(),Lwe(),_q(),xq=["disabled","focusable"],Sq=$E("Mac")&&!$E("Chrome")&&($E("Safari")||$E("Firefox")),bL=u6({name:"Tabbable",compose:KE,keys:xq,useOptions:function(s,a){var l=a.disabled;return nm({disabled:l},s)},useProps:function(s,a){var l=a.ref,h=a.tabIndex,m=a.onClickCapture,g=a.onMouseDownCapture,b=a.onMouseDown,_=a.onKeyPressCapture,E=a.style,P=x3(a,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),I=(0,P3.useRef)(null),O=C3(m),R=C3(g),A=C3(b),F=C3(_),N=!!s.disabled&&!s.focusable,V=(0,P3.useState)(!0),W=V[0],$=V[1],Z=(0,P3.useState)(!0),ie=Z[0],re=Z[1],le=s.disabled?nm({pointerEvents:"none"},E):E;gL(function(){var lt=I.current;lt&&(Nwe(lt)||$(!1),Fwe(lt)||re(!1))},[]);var Ce=yL(O,s.disabled),ye=yL(R,s.disabled),we=yL(F,s.disabled),Ne=(0,P3.useCallback)(function(lt){var ue;(ue=A.current)===null||ue===void 0||ue.call(A,lt);var Le=lt.currentTarget;if(!lt.defaultPrevented&&Sq&&!Mwe(lt)&&dL(Le)){var Q=requestAnimationFrame(function(){Le.removeEventListener("mouseup",He,!0),wq(Le)}),He=function(){cancelAnimationFrame(Q),wq(Le)};Le.addEventListener("mouseup",He,{once:!0,capture:!0})}},[]);return nm({ref:aq(I,l),style:le,tabIndex:Bwe(N,W,ie,h),disabled:N&&ie?!0:void 0,"aria-disabled":s.disabled?!0:void 0,onClickCapture:Ce,onMouseDownCapture:ye,onMouseDown:Ne,onKeyPressCapture:we},P)}}),a6({as:"div",useHook:bL})});function zwe(s){var a=s.currentTarget;return s.isTrusted?dL(a)||a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.tagName==="A"||a.tagName==="SELECT":!1}var XE,Eq,_L,Vwe=C(()=>{o6(),l6(),c6(),XE=q(Fe()),hL(),GE(),mq(),Swe(),Uwe(),Eq=["unstable_clickOnEnter","unstable_clickOnSpace"],_L=u6({name:"Clickable",compose:bL,keys:Eq,useOptions:function(s){var a=s.unstable_clickOnEnter,l=a===void 0?!0:a,h=s.unstable_clickOnSpace,m=h===void 0?!0:h,g=x3(s,["unstable_clickOnEnter","unstable_clickOnSpace"]);return nm({unstable_clickOnEnter:l,unstable_clickOnSpace:m},g)},useProps:function(s,a){var l=a.onKeyDown,h=a.onKeyUp,m=x3(a,["onKeyDown","onKeyUp"]),g=(0,XE.useState)(!1),b=g[0],_=g[1],E=C3(l),P=C3(h),I=(0,XE.useCallback)(function(R){var A;if((A=E.current)===null||A===void 0||A.call(E,R),!R.defaultPrevented&&!s.disabled&&!R.metaKey&&xwe(R)){var F=s.unstable_clickOnEnter&&R.key==="Enter",N=s.unstable_clickOnSpace&&R.key===" ";if(F||N){if(zwe(R))return;R.preventDefault(),F?R.currentTarget.click():N&&_(!0)}}},[s.disabled,s.unstable_clickOnEnter,s.unstable_clickOnSpace]),O=(0,XE.useCallback)(function(R){var A;if((A=P.current)===null||A===void 0||A.call(P,R),!R.defaultPrevented&&!s.disabled&&!R.metaKey){var F=s.unstable_clickOnSpace&&R.key===" ";b&&F&&(_(!1),R.currentTarget.click())}},[s.disabled,s.unstable_clickOnSpace,b]);return nm({"data-active":b||void 0,onKeyDown:I,onKeyUp:O},m)}}),a6({as:"button",memo:!0,useHook:_L})}),d6,Cq,Pq,Tq,jwe=C(()=>{o6(),l6(),c6(),d6=q(Fe()),uq(),hL(),GE(),Vwe(),Cq=[],Pq=u6({name:"Button",compose:_L,keys:Cq,useProps:function(s,a){var l=a.ref,h=x3(a,["ref"]),m=(0,d6.useRef)(null),g=(0,d6.useState)(void 0),b=g[0],_=g[1],E=(0,d6.useState)("button"),P=E[0],I=E[1];return(0,d6.useEffect)(function(){var O=m.current;O&&(dL(O)||(O.tagName!=="A"&&_("button"),I(void 0)))},[]),nm({ref:aq(m,l),role:b,type:P},h)}}),Tq=a6({as:"button",memo:!0,useHook:Pq})}),Mq,kq,Aq,Hwe=C(()=>{o6(),l6(),c6(),_q(),Mq=[],kq=u6({name:"Group",compose:KE,keys:Mq,useProps:function(s,a){return nm({role:"group"},a)}}),Aq=a6({as:"div",useHook:kq})});function Gwe(){return WE?document.body:null}var Iq,T3,Wwe=C(()=>{Iq=q(Fe()),vL(),fL(),q(Ll()),T3=(0,Iq.createContext)(Gwe())}),wL,$we=C(()=>{typeof window<"u"&&(wL={get passive(){}},window.addEventListener("testPassive",null,wL),window.removeEventListener("testPassive",null,wL))}),rm=C(()=>{q(Fe()),GE(),jwe(),Hwe(),q(Ll()),Wwe(),$we(),pL()});function Sr(s){let a=(0,xL.useMemo)(()=>{let m=s;return{get current(){return m},set current(g){m=g,h(g)}}},[]),[l,h]=(0,xL.useState)(()=>s);return[a,l]}var xL,Nr=C(()=>{xL=q(Fe())});function Kwe(s){return a=>Fo.default.createElement(Fq,null,Fo.default.createElement(s,B({},a)))}var Fo,Rq,Dq,Rr,M3,Oq,Lq,Nq,SL,EL,Fq,Fr=C(()=>{a0(),ze(),ze(),Fo=q(Fe()),Rq=q(Ll()),rm(),Nr(),Rr=po(Dq||(Dq=J([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),M3={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return w3(.6,M3.panel.bg)}}}}}},Lq=typeof window<"u"?V0(Oq||(Oq=J([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},SL=ae.div(Nq||(Nq=J([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),EL=s=>Fo.default.createElement(H8,{disableVendorPrefixes:!0,target:s.target},Fo.default.createElement(Fo.default.Fragment,null,Fo.default.createElement(Lq,null),s.children)),Fq=s=>{let[a,l]=(0,Fo.useState)(null),[h,m]=(0,Fo.useState)(null);(0,Fo.useLayoutEffect)(()=>{if(!a)return;let{parentNode:_}=a;if(!_)return;let E=_.shadowRoot?parent.shadowRoot:_.attachShadow({mode:"open"});m(E)},[a]);let[g,b]=Sr(void 0);return h?Rq.default.createPortal(Fo.default.createElement(EL,{target:h},Fo.default.createElement(Fo.default.Fragment,null,Fo.default.createElement(SL,{ref:g}),Fo.default.createElement(T3.Provider,{value:b},s.children))),h):Fo.default.createElement("template",{ref:l,"shadow-root":"open"},s.children)}}),k3,Bq,Uq,ap,zq,h6,Vq,jq,qE,Hq,CL,Gu,hd=C(()=>{Fr(),ze(),k3={get outlinePanel(){return 1},get propsPanel(){return k3.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},Bq=M3.panel.bg,ap=ae.span(Uq||(Uq=J([`
  white-space: nowrap;
`]))),h6=ae.span(zq||(zq=J([`
  white-space: nowrap;
  color: `,`;
`])),M3.panel.head.punctuation.color),jq=ae.div(Vq||(Vq=J([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),Bq),qE=18,CL=ae.div(Hq||(Hq=J([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),qE),Gu=100}),Gq,Gl,A3=C(()=>{Gq=()=>{},Gl=Gq});function Xwe(s){return PL.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),PL.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var PL,TL,qwe=C(()=>{PL=q(Fe()),TL=Xwe});function Ywe(s){return ML.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),ML.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var ML,Wq,Zwe=C(()=>{ML=q(Fe()),Wq=Ywe});function Qwe(s){return kL.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),kL.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var kL,$q,Jwe=C(()=>{kL=q(Fe()),$q=Qwe});function exe(s){return AL.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),AL.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var AL,Kq,txe=C(()=>{AL=q(Fe()),Kq=exe});function nxe(s){return IL.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),IL.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var IL,RL,rxe=C(()=>{IL=q(Fe()),RL=nxe});function ixe(s){return DL.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),DL.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var DL,YE,sxe=C(()=>{DL=q(Fe()),YE=ixe});function oxe(s){return OL.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),OL.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var OL,LL,axe=C(()=>{OL=q(Fe()),LL=oxe}),p6=C(()=>{qwe(),Zwe(),Jwe(),txe(),rxe(),sxe(),axe()}),Wu,Xq,ZE,qq,Yq,Zq,Qq,Jq,eY,tY,nY,rY,iY,sY,oY,aY,lY,uY,f6,QE=C(()=>{Wu=q(Fe()),ze(),A3(),Fr(),p6(),ZE=ae.li(Xq||(Xq=J([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),Yq=ae.div(qq||(qq=J([""]))),Qq=ae(Yq)(Zq||(Zq=J([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Rr),eY=po(Jq||(Jq=J([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),nY=ae.span(tY||(tY=J([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),eY,Rr),iY=ae.div(rY||(rY=J([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),oY=ae.span(sY||(sY=J([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),ZE),lY=ae.ul(aY||(aY=J([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),ZE),uY=({label:s,children:a,depth:l,select:h,selectionStatus:m,labelDecoration:g,collapsed:b=!1,setIsCollapsed:_})=>{let E=a!==void 0;return Wu.default.createElement(ZE,{style:{"--depth":l},className:b?"collapsed":""},Wu.default.createElement(Qq,{className:m,onClick:h??Gl,"data-header":!0},Wu.default.createElement(iY,null,E?Wu.default.createElement(oY,{onClick:P=>{P.stopPropagation(),P.preventDefault(),_==null||_(!b)}},Wu.default.createElement(Wq,null)):Wu.default.createElement(RL,null)),Wu.default.createElement(nY,null,Wu.default.createElement("span",null,s)),g),E&&Wu.default.createElement(lY,null,a))},f6=uY});function lxe(s){return Object.keys(s)}function uxe(s){return Object.keys((0,$u.val)(s.sheetTemplatesP))}function cxe(){let s=No(lp().filter(a=>pn(a)||wt(a)).map(a=>wt(a)?a.sheet:a))[0];if(s)return s.getSequence()}var $u,lp,cY,up=C(()=>{$u=zt,nt(),fi(),Me(),lp=()=>{var s;let a=(0,$u.val)(de().projectsP),l=((s=(0,$u.val)(de().atomP.historic.panels.outlinePanel.selection))!=null?s:[]).map(h=>{let m=a[h.projectId];if(!m)return;if(h.type==="Project")return m;if(!(0,$u.val)(m.sheetTemplatesP[h.sheetId]))return;let g=cY(m,h.sheetId);if(!g)return;if(h.type==="Sheet")return g;let b=(0,$u.val)(g.objectsP[h.objectKey]);if(b)return b});return No(l.filter(h=>typeof h<"u"))},cY=(s,a)=>{let l=de().atomP.historic.projects.stateByProjectId[s.address.projectId],h=(0,$u.val)(l.stateBySheetId[a].selectedInstanceId),m=(0,$u.val)(s.sheetTemplatesP[a]);if(m){if(h)return(0,$u.val)(m.instancesP[h]);{let g=(0,$u.val)(m.instancesP);return g[lxe(g)[0]]}}}}),dY,hY,dxe=C(()=>{Me(),dY=q(Fe()),QE(),Pn(),up(),hY=({sheetObject:s,depth:a,overrideLabel:l})=>{let h=()=>{de().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},m=Qn(()=>lp(),[]);return dY.default.createElement(f6,{select:h,label:l??s.address.objectKey,depth:a,selectionStatus:m.includes(s)?"selected":"not-selected"})}});function NL(s){var a;let l=s.type==="namespace"?"namespace:".concat(s.sheet.address.sheetId,":").concat(s.path.join("/")):s.type==="Theatre_Project"?"project":s.type==="Theatre_Sheet"?"sheetInstance:".concat(s.address.sheetId,":").concat(s.address.sheetInstanceId):"unknown",h=s.type==="namespace"?s.sheet.address.projectId:s.address.projectId,m=(a=ir(de().atomP.ahistoric.projects.stateByProjectId[h].collapsedItemsInOutline[l]))!=null?a:!1,g=(0,pY.useCallback)(b=>{de().transaction(({stateEditors:_})=>{_.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:h,isCollapsed:b,itemKey:l})})},[l]);return{collapsed:m,setCollapsed:g}}var pY,FL=C(()=>{pY=q(Fe()),Me(),Pn()});function fY(s){return Ku.default.createElement(Ku.default.Fragment,null,[...s.namespace.entries()].map(([a,{object:l,nested:h}])=>Ku.default.createElement(hxe,{key:a,label:a,object:l,nested:h,visualIndentation:s.visualIndentation,path:s.path,sheet:s.sheet})))}function hxe(s){let{nested:a,label:l,object:h,sheet:m}=s,{collapsed:g,setCollapsed:b}=NL({type:"namespace",sheet:m,path:[...s.path,l]}),_=a&&Ku.default.createElement(fY,{namespace:a,path:[...s.path,l],key:"namespaceTree("+l+")",visualIndentation:s.visualIndentation+1,sheet:m}),E=h&&Ku.default.createElement(hY,{depth:s.visualIndentation,key:"objectPath("+h.address.objectKey+")",sheetObject:h,overrideLabel:l});return Ku.default.createElement(Ku.default.Fragment,{key:"".concat(l," - ").concat(s.visualIndentation)},E,_&&Ku.default.createElement(f6,{selectionStatus:"not-selectable",label:l,key:"baseItem(".concat(l,")"),depth:s.visualIndentation,children:_,collapsed:g,setIsCollapsed:b}))}function mY(s,a,l=pxe(a)){let[h,...m]=l,g=s.get(h);g||(g={nested:void 0,object:void 0,path:[...l]},s.set(h,g)),m.length===0?(console.assert(!g.object,"expect not to have existing object with same name",{existing:g,object:a}),g.object=a):(g.nested||(g.nested=new Map),mY(g.nested,a,m))}function pxe(s){let a=BL.get(s);return a||(a=s.address.objectKey.split(_Y),console.assert(a.length>0,"expected not empty"),BL.set(s,a)),a}var gY,Ku,vY,yY,bY,_Y,BL,fxe=C(()=>{Pn(),gY=zt,Ku=q(Fe()),ze(),dxe(),QE(),FL(),ae.li(vY||(vY=J([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),yY=({sheet:s,depth:a})=>Qn(()=>{let l=(0,gY.val)(s.objectsP),h=Object.values(l).filter(g=>g!=null),m=new Map;return h.forEach(g=>{mY(m,g)}),Ku.default.createElement(fY,{namespace:m,visualIndentation:a,path:[],sheet:s})},[s,a]),bY=yY,_Y=/\s*\/\s*/g,BL=new WeakMap}),I3,wY,xY,SY,EY,CY,PY,mxe=C(()=>{Me(),up(),Pn(),I3=q(Fe()),ze(),fxe(),QE(),FL(),xY=ae.div(wY||(wY=J([`
  display: flex;
`]))),ae.li(SY||(SY=J([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),CY=ae.div(EY||(EY=J([""]))),PY=({sheet:s,depth:a})=>{let{collapsed:l,setCollapsed:h}=NL(s),m=(0,I3.useCallback)(()=>{de().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},[s]);return Qn(()=>{let g=lp();return I3.default.createElement(f6,{depth:a,select:m,setIsCollapsed:h,collapsed:l,selectionStatus:g.some(b=>b===s)?"selected":g.some(b=>b.type==="Theatre_SheetObject"&&b.sheet===s)?"descendant-is-selected":"not-selected",label:I3.default.createElement(xY,null,s.address.sheetId,": ",s.address.sheetInstanceId)},I3.default.createElement(CY,null,I3.default.createElement(bY,{depth:a+1,sheet:s,key:"objectList"+s.address.sheetInstanceId})))},[a,l])}}),UL,R3,TY,MY,kY,AY,gxe=C(()=>{Pn(),UL=zt,R3=q(Fe()),ze(),mxe(),ae.div(TY||(TY=J([`
  display: flex;
`]))),ae.li(MY||(MY=J([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),ae.div(kY||(kY=J([""]))),AY=({sheetId:s,depth:a,project:l})=>Qn(()=>{let h=(0,UL.val)(l.sheetTemplatesP[s]);if(!h)return R3.default.createElement(R3.default.Fragment,null);let m=(0,UL.val)(h.instancesP);return R3.default.createElement(R3.default.Fragment,null,Object.entries(m).map(([g,b])=>R3.default.createElement(PY,{key:b.address.sheetInstanceId,sheet:b,depth:a})))},[a,s,l])}),JE,IY,RY,vxe=C(()=>{up(),Pn(),JE=q(Fe()),gxe(),IY=({project:s,depth:a})=>Qn(()=>{if(!s)return null;let l=uxe(s);return JE.default.createElement(JE.default.Fragment,null,l.map(h=>JE.default.createElement(AY,{depth:a,sheetId:h,key:"sheet-".concat(h),project:s})))},[s,a]),RY=IY}),m6,DY,OY,LY,NY,FY,yxe=C(()=>{m6=q(Fe()),QE(),vxe(),Me(),Pn(),up(),DY=zt,ze(),FL(),LY=ae.div(OY||(OY=J([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),NY=({depth:s,project:a})=>{let l=Qn(()=>lp(),[]),h=Qn(()=>{let _=a.address.projectId,E=(0,DY.val)(de().atomP.ephemeral.coreByProject[_].loadingState);return(E==null?void 0:E.type)==="browserStateIsNotBasedOnDiskState"},[a]),m=(0,m6.useCallback)(()=>{de().transaction(({stateEditors:_})=>{_.studio.historic.panels.outline.selection.set([a])})},[a]),{collapsed:g,setCollapsed:b}=NL(a);return m6.default.createElement(f6,{depth:s,label:a.address.projectId,setIsCollapsed:b,collapsed:g,labelDecoration:h?m6.default.createElement(LY,null,"Has Conflicts"):null,children:m6.default.createElement(RY,{project:a,depth:s+1}),selectionStatus:l.includes(a)?"selected":l.some(_=>_.address.projectId===a.address.projectId)?"descendant-is-selected":"not-selected",select:m})},FY=NY}),BY,zL,UY,zY,VY,jY,bxe=C(()=>{BY=zt,Pn(),Me(),zL=q(Fe()),ze(),yxe(),zY=ae.ul(UY||(UY=J([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),VY=s=>Qn(()=>{let a=(0,BY.val)(de().projectsP);return zL.default.createElement(zY,null,Object.keys(a).map(l=>{let h=a[l];return zL.default.createElement(FY,{depth:0,project:h,key:"projectListItem-".concat(l)})}))},[]),jY=VY});function HY(s){let[a,l]=(0,VL.useState)(!1);return(0,VL.useEffect)(()=>{let h=g=>{let b=a?200:50,_=56,E=s==="left"?g.x<b:g.x>window.innerWidth-b;E&&(E=g.y>_),l(!!E)};document.addEventListener("mousemove",h);let m=()=>{l(!1)};return document.addEventListener("mouseleave",m),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseleave",m)}},[a]),a}var VL,GY=C(()=>{VL=q(Fe())}),g6,D3,jL,WY,$Y,KY,XY,eC,v6,qY,_xe=C(()=>{g6=q(Fe()),ze(),hd(),bxe(),Pn(),Me(),GY(),D3=zt,Fr(),jL="44px",$Y=ae.div(WY||(WY=J([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),Rr,k3.outlinePanel,jL,jL,({pin:s})=>s?"block":"none"),KY=()=>{var s;let a=(s=ir(de().atomP.ahistoric.pinOutline))!=null?s:!0,l=ir(qY),h=HY("left");return(0,g6.useLayoutEffect)(()=>{eC.set(h)},[h]),(0,g6.useEffect)(()=>()=>{v6.set(!1),eC.set(!1)},[]),g6.default.createElement($Y,{pin:a||l,onMouseEnter:()=>{v6.set(!0)},onMouseLeave:()=>{v6.set(!1)}},g6.default.createElement(jY,null))},XY=KY,eC=new D3.Atom(!1),v6=new D3.Atom(!1),qY=(0,D3.prism)(()=>{let s=(0,D3.val)(v6.prism),a=(0,D3.val)(eC.prism);return s||a})}),YY,ZY,QY,wxe=C(()=>{ze(),ZY=ae.input.attrs({type:"checkbox"})(YY||(YY=J([`
  outline: none;
`]))),QY=ZY});function xxe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let m=(0,HL.useCallback)(g=>{a.permanentlySetValue(!!g.target.checked)},[s,a]);return HL.default.createElement(eZ,{checked:l,onChange:m,autoFocus:h})}var HL,JY,eZ,tZ,Sxe=C(()=>{HL=q(Fe()),ze(),wxe(),eZ=ae(QY)(JY||(JY=J([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),tZ=xxe});function tC(s){return a=>{s.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var nC=C(()=>{});function GL(s,a,l){(0,nZ.useEffect)(()=>{if(!s||l===!1)return;let h=Array.isArray(s)?s.filter(g=>g):[s],m=g=>{h.every(b=>!g.composedPath().includes(b))&&a(g)};return window.addEventListener("mousedown",m,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",m,{capture:!0,passive:!1})}},[s,l])}var nZ,WL=C(()=>{nZ=q(Fe())}),pd,rZ,fd,iZ,sZ,oZ,aZ,$L,lZ,$0,uZ,l0=C(()=>{pd=q(Fe()),ze(),rZ="pointer-root",fd="--lockedCursor",sZ=ae.div(iZ||(iZ=J([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),aZ=ae.div(oZ||(oZ=J([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),$L=(0,pd.createContext)({}),lZ=s=>{var a,l,h,m;let[g,b]=(0,pd.useState)([]),_=(0,pd.useMemo)(()=>({getLock:(P,I)=>{let O={className:P,cursor:I};return b(R=>[...R,O]),()=>{b(R=>R.filter(A=>A!==O))}}}),[]),E=(l=(a=g[0])==null?void 0:a.cursor)!=null?l:"";return pd.default.createElement($L.Provider,{value:_},pd.default.createElement(sZ,{id:rZ,className:((m=(h=g[0])==null?void 0:h.className)!=null?m:"normal")+" "+s.className},pd.default.createElement(aZ,{style:{cursor:E,[fd]:E}},s.children)))},$0=(s,a,l)=>{let h=(0,pd.useContext)($L);(0,pd.useLayoutEffect)(()=>{if(s)return h.getLock(a,l)},[s,a,l])},uZ=lZ});function cZ(s){return y6.default.createElement(KL.Provider,{value:s.logger},s.children)}function cp(s,a){let l=(0,y6.useContext)(KL);return(0,y6.useMemo)(()=>s?l.named(s,a):l,[l,s,a])}var y6,KL,dp=C(()=>{y6=q(Fe()),KL=y6.default.createContext(null)});function Exe(){let s=cp("PointerCapturing"),a=Wl.default.useRef(null),l=()=>a.current!=null;return h=>{let m,g=b=>(m=b,a.current=b,b);return{capturing:{capturePointer(b){if(s._debug("Capturing pointer",{forDebugName:h,reason:b}),a.current!=null)throw new Error('"'.concat(h,'" attempted capturing pointer for "').concat(b,'" while already captured by "').concat(a.current.debugOwnerName,'" for "').concat(a.current.debugReason,'"'));let _=g({debugOwnerName:h,debugReason:b});return{isCapturing(){return _===a.current},release(){return _===a.current?(s._debug("Releasing pointer",{forDebugName:h,reason:b}),g(null),!0):!1}}},isPointerBeingCaptured:l},forceRelease(){m&&a.current===m&&(s._debug("Force releasing pointer",{localCapture:m}),g(null))}}}}function Cxe(s){let a=Exe();return Wl.default.createElement(XL.Provider,{value:a},Wl.default.createElement(hZ,{children:s.children}))}function dZ(s){let a=(0,Wl.useContext)(XL),l=(0,Wl.useMemo)(()=>a(s),[s,a]);return(0,Wl.useEffect)(()=>()=>{l.forceRelease()},[l]),l.capturing}var Wl,XL,hZ,qL=C(()=>{Wl=q(Fe()),dp(),XL=Wl.default.createContext(null),hZ=Wl.default.memo(({children:s})=>Wl.default.createElement(Wl.default.Fragment,null,s))}),YL,Pxe=C(()=>{YL=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function ji(s,a){let l=(0,O3.useRef)(a);l.current=a;let h=a.shouldPointerLock&&!YL,m=(0,O3.useRef)({domDragStarted:!1}),{capturePointer:g}=dZ("useDrag for ".concat(a.debugName)),b=(0,O3.useRef)({onDrag:Gl,onDragEnd:Gl,onClick:Gl}),_=(0,O3.useRef)(),[E,P]=Sr(!1);return(0,O3.useLayoutEffect)(()=>{if(!s)return;let I=()=>{let $=m.current.domDragStarted&&m.current.detection.detected;E.current!==$&&(E.current=$)},O=$=>{if(!m.current.domDragStarted)return;let Z=m.current;if(!Txe($,Z)&&(Z.detection.detected||(Z.detection.totalDistanceMoved+=Math.abs($.movementY)+Math.abs($.movementX),Z.detection.totalDistanceMoved>pZ&&(h&&s.requestPointerLock(),Z.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},I())),Z.detection.detected)){Z.detection.dragEventCount+=1;let{dragMovement:ie}=Z.detection;if(h)ie.x+=$.movementX,ie.y+=$.movementY;else{let{startPos:re}=Z;ie.x=$.screenX-re.x,ie.y=$.screenY-re.y}b.current.onDrag(ie.x,ie.y,$,$.movementX,$.movementY)}},R=$=>{if(F(),!m.current.domDragStarted)return;let Z=m.current.detection.detected;m.current={domDragStarted:!1},a.shouldPointerLock&&!YL&&document.exitPointerLock(),b.current.onDragEnd(Z),window.focus(),Z||b.current.onClick($),I()},A=()=>{document.addEventListener("mousemove",O),document.addEventListener("mouseup",R)},F=()=>{var $;($=_.current)==null||$.release(),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",R)},N=$=>{l.current.disabled||m.current.domDragStarted&&m.current.detection.detected&&(l.current.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),m.current.detection={detected:!1,totalDistanceMoved:0},I())},V=$=>{var Z,ie,re,le;(Z=_.current)==null||Z.release();let Ce=l.current;if(Ce.disabled===!0||!((ie=Ce.buttons)!=null?ie:[0]).includes($.button))return;let ye=Ce.onDragStart($);ye!==!1&&(b.current.onDrag=ye.onDrag,b.current.onDragEnd=(re=ye.onDragEnd)!=null?re:Gl,b.current.onClick=(le=ye.onClick)!=null?le:Gl,_.current=g("Drag start"),Ce.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),m.current={domDragStarted:!0,startPos:{x:$.screenX,y:$.screenY},detection:{detected:!1,totalDistanceMoved:0}},I(),A())},W=$=>{V($)};return s.addEventListener("mousedown",W),s.addEventListener("click",N),()=>{var $,Z;F(),s.removeEventListener("mousedown",W),s.removeEventListener("click",N),m.current.domDragStarted&&((Z=($=b.current).onDragEnd)==null||Z.call($,m.current.detection.detected)),m.current={domDragStarted:!1},I()}},[s]),$0(P&&!!a.lockCSSCursorTo,"dragging",a.lockCSSCursorTo),[P]}function Txe(s,a){return(!a.detection.detected||a.detection.detected&&a.detection.dragEventCount<3)&&(Math.abs(s.movementX)>ZL||Math.abs(s.movementY)>ZL)}var O3,pZ,ZL,ks=C(()=>{O3=q(Fe()),l0(),qL(),A3(),Pxe(),Nr(),pZ=3,ZL=100});function Mxe(s){return isNaN(s)?"NaN":Lo(s)?s.toFixed(0):X1(s,3).toString()}var fZ,mZ,md,gZ,rC,vZ,yZ,bZ,_Z,wZ,xZ,SZ,EZ,iC,QL=C(()=>{fi(),fZ=q(Fe()),mZ=q(Fe()),md=q(Fe()),ze(),nC(),Nr(),WL(),ks(),rC=ae.div(gZ||(gZ=J([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),yZ=ae.input(vZ||(vZ=J([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),_Z=ae.div(bZ||(bZ=J([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),rC,rC),xZ=ae.div(wZ||(wZ=J([`
  display: contents;
`]))),SZ=s=>!0,EZ=s=>{var a;let[l]=Sr({mode:"noFocus"}),h=(a=s.isValid)!=null?a:SZ,m=(0,md.useRef)(s);m.current=s;let g=(0,md.useRef)(null);GL(g.current,()=>{g.current.blur()},l.current.mode==="editingViaKeyboard");let b=(0,md.useRef)(null),_=(0,md.useMemo)(()=>{let V=ye=>{let we=ye.target,{value:Ne}=we,lt=l.current;l.current=L(B({},lt),{currentEditedValueInString:Ne});let ue=parseFloat(Ne);!isFinite(ue)||!h(ue)||m.current.temporarilySetValue(ue)},W=()=>{l.current.mode==="editingViaKeyboard"&&($(),l.current={mode:"noFocus"}),s.onBlur&&s.onBlur()},$=()=>{let ye=l.current,we=parseFloat(ye.currentEditedValueInString);!isFinite(we)||!h(we)||ye.valueBeforeEditing===we?m.current.discardTemporaryValue():m.current.permanentlySetValue(we)},Z=ye=>{ye.key==="Escape"?(m.current.discardTemporaryValue(),l.current={mode:"noFocus"},g.current.blur()):(ye.key==="Enter"||ye.key==="Tab")&&($(),g.current.blur())},ie=ye=>{l.current.mode==="noFocus"&&(g.current.focus(),ye.preventDefault()),ye.stopPropagation()},re=()=>{l.current.mode==="noFocus"?le():l.current.mode},le=()=>{let ye=m.current.value;l.current={mode:"editingViaKeyboard",currentEditedValueInString:String(ye),valueBeforeEditing:ye},setTimeout(()=>{g.current.focus(),g.current.setSelectionRange(0,100)})},Ce;return{inputChange:V,onBlur:W,transitionToDraggingMode:()=>{var ye;let we=m.current.value;Ce=(ye=g.current)==null?void 0:ye.getBoundingClientRect().width,l.current={mode:"dragging"};let Ne=we,lt=we;return b.current=document.body.style.cursor,{onDrag(ue,Le,Q,He){let Bt=Q.altKey?He/10:He,Ie=lt+s.nudge({deltaX:Bt,deltaFraction:Bt/Ce,magnitude:1});lt=s.range?Si(Ie,s.range[0],s.range[1]):Ie,m.current.temporarilySetValue(lt)},onDragEnd(ue){ue?(Ne===lt?m.current.discardTemporaryValue():m.current.permanentlySetValue(lt),l.current={mode:"noFocus"}):(m.current.discardTemporaryValue(),l.current={mode:"noFocus"})},onClick(){g.current.focus(),g.current.setSelectionRange(0,100)}}},onInputKeyDown:Z,onClick:ie,onFocus:re}},[]);(0,fZ.useEffect)(()=>()=>{_.onBlur()},[]);let E=l.current.mode!=="editingViaKeyboard"?Mxe(s.value):l.current.currentEditedValueInString;typeof E=="number"&&isNaN(E)&&(E="NaN");let P=[g];s.inputRef&&P.push(s.inputRef);let I=md.default.createElement(yZ,{key:"input",type:"text",onChange:_.inputChange,value:E,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:tC(P),onMouseDown:V=>{V.stopPropagation()},onDoubleClick:V=>{V.preventDefault(),V.stopPropagation()},autoFocus:s.autoFocus}),{range:O}=s,R=parseFloat(E),A=O?md.default.createElement(_Z,{style:{"--percentage":Si((R-O[0])/(O[1]-O[0]),0,1)}}):null,[F,N]=(0,mZ.useState)(null);return ji(F,{debugName:"form/BasicNumberInput",onDragStart:_.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:l.current.mode==="editingViaKeyboard"}),md.default.createElement(rC,{className:s.className+" "+l.current.mode},md.default.createElement(xZ,{ref:N},I),A)},iC=EZ});function kxe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let m=(0,JL.useCallback)(g=>s.nudgeFn(L(B({},g),{config:s})),[s]);return JL.default.createElement(iC,{value:l,temporarilySetValue:a.temporarilySetValue,discardTemporaryValue:a.discardTemporaryValue,permanentlySetValue:a.permanentlySetValue,range:s.range,nudge:m,autoFocus:h})}var JL,eN,CZ=C(()=>{QL(),JL=q(Fe()),eN=kxe});function Axe({value:s,onChange:a,options:l,autoFocus:h}){let m=(0,b6.useCallback)(g=>{a(String(g.target.value))},[a]);return b6.default.createElement(tN,{role:"radiogroup"},Object.keys(l).map((g,b)=>b6.default.createElement(MZ,{key:"label-"+b,"data-checked":s===g},l[g],b6.default.createElement(AZ,{type:"radio",checked:s===g,value:g,onChange:m,name:"switchbox",autoFocus:h}))))}var b6,PZ,tN,TZ,MZ,kZ,AZ,IZ,Ixe=C(()=>{a0(),b6=q(Fe()),ze(),tN=ae.form(PZ||(PZ=J([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),MZ=ae.label(TZ||(TZ=J([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),tN,s6(.1,"white")),AZ=ae.input(kZ||(kZ=J([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),IZ=Axe}),Rxe=C(()=>{}),nN,rN,iN,RZ=C(()=>{nN=q(Fe()),rN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iN=nN.default.createContext&&nN.default.createContext(rN)});function DZ(s){return s&&s.map(function(a,l){return N3.default.createElement(a.tag,gd({key:l},a.attr),DZ(a.child))})}function L3(s){return function(a){return N3.default.createElement(Dxe,gd({attr:gd({},s.attr)},a),DZ(s.child))}}function Dxe(s){var a=function(l){var h=s.attr,m=s.size,g=s.title,b=OZ(s,["attr","size","title"]),_=m||l.size||"1em",E;return l.className&&(E=l.className),s.className&&(E=(E?E+" ":"")+s.className),N3.default.createElement("svg",gd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,h,b,{className:E,style:gd(gd({color:s.color||l.color},l.style),s.style),height:_,width:_,xmlns:"http://www.w3.org/2000/svg"}),g&&N3.default.createElement("title",null,g),s.children)};return iN!==void 0?N3.default.createElement(iN.Consumer,null,function(l){return a(l)}):a(rN)}var N3,gd,OZ,Oxe=C(()=>{N3=q(Fe()),RZ(),gd=function(){return gd=Object.assign||function(s){for(var a,l=1,h=arguments.length;l<h;l++){a=arguments[l];for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(s[m]=a[m])}return s},gd.apply(this,arguments)},OZ=function(s,a){var l={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&a.indexOf(h)<0&&(l[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,h=Object.getOwnPropertySymbols(s);m<h.length;m++)a.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(s,h[m])&&(l[h[m]]=s[h[m]]);return l}}),vs=C(()=>{Rxe(),Oxe(),RZ()}),Lxe=C(()=>{vs()}),Nxe=C(()=>{vs()});function Fxe(s){return L3({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(s)}var Bxe=C(()=>{vs()}),Uxe=C(()=>{vs()}),zxe=C(()=>{vs()});function Vxe(s){return L3({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(s)}function jxe(s){return L3({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(s)}var Hxe=C(()=>{vs()}),Gxe=C(()=>{vs()}),Wxe=C(()=>{vs()}),$xe=C(()=>{vs()}),Kxe=C(()=>{vs()}),Xxe=C(()=>{vs()}),qxe=C(()=>{vs()}),Yxe=C(()=>{vs()}),Zxe=C(()=>{vs()}),Qxe=C(()=>{vs()});function LZ(s){return L3({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(s)}var Jxe=C(()=>{vs()}),eSe=C(()=>{vs()}),tSe=C(()=>{vs()}),nSe=C(()=>{vs()});function rSe(s){return L3({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(s)}var iSe=C(()=>{vs()});function sSe(s){return L3({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(s)}var oSe=C(()=>{vs()}),F3=C(()=>{Lxe(),Nxe(),Bxe(),Uxe(),zxe(),Hxe(),Gxe(),Wxe(),$xe(),Kxe(),Xxe(),qxe(),Yxe(),Zxe(),Qxe(),Jxe(),eSe(),tSe(),nSe(),iSe(),oSe()});function aSe({value:s,onChange:a,options:l,className:h,autoFocus:m}){let g=(0,im.useCallback)(b=>{a(String(b.target.value))},[a]);return im.default.createElement(FZ,null,im.default.createElement(VZ,{className:h,value:s,onChange:g,autoFocus:m},Object.keys(l).map((b,_)=>im.default.createElement("option",{key:"option-"+_,value:b},l[b]))),im.default.createElement(UZ,null,im.default.createElement(rSe,null)))}var im,NZ,FZ,BZ,UZ,zZ,VZ,jZ,lSe=C(()=>{im=q(Fe()),ze(),F3(),FZ=ae.div(NZ||(NZ=J([`
  width: 100%;
  position: relative;
`]))),UZ=ae.div(BZ||(BZ=J([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),VZ=ae.select(zZ||(zZ=J([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),jZ=aSe});function uSe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let m=(0,sC.useCallback)(g=>{a.permanentlySetValue(g)},[s,a]);return s.as==="menu"?sC.default.createElement(jZ,{value:l,onChange:m,options:s.valuesAndLabels,autoFocus:h}):sC.default.createElement(IZ,{value:l,onChange:m,options:s.valuesAndLabels,autoFocus:h})}var sC,HZ,cSe=C(()=>{sC=q(Fe()),Ixe(),lSe(),HZ=uSe}),GZ,_6,WZ,$Z,KZ,XZ,oC,sN=C(()=>{ze(),GZ=q(Fe()),_6=q(Fe()),nC(),Nr(),WL(),$Z=ae.input.attrs({type:"text"})(WZ||(WZ=J([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),KZ=s=>!0,XZ=s=>{var a,l;let[h]=Sr({mode:"noFocus"}),m=(a=s.isValid)!=null?a:KZ,g=(0,_6.useRef)(s);g.current=s;let b=(0,_6.useRef)(null);GL(b.current,()=>{b.current.blur()},h.current.mode==="editingViaKeyboard");let _=(0,_6.useMemo)(()=>{let I=W=>{let $=W.target,{value:Z}=$,ie=h.current;h.current=L(B({},ie),{currentEditedValueInString:Z}),m(Z)&&g.current.temporarilySetValue(Z)},O=()=>{var W,$;h.current.mode==="editingViaKeyboard"&&(R(),h.current={mode:"noFocus"}),($=(W=g.current).onBlur)==null||$.call(W)},R=()=>{let W=h.current,$=W.currentEditedValueInString;m($)?W.valueBeforeEditing===$?g.current.discardTemporaryValue():g.current.permanentlySetValue($):g.current.discardTemporaryValue()},A=W=>{W.key==="Escape"?(g.current.discardTemporaryValue(),h.current={mode:"noFocus"},b.current.blur()):(W.key==="Enter"||W.key==="Tab")&&(R(),b.current.blur())},F=W=>{h.current.mode==="noFocus"&&(b.current.focus(),W.preventDefault()),W.stopPropagation()},N=()=>{h.current.mode==="noFocus"?V():h.current.mode},V=()=>{let W=g.current.value;h.current={mode:"editingViaKeyboard",currentEditedValueInString:String(W),valueBeforeEditing:W},setTimeout(()=>{b.current.focus()})};return{inputChange:I,onBlur:O,onInputKeyDown:A,onClick:F,onFocus:N}},[]);(0,GZ.useEffect)(()=>()=>{_.onBlur()},[]);let E=h.current.mode!=="editingViaKeyboard"?s.value:h.current.currentEditedValueInString,P=[b];return s.inputRef&&P.push(s.inputRef),_6.default.createElement($Z,{key:"input",type:"text",className:"".concat((l=s.className)!=null?l:""," ").concat(m(E)?"":"invalid"),onChange:_.inputChange,value:E,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:tC(P),onMouseDown:I=>{I.stopPropagation()},onDoubleClick:I=>{I.preventDefault(),I.stopPropagation()},autoFocus:s.autoFocus})},oC=XZ});function dSe({editingTools:s,value:a,autoFocus:l}){return qZ.default.createElement(oC,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,autoFocus:l})}var qZ,YZ,hSe=C(()=>{qZ=q(Fe()),sN(),YZ=dSe});function pSe(s){s=s.trim().toLowerCase();let a=s.match(lN);if(!a)return{r:0,g:0,b:0,a:1};let l=fSe(a[1]);return{r:parseInt(l.substr(0,2),16)/255,g:parseInt(l.substr(2,2),16)/255,b:parseInt(l.substr(4,2),16)/255,a:parseInt(l.substr(6,2),16)/255}}function oN(s,{removeAlphaIfOpaque:a=!1}={}){let l=(s.a*255|256).toString(16).slice(1),h=(s.r*255|256).toString(16).slice(1)+(s.g*255|256).toString(16).slice(1)+(s.b*255|256).toString(16).slice(1)+(a&&l==="ff"?"":l);return"#".concat(h)}function aN(s){return L(B({},s),{toString(){return oN(this,{removeAlphaIfOpaque:!0})}})}function fSe(s){switch(s.length){case 3:return"".concat(s.repeat(2),"ff");case 4:let a=s.substr(0,3),l=s[3];return"".concat(a.repeat(2)).concat(l.repeat(2));case 6:return"".concat(s,"ff")}return s}var lN,ZZ=C(()=>{lN=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function aC(s){let a=(0,uN.useRef)(s),l=(0,uN.useRef)(h=>{a.current&&a.current(h)});return a.current=s,l.current}var uN,QZ=C(()=>{uN=q(Fe())}),sm,lC=C(()=>{sm=(s,a=0,l=1)=>s>l?l:s<a?a:s}),w6,cN,JZ,dN,hN=C(()=>{w6=q(Fe()),cN=(0,w6.createContext)(void 0),JZ=({children:s})=>{let[a,l]=(0,w6.useState)(!1);return w6.default.createElement(cN.Provider,{value:{editing:a,setEditing:l}},s)},dN=()=>(0,w6.useContext)(cN)}),hp,B3,eQ,uC,pN,fN,tQ,nQ,rQ,iQ,x6,cC=C(()=>{hp=q(Fe()),QZ(),lC(),ze(),hN(),B3=s=>"touches"in s,eQ=(s,a)=>{for(let l=0;l<s.length;l++)if(s[l].identifier===a)return s[l];return s[0]},uC=s=>s&&s.ownerDocument.defaultView||self,pN=(s,a,l)=>{let h=s.getBoundingClientRect(),m=B3(a)?eQ(a.touches,l):a;return{left:sm((m.pageX-(h.left+uC(s).pageXOffset))/h.width),top:sm((m.pageY-(h.top+uC(s).pageYOffset))/h.height)}},fN=s=>{!B3(s)&&s.preventDefault()},tQ=(s,a)=>a&&!B3(s),rQ=ae.div(nQ||(nQ=J([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),iQ=s=>{var a=s,{onMove:l,onKey:h}=a,m=U(a,["onMove","onKey"]);let g=(0,hp.useRef)(null),b=aC(l),_=aC(h),E=(0,hp.useRef)(null),P=(0,hp.useRef)(!1),{setEditing:I}=dN(),[O,R,A]=(0,hp.useMemo)(()=>{let F=({nativeEvent:Z})=>{let ie=g.current;if(ie&&(fN(Z),!(tQ(Z,P.current)||!ie))){if(B3(Z)){P.current=!0;let re=Z.changedTouches||[];re.length&&(E.current=re[0].identifier)}ie.focus(),I(!0),b(pN(ie,Z,E.current)),$(!0)}},N=Z=>{fN(Z),(B3(Z)?Z.touches.length>0:Z.buttons>0)&&g.current?b(pN(g.current,Z,E.current)):(I(!1),$(!1))},V=Z=>{I(!1),$(!1)},W=Z=>{let ie=Z.which||Z.keyCode;ie<37||ie>40||(Z.preventDefault(),_({left:ie===39?.05:ie===37?-.05:0,top:ie===40?.05:ie===38?-.05:0}))};function $(Z){let ie=P.current,re=g.current,le=uC(re),Ce=Z?le.addEventListener:le.removeEventListener;Ce(ie?"touchmove":"mousemove",N),Ce(ie?"touchend":"mouseup",V)}return[F,W,$]},[_,b]);return(0,hp.useEffect)(()=>A,[A]),hp.default.createElement(rQ,L(B({},m),{onTouchStart:O,onMouseDown:O,ref:g,onKeyDown:R,tabIndex:0,role:"slider"}))},x6=hp.default.memo(iQ)}),mN,sQ,oQ,aQ,lQ,uQ,cQ,dC,gN=C(()=>{mN=q(Fe()),ze(),cC(),oQ=ae(x6)(sQ||(sQ=J([""]))),lQ=ae.div(aQ||(aQ=J([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),oQ),cQ=ae.div(uQ||(uQ=J([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),dC=({className:s,color:a,left:l,top:h=.5})=>{let m={top:"".concat(h*100,"%"),left:"".concat(l*100,"%")};return mN.default.createElement(lQ,{style:m,className:s},mN.default.createElement(cQ,{style:{backgroundColor:a}}))}}),Bo,hC=C(()=>{Bo=(s,a=0,l=Math.pow(10,a))=>Math.round(l*s)/l}),vN,pC,fC,dQ,hQ,mC=C(()=>{hC(),vN=({h:s,s:a,v:l,a:h})=>{let m=(200-a)*l/100;return{h:Bo(s),s:Bo(m>0&&m<200?a*l/100/(m<=100?m:200-m)*100:0),l:Bo(m/2),a:Bo(h,2)}},pC=s=>{let{h:a,s:l,l:h}=vN(s);return"hsl(".concat(a,", ").concat(l,"%, ").concat(h,"%)")},fC=s=>{let{h:a,s:l,l:h,a:m}=vN(s);return"hsla(".concat(a,", ").concat(l,"%, ").concat(h,"%, ").concat(m,")")},dQ=({h:s,s:a,v:l,a:h})=>{s=s/360*6,a=a/100,l=l/100;let m=Math.floor(s),g=l*(1-a),b=l*(1-(s-m)*a),_=l*(1-(1-s+m)*a),E=m%6;return{r:Bo([l,b,g,g,_,l][E]*255),g:Bo([_,l,l,b,g,g][E]*255),b:Bo([g,g,_,l,l,b][E]*255),a:Bo(h,2)}},hQ=({r:s,g:a,b:l,a:h})=>{let m=Math.max(s,a,l),g=m-Math.min(s,a,l),b=g?m===s?(a-l)/g:m===a?2+(l-s)/g:4+(s-a)/g:0;return{h:Bo(60*(b<0?b+6:b)),s:Bo(m?g/m*100:0),v:Bo(m/255*100),a:h}}}),S6,pQ,fQ,mQ,gQ,vQ,yQ,mSe=C(()=>{S6=q(Fe()),cC(),gN(),mC(),lC(),hC(),ze(),fQ=ae.div(pQ||(pQ=J([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),gQ=ae(dC)(mQ||(mQ=J([`
  z-index: 2;
`]))),vQ=({className:s,hue:a,onChange:l})=>S6.default.createElement(fQ,{className:s},S6.default.createElement(x6,{onMove:h=>{l({h:360*h.left})},onKey:h=>{l({h:sm(a+h.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":Bo(a)},S6.default.createElement(gQ,{left:a/360,color:pC({h:a,s:100,v:100,a:1})}))),yQ=S6.default.memo(vQ)}),E6,bQ,_Q,wQ,xQ,SQ,EQ,gSe=C(()=>{E6=q(Fe()),cC(),gN(),mC(),lC(),hC(),ze(),_Q=ae.div(bQ||(bQ=J([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),xQ=ae(dC)(wQ||(wQ=J([`
  z-index: 3;
`]))),SQ=({hsva:s,onChange:a})=>{let l=g=>{a({s:g.left*100,v:100-g.top*100})},h=g=>{a({s:sm(s.s+g.left*100,0,100),v:sm(s.v-g.top*100,0,100)})},m={backgroundColor:pC({h:s.h,s:100,v:100,a:1})};return E6.default.createElement(_Q,{style:m},E6.default.createElement(x6,{onMove:l,onKey:h,"aria-label":"Color","aria-valuetext":"Saturation ".concat(Bo(s.s),"%, Brightness ").concat(Bo(s.v),"%")},E6.default.createElement(xQ,{top:1-s.v/100,left:s.s/100,color:pC(s)})))},EQ=E6.default.memo(SQ)}),C6,CQ,PQ,TQ,MQ,kQ,AQ,IQ,vSe=C(()=>{C6=q(Fe()),cC(),gN(),mC(),lC(),hC(),ze(),PQ=ae.div(CQ||(CQ=J([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),MQ=ae.div.attrs(({colorFrom:s,colorTo:a})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(s,", ").concat(a,")")}}))(TQ||(TQ=J([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),AQ=ae(dC)(kQ||(kQ=J([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),IQ=({className:s,hsva:a,onChange:l})=>{let h=_=>{l({a:_.left})},m=_=>{l({a:sm(a.a+_.left)})},g=fC(Object.assign({},a,{a:0})),b=fC(Object.assign({},a,{a:1}));return C6.default.createElement(PQ,{className:s},C6.default.createElement(MQ,{colorFrom:g,colorTo:b}),C6.default.createElement(x6,{onMove:h,onKey:m,"aria-label":"Alpha","aria-valuetext":"".concat(Bo(a.a*100),"%")},C6.default.createElement(AQ,{left:a.a,color:fC(a)})))}}),gC,RQ=C(()=>{gC=(s,a)=>{if(s===a)return!0;for(let l in s)if(s[l]!==a[l])return!1;return!0}});function ySe(s,a,l,h){let{editing:m}=dN(),[g,b]=(0,vd.useState)(a),_=aC(l),E=aC(h),P=m?g:a,[I,O]=(0,vd.useState)(()=>s.toHsva(P)),R=(0,vd.useRef)({color:P,hsva:I}),A=(0,vd.useRef)({color:P,hsva:I});(0,vd.useEffect)(()=>{m&&b(R.current.color)},[m]),(0,vd.useEffect)(()=>{let N=s.fromHsva(I);m?!gC(I,R.current.hsva)&&!s.equal(N,R.current.color)&&(R.current={hsva:I,color:N},b(N),_(N)):!gC(I,A.current.hsva)&&!s.equal(N,A.current.color)&&(A.current={hsva:I,color:N},R.current={hsva:I,color:N},E(N))},[m,I,s,_,E]),(0,vd.useEffect)(()=>{if(!m&&!s.equal(P,A.current.color)){let N=s.toHsva(P);A.current={hsva:N,color:P},O(N)}},[m,P,s]);let F=(0,vd.useCallback)(N=>{O(V=>Object.assign({},V,N))},[]);return[I,F]}var vd,bSe=C(()=>{vd=q(Fe()),RQ(),QZ(),hN()}),U3,DQ,OQ,LQ,_Se=C(()=>{U3=q(Fe()),mSe(),gSe(),vSe(),bSe(),ze(),OQ=ae.div(DQ||(DQ=J([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),LQ=s=>{var a=s,{className:l,colorModel:h,color:m=h.defaultColor,temporarilySetValue:g,permanentlySetValue:b,discardTemporaryValue:_}=a,E=U(a,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[P,I]=ySe(h,m,g,b);return(0,U3.useEffect)(()=>()=>{_()},[]),U3.default.createElement(OQ,B({},E),U3.default.createElement(EQ,{hsva:P,onChange:I}),U3.default.createElement(yQ,{hue:P.h,onChange:I}),U3.default.createElement(IQ,{hsva:P,onChange:I}))}}),yN,NQ,FQ,BQ,UQ,wSe=C(()=>{yN=q(Fe()),_Se(),RQ(),mC(),hN(),NQ=s=>({r:s.r/255,g:s.g/255,b:s.b/255,a:s.a}),FQ=s=>({r:s.r*255,g:s.g*255,b:s.b*255,a:s.a}),BQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:s=>hQ(FQ(s)),fromHsva:s=>NQ(dQ(s)),equal:gC},UQ=s=>yN.default.createElement(JZ,null,yN.default.createElement(LQ,L(B({},s),{permanentlySetValue:a=>{s.permanentlySetValue(a)},colorModel:BQ})))}),xSe=C(()=>{wSe()}),zQ,VQ,jQ,SSe=C(()=>{zQ=q(Fe()),VQ=function(s){(0,zQ.useEffect)(s,[])},jQ=VQ}),HQ,GQ,WQ,ESe=C(()=>{HQ=q(Fe()),SSe(),GQ=function(s){var a=(0,HQ.useRef)(s);a.current=s,jQ(function(){return function(){return a.current()}})},WQ=GQ}),vC,$Q,KQ,CSe=C(()=>{vC=q(Fe()),ESe(),$Q=function(s){var a=(0,vC.useRef)(0),l=(0,vC.useState)(s),h=l[0],m=l[1],g=(0,vC.useCallback)(function(b){cancelAnimationFrame(a.current),a.current=requestAnimationFrame(function(){m(b)})},[]);return WQ(function(){cancelAnimationFrame(a.current)}),[h,g]},KQ=$Q});function PSe(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.addEventListener&&s.addEventListener.apply(s,a)}function TSe(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.removeEventListener&&s.removeEventListener.apply(s,a)}var yC,MSe=C(()=>{yC=typeof window<"u"}),XQ,qQ,bC,bN=C(()=>{XQ=q(Fe()),CSe(),MSe(),qQ=function(s,a){s===void 0&&(s=1/0),a===void 0&&(a=1/0);var l=KQ({width:yC?window.innerWidth:s,height:yC?window.innerHeight:a}),h=l[0],m=l[1];return(0,XQ.useEffect)(function(){if(yC){var g=function(){m({width:window.innerWidth,height:window.innerHeight})};return PSe(window,"resize",g),function(){TSe(window,"resize",g)}}},[]),h},bC=qQ});function _N(s){let[a,l]=(0,wN.useState)(null);return(0,wN.useLayoutEffect)(()=>(s&&l(s.getBoundingClientRect()),()=>{l(null)}),[s]),a}var wN,YQ=C(()=>{wN=q(Fe())}),ZQ,QQ,xN,JQ=C(()=>{ZQ=q(Fe()),QQ=(0,ZQ.createContext)({}),xN=QQ});function kSe(s,a,l){let h=s.getBoundingClientRect(),m=g=>{(g.clientX<h.left-a||g.clientX>h.left+h.width+a||g.clientY<h.top-a||g.clientY>h.top+h.height+a)&&l(g)};return window.addEventListener("mousemove",m),()=>{window.removeEventListener("mousemove",m)}}var ASe=C(()=>{}),eJ,_C,SN,tJ,EN,nJ=C(()=>{eJ=q(Fe()),_C=q(Fe()),bN(),YQ(),JQ(),Nr(),WL(),ASe(),A3(),fi(),SN=8,tJ=s=>{var a,l;let h=s.children(),[m,g]=Sr(null),b=h.props.style?B({},h.props.style):{};b.position="absolute";let _=_N(g),E=_N(s.target),P=bC(),[I,O]=(0,_C.useState)({});return(0,_C.useLayoutEffect)(()=>{var R,A,F;if(!_||!g||!E)return;let N=(R=s.verticalGap)!=null?R:8,V={},W=(A=s.verticalPlacement)!=null?A:"bottom",$=0,Z=0;W==="bottom"?E.bottom+_.height+N<P.height?(W="bottom",$=E.bottom+N,V.top="0px"):E.top>_.height+N?(W="top",$=E.top-(_.height+N),V.bottom="0px",V.transform="rotateZ(180deg)"):W="overlay":W==="top"&&(E.top>_.height+N?(W="top",$=E.top-(_.height+N),V.bottom="0px",V.transform="rotateZ(180deg)"):E.bottom+_.height+N<P.height?(W="bottom",$=E.bottom+N,V.top="0px"):W="overlay");let ie=0;if(W!=="overlay"){let Ne=E.left+E.width/2;Ne<_.width/2?(Z=N,ie=Math.max(Ne-N,SN)):Ne+_.width/2>P.width?(Z=P.width-(N+_.width),ie=Math.min(Ne-Z,_.width-SN)):(Z=Ne-_.width/2,ie=_.width/2),V.left=ie+"px"}let{minX:re=-1/0,maxX:le=1/0,minY:Ce=-1/0,maxY:ye=1/0}=(F=s.constraints)!=null?F:{},we={left:Si(Z,re,le-_.width),top:Si($,Ce,ye+_.height)};if(g.style.left=we.left+"px",g.style.top=we.top+"px",O(V),s.onPointerOutside)return kSe(g,s.onPointerOutside.threshold,s.onPointerOutside.callback)},[_,g,s.target,E,P,s.onPointerOutside]),GL([g,(a=s.target)!=null?a:null],(l=s.onClickOutside)!=null?l:Gl),eJ.default.createElement(xN.Provider,{value:I},(0,_C.cloneElement)(h,{ref:m,style:b}))},EN=tJ});function Xu(s,a){let l=(...A)=>{},{isPointerBeingCaptured:h}=dZ("usePopover"),[m,g]=Sr({isOpen:!1}),b=(0,Uo.useRef)(s),_=(0,Uo.useCallback)(A=>{m.current={isOpen:!1}},[]),E=(0,Uo.useCallback)((A,F)=>{var N;let V=typeof b.current=="function"?b.current():b.current;function W(){I.childHasFocusRef.current||V.closeOnClickOutside!==!1&&_("clicked outside popover")}m.current={isOpen:!0,clickPoint:{clientX:A.clientX,clientY:A.clientY},target:F,opts:V,onClickOutside:W,onPointerOutside:V.closeWhenPointerIsDistant===!1?void 0:{threshold:(N=V.pointerDistanceThreshold)!=null?N:100,callback:()=>{I.childHasFocusRef.current||h()||_("pointer outside")}}}},[]),P=(0,Uo.useCallback)((...A)=>{m.current.isOpen?_("toggled"):E(...A)},[]),I=ISe({_debug:l,state:g}),[,O]=(0,Uo.useContext)(J6);(0,Uo.useEffect)(()=>{let A;return g.isOpen&&(A=O()),()=>A==null?void 0:A()},[g.isOpen]);let R=(0,Uo.useContext)(T3);return{node:g.isOpen?(0,rJ.createPortal)(Uo.default.createElement(CN.Provider,{value:I.childPopoverLock},Uo.default.createElement(EN,{children:a,target:g.target,onClickOutside:g.onClickOutside,onPointerOutside:g.onPointerOutside,constraints:g.opts.constraints,verticalGap:g.opts.verticalGap})),R):Uo.default.createElement(Uo.default.Fragment,null),open:E,close:_,toggle:P,isOpen:g.isOpen}}function ISe(s){let a=(0,Uo.useContext)(CN);(0,Uo.useEffect)(()=>{if(s.state.isOpen){let h=a.takeFocus();return s._debug("take focus"),()=>{s._debug("release focus"),h.releaseFocus()}}},[s.state.isOpen]);let l=(0,Uo.useRef)(!1);return{childHasFocusRef:l,childPopoverLock:{takeFocus(){return l.current=!0,{releaseFocus(){l.current=!1}}}}}}var Uo,rJ,CN,qu=C(()=>{qL(),Nr(),Uo=q(Fe()),rJ=q(Ll()),rm(),nJ(),fF(),CN=Uo.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),yd,iJ,sJ,oJ,aJ,lJ,uJ,cJ,dJ,hJ,pJ,fJ,mJ,RSe=C(()=>{yd=q(Fe()),ze(),JQ(),sJ=ae.div(iJ||(iJ=J([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),aJ=ae.div(oJ||(oJ=J([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),uJ=ae.path(lJ||(lJ=J([`
  fill: var(--popover-bg);
`]))),dJ=ae.path(cJ||(cJ=J([`
  fill: var(--popover-inner-stroke);
`]))),pJ=ae.path(hJ||(hJ=J([`
  fill: var(--popover-outer-stroke);
`]))),fJ=(0,yd.forwardRef)(({className:s},a)=>{let l=(0,yd.useContext)(xN);return yd.default.createElement(sJ,{className:s,ref:a,style:B({},l)},yd.default.createElement(aJ,null,yd.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yd.default.createElement(pJ,{d:"M6 0L0 6H12L6 0Z"}),yd.default.createElement(dJ,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),yd.default.createElement(uJ,{d:"M6 3L0 9H12L6 3Z"}))))}),mJ=fJ}),wC,PN,gJ,vJ,yJ,Yu,Zu=C(()=>{Fr(),a0(),wC=q(Fe()),ze(),RSe(),PN=Hl(.05,"#2a2a31"),vJ=ae.div(gJ||(gJ=J([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),PN,Rr),yJ=wC.default.forwardRef(({children:s,className:a,showPopoverEdgeTriangle:l=!0},h)=>wC.default.createElement(vJ,{className:a,ref:h},l?wC.default.createElement(mJ,null):void 0,s)),Yu=yJ});function DSe({editingTools:s,value:a,autoFocus:l}){let h=(0,Qu.useRef)(null),m=(0,Qu.useCallback)(b=>{let _=aN(pSe(b));s.permanentlySetValue(_)},[s]),g=Xu({debugName:"RgbaPropEditor"},()=>Qu.default.createElement(PJ,null,Qu.default.createElement(UQ,{color:{r:a.r,g:a.g,b:a.b,a:a.a},temporarilySetValue:b=>{let _=aN(b);s.temporarilySetValue(_)},permanentlySetValue:b=>{let _=aN(b);s.permanentlySetValue(_)},discardTemporaryValue:s.discardTemporaryValue})));return Qu.default.createElement(Qu.default.Fragment,null,Qu.default.createElement(_J,null,Qu.default.createElement(xJ,{rgbaColor:a,ref:h,onClick:b=>{g.toggle(b,h.current)}}),Qu.default.createElement(EJ,{value:oN(a,{removeAlphaIfOpaque:!0}),temporarilySetValue:TN,discardTemporaryValue:TN,permanentlySetValue:m,isValid:b=>!!b.match(lN),autoFocus:l})),g.node)}var Qu,bJ,_J,wJ,xJ,SJ,EJ,TN,CJ,PJ,TJ,OSe=C(()=>{ZZ(),ZZ(),Qu=q(Fe()),xSe(),ze(),qu(),sN(),Zu(),_J=ae.div(bJ||(bJ=J([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),xJ=ae.div.attrs(s=>({style:{background:oN(s.rgbaColor)}}))(wJ||(wJ=J([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),EJ=ae(oC)(SJ||(SJ=J([`
  flex: 1;
`]))),TN=()=>{},PJ=ae.div(CJ||(CJ=J([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),PN),TJ=DSe});function LSe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let[m,g]=$l.default.useState();(0,$l.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,$l.useCallback)(E=>ne(this,null,function*(){let P=E.target.files[0];a.permanentlySetValue({type:"image",id:void 0});let I=yield a.createAsset(P);I?a.permanentlySetValue({type:"image",id:I}):a.permanentlySetValue(l),E.target.value=null}),[a,l]),_=!(l!=null&&l.id);return $l.default.createElement(MN,{empty:_},$l.default.createElement(OJ,{empty:_,title:_?"Upload image":'"'.concat(l.id,'" (Click to upload new image)')},$l.default.createElement(NJ,{type:"file",onChange:b,accept:"image/*,.hdr",autoFocus:h}),m?$l.default.createElement(BJ,{src:m}):$l.default.createElement(AJ,null)),!_&&$l.default.createElement(zJ,{title:"Delete image",onClick:()=>{a.permanentlySetValue({type:"image",id:void 0})}},$l.default.createElement(LL,null)))}var $l,MJ,MN,kJ,AJ,IJ,RJ,DJ,OJ,LJ,NJ,FJ,BJ,UJ,zJ,VJ,NSe=C(()=>{p6(),$l=q(Fe()),ze(),MN=ae.div(MJ||(MJ=J([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),AJ=ae.div(kJ||(kJ=J([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),OJ=ae.label(DJ||(DJ=J([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?po(IJ||(IJ=J([""]))):po(RJ||(RJ=J([""])))),NJ=ae.input.attrs({type:"file"})(LJ||(LJ=J([`
  display: none;
`]))),BJ=ae.img(FJ||(FJ=J([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),zJ=ae.button(UJ||(UJ=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),MN),VJ=LSe});function FSe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let[m,g]=Kl.default.useState();(0,Kl.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,Kl.useCallback)(E=>ne(this,null,function*(){let P=E.target.files[0];a.permanentlySetValue({type:"file",id:void 0});let I=yield a.createAsset(P);I?a.permanentlySetValue({type:"file",id:I}):a.permanentlySetValue(l),E.target.value=null}),[a,l]),_=!(l!=null&&l.id);return Kl.default.createElement(kN,{empty:_},Kl.default.createElement(XJ,{empty:_,title:_?"Upload file":'"'.concat(l.id,'" (Click to upload new file)')},Kl.default.createElement(YJ,{type:"file",onChange:b,autoFocus:h}),m?Kl.default.createElement(RL,null):Kl.default.createElement(GJ,null)),!_&&Kl.default.createElement(QJ,{title:"Delete file",onClick:()=>{a.permanentlySetValue({type:"file",id:void 0})}},Kl.default.createElement(LL,null)))}var Kl,jJ,kN,HJ,GJ,WJ,$J,KJ,XJ,qJ,YJ,ZJ,QJ,JJ,BSe=C(()=>{p6(),Kl=q(Fe()),ze(),kN=ae.div(jJ||(jJ=J([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),GJ=ae.div(HJ||(HJ=J([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),XJ=ae.label(KJ||(KJ=J([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?po(WJ||(WJ=J([""]))):po($J||($J=J([""])))),YJ=ae.input.attrs({type:"file"})(qJ||(qJ=J([`
  display: none;
`]))),QJ=ae.button(ZJ||(ZJ=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),kN),JJ=FSe}),AN,eee=C(()=>{Sxe(),CZ(),cSe(),hSe(),OSe(),NSe(),BSe(),AN={number:eN,string:YZ,boolean:tZ,stringLiteral:HZ,rgba:TJ,image:VJ,file:JJ}});function P6(s){let a=new WeakMap;return l=>(a.has(l)||a.set(l,s(l)),a.get(l))}var xC=C(()=>{});function Ju(s){return s.type==="compound"||s.type==="enum"}function SC(s,a){if(!s)return;let[l,...h]=a;if(l===void 0)return s;if(!Ju(s))return;let m=s.type==="enum"?s.cases[l]:s.props[l];return SC(m,h)}function EC(s,a){let l=a.deserializeAndSanitize(s);return l===void 0?a.default:l}function USe(s){return!Ju(s)}function*T6(s,a){if(s.type==="compound")for(let l in s.props)yield*mt(T6(s.props[l],[...a,l]));else{if(s.type==="enum")throw new Error("Not implemented yet");return yield{path:a,conf:s}}}var IN,pp=C(()=>{xC(),IN=P6(s=>{if(s.type==="enum")throw new Error("Not implemented yet for enums");for(let a in s.props){let l=s.props[a];if(Ju(l)){if(IN(l))return!0}else return!0}return!1})}),RN,tee=C(()=>{RN="calc(var(--left-pad) + var(--depth) * var(--step))"}),nee,fp,om=C(()=>{ze(),fp=po(nee||(nee=J([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),s=>s.isHighlighted==="self"?"#CCC":"#919191")}),M6,CC,ree,iee,see,oee,aee,lee,uee=C(()=>{A3(),M6=q(Fe()),ze(),CC=26,iee=ae.li(ree||(ree=J([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),CC,s=>s.enabled?"white":"#8f8f8f",s=>s.enabled?"normal":"not-allowed",s=>s.enabled?"rgba(63, 174, 191, 0.75)":"initial"),oee=ae.span(see||(see=J([""]))),aee=s=>M6.default.createElement(iee,{onClick:s.enabled?s.onClick:Gl,enabled:s.enabled,title:s.enabled?void 0:"Disabled"},M6.default.createElement(oee,null,M6.default.createElement(M6.default.Fragment,null,s.label))),lee=aee});function zSe(s){let a=(0,DN.useRef)(s);a.current=s,(0,DN.useEffect)(()=>{let l=h=>a.current(h);return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[])}var DN,VSe=C(()=>{DN=q(Fe())}),k6,cee,dee,hee,pee,fee,mee,gee,ON,vee=C(()=>{k6=q(Fe()),uee(),ze(),a0(),Fr(),cee=190,dee=!0,pee=ae.ul(hee||(hee=J([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),cee,Hl(.2,"#111"),Rr),mee=ae.div(fee||(fee=J([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),gee=k6.default.forwardRef((s,a)=>k6.default.createElement(pee,{ref:a},dee&&s.displayName?k6.default.createElement(mee,null,s.displayName):null,s.items.map((l,h)=>k6.default.createElement(lee,{key:"item-".concat(h),label:l.label,enabled:l.enabled!==!1,onClick:m=>{l.callback&&l.callback(m),s.onRequestClose()}})))),ON=gee}),yee,bee,PC,_ee,A6,wee,xee,jSe=C(()=>{YQ(),yee=q(Fe()),bee=q(Fe()),PC=q(Fe()),_ee=q(Ll()),bN(),uee(),rm(),VSe(),vee(),A6=20,wee=s=>{let[a,l]=(0,PC.useState)(null),h=_N(a),m=bC();(0,PC.useLayoutEffect)(()=>{if(!h||!a)return;let _={left:h.width/2,top:CC/2+(s.displayName?CC:0)},E={left:s.clickPoint.clientX-_.left,top:s.clickPoint.clientY-_.top};E.left<0?E.left=0:E.left+h.width>m.width&&(E.left=m.width-h.width),E.top<0?E.top=0:E.top+h.height>m.height&&(E.top=m.height-h.height),a.style.left=E.left+"px",a.style.top=E.top+"px";let P=I=>{(I.clientX<E.left-A6||I.clientX>E.left+h.width+A6||I.clientY<E.top-A6||I.clientY>E.top+h.height+A6)&&s.onRequestClose()};return window.addEventListener("mousemove",P),()=>{window.removeEventListener("mousemove",P)}},[h,a,s.clickPoint,m,s.onRequestClose]);let g=(0,bee.useContext)(T3);zSe(_=>{_.key==="Escape"&&s.onRequestClose()});let b=(0,yee.useMemo)(()=>{let _=Array.isArray(s.items)?s.items:s.items();return _.length>0?_:[{label:s.displayName?"No actions for ".concat(s.displayName):"No actions found",enabled:!1}]},[s.items]);return(0,_ee.createPortal)(PC.default.createElement(ON,{items:b,onRequestClose:s.onRequestClose,displayName:s.displayName,ref:l}),g)},xee=wee}),TC,See,Eee,HSe=C(()=>{TC=q(Fe()),See=(s,a)=>{let[l,h]=(0,TC.useState)({isOpen:!1}),m=(0,TC.useCallback)(()=>h({isOpen:!1}),[]);return(0,TC.useEffect)(()=>{if(!s||a.disabled===!0){h({isOpen:!1});return}let g=b=>{h({isOpen:!0,event:b}),b.preventDefault(),b.stopPropagation()};return s.addEventListener("contextmenu",g),()=>{s.removeEventListener("contextmenu",g)}},[s,a.disabled]),[l,m]},Eee=See});function ca(s,a){let[l,h]=Eee(s,a),[,m]=(0,z3.useContext)(J6);return(0,z3.useEffect)(()=>{var g;let b;return l.isOpen&&((g=a.onOpen)==null||g.call(a),b=m()),()=>b==null?void 0:b()},[l.isOpen,a.onOpen]),[l.isOpen?z3.default.createElement(xee,{items:a.menuItems,displayName:a.displayName,clickPoint:l.event,onRequestClose:h}):Cee,h,l.isOpen]}var z3,Cee,da=C(()=>{z3=q(Fe()),jSe(),HSe(),fF(),Cee=z3.default.createElement(z3.default.Fragment,null)});function mp(s,a){return a.length===0?s:Qc(s,a)}var MC=C(()=>{Gh()});function Pee(s,a){return s==null?null:s instanceof Element&&s.matches(a)?s:Pee(s.parentElement,a)}var GSe=C(()=>{});function I6(s,a){let l=s;for(let h of a)l=l[h];return l}var kC=C(()=>{});function WSe(s){let a=new AC.Atom(void 0),l=new AC.Atom({}),h=new AC.Atom({}),m=0;return{addRelatedFlags(g,b){let _=String(++m),E=b.map(P=>{let I={flag:P.flag},O=[P.affects,g,_];return h.setByPointer(R=>I6(R,O),I),O});return()=>{for(let P of E)h.setByPointer(I=>I6(I,P),void 0)}},usePresenceFlag(g){if(!s.enabled)return;let b=(0,R6.useMemo)(()=>{if(!g)return NN;let _=a.prism,E=(0,D6.pointerToPrism)(l.pointer[g]),P=(0,D6.pointerToPrism)(h.pointer[g]);return(0,D6.prism)(()=>{if(E.getValue())return 2;{let I=P.getValue(),O=_.getValue(),R=I&&O&&I[O];if(R){let A;for(let F of Object.values(R))F&&(A&&A>=F.flag||(A=F.flag));return A}return}})},[g]);return s3(b)},setUserHover(g){let b=a.get();b!==g&&(b&&l.setByPointer(_=>_[b],!1),a.set(g),g&&l.setByPointer(_=>_[g],!0))}}}function am(s){let a=R6.default.useContext(FN),l=a.usePresenceFlag(s);return{attrs:{[IC]:s},flag:l,useRelations(h,m){(0,LN.useEffect)(()=>s&&a.addRelatedFlags(s,h()),[s,...m])}}}function Tee(s){let a=R6.default.useContext(FN),l=cp("PresenceListeners");(0,LN.useEffect)(()=>{let h;if(!s)return;let m=g=>{if(g.target instanceof Node){let b=Pee(g.target,"[".concat(IC,"]"));if(b){let _=b.getAttribute(IC);h!==_&&(h=_,a.setUserHover(_||void 0),l._debug("Updated current hover",{itemKey:_}));return}h!=null&&(h=null,a.setUserHover(void 0),l._debug("Cleared current hover"))}};return s.addEventListener("mouseover",m),()=>{s.removeEventListener("mouseover",m),h!=null&&(h=null,l._debug("Cleared current hover as part of cleanup"))}},[s,a])}var R6,LN,D6,AC,NN,FN,IC,lm=C(()=>{R6=q(Fe()),LN=q(Fe()),dp(),D6=zt,AC=zt,Pn(),GSe(),kC(),NN=(0,D6.prism)(()=>{}),NN.keepHot(),FN=R6.default.createContext(WSe({enabled:!1})),IC="data-pi-key"}),mo,Mee,O6,kee,BN,gp,Aee,UN,Iee,Ree,Dee,RC,Oee,Lee,Nee,Fee,Bee,Uee,L6,zee,zN,DC=C(()=>{Fr(),a0(),mo=q(Fe()),ze(),lm(),O6=ae.div(Mee||(Mee=J([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),Hl(.2,"black")),BN=ae.div(kee||(kee=J([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),O6),gp={offColor:"#555",onColor:"#e0c917"},UN=ae(BN)(Aee||(Aee=J([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),s=>s.presence===2?"white":s.isOn?gp.onColor:gp.offColor),Ree=po(Iee||(Iee=J([`
  pointer-events: none !important;
`]))),RC=ae(BN)(Dee||(Dee=J([`
  color: `,`;

  `,`;
`])),s=>s.flag===2?"white":s.available?gp.onColor:gp.offColor,s=>s.available?Rr:Ree),Lee=ae(RC)(Oee||(Oee=J([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),O6),Fee=ae(RC)(Nee||(Nee=J([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),O6),(s=>{let a=ae.g(Bee||(Bee=J([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),RC);s.Prev=()=>mo.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mo.default.createElement(a,{transform:"translate(6 3)"},mo.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),s.Next=()=>mo.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mo.default.createElement(a,{transform:"translate(1 3)"},mo.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let l=ae.g(Uee||(Uee=J([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),UN);s.Cur=()=>mo.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mo.default.createElement(l,{transform:"translate(1 4)"},mo.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(L6||(L6={})),zee=s=>{var a,l,h,m,g;let b=am((a=s.prev)==null?void 0:a.itemKey),_=am(((l=s.cur)==null?void 0:l.type)==="on"?s.cur.itemKey:void 0),E=am((h=s.next)==null?void 0:h.itemKey);return mo.default.createElement(O6,null,mo.default.createElement(Lee,B({available:!!s.prev,onClick:(m=s.prev)==null?void 0:m.jump,flag:b.flag},b.attrs),mo.default.createElement(L6.Prev,null)),mo.default.createElement(UN,B({isOn:s.cur.type==="on",onClick:s.cur.toggle,presence:_.flag},_.attrs),mo.default.createElement(L6.Cur,null)),mo.default.createElement(Fee,B({available:!!s.next,onClick:(g=s.next)==null?void 0:g.jump,flag:E.flag},E.attrs),mo.default.createElement(L6.Next,null)))},zN=zee}),OC,N6,Vee,jee,Hee,Gee,Wee,$ee,Kee,F6,Xee=C(()=>{a0(),OC=q(Fe()),ze(),Me(),DC(),pp(),N6={defaultState:{color:Hl(.95,"#C4C4C4"),hoverColor:Hl(.15,gp.onColor)},withStaticOverride:{color:Hl(.85,"#C4C4C4"),hoverColor:Hl(.15,gp.onColor)}},jee=ae.div(Vee||(Vee=J([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),s=>s.hasStaticOverride?N6.withStaticOverride.color:N6.defaultState.color,s=>s.hasStaticOverride?N6.withStaticOverride.hoverColor:N6.defaultState.hoverColor),Gee=ae.div(Hee||(Hee=J([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),$ee=ae.div(Wee||(Wee=J([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),Kee=s=>{let{hasStaticOverride:a,obj:l,propConfig:h,pathToProp:m}=s;return OC.default.createElement(jee,{hasStaticOverride:a,onClick:()=>{de().transaction(({stateEditors:g})=>{for(let{path:b,conf:_}of T6(h,m)){if(Ju(_))continue;let E=L(B({},l.address),{pathToProp:b});g.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(E,h)}})},title:"Sequence this prop"},a?OC.default.createElement($ee,{title:"The default value is overridden"}):OC.default.createElement(Gee,{title:"This is the default value for this prop"}))},F6=Kee});function B6(s){return JSON.stringify(VN(s))}function VN(s){return V9(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=VN(s[l]),a),{}):Array.isArray(s)?s.map(VN):s}var $Se=C(()=>{fi()}),qee,U6,Yee=C(()=>{qee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",U6=(s=21)=>{let a="",l=s;for(;l--;)a+=qee[Math.random()*64|0];return a}});function Zee(){return U6(10)}function KSe(){return U6(10)}function XSe(){return U6(10)}var zs,bd=C(()=>{$Se(),Yee(),zs={forSheet(){return"sheet"},forSheetObject(s){return B6({o:s.address.objectKey})},forSheetObjectProp(s,a){return B6({o:s.address.objectKey,p:a})},forTrackKeyframe(s,a,l){return B6({o:s.address.objectKey,t:a,k:l})},forSheetObjectAggregateKeyframe(s,a){return zs.forCompoundPropAggregateKeyframe(s,[],a)},forSheetAggregateKeyframe(s,a){return B6({o:s.address.sheetId,pos:a})},forCompoundPropAggregateKeyframe(s,a,l){return B6({o:s.address.objectKey,p:a,pos:l})}}});function Qee(s,a,l){if(!a||a.data.keyframes.length===0)return Jee;let h=jN.get(a.data);if(h&&h[0]===l)return h[1];function m(b){if(!a)return;let _=a.data.keyframes[b];return _&&{kf:_,track:a,itemKey:zs.forTrackKeyframe(s,a.id,_.id)}}let g=(()=>{let b=a.data.keyframes.findIndex(E=>E.position>=l);if(b===-1)return{prev:m(a.data.keyframes.length-1)};let _=m(b);return _.kf.position===l?{prev:m(b-1),cur:_,next:m(b+1)}:{next:_,prev:m(b-1)}})();return jN.set(a.data,[l,g]),g}var jN,Jee,ete=C(()=>{bd(),jN=new WeakMap,Jee={}}),HN,tte=C(()=>{HN={}});function qSe(s,a,l){let h=(0,K0.getPointerParts)(s).path;return Qn(()=>{if(!IN(l))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:um.default.createElement(F6,{hasStaticOverride:!1,obj:a,pathToProp:h,propConfig:l})};let m=!!(0,K0.val)(Qc(de().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,K0.getPointerParts)(s).path)),g=[],b={beingScrubbed:m,contextMenuItems:g,controlIndicators:um.default.createElement(um.default.Fragment,null)},_=(0,K0.val)(a.template.getMapOfValidSequenceTracks_forStudio()),E=mp(_,h),P=E!==void 0&&Object.keys(E).length!==0,I=[],O=(0,K0.val)(a.template.getStaticButNotSequencedOverrides()),R=mp(O??HN,h)!==void 0;if(P)for(let A of T6(l,[])){if(Ju(A.conf))continue;let F=mp(E,A.path);typeof F!="string"?R=!0:I.push(F)}if((R||P)&&g.push({label:"Reset all to default",callback:()=>{de().transaction(({unset:A})=>{A(s)})}}),P&&g.push({label:"Make all static",callback:()=>{de().transaction(({stateEditors:A})=>{for(let{path:F,conf:N}of T6(l,[])){if(Ju(N))continue;let V=L(B({},a.address),{pathToProp:[...h,...F]}),W=I6(s,F);A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(L(B({},V),{value:a.getValueByPointer(W)}))}})}}),(!P||P&&R)&&g.push({label:"Sequence all",callback:()=>{de().transaction(({stateEditors:A})=>{for(let{path:F,conf:N}of T6(l,h)){if(Ju(N))continue;let V=L(B({},a.address),{pathToProp:F});A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(V,l)}})}}),P){let A=K0.prism.memo("controlIndicators",()=>um.default.createElement(YSe,{pointerToProp:s,obj:a,possibleSequenceTrackIds:E,listOfDescendantTrackIds:I}),[E,I]);return L(B({},b),{type:"HasSequences",controlIndicators:A})}else return L(B({},b),{type:"AllStatic",controlIndicators:um.default.createElement(F6,{hasStaticOverride:R,obj:a,pathToProp:h,propConfig:l})})},[])}function YSe({pointerToProp:s,obj:a,possibleSequenceTrackIds:l,listOfDescendantTrackIds:h}){return Qn(()=>{let m=(0,K0.getPointerParts)(s).path,g=(0,K0.val)(a.sheet.getSequence().positionPrism),b=h.map(A=>({trackId:A,track:(0,K0.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[A])})).filter(({track:A})=>!!A).map(A=>L(B({},A),{nearbies:Qee(a,{id:A.trackId,data:A.track,sheetObject:a},g)})),_=b.find(({nearbies:A})=>!!A.cur),E=b.every(({nearbies:A})=>!!A.cur),P=b.reduce((A,F)=>F.nearbies.prev&&(A===void 0||F.nearbies.prev.kf.position>A.kf.position)?F.nearbies.prev:A,void 0),I=b.reduce((A,F)=>F.nearbies.next&&(A===void 0||F.nearbies.next.kf.position<A.kf.position)?F.nearbies.next:A,void 0),O=()=>{E?de().transaction(A=>{A.unset(s)}):_?de().transaction(A=>{A.set(s,(0,K0.val)(s))}):de().transaction(A=>{A.set(s,(0,K0.val)(s))})},R={cur:_?{type:"on",itemKey:zs.forCompoundPropAggregateKeyframe(a,m,g),toggle:O}:{toggle:O,type:"off"},prev:P!==void 0?{position:P.kf.position,itemKey:zs.forCompoundPropAggregateKeyframe(a,m,P.kf.position),jump:()=>{a.sheet.getSequence().position=P.kf.position}}:void 0,next:I!==void 0?{position:I.kf.position,itemKey:zs.forCompoundPropAggregateKeyframe(a,m,I.kf.position),jump:()=>{a.sheet.getSequence().position=I.kf.position}}:void 0};return um.default.createElement(zN,B({},R))},[s,a,l,h])}var K0,um,ZSe=C(()=>{Me(),MC(),Pn(),K0=zt,Gh(),um=q(Fe()),Xee(),pp(),bd(),kC(),DC(),ete(),tte()});function QSe(){let s=0,a=new ite.Atom({hasLock:!1});return{replaceLock(l,h){let m=s++,g=a.get();return g.hasLock&&g.cleanup(),a.set({hasLock:!0,lockId:m,cleanup:h,deepPath:JSe(nte(l))}),function(){let b=a.get();b.hasLock&&b.lockId===m&&(b.cleanup(),a.set({hasLock:!1}))}},getIsPropHighlightedD(l){let h=I6(a.pointer.deepPath,nte(l));return(0,ste.prism)(()=>{let m=(0,rte.val)(h);return m===!0?"self":m?"descendent":null})}}}function nte(s){return[s.projectId,s.sheetId,s.objectKey,...s.pathToProp]}function JSe(s){let a={};return Zh(a,s,!0),a}var rte,ite,ste,LC,GN=C(()=>{rte=zt,ite=zt,ste=zt,kC(),n3(),LC=QSe()});function eEe(s,a){return JSON.stringify(s,a,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var tEe=C(()=>{});function ote(s,a=!0){try{return typeof s=="string"?s:typeof s=="function"||s instanceof Error?s.toString():a?eEe(s):JSON.stringify(s)}catch{return(s==null?void 0:s.name)||String(s)}}var nEe=C(()=>{tEe()});function rEe(s,a,l){s||(arguments.length>2?ate(a,l):ate(a))}function ate(s,a){let l=arguments.length>1,h=ote(typeof s=="function"?s():s),m=l?`
Instead found: `.concat(ote(a)):"";throw new hte("Invariant: ".concat(h).concat(m),a)}var lte,ute,cte,dte,hte,iEe=C(()=>{nEe(),lte=/^\s*at.+node:internal.+/gm,ute=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,cte=/^\s*(at|[^@]+@).+test\-helpers.+/gm,dte=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,hte=class extends Error{constructor(s,a){var l;super(s),xe(this,"found"),a!==void 0&&(this.found=a),this.stack=(l=this.stack)==null?void 0:l.replace(ute,"").replace(dte,"").replace(cte,"").replace(lte,"")}}});function sEe(s){return(0,NC.prism)(()=>{if(Array.isArray(s)){let a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l].getValue();return a}else{let a={};for(let l in s)a[l]=(0,NC.val)(s[l]);return a}})}function WN(s){let a=V3.default.memo(V3.default.forwardRef(function(l,h){let m=[],g={},b={ref:h};for(let I in l){let O=l[I];(0,NC.isPrism)(O)?(m.push(O),g[I]=O):b[I]=O}let _=(0,V3.useRef)(m.length);rEe(_.current===m.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:_.current,count:m.length});let E=(0,V3.useMemo)(()=>sEe(g),m),P=s3(E);return P&&V3.default.createElement(s,B(B({},b),P))}));return a.displayName="deriver(".concat(s.displayName,")"),a}var NC,V3,pte=C(()=>{NC=zt,Pn(),V3=q(Fe()),iEe()});function oEe(s,a,l){return(0,Xl.prism)(()=>{var h;let m=(0,Xl.getPointerParts)(s).path,g=a.getValueByPointer(s),b=Xl.prism.memo("editPropValue",()=>{let F=null;return{temporarilySetValue(N){F||(F=de().scrub()),F.capture(V=>{V.set(s,N)})},discardTemporaryValue(){F&&(F.discard(),F=null)},permanentlySetValue(N){F?(F.capture(V=>{V.set(s,N)}),F.commit(),F=null):de().transaction(V=>{V.set(s,N)})}}},[]),_={createAsset:F=>a.sheet.project.assetStorage.createAsset(F),getAssetUrl:F=>F.id?a.sheet.project.assetStorage.getAssetUrl(F.id):void 0},E=(0,Xl.val)(Qc(de().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,Xl.getPointerParts)(s).path))===!0,P=[],I=L(B(B({},b),_),{value:g,beingScrubbed:E,contextMenuItems:P,controlIndicators:j3.default.createElement(j3.default.Fragment,null)}),O=USe(l);if(O){let F=(0,Xl.val)(a.template.getMapOfValidSequenceTracks_forStudio()),N=mp(F,m);if(typeof N=="string"){P.push({label:"Make static",callback:()=>{de().transaction(({stateEditors:le})=>{let Ce=L(B({},a.address),{pathToProp:m});le.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(L(B({},Ce),{value:a.getValueByPointer(s)}))})}});let V=N,W=Xl.prism.sub("lcr",()=>{let le=(0,Xl.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[V]),Ce=(0,Xl.val)(a.sheet.getSequence().positionPrism);return Qee(a,le&&{data:le,id:V,sheetObject:a},Ce)},[V]),$;I.beingScrubbed?$="Sequenced_OnKeyframe_BeingScrubbed":W.cur?$="Sequenced_OnKeyframe":((h=W.prev)==null?void 0:h.kf.connectedRight)===!0?$="Sequenced_BeingInterpolated":$="Sequened_NotBeingInterpolated";let Z=()=>{W.cur?de().transaction(le=>{le.unset(s)}):de().transaction(le=>{le.set(s,I.value)})},ie={cur:W.cur?{type:"on",itemKey:W.cur.itemKey,toggle:Z}:{type:"off",toggle:Z},prev:W.prev!==void 0?{itemKey:W.prev.itemKey,position:W.prev.kf.position,jump:()=>{a.sheet.getSequence().position=W.prev.kf.position}}:void 0,next:W.next!==void 0?{itemKey:W.next.itemKey,position:W.next.kf.position,jump:()=>{a.sheet.getSequence().position=W.next.kf.position}}:void 0},re=j3.default.createElement(zN,B({},ie));return L(B({},I),{type:"Sequenced",shade:$,nearbyKeyframes:W,controlIndicators:re})}}let R=(0,Xl.val)(a.template.getStaticValues()),A=mp(R,m);return typeof A<"u"&&P.push({label:"Reset to default",callback:()=>{de().transaction(({unset:F})=>{F(s)})}}),O&&P.push({label:"Sequence",callback:()=>{de().transaction(({stateEditors:F})=>{let N=L(B({},a.address),{pathToProp:m});F.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(N,l)})}}),typeof A<"u"?L(B({},I),{type:"Static",shade:I.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:j3.default.createElement(F6,{hasStaticOverride:!0,obj:a,pathToProp:m,propConfig:l})}):L(B({},I),{type:"Default",shade:"Default",controlIndicators:j3.default.createElement(F6,{hasStaticOverride:!0,obj:a,pathToProp:m,propConfig:l})})})}function aEe(s,a,l){if(FC.has(s))return FC.get(s);{let h=oEe(s,a,l);return FC.set(s,h),h}}function $N(s,a,l){let h=aEe(s,a,l);return s3(h)}var j3,Xl,FC,KN=C(()=>{Gh(),j3=q(Fe()),Xl=zt,Me(),MC(),Pn(),pp(),Xee(),ete(),DC(),FC=new WeakMap});function lEe({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:h}){let m=$N(a,l,s);return go.default.createElement(eN,{editingTools:m,propConfig:s,value:m.value})}function uEe({pointerToProp:s,obj:a,propConfig:l,visualIndentation:h}){var m;let g=(m=l.label)!=null?m:td((0,z6.getPointerParts)(s).path),b=Object.entries(l.props),_=b.filter(([Z,ie])=>Ju(ie)),E=b.filter(([Z,ie])=>!Ju(ie)),[P,I]=Sr(null),O=qSe(s,a,l),[R]=ca(I,{menuItems:O.contextMenuItems}),A=_.length>0,F=(0,go.useMemo)(()=>LC.getIsPropHighlightedD(L(B({},a.address),{pathToProp:(0,z6.getPointerParts)(s).path})),[s]),N="".concat(a.address.projectId,",").concat(a.address.sheetId,",").concat(a.address.sheetInstanceId,",").concat(a.address.objectKey,",").concat((0,z6.getPointerParts)(s).path.join()),V=kte(l);(0,go.useLayoutEffect)(()=>{BC.has(N)||BC.set(N,new z6.Atom(V))},[N,l]);let W=BC.get(N),$=Qn(()=>W?(0,fte.val)(W.pointer):V,[W]);return go.default.createElement(gte,null,R,go.default.createElement(XN,{style:{"--depth":h-1}},go.default.createElement(bte,{isVectorProp:V},go.default.createElement(wte,null,O.controlIndicators),go.default.createElement(Ste,{isHighlighted:F,ref:P},go.default.createElement("span",null,g||"Props")),go.default.createElement(Cte,{isCollapsed:$,isVector:V,onClick:()=>{W==null||W.set(!W.get())}},go.default.createElement(LZ,null))),V&&$&&go.default.createElement(Ite,null,[...b].map(([Z,ie])=>go.default.createElement(lEe,{key:"prop-"+Z,propConfig:ie,pointerToProp:s[Z],obj:a})))),!$&&go.default.createElement(Mte,{style:{"--depth":h},depth:h,lastSubIsComposite:A},[...E,..._].map(([Z,ie])=>go.default.createElement(YN,{key:"prop-"+Z,propConfig:ie,pointerToProp:s[Z],obj:a,visualIndentation:h+1}))))}var z6,go,fte,mte,gte,vte,XN,yte,bte,_te,wte,xte,Ste,Ete,Cte,Pte,Tte,Mte,kte,Ate,Ite,Rte,BC,cEe=C(()=>{pp(),z6=zt,Q9(),a0(),go=q(Fe()),ze(),tee(),om(),Fr(),Nr(),$te(),da(),ZSe(),GN(),pte(),CZ(),KN(),Pn(),fte=zt,F3(),xC(),gte=ae.div(mte||(mte=J([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),Rr),XN=ae.div(vte||(vte=J([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),bte=ae.div(yte||(yte=J([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),RN,({isVectorProp:s})=>s?"width: calc(100% - var(--right-width))":""),wte=ae.div(_te||(_te=J([`
  flexshrink: 0;
`]))),Ste=WN(ae.div(xte||(xte=J([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>fp)),Cte=ae.span(Ete||(Ete=J([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>!s.isVector&&s.isCollapsed||s.isVector&&!s.isCollapsed?"visible":"hidden",XN,s=>s.isCollapsed?15:75),Pte=Hl(.05,"#282b2f"),Mte=ae.div(Tte||(Tte=J([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:s})=>s6(s*.03,Pte),s=>s.lastSubIsComposite?0:"4px"),kte=P6(s=>{let a=Object.entries(s.props);return a.length<=3&&a.every(([l,h])=>h.type==="number"&&["x","y","z"].includes(l))}),Ite=ae.div(Ate||(Ate=J([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),Rte=go.default.memo(uEe),BC=new Map});function dEe({isHighlighted:s}){return s==="self"?"#1857a4":s==="descendent"?"#0a2f5c":"initial"}var hEe=C(()=>{});function pEe({propConfig:s,pointerToProp:a,editingTools:l,children:h,isPropHighlightedD:m}){var g;let b=(g=s.label)!=null?g:td((0,qN.getPointerParts)(a).path),[_,E]=Sr(null),[P]=ca(E,{menuItems:l.contextMenuItems});return H3.default.createElement(Ote,{isHighlighted:m},P,H3.default.createElement(Nte,null,H3.default.createElement(zte,null,l.controlIndicators),H3.default.createElement(Bte,{isHighlighted:m,ref:_,title:["obj","props",...(0,qN.getPointerParts)(a).path].join(".")},b)),H3.default.createElement(jte,null,h))}var qN,H3,Dte,Ote,Lte,Nte,Fte,Bte,Ute,zte,Vte,jte,fEe=C(()=>{qN=zt,da(),Nr(),fi(),H3=q(Fe()),ze(),Fr(),om(),pte(),tee(),hEe(),Ote=WN(ae.div(Dte||(Dte=J([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),Rr,dEe)),Nte=ae.div(Lte||(Lte=J([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),RN),Bte=WN(ae.div(Fte||(Fte=J([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),fp)),zte=ae.div(Ute||(Ute=J([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),jte=ae.div(Vte||(Vte=J([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function mEe({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:h}){let m=$N(a,l,s),g=(0,V6.useMemo)(()=>LC.getIsPropHighlightedD(L(B({},l.address),{pathToProp:(0,Hte.getPointerParts)(a).path})),[a]);return V6.default.createElement(pEe,{editingTools:m,propConfig:s,pointerToProp:a,isPropHighlightedD:g},V6.default.createElement(h,{editingTools:m,propConfig:s,value:m.value}))}var V6,Hte,Gte,gEe=C(()=>{V6=q(Fe()),KN(),fEe(),Hte=zt,GN(),Gte=V6.default.memo(mEe)}),j6,Wte,YN,$te=C(()=>{j6=q(Fe()),eee(),cEe(),gEe(),Wte=({propConfig:s,visualIndentation:a,pointerToProp:l,obj:h})=>{if(s.type==="compound")return j6.default.createElement(Rte,{obj:h,visualIndentation:a,pointerToProp:l,propConfig:s});if(s.type==="enum")return j6.default.createElement(j6.default.Fragment,null);{let m=AN[s.type];return j6.default.createElement(Gte,{SimpleEditorComponent:m,obj:h,visualIndentation:a,pointerToProp:l,propConfig:s})}},YN=Wte});function Kte(s){return UC.has(s)||UC.set(s,(Xte++).toString()),UC.get(s)}var UC,Xte,qte=C(()=>{UC=new WeakMap,Xte=0}),G3,Yte,Zte,Qte,Jte,ene,tne,vEe=C(()=>{G3=q(Fe()),$te(),Pn(),qte(),ze(),Zte=ae.div(Yte||(Yte=J([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),Jte=ae.button(Qte||(Qte=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),ene=({objects:s})=>{let a=s[0],l=ir(a.template.configPointer),h=ir(a.template._temp_actionsPointer);return G3.default.createElement(G3.default.Fragment,null,G3.default.createElement(YN,{key:Kte(a),obj:a,pointerToProp:a.propsP,propConfig:l,visualIndentation:1}),G3.default.createElement(Zte,null,h&&Object.entries(h).map(([m,g])=>G3.default.createElement(Jte,{key:m,onClick:()=>{g(a.publicApi)}},m))))},tne=ene}),nne,rne,zC,ine=C(()=>{ze(),rne=ae.button(nne||(nne=J([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),s=>s.disabled?"none":"pointer",s=>s.disabled?.4:1),zC=rne}),yEe=C(()=>{}),sne,bEe=C(()=>{yEe(),sne=(s=21)=>{let a="",l=crypto.getRandomValues(new Uint8Array(s));for(;s--;){let h=l[s]&63;h<36?a+=h.toString(36):h<62?a+=(h-26).toString(36).toUpperCase():h<63?a+="_":a+="-"}return a}});function one(){return sne(16)}var ane=C(()=>{bEe()}),lne,_d,ZN,une,cne,dne,hne,pne=C(()=>{lne=zt,Nr(),_d=q(Fe()),ZN=(0,_d.createContext)(null),une=0,cne=()=>{let s=(0,_d.useMemo)(()=>une++,[]),{cur:a,set:l}=(0,_d.useContext)(ZN),[h,m]=Sr(!1),g=(0,_d.useCallback)((b,_)=>{l(b?s:-1,_)},[]);return(0,_d.useEffect)(()=>a.onStale(()=>{let b=a.getValue()===s;h.current!==b&&(h.current=b)}),[a,s]),[m,g]},dne=({children:s})=>{let a=(0,_d.useMemo)(()=>new lne.Atom(-1),[]),l=a.prism,h=(0,_d.useMemo)(()=>{let m;return(g,b)=>{let _=m!==void 0;m!==void 0&&(clearTimeout(m),m=void 0),b===0||_?a.set(g):m=setTimeout(()=>{a.set(g),m=void 0},b)}},[]);return _d.default.createElement(ZN.Provider,{value:{cur:l,set:h}},s)},hne=dne});function W3(s,a){let l=s.enabled!==!1,[h,m]=cne(),[g,b]=Sr(null);(0,mne.useEffect)(()=>{if(!l)return;let E=g.current;if(!E)return;let P=()=>{var O;return m(!0,(O=s.enterDelay)!=null?O:400)},I=()=>{var O;return m(!1,(O=s.exitDelay)!=null?O:200)};return E.addEventListener("mouseenter",P),E.addEventListener("mouseleave",I),()=>{E.removeEventListener("mouseenter",P),E.removeEventListener("mouseleave",I)}},[g,l,s.enterDelay,s.exitDelay]);let _=(0,fne.useContext)(T3);return[l&&h&&b?(0,gne.createPortal)(VC.default.createElement(EN,{children:a,target:b,onClickOutside:Gl,verticalPlacement:s.verticalPlacement,verticalGap:s.verticalGap}),_):VC.default.createElement(VC.default.Fragment,null),g,h]}var fne,mne,VC,gne,H6=C(()=>{Nr(),fne=q(Fe()),mne=q(Fe()),VC=q(Fe()),nJ(),gne=q(Ll()),pne(),rm(),A3()}),vne,yne,$3,jC=C(()=>{ze(),Zu(),yne=ae(Yu)(vne||(vne=J([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),$3=yne}),ec,bne,_ne,wne,xne,Sne,Ene,Cne,Pne,Tne,_Ee=C(()=>{Pn(),Me(),ec=q(Fe()),ze(),ane(),H6(),jC(),ine(),_ne=ae.div(bne||(bne=J([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),xne=ae.div(wne||(wne=J([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),Ene=ae.div(Sne||(Sne=J([`
  display: flex;
  gap: 8px;
`]))),Cne=({projectId:s})=>{let a=ir(de().atomP.ephemeral.coreByProject[s].loadingState);return a&&a.type==="browserStateIsNotBasedOnDiskState"?ec.default.createElement(Pne,{loadingState:a,projectId:s}):null},Pne=({projectId:s,loadingState:a})=>{let l=()=>{de().transaction(({drafts:E,stateEditors:P})=>{P.coreByProject.historic.revisionHistory.add({projectId:s,revision:a.onDiskState.revisionHistory[0]}),P.coreByProject.historic.revisionHistory.add({projectId:s,revision:one()}),E.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},h=()=>{de().transaction(({drafts:E})=>{E.historic.coreByProject[s]=a.onDiskState,E.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},[m,g]=W3({},()=>ec.default.createElement($3,null,"The browser's state will override the disk state.")),[b,_]=W3({},()=>ec.default.createElement($3,null,"The disk's state will override the browser's state."));return ec.default.createElement(_ne,null,ec.default.createElement(xne,null,"Browser state is not based on disk state."," ",ec.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),ec.default.createElement(Ene,null,m,ec.default.createElement(zC,{onClick:l,ref:g},"Use browser's state"),b,ec.default.createElement(zC,{onClick:h,ref:_},"Use disk state")))},Tne=Cne}),wEe=H((s,a)=>{(function(l){typeof s=="object"&&typeof a<"u"?a.exports=l():(typeof window<"u"?window:typeof Ki<"u"?Ki:typeof self<"u"?self:this).JSZip=l()})(function(){return function l(h,m,g){function b(P,I){if(!m[P]){if(!h[P]){var O=typeof QM=="function"&&QM;if(!I&&O)return O(P,!0);if(_)return _(P,!0);var R=new Error("Cannot find module '"+P+"'");throw R.code="MODULE_NOT_FOUND",R}var A=m[P]={exports:{}};h[P][0].call(A.exports,function(F){var N=h[P][1][F];return b(N||F)},A,A.exports,l,h,m,g)}return m[P].exports}for(var _=typeof QM=="function"&&QM,E=0;E<g.length;E++)b(g[E]);return b}({1:[function(l,h,m){var g=l("./utils"),b=l("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(E){for(var P,I,O,R,A,F,N,V=[],W=0,$=E.length,Z=$,ie=g.getTypeOf(E)!=="string";W<E.length;)Z=$-W,O=ie?(P=E[W++],I=W<$?E[W++]:0,W<$?E[W++]:0):(P=E.charCodeAt(W++),I=W<$?E.charCodeAt(W++):0,W<$?E.charCodeAt(W++):0),R=P>>2,A=(3&P)<<4|I>>4,F=1<Z?(15&I)<<2|O>>6:64,N=2<Z?63&O:64,V.push(_.charAt(R)+_.charAt(A)+_.charAt(F)+_.charAt(N));return V.join("")},m.decode=function(E){var P,I,O,R,A,F,N=0,V=0,W="data:";if(E.substr(0,W.length)===W)throw new Error("Invalid base64 input, it looks like a data url.");var $,Z=3*(E=E.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(E.charAt(E.length-1)===_.charAt(64)&&Z--,E.charAt(E.length-2)===_.charAt(64)&&Z--,Z%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=b.uint8array?new Uint8Array(0|Z):new Array(0|Z);N<E.length;)P=_.indexOf(E.charAt(N++))<<2|(R=_.indexOf(E.charAt(N++)))>>4,I=(15&R)<<4|(A=_.indexOf(E.charAt(N++)))>>2,O=(3&A)<<6|(F=_.indexOf(E.charAt(N++))),$[V++]=P,A!==64&&($[V++]=I),F!==64&&($[V++]=O);return $}},{"./support":30,"./utils":32}],2:[function(l,h,m){var g=l("./external"),b=l("./stream/DataWorker"),_=l("./stream/Crc32Probe"),E=l("./stream/DataLengthProbe");function P(I,O,R,A,F){this.compressedSize=I,this.uncompressedSize=O,this.crc32=R,this.compression=A,this.compressedContent=F}P.prototype={getContentWorker:function(){var I=new b(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new E("data_length")),O=this;return I.on("end",function(){if(this.streamInfo.data_length!==O.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new b(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},P.createWorkerFrom=function(I,O,R){return I.pipe(new _).pipe(new E("uncompressedSize")).pipe(O.compressWorker(R)).pipe(new E("compressedSize")).withStreamInfo("compression",O)},h.exports=P},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(l,h,m){var g=l("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},m.DEFLATE=l("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(l,h,m){var g=l("./utils"),b=function(){for(var _,E=[],P=0;P<256;P++){_=P;for(var I=0;I<8;I++)_=1&_?3988292384^_>>>1:_>>>1;E[P]=_}return E}();h.exports=function(_,E){return _!==void 0&&_.length?g.getTypeOf(_)!=="string"?function(P,I,O,R){var A=b,F=R+O;P^=-1;for(var N=R;N<F;N++)P=P>>>8^A[255&(P^I[N])];return-1^P}(0|E,_,_.length,0):function(P,I,O,R){var A=b,F=R+O;P^=-1;for(var N=R;N<F;N++)P=P>>>8^A[255&(P^I.charCodeAt(N))];return-1^P}(0|E,_,_.length,0):0}},{"./utils":32}],5:[function(l,h,m){m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(l,h,m){var g=null;g=typeof Promise<"u"?Promise:l("lie"),h.exports={Promise:g}},{lie:37}],7:[function(l,h,m){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=l("pako"),_=l("./utils"),E=l("./stream/GenericWorker"),P=g?"uint8array":"array";function I(O,R){E.call(this,"FlateWorker/"+O),this._pako=null,this._pakoAction=O,this._pakoOptions=R,this.meta={}}m.magic="\b\0",_.inherits(I,E),I.prototype.processChunk=function(O){this.meta=O.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(P,O.data),!1)},I.prototype.flush=function(){E.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var O=this;this._pako.onData=function(R){O.push({data:R,meta:O.meta})}},m.compressWorker=function(O){return new I("Deflate",O)},m.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(l,h,m){function g(A,F){var N,V="";for(N=0;N<F;N++)V+=String.fromCharCode(255&A),A>>>=8;return V}function b(A,F,N,V,W,$){var Z,ie,re=A.file,le=A.compression,Ce=$!==P.utf8encode,ye=_.transformTo("string",$(re.name)),we=_.transformTo("string",P.utf8encode(re.name)),Ne=re.comment,lt=_.transformTo("string",$(Ne)),ue=_.transformTo("string",P.utf8encode(Ne)),Le=we.length!==re.name.length,Q=ue.length!==Ne.length,He="",Bt="",Ie="",Re=re.dir,$e=re.date,Pt={crc32:0,compressedSize:0,uncompressedSize:0};F&&!N||(Pt.crc32=A.crc32,Pt.compressedSize=A.compressedSize,Pt.uncompressedSize=A.uncompressedSize);var ce=0;F&&(ce|=8),Ce||!Le&&!Q||(ce|=2048);var ge=0,it=0;Re&&(ge|=16),W==="UNIX"?(it=798,ge|=function(ct,Xe){var an=ct;return ct||(an=Xe?16893:33204),(65535&an)<<16}(re.unixPermissions,Re)):(it=20,ge|=function(ct){return 63&(ct||0)}(re.dosPermissions)),Z=$e.getUTCHours(),Z<<=6,Z|=$e.getUTCMinutes(),Z<<=5,Z|=$e.getUTCSeconds()/2,ie=$e.getUTCFullYear()-1980,ie<<=4,ie|=$e.getUTCMonth()+1,ie<<=5,ie|=$e.getUTCDate(),Le&&(Bt=g(1,1)+g(I(ye),4)+we,He+="up"+g(Bt.length,2)+Bt),Q&&(Ie=g(1,1)+g(I(lt),4)+ue,He+="uc"+g(Ie.length,2)+Ie);var at="";return at+=`
\0`,at+=g(ce,2),at+=le.magic,at+=g(Z,2),at+=g(ie,2),at+=g(Pt.crc32,4),at+=g(Pt.compressedSize,4),at+=g(Pt.uncompressedSize,4),at+=g(ye.length,2),at+=g(He.length,2),{fileRecord:O.LOCAL_FILE_HEADER+at+ye+He,dirRecord:O.CENTRAL_FILE_HEADER+g(it,2)+at+g(lt.length,2)+"\0\0\0\0"+g(ge,4)+g(V,4)+ye+He+lt}}var _=l("../utils"),E=l("../stream/GenericWorker"),P=l("../utf8"),I=l("../crc32"),O=l("../signature");function R(A,F,N,V){E.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=F,this.zipPlatform=N,this.encodeFileName=V,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(R,E),R.prototype.push=function(A){var F=A.meta.percent||0,N=this.entriesCount,V=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,E.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:N?(F+100*(N-V-1))/N:100}}))},R.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var F=this.streamFiles&&!A.file.dir;if(F){var N=b(A,F,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:N.fileRecord,meta:{percent:0}})}else this.accumulate=!0},R.prototype.closedSource=function(A){this.accumulate=!1;var F=this.streamFiles&&!A.file.dir,N=b(A,F,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(N.dirRecord),F)this.push({data:function(V){return O.DATA_DESCRIPTOR+g(V.crc32,4)+g(V.compressedSize,4)+g(V.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:N.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},R.prototype.flush=function(){for(var A=this.bytesWritten,F=0;F<this.dirRecords.length;F++)this.push({data:this.dirRecords[F],meta:{percent:100}});var N=this.bytesWritten-A,V=function(W,$,Z,ie,re){var le=_.transformTo("string",re(ie));return O.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(W,2)+g(W,2)+g($,4)+g(Z,4)+g(le.length,2)+le}(this.dirRecords.length,N,A,this.zipComment,this.encodeFileName);this.push({data:V,meta:{percent:100}})},R.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},R.prototype.registerPrevious=function(A){this._sources.push(A);var F=this;return A.on("data",function(N){F.processChunk(N)}),A.on("end",function(){F.closedSource(F.previous.streamInfo),F._sources.length?F.prepareNextSource():F.end()}),A.on("error",function(N){F.error(N)}),this},R.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},R.prototype.error=function(A){var F=this._sources;if(!E.prototype.error.call(this,A))return!1;for(var N=0;N<F.length;N++)try{F[N].error(A)}catch{}return!0},R.prototype.lock=function(){E.prototype.lock.call(this);for(var A=this._sources,F=0;F<A.length;F++)A[F].lock()},h.exports=R},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(l,h,m){var g=l("../compressions"),b=l("./ZipFileWorker");m.generateWorker=function(_,E,P){var I=new b(E.streamFiles,P,E.platform,E.encodeFileName),O=0;try{_.forEach(function(R,A){O++;var F=function($,Z){var ie=$||Z,re=g[ie];if(!re)throw new Error(ie+" is not a valid compression method !");return re}(A.options.compression,E.compression),N=A.options.compressionOptions||E.compressionOptions||{},V=A.dir,W=A.date;A._compressWorker(F,N).withStreamInfo("file",{name:R,dir:V,date:W,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(I)}),I.entriesCount=O}catch(R){I.error(R)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(l,h,m){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new g;for(var _ in this)typeof this[_]!="function"&&(b[_]=this[_]);return b}}(g.prototype=l("./object")).loadAsync=l("./load"),g.support=l("./support"),g.defaults=l("./defaults"),g.version="3.10.1",g.loadAsync=function(b,_){return new g().loadAsync(b,_)},g.external=l("./external"),h.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(l,h,m){var g=l("./utils"),b=l("./external"),_=l("./utf8"),E=l("./zipEntries"),P=l("./stream/Crc32Probe"),I=l("./nodejsUtils");function O(R){return new b.Promise(function(A,F){var N=R.decompressed.getContentWorker().pipe(new P);N.on("error",function(V){F(V)}).on("end",function(){N.streamInfo.crc32!==R.decompressed.crc32?F(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}h.exports=function(R,A){var F=this;return A=g.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),I.isNode&&I.isStream(R)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",R,!0,A.optimizedBinaryString,A.base64).then(function(N){var V=new E(A);return V.load(N),V}).then(function(N){var V=[b.Promise.resolve(N)],W=N.files;if(A.checkCRC32)for(var $=0;$<W.length;$++)V.push(O(W[$]));return b.Promise.all(V)}).then(function(N){for(var V=N.shift(),W=V.files,$=0;$<W.length;$++){var Z=W[$],ie=Z.fileNameStr,re=g.resolve(Z.fileNameStr);F.file(re,Z.decompressed,{binary:!0,optimizedBinaryString:!0,date:Z.date,dir:Z.dir,comment:Z.fileCommentStr.length?Z.fileCommentStr:null,unixPermissions:Z.unixPermissions,dosPermissions:Z.dosPermissions,createFolders:A.createFolders}),Z.dir||(F.file(re).unsafeOriginalName=ie)}return V.zipComment.length&&(F.comment=V.zipComment),F})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(l,h,m){var g=l("../utils"),b=l("../stream/GenericWorker");function _(E,P){b.call(this,"Nodejs stream input adapter for "+E),this._upstreamEnded=!1,this._bindStream(P)}g.inherits(_,b),_.prototype._bindStream=function(E){var P=this;(this._stream=E).pause(),E.on("data",function(I){P.push({data:I,meta:{percent:0}})}).on("error",function(I){P.isPaused?this.generatedError=I:P.error(I)}).on("end",function(){P.isPaused?P._upstreamEnded=!0:P.end()})},_.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},h.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(l,h,m){var g=l("readable-stream").Readable;function b(_,E,P){g.call(this,E),this._helper=_;var I=this;_.on("data",function(O,R){I.push(O)||I._helper.pause(),P&&P(R)}).on("error",function(O){I.emit("error",O)}).on("end",function(){I.push(null)})}l("../utils").inherits(b,g),b.prototype._read=function(){this._helper.resume()},h.exports=b},{"../utils":32,"readable-stream":16}],14:[function(l,h,m){h.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,b);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,b)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var b=new Buffer(g);return b.fill(0),b},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(l,h,m){function g(re,le,Ce){var ye,we=_.getTypeOf(le),Ne=_.extend(Ce||{},I);Ne.date=Ne.date||new Date,Ne.compression!==null&&(Ne.compression=Ne.compression.toUpperCase()),typeof Ne.unixPermissions=="string"&&(Ne.unixPermissions=parseInt(Ne.unixPermissions,8)),Ne.unixPermissions&&16384&Ne.unixPermissions&&(Ne.dir=!0),Ne.dosPermissions&&16&Ne.dosPermissions&&(Ne.dir=!0),Ne.dir&&(re=W(re)),Ne.createFolders&&(ye=V(re))&&$.call(this,ye,!0);var lt=we==="string"&&Ne.binary===!1&&Ne.base64===!1;Ce&&Ce.binary!==void 0||(Ne.binary=!lt),(le instanceof O&&le.uncompressedSize===0||Ne.dir||!le||le.length===0)&&(Ne.base64=!1,Ne.binary=!0,le="",Ne.compression="STORE",we="string");var ue=null;ue=le instanceof O||le instanceof E?le:F.isNode&&F.isStream(le)?new N(re,le):_.prepareContent(re,le,Ne.binary,Ne.optimizedBinaryString,Ne.base64);var Le=new R(re,ue,Ne);this.files[re]=Le}var b=l("./utf8"),_=l("./utils"),E=l("./stream/GenericWorker"),P=l("./stream/StreamHelper"),I=l("./defaults"),O=l("./compressedObject"),R=l("./zipObject"),A=l("./generate"),F=l("./nodejsUtils"),N=l("./nodejs/NodejsStreamInputAdapter"),V=function(re){re.slice(-1)==="/"&&(re=re.substring(0,re.length-1));var le=re.lastIndexOf("/");return 0<le?re.substring(0,le):""},W=function(re){return re.slice(-1)!=="/"&&(re+="/"),re},$=function(re,le){return le=le!==void 0?le:I.createFolders,re=W(re),this.files[re]||g.call(this,re,null,{dir:!0,createFolders:le}),this.files[re]};function Z(re){return Object.prototype.toString.call(re)==="[object RegExp]"}var ie={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(re){var le,Ce,ye;for(le in this.files)ye=this.files[le],(Ce=le.slice(this.root.length,le.length))&&le.slice(0,this.root.length)===this.root&&re(Ce,ye)},filter:function(re){var le=[];return this.forEach(function(Ce,ye){re(Ce,ye)&&le.push(ye)}),le},file:function(re,le,Ce){if(arguments.length!==1)return re=this.root+re,g.call(this,re,le,Ce),this;if(Z(re)){var ye=re;return this.filter(function(Ne,lt){return!lt.dir&&ye.test(Ne)})}var we=this.files[this.root+re];return we&&!we.dir?we:null},folder:function(re){if(!re)return this;if(Z(re))return this.filter(function(we,Ne){return Ne.dir&&re.test(we)});var le=this.root+re,Ce=$.call(this,le),ye=this.clone();return ye.root=Ce.name,ye},remove:function(re){re=this.root+re;var le=this.files[re];if(le||(re.slice(-1)!=="/"&&(re+="/"),le=this.files[re]),le&&!le.dir)delete this.files[re];else for(var Ce=this.filter(function(we,Ne){return Ne.name.slice(0,re.length)===re}),ye=0;ye<Ce.length;ye++)delete this.files[Ce[ye].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(re){var le,Ce={};try{if((Ce=_.extend(re||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=Ce.type.toLowerCase(),Ce.compression=Ce.compression.toUpperCase(),Ce.type==="binarystring"&&(Ce.type="string"),!Ce.type)throw new Error("No output type specified.");_.checkSupport(Ce.type),Ce.platform!=="darwin"&&Ce.platform!=="freebsd"&&Ce.platform!=="linux"&&Ce.platform!=="sunos"||(Ce.platform="UNIX"),Ce.platform==="win32"&&(Ce.platform="DOS");var ye=Ce.comment||this.comment||"";le=A.generateWorker(this,Ce,ye)}catch(we){(le=new E("error")).error(we)}return new P(le,Ce.type||"string",Ce.mimeType)},generateAsync:function(re,le){return this.generateInternalStream(re).accumulate(le)},generateNodeStream:function(re,le){return(re=re||{}).type||(re.type="nodebuffer"),this.generateInternalStream(re).toNodejsStream(le)}};h.exports=ie},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(l,h,m){h.exports=l("stream")},{stream:void 0}],17:[function(l,h,m){var g=l("./DataReader");function b(_){g.call(this,_);for(var E=0;E<this.data.length;E++)_[E]=255&_[E]}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data[this.zero+_]},b.prototype.lastIndexOfSignature=function(_){for(var E=_.charCodeAt(0),P=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),R=this.length-4;0<=R;--R)if(this.data[R]===E&&this.data[R+1]===P&&this.data[R+2]===I&&this.data[R+3]===O)return R-this.zero;return-1},b.prototype.readAndCheckSignature=function(_){var E=_.charCodeAt(0),P=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),R=this.readData(4);return E===R[0]&&P===R[1]&&I===R[2]&&O===R[3]},b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var E=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,E},h.exports=b},{"../utils":32,"./DataReader":18}],18:[function(l,h,m){var g=l("../utils");function b(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var E,P=0;for(this.checkOffset(_),E=this.index+_-1;E>=this.index;E--)P=(P<<8)+this.byteAt(E);return this.index+=_,P},readString:function(_){return g.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},h.exports=b},{"../utils":32}],19:[function(l,h,m){var g=l("./Uint8ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){this.checkOffset(_);var E=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,E},h.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(l,h,m){var g=l("./DataReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},b.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},b.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},b.prototype.readData=function(_){this.checkOffset(_);var E=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,E},h.exports=b},{"../utils":32,"./DataReader":18}],21:[function(l,h,m){var g=l("./ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var E=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,E},h.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(l,h,m){var g=l("../utils"),b=l("../support"),_=l("./ArrayReader"),E=l("./StringReader"),P=l("./NodeBufferReader"),I=l("./Uint8ArrayReader");h.exports=function(O){var R=g.getTypeOf(O);return g.checkSupport(R),R!=="string"||b.uint8array?R==="nodebuffer"?new P(O):b.uint8array?new I(g.transformTo("uint8array",O)):new _(g.transformTo("array",O)):new E(O)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(l,h,m){m.LOCAL_FILE_HEADER="PK",m.CENTRAL_FILE_HEADER="PK",m.CENTRAL_DIRECTORY_END="PK",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(l,h,m){var g=l("./GenericWorker"),b=l("../utils");function _(E){g.call(this,"ConvertWorker to "+E),this.destType=E}b.inherits(_,g),_.prototype.processChunk=function(E){this.push({data:b.transformTo(this.destType,E.data),meta:E.meta})},h.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(l,h,m){var g=l("./GenericWorker"),b=l("../crc32");function _(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l("../utils").inherits(_,g),_.prototype.processChunk=function(E){this.streamInfo.crc32=b(E.data,this.streamInfo.crc32||0),this.push(E)},h.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(l,h,m){var g=l("../utils"),b=l("./GenericWorker");function _(E){b.call(this,"DataLengthProbe for "+E),this.propName=E,this.withStreamInfo(E,0)}g.inherits(_,b),_.prototype.processChunk=function(E){if(E){var P=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=P+E.data.length}b.prototype.processChunk.call(this,E)},h.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(l,h,m){var g=l("../utils"),b=l("./GenericWorker");function _(E){b.call(this,"DataWorker");var P=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,E.then(function(I){P.dataIsReady=!0,P.data=I,P.max=I&&I.length||0,P.type=g.getTypeOf(I),P.isPaused||P._tickAndRepeat()},function(I){P.error(I)})}g.inherits(_,b),_.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var E=null,P=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":E=this.data.substring(this.index,P);break;case"uint8array":E=this.data.subarray(this.index,P);break;case"array":case"nodebuffer":E=this.data.slice(this.index,P)}return this.index=P,this.push({data:E,meta:{percent:this.max?this.index/this.max*100:0}})},h.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(l,h,m){function g(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,_){return this._listeners[b].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,_){if(this._listeners[b])for(var E=0;E<this._listeners[b].length;E++)this._listeners[b][E].call(this,_)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var _=this;return b.on("data",function(E){_.processChunk(E)}),b.on("end",function(){_.end()}),b.on("error",function(E){_.error(E)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,_){return this.extraStreamInfo[b]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},h.exports=g},{}],29:[function(l,h,m){var g=l("../utils"),b=l("./ConvertWorker"),_=l("./GenericWorker"),E=l("../base64"),P=l("../support"),I=l("../external"),O=null;if(P.nodestream)try{O=l("../nodejs/NodejsStreamOutputAdapter")}catch{}function R(F,N){return new I.Promise(function(V,W){var $=[],Z=F._internalType,ie=F._outputType,re=F._mimeType;F.on("data",function(le,Ce){$.push(le),N&&N(Ce)}).on("error",function(le){$=[],W(le)}).on("end",function(){try{var le=function(Ce,ye,we){switch(Ce){case"blob":return g.newBlob(g.transformTo("arraybuffer",ye),we);case"base64":return E.encode(ye);default:return g.transformTo(Ce,ye)}}(ie,function(Ce,ye){var we,Ne=0,lt=null,ue=0;for(we=0;we<ye.length;we++)ue+=ye[we].length;switch(Ce){case"string":return ye.join("");case"array":return Array.prototype.concat.apply([],ye);case"uint8array":for(lt=new Uint8Array(ue),we=0;we<ye.length;we++)lt.set(ye[we],Ne),Ne+=ye[we].length;return lt;case"nodebuffer":return Buffer.concat(ye);default:throw new Error("concat : unsupported type '"+Ce+"'")}}(Z,$),re);V(le)}catch(Ce){W(Ce)}$=[]}).resume()})}function A(F,N,V){var W=N;switch(N){case"blob":case"arraybuffer":W="uint8array";break;case"base64":W="string"}try{this._internalType=W,this._outputType=N,this._mimeType=V,g.checkSupport(W),this._worker=F.pipe(new b(W)),F.lock()}catch($){this._worker=new _("error"),this._worker.error($)}}A.prototype={accumulate:function(F){return R(this,F)},on:function(F,N){var V=this;return F==="data"?this._worker.on(F,function(W){N.call(V,W.data,W.meta)}):this._worker.on(F,function(){g.delay(N,arguments,V)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(F){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new O(this,{objectMode:this._outputType!=="nodebuffer"},F)}},h.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(l,h,m){if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=typeof Buffer<"u",m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var g=new ArrayBuffer(0);try{m.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(g),m.blob=b.getBlob("application/zip").size===0}catch{m.blob=!1}}}try{m.nodestream=!!l("readable-stream").Readable}catch{m.nodestream=!1}},{"readable-stream":16}],31:[function(l,h,m){for(var g=l("./utils"),b=l("./support"),_=l("./nodejsUtils"),E=l("./stream/GenericWorker"),P=new Array(256),I=0;I<256;I++)P[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;P[254]=P[254]=1;function O(){E.call(this,"utf-8 decode"),this.leftOver=null}function R(){E.call(this,"utf-8 encode")}m.utf8encode=function(A){return b.nodebuffer?_.newBufferFrom(A,"utf-8"):function(F){var N,V,W,$,Z,ie=F.length,re=0;for($=0;$<ie;$++)(64512&(V=F.charCodeAt($)))==55296&&$+1<ie&&(64512&(W=F.charCodeAt($+1)))==56320&&(V=65536+(V-55296<<10)+(W-56320),$++),re+=V<128?1:V<2048?2:V<65536?3:4;for(N=b.uint8array?new Uint8Array(re):new Array(re),$=Z=0;Z<re;$++)(64512&(V=F.charCodeAt($)))==55296&&$+1<ie&&(64512&(W=F.charCodeAt($+1)))==56320&&(V=65536+(V-55296<<10)+(W-56320),$++),V<128?N[Z++]=V:(V<2048?N[Z++]=192|V>>>6:(V<65536?N[Z++]=224|V>>>12:(N[Z++]=240|V>>>18,N[Z++]=128|V>>>12&63),N[Z++]=128|V>>>6&63),N[Z++]=128|63&V);return N}(A)},m.utf8decode=function(A){return b.nodebuffer?g.transformTo("nodebuffer",A).toString("utf-8"):function(F){var N,V,W,$,Z=F.length,ie=new Array(2*Z);for(N=V=0;N<Z;)if((W=F[N++])<128)ie[V++]=W;else if(4<($=P[W]))ie[V++]=65533,N+=$-1;else{for(W&=$===2?31:$===3?15:7;1<$&&N<Z;)W=W<<6|63&F[N++],$--;1<$?ie[V++]=65533:W<65536?ie[V++]=W:(W-=65536,ie[V++]=55296|W>>10&1023,ie[V++]=56320|1023&W)}return ie.length!==V&&(ie.subarray?ie=ie.subarray(0,V):ie.length=V),g.applyFromCharCode(ie)}(A=g.transformTo(b.uint8array?"uint8array":"array",A))},g.inherits(O,E),O.prototype.processChunk=function(A){var F=g.transformTo(b.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var N=F;(F=new Uint8Array(N.length+this.leftOver.length)).set(this.leftOver,0),F.set(N,this.leftOver.length)}else F=this.leftOver.concat(F);this.leftOver=null}var V=function($,Z){var ie;for((Z=Z||$.length)>$.length&&(Z=$.length),ie=Z-1;0<=ie&&(192&$[ie])==128;)ie--;return ie<0||ie===0?Z:ie+P[$[ie]]>Z?ie:Z}(F),W=F;V!==F.length&&(b.uint8array?(W=F.subarray(0,V),this.leftOver=F.subarray(V,F.length)):(W=F.slice(0,V),this.leftOver=F.slice(V,F.length))),this.push({data:m.utf8decode(W),meta:A.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=O,g.inherits(R,E),R.prototype.processChunk=function(A){this.push({data:m.utf8encode(A.data),meta:A.meta})},m.Utf8EncodeWorker=R},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(l,h,m){var g=l("./support"),b=l("./base64"),_=l("./nodejsUtils"),E=l("./external");function P(N){return N}function I(N,V){for(var W=0;W<N.length;++W)V[W]=255&N.charCodeAt(W);return V}l("setimmediate"),m.newBlob=function(N,V){m.checkSupport("blob");try{return new Blob([N],{type:V})}catch{try{var W=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return W.append(N),W.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var O={stringifyByChunk:function(N,V,W){var $=[],Z=0,ie=N.length;if(ie<=W)return String.fromCharCode.apply(null,N);for(;Z<ie;)V==="array"||V==="nodebuffer"?$.push(String.fromCharCode.apply(null,N.slice(Z,Math.min(Z+W,ie)))):$.push(String.fromCharCode.apply(null,N.subarray(Z,Math.min(Z+W,ie)))),Z+=W;return $.join("")},stringifyByChar:function(N){for(var V="",W=0;W<N.length;W++)V+=String.fromCharCode(N[W]);return V},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}}()}};function R(N){var V=65536,W=m.getTypeOf(N),$=!0;if(W==="uint8array"?$=O.applyCanBeUsed.uint8array:W==="nodebuffer"&&($=O.applyCanBeUsed.nodebuffer),$)for(;1<V;)try{return O.stringifyByChunk(N,W,V)}catch{V=Math.floor(V/2)}return O.stringifyByChar(N)}function A(N,V){for(var W=0;W<N.length;W++)V[W]=N[W];return V}m.applyFromCharCode=R;var F={};F.string={string:P,array:function(N){return I(N,new Array(N.length))},arraybuffer:function(N){return F.string.uint8array(N).buffer},uint8array:function(N){return I(N,new Uint8Array(N.length))},nodebuffer:function(N){return I(N,_.allocBuffer(N.length))}},F.array={string:R,array:P,arraybuffer:function(N){return new Uint8Array(N).buffer},uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return _.newBufferFrom(N)}},F.arraybuffer={string:function(N){return R(new Uint8Array(N))},array:function(N){return A(new Uint8Array(N),new Array(N.byteLength))},arraybuffer:P,uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return _.newBufferFrom(new Uint8Array(N))}},F.uint8array={string:R,array:function(N){return A(N,new Array(N.length))},arraybuffer:function(N){return N.buffer},uint8array:P,nodebuffer:function(N){return _.newBufferFrom(N)}},F.nodebuffer={string:R,array:function(N){return A(N,new Array(N.length))},arraybuffer:function(N){return F.nodebuffer.uint8array(N).buffer},uint8array:function(N){return A(N,new Uint8Array(N.length))},nodebuffer:P},m.transformTo=function(N,V){if(V=V||"",!N)return V;m.checkSupport(N);var W=m.getTypeOf(V);return F[W][N](V)},m.resolve=function(N){for(var V=N.split("/"),W=[],$=0;$<V.length;$++){var Z=V[$];Z==="."||Z===""&&$!==0&&$!==V.length-1||(Z===".."?W.pop():W.push(Z))}return W.join("/")},m.getTypeOf=function(N){return typeof N=="string"?"string":Object.prototype.toString.call(N)==="[object Array]"?"array":g.nodebuffer&&_.isBuffer(N)?"nodebuffer":g.uint8array&&N instanceof Uint8Array?"uint8array":g.arraybuffer&&N instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(N){if(!g[N.toLowerCase()])throw new Error(N+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(N){var V,W,$="";for(W=0;W<(N||"").length;W++)$+="\\x"+((V=N.charCodeAt(W))<16?"0":"")+V.toString(16).toUpperCase();return $},m.delay=function(N,V,W){setImmediate(function(){N.apply(W||null,V||[])})},m.inherits=function(N,V){function W(){}W.prototype=V.prototype,N.prototype=new W},m.extend=function(){var N,V,W={};for(N=0;N<arguments.length;N++)for(V in arguments[N])Object.prototype.hasOwnProperty.call(arguments[N],V)&&W[V]===void 0&&(W[V]=arguments[N][V]);return W},m.prepareContent=function(N,V,W,$,Z){return E.Promise.resolve(V).then(function(ie){return g.blob&&(ie instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ie))!==-1)&&typeof FileReader<"u"?new E.Promise(function(re,le){var Ce=new FileReader;Ce.onload=function(ye){re(ye.target.result)},Ce.onerror=function(ye){le(ye.target.error)},Ce.readAsArrayBuffer(ie)}):ie}).then(function(ie){var re=m.getTypeOf(ie);return re?(re==="arraybuffer"?ie=m.transformTo("uint8array",ie):re==="string"&&(Z?ie=b.decode(ie):W&&$!==!0&&(ie=function(le){return I(le,g.uint8array?new Uint8Array(le.length):new Array(le.length))}(ie))),ie):E.Promise.reject(new Error("Can't read the data of '"+N+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(l,h,m){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./signature"),E=l("./zipEntry"),P=l("./support");function I(O){this.files=[],this.loadOptions=O}I.prototype={checkSignature:function(O){if(!this.reader.readAndCheckSignature(O)){this.reader.index-=4;var R=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(R)+", expected "+b.pretty(O)+")")}},isSignature:function(O,R){var A=this.reader.index;this.reader.setIndex(O);var F=this.reader.readString(4)===R;return this.reader.setIndex(A),F},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var O=this.reader.readData(this.zipCommentLength),R=P.uint8array?"uint8array":"array",A=b.transformTo(R,O);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var O,R,A,F=this.zip64EndOfCentralSize-44;0<F;)O=this.reader.readInt(2),R=this.reader.readInt(4),A=this.reader.readData(R),this.zip64ExtensibleData[O]={id:O,length:R,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var O,R;for(O=0;O<this.files.length;O++)R=this.files[O],this.reader.setIndex(R.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),R.readLocalPart(this.reader),R.handleUTF8(),R.processAttributes()},readCentralDir:function(){var O;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(O=new E({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(O);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var O=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(O<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(O);var R=O;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(O=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(O),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var F=R-A;if(0<F)this.isSignature(R,_.CENTRAL_FILE_HEADER)||(this.reader.zero=F);else if(F<0)throw new Error("Corrupted zip: missing "+Math.abs(F)+" bytes.")},prepareReader:function(O){this.reader=g(O)},load:function(O){this.prepareReader(O),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},h.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(l,h,m){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./compressedObject"),E=l("./crc32"),P=l("./utf8"),I=l("./compressions"),O=l("./support");function R(A,F){this.options=A,this.loadOptions=F}R.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var F,N;if(A.skip(22),this.fileNameLength=A.readInt(2),N=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(N),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((F=function(V){for(var W in I)if(Object.prototype.hasOwnProperty.call(I,W)&&I[W].magic===V)return I[W];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,F,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var F=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(F),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=g(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var F,N,V,W=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<W;)F=A.readInt(2),N=A.readInt(2),V=A.readData(N),this.extraFields[F]={id:F,length:N,value:V};A.setIndex(W)},handleUTF8:function(){var A=O.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=P.utf8decode(this.fileName),this.fileCommentStr=P.utf8decode(this.fileComment);else{var F=this.findExtraFieldUnicodePath();if(F!==null)this.fileNameStr=F;else{var N=b.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(N)}var V=this.findExtraFieldUnicodeComment();if(V!==null)this.fileCommentStr=V;else{var W=b.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(W)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var F=g(A.value);return F.readInt(1)!==1||E(this.fileName)!==F.readInt(4)?null:P.utf8decode(F.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var F=g(A.value);return F.readInt(1)!==1||E(this.fileComment)!==F.readInt(4)?null:P.utf8decode(F.readData(A.length-5))}return null}},h.exports=R},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(l,h,m){function g(F,N,V){this.name=F,this.dir=V.dir,this.date=V.date,this.comment=V.comment,this.unixPermissions=V.unixPermissions,this.dosPermissions=V.dosPermissions,this._data=N,this._dataBinary=V.binary,this.options={compression:V.compression,compressionOptions:V.compressionOptions}}var b=l("./stream/StreamHelper"),_=l("./stream/DataWorker"),E=l("./utf8"),P=l("./compressedObject"),I=l("./stream/GenericWorker");g.prototype={internalStream:function(F){var N=null,V="string";try{if(!F)throw new Error("No output type specified.");var W=(V=F.toLowerCase())==="string"||V==="text";V!=="binarystring"&&V!=="text"||(V="string"),N=this._decompressWorker();var $=!this._dataBinary;$&&!W&&(N=N.pipe(new E.Utf8EncodeWorker)),!$&&W&&(N=N.pipe(new E.Utf8DecodeWorker))}catch(Z){(N=new I("error")).error(Z)}return new b(N,V,"")},async:function(F,N){return this.internalStream(F).accumulate(N)},nodeStream:function(F,N){return this.internalStream(F||"nodebuffer").toNodejsStream(N)},_compressWorker:function(F,N){if(this._data instanceof P&&this._data.compression.magic===F.magic)return this._data.getCompressedWorker();var V=this._decompressWorker();return this._dataBinary||(V=V.pipe(new E.Utf8EncodeWorker)),P.createWorkerFrom(V,F,N)},_decompressWorker:function(){return this._data instanceof P?this._data.getContentWorker():this._data instanceof I?this._data:new _(this._data)}};for(var O=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],R=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<O.length;A++)g.prototype[O[A]]=R;h.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(l,h,m){(function(g){var b,_,E=g.MutationObserver||g.WebKitMutationObserver;if(E){var P=0,I=new E(F),O=g.document.createTextNode("");I.observe(O,{characterData:!0}),b=function(){O.data=P=++P%2}}else if(g.setImmediate||g.MessageChannel===void 0)b="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var N=g.document.createElement("script");N.onreadystatechange=function(){F(),N.onreadystatechange=null,N.parentNode.removeChild(N),N=null},g.document.documentElement.appendChild(N)}:function(){setTimeout(F,0)};else{var R=new g.MessageChannel;R.port1.onmessage=F,b=function(){R.port2.postMessage(0)}}var A=[];function F(){var N,V;_=!0;for(var W=A.length;W;){for(V=A,A=[],N=-1;++N<W;)V[N]();W=A.length}_=!1}h.exports=function(N){A.push(N)!==1||_||b()}}).call(this,typeof Ki<"u"?Ki:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(l,h,m){var g=l("immediate");function b(){}var _={},E=["REJECTED"],P=["FULFILLED"],I=["PENDING"];function O(W){if(typeof W!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,W!==b&&N(this,W)}function R(W,$,Z){this.promise=W,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof Z=="function"&&(this.onRejected=Z,this.callRejected=this.otherCallRejected)}function A(W,$,Z){g(function(){var ie;try{ie=$(Z)}catch(re){return _.reject(W,re)}ie===W?_.reject(W,new TypeError("Cannot resolve promise with itself")):_.resolve(W,ie)})}function F(W){var $=W&&W.then;if(W&&(typeof W=="object"||typeof W=="function")&&typeof $=="function")return function(){$.apply(W,arguments)}}function N(W,$){var Z=!1;function ie(Ce){Z||(Z=!0,_.reject(W,Ce))}function re(Ce){Z||(Z=!0,_.resolve(W,Ce))}var le=V(function(){$(re,ie)});le.status==="error"&&ie(le.value)}function V(W,$){var Z={};try{Z.value=W($),Z.status="success"}catch(ie){Z.status="error",Z.value=ie}return Z}(h.exports=O).prototype.finally=function(W){if(typeof W!="function")return this;var $=this.constructor;return this.then(function(Z){return $.resolve(W()).then(function(){return Z})},function(Z){return $.resolve(W()).then(function(){throw Z})})},O.prototype.catch=function(W){return this.then(null,W)},O.prototype.then=function(W,$){if(typeof W!="function"&&this.state===P||typeof $!="function"&&this.state===E)return this;var Z=new this.constructor(b);return this.state!==I?A(Z,this.state===P?W:$,this.outcome):this.queue.push(new R(Z,W,$)),Z},R.prototype.callFulfilled=function(W){_.resolve(this.promise,W)},R.prototype.otherCallFulfilled=function(W){A(this.promise,this.onFulfilled,W)},R.prototype.callRejected=function(W){_.reject(this.promise,W)},R.prototype.otherCallRejected=function(W){A(this.promise,this.onRejected,W)},_.resolve=function(W,$){var Z=V(F,$);if(Z.status==="error")return _.reject(W,Z.value);var ie=Z.value;if(ie)N(W,ie);else{W.state=P,W.outcome=$;for(var re=-1,le=W.queue.length;++re<le;)W.queue[re].callFulfilled($)}return W},_.reject=function(W,$){W.state=E,W.outcome=$;for(var Z=-1,ie=W.queue.length;++Z<ie;)W.queue[Z].callRejected($);return W},O.resolve=function(W){return W instanceof this?W:_.resolve(new this(b),W)},O.reject=function(W){var $=new this(b);return _.reject($,W)},O.all=function(W){var $=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=W.length,ie=!1;if(!Z)return this.resolve([]);for(var re=new Array(Z),le=0,Ce=-1,ye=new this(b);++Ce<Z;)we(W[Ce],Ce);return ye;function we(Ne,lt){$.resolve(Ne).then(function(ue){re[lt]=ue,++le!==Z||ie||(ie=!0,_.resolve(ye,re))},function(ue){ie||(ie=!0,_.reject(ye,ue))})}},O.race=function(W){var $=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=W.length,ie=!1;if(!Z)return this.resolve([]);for(var re=-1,le=new this(b);++re<Z;)Ce=W[re],$.resolve(Ce).then(function(ye){ie||(ie=!0,_.resolve(le,ye))},function(ye){ie||(ie=!0,_.reject(le,ye))});var Ce;return le}},{immediate:36}],38:[function(l,h,m){var g={};(0,l("./lib/utils/common").assign)(g,l("./lib/deflate"),l("./lib/inflate"),l("./lib/zlib/constants")),h.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(l,h,m){var g=l("./zlib/deflate"),b=l("./utils/common"),_=l("./utils/strings"),E=l("./zlib/messages"),P=l("./zlib/zstream"),I=Object.prototype.toString,O=0,R=-1,A=0,F=8;function N(W){if(!(this instanceof N))return new N(W);this.options=b.assign({level:R,method:F,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},W||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P,this.strm.avail_out=0;var Z=g.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(Z!==O)throw new Error(E[Z]);if($.header&&g.deflateSetHeader(this.strm,$.header),$.dictionary){var ie;if(ie=typeof $.dictionary=="string"?_.string2buf($.dictionary):I.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(Z=g.deflateSetDictionary(this.strm,ie))!==O)throw new Error(E[Z]);this._dict_set=!0}}function V(W,$){var Z=new N($);if(Z.push(W,!0),Z.err)throw Z.msg||E[Z.err];return Z.result}N.prototype.push=function(W,$){var Z,ie,re=this.strm,le=this.options.chunkSize;if(this.ended)return!1;ie=$===~~$?$:$===!0?4:0,typeof W=="string"?re.input=_.string2buf(W):I.call(W)==="[object ArrayBuffer]"?re.input=new Uint8Array(W):re.input=W,re.next_in=0,re.avail_in=re.input.length;do{if(re.avail_out===0&&(re.output=new b.Buf8(le),re.next_out=0,re.avail_out=le),(Z=g.deflate(re,ie))!==1&&Z!==O)return this.onEnd(Z),!(this.ended=!0);re.avail_out!==0&&(re.avail_in!==0||ie!==4&&ie!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(b.shrinkBuf(re.output,re.next_out))):this.onData(b.shrinkBuf(re.output,re.next_out)))}while((0<re.avail_in||re.avail_out===0)&&Z!==1);return ie===4?(Z=g.deflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===O):ie!==2||(this.onEnd(O),!(re.avail_out=0))},N.prototype.onData=function(W){this.chunks.push(W)},N.prototype.onEnd=function(W){W===O&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=W,this.msg=this.strm.msg},m.Deflate=N,m.deflate=V,m.deflateRaw=function(W,$){return($=$||{}).raw=!0,V(W,$)},m.gzip=function(W,$){return($=$||{}).gzip=!0,V(W,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(l,h,m){var g=l("./zlib/inflate"),b=l("./utils/common"),_=l("./utils/strings"),E=l("./zlib/constants"),P=l("./zlib/messages"),I=l("./zlib/zstream"),O=l("./zlib/gzheader"),R=Object.prototype.toString;function A(N){if(!(this instanceof A))return new A(N);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},N||{});var V=this.options;V.raw&&0<=V.windowBits&&V.windowBits<16&&(V.windowBits=-V.windowBits,V.windowBits===0&&(V.windowBits=-15)),!(0<=V.windowBits&&V.windowBits<16)||N&&N.windowBits||(V.windowBits+=32),15<V.windowBits&&V.windowBits<48&&!(15&V.windowBits)&&(V.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var W=g.inflateInit2(this.strm,V.windowBits);if(W!==E.Z_OK)throw new Error(P[W]);this.header=new O,g.inflateGetHeader(this.strm,this.header)}function F(N,V){var W=new A(V);if(W.push(N,!0),W.err)throw W.msg||P[W.err];return W.result}A.prototype.push=function(N,V){var W,$,Z,ie,re,le,Ce=this.strm,ye=this.options.chunkSize,we=this.options.dictionary,Ne=!1;if(this.ended)return!1;$=V===~~V?V:V===!0?E.Z_FINISH:E.Z_NO_FLUSH,typeof N=="string"?Ce.input=_.binstring2buf(N):R.call(N)==="[object ArrayBuffer]"?Ce.input=new Uint8Array(N):Ce.input=N,Ce.next_in=0,Ce.avail_in=Ce.input.length;do{if(Ce.avail_out===0&&(Ce.output=new b.Buf8(ye),Ce.next_out=0,Ce.avail_out=ye),(W=g.inflate(Ce,E.Z_NO_FLUSH))===E.Z_NEED_DICT&&we&&(le=typeof we=="string"?_.string2buf(we):R.call(we)==="[object ArrayBuffer]"?new Uint8Array(we):we,W=g.inflateSetDictionary(this.strm,le)),W===E.Z_BUF_ERROR&&Ne===!0&&(W=E.Z_OK,Ne=!1),W!==E.Z_STREAM_END&&W!==E.Z_OK)return this.onEnd(W),!(this.ended=!0);Ce.next_out&&(Ce.avail_out!==0&&W!==E.Z_STREAM_END&&(Ce.avail_in!==0||$!==E.Z_FINISH&&$!==E.Z_SYNC_FLUSH)||(this.options.to==="string"?(Z=_.utf8border(Ce.output,Ce.next_out),ie=Ce.next_out-Z,re=_.buf2string(Ce.output,Z),Ce.next_out=ie,Ce.avail_out=ye-ie,ie&&b.arraySet(Ce.output,Ce.output,Z,ie,0),this.onData(re)):this.onData(b.shrinkBuf(Ce.output,Ce.next_out)))),Ce.avail_in===0&&Ce.avail_out===0&&(Ne=!0)}while((0<Ce.avail_in||Ce.avail_out===0)&&W!==E.Z_STREAM_END);return W===E.Z_STREAM_END&&($=E.Z_FINISH),$===E.Z_FINISH?(W=g.inflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===E.Z_OK):$!==E.Z_SYNC_FLUSH||(this.onEnd(E.Z_OK),!(Ce.avail_out=0))},A.prototype.onData=function(N){this.chunks.push(N)},A.prototype.onEnd=function(N){N===E.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},m.Inflate=A,m.inflate=F,m.inflateRaw=function(N,V){return(V=V||{}).raw=!0,F(N,V)},m.ungzip=F},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(l,h,m){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(E){for(var P=Array.prototype.slice.call(arguments,1);P.length;){var I=P.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var O in I)I.hasOwnProperty(O)&&(E[O]=I[O])}}return E},m.shrinkBuf=function(E,P){return E.length===P?E:E.subarray?E.subarray(0,P):(E.length=P,E)};var b={arraySet:function(E,P,I,O,R){if(P.subarray&&E.subarray)E.set(P.subarray(I,I+O),R);else for(var A=0;A<O;A++)E[R+A]=P[I+A]},flattenChunks:function(E){var P,I,O,R,A,F;for(P=O=0,I=E.length;P<I;P++)O+=E[P].length;for(F=new Uint8Array(O),P=R=0,I=E.length;P<I;P++)A=E[P],F.set(A,R),R+=A.length;return F}},_={arraySet:function(E,P,I,O,R){for(var A=0;A<O;A++)E[R+A]=P[I+A]},flattenChunks:function(E){return[].concat.apply([],E)}};m.setTyped=function(E){E?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,b)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,_))},m.setTyped(g)},{}],42:[function(l,h,m){var g=l("./common"),b=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var E=new g.Buf8(256),P=0;P<256;P++)E[P]=252<=P?6:248<=P?5:240<=P?4:224<=P?3:192<=P?2:1;function I(O,R){if(R<65537&&(O.subarray&&_||!O.subarray&&b))return String.fromCharCode.apply(null,g.shrinkBuf(O,R));for(var A="",F=0;F<R;F++)A+=String.fromCharCode(O[F]);return A}E[254]=E[254]=1,m.string2buf=function(O){var R,A,F,N,V,W=O.length,$=0;for(N=0;N<W;N++)(64512&(A=O.charCodeAt(N)))==55296&&N+1<W&&(64512&(F=O.charCodeAt(N+1)))==56320&&(A=65536+(A-55296<<10)+(F-56320),N++),$+=A<128?1:A<2048?2:A<65536?3:4;for(R=new g.Buf8($),N=V=0;V<$;N++)(64512&(A=O.charCodeAt(N)))==55296&&N+1<W&&(64512&(F=O.charCodeAt(N+1)))==56320&&(A=65536+(A-55296<<10)+(F-56320),N++),A<128?R[V++]=A:(A<2048?R[V++]=192|A>>>6:(A<65536?R[V++]=224|A>>>12:(R[V++]=240|A>>>18,R[V++]=128|A>>>12&63),R[V++]=128|A>>>6&63),R[V++]=128|63&A);return R},m.buf2binstring=function(O){return I(O,O.length)},m.binstring2buf=function(O){for(var R=new g.Buf8(O.length),A=0,F=R.length;A<F;A++)R[A]=O.charCodeAt(A);return R},m.buf2string=function(O,R){var A,F,N,V,W=R||O.length,$=new Array(2*W);for(A=F=0;A<W;)if((N=O[A++])<128)$[F++]=N;else if(4<(V=E[N]))$[F++]=65533,A+=V-1;else{for(N&=V===2?31:V===3?15:7;1<V&&A<W;)N=N<<6|63&O[A++],V--;1<V?$[F++]=65533:N<65536?$[F++]=N:(N-=65536,$[F++]=55296|N>>10&1023,$[F++]=56320|1023&N)}return I($,F)},m.utf8border=function(O,R){var A;for((R=R||O.length)>O.length&&(R=O.length),A=R-1;0<=A&&(192&O[A])==128;)A--;return A<0||A===0?R:A+E[O[A]]>R?A:R}},{"./common":41}],43:[function(l,h,m){h.exports=function(g,b,_,E){for(var P=65535&g|0,I=g>>>16&65535|0,O=0;_!==0;){for(_-=O=2e3<_?2e3:_;I=I+(P=P+b[E++]|0)|0,--O;);P%=65521,I%=65521}return P|I<<16|0}},{}],44:[function(l,h,m){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(l,h,m){var g=function(){for(var b,_=[],E=0;E<256;E++){b=E;for(var P=0;P<8;P++)b=1&b?3988292384^b>>>1:b>>>1;_[E]=b}return _}();h.exports=function(b,_,E,P){var I=g,O=P+E;b^=-1;for(var R=P;R<O;R++)b=b>>>8^I[255&(b^_[R])];return-1^b}},{}],46:[function(l,h,m){var g,b=l("../utils/common"),_=l("./trees"),E=l("./adler32"),P=l("./crc32"),I=l("./messages"),O=0,R=4,A=0,F=-2,N=-1,V=4,W=2,$=8,Z=9,ie=286,re=30,le=19,Ce=2*ie+1,ye=15,we=3,Ne=258,lt=Ne+we+1,ue=42,Le=113,Q=1,He=2,Bt=3,Ie=4;function Re(ee,ft){return ee.msg=I[ft],ft}function $e(ee){return(ee<<1)-(4<ee?9:0)}function Pt(ee){for(var ft=ee.length;0<=--ft;)ee[ft]=0}function ce(ee){var ft=ee.state,pt=ft.pending;pt>ee.avail_out&&(pt=ee.avail_out),pt!==0&&(b.arraySet(ee.output,ft.pending_buf,ft.pending_out,pt,ee.next_out),ee.next_out+=pt,ft.pending_out+=pt,ee.total_out+=pt,ee.avail_out-=pt,ft.pending-=pt,ft.pending===0&&(ft.pending_out=0))}function ge(ee,ft){_._tr_flush_block(ee,0<=ee.block_start?ee.block_start:-1,ee.strstart-ee.block_start,ft),ee.block_start=ee.strstart,ce(ee.strm)}function it(ee,ft){ee.pending_buf[ee.pending++]=ft}function at(ee,ft){ee.pending_buf[ee.pending++]=ft>>>8&255,ee.pending_buf[ee.pending++]=255&ft}function ct(ee,ft){var pt,Ee,Se=ee.max_chain_length,qe=ee.strstart,kt=ee.prev_length,Ot=ee.nice_match,st=ee.strstart>ee.w_size-lt?ee.strstart-(ee.w_size-lt):0,Vt=ee.window,It=ee.w_mask,Lt=ee.prev,Rn=ee.strstart+Ne,Br=Vt[qe+kt-1],tr=Vt[qe+kt];ee.prev_length>=ee.good_match&&(Se>>=2),Ot>ee.lookahead&&(Ot=ee.lookahead);do if(Vt[(pt=ft)+kt]===tr&&Vt[pt+kt-1]===Br&&Vt[pt]===Vt[qe]&&Vt[++pt]===Vt[qe+1]){qe+=2,pt++;do;while(Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&Vt[++qe]===Vt[++pt]&&qe<Rn);if(Ee=Ne-(Rn-qe),qe=Rn-Ne,kt<Ee){if(ee.match_start=ft,Ot<=(kt=Ee))break;Br=Vt[qe+kt-1],tr=Vt[qe+kt]}}while((ft=Lt[ft&It])>st&&--Se!=0);return kt<=ee.lookahead?kt:ee.lookahead}function Xe(ee){var ft,pt,Ee,Se,qe,kt,Ot,st,Vt,It,Lt=ee.w_size;do{if(Se=ee.window_size-ee.lookahead-ee.strstart,ee.strstart>=Lt+(Lt-lt)){for(b.arraySet(ee.window,ee.window,Lt,Lt,0),ee.match_start-=Lt,ee.strstart-=Lt,ee.block_start-=Lt,ft=pt=ee.hash_size;Ee=ee.head[--ft],ee.head[ft]=Lt<=Ee?Ee-Lt:0,--pt;);for(ft=pt=Lt;Ee=ee.prev[--ft],ee.prev[ft]=Lt<=Ee?Ee-Lt:0,--pt;);Se+=Lt}if(ee.strm.avail_in===0)break;if(kt=ee.strm,Ot=ee.window,st=ee.strstart+ee.lookahead,Vt=Se,It=void 0,It=kt.avail_in,Vt<It&&(It=Vt),pt=It===0?0:(kt.avail_in-=It,b.arraySet(Ot,kt.input,kt.next_in,It,st),kt.state.wrap===1?kt.adler=E(kt.adler,Ot,It,st):kt.state.wrap===2&&(kt.adler=P(kt.adler,Ot,It,st)),kt.next_in+=It,kt.total_in+=It,It),ee.lookahead+=pt,ee.lookahead+ee.insert>=we)for(qe=ee.strstart-ee.insert,ee.ins_h=ee.window[qe],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[qe+1])&ee.hash_mask;ee.insert&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[qe+we-1])&ee.hash_mask,ee.prev[qe&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=qe,qe++,ee.insert--,!(ee.lookahead+ee.insert<we)););}while(ee.lookahead<lt&&ee.strm.avail_in!==0)}function an(ee,ft){for(var pt,Ee;;){if(ee.lookahead<lt){if(Xe(ee),ee.lookahead<lt&&ft===O)return Q;if(ee.lookahead===0)break}if(pt=0,ee.lookahead>=we&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),pt!==0&&ee.strstart-pt<=ee.w_size-lt&&(ee.match_length=ct(ee,pt)),ee.match_length>=we)if(Ee=_._tr_tally(ee,ee.strstart-ee.match_start,ee.match_length-we),ee.lookahead-=ee.match_length,ee.match_length<=ee.max_lazy_match&&ee.lookahead>=we){for(ee.match_length--;ee.strstart++,ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart,--ee.match_length!=0;);ee.strstart++}else ee.strstart+=ee.match_length,ee.match_length=0,ee.ins_h=ee.window[ee.strstart],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+1])&ee.hash_mask;else Ee=_._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++;if(Ee&&(ge(ee,!1),ee.strm.avail_out===0))return Q}return ee.insert=ee.strstart<we-1?ee.strstart:we-1,ft===R?(ge(ee,!0),ee.strm.avail_out===0?Bt:Ie):ee.last_lit&&(ge(ee,!1),ee.strm.avail_out===0)?Q:He}function St(ee,ft){for(var pt,Ee,Se;;){if(ee.lookahead<lt){if(Xe(ee),ee.lookahead<lt&&ft===O)return Q;if(ee.lookahead===0)break}if(pt=0,ee.lookahead>=we&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ee.prev_length=ee.match_length,ee.prev_match=ee.match_start,ee.match_length=we-1,pt!==0&&ee.prev_length<ee.max_lazy_match&&ee.strstart-pt<=ee.w_size-lt&&(ee.match_length=ct(ee,pt),ee.match_length<=5&&(ee.strategy===1||ee.match_length===we&&4096<ee.strstart-ee.match_start)&&(ee.match_length=we-1)),ee.prev_length>=we&&ee.match_length<=ee.prev_length){for(Se=ee.strstart+ee.lookahead-we,Ee=_._tr_tally(ee,ee.strstart-1-ee.prev_match,ee.prev_length-we),ee.lookahead-=ee.prev_length-1,ee.prev_length-=2;++ee.strstart<=Se&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),--ee.prev_length!=0;);if(ee.match_available=0,ee.match_length=we-1,ee.strstart++,Ee&&(ge(ee,!1),ee.strm.avail_out===0))return Q}else if(ee.match_available){if((Ee=_._tr_tally(ee,0,ee.window[ee.strstart-1]))&&ge(ee,!1),ee.strstart++,ee.lookahead--,ee.strm.avail_out===0)return Q}else ee.match_available=1,ee.strstart++,ee.lookahead--}return ee.match_available&&(Ee=_._tr_tally(ee,0,ee.window[ee.strstart-1]),ee.match_available=0),ee.insert=ee.strstart<we-1?ee.strstart:we-1,ft===R?(ge(ee,!0),ee.strm.avail_out===0?Bt:Ie):ee.last_lit&&(ge(ee,!1),ee.strm.avail_out===0)?Q:He}function nn(ee,ft,pt,Ee,Se){this.good_length=ee,this.max_lazy=ft,this.nice_length=pt,this.max_chain=Ee,this.func=Se}function Sn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*Ce),this.dyn_dtree=new b.Buf16(2*(2*re+1)),this.bl_tree=new b.Buf16(2*(2*le+1)),Pt(this.dyn_ltree),Pt(this.dyn_dtree),Pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(ye+1),this.heap=new b.Buf16(2*ie+1),Pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*ie+1),Pt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Vn(ee){var ft;return ee&&ee.state?(ee.total_in=ee.total_out=0,ee.data_type=W,(ft=ee.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?ue:Le,ee.adler=ft.wrap===2?0:1,ft.last_flush=O,_._tr_init(ft),A):Re(ee,F)}function Ln(ee){var ft=Vn(ee);return ft===A&&function(pt){pt.window_size=2*pt.w_size,Pt(pt.head),pt.max_lazy_match=g[pt.level].max_lazy,pt.good_match=g[pt.level].good_length,pt.nice_match=g[pt.level].nice_length,pt.max_chain_length=g[pt.level].max_chain,pt.strstart=0,pt.block_start=0,pt.lookahead=0,pt.insert=0,pt.match_length=pt.prev_length=we-1,pt.match_available=0,pt.ins_h=0}(ee.state),ft}function Xr(ee,ft,pt,Ee,Se,qe){if(!ee)return F;var kt=1;if(ft===N&&(ft=6),Ee<0?(kt=0,Ee=-Ee):15<Ee&&(kt=2,Ee-=16),Se<1||Z<Se||pt!==$||Ee<8||15<Ee||ft<0||9<ft||qe<0||V<qe)return Re(ee,F);Ee===8&&(Ee=9);var Ot=new Sn;return(ee.state=Ot).strm=ee,Ot.wrap=kt,Ot.gzhead=null,Ot.w_bits=Ee,Ot.w_size=1<<Ot.w_bits,Ot.w_mask=Ot.w_size-1,Ot.hash_bits=Se+7,Ot.hash_size=1<<Ot.hash_bits,Ot.hash_mask=Ot.hash_size-1,Ot.hash_shift=~~((Ot.hash_bits+we-1)/we),Ot.window=new b.Buf8(2*Ot.w_size),Ot.head=new b.Buf16(Ot.hash_size),Ot.prev=new b.Buf16(Ot.w_size),Ot.lit_bufsize=1<<Se+6,Ot.pending_buf_size=4*Ot.lit_bufsize,Ot.pending_buf=new b.Buf8(Ot.pending_buf_size),Ot.d_buf=1*Ot.lit_bufsize,Ot.l_buf=3*Ot.lit_bufsize,Ot.level=ft,Ot.strategy=qe,Ot.method=pt,Ln(ee)}g=[new nn(0,0,0,0,function(ee,ft){var pt=65535;for(pt>ee.pending_buf_size-5&&(pt=ee.pending_buf_size-5);;){if(ee.lookahead<=1){if(Xe(ee),ee.lookahead===0&&ft===O)return Q;if(ee.lookahead===0)break}ee.strstart+=ee.lookahead,ee.lookahead=0;var Ee=ee.block_start+pt;if((ee.strstart===0||ee.strstart>=Ee)&&(ee.lookahead=ee.strstart-Ee,ee.strstart=Ee,ge(ee,!1),ee.strm.avail_out===0)||ee.strstart-ee.block_start>=ee.w_size-lt&&(ge(ee,!1),ee.strm.avail_out===0))return Q}return ee.insert=0,ft===R?(ge(ee,!0),ee.strm.avail_out===0?Bt:Ie):(ee.strstart>ee.block_start&&(ge(ee,!1),ee.strm.avail_out),Q)}),new nn(4,4,8,4,an),new nn(4,5,16,8,an),new nn(4,6,32,32,an),new nn(4,4,16,16,St),new nn(8,16,32,32,St),new nn(8,16,128,128,St),new nn(8,32,128,256,St),new nn(32,128,258,1024,St),new nn(32,258,258,4096,St)],m.deflateInit=function(ee,ft){return Xr(ee,ft,$,15,8,0)},m.deflateInit2=Xr,m.deflateReset=Ln,m.deflateResetKeep=Vn,m.deflateSetHeader=function(ee,ft){return ee&&ee.state?ee.state.wrap!==2?F:(ee.state.gzhead=ft,A):F},m.deflate=function(ee,ft){var pt,Ee,Se,qe;if(!ee||!ee.state||5<ft||ft<0)return ee?Re(ee,F):F;if(Ee=ee.state,!ee.output||!ee.input&&ee.avail_in!==0||Ee.status===666&&ft!==R)return Re(ee,ee.avail_out===0?-5:F);if(Ee.strm=ee,pt=Ee.last_flush,Ee.last_flush=ft,Ee.status===ue)if(Ee.wrap===2)ee.adler=0,it(Ee,31),it(Ee,139),it(Ee,8),Ee.gzhead?(it(Ee,(Ee.gzhead.text?1:0)+(Ee.gzhead.hcrc?2:0)+(Ee.gzhead.extra?4:0)+(Ee.gzhead.name?8:0)+(Ee.gzhead.comment?16:0)),it(Ee,255&Ee.gzhead.time),it(Ee,Ee.gzhead.time>>8&255),it(Ee,Ee.gzhead.time>>16&255),it(Ee,Ee.gzhead.time>>24&255),it(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),it(Ee,255&Ee.gzhead.os),Ee.gzhead.extra&&Ee.gzhead.extra.length&&(it(Ee,255&Ee.gzhead.extra.length),it(Ee,Ee.gzhead.extra.length>>8&255)),Ee.gzhead.hcrc&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending,0)),Ee.gzindex=0,Ee.status=69):(it(Ee,0),it(Ee,0),it(Ee,0),it(Ee,0),it(Ee,0),it(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),it(Ee,3),Ee.status=Le);else{var kt=$+(Ee.w_bits-8<<4)<<8;kt|=(2<=Ee.strategy||Ee.level<2?0:Ee.level<6?1:Ee.level===6?2:3)<<6,Ee.strstart!==0&&(kt|=32),kt+=31-kt%31,Ee.status=Le,at(Ee,kt),Ee.strstart!==0&&(at(Ee,ee.adler>>>16),at(Ee,65535&ee.adler)),ee.adler=1}if(Ee.status===69)if(Ee.gzhead.extra){for(Se=Ee.pending;Ee.gzindex<(65535&Ee.gzhead.extra.length)&&(Ee.pending!==Ee.pending_buf_size||(Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),ce(ee),Se=Ee.pending,Ee.pending!==Ee.pending_buf_size));)it(Ee,255&Ee.gzhead.extra[Ee.gzindex]),Ee.gzindex++;Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),Ee.gzindex===Ee.gzhead.extra.length&&(Ee.gzindex=0,Ee.status=73)}else Ee.status=73;if(Ee.status===73)if(Ee.gzhead.name){Se=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),ce(ee),Se=Ee.pending,Ee.pending===Ee.pending_buf_size)){qe=1;break}qe=Ee.gzindex<Ee.gzhead.name.length?255&Ee.gzhead.name.charCodeAt(Ee.gzindex++):0,it(Ee,qe)}while(qe!==0);Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),qe===0&&(Ee.gzindex=0,Ee.status=91)}else Ee.status=91;if(Ee.status===91)if(Ee.gzhead.comment){Se=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),ce(ee),Se=Ee.pending,Ee.pending===Ee.pending_buf_size)){qe=1;break}qe=Ee.gzindex<Ee.gzhead.comment.length?255&Ee.gzhead.comment.charCodeAt(Ee.gzindex++):0,it(Ee,qe)}while(qe!==0);Ee.gzhead.hcrc&&Ee.pending>Se&&(ee.adler=P(ee.adler,Ee.pending_buf,Ee.pending-Se,Se)),qe===0&&(Ee.status=103)}else Ee.status=103;if(Ee.status===103&&(Ee.gzhead.hcrc?(Ee.pending+2>Ee.pending_buf_size&&ce(ee),Ee.pending+2<=Ee.pending_buf_size&&(it(Ee,255&ee.adler),it(Ee,ee.adler>>8&255),ee.adler=0,Ee.status=Le)):Ee.status=Le),Ee.pending!==0){if(ce(ee),ee.avail_out===0)return Ee.last_flush=-1,A}else if(ee.avail_in===0&&$e(ft)<=$e(pt)&&ft!==R)return Re(ee,-5);if(Ee.status===666&&ee.avail_in!==0)return Re(ee,-5);if(ee.avail_in!==0||Ee.lookahead!==0||ft!==O&&Ee.status!==666){var Ot=Ee.strategy===2?function(st,Vt){for(var It;;){if(st.lookahead===0&&(Xe(st),st.lookahead===0)){if(Vt===O)return Q;break}if(st.match_length=0,It=_._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++,It&&(ge(st,!1),st.strm.avail_out===0))return Q}return st.insert=0,Vt===R?(ge(st,!0),st.strm.avail_out===0?Bt:Ie):st.last_lit&&(ge(st,!1),st.strm.avail_out===0)?Q:He}(Ee,ft):Ee.strategy===3?function(st,Vt){for(var It,Lt,Rn,Br,tr=st.window;;){if(st.lookahead<=Ne){if(Xe(st),st.lookahead<=Ne&&Vt===O)return Q;if(st.lookahead===0)break}if(st.match_length=0,st.lookahead>=we&&0<st.strstart&&(Lt=tr[Rn=st.strstart-1])===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]){Br=st.strstart+Ne;do;while(Lt===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]&&Lt===tr[++Rn]&&Rn<Br);st.match_length=Ne-(Br-Rn),st.match_length>st.lookahead&&(st.match_length=st.lookahead)}if(st.match_length>=we?(It=_._tr_tally(st,1,st.match_length-we),st.lookahead-=st.match_length,st.strstart+=st.match_length,st.match_length=0):(It=_._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++),It&&(ge(st,!1),st.strm.avail_out===0))return Q}return st.insert=0,Vt===R?(ge(st,!0),st.strm.avail_out===0?Bt:Ie):st.last_lit&&(ge(st,!1),st.strm.avail_out===0)?Q:He}(Ee,ft):g[Ee.level].func(Ee,ft);if(Ot!==Bt&&Ot!==Ie||(Ee.status=666),Ot===Q||Ot===Bt)return ee.avail_out===0&&(Ee.last_flush=-1),A;if(Ot===He&&(ft===1?_._tr_align(Ee):ft!==5&&(_._tr_stored_block(Ee,0,0,!1),ft===3&&(Pt(Ee.head),Ee.lookahead===0&&(Ee.strstart=0,Ee.block_start=0,Ee.insert=0))),ce(ee),ee.avail_out===0))return Ee.last_flush=-1,A}return ft!==R?A:Ee.wrap<=0?1:(Ee.wrap===2?(it(Ee,255&ee.adler),it(Ee,ee.adler>>8&255),it(Ee,ee.adler>>16&255),it(Ee,ee.adler>>24&255),it(Ee,255&ee.total_in),it(Ee,ee.total_in>>8&255),it(Ee,ee.total_in>>16&255),it(Ee,ee.total_in>>24&255)):(at(Ee,ee.adler>>>16),at(Ee,65535&ee.adler)),ce(ee),0<Ee.wrap&&(Ee.wrap=-Ee.wrap),Ee.pending!==0?A:1)},m.deflateEnd=function(ee){var ft;return ee&&ee.state?(ft=ee.state.status)!==ue&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==Le&&ft!==666?Re(ee,F):(ee.state=null,ft===Le?Re(ee,-3):A):F},m.deflateSetDictionary=function(ee,ft){var pt,Ee,Se,qe,kt,Ot,st,Vt,It=ft.length;if(!ee||!ee.state||(qe=(pt=ee.state).wrap)===2||qe===1&&pt.status!==ue||pt.lookahead)return F;for(qe===1&&(ee.adler=E(ee.adler,ft,It,0)),pt.wrap=0,It>=pt.w_size&&(qe===0&&(Pt(pt.head),pt.strstart=0,pt.block_start=0,pt.insert=0),Vt=new b.Buf8(pt.w_size),b.arraySet(Vt,ft,It-pt.w_size,pt.w_size,0),ft=Vt,It=pt.w_size),kt=ee.avail_in,Ot=ee.next_in,st=ee.input,ee.avail_in=It,ee.next_in=0,ee.input=ft,Xe(pt);pt.lookahead>=we;){for(Ee=pt.strstart,Se=pt.lookahead-(we-1);pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[Ee+we-1])&pt.hash_mask,pt.prev[Ee&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=Ee,Ee++,--Se;);pt.strstart=Ee,pt.lookahead=we-1,Xe(pt)}return pt.strstart+=pt.lookahead,pt.block_start=pt.strstart,pt.insert=pt.lookahead,pt.lookahead=0,pt.match_length=pt.prev_length=we-1,pt.match_available=0,ee.next_in=Ot,ee.input=st,ee.avail_in=kt,pt.wrap=qe,A},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(l,h,m){h.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(l,h,m){h.exports=function(g,b){var _,E,P,I,O,R,A,F,N,V,W,$,Z,ie,re,le,Ce,ye,we,Ne,lt,ue,Le,Q,He;_=g.state,E=g.next_in,Q=g.input,P=E+(g.avail_in-5),I=g.next_out,He=g.output,O=I-(b-g.avail_out),R=I+(g.avail_out-257),A=_.dmax,F=_.wsize,N=_.whave,V=_.wnext,W=_.window,$=_.hold,Z=_.bits,ie=_.lencode,re=_.distcode,le=(1<<_.lenbits)-1,Ce=(1<<_.distbits)-1;e:do{Z<15&&($+=Q[E++]<<Z,Z+=8,$+=Q[E++]<<Z,Z+=8),ye=ie[$&le];t:for(;;){if($>>>=we=ye>>>24,Z-=we,(we=ye>>>16&255)===0)He[I++]=65535&ye;else{if(!(16&we)){if(!(64&we)){ye=ie[(65535&ye)+($&(1<<we)-1)];continue t}if(32&we){_.mode=12;break e}g.msg="invalid literal/length code",_.mode=30;break e}Ne=65535&ye,(we&=15)&&(Z<we&&($+=Q[E++]<<Z,Z+=8),Ne+=$&(1<<we)-1,$>>>=we,Z-=we),Z<15&&($+=Q[E++]<<Z,Z+=8,$+=Q[E++]<<Z,Z+=8),ye=re[$&Ce];n:for(;;){if($>>>=we=ye>>>24,Z-=we,!(16&(we=ye>>>16&255))){if(!(64&we)){ye=re[(65535&ye)+($&(1<<we)-1)];continue n}g.msg="invalid distance code",_.mode=30;break e}if(lt=65535&ye,Z<(we&=15)&&($+=Q[E++]<<Z,(Z+=8)<we&&($+=Q[E++]<<Z,Z+=8)),A<(lt+=$&(1<<we)-1)){g.msg="invalid distance too far back",_.mode=30;break e}if($>>>=we,Z-=we,(we=I-O)<lt){if(N<(we=lt-we)&&_.sane){g.msg="invalid distance too far back",_.mode=30;break e}if(Le=W,(ue=0)===V){if(ue+=F-we,we<Ne){for(Ne-=we;He[I++]=W[ue++],--we;);ue=I-lt,Le=He}}else if(V<we){if(ue+=F+V-we,(we-=V)<Ne){for(Ne-=we;He[I++]=W[ue++],--we;);if(ue=0,V<Ne){for(Ne-=we=V;He[I++]=W[ue++],--we;);ue=I-lt,Le=He}}}else if(ue+=V-we,we<Ne){for(Ne-=we;He[I++]=W[ue++],--we;);ue=I-lt,Le=He}for(;2<Ne;)He[I++]=Le[ue++],He[I++]=Le[ue++],He[I++]=Le[ue++],Ne-=3;Ne&&(He[I++]=Le[ue++],1<Ne&&(He[I++]=Le[ue++]))}else{for(ue=I-lt;He[I++]=He[ue++],He[I++]=He[ue++],He[I++]=He[ue++],2<(Ne-=3););Ne&&(He[I++]=He[ue++],1<Ne&&(He[I++]=He[ue++]))}break}}break}}while(E<P&&I<R);E-=Ne=Z>>3,$&=(1<<(Z-=Ne<<3))-1,g.next_in=E,g.next_out=I,g.avail_in=E<P?P-E+5:5-(E-P),g.avail_out=I<R?R-I+257:257-(I-R),_.hold=$,_.bits=Z}},{}],49:[function(l,h,m){var g=l("../utils/common"),b=l("./adler32"),_=l("./crc32"),E=l("./inffast"),P=l("./inftrees"),I=1,O=2,R=0,A=-2,F=1,N=852,V=592;function W(ue){return(ue>>>24&255)+(ue>>>8&65280)+((65280&ue)<<8)+((255&ue)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Z(ue){var Le;return ue&&ue.state?(Le=ue.state,ue.total_in=ue.total_out=Le.total=0,ue.msg="",Le.wrap&&(ue.adler=1&Le.wrap),Le.mode=F,Le.last=0,Le.havedict=0,Le.dmax=32768,Le.head=null,Le.hold=0,Le.bits=0,Le.lencode=Le.lendyn=new g.Buf32(N),Le.distcode=Le.distdyn=new g.Buf32(V),Le.sane=1,Le.back=-1,R):A}function ie(ue){var Le;return ue&&ue.state?((Le=ue.state).wsize=0,Le.whave=0,Le.wnext=0,Z(ue)):A}function re(ue,Le){var Q,He;return ue&&ue.state?(He=ue.state,Le<0?(Q=0,Le=-Le):(Q=1+(Le>>4),Le<48&&(Le&=15)),Le&&(Le<8||15<Le)?A:(He.window!==null&&He.wbits!==Le&&(He.window=null),He.wrap=Q,He.wbits=Le,ie(ue))):A}function le(ue,Le){var Q,He;return ue?(He=new $,(ue.state=He).window=null,(Q=re(ue,Le))!==R&&(ue.state=null),Q):A}var Ce,ye,we=!0;function Ne(ue){if(we){var Le;for(Ce=new g.Buf32(512),ye=new g.Buf32(32),Le=0;Le<144;)ue.lens[Le++]=8;for(;Le<256;)ue.lens[Le++]=9;for(;Le<280;)ue.lens[Le++]=7;for(;Le<288;)ue.lens[Le++]=8;for(P(I,ue.lens,0,288,Ce,0,ue.work,{bits:9}),Le=0;Le<32;)ue.lens[Le++]=5;P(O,ue.lens,0,32,ye,0,ue.work,{bits:5}),we=!1}ue.lencode=Ce,ue.lenbits=9,ue.distcode=ye,ue.distbits=5}function lt(ue,Le,Q,He){var Bt,Ie=ue.state;return Ie.window===null&&(Ie.wsize=1<<Ie.wbits,Ie.wnext=0,Ie.whave=0,Ie.window=new g.Buf8(Ie.wsize)),He>=Ie.wsize?(g.arraySet(Ie.window,Le,Q-Ie.wsize,Ie.wsize,0),Ie.wnext=0,Ie.whave=Ie.wsize):(He<(Bt=Ie.wsize-Ie.wnext)&&(Bt=He),g.arraySet(Ie.window,Le,Q-He,Bt,Ie.wnext),(He-=Bt)?(g.arraySet(Ie.window,Le,Q-He,He,0),Ie.wnext=He,Ie.whave=Ie.wsize):(Ie.wnext+=Bt,Ie.wnext===Ie.wsize&&(Ie.wnext=0),Ie.whave<Ie.wsize&&(Ie.whave+=Bt))),0}m.inflateReset=ie,m.inflateReset2=re,m.inflateResetKeep=Z,m.inflateInit=function(ue){return le(ue,15)},m.inflateInit2=le,m.inflate=function(ue,Le){var Q,He,Bt,Ie,Re,$e,Pt,ce,ge,it,at,ct,Xe,an,St,nn,Sn,Vn,Ln,Xr,ee,ft,pt,Ee,Se=0,qe=new g.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ue||!ue.state||!ue.output||!ue.input&&ue.avail_in!==0)return A;(Q=ue.state).mode===12&&(Q.mode=13),Re=ue.next_out,Bt=ue.output,Pt=ue.avail_out,Ie=ue.next_in,He=ue.input,$e=ue.avail_in,ce=Q.hold,ge=Q.bits,it=$e,at=Pt,ft=R;e:for(;;)switch(Q.mode){case F:if(Q.wrap===0){Q.mode=13;break}for(;ge<16;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(2&Q.wrap&&ce===35615){qe[Q.check=0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0),ge=ce=0,Q.mode=2;break}if(Q.flags=0,Q.head&&(Q.head.done=!1),!(1&Q.wrap)||(((255&ce)<<8)+(ce>>8))%31){ue.msg="incorrect header check",Q.mode=30;break}if((15&ce)!=8){ue.msg="unknown compression method",Q.mode=30;break}if(ge-=4,ee=8+(15&(ce>>>=4)),Q.wbits===0)Q.wbits=ee;else if(ee>Q.wbits){ue.msg="invalid window size",Q.mode=30;break}Q.dmax=1<<ee,ue.adler=Q.check=1,Q.mode=512&ce?10:12,ge=ce=0;break;case 2:for(;ge<16;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(Q.flags=ce,(255&Q.flags)!=8){ue.msg="unknown compression method",Q.mode=30;break}if(57344&Q.flags){ue.msg="unknown header flags set",Q.mode=30;break}Q.head&&(Q.head.text=ce>>8&1),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0)),ge=ce=0,Q.mode=3;case 3:for(;ge<32;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}Q.head&&(Q.head.time=ce),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,qe[2]=ce>>>16&255,qe[3]=ce>>>24&255,Q.check=_(Q.check,qe,4,0)),ge=ce=0,Q.mode=4;case 4:for(;ge<16;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}Q.head&&(Q.head.xflags=255&ce,Q.head.os=ce>>8),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0)),ge=ce=0,Q.mode=5;case 5:if(1024&Q.flags){for(;ge<16;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}Q.length=ce,Q.head&&(Q.head.extra_len=ce),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0)),ge=ce=0}else Q.head&&(Q.head.extra=null);Q.mode=6;case 6:if(1024&Q.flags&&($e<(ct=Q.length)&&(ct=$e),ct&&(Q.head&&(ee=Q.head.extra_len-Q.length,Q.head.extra||(Q.head.extra=new Array(Q.head.extra_len)),g.arraySet(Q.head.extra,He,Ie,ct,ee)),512&Q.flags&&(Q.check=_(Q.check,He,ct,Ie)),$e-=ct,Ie+=ct,Q.length-=ct),Q.length))break e;Q.length=0,Q.mode=7;case 7:if(2048&Q.flags){if($e===0)break e;for(ct=0;ee=He[Ie+ct++],Q.head&&ee&&Q.length<65536&&(Q.head.name+=String.fromCharCode(ee)),ee&&ct<$e;);if(512&Q.flags&&(Q.check=_(Q.check,He,ct,Ie)),$e-=ct,Ie+=ct,ee)break e}else Q.head&&(Q.head.name=null);Q.length=0,Q.mode=8;case 8:if(4096&Q.flags){if($e===0)break e;for(ct=0;ee=He[Ie+ct++],Q.head&&ee&&Q.length<65536&&(Q.head.comment+=String.fromCharCode(ee)),ee&&ct<$e;);if(512&Q.flags&&(Q.check=_(Q.check,He,ct,Ie)),$e-=ct,Ie+=ct,ee)break e}else Q.head&&(Q.head.comment=null);Q.mode=9;case 9:if(512&Q.flags){for(;ge<16;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(ce!==(65535&Q.check)){ue.msg="header crc mismatch",Q.mode=30;break}ge=ce=0}Q.head&&(Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0),ue.adler=Q.check=0,Q.mode=12;break;case 10:for(;ge<32;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}ue.adler=Q.check=W(ce),ge=ce=0,Q.mode=11;case 11:if(Q.havedict===0)return ue.next_out=Re,ue.avail_out=Pt,ue.next_in=Ie,ue.avail_in=$e,Q.hold=ce,Q.bits=ge,2;ue.adler=Q.check=1,Q.mode=12;case 12:if(Le===5||Le===6)break e;case 13:if(Q.last){ce>>>=7&ge,ge-=7&ge,Q.mode=27;break}for(;ge<3;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}switch(Q.last=1&ce,ge-=1,3&(ce>>>=1)){case 0:Q.mode=14;break;case 1:if(Ne(Q),Q.mode=20,Le!==6)break;ce>>>=2,ge-=2;break e;case 2:Q.mode=17;break;case 3:ue.msg="invalid block type",Q.mode=30}ce>>>=2,ge-=2;break;case 14:for(ce>>>=7&ge,ge-=7&ge;ge<32;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if((65535&ce)!=(ce>>>16^65535)){ue.msg="invalid stored block lengths",Q.mode=30;break}if(Q.length=65535&ce,ge=ce=0,Q.mode=15,Le===6)break e;case 15:Q.mode=16;case 16:if(ct=Q.length){if($e<ct&&(ct=$e),Pt<ct&&(ct=Pt),ct===0)break e;g.arraySet(Bt,He,Ie,ct,Re),$e-=ct,Ie+=ct,Pt-=ct,Re+=ct,Q.length-=ct;break}Q.mode=12;break;case 17:for(;ge<14;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(Q.nlen=257+(31&ce),ce>>>=5,ge-=5,Q.ndist=1+(31&ce),ce>>>=5,ge-=5,Q.ncode=4+(15&ce),ce>>>=4,ge-=4,286<Q.nlen||30<Q.ndist){ue.msg="too many length or distance symbols",Q.mode=30;break}Q.have=0,Q.mode=18;case 18:for(;Q.have<Q.ncode;){for(;ge<3;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}Q.lens[kt[Q.have++]]=7&ce,ce>>>=3,ge-=3}for(;Q.have<19;)Q.lens[kt[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,pt={bits:Q.lenbits},ft=P(0,Q.lens,0,19,Q.lencode,0,Q.work,pt),Q.lenbits=pt.bits,ft){ue.msg="invalid code lengths set",Q.mode=30;break}Q.have=0,Q.mode=19;case 19:for(;Q.have<Q.nlen+Q.ndist;){for(;nn=(Se=Q.lencode[ce&(1<<Q.lenbits)-1])>>>16&255,Sn=65535&Se,!((St=Se>>>24)<=ge);){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(Sn<16)ce>>>=St,ge-=St,Q.lens[Q.have++]=Sn;else{if(Sn===16){for(Ee=St+2;ge<Ee;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(ce>>>=St,ge-=St,Q.have===0){ue.msg="invalid bit length repeat",Q.mode=30;break}ee=Q.lens[Q.have-1],ct=3+(3&ce),ce>>>=2,ge-=2}else if(Sn===17){for(Ee=St+3;ge<Ee;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}ge-=St,ee=0,ct=3+(7&(ce>>>=St)),ce>>>=3,ge-=3}else{for(Ee=St+7;ge<Ee;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}ge-=St,ee=0,ct=11+(127&(ce>>>=St)),ce>>>=7,ge-=7}if(Q.have+ct>Q.nlen+Q.ndist){ue.msg="invalid bit length repeat",Q.mode=30;break}for(;ct--;)Q.lens[Q.have++]=ee}}if(Q.mode===30)break;if(Q.lens[256]===0){ue.msg="invalid code -- missing end-of-block",Q.mode=30;break}if(Q.lenbits=9,pt={bits:Q.lenbits},ft=P(I,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,pt),Q.lenbits=pt.bits,ft){ue.msg="invalid literal/lengths set",Q.mode=30;break}if(Q.distbits=6,Q.distcode=Q.distdyn,pt={bits:Q.distbits},ft=P(O,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,pt),Q.distbits=pt.bits,ft){ue.msg="invalid distances set",Q.mode=30;break}if(Q.mode=20,Le===6)break e;case 20:Q.mode=21;case 21:if(6<=$e&&258<=Pt){ue.next_out=Re,ue.avail_out=Pt,ue.next_in=Ie,ue.avail_in=$e,Q.hold=ce,Q.bits=ge,E(ue,at),Re=ue.next_out,Bt=ue.output,Pt=ue.avail_out,Ie=ue.next_in,He=ue.input,$e=ue.avail_in,ce=Q.hold,ge=Q.bits,Q.mode===12&&(Q.back=-1);break}for(Q.back=0;nn=(Se=Q.lencode[ce&(1<<Q.lenbits)-1])>>>16&255,Sn=65535&Se,!((St=Se>>>24)<=ge);){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(nn&&!(240&nn)){for(Vn=St,Ln=nn,Xr=Sn;nn=(Se=Q.lencode[Xr+((ce&(1<<Vn+Ln)-1)>>Vn)])>>>16&255,Sn=65535&Se,!(Vn+(St=Se>>>24)<=ge);){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}ce>>>=Vn,ge-=Vn,Q.back+=Vn}if(ce>>>=St,ge-=St,Q.back+=St,Q.length=Sn,nn===0){Q.mode=26;break}if(32&nn){Q.back=-1,Q.mode=12;break}if(64&nn){ue.msg="invalid literal/length code",Q.mode=30;break}Q.extra=15&nn,Q.mode=22;case 22:if(Q.extra){for(Ee=Q.extra;ge<Ee;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}Q.length+=ce&(1<<Q.extra)-1,ce>>>=Q.extra,ge-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=23;case 23:for(;nn=(Se=Q.distcode[ce&(1<<Q.distbits)-1])>>>16&255,Sn=65535&Se,!((St=Se>>>24)<=ge);){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(!(240&nn)){for(Vn=St,Ln=nn,Xr=Sn;nn=(Se=Q.distcode[Xr+((ce&(1<<Vn+Ln)-1)>>Vn)])>>>16&255,Sn=65535&Se,!(Vn+(St=Se>>>24)<=ge);){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}ce>>>=Vn,ge-=Vn,Q.back+=Vn}if(ce>>>=St,ge-=St,Q.back+=St,64&nn){ue.msg="invalid distance code",Q.mode=30;break}Q.offset=Sn,Q.extra=15&nn,Q.mode=24;case 24:if(Q.extra){for(Ee=Q.extra;ge<Ee;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}Q.offset+=ce&(1<<Q.extra)-1,ce>>>=Q.extra,ge-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){ue.msg="invalid distance too far back",Q.mode=30;break}Q.mode=25;case 25:if(Pt===0)break e;if(ct=at-Pt,Q.offset>ct){if((ct=Q.offset-ct)>Q.whave&&Q.sane){ue.msg="invalid distance too far back",Q.mode=30;break}Xe=ct>Q.wnext?(ct-=Q.wnext,Q.wsize-ct):Q.wnext-ct,ct>Q.length&&(ct=Q.length),an=Q.window}else an=Bt,Xe=Re-Q.offset,ct=Q.length;for(Pt<ct&&(ct=Pt),Pt-=ct,Q.length-=ct;Bt[Re++]=an[Xe++],--ct;);Q.length===0&&(Q.mode=21);break;case 26:if(Pt===0)break e;Bt[Re++]=Q.length,Pt--,Q.mode=21;break;case 27:if(Q.wrap){for(;ge<32;){if($e===0)break e;$e--,ce|=He[Ie++]<<ge,ge+=8}if(at-=Pt,ue.total_out+=at,Q.total+=at,at&&(ue.adler=Q.check=Q.flags?_(Q.check,Bt,at,Re-at):b(Q.check,Bt,at,Re-at)),at=Pt,(Q.flags?ce:W(ce))!==Q.check){ue.msg="incorrect data check",Q.mode=30;break}ge=ce=0}Q.mode=28;case 28:if(Q.wrap&&Q.flags){for(;ge<32;){if($e===0)break e;$e--,ce+=He[Ie++]<<ge,ge+=8}if(ce!==(4294967295&Q.total)){ue.msg="incorrect length check",Q.mode=30;break}ge=ce=0}Q.mode=29;case 29:ft=1;break e;case 30:ft=-3;break e;case 31:return-4;case 32:default:return A}return ue.next_out=Re,ue.avail_out=Pt,ue.next_in=Ie,ue.avail_in=$e,Q.hold=ce,Q.bits=ge,(Q.wsize||at!==ue.avail_out&&Q.mode<30&&(Q.mode<27||Le!==4))&&lt(ue,ue.output,ue.next_out,at-ue.avail_out)?(Q.mode=31,-4):(it-=ue.avail_in,at-=ue.avail_out,ue.total_in+=it,ue.total_out+=at,Q.total+=at,Q.wrap&&at&&(ue.adler=Q.check=Q.flags?_(Q.check,Bt,at,ue.next_out-at):b(Q.check,Bt,at,ue.next_out-at)),ue.data_type=Q.bits+(Q.last?64:0)+(Q.mode===12?128:0)+(Q.mode===20||Q.mode===15?256:0),(it==0&&at===0||Le===4)&&ft===R&&(ft=-5),ft)},m.inflateEnd=function(ue){if(!ue||!ue.state)return A;var Le=ue.state;return Le.window&&(Le.window=null),ue.state=null,R},m.inflateGetHeader=function(ue,Le){var Q;return ue&&ue.state&&2&(Q=ue.state).wrap?((Q.head=Le).done=!1,R):A},m.inflateSetDictionary=function(ue,Le){var Q,He=Le.length;return ue&&ue.state?(Q=ue.state).wrap!==0&&Q.mode!==11?A:Q.mode===11&&b(1,Le,He,0)!==Q.check?-3:lt(ue,Le,He,He)?(Q.mode=31,-4):(Q.havedict=1,R):A},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(l,h,m){var g=l("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(I,O,R,A,F,N,V,W){var $,Z,ie,re,le,Ce,ye,we,Ne,lt=W.bits,ue=0,Le=0,Q=0,He=0,Bt=0,Ie=0,Re=0,$e=0,Pt=0,ce=0,ge=null,it=0,at=new g.Buf16(16),ct=new g.Buf16(16),Xe=null,an=0;for(ue=0;ue<=15;ue++)at[ue]=0;for(Le=0;Le<A;Le++)at[O[R+Le]]++;for(Bt=lt,He=15;1<=He&&at[He]===0;He--);if(He<Bt&&(Bt=He),He===0)return F[N++]=20971520,F[N++]=20971520,W.bits=1,0;for(Q=1;Q<He&&at[Q]===0;Q++);for(Bt<Q&&(Bt=Q),ue=$e=1;ue<=15;ue++)if($e<<=1,($e-=at[ue])<0)return-1;if(0<$e&&(I===0||He!==1))return-1;for(ct[1]=0,ue=1;ue<15;ue++)ct[ue+1]=ct[ue]+at[ue];for(Le=0;Le<A;Le++)O[R+Le]!==0&&(V[ct[O[R+Le]]++]=Le);if(Ce=I===0?(ge=Xe=V,19):I===1?(ge=b,it-=257,Xe=_,an-=257,256):(ge=E,Xe=P,-1),ue=Q,le=N,Re=Le=ce=0,ie=-1,re=(Pt=1<<(Ie=Bt))-1,I===1&&852<Pt||I===2&&592<Pt)return 1;for(;;){for(ye=ue-Re,Ne=V[Le]<Ce?(we=0,V[Le]):V[Le]>Ce?(we=Xe[an+V[Le]],ge[it+V[Le]]):(we=96,0),$=1<<ue-Re,Q=Z=1<<Ie;F[le+(ce>>Re)+(Z-=$)]=ye<<24|we<<16|Ne|0,Z!==0;);for($=1<<ue-1;ce&$;)$>>=1;if($!==0?(ce&=$-1,ce+=$):ce=0,Le++,--at[ue]==0){if(ue===He)break;ue=O[R+V[Le]]}if(Bt<ue&&(ce&re)!==ie){for(Re===0&&(Re=Bt),le+=Q,$e=1<<(Ie=ue-Re);Ie+Re<He&&!(($e-=at[Ie+Re])<=0);)Ie++,$e<<=1;if(Pt+=1<<Ie,I===1&&852<Pt||I===2&&592<Pt)return 1;F[ie=ce&re]=Bt<<24|Ie<<16|le-N|0}}return ce!==0&&(F[le+ce]=ue-Re<<24|64<<16|0),W.bits=Bt,0}},{"../utils/common":41}],51:[function(l,h,m){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(l,h,m){var g=l("../utils/common"),b=0,_=1;function E(Se){for(var qe=Se.length;0<=--qe;)Se[qe]=0}var P=0,I=29,O=256,R=O+1+I,A=30,F=19,N=2*R+1,V=15,W=16,$=7,Z=256,ie=16,re=17,le=18,Ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ye=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lt=new Array(2*(R+2));E(lt);var ue=new Array(2*A);E(ue);var Le=new Array(512);E(Le);var Q=new Array(256);E(Q);var He=new Array(I);E(He);var Bt,Ie,Re,$e=new Array(A);function Pt(Se,qe,kt,Ot,st){this.static_tree=Se,this.extra_bits=qe,this.extra_base=kt,this.elems=Ot,this.max_length=st,this.has_stree=Se&&Se.length}function ce(Se,qe){this.dyn_tree=Se,this.max_code=0,this.stat_desc=qe}function ge(Se){return Se<256?Le[Se]:Le[256+(Se>>>7)]}function it(Se,qe){Se.pending_buf[Se.pending++]=255&qe,Se.pending_buf[Se.pending++]=qe>>>8&255}function at(Se,qe,kt){Se.bi_valid>W-kt?(Se.bi_buf|=qe<<Se.bi_valid&65535,it(Se,Se.bi_buf),Se.bi_buf=qe>>W-Se.bi_valid,Se.bi_valid+=kt-W):(Se.bi_buf|=qe<<Se.bi_valid&65535,Se.bi_valid+=kt)}function ct(Se,qe,kt){at(Se,kt[2*qe],kt[2*qe+1])}function Xe(Se,qe){for(var kt=0;kt|=1&Se,Se>>>=1,kt<<=1,0<--qe;);return kt>>>1}function an(Se,qe,kt){var Ot,st,Vt=new Array(V+1),It=0;for(Ot=1;Ot<=V;Ot++)Vt[Ot]=It=It+kt[Ot-1]<<1;for(st=0;st<=qe;st++){var Lt=Se[2*st+1];Lt!==0&&(Se[2*st]=Xe(Vt[Lt]++,Lt))}}function St(Se){var qe;for(qe=0;qe<R;qe++)Se.dyn_ltree[2*qe]=0;for(qe=0;qe<A;qe++)Se.dyn_dtree[2*qe]=0;for(qe=0;qe<F;qe++)Se.bl_tree[2*qe]=0;Se.dyn_ltree[2*Z]=1,Se.opt_len=Se.static_len=0,Se.last_lit=Se.matches=0}function nn(Se){8<Se.bi_valid?it(Se,Se.bi_buf):0<Se.bi_valid&&(Se.pending_buf[Se.pending++]=Se.bi_buf),Se.bi_buf=0,Se.bi_valid=0}function Sn(Se,qe,kt,Ot){var st=2*qe,Vt=2*kt;return Se[st]<Se[Vt]||Se[st]===Se[Vt]&&Ot[qe]<=Ot[kt]}function Vn(Se,qe,kt){for(var Ot=Se.heap[kt],st=kt<<1;st<=Se.heap_len&&(st<Se.heap_len&&Sn(qe,Se.heap[st+1],Se.heap[st],Se.depth)&&st++,!Sn(qe,Ot,Se.heap[st],Se.depth));)Se.heap[kt]=Se.heap[st],kt=st,st<<=1;Se.heap[kt]=Ot}function Ln(Se,qe,kt){var Ot,st,Vt,It,Lt=0;if(Se.last_lit!==0)for(;Ot=Se.pending_buf[Se.d_buf+2*Lt]<<8|Se.pending_buf[Se.d_buf+2*Lt+1],st=Se.pending_buf[Se.l_buf+Lt],Lt++,Ot===0?ct(Se,st,qe):(ct(Se,(Vt=Q[st])+O+1,qe),(It=Ce[Vt])!==0&&at(Se,st-=He[Vt],It),ct(Se,Vt=ge(--Ot),kt),(It=ye[Vt])!==0&&at(Se,Ot-=$e[Vt],It)),Lt<Se.last_lit;);ct(Se,Z,qe)}function Xr(Se,qe){var kt,Ot,st,Vt=qe.dyn_tree,It=qe.stat_desc.static_tree,Lt=qe.stat_desc.has_stree,Rn=qe.stat_desc.elems,Br=-1;for(Se.heap_len=0,Se.heap_max=N,kt=0;kt<Rn;kt++)Vt[2*kt]!==0?(Se.heap[++Se.heap_len]=Br=kt,Se.depth[kt]=0):Vt[2*kt+1]=0;for(;Se.heap_len<2;)Vt[2*(st=Se.heap[++Se.heap_len]=Br<2?++Br:0)]=1,Se.depth[st]=0,Se.opt_len--,Lt&&(Se.static_len-=It[2*st+1]);for(qe.max_code=Br,kt=Se.heap_len>>1;1<=kt;kt--)Vn(Se,Vt,kt);for(st=Rn;kt=Se.heap[1],Se.heap[1]=Se.heap[Se.heap_len--],Vn(Se,Vt,1),Ot=Se.heap[1],Se.heap[--Se.heap_max]=kt,Se.heap[--Se.heap_max]=Ot,Vt[2*st]=Vt[2*kt]+Vt[2*Ot],Se.depth[st]=(Se.depth[kt]>=Se.depth[Ot]?Se.depth[kt]:Se.depth[Ot])+1,Vt[2*kt+1]=Vt[2*Ot+1]=st,Se.heap[1]=st++,Vn(Se,Vt,1),2<=Se.heap_len;);Se.heap[--Se.heap_max]=Se.heap[1],function(tr,Eo){var Op,Vo,ru,Gi,Vm,g5,iu=Eo.dyn_tree,v5=Eo.max_code,I7=Eo.stat_desc.static_tree,R7=Eo.stat_desc.has_stree,D7=Eo.stat_desc.extra_bits,y5=Eo.stat_desc.extra_base,el=Eo.stat_desc.max_length,su=0;for(Gi=0;Gi<=V;Gi++)tr.bl_count[Gi]=0;for(iu[2*tr.heap[tr.heap_max]+1]=0,Op=tr.heap_max+1;Op<N;Op++)el<(Gi=iu[2*iu[2*(Vo=tr.heap[Op])+1]+1]+1)&&(Gi=el,su++),iu[2*Vo+1]=Gi,v5<Vo||(tr.bl_count[Gi]++,Vm=0,y5<=Vo&&(Vm=D7[Vo-y5]),g5=iu[2*Vo],tr.opt_len+=g5*(Gi+Vm),R7&&(tr.static_len+=g5*(I7[2*Vo+1]+Vm)));if(su!==0){do{for(Gi=el-1;tr.bl_count[Gi]===0;)Gi--;tr.bl_count[Gi]--,tr.bl_count[Gi+1]+=2,tr.bl_count[el]--,su-=2}while(0<su);for(Gi=el;Gi!==0;Gi--)for(Vo=tr.bl_count[Gi];Vo!==0;)v5<(ru=tr.heap[--Op])||(iu[2*ru+1]!==Gi&&(tr.opt_len+=(Gi-iu[2*ru+1])*iu[2*ru],iu[2*ru+1]=Gi),Vo--)}}(Se,qe),an(Vt,Br,Se.bl_count)}function ee(Se,qe,kt){var Ot,st,Vt=-1,It=qe[1],Lt=0,Rn=7,Br=4;for(It===0&&(Rn=138,Br=3),qe[2*(kt+1)+1]=65535,Ot=0;Ot<=kt;Ot++)st=It,It=qe[2*(Ot+1)+1],++Lt<Rn&&st===It||(Lt<Br?Se.bl_tree[2*st]+=Lt:st!==0?(st!==Vt&&Se.bl_tree[2*st]++,Se.bl_tree[2*ie]++):Lt<=10?Se.bl_tree[2*re]++:Se.bl_tree[2*le]++,Vt=st,Br=(Lt=0)===It?(Rn=138,3):st===It?(Rn=6,3):(Rn=7,4))}function ft(Se,qe,kt){var Ot,st,Vt=-1,It=qe[1],Lt=0,Rn=7,Br=4;for(It===0&&(Rn=138,Br=3),Ot=0;Ot<=kt;Ot++)if(st=It,It=qe[2*(Ot+1)+1],!(++Lt<Rn&&st===It)){if(Lt<Br)for(;ct(Se,st,Se.bl_tree),--Lt!=0;);else st!==0?(st!==Vt&&(ct(Se,st,Se.bl_tree),Lt--),ct(Se,ie,Se.bl_tree),at(Se,Lt-3,2)):Lt<=10?(ct(Se,re,Se.bl_tree),at(Se,Lt-3,3)):(ct(Se,le,Se.bl_tree),at(Se,Lt-11,7));Vt=st,Br=(Lt=0)===It?(Rn=138,3):st===It?(Rn=6,3):(Rn=7,4)}}E($e);var pt=!1;function Ee(Se,qe,kt,Ot){at(Se,(P<<1)+(Ot?1:0),3),function(st,Vt,It,Lt){nn(st),Lt&&(it(st,It),it(st,~It)),g.arraySet(st.pending_buf,st.window,Vt,It,st.pending),st.pending+=It}(Se,qe,kt,!0)}m._tr_init=function(Se){pt||(function(){var qe,kt,Ot,st,Vt,It=new Array(V+1);for(st=Ot=0;st<I-1;st++)for(He[st]=Ot,qe=0;qe<1<<Ce[st];qe++)Q[Ot++]=st;for(Q[Ot-1]=st,st=Vt=0;st<16;st++)for($e[st]=Vt,qe=0;qe<1<<ye[st];qe++)Le[Vt++]=st;for(Vt>>=7;st<A;st++)for($e[st]=Vt<<7,qe=0;qe<1<<ye[st]-7;qe++)Le[256+Vt++]=st;for(kt=0;kt<=V;kt++)It[kt]=0;for(qe=0;qe<=143;)lt[2*qe+1]=8,qe++,It[8]++;for(;qe<=255;)lt[2*qe+1]=9,qe++,It[9]++;for(;qe<=279;)lt[2*qe+1]=7,qe++,It[7]++;for(;qe<=287;)lt[2*qe+1]=8,qe++,It[8]++;for(an(lt,R+1,It),qe=0;qe<A;qe++)ue[2*qe+1]=5,ue[2*qe]=Xe(qe,5);Bt=new Pt(lt,Ce,O+1,R,V),Ie=new Pt(ue,ye,0,A,V),Re=new Pt(new Array(0),we,0,F,$)}(),pt=!0),Se.l_desc=new ce(Se.dyn_ltree,Bt),Se.d_desc=new ce(Se.dyn_dtree,Ie),Se.bl_desc=new ce(Se.bl_tree,Re),Se.bi_buf=0,Se.bi_valid=0,St(Se)},m._tr_stored_block=Ee,m._tr_flush_block=function(Se,qe,kt,Ot){var st,Vt,It=0;0<Se.level?(Se.strm.data_type===2&&(Se.strm.data_type=function(Lt){var Rn,Br=4093624447;for(Rn=0;Rn<=31;Rn++,Br>>>=1)if(1&Br&&Lt.dyn_ltree[2*Rn]!==0)return b;if(Lt.dyn_ltree[18]!==0||Lt.dyn_ltree[20]!==0||Lt.dyn_ltree[26]!==0)return _;for(Rn=32;Rn<O;Rn++)if(Lt.dyn_ltree[2*Rn]!==0)return _;return b}(Se)),Xr(Se,Se.l_desc),Xr(Se,Se.d_desc),It=function(Lt){var Rn;for(ee(Lt,Lt.dyn_ltree,Lt.l_desc.max_code),ee(Lt,Lt.dyn_dtree,Lt.d_desc.max_code),Xr(Lt,Lt.bl_desc),Rn=F-1;3<=Rn&&Lt.bl_tree[2*Ne[Rn]+1]===0;Rn--);return Lt.opt_len+=3*(Rn+1)+5+5+4,Rn}(Se),st=Se.opt_len+3+7>>>3,(Vt=Se.static_len+3+7>>>3)<=st&&(st=Vt)):st=Vt=kt+5,kt+4<=st&&qe!==-1?Ee(Se,qe,kt,Ot):Se.strategy===4||Vt===st?(at(Se,2+(Ot?1:0),3),Ln(Se,lt,ue)):(at(Se,4+(Ot?1:0),3),function(Lt,Rn,Br,tr){var Eo;for(at(Lt,Rn-257,5),at(Lt,Br-1,5),at(Lt,tr-4,4),Eo=0;Eo<tr;Eo++)at(Lt,Lt.bl_tree[2*Ne[Eo]+1],3);ft(Lt,Lt.dyn_ltree,Rn-1),ft(Lt,Lt.dyn_dtree,Br-1)}(Se,Se.l_desc.max_code+1,Se.d_desc.max_code+1,It+1),Ln(Se,Se.dyn_ltree,Se.dyn_dtree)),St(Se),Ot&&nn(Se)},m._tr_tally=function(Se,qe,kt){return Se.pending_buf[Se.d_buf+2*Se.last_lit]=qe>>>8&255,Se.pending_buf[Se.d_buf+2*Se.last_lit+1]=255&qe,Se.pending_buf[Se.l_buf+Se.last_lit]=255&kt,Se.last_lit++,qe===0?Se.dyn_ltree[2*kt]++:(Se.matches++,qe--,Se.dyn_ltree[2*(Q[kt]+O+1)]++,Se.dyn_dtree[2*ge(qe)]++),Se.last_lit===Se.lit_bufsize-1},m._tr_align=function(Se){at(Se,2,3),ct(Se,Z,lt),function(qe){qe.bi_valid===16?(it(qe,qe.bi_buf),qe.bi_buf=0,qe.bi_valid=0):8<=qe.bi_valid&&(qe.pending_buf[qe.pending++]=255&qe.bi_buf,qe.bi_buf>>=8,qe.bi_valid-=8)}(Se)}},{"../utils/common":41}],53:[function(l,h,m){h.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(l,h,m){(function(g){(function(b,_){if(!b.setImmediate){var E,P,I,O,R=1,A={},F=!1,N=b.document,V=Object.getPrototypeOf&&Object.getPrototypeOf(b);V=V&&V.setTimeout?V:b,E={}.toString.call(b.process)==="[object process]"?function(ie){process.nextTick(function(){$(ie)})}:function(){if(b.postMessage&&!b.importScripts){var ie=!0,re=b.onmessage;return b.onmessage=function(){ie=!1},b.postMessage("","*"),b.onmessage=re,ie}}()?(O="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",Z,!1):b.attachEvent("onmessage",Z),function(ie){b.postMessage(O+ie,"*")}):b.MessageChannel?((I=new MessageChannel).port1.onmessage=function(ie){$(ie.data)},function(ie){I.port2.postMessage(ie)}):N&&"onreadystatechange"in N.createElement("script")?(P=N.documentElement,function(ie){var re=N.createElement("script");re.onreadystatechange=function(){$(ie),re.onreadystatechange=null,P.removeChild(re),re=null},P.appendChild(re)}):function(ie){setTimeout($,0,ie)},V.setImmediate=function(ie){typeof ie!="function"&&(ie=new Function(""+ie));for(var re=new Array(arguments.length-1),le=0;le<re.length;le++)re[le]=arguments[le+1];var Ce={callback:ie,args:re};return A[R]=Ce,E(R),R++},V.clearImmediate=W}function W(ie){delete A[ie]}function $(ie){if(F)setTimeout($,0,ie);else{var re=A[ie];if(re){F=!0;try{(function(le){var Ce=le.callback,ye=le.args;switch(ye.length){case 0:Ce();break;case 1:Ce(ye[0]);break;case 2:Ce(ye[0],ye[1]);break;case 3:Ce(ye[0],ye[1],ye[2]);break;default:Ce.apply(_,ye)}})(re)}finally{W(ie),F=!1}}}}function Z(ie){ie.source===b&&typeof ie.data=="string"&&ie.data.indexOf(O)===0&&$(+ie.data.slice(O.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof Ki<"u"?Ki:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),QN,HC,Mne,JN,kne,Ane,G6,Ine,eF,Rne,GC,W6,$6,vp,Dne,One,Lne,K3,Va,Nne,Fne,tF,WC,xEe=C(()=>{QN=q(Fe(),1),HC=q(Fe(),1),Mne=s=>typeof s=="function",JN=(s,a)=>Mne(s)?s(a):s,kne=(()=>{let s=0;return()=>(++s).toString()})(),Ane=20,G6=new Map,Ine=1e3,eF=s=>{if(G6.has(s))return;let a=setTimeout(()=>{G6.delete(s),vp({type:4,toastId:s})},Ine);G6.set(s,a)},Rne=s=>{let a=G6.get(s);a&&clearTimeout(a)},GC=(s,a)=>{switch(a.type){case 0:return L(B({},s),{toasts:[a.toast,...s.toasts].slice(0,Ane)});case 1:return a.toast.id&&Rne(a.toast.id),L(B({},s),{toasts:s.toasts.map(g=>g.id===a.toast.id?B(B({},g),a.toast):g)});case 2:let{toast:l}=a;return s.toasts.find(g=>g.id===l.id)?GC(s,{type:1,toast:l}):GC(s,{type:0,toast:l});case 3:let{toastId:h}=a;return h?eF(h):s.toasts.forEach(g=>{eF(g.id)}),L(B({},s),{toasts:s.toasts.map(g=>g.id===h||h===void 0?L(B({},g),{visible:!1}):g)});case 4:return a.toastId===void 0?L(B({},s),{toasts:[]}):L(B({},s),{toasts:s.toasts.filter(g=>g.id!==a.toastId)});case 5:return L(B({},s),{pausedAt:a.time});case 6:let m=a.time-(s.pausedAt||0);return L(B({},s),{pausedAt:void 0,toasts:s.toasts.map(g=>L(B({},g),{pauseDuration:g.pauseDuration+m}))})}},W6=[],$6={toasts:[],pausedAt:void 0},vp=s=>{$6=GC($6,s),W6.forEach(a=>{a($6)})},Dne={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},One=(s={})=>{let[a,l]=(0,QN.useState)($6);(0,QN.useEffect)(()=>(W6.push(l),()=>{let m=W6.indexOf(l);m>-1&&W6.splice(m,1)}),[a]);let h=a.toasts.map(m=>{var g,b;return L(B(B(B({},s),s[m.type]),m),{duration:m.duration||((g=s[m.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||Dne[m.type],style:B(B(B({},s.style),(b=s[m.type])==null?void 0:b.style),m.style)})});return L(B({},a),{toasts:h})},Lne=(s,a="blank",l)=>L(B({createdAt:Date.now(),visible:!0,type:a,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0},l),{id:(l==null?void 0:l.id)||kne()}),K3=s=>(a,l)=>{let h=Lne(a,s,l);return vp({type:2,toast:h}),h.id},Va=(s,a)=>K3("blank")(s,a),Va.error=K3("error"),Va.success=K3("success"),Va.loading=K3("loading"),Va.custom=K3("custom"),Va.dismiss=s=>{vp({type:3,toastId:s})},Va.remove=s=>vp({type:4,toastId:s}),Va.promise=(s,a,l)=>{let h=Va.loading(a.loading,B(B({},l),l==null?void 0:l.loading));return s.then(m=>(Va.success(JN(a.success,m),B(B({id:h},l),l==null?void 0:l.success)),m)).catch(m=>{Va.error(JN(a.error,m),B(B({id:h},l),l==null?void 0:l.error))}),s},Nne=(s,a)=>{vp({type:1,toast:{id:s,height:a}})},Fne=()=>{vp({type:5,time:Date.now()})},tF=s=>{let{toasts:a,pausedAt:l}=One(s);(0,HC.useEffect)(()=>{if(l)return;let g=Date.now(),b=a.map(_=>{if(_.duration===1/0)return;let E=(_.duration||0)+_.pauseDuration-(g-_.createdAt);if(E<0){_.visible&&Va.dismiss(_.id);return}return setTimeout(()=>Va.dismiss(_.id),E)});return()=>{b.forEach(_=>_&&clearTimeout(_))}},[a,l]);let h=(0,HC.useCallback)(()=>{l&&vp({type:6,time:Date.now()})},[l]),m=(0,HC.useCallback)((g,b)=>{let{reverseOrder:_=!1,gutter:E=8,defaultPosition:P}=b||{},I=a.filter(A=>(A.position||P)===(g.position||P)&&A.height),O=I.findIndex(A=>A.id===g.id),R=I.filter((A,F)=>F<O&&A.visible).length;return I.filter(A=>A.visible).slice(..._?[R+1]:[0,R]).reduce((A,F)=>A+(F.height||0)+E,0)},[a]);return{toasts:a,handlers:{updateHeight:Nne,startPause:Fne,endPause:h,calculateOffset:m}}},WC=Va});function Bne(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function SEe(s){cm=s}function to(s,a){if(a){if($ne.test(s))return s.replace(Kne,nF)}else if(Xne.test(s))return s.replace(qne,nF);return s}function Une(s){return s.replace(Zne,(a,l)=>(l=l.toLowerCase(),l==="colon"?":":l.charAt(0)==="#"?l.charAt(1)==="x"?String.fromCharCode(parseInt(l.substring(2),16)):String.fromCharCode(+l.substring(1)):""))}function hi(s,a){s=typeof s=="string"?s:s.source,a=a||"";let l={replace:(h,m)=>(m=m.source||m,m=m.replace(Qne,"$1"),s=s.replace(h,m),l),getRegex:()=>new RegExp(s,a)};return l}function zne(s,a,l){if(s){let h;try{h=decodeURIComponent(Une(l)).replace(Jne,"").toLowerCase()}catch{return null}if(h.indexOf("javascript:")===0||h.indexOf("vbscript:")===0||h.indexOf("data:")===0)return null}a&&!ere.test(l)&&(l=EEe(a,l));try{l=encodeURI(l).replace(/%25/g,"%")}catch{return null}return l}function EEe(s,a){K6[" "+s]||(tre.test(s)?K6[" "+s]=s+"/":K6[" "+s]=$C(s,"/",!0)),s=K6[" "+s];let l=s.indexOf(":")===-1;return a.substring(0,2)==="//"?l?a:s.replace(nre,"$1")+a:a.charAt(0)==="/"?l?a:s.replace(rre,"$1")+a:s+a}function ql(s){let a=1,l,h;for(;a<arguments.length;a++){l=arguments[a];for(h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s}function Vne(s,a){let l=s.replace(/\|/g,(g,b,_)=>{let E=!1,P=b;for(;--P>=0&&_[P]==="\\";)E=!E;return E?"|":" |"}),h=l.split(/ \|/),m=0;if(h[0].trim()||h.shift(),h.length>0&&!h[h.length-1].trim()&&h.pop(),h.length>a)h.splice(a);else for(;h.length<a;)h.push("");for(;m<h.length;m++)h[m]=h[m].trim().replace(/\\\|/g,"|");return h}function $C(s,a,l){let h=s.length;if(h===0)return"";let m=0;for(;m<h;){let g=s.charAt(h-m-1);if(g===a&&!l)m++;else if(g!==a&&l)m++;else break}return s.slice(0,h-m)}function CEe(s,a){if(s.indexOf(a[1])===-1)return-1;let l=s.length,h=0,m=0;for(;m<l;m++)if(s[m]==="\\")m++;else if(s[m]===a[0])h++;else if(s[m]===a[1]&&(h--,h<0))return m;return-1}function jne(s){s&&s.sanitize&&!s.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Hne(s,a){if(a<1)return"";let l="";for(;a>1;)a&1&&(l+=s),a>>=1,s+=s;return l+s}function Gne(s,a,l,h){let m=a.href,g=a.title?to(a.title):null,b=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){h.state.inLink=!0;let _={type:"link",raw:l,href:m,title:g,text:b,tokens:h.inlineTokens(b)};return h.state.inLink=!1,_}return{type:"image",raw:l,href:m,title:g,text:to(b)}}function PEe(s,a){let l=s.match(/^(\s+)(?:```)/);if(l===null)return a;let h=l[1];return a.split(`
`).map(m=>{let g=m.match(/^\s+/);if(g===null)return m;let[b]=g;return b.length>=h.length?m.slice(h.length):m}).join(`
`)}function TEe(s){return s.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Wne(s){let a="",l,h,m=s.length;for(l=0;l<m;l++)h=s.charCodeAt(l),Math.random()>.5&&(h="x"+h.toString(16)),a+="&#"+h+";";return a}function Jn(s,a,l){if(typeof s>"u"||s===null)throw new Error("marked(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");if(typeof a=="function"&&(l=a,a=null),a=ql({},Jn.defaults,a||{}),jne(a),l){let m=a.highlight,g;try{g=dm.lex(s,a)}catch(E){return l(E)}let b=function(E){let P;if(!E)try{a.walkTokens&&Jn.walkTokens(g,a.walkTokens),P=yp.parse(g,a)}catch(I){E=I}return a.highlight=m,E?l(E):l(null,P)};if(!m||m.length<3||(delete a.highlight,!g.length))return b();let _=0;Jn.walkTokens(g,function(E){E.type==="code"&&(_++,setTimeout(()=>{m(E.text,E.lang,function(P,I){if(P)return b(P);I!=null&&I!==E.text&&(E.text=I,E.escaped=!0),_--,_===0&&b()})},0))}),_===0&&b();return}function h(m){if(m.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+to(m.message+"",!0)+"</pre>";throw m}try{let m=dm.lex(s,a);if(a.walkTokens){if(a.async)return Promise.all(Jn.walkTokens(m,a.walkTokens)).then(()=>yp.parse(m,a)).catch(h);Jn.walkTokens(m,a.walkTokens)}return yp.parse(m,a)}catch(m){h(m)}}var cm,$ne,Kne,Xne,qne,Yne,nF,Zne,Qne,Jne,ere,K6,tre,nre,rre,X6,KC,zn,yn,dm,XC,rF,iF,yp,MEe=C(()=>{cm=Bne(),$ne=/[&<>"']/,Kne=/[&<>"']/g,Xne=/[<>"']|&(?!#?\w+;)/,qne=/[<>"']|&(?!#?\w+;)/g,Yne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nF=s=>Yne[s],Zne=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,Qne=/(^|[^\[])\^/g,Jne=/[^\w:]/g,ere=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,K6={},tre=/^[^:]+:\/*[^/]*$/,nre=/^([^:]+:)[\s\S]*$/,rre=/^([^:]+:\/*[^/]*)[\s\S]*$/,X6={exec:function(){}},KC=class{constructor(s){this.options=s||cm}space(s){let a=this.rules.block.newline.exec(s);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(s){let a=this.rules.block.code.exec(s);if(a){let l=a[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?l:$C(l,`
`)}}}fences(s){let a=this.rules.block.fences.exec(s);if(a){let l=a[0],h=PEe(l,a[3]||"");return{type:"code",raw:l,lang:a[2]?a[2].trim():a[2],text:h}}}heading(s){let a=this.rules.block.heading.exec(s);if(a){let l=a[2].trim();if(/#$/.test(l)){let h=$C(l,"#");(this.options.pedantic||!h||/ $/.test(h))&&(l=h.trim())}return{type:"heading",raw:a[0],depth:a[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(s){let a=this.rules.block.hr.exec(s);if(a)return{type:"hr",raw:a[0]}}blockquote(s){let a=this.rules.block.blockquote.exec(s);if(a){let l=a[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:a[0],tokens:this.lexer.blockTokens(l,[]),text:l}}}list(s){let a=this.rules.block.list.exec(s);if(a){let l,h,m,g,b,_,E,P,I,O,R,A,F=a[1].trim(),N=F.length>1,V={type:"list",raw:"",ordered:N,start:N?+F.slice(0,-1):"",loose:!1,items:[]};F=N?"\\d{1,9}\\".concat(F.slice(-1)):"\\".concat(F),this.options.pedantic&&(F=N?F:"[*+-]");let W=new RegExp("^( {0,3}".concat(F,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;s&&(A=!1,!(!(a=W.exec(s))||this.rules.block.hr.test(s)));){if(l=a[0],s=s.substring(l.length),P=a[2].split(`
`,1)[0],I=s.split(`
`,1)[0],this.options.pedantic?(g=2,R=P.trimLeft()):(g=a[2].search(/[^ ]/),g=g>4?1:g,R=P.slice(g),g+=a[1].length),_=!1,!P&&/^ *$/.test(I)&&(l+=I+`
`,s=s.substring(I.length+1),A=!0),!A){let Z=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),ie=new RegExp("^ {0,".concat(Math.min(3,g-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),re=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:```|~~~)")),le=new RegExp("^ {0,".concat(Math.min(3,g-1),"}#"));for(;s&&(O=s.split(`
`,1)[0],P=O,this.options.pedantic&&(P=P.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(re.test(P)||le.test(P)||Z.test(P)||ie.test(s)));){if(P.search(/[^ ]/)>=g||!P.trim())R+=`
`+P.slice(g);else if(!_)R+=`
`+P;else break;!_&&!P.trim()&&(_=!0),l+=O+`
`,s=s.substring(O.length+1)}}V.loose||(E?V.loose=!0:/\n *\n *$/.test(l)&&(E=!0)),this.options.gfm&&(h=/^\[[ xX]\] /.exec(R),h&&(m=h[0]!=="[ ] ",R=R.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:l,task:!!h,checked:m,loose:!1,text:R}),V.raw+=l}V.items[V.items.length-1].raw=l.trimRight(),V.items[V.items.length-1].text=R.trimRight(),V.raw=V.raw.trimRight();let $=V.items.length;for(b=0;b<$;b++){this.lexer.state.top=!1,V.items[b].tokens=this.lexer.blockTokens(V.items[b].text,[]);let Z=V.items[b].tokens.filter(re=>re.type==="space"),ie=Z.every(re=>{let le=re.raw.split(""),Ce=0;for(let ye of le)if(ye===`
`&&(Ce+=1),Ce>1)return!0;return!1});!V.loose&&Z.length&&ie&&(V.loose=!0,V.items[b].loose=!0)}return V}}html(s){let a=this.rules.block.html.exec(s);if(a){let l={type:"html",raw:a[0],pre:!this.options.sanitizer&&(a[1]==="pre"||a[1]==="script"||a[1]==="style"),text:a[0]};if(this.options.sanitize){let h=this.options.sanitizer?this.options.sanitizer(a[0]):to(a[0]);l.type="paragraph",l.text=h,l.tokens=this.lexer.inline(h)}return l}}def(s){let a=this.rules.block.def.exec(s);if(a)return a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),{type:"def",tag:a[1].toLowerCase().replace(/\s+/g," "),raw:a[0],href:a[2],title:a[3]}}table(s){let a=this.rules.block.table.exec(s);if(a){let l={type:"table",header:Vne(a[1]).map(h=>({text:h})),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(l.header.length===l.align.length){l.raw=a[0];let h=l.align.length,m,g,b,_;for(m=0;m<h;m++)/^ *-+: *$/.test(l.align[m])?l.align[m]="right":/^ *:-+: *$/.test(l.align[m])?l.align[m]="center":/^ *:-+ *$/.test(l.align[m])?l.align[m]="left":l.align[m]=null;for(h=l.rows.length,m=0;m<h;m++)l.rows[m]=Vne(l.rows[m],l.header.length).map(E=>({text:E}));for(h=l.header.length,g=0;g<h;g++)l.header[g].tokens=this.lexer.inline(l.header[g].text);for(h=l.rows.length,g=0;g<h;g++)for(_=l.rows[g],b=0;b<_.length;b++)_[b].tokens=this.lexer.inline(_[b].text);return l}}}lheading(s){let a=this.rules.block.lheading.exec(s);if(a)return{type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:this.lexer.inline(a[1])}}paragraph(s){let a=this.rules.block.paragraph.exec(s);if(a){let l=a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1];return{type:"paragraph",raw:a[0],text:l,tokens:this.lexer.inline(l)}}}text(s){let a=this.rules.block.text.exec(s);if(a)return{type:"text",raw:a[0],text:a[0],tokens:this.lexer.inline(a[0])}}escape(s){let a=this.rules.inline.escape.exec(s);if(a)return{type:"escape",raw:a[0],text:to(a[1])}}tag(s){let a=this.rules.inline.tag.exec(s);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):to(a[0]):a[0]}}link(s){let a=this.rules.inline.link.exec(s);if(a){let l=a[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;let g=$C(l.slice(0,-1),"\\");if((l.length-g.length)%2===0)return}else{let g=CEe(a[2],"()");if(g>-1){let b=(a[0].indexOf("!")===0?5:4)+a[1].length+g;a[2]=a[2].substring(0,g),a[0]=a[0].substring(0,b).trim(),a[3]=""}}let h=a[2],m="";if(this.options.pedantic){let g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(h);g&&(h=g[1],m=g[3])}else m=a[3]?a[3].slice(1,-1):"";return h=h.trim(),/^</.test(h)&&(this.options.pedantic&&!/>$/.test(l)?h=h.slice(1):h=h.slice(1,-1)),Gne(a,{href:h&&h.replace(this.rules.inline._escapes,"$1"),title:m&&m.replace(this.rules.inline._escapes,"$1")},a[0],this.lexer)}}reflink(s,a){let l;if((l=this.rules.inline.reflink.exec(s))||(l=this.rules.inline.nolink.exec(s))){let h=(l[2]||l[1]).replace(/\s+/g," ");if(h=a[h.toLowerCase()],!h||!h.href){let m=l[0].charAt(0);return{type:"text",raw:m,text:m}}return Gne(l,h,l[0],this.lexer)}}emStrong(s,a,l=""){let h=this.rules.inline.emStrong.lDelim.exec(s);if(!h||h[3]&&l.match(/[\p{L}\p{N}]/u))return;let m=h[1]||h[2]||"";if(!m||m&&(l===""||this.rules.inline.punctuation.exec(l))){let g=h[0].length-1,b,_,E=g,P=0,I=h[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(I.lastIndex=0,a=a.slice(-1*s.length+g);(h=I.exec(a))!=null;){if(b=h[1]||h[2]||h[3]||h[4]||h[5]||h[6],!b)continue;if(_=b.length,h[3]||h[4]){E+=_;continue}else if((h[5]||h[6])&&g%3&&!((g+_)%3)){P+=_;continue}if(E-=_,E>0)continue;if(_=Math.min(_,_+E+P),Math.min(g,_)%2){let R=s.slice(1,g+h.index+_);return{type:"em",raw:s.slice(0,g+h.index+_+1),text:R,tokens:this.lexer.inlineTokens(R)}}let O=s.slice(2,g+h.index+_-1);return{type:"strong",raw:s.slice(0,g+h.index+_+1),text:O,tokens:this.lexer.inlineTokens(O)}}}}codespan(s){let a=this.rules.inline.code.exec(s);if(a){let l=a[2].replace(/\n/g," "),h=/[^ ]/.test(l),m=/^ /.test(l)&&/ $/.test(l);return h&&m&&(l=l.substring(1,l.length-1)),l=to(l,!0),{type:"codespan",raw:a[0],text:l}}}br(s){let a=this.rules.inline.br.exec(s);if(a)return{type:"br",raw:a[0]}}del(s){let a=this.rules.inline.del.exec(s);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2])}}autolink(s,a){let l=this.rules.inline.autolink.exec(s);if(l){let h,m;return l[2]==="@"?(h=to(this.options.mangle?a(l[1]):l[1]),m="mailto:"+h):(h=to(l[1]),m=h),{type:"link",raw:l[0],text:h,href:m,tokens:[{type:"text",raw:h,text:h}]}}}url(s,a){let l;if(l=this.rules.inline.url.exec(s)){let h,m;if(l[2]==="@")h=to(this.options.mangle?a(l[0]):l[0]),m="mailto:"+h;else{let g;do g=l[0],l[0]=this.rules.inline._backpedal.exec(l[0])[0];while(g!==l[0]);h=to(l[0]),l[1]==="www."?m="http://"+h:m=h}return{type:"link",raw:l[0],text:h,href:m,tokens:[{type:"text",raw:h,text:h}]}}}inlineText(s,a){let l=this.rules.inline.text.exec(s);if(l){let h;return this.lexer.state.inRawBlock?h=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):to(l[0]):l[0]:h=to(this.options.smartypants?a(l[0]):l[0]),{type:"text",raw:l[0],text:h}}}},zn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:X6,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},zn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,zn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,zn.def=hi(zn.def).replace("label",zn._label).replace("title",zn._title).getRegex(),zn.bullet=/(?:[*+-]|\d{1,9}[.)])/,zn.listItemStart=hi(/^( *)(bull) */).replace("bull",zn.bullet).getRegex(),zn.list=hi(zn.list).replace(/bull/g,zn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+zn.def.source+")").getRegex(),zn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,zn.html=hi(zn.html,"i").replace("comment",zn._comment).replace("tag",zn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zn.paragraph=hi(zn._paragraph).replace("hr",zn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zn._tag).getRegex(),zn.blockquote=hi(zn.blockquote).replace("paragraph",zn.paragraph).getRegex(),zn.normal=ql({},zn),zn.gfm=ql({},zn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),zn.gfm.table=hi(zn.gfm.table).replace("hr",zn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zn._tag).getRegex(),zn.gfm.paragraph=hi(zn._paragraph).replace("hr",zn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",zn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zn._tag).getRegex(),zn.pedantic=ql({},zn.normal,{html:hi(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:X6,paragraph:hi(zn.normal._paragraph).replace("hr",zn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),yn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:X6,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:X6,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},yn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",yn.punctuation=hi(yn.punctuation).replace(/punctuation/g,yn._punctuation).getRegex(),yn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,yn.escapedEmSt=/\\\*|\\_/g,yn._comment=hi(zn._comment).replace("(?:-->|$)","-->").getRegex(),yn.emStrong.lDelim=hi(yn.emStrong.lDelim).replace(/punct/g,yn._punctuation).getRegex(),yn.emStrong.rDelimAst=hi(yn.emStrong.rDelimAst,"g").replace(/punct/g,yn._punctuation).getRegex(),yn.emStrong.rDelimUnd=hi(yn.emStrong.rDelimUnd,"g").replace(/punct/g,yn._punctuation).getRegex(),yn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,yn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,yn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,yn.autolink=hi(yn.autolink).replace("scheme",yn._scheme).replace("email",yn._email).getRegex(),yn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,yn.tag=hi(yn.tag).replace("comment",yn._comment).replace("attribute",yn._attribute).getRegex(),yn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,yn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,yn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,yn.link=hi(yn.link).replace("label",yn._label).replace("href",yn._href).replace("title",yn._title).getRegex(),yn.reflink=hi(yn.reflink).replace("label",yn._label).replace("ref",zn._label).getRegex(),yn.nolink=hi(yn.nolink).replace("ref",zn._label).getRegex(),yn.reflinkSearch=hi(yn.reflinkSearch,"g").replace("reflink",yn.reflink).replace("nolink",yn.nolink).getRegex(),yn.normal=ql({},yn),yn.pedantic=ql({},yn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:hi(/^!?\[(label)\]\((.*?)\)/).replace("label",yn._label).getRegex(),reflink:hi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yn._label).getRegex()}),yn.gfm=ql({},yn.normal,{escape:hi(yn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),yn.gfm.url=hi(yn.gfm.url,"i").replace("email",yn.gfm._extended_email).getRegex(),yn.breaks=ql({},yn.gfm,{br:hi(yn.br).replace("{2,}","*").getRegex(),text:hi(yn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),dm=class CG{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||cm,this.options.tokenizer=this.options.tokenizer||new KC,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let l={block:zn.normal,inline:yn.normal};this.options.pedantic?(l.block=zn.pedantic,l.inline=yn.pedantic):this.options.gfm&&(l.block=zn.gfm,this.options.breaks?l.inline=yn.breaks:l.inline=yn.gfm),this.tokenizer.rules=l}static get rules(){return{block:zn,inline:yn}}static lex(a,l){return new CG(l).lex(a)}static lexInline(a,l){return new CG(l).inlineTokens(a)}lex(a){a=a.replace(/\r\n|\r/g,`
`),this.blockTokens(a,this.tokens);let l;for(;l=this.inlineQueue.shift();)this.inlineTokens(l.src,l.tokens);return this.tokens}blockTokens(a,l=[]){this.options.pedantic?a=a.replace(/\t/g,"    ").replace(/^ +$/gm,""):a=a.replace(/^( *)(\t+)/gm,(_,E,P)=>E+"    ".repeat(P.length));let h,m,g,b;for(;a;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(h=_.call({lexer:this},a,l))?(a=a.substring(h.raw.length),l.push(h),!0):!1))){if(h=this.tokenizer.space(a)){a=a.substring(h.raw.length),h.raw.length===1&&l.length>0?l[l.length-1].raw+=`
`:l.push(h);continue}if(h=this.tokenizer.code(a)){a=a.substring(h.raw.length),m=l[l.length-1],m&&(m.type==="paragraph"||m.type==="text")?(m.raw+=`
`+h.raw,m.text+=`
`+h.text,this.inlineQueue[this.inlineQueue.length-1].src=m.text):l.push(h);continue}if(h=this.tokenizer.fences(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.heading(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.hr(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.blockquote(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.list(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.html(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.def(a)){a=a.substring(h.raw.length),m=l[l.length-1],m&&(m.type==="paragraph"||m.type==="text")?(m.raw+=`
`+h.raw,m.text+=`
`+h.raw,this.inlineQueue[this.inlineQueue.length-1].src=m.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.lheading(a)){a=a.substring(h.raw.length),l.push(h);continue}if(g=a,this.options.extensions&&this.options.extensions.startBlock){let _=1/0,E=a.slice(1),P;this.options.extensions.startBlock.forEach(function(I){P=I.call({lexer:this},E),typeof P=="number"&&P>=0&&(_=Math.min(_,P))}),_<1/0&&_>=0&&(g=a.substring(0,_+1))}if(this.state.top&&(h=this.tokenizer.paragraph(g))){m=l[l.length-1],b&&m.type==="paragraph"?(m.raw+=`
`+h.raw,m.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=m.text):l.push(h),b=g.length!==a.length,a=a.substring(h.raw.length);continue}if(h=this.tokenizer.text(a)){a=a.substring(h.raw.length),m=l[l.length-1],m&&m.type==="text"?(m.raw+=`
`+h.raw,m.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=m.text):l.push(h);continue}if(a){let _="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,l}inline(a,l=[]){return this.inlineQueue.push({src:a,tokens:l}),l}inlineTokens(a,l=[]){let h,m,g,b=a,_,E,P;if(this.tokens.links){let I=Object.keys(this.tokens.links);if(I.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(b))!=null;)I.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(b=b.slice(0,_.index)+"["+Hne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(b))!=null;)b=b.slice(0,_.index)+"["+Hne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.escapedEmSt.exec(b))!=null;)b=b.slice(0,_.index)+"++"+b.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;a;)if(E||(P=""),E=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(I=>(h=I.call({lexer:this},a,l))?(a=a.substring(h.raw.length),l.push(h),!0):!1))){if(h=this.tokenizer.escape(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.tag(a)){a=a.substring(h.raw.length),m=l[l.length-1],m&&h.type==="text"&&m.type==="text"?(m.raw+=h.raw,m.text+=h.text):l.push(h);continue}if(h=this.tokenizer.link(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.reflink(a,this.tokens.links)){a=a.substring(h.raw.length),m=l[l.length-1],m&&h.type==="text"&&m.type==="text"?(m.raw+=h.raw,m.text+=h.text):l.push(h);continue}if(h=this.tokenizer.emStrong(a,b,P)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.codespan(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.br(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.del(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.autolink(a,Wne)){a=a.substring(h.raw.length),l.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(a,Wne))){a=a.substring(h.raw.length),l.push(h);continue}if(g=a,this.options.extensions&&this.options.extensions.startInline){let I=1/0,O=a.slice(1),R;this.options.extensions.startInline.forEach(function(A){R=A.call({lexer:this},O),typeof R=="number"&&R>=0&&(I=Math.min(I,R))}),I<1/0&&I>=0&&(g=a.substring(0,I+1))}if(h=this.tokenizer.inlineText(g,TEe)){a=a.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(P=h.raw.slice(-1)),E=!0,m=l[l.length-1],m&&m.type==="text"?(m.raw+=h.raw,m.text+=h.text):l.push(h);continue}if(a){let I="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(I);break}else throw new Error(I)}}return l}},XC=class{constructor(s){this.options=s||cm}code(s,a,l){let h=(a||"").match(/\S*/)[0];if(this.options.highlight){let m=this.options.highlight(s,h);m!=null&&m!==s&&(l=!0,s=m)}return s=s.replace(/\n$/,"")+`
`,h?'<pre><code class="'+this.options.langPrefix+to(h,!0)+'">'+(l?s:to(s,!0))+`</code></pre>
`:"<pre><code>"+(l?s:to(s,!0))+`</code></pre>
`}blockquote(s){return`<blockquote>
`.concat(s,`</blockquote>
`)}html(s){return s}heading(s,a,l,h){if(this.options.headerIds){let m=this.options.headerPrefix+h.slug(l);return"<h".concat(a,' id="').concat(m,'">').concat(s,"</h").concat(a,`>
`)}return"<h".concat(a,">").concat(s,"</h").concat(a,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(s,a,l){let h=a?"ol":"ul",m=a&&l!==1?' start="'+l+'"':"";return"<"+h+m+`>
`+s+"</"+h+`>
`}listitem(s){return"<li>".concat(s,`</li>
`)}checkbox(s){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(s){return"<p>".concat(s,`</p>
`)}table(s,a){return a&&(a="<tbody>".concat(a,"</tbody>")),`<table>
<thead>
`+s+`</thead>
`+a+`</table>
`}tablerow(s){return`<tr>
`.concat(s,`</tr>
`)}tablecell(s,a){let l=a.header?"th":"td";return(a.align?"<".concat(l,' align="').concat(a.align,'">'):"<".concat(l,">"))+s+"</".concat(l,`>
`)}strong(s){return"<strong>".concat(s,"</strong>")}em(s){return"<em>".concat(s,"</em>")}codespan(s){return"<code>".concat(s,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(s){return"<del>".concat(s,"</del>")}link(s,a,l){if(s=zne(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let h='<a href="'+to(s)+'"';return a&&(h+=' title="'+a+'"'),h+=">"+l+"</a>",h}image(s,a,l){if(s=zne(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let h='<img src="'.concat(s,'" alt="').concat(l,'"');return a&&(h+=' title="'.concat(a,'"')),h+=this.options.xhtml?"/>":">",h}text(s){return s}},rF=class{strong(s){return s}em(s){return s}codespan(s){return s}del(s){return s}html(s){return s}text(s){return s}link(s,a,l){return""+l}image(s,a,l){return""+l}br(){return""}},iF=class{constructor(){this.seen={}}serialize(s){return s.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(s,a){let l=s,h=0;if(this.seen.hasOwnProperty(l)){h=this.seen[s];do h++,l=s+"-"+h;while(this.seen.hasOwnProperty(l))}return a||(this.seen[s]=h,this.seen[l]=0),l}slug(s,a={}){let l=this.serialize(s);return this.getNextSafeSlug(l,a.dryrun)}},yp=class PG{constructor(a){this.options=a||cm,this.options.renderer=this.options.renderer||new XC,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new rF,this.slugger=new iF}static parse(a,l){return new PG(l).parse(a)}static parseInline(a,l){return new PG(l).parseInline(a)}parse(a,l=!0){let h="",m,g,b,_,E,P,I,O,R,A,F,N,V,W,$,Z,ie,re,le,Ce=a.length;for(m=0;m<Ce;m++){if(A=a[m],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[A.type]&&(le=this.options.extensions.renderers[A.type].call({parser:this},A),le!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type))){h+=le||"";continue}switch(A.type){case"space":continue;case"hr":{h+=this.renderer.hr();continue}case"heading":{h+=this.renderer.heading(this.parseInline(A.tokens),A.depth,Une(this.parseInline(A.tokens,this.textRenderer)),this.slugger);continue}case"code":{h+=this.renderer.code(A.text,A.lang,A.escaped);continue}case"table":{for(O="",I="",_=A.header.length,g=0;g<_;g++)I+=this.renderer.tablecell(this.parseInline(A.header[g].tokens),{header:!0,align:A.align[g]});for(O+=this.renderer.tablerow(I),R="",_=A.rows.length,g=0;g<_;g++){for(P=A.rows[g],I="",E=P.length,b=0;b<E;b++)I+=this.renderer.tablecell(this.parseInline(P[b].tokens),{header:!1,align:A.align[b]});R+=this.renderer.tablerow(I)}h+=this.renderer.table(O,R);continue}case"blockquote":{R=this.parse(A.tokens),h+=this.renderer.blockquote(R);continue}case"list":{for(F=A.ordered,N=A.start,V=A.loose,_=A.items.length,R="",g=0;g<_;g++)$=A.items[g],Z=$.checked,ie=$.task,W="",$.task&&(re=this.renderer.checkbox(Z),V?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=re+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=re+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:re}):W+=re),W+=this.parse($.tokens,V),R+=this.renderer.listitem(W,ie,Z);h+=this.renderer.list(R,F,N);continue}case"html":{h+=this.renderer.html(A.text);continue}case"paragraph":{h+=this.renderer.paragraph(this.parseInline(A.tokens));continue}case"text":{for(R=A.tokens?this.parseInline(A.tokens):A.text;m+1<Ce&&a[m+1].type==="text";)A=a[++m],R+=`
`+(A.tokens?this.parseInline(A.tokens):A.text);h+=l?this.renderer.paragraph(R):R;continue}default:{let ye='Token with "'+A.type+'" type was not found.';if(this.options.silent){console.error(ye);return}else throw new Error(ye)}}}return h}parseInline(a,l){l=l||this.renderer;let h="",m,g,b,_=a.length;for(m=0;m<_;m++){if(g=a[m],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(b=this.options.extensions.renderers[g.type].call({parser:this},g),b!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(g.type))){h+=b||"";continue}switch(g.type){case"escape":{h+=l.text(g.text);break}case"html":{h+=l.html(g.text);break}case"link":{h+=l.link(g.href,g.title,this.parseInline(g.tokens,l));break}case"image":{h+=l.image(g.href,g.title,g.text);break}case"strong":{h+=l.strong(this.parseInline(g.tokens,l));break}case"em":{h+=l.em(this.parseInline(g.tokens,l));break}case"codespan":{h+=l.codespan(g.text);break}case"br":{h+=l.br();break}case"del":{h+=l.del(this.parseInline(g.tokens,l));break}case"text":{h+=l.text(g.text);break}default:{let E='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(E);return}else throw new Error(E)}}}return h}},Jn.options=Jn.setOptions=function(s){return ql(Jn.defaults,s),SEe(Jn.defaults),Jn},Jn.getDefaults=Bne,Jn.defaults=cm,Jn.use=function(...s){let a=ql({},...s),l=Jn.defaults.extensions||{renderers:{},childTokens:{}},h;s.forEach(m=>{if(m.extensions&&(h=!0,m.extensions.forEach(g=>{if(!g.name)throw new Error("extension name required");if(g.renderer){let b=l.renderers?l.renderers[g.name]:null;b?l.renderers[g.name]=function(..._){let E=g.renderer.apply(this,_);return E===!1&&(E=b.apply(this,_)),E}:l.renderers[g.name]=g.renderer}if(g.tokenizer){if(!g.level||g.level!=="block"&&g.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");l[g.level]?l[g.level].unshift(g.tokenizer):l[g.level]=[g.tokenizer],g.start&&(g.level==="block"?l.startBlock?l.startBlock.push(g.start):l.startBlock=[g.start]:g.level==="inline"&&(l.startInline?l.startInline.push(g.start):l.startInline=[g.start]))}g.childTokens&&(l.childTokens[g.name]=g.childTokens)})),m.renderer){let g=Jn.defaults.renderer||new XC;for(let b in m.renderer){let _=g[b];g[b]=(...E)=>{let P=m.renderer[b].apply(g,E);return P===!1&&(P=_.apply(g,E)),P}}a.renderer=g}if(m.tokenizer){let g=Jn.defaults.tokenizer||new KC;for(let b in m.tokenizer){let _=g[b];g[b]=(...E)=>{let P=m.tokenizer[b].apply(g,E);return P===!1&&(P=_.apply(g,E)),P}}a.tokenizer=g}if(m.walkTokens){let g=Jn.defaults.walkTokens;a.walkTokens=function(b){let _=[];return _.push(m.walkTokens.call(this,b)),g&&(_=_.concat(g.call(this,b))),_}}h&&(a.extensions=l),Jn.setOptions(a)})},Jn.walkTokens=function(s,a){let l=[];for(let h of s)switch(l=l.concat(a.call(Jn,h)),h.type){case"table":{for(let m of h.header)l=l.concat(Jn.walkTokens(m.tokens,a));for(let m of h.rows)for(let g of m)l=l.concat(Jn.walkTokens(g.tokens,a));break}case"list":{l=l.concat(Jn.walkTokens(h.items,a));break}default:Jn.defaults.extensions&&Jn.defaults.extensions.childTokens&&Jn.defaults.extensions.childTokens[h.type]?Jn.defaults.extensions.childTokens[h.type].forEach(function(m){l=l.concat(Jn.walkTokens(h[m],a))}):h.tokens&&(l=l.concat(Jn.walkTokens(h.tokens,a)))}return l},Jn.parseInline=function(s,a){if(typeof s>"u"||s===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");a=ql({},Jn.defaults,a||{}),jne(a);try{let l=dm.lexInline(s,a);return a.walkTokens&&Jn.walkTokens(l,a.walkTokens),yp.parseInline(l,a)}catch(l){if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+to(l.message+"",!0)+"</pre>";throw l}},Jn.Parser=yp,Jn.parser=yp.parse,Jn.Renderer=XC,Jn.TextRenderer=rF,Jn.Lexer=dm,Jn.lexer=dm.lex,Jn.Tokenizer=KC,Jn.Slugger=iF,Jn.parse=Jn,Jn.options,Jn.setOptions,Jn.use,Jn.walkTokens,Jn.parseInline,yp.parse,dm.lex}),ire,sre,sF,ore=C(()=>{ze(),jC(),sre=ae($3)(ire||(ire=J([`
  padding: 6px;
`]))),sF=sre}),ys,qC,q6,YC,are,lre,ure,oF,cre,dre,hre,aF,pre,fre,mre,gre,vre,Y6,Z6,yre,bre,_re,wre,xre,Sre,Ere,Cre,Pre,Tre,Mre,kre,lF,Q6=C(()=>{ys=q(Fe()),xEe(),ze(),Fr(),Pn(),Me(),MEe(),H6(),ore(),qC=({title:s,message:a})=>"".concat(s," ").concat(a),q6=(()=>{let s=new Map;return{add:a=>{let l=qC(a);s.has(l)?s.set(l,s.get(l)+1):s.set(l,1)},delete:a=>{let l=qC(a);s.has(l)&&s.get(l)>1?s.set(l,s.get(l)-1):s.delete(l)},clear:()=>{s.clear()},check:a=>s.has(qC(a))}})(),YC=(()=>{let s=new Map;return{add:a=>{s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)},delete:a=>{s.has(a)&&s.get(a)>1?s.set(a,s.get(a)-1):s.delete(a)},clear:()=>{s.clear()},check:a=>s.has(a),get types(){return Array.of(...s.keys())}}})(),lre=ae.div(are||(are=J([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Rr),oF=ae.div(ure||(ure=J([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),dre=ae.div(cre||(cre=J([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),aF=ae.div(hre||(hre=J([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),fre=ae.button(pre||(pre=J([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),mre={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},vre=ae.div(gre||(gre=J([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:s})=>mre[s]),Y6=s=>(a,l,h=[],m=!1)=>{(m||!q6.check({title:a,message:l}))&&(q6.add({title:a,message:l}),YC.add(s),WC.custom(g=>ys.default.createElement(lre,null,ys.default.createElement(vre,{type:s}),ys.default.createElement(dre,null,ys.default.createElement(oF,null,a),ys.default.createElement(aF,{dangerouslySetInnerHTML:{__html:Jn.parse(l)}}),h.length>0&&ys.default.createElement(aF,null,ys.default.createElement("span",null,"Docs:"," ",h.map((b,_)=>ys.default.createElement(ys.Fragment,{key:_},_>0&&", ",ys.default.createElement("a",{target:"_blank",href:b.url},b.title)))))),ys.default.createElement(fre,{onClick:()=>{WC.remove(g.id),q6.delete({title:a,message:l}),YC.delete(s)}},"Close")),{duration:1/0}))},Z6={warning:Y6("warning"),success:Y6("success"),info:Y6("info"),error:Y6("error")},bre=ae.div(yre||(yre=J([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:s})=>s==="center"?"center":"flex-end"),wre=ae.button(_re||(_re=J([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Rr,({danger:s})=>s?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),Sre=ae.div(xre||(xre=J([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),Cre=ae.div(Ere||(Ere=J([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),Tre=ae.div(Pre||(Pre=J([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),Mre=()=>{let{hasNotifications:s}=lF();return W3({enabled:!s},()=>ys.default.createElement(sF,null,ys.default.createElement(Tre,null,ys.default.createElement(oF,null,"No notifications"),"Notifications will appear here when you get them.")))},kre=()=>{var s;let{toasts:a,handlers:l}=tF(),{startPause:h,endPause:m}=l,g=(s=ir(de().atomP.ahistoric.pinNotifications))!=null?s:!1;return ys.default.createElement(Sre,null,g?a.length>0&&ys.default.createElement(Cre,{onMouseEnter:h,onMouseLeave:m},ys.default.createElement("div",null,a.map(b=>ys.default.createElement("div",{key:b.id},b.message(b))))):null,ys.default.createElement(bre,{align:"side"},g&&a.length>0&&ys.default.createElement(wre,{onClick:()=>{YC.clear(),q6.clear(),WC.remove()},danger:!0},"Clear")))},lF=()=>{let{toasts:s}=tF();return{hasNotifications:s.length>0}}});function uF(s,a){var l;let h=Object.values((l=(0,Are.val)(s.pointers.historic.sheetsById))!=null?l:{}),m=h.flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.staticOverrides.byObject)!=null?_:{})}).flatMap(b=>Object.values(b??{})),g=[...h.flatMap(b=>{var _,E;return Object.values((E=(_=b==null?void 0:b.sequence)==null?void 0:_.tracksByObject)!=null?E:{})}).flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.trackData)!=null?_:{})}).flatMap(b=>b==null?void 0:b.keyframes).map(b=>b==null?void 0:b.value)];return m.forEach(b=>{Ct(b,_=>{g.push(_)},[])}),g.filter(b=>(b==null?void 0:b.type)&&(a?(b==null?void 0:b.type)==a:typeof(b==null?void 0:b.type)=="string")).map(b=>b.id).filter((b,_,E)=>b!==null&&b!==""&&E.indexOf(b)===_)}var Are,Ire=C(()=>{Are=zt,Ze()});function Rre(s,a){let l=new File([s],a),h=URL.createObjectURL(l),m=Object.assign(document.createElement("a"),{href:h,target:"_blank",rel:"noopener"});m.setAttribute("download",a),m.click(),setTimeout(()=>{URL.revokeObjectURL(h)},4e4)}var u0,Dre,Ore,Lre,Nre,Fre,Bre,Ure,zre,Vre,kEe=C(()=>{Me(),Zu(),qu(),u0=q(Fe()),ze(),ine(),_Ee(),Dre=q(wEe()),Q6(),Ire(),Lre=ae.div(Ore||(Ore=J([""]))),Fre=ae.div(Nre||(Nre=J([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),Ure=ae(Yu)(Bre||(Bre=J([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),zre=({projects:s})=>{let a=s[0],l=a.address.projectId,h=l.replace(/[^\w\d'_\-]+/g," ").trim(),m="".concat(h,".theatre-project-state.json"),[g,b]=(0,u0.useState)(!1),_=(0,u0.useCallback)(()=>ne(void 0,null,function*(){var P,I;let O=uF(a),R=new Map;try{yield Promise.all(O.map(F=>ne(void 0,null,function*(){let N=a.assetStorage.getAssetUrl(F),V=yield fetch(N);V.ok&&R.set(F,yield V.blob())})))}catch{Z6.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((I=(P=a.config.assets)==null?void 0:P.baseUrl)!=null?I:"/",". This is likely due to a CORS issue."));return}if(R.size>0){let F=new Dre.default;for(let[V,W]of R)F.file(V,W);let N=yield F.generateAsync({type:"blob"});Rre(N,"".concat(h,".assets.zip"))}let A=JSON.stringify(de().createContentOfSaveFile(a.address.projectId),null,2);Rre(A,m),b(!0),setTimeout(()=>{b(!1)},2e3)}),[a,m]),E=Xu({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>u0.default.createElement(Ure,null,u0.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),u0.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),u0.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return u0.default.createElement(u0.default.Fragment,null,E.node,u0.default.createElement(Lre,null,u0.default.createElement(Tne,{projectId:l}),u0.default.createElement(Fre,null,u0.default.createElement(zC,{onMouseEnter:P=>E.open(P,P.target),onClick:g?void 0:_,disabled:g},g?"(Exported)":"Export ".concat(l," to JSON")))))},Vre=zre}),bp,jre,Hre,Gre,Wre,$re,Kre,Xre,qre,Yre,Zre,AEe=C(()=>{bp=q(Fe()),ze(),p6(),Hre=ae.div(jre||(jre=J([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),Wre=ae.div(Gre||(Gre=J([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),Kre=ae.div($re||($re=J([`
  color: rgba(145, 145, 145, 0.8);
`]))),qre=ae.a(Xre||(Xre=J([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),Yre=()=>bp.default.createElement(Hre,null,bp.default.createElement(Wre,null,bp.default.createElement(Kre,null,bp.default.createElement(TL,null)),bp.default.createElement("div",null,"Please select an object from the ",bp.default.createElement("u",null,"Outline Menu")," to see its properties.")),bp.default.createElement(qre,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),Zre=Yre});function Qre(){let[s,a]=(0,cF.useState)(!1),l=(0,cF.useMemo)(()=>{let h=new Set;return()=>{let m=()=>{h.delete(m),a(h.size>0)};return h.add(m),a(!0),m}},[]);return[s,l]}var cF,Jre=C(()=>{cF=q(Fe())}),mi,X3,eie,tie,ZC,nie,dF,rie,hF,iie,pF,J6,sie,oie,QC,hm,fF=C(()=>{up(),Pn(),mi=q(Fe()),ze(),nt(),hd(),Fr(),vEe(),kEe(),Me(),GY(),X3=zt,AEe(),Jre(),lm(),eie="32px",ZC=ae.div(tie||(tie=J([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Rr,k3.propsPanel,({pin:s})=>s?"block":"none"),dF=ae.div(nie||(nie=J([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),Rr),hF=ae.div(rie||(rie=J([`
  height: `,`;
  display: flex;
  align-items: center;
`])),eie),pF=ae.div(iie||(iie=J([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),Rr),J6=(0,mi.createContext)([!1,()=>()=>{}]),sie=s=>{let a=ir(de().atomP.ahistoric.pinDetails)!==!1,l=HY("right");(0,mi.useLayoutEffect)(()=>{QC.set(l)},[l]),(0,mi.useEffect)(()=>()=>{hm.set(!1),QC.set(!1)},[]);let[h]=(0,mi.useContext)(J6),m=a||l||h,[g,b]=(0,mi.useState)(null);return Tee(g),Qn(()=>{let _=lp(),E=_.find(wt);if(E)return mi.default.createElement(ZC,{"data-testid":"DetailPanel-Object",pin:m,ref:b,onMouseEnter:()=>{hm.set(!0)},onMouseLeave:()=>{hm.set(!1)}},mi.default.createElement(hF,null,mi.default.createElement(dF,{title:"".concat(E.sheet.address.sheetId,": ").concat(E.sheet.address.sheetInstanceId," > ").concat(E.address.objectKey)},mi.default.createElement(ap,null,E.sheet.address.sheetId," "),mi.default.createElement(h6,null,":"," "),mi.default.createElement(ap,null,E.sheet.address.sheetInstanceId," "),mi.default.createElement(h6,null," → "),mi.default.createElement(ap,null,E.address.objectKey))),mi.default.createElement(pF,null,mi.default.createElement(tne,{objects:[E]})));let P=_.find(At);return P?mi.default.createElement(ZC,{pin:m},mi.default.createElement(hF,null,mi.default.createElement(dF,{title:"".concat(P.address.projectId)},mi.default.createElement(ap,null,P.address.projectId," "))),mi.default.createElement(pF,null,mi.default.createElement(Vre,{projects:[P]}))):mi.default.createElement(ZC,{pin:m,onMouseEnter:()=>{hm.set(!0)},onMouseLeave:()=>{hm.set(!1)}},mi.default.createElement(Zre,null))},[m])},oie=()=>{let s=Qre();return mi.default.createElement(J6.Provider,{value:s},mi.default.createElement(sie,null))},QC=new X3.Atom(!1),hm=new X3.Atom(!1),(0,X3.prism)(()=>{let s=(0,X3.val)(hm.prism),a=(0,X3.val)(QC.prism);return s||a})}),mF,JC,eP,gF,q3,aie,vF,Y3=C(()=>{mF=zt,Pn(),Me(),Jre(),JC=q(Fe()),bN(),eP=(s,a)=>{let l=s.left/a.width,h=(s.left+s.width)/a.width,m=s.top/a.height,g=(s.height+s.top)/a.height;return{edges:{left:l<=.5?{from:"screenLeft",distance:l}:{from:"screenRight",distance:1-l},right:h<=.5?{from:"screenLeft",distance:h}:{from:"screenRight",distance:1-h},top:m<=.5?{from:"screenTop",distance:m}:{from:"screenBottom",distance:1-m},bottom:g<=.5?{from:"screenTop",distance:g}:{from:"screenBottom",distance:1-g}}}},gF=JC.default.createContext(null),q3=()=>(0,JC.useContext)(gF),aie=({panelId:s,children:a,defaultPosition:l,minDims:h})=>{let m=bC(800,200),[g,b]=Qre(),{stuff:_}=Qn(()=>{var E;let{edges:P}=(E=(0,mF.val)(de().atomP.historic.panelPositions[s]))!=null?E:l,I=Math.floor(m.width*(P.left.from==="screenLeft"?P.left.distance:1-P.left.distance)),O=Math.floor(m.width*(P.right.from==="screenLeft"?P.right.distance:1-P.right.distance)),R=Math.floor(m.height*(P.top.from==="screenTop"?P.top.distance:1-P.top.distance)),A=Math.floor(m.height*(P.bottom.from==="screenTop"?P.bottom.distance:1-P.bottom.distance)),F=Math.max(O-I,h.width),N=Math.max(A-R,h.height);return{stuff:{dims:mF.prism.memo("dims",()=>({width:F,left:I,top:R,height:N}),[F,I,R,N]),panelId:s,minDims:h,boundsHighlighted:g,addBoundsHighlightLock:b}}},[s,m,g,b]);return JC.default.createElement(gF.Provider,{value:_},a)},vF=aie}),e7,lie,uie,cie,yF,die=C(()=>{Nr(),Me(),ks(),e7=q(Fe()),ze(),Y3(),l0(),fi(),hd(),uie=ae.div(lie||(lie=J([`
  cursor: move;
`]))),cie=s=>{let a=q3(),l=(0,e7.useRef)(a);l.current=a;let[h,m]=Sr(null),g=(0,e7.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let P=l.current,I,O=a.addBoundsHighlightLock();return{onDrag(R,A){let F=L(B({},P.dims),{top:Si(P.dims.top+A,0,window.innerHeight-Gu),left:Si(P.dims.left+R,-P.dims.width+Gu,window.innerWidth-Gu)}),N=eP(F,{width:window.innerWidth,height:window.innerHeight});I==null||I.discard(),I=de().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:N,panelId:P.panelId})})},onDragEnd(R){O(),R?I==null||I.commit():I==null||I.discard()}}}}),[]),[b]=ji(m,g);$0(b,"dragging","move");let[_,E]=(0,e7.useMemo)(()=>{let P;return[function(){if(P){let I=P;P=void 0,I()}P=a.addBoundsHighlightLock()},function(){if(P){let I=P;P=void 0,I()}}]},[]);return e7.default.createElement(uie,L(B({},s),{ref:h,onMouseEnter:_,onMouseLeave:E}))},yF=cie}),tP,hie,bF,pie,_F,fie,wF,mie,gie,vie,yie,bie,xF,_ie,wie,xie,Sie,Eie,t7,Cie,Pie,Tie,Mie,kie,Aie,Iie,Rie,Die,SF,Oie,wd,IEe=C(()=>{Nr(),Me(),ks(),a0(),tP=q(Fe()),ze(),Y3(),Fr(),fi(),hd(),bF=ae.div(hie||(hie=J([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),Rr,w3(.2,"#478698")),_F=ae(bF)(pie||(pie=J([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),wF=ae(_F)(fie||(fie=J([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),gie=ae(wF)(mie||(mie=J([`
  top: -1px;
`]))),yie=ae(wF)(vie||(vie=J([`
  bottom: -1px;
`]))),xF=ae(_F)(bie||(bie=J([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),wie=ae(xF)(_ie||(_ie=J([`
  left: -1px;
`]))),Sie=ae(xF)(xie||(xie=J([`
  right: -1px;
`]))),t7=ae(bF)(Eie||(Eie=J([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),Pie=ae(t7)(Cie||(Cie=J([`
  top: 0;
  left: 0;
`]))),Mie=ae(t7)(Tie||(Tie=J([`
  top: 0;
  right: 0;
`]))),Aie=ae(t7)(kie||(kie=J([`
  bottom: 0;
  left: 0;
`]))),Rie=ae(t7)(Iie||(Iie=J([`
  bottom: 0;
  right: 0;
`]))),Die={Top:gie,TopLeft:Pie,TopRight:Mie,Bottom:yie,BottomLeft:Aie,BottomRight:Rie,Left:wie,Right:Sie},SF={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},Oie=({which:s})=>{let a=q3(),l=(0,tP.useRef)(a);l.current=a;let[h,m]=Sr(null),g=(0,tP.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:SF[s],onDragStart(){let P,I=l.current,O=a.addBoundsHighlightLock();return{onDrag(R,A){let F=B({},I.dims);if(s.startsWith("Bottom"))F.height=Math.max(F.height+A,I.minDims.height);else if(s.startsWith("Top")){let V=F.top+F.height,W=Si(F.top+A,0,Math.min(V-I.minDims.height,window.innerHeight-Gu)),$=V-W;F.height=$,F.top=W}if(s.endsWith("Left")){let V=F.left+F.width,W=Math.min(F.left+R,Math.min(V-I.minDims.width,window.innerWidth-Gu)),$=V-W;F.width=$,F.left=W}else s.endsWith("Right")&&(F.width=Math.max(F.width+R,Math.max(I.minDims.width,Gu-I.dims.left)));let N=eP(F,{width:window.innerWidth,height:window.innerHeight});P==null||P.discard(),P=de().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:N,panelId:I.panelId})})},onDragEnd(R){O(),R?P==null||P.commit():P==null||P.discard()}}}}),[s]),[b]=ji(m,g),_=Die[s],E=s.length<=6;return tP.default.createElement(_,{ref:h,className:[b?"isDragging":"",a.boundsHighlighted&&E?"isHighlighted":""].join(" "),style:{cursor:SF[s]}})},wd=Oie}),Yl,Lie,Nie,REe=C(()=>{Yl=q(Fe()),IEe(),Lie=s=>Yl.default.createElement(Yl.default.Fragment,null,Yl.default.createElement(wd,{which:"Bottom"}),Yl.default.createElement(wd,{which:"Top"}),Yl.default.createElement(wd,{which:"Left"}),Yl.default.createElement(wd,{which:"Right"}),Yl.default.createElement(wd,{which:"TopLeft"}),Yl.default.createElement(wd,{which:"TopRight"}),Yl.default.createElement(wd,{which:"BottomLeft"}),Yl.default.createElement(wd,{which:"BottomRight"})),Nie=Lie}),nP,Fie,Bie,Uie,EF,zie=C(()=>{Fr(),nP=q(Fe()),ze(),Y3(),REe(),Bie=ae.div(Fie||(Fie=J([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),Rr),Uie=nP.default.forwardRef((s,a)=>{let l=q3(),h=s,{style:m,children:g}=h,b=U(h,["style","children"]);return nP.default.createElement(Bie,L(B({ref:a},b),{style:B({width:l.dims.width+"px",height:l.dims.height+"px",top:l.dims.top+"px",left:l.dims.left+"px"},m??{})}),nP.default.createElement(Nie,null),g)}),EF=Uie}),DEe=H((s,a)=>{(function(l,h){typeof s=="object"&&typeof a<"u"?h(s,Fe()):(l=typeof globalThis<"u"?globalThis:l||self,h(l.ReactErrorBoundary={},l.React))})(s,function(l,h){function m(A){if(A&&A.__esModule)return A;var F=Object.create(null);return A&&Object.keys(A).forEach(function(N){if(N!=="default"){var V=Object.getOwnPropertyDescriptor(A,N);Object.defineProperty(F,N,V.get?V:{enumerable:!0,get:function(){return A[N]}})}}),F.default=A,Object.freeze(F)}var g=m(h);function b(A,F){return b=Object.setPrototypeOf||function(N,V){return N.__proto__=V,N},b(A,F)}function _(A,F){A.prototype=Object.create(F.prototype),A.prototype.constructor=A,b(A,F)}var E=function(A,F){return A===void 0&&(A=[]),F===void 0&&(F=[]),A.length!==F.length||A.some(function(N,V){return!Object.is(N,F[V])})},P={error:null},I=function(A){_(F,A);function F(){for(var V,W=arguments.length,$=new Array(W),Z=0;Z<W;Z++)$[Z]=arguments[Z];return V=A.call.apply(A,[this].concat($))||this,V.state=P,V.updatedWithError=!1,V.resetErrorBoundary=function(){for(var ie,re=arguments.length,le=new Array(re),Ce=0;Ce<re;Ce++)le[Ce]=arguments[Ce];V.props.onReset==null||(ie=V.props).onReset.apply(ie,le),V.reset()},V}F.getDerivedStateFromError=function(V){return{error:V}};var N=F.prototype;return N.reset=function(){this.updatedWithError=!1,this.setState(P)},N.componentDidCatch=function(V,W){var $,Z;($=(Z=this.props).onError)==null||$.call(Z,V,W)},N.componentDidMount=function(){var V=this.state.error;V!==null&&(this.updatedWithError=!0)},N.componentDidUpdate=function(V){var W=this.state.error,$=this.props.resetKeys;if(W!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(W!==null&&E(V.resetKeys,$)){var Z,ie;(Z=(ie=this.props).onResetKeysChange)==null||Z.call(ie,V.resetKeys,$),this.reset()}},N.render=function(){var V=this.state.error,W=this.props,$=W.fallbackRender,Z=W.FallbackComponent,ie=W.fallback;if(V!==null){var re={error:V,resetErrorBoundary:this.resetErrorBoundary};if(g.isValidElement(ie))return ie;if(typeof $=="function")return $(re);if(Z)return g.createElement(Z,re);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},F}(g.Component);function O(A,F){var N=function(W){return g.createElement(I,F,g.createElement(A,W))},V=A.displayName||A.name||"Unknown";return N.displayName="withErrorBoundary("+V+")",N}function R(A){var F=g.useState(null),N=F[0],V=F[1];if(A!=null)throw A;if(N!=null)throw N;return V}l.ErrorBoundary=I,l.useErrorHandler=R,l.withErrorBoundary=O,Object.defineProperty(l,"__esModule",{value:!0})})}),vo,Vie,jie,Hie,Gie,Wie,$ie,Kie,Xie,qie,Yie,Zie,Qie,Jie,ese,tse,nse,rse,ise,sse,OEe=C(()=>{vo=q(Fe()),ze(),hd(),Y3(),die(),zie(),Vie=q(DEe()),F3(),Me(),hd(),jie={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},Hie={width:300,height:300},Gie=({paneInstance:s})=>vo.default.createElement(vF,{panelId:"pane-".concat(s.instanceId),defaultPosition:jie,minDims:Hie},vo.default.createElement(ise,{paneInstance:s})),$ie=ae(EF)(Wie||(Wie=J([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),k3.pluginPanes),Xie=ae.div(Kie||(Kie=J([`
  width: 100%;
`]))),Yie=ae.div(qie||(qie=J([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),Qie=ae.button(Zie||(Zie=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),ese=ae(jq)(Jie||(Jie=J([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),nse=ae.div(tse||(tse=J([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),rse=s=>vo.default.createElement(nse,null,"An Error occurred rendering this pane. Open the console for more info.",vo.default.createElement("pre",null,JSON.stringify({message:s.error.message,stack:s.error.stack},null,2))),ise=({paneInstance:s})=>{let[a,l]=(0,vo.useState)(null),h=s.definition.mount;(0,vo.useLayoutEffect)(()=>{if(!a)return;let g=h({paneId:s.instanceId,node:a});if(typeof g=="function")return g},[a,h,s.instanceId]);let m=(0,vo.useCallback)(()=>{de().paneManager.destroyPane(s.instanceId)},[s]);return vo.default.createElement($ie,{"data-testid":"theatre-pane-wrapper-".concat(s.instanceId)},vo.default.createElement(yF,null,vo.default.createElement(CL,null,vo.default.createElement(Yie,null,vo.default.createElement(Qie,{onClick:m,title:"Close Pane"},vo.default.createElement(Fxe,null))),vo.default.createElement(Xie,null,s.instanceId))),vo.default.createElement(Vie.ErrorBoundary,{FallbackComponent:rse},vo.default.createElement(ese,{"data-testid":"theatre-pane-content-".concat(s.instanceId),ref:l})))},sse=Gie}),CF,PF,ose=C(()=>{CF=zt,PF=(s,a)=>{let l=CF.prism.memo(s,()=>new CF.Atom(a),[]);return l.set(a),l}});function ase(s,a){(0,lse.useLayoutEffect)(()=>{if(!s||a.type!=="propWithChildren"&&a.type!=="primitiveProp"&&a.type!=="sheetObject")return;let l=null,h=L(B({},a.sheetObject.address),{pathToProp:a.type==="sheetObject"?[]:a.pathToProp});function m(){l=LC.replaceLock(h,()=>{})}function g(){l==null||l()}return s.addEventListener("mouseenter",m),s.addEventListener("mouseleave",g),()=>{l==null||l(),s.removeEventListener("mouseenter",m),s.removeEventListener("mouseleave",g)}},[s])}var lse,use=C(()=>{lse=q(Fe()),GN()}),_p,cse,TF,dse,MF,hse,kF,pse,fse,mse,gse,vse,yse,bse,rP,iP=C(()=>{Fr(),_p=q(Fe()),F3(),ze(),om(),use(),TF=ae.li(cse||(cse=J([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),s=>s.depth),MF=ae.div(dse||(dse=J([`
  border-bottom: 1px solid #7695b705;
`]))),kF=ae(MF)(hse||(hse=J([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),M3.panel.body.compoudThing.label.color,s=>s.isSelected&&"background: blue"),fse=ae.span(pse||(pse=J([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),fp,kF),gse=ae.span(mse||(mse=J([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>s.isCollapsed?15:75),yse=ae.ul(vse||(vse=J([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),bse=({leaf:s,label:a,children:l,isSelectable:h,isSelected:m,toggleSelect:g,toggleCollapsed:b,isCollapsed:_})=>{let E=Array.isArray(l)&&l.length>0,P=(0,_p.useRef)(null);return ase(P.current,s),s.shouldRender?_p.default.createElement(TF,{depth:s.depth},_p.default.createElement(kF,{ref:P,style:{height:s.nodeHeight+"px"},isSelectable:h===!0,isSelected:m===!0,onClick:g,isEven:s.n%2===0},_p.default.createElement(gse,{isCollapsed:_,onClick:b},_p.default.createElement(LZ,null)),_p.default.createElement(fse,null,a)),E&&_p.default.createElement(yse,null,l)):null},rP=bse});function LEe(s,a){return a.every((l,h)=>l===s[h])}function NEe(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++)if(s[l]!==a[l])return!1;return!0}function sP(s){var a;let l=[];for(;;){let h=l.length,m=(a=s[0])==null?void 0:a[h];if(m===void 0)return l;for(let g of s)if(m!==g[h])return l;l.push(m)}}var tc,oP,nc=C(()=>{xC(),tc=P6(s=>JSON.stringify(s)),oP=s=>JSON.parse(s)});function FEe(s,a){let l=(0,AF.useRef)({combo:s,listener:a});l.current={combo:s,listener:a},(0,AF.useEffect)(()=>{function h(b){b.key===l.current.combo&&l.current.listener({down:!0,event:b})}function m(b){b.key===l.current.combo&&l.current.listener({down:!1,event:b})}function g(b){l.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",h),document.addEventListener("keyup",m),window.addEventListener("blur",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",m),window.removeEventListener("blur",g)}},[])}var AF,BEe=C(()=>{AF=q(Fe())});function _se(s){let[a,l]=(0,wse.useState)(!1);return FEe(s,({down:h})=>{l(h)}),a}var wse,xse=C(()=>{wse=q(Fe()),BEe()});function UEe(s){let a=(0,IF.useMemo)(()=>new Sse.Atom(s),[]);return(0,IF.useLayoutEffect)(()=>{a.set(s)},[s]),a}var Sse,IF,zEe=C(()=>{Sse=zt,IF=q(Fe())});function Ese(s,a,l){let h=(0,RF.pointer)({root:{},path:[]}),m=a(h);Zh(s,(0,RF.getPointerParts)(m).path,l)}var RF,VEe=C(()=>{RF=zt,n3()}),aP,Cse,ha,Zl=C(()=>{aP="data-pos",Cse={checkIfMouseEventSnapToPos(s,a){let l=s.composedPath().find(h=>h instanceof Element&&h!==(a==null?void 0:a.ignore)&&h.hasAttribute(aP));if(l){let h=parseFloat(l.getAttribute(aP));if(isFinite(h))return h}return null},includePositionSnapAttrs(s){return{[aP]:s}}},ha=Cse});function lP(s){let a=s.type==="sheet"?HEe(s):DF(s);return{byPosition:jEe(a),tracks:a}}function jEe(s){let a=new Map;for(let l of s)for(let h of l.data.keyframes){let m=a.get(h.position);m||(m=[],a.set(h.position,m)),m.push({kf:h,track:l,itemKey:zs.forTrackKeyframe(l.sheetObject,l.id,h.id)})}return a}function HEe(s){return s.children.flatMap(DF)}function DF(s){return s.children.flatMap(a=>a.type==="propWithChildren"?DF(a):GEe(a))}function GEe(s){let a=s.sheetObject,l=a.address.projectId,h=de().atomP.historic.coreByProject[l].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey],m=(0,uP.val)(h.trackIdByPropPath[tc(s.pathToProp)]);if(!m)return[];let g=(0,uP.val)(h.trackData[m]);return g?[{id:m,data:g,sheetObject:a}]:[]}function WEe(s,a){return No(s.children.flatMap(l=>OF(l,a)))}function OF(s,a){return No(s.children.flatMap(l=>l.type==="propWithChildren"?OF(l,a):$Ee(l,a)))}function $Ee(s,a){var l,h;let m=s.sheetObject,g=m.address.projectId,b=de().atomP.historic.coreByProject[g].sheetsById[m.address.sheetId].sequence.tracksByObject[m.address.objectKey],_=(0,uP.val)(b.trackIdByPropPath[tc(s.pathToProp)]);return _?(h=(l=a[m.address.objectKey])==null?void 0:l[_])!=null?h:[]:[]}var uP,Z3=C(()=>{Me(),uP=zt,bd(),nc(),fi()});function KEe(s,a){let[l,h]=Sr(null),m=cp("useCaptureSelection");return ji(a,(0,Q3.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(g){if(!g.shiftKey||g.target instanceof HTMLInputElement)return!1;let b=a.getBoundingClientRect(),_=g.clientX-b.left-(0,X0.val)(s.scaledSpace.leftPadding),E=(0,X0.val)(s.scaledSpace.toUnitSpace)(_);return l.current={h:[E,E],v:[g.clientY-b.top,g.clientY-b.top]},(0,X0.val)(s.selectionAtom).set({current:void 0}),{onDrag(P,I,O){let R=a.getBoundingClientRect(),A=O.clientX-R.left-(0,X0.val)(s.scaledSpace.leftPadding),F=(0,X0.val)(s.scaledSpace.toUnitSpace)(A);l.current={h:[l.current.h[0],F],v:[l.current.v[0],O.clientY-R.top]};let N=LF.boundsToSelection(m,(0,X0.val)(s),l.current);(0,X0.val)(s.selectionAtom).set({current:N})},onDragEnd(P){l.current=null}}}}),[s,a,l])),h}var X0,Q3,wp,Pse,Tse,Mse,LF,kse,Ase,NF,Ise,Rse,XEe=C(()=>{Me(),ks(),xse(),zEe(),VEe(),Nr(),Pn(),X0=zt,Q3=q(Fe()),ze(),Zl(),Z3(),dp(),wp=5,Tse=ae.div(Pse||(Pse=J([`
  cursor: `,`;
`])),s=>s.isShiftDown?"cell":"default"),Mse=({layoutP:s,children:a,height:l})=>{let[h,m]=Sr(null),g=_se("Shift"),b=KEe(s,m),_=(0,Q3.useRef)(b);return _.current=b,Q3.default.createElement(Tse,{style:{height:l+"px"},ref:h,isShiftDown:g,className:"selectionview"},b&&Q3.default.createElement(Ise,{state:b,layoutP:s}),a)},(s=>{let a=(b,_,E,P,I)=>{let O=lP(E);if(E.top+E.nodeHeight/2+wp>P.v[0]&&E.top+E.nodeHeight/2-wp<P.v[1])for(let[R,A]of O.byPosition){let F=_.scaledSpace.toUnitSpace(wp);if(!(R+F<=P.h[0]||R-F>=P.h[1]))for(let N of A)Ese(I,V=>V[N.track.sheetObject.address.objectKey].byTrackId[N.track.id].byKeyframeId[N.kf.id],!0)}h(b,_,E,P,I)},l={sheet(b,_,E,P,I){a(b,_,E,P,I)},propWithChildren(b,_,E,P,I){a(b,_,E,P,I)},sheetObject(b,_,E,P,I){a(b,_,E,P,I)},primitiveProp(b,_,E,P,I){let{sheetObject:O,trackId:R}=E,A=(0,X0.val)(de().atomP.historic.coreByProject[O.address.projectId].sheetsById[O.address.sheetId].sequence.tracksByObject[O.address.objectKey].trackData[R]);if(!(P.v[0]>E.top+E.heightIncludingChildren/2+wp||E.top+E.heightIncludingChildren/2-wp>P.v[1])){for(let F of A.keyframes)if(!(F.position+_.scaledSpace.toUnitSpace(wp)<=P.h[0])){if(F.position-_.scaledSpace.toUnitSpace(wp)>=P.h[1])break;Ese(I,N=>N[O.address.objectKey].byTrackId[R].byKeyframeId[F.id],!0)}}}},h=(b,_,E,P,I)=>{if("children"in E)for(let O of E.children)m(b,_,O,P,I)};function m(b,_,E,P,I){if(!E.shouldRender||P.v[0]>E.top+E.heightIncludingChildren||E.top>P.v[1])return;let O=l[E.type];O?O(b,_,E,P,I):h(b,_,E,P,I)}function g(b,_,E){let P={};E=NF(E);let I=_.tree;m(b.utilFor.internal(),_,I,E,P);let O=_.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:P,getDragHandlers(R){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let A,F=_.scaledSpace.toUnitSpace;return{onDrag(N,V,W){A&&(A.discard(),A=void 0);let $=ha.checkIfMouseEventSnapToPos(W,{ignore:R.domNode}),Z=$!=null?$-R.positionAtStartOfDrag:F(N);A=de().tempTransaction(({stateEditors:ie})=>{let re=ie.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let le of Object.keys(P)){let{byTrackId:Ce}=P[le];for(let ye of Object.keys(Ce)){let{byKeyframeId:we}=Ce[ye];re({trackId:ye,keyframeIds:Object.keys(we),translate:Z,scale:1,origin:0,snappingFunction:O.getSequence().closestGridPosition,objectKey:le,projectId:R.projectId,sheetId:R.sheetId})}}})},onDragEnd(N){N?A==null||A.commit():A==null||A.discard()}}}}},delete(){de().transaction(({stateEditors:R})=>{let A=R.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let F of Object.keys(P)){let{byTrackId:N}=P[F];for(let V of Object.keys(N)){let{byKeyframeId:W}=N[V];A(L(B({},O.address),{objectKey:F,trackId:V,keyframeIds:Object.keys(W)}))}}})}}}s.boundsToSelection=g})(LF||(LF={})),Ase=ae.div(kse||(kse=J([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),NF=s=>({h:[...s.h].sort((a,l)=>a-l),v:[...s.v].sort((a,l)=>a-l)}),Ise=({state:s,layoutP:a})=>{let l=UEe(s);return Qn(()=>{let h=(0,X0.val)(l.pointer),m=NF(h),g=(0,X0.val)(a.scaledSpace.fromUnitSpace),b=(0,X0.val)(a.scaledSpace.leftPadding),_=m.h.map(g).map(R=>R+b),E=m.v[0],P=m.v[1]-m.v[0],I=_[0],O=_[1]-_[0];return Q3.default.createElement(Ase,{style:{top:E+"px",height:P+"px",left:I+"px",width:O+"px"}})},[a,l])},Rse=Mse}),pm,Dse,Ose,FF,Lse,Nse,Fse,Bse=C(()=>{A3(),pm=q(Fe()),ze(),kd(),Ose=ae.div(Dse||(Dse=J([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>hc.scrollableArea),FF=(0,pm.createContext)(Gl),Lse=()=>(0,pm.useContext)(FF),Nse=s=>{let a=(0,pm.useRef)(null),l=(0,pm.useCallback)(h=>{a.current.scrollBy(0,h.deltaY)},[]);return pm.default.createElement(FF.Provider,{value:l},pm.default.createElement(Ose,{ref:a},s.children))},Fse=Nse}),Use,qEe=C(()=>{Use='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),q0,cP=C(()=>{q0=(s,a=s)=>`
  left: `.concat(s*-.5,`px;
  top: `).concat(a*-.5,`px;
  width: `).concat(s,`px;
  height: `).concat(a,`px;
`)}),dP,zse,Vse,YEe=C(()=>{dP=zt,zse=(0,dP.prism)(()=>{let[s,a]=dP.prism.state("pos",null);return dP.prism.effect("setupListeners",()=>{let l=h=>{a(h)};return document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousemove",l)}},[]),s}),Vse=zse}),xd,pa,n7,jse,Hse,Gse,Wse,Sd,rc,hP,$se,Kse,yo=C(()=>{xd=zt,YEe(),fi(),pa=q(Fe()),n7=(0,pa.createContext)(null),jse=0,Hse=({children:s,layoutP:a})=>{let l=(0,pa.useMemo)(()=>new xd.Atom([]),[]),h=(0,pa.useMemo)(()=>(0,xd.prism)(()=>{let b=xd.prism.memo("p",()=>$se(a),[a]).getValue(),_=(0,xd.val)(l.pointer);return _.length>0?td(_).position:b}),[a]),m=(0,pa.useCallback)(()=>{let b=jse++;return l.reduce(_=>[..._,{id:b,position:[-1,0]}]),{set:_=>{l.reduce(E=>{let P=E.findIndex(O=>O.id===b);if(P===-1)return console.warn("Lock is already freed. This is a bug."),E;let I=[...E];return I.splice(P,1,{id:b,position:[_,_===-1?0:1]}),I})},unlock:()=>{l.reduce(_=>_.filter(E=>E.id!==b))}}},[]),g={currentD:h,getLock:m};return pa.default.createElement(n7.Provider,{value:g},s)},Gse=()=>(0,pa.useContext)(n7).currentD,Wse=()=>{let{getLock:s}=(0,pa.useContext)(n7),a=(0,pa.useRef)();return(0,pa.useLayoutEffect)(()=>()=>{var l;(l=a.current)==null||l.unlock()},[]),(0,pa.useMemo)(()=>{let l;return(h,m)=>{var g,b;(l==null?void 0:l.shouldLock)!==h&&(h?a.current=s():(g=a.current)==null||g.unlock()),(l==null?void 0:l.pos)!==m&&h&&((b=a.current)==null||b.set(m)),l={shouldLock:h,pos:m}}},[s])},Sd=(s,a)=>{let{getLock:l}=(0,pa.useContext)(n7),h=(0,pa.useRef)();(0,pa.useLayoutEffect)(()=>{if(s)return h.current=l(),()=>{h.current.unlock()}},[s,l]),(0,pa.useLayoutEffect)(()=>{s&&h.current.set(a)},[a,s])},rc=s=>({[hP]:s==="hide"?s:s.toFixed(3)}),hP="data-theatre-lock-framestamp-to",$se=s=>(0,xd.prism)(()=>{let a=(0,xd.val)(s.rightDims),l=(0,xd.val)(s.clippedSpace.toUnitSpace),h=(0,xd.val)(Vse);if(!h)return[-1,0];for(let I of h.composedPath()){if(!(I instanceof HTMLElement||I instanceof SVGElement))break;if(I.hasAttribute(hP)){let O=I.getAttribute(hP);if(typeof O!="string")continue;if(O==="hide")return[-1,0];let R=parseFloat(O);if(isFinite(R)&&R>=0)return[R,2]}}let{clientX:m,clientY:g}=h,{screenX:b,screenY:_,width:E,height:P}=a;if(T8(m,b,b+E)&&T8(g,_+16,_+P)){let I=m-b;return[l(I),3]}else return[-1,0]}),Kse=Hse}),Xse,r7,BF,qse,Yse,ic,Zse=C(()=>{Fr(),l0(),ze(),qEe(),cP(),Zl(),yo(),Xse=12,r7=34,BF="beingDragged",ic={BEING_DRAGGED_CLASS:BF,CSS:po(qse||(qse=J([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),q0(Xse),Rr,BF),CSS_WHEN_SOMETHING_DRAGGING:po(Yse||(Yse=J([`
    pointer-events: auto;
    cursor: var(`,`);

    // ⸢⸤⸣⸥ thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),fd,r7/2,r7/2,r7,r7,Use),reactProps(s){return L(B(B({},rc(s.position)),ha.includePositionSnapAttrs(s.position)),{className:s.isDragging?ic.BEING_DRAGGED_CLASS:""})}}});function UF(){s7.set({mode:"snapToAll"})}function fm(){s7.set({mode:"snapToNone"})}function Qse(s){s7.set({mode:"snapToSome",positions:s})}function Jse(s,a){return Object.fromEntries(Object.entries(s).map(([l,h])=>[l,Object.fromEntries(Object.entries(h.trackData).map(([m,g])=>[m,g.keyframes.filter(b=>a(b,{trackId:m,trackData:g,objectKey:l})).map(b=>b.position)]))]))}var eoe,toe,zF,noe,roe,ioe,soe,ooe,i7,s7,VF,mm=C(()=>{eoe=zt,toe=zt,zF=q(Fe()),ze(),Zse(),roe=ae.div(noe||(noe=J([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),ic.CSS,ic.CSS_WHEN_SOMETHING_DRAGGING),soe=ae.div(ioe||(ioe=J([`
  position: absolute;
`]))),ooe=s=>zF.default.createElement(soe,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,toe.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.position,"px))")}},zF.default.createElement(roe,B({},ic.reactProps({isDragging:!1,position:s.position})))),i7=ooe,s7=new eoe.Atom({mode:"snapToNone"}),VF=s7.prism});function ZEe(s,a){let l=(0,gm.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(m){if(m.target instanceof HTMLInputElement||m.shiftKey||m.altKey||m.ctrlKey||m.metaKey||m.composedPath().some(O=>O instanceof HTMLElement&&O.draggable===!0))return!1;let g=m.clientX-a.getBoundingClientRect().left,b=Si((0,Hi.val)(s.clippedSpace.toUnitSpace)(g),0,1/0),_=(0,Hi.val)(s.seeker.setIsSeeking),E=(0,Hi.val)(s.sheet).getSequence();E.position=b;let P=b,I=(0,Hi.val)(s.scaledSpace.toUnitSpace);return _(!0),UF(),{onDrag(O,R,A){let F=I(O),N=Si(P+F,0,E.length),V=ha.checkIfMouseEventSnapToPos(A,{});V!=null&&(N=V),E.position=N},onDragEnd(){_(!1),fm()}}}}),[s,a]),[h]=ji(a,l);$0(h,"draggingPositionInSequenceEditor","ew-resize")}function QEe(s,a){let l=Lse();(0,gm.useLayoutEffect)(()=>{if(!a)return;let h=g=>{if(g.ctrlKey){g.preventDefault(),g.stopPropagation();let b=g.clientX-a.getBoundingClientRect().left,_=(0,Hi.val)(s.clippedSpace.toUnitSpace)(b),E=(0,Hi.val)(s.clippedSpace.range),P=1+jF(g.deltaY,[-50,50])*.03,I=nd(E,A=>(A-_)*P+_),O=(0,Hi.val)(s.sheet).getSequence().length,R=O+O*.25;(0,Hi.val)(s.clippedSpace.setRange)(JEe(I,[0,R]));return}else if(g.shiftKey){g.preventDefault(),g.stopPropagation();let b=(0,Hi.val)(s.sheet).getSequence().length,_=(0,Hi.val)(s.clippedSpace.range),E=(_.end-_.start)/b,P=jF(g.deltaY||g.deltaX,[-50,50])*.05*E,I=nd(_,O=>O+P);(0,Hi.val)(s.clippedSpace.setRange)(I);return}else{l(g),g.preventDefault(),g.stopPropagation();let b=(0,Hi.val)(s.scaledSpace.toUnitSpace)(g.deltaX*1),_=(0,Hi.val)(s.clippedSpace.range),E=nd(_,P=>P+b);(0,Hi.val)(s.clippedSpace.setRange)(E);return}},m={capture:!0,passive:!1};return a.addEventListener("wheel",h,m),()=>{a.removeEventListener("wheel",h,m)}},[a,s]),ji(a,(0,gm.useMemo)(()=>({onDragStart(h){let m=(0,Hi.val)(s.clippedSpace.range),g=(0,Hi.val)(s.clippedSpace.setRange),b=(0,Hi.val)(s.scaledSpace.toUnitSpace);return h.preventDefault(),h.stopPropagation(),{onDrag(_,E,P,I,O){l({deltaY:-O});let R=-b(_),A=nd(m,F=>F+R);g(A)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[s]))}function jF(s,[a,l]){return Math.max(Math.min(s,l),a)}function JEe(s,a){return nd(s,l=>jF(l,a))}function eCe(s,a){(0,gm.useLayoutEffect)(()=>{if(!a)return;let l=(0,Hi.prism)(()=>{let b=(0,Hi.val)(s.clippedSpace.range);return(0,Hi.val)(s.scaledSpace.fromUnitSpace)(b.start)}),h=()=>{let b=l.getValue();a.scrollLeft=b},m=l.onStale(h);h();let g=setTimeout(h,100);return()=>{clearTimeout(g),m()}},[s,a])}var Hi,gm,aoe,loe,uoe,HF,coe=C(()=>{ks(),Nr(),Pn(),Hi=zt,fi(),gm=q(Fe()),ze(),Bse(),Fr(),l0(),Zl(),mm(),loe=ae.div(aoe||(aoe=J([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),Rr),uoe=gm.default.memo(({layoutP:s,children:a,height:l})=>{let{width:h,unitSpaceToScaledSpaceMultiplier:m}=Qn(()=>({width:(0,Hi.val)(s.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Hi.val)(s.scaledSpace.fromUnitSpace)(1)}),[s]),[g,b]=Sr(null);return QEe(s,b),ZEe(s,b),eCe(s,b),gm.default.createElement(loe,{ref:g,style:{width:h+"px",height:l+"px","--unitSpaceToScaledSpaceMultiplier":m}},a)}),HF=uoe}),pP,doe,hoe,poe,foe,moe,goe,voe,J3,fP=C(()=>{pP=q(Fe()),ze(),hoe=ae.li(doe||(doe=J([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),foe=ae.div(poe||(poe=J([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),s=>s.isEven?"transparent":"#6b8fb505"),goe=ae.ul(moe||(moe=J([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),voe=({leaf:s,children:a,node:l,isCollapsed:h})=>{let m=Array.isArray(a)&&a.length>0;return s.shouldRender?pP.default.createElement(hoe,null,pP.default.createElement(foe,{style:{height:s.nodeHeight+"px"},isEven:s.n%2===0},l),m&&pP.default.createElement(goe,null,a)):null},J3=voe}),tCe=H((s,a)=>{(function(){var l=this,h={};typeof s<"u"?a.exports=h:l.fuzzy=h,h.simpleFilter=function(m,g){return g.filter(function(b){return h.test(m,b)})},h.test=function(m,g){return h.match(m,g)!==null},h.match=function(m,g,b){b=b||{};var _=0,E=[],P=g.length,I=0,O=0,R=b.pre||"",A=b.post||"",F=b.caseSensitive&&g||g.toLowerCase(),N;m=b.caseSensitive&&m||m.toLowerCase();for(var V=0;V<P;V++)N=g[V],F[V]===m[_]?(N=R+N+A,_+=1,O+=1+O):O=0,I+=O,E[E.length]=N;return _===m.length?(I=F===m?1/0:I,{rendered:E.join(""),score:I}):null},h.filter=function(m,g,b){return!g||g.length===0?[]:typeof m!="string"?g:(b=b||{},g.reduce(function(_,E,P,I){var O=E;b.extract&&(O=b.extract(E));var R=h.match(m,O,b);return R!=null&&(_[_.length]={string:R.rendered,score:R.score,index:P,original:E}),_},[]).sort(function(_,E){var P=E.score-_.score;return P||_.index-E.index}))}})()});function nCe(s,a){let[l,h]=(0,mP.useState)(!1),m=(0,mP.useRef)(a);return l||(m.current=a),(0,mP.useMemo)(()=>s(h),m.current)}var mP,rCe=C(()=>{mP=q(Fe())}),GF,xp,gP=C(()=>{GF="rgba(26, 28, 30, 0.97);",xp="#272B2F"});function yoe(s,a,l,h){let m=nCe(g=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return g(!0),{onDrag(b,_){s&&l.onCurveChange(h(b,_))},onDragEnd(b){g(!1),l.onCancelCurveChange()}}}}),[s,l.onCurveChange,l.onCancelCurveChange]);ji(a,m)}var kr,vP,o7,e5,boe,a7,_oe,yP,woe,xoe,Soe,t5,Eoe,vm,Coe,Poe,WF,Toe,bP,Moe,$F,koe,Aoe,iCe=C(()=>{kr=q(Fe()),ks(),Nr(),j9(),ze(),Fr(),rCe(),gP(),vP=.12,o7=1+vP*2,e5=.01,boe=8,a7=(1-e5)/(boe-1),_oe="#3EAAA4",yP="#3EAAA4",woe="#3EAAA4",xoe="#3EAAA4",Soe="#3EAAA4",t5="#3EAAA4",Eoe="#3EAAA4",vm="#B3B3B3",Coe="#3eaaa4",Poe="#67dfd8",WF=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],bP=ae.circle(Toe||(Toe=J([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),Coe),$F=ae.circle(Moe||(Moe=J([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),Rr,bP,Poe),koe=s=>{let{curveConnection:{left:a,right:l},backgroundConnections:h}=s,m=Math.min(0,1-l.handles[1],1-a.handles[3]),g=Math.max(1,1-l.handles[1],1-a.handles[3]),b=Math.max(1,g-m),_=W=>(W-m)/b,[E,P]=Sr(null),I=o7/((P==null?void 0:P.clientWidth)||1),O=o7/((P==null?void 0:P.clientHeight)||1),[R,A]=Sr(null);yoe(P,A,s,(W,$)=>{let Z=Si(a.handles[2]+W*I,0,1),ie=a.handles[3]-$*O;return[Z,ie,l.handles[0],l.handles[1]]});let[F,N]=Sr(null);yoe(P,N,s,(W,$)=>{let Z=Si(l.handles[0]+W*I,0,1),ie=l.handles[1]-$*O;return[a.handles[2],a.handles[3],Z,ie]});let V=W=>"M0 ".concat(_(1)," C").concat(W.left.handles[2]," ").concat(_(1-W.left.handles[3])," ").concat(W.right.handles[0]," ").concat(_(1-W.right.handles[1])," 1 ").concat(_(0));return kr.default.createElement("svg",{height:"100%",width:"100%",ref:E,viewBox:"".concat(-vP," ").concat(-vP," ").concat(o7," ").concat(o7),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},kr.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},kr.default.createElement("stop",{offset:_(-1),stopColor:Eoe}),kr.default.createElement("stop",{offset:_(0),stopColor:t5}),kr.default.createElement("stop",{offset:_(.3),stopColor:Soe}),kr.default.createElement("stop",{offset:_(.5),stopColor:xoe}),kr.default.createElement("stop",{offset:_(.7),stopColor:woe}),kr.default.createElement("stop",{offset:_(1),stopColor:yP}),kr.default.createElement("stop",{offset:_(2),stopColor:_oe})),kr.default.createElement("pattern",{id:"dot-background-pattern-1",width:a7,height:a7/b,y:-m/b},kr.default.createElement("rect",{width:e5,height:e5,fill:vm,opacity:.3})),kr.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),kr.default.createElement("pattern",{id:"dot-background-pattern-2",width:a7,height:a7},kr.default.createElement("rect",{width:e5,height:e5,fill:vm})),kr.default.createElement("rect",{x:0,y:_(0),width:"1",height:_(1)-_(0),fill:"url(#dot-background-pattern-2)"}),!a.type||a.type==="bezier"?kr.default.createElement(kr.default.Fragment,null,kr.default.createElement("line",{x1:0,y1:_(1),x2:a.handles[2],y2:_(1-a.handles[3]),stroke:vm,strokeWidth:"0.01"}),kr.default.createElement("line",{x1:1,y1:_(0),x2:l.handles[0],y2:_(1-l.handles[1]),stroke:vm,strokeWidth:"0.01"}),kr.default.createElement("path",{d:V(s.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),h.map((W,$)=>kr.default.createElement("path",{key:W.objectKey+"/"+W.left.id,d:V(W),stroke:WF[$%WF.length],opacity:.6,strokeWidth:"0.01"})),kr.default.createElement("path",{d:V(s.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),kr.default.createElement("circle",{cx:0,cy:_(1),r:"0.025",stroke:yP,strokeWidth:"0.02",fill:xp}),kr.default.createElement("circle",{cx:1,cy:_(0),r:"0.025",stroke:t5,strokeWidth:"0.02",fill:xp}),kr.default.createElement($F,{ref:R,cx:a.handles[2],cy:_(1-a.handles[3]),fill:yP,opacity:.2}),kr.default.createElement(bP,{cx:a.handles[2],cy:_(1-a.handles[3])}),kr.default.createElement($F,{ref:F,cx:l.handles[0],cy:_(1-l.handles[1]),fill:t5,opacity:.2}),kr.default.createElement(bP,{cx:l.handles[0],cy:_(1-l.handles[1])})):kr.default.createElement(kr.default.Fragment,null,kr.default.createElement("line",{x1:0,y1:_(1),x2:1,y2:_(1),stroke:vm,strokeWidth:"0.01"}),kr.default.createElement("line",{x1:1,y1:_(1),x2:1,y2:0,stroke:vm,strokeWidth:"0.01"}),kr.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:t5,strokeWidth:"0.02",fill:xp}),kr.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:t5,strokeWidth:"0.02",fill:xp})))},Aoe=koe});function _P(s){return s.map(a=>a.toFixed(3)).join(", ")}function wP(s){if(!s||(s==null?void 0:s.length)>Ioe)return null;let a=s.split(",");if(a.length!==4)return null;let l=a.map(h=>Number(h.trim()));return!l.every(h=>isFinite(h))||l[0]<0||l[0]>1||l[2]<0||l[2]>1?null:l}function sCe(s,a,l={threshold:.02}){if(!s||!a)return!1;let h=0;for(let m=0;m<4;m++)h+=Math.abs(s[m]-a[m]);return h<l.threshold}var Ioe,xP,Roe=C(()=>{Ioe=128,xP=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),zo,SP,ym,KF,Doe,Ooe,l7,XF,qF,Loe,Noe,oCe=C(()=>{zo=q(Fe()),SP=.75,ym=.1,KF=1+SP*2,Doe="#F5F5F5",Ooe="#888888",l7="#4f4f4f",XF="rgba(255, 255, 255, 0.1)",qF=s=>1-s,Loe=s=>{let{easing:a,isSelected:l}=s,h=l?Doe:Ooe,m="".concat(-SP," ").concat(-SP," ").concat(KF," ").concat(KF);if(a){let g=[a[0],qF(a[1])],b=[a[2],qF(a[3])];return zo.default.createElement("svg",{height:"100%",width:"100%",viewBox:m,fill:"none",xmlns:"http://www.w3.org/2000/svg"},zo.default.createElement("line",{x1:"0",y1:"1",x2:g[0],y2:g[1],stroke:l7,strokeWidth:"0.1"}),zo.default.createElement("line",{x1:"1",y1:"0",x2:b[0],y2:b[1],stroke:l7,strokeWidth:"0.1"}),zo.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:XF}),zo.default.createElement("circle",{cx:b[0],cy:b[1],r:.1,fill:XF}),zo.default.createElement("circle",{cx:g[0],cy:g[1],r:ym,fill:l7}),zo.default.createElement("circle",{cx:b[0],cy:b[1],r:ym,fill:l7}),zo.default.createElement("path",{d:"M0 1 C".concat(g[0]," ").concat(g[1]," ").concat(b[0],` 
        `).concat(b[1]," 1 0"),stroke:h,strokeWidth:"0.08"}),zo.default.createElement("circle",{cx:0,cy:1,r:ym,fill:h}),zo.default.createElement("circle",{cx:1,cy:0,r:ym,fill:h}))}return zo.default.createElement("svg",{height:"100%",width:"100%",viewBox:m,fill:"none",xmlns:"http://www.w3.org/2000/svg"},zo.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:h,strokeWidth:"0.08"}),zo.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:h,strokeWidth:"0.08"}),zo.default.createElement("circle",{cx:0,cy:1,r:ym,fill:h}),zo.default.createElement("circle",{cx:1,cy:0,r:ym,fill:h}))},Noe=Loe}),u7,Foe,Boe,Uoe,zoe,Voe,joe,Hoe,aCe=C(()=>{H6(),u7=q(Fe()),ze(),Roe(),oCe(),nC(),gP(),Zu(),Uoe=ae.div(Boe||(Boe=J([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),xp,({isSelected:s})=>s&&po(Foe||(Foe=J([`
      background-color: #383d42;
    `])))),Voe=ae(Yu)(zoe||(zoe=J([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),joe=u7.default.forwardRef((s,a)=>{let[l,h]=W3({enabled:!0,verticalPlacement:s.tooltipPlacement,verticalGap:0},()=>u7.default.createElement(Voe,{showPopoverEdgeTriangle:!1},s.easing.label));return u7.default.createElement(Uoe,B({ref:tC([h,a])},s),l,u7.default.createElement(Noe,{easing:wP(s.easing.value),isSelected:s.isSelected}))}),Hoe=joe});function lCe(s){var a;let[l,h]=(0,Goe.useState)(null),m=b=>{if(l===null){s.items.length>0&&h(0);return}let _=l+b*s.uiColumns,E=_<0,P=_>s.items.length-1;if(E||P){if(s.canVerticleExit&&s.canVerticleExit(E?"top":"bottom")){h(null);return}return}h(_)},g=b=>{l===null?h(hCe(b,s.items.length)):l+b<0?h(null):h(Math.min(l+b,s.items.length-1))};return{focusFirstItem(){h(0)},onParentEltKeyDown:b=>{if(b.key==="ArrowRight")g(1);else if(b.key==="ArrowLeft")g(-1);else if(b.key==="ArrowUp")m(-1);else if(b.key==="ArrowDown")m(1);else return 0;return 1},gridItems:s.items.map((b,_)=>s.renderItem({isSelected:_===l,item:b,select(E){h(_),s.onSelectItem(b)===1&&(E==null||E.preventDefault(),E==null||E.stopPropagation())}})),currentSelection:(a=s.items[l??-1])!=null?a:null}}var Goe,uCe=C(()=>{Goe=q(Fe()),CP()});function Woe(s,a,l){var h;(h=s.current)==null||h.discard(),s.current=null;let m=wP(l);m===null?s.current=dCe(a):s.current=cCe(a,m)}function $oe(s){var a;(a=s.current)==null||a.discard(),s.current=null}function cCe(s,a){return de().tempTransaction(({stateEditors:l})=>{let{setHandlesForKeyframe:h,setKeyframeType:m}=l.coreByProject.historic.sheetsById.sequence;for(let{projectId:g,sheetId:b,objectKey:_,trackId:E,left:P,right:I}of s)h({projectId:g,sheetId:b,objectKey:_,trackId:E,keyframeId:P.id,start:[a[0],a[1]]}),h({projectId:g,sheetId:b,objectKey:_,trackId:E,keyframeId:I.id,end:[a[2],a[3]]}),m({projectId:g,sheetId:b,objectKey:_,trackId:E,keyframeId:P.id,keyframeType:"bezier"})})}function dCe(s){return de().tempTransaction(({stateEditors:a})=>{let{setKeyframeType:l}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:h,sheetId:m,objectKey:g,trackId:b,left:_}of s)l({projectId:h,sheetId:m,objectKey:g,trackId:b,keyframeId:_.id,keyframeType:"hold"})})}function hCe(s,a){return(s%a+a)%a}function pCe(s,a){return()=>setTimeout(s,a)}function fCe({left:s,right:a}){return({left:l,right:h})=>s.handles[2]!==l.handles[2]||s.handles[3]!==l.handles[3]||a.handles[0]!==h.handles[0]||a.handles[1]!==h.handles[1]}var EP,Ci,Koe,YF,ZF,Xoe,qoe,Yoe,Zoe,Qoe,Joe,eae,tae,nae,rae,iae,sae,QF,mCe,JF,oae,CP=C(()=>{EP=zt,Ci=q(Fe()),ze(),Koe=q(tCe()),Me(),iCe(),aCe(),Roe(),gP(),Nr(),uCe(),YF=3,ZF=53,Xoe=25,Yoe=ae.div(qoe||(qoe=J([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),GF,YF*ZF),Qoe=ae.div(Zoe||(Zoe=J([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),YF),eae=ae.input.attrs({type:"text"})(Joe||(Joe=J([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),xp),nae=ae.div(tae||(tae=J([`
  grid-area: tween;
  background: `,`;
`])),xp),iae=ae.div(rae||(rae=J([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),sae=s=>{let a=(0,Ci.useMemo)(()=>[s.curveConnection,...s.additionalConnections],[s.curveConnection,...s.additionalConnections]),l=(0,Ci.useRef)(null);(0,Ci.useEffect)(()=>{let ue=oae(a);return()=>{var Le;ue(),(Le=l.current)==null||Le.commit()}},[l]);let h=[s.curveConnection.left.handles[2],s.curveConnection.left.handles[3],s.curveConnection.right.handles[0],s.curveConnection.right.handles[1]],m=(0,Ci.useRef)(null);(0,Ci.useLayoutEffect)(()=>{var ue,Le;(ue=m.current)==null||ue.select(),(Le=m.current)==null||Le.focus()},[m.current]);let[g,b]=(0,Ci.useState)(_P(h)),_=ue=>{ue!==void 0&&(I(1),b(ue.target.value),wP(ue.target.value)&&R(ue.target.value))},E=ue=>{var Le,Q;I(1),(ue.key==="ArrowDown"||ue.key==="ArrowUp")&&ue.preventDefault(),ue.key==="ArrowDown"?(lt.focusFirstItem(),(Q=(Le=le.current[W[0].label])==null?void 0:Le.current)==null||Q.focus()):ue.key==="Escape"?($oe(l),s.onRequestClose("key Escape")):ue.key==="Enter"&&s.onRequestClose("key Enter")},[P,I]=(0,Ci.useState)(0);(0,Ci.useEffect)(()=>{P===2?b(_P(h)):P===3&&g!==""&&b("")},a);let[O,R]=(0,Ci.useState)(_P(h)),[A,F]=(0,Ci.useState)(null);(0,Ci.useEffect)(()=>{var ue;P!==0&&P!==3&&Woe(l,a,(ue=A??O)!=null?ue:"")},[A,O,P]),a.some(fCe(s.curveConnection))&&P===0&&I(3);let N=ue=>{var Le,Q;I(2);let He=_P(ue);b(He),R(He),(Le=m.current)==null||Le.select(),(Q=m.current)==null||Q.focus()},V=()=>{},W=(0,Ci.useMemo)(()=>/^[A-Za-z]/.test(g)?Koe.default.filter(g,xP,{extract:ue=>ue.label}).map(ue=>ue.original):xP,[g]);(0,Ci.useEffect)(()=>{P===1&&W[0]&&R(W[0].value)},[W]);let $=ue=>{ue.key==="Escape"?($oe(l),s.onRequestClose("key Escape"),ue.stopPropagation()):ue.key==="Enter"&&(s.onRequestClose("key Enter"),ue.stopPropagation())},Z=ue=>{P===0&&I(2),F(ue.value)},ie=()=>F(null),re=ue=>(Woe(l,a,ue.value),s.onRequestClose("selected easing option"),1),le=(0,Ci.useRef)(xP.reduce((ue,Le)=>(ue[Le.label]={current:null},ue),{})),[Ce,ye]=Sr(null),[we,Ne]=(0,Ci.useState)(0);(0,Ci.useEffect)(()=>{let ue=()=>{var Le;Ne((Le=ye==null?void 0:ye.scrollTop)!=null?Le:0)};return ye==null||ye.addEventListener("scroll",ue),()=>ye==null?void 0:ye.removeEventListener("scroll",ue)},[ye]);let lt=lCe({items:W,uiColumns:3,onSelectItem:re,canVerticleExit(ue){var Le,Q;return ue==="top"?((Le=m.current)==null||Le.select(),(Q=m.current)==null||Q.focus(),1):0},renderItem:({item:ue,select:Le})=>{var Q,He;return Ci.default.createElement(Hoe,{key:ue.label,easing:ue,tabIndex:0,onKeyDown:$,ref:le.current[ue.label],onMouseOver:()=>Z(ue),onMouseOut:ie,onClick:Le,tooltipPlacement:((He=(Q=le.current[ue.label].current)==null?void 0:Q.offsetTop)!=null?He:0)-(we??0)<ZF+Xoe?"bottom":"top",isSelected:sCe(h,wP(ue.value))})}});return(0,Ci.useLayoutEffect)(()=>{var ue,Le;if(lt.currentSelection!==null&&document.activeElement!==m.current){let Q=(Le=(ue=le.current)==null?void 0:ue[lt.currentSelection.label])==null?void 0:Le.current;Q==null||Q.focus(),R(lt.currentSelection.value),/^[A-Za-z]/.test(g)||b(lt.currentSelection.value)}},[lt.currentSelection]),Ci.default.createElement(Yoe,null,Ci.default.createElement(eae,{value:g,placeholder:P===3?"Multiple easings selected":"Search presets...",onPaste:pCe(_),onChange:_,ref:m,onKeyDown:E}),Ci.default.createElement(Qoe,{ref:Ce,onKeyDown:ue=>lt.onParentEltKeyDown(ue)},lt.gridItems,lt.gridItems.length===0?Ci.default.createElement(iae,null,"No results found"):void 0),Ci.default.createElement(nae,{onClick:()=>{var ue;return(ue=m.current)==null?void 0:ue.focus()}},Ci.default.createElement(Aoe,{curveConnection:s.curveConnection,backgroundConnections:s.additionalConnections,onCurveChange:N,onCancelCurveChange:V})))},QF=sae,{isCurveEditorOpenD:mCe,isConnectionEditingInCurvePopover:JF,getLock:oae}=(()=>{let s=new EP.Atom([]);return{getLock(a){return s.set(a),function(){s.set([])}},isCurveEditorOpenD:(0,EP.prism)(()=>s.prism.getValue().length>0),isConnectionEditingInCurvePopover(a){return EP.prism.ensurePrism(),s.prism.getValue().some(({left:l,right:h})=>a.left.id===l.id&&a.right.id===h.id)}}})()});function gCe(s,a){for(let{keyframeId:l}of bCe(a))if(s.left.id===l)return!0;return!1}function aae(s,a,l){return(0,TP.prism)(()=>{if(l===void 0)return[];let h=[];for(let{objectKey:m,trackId:g}of lae(l)){let b=(0,TP.val)(de().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[m].trackData[g]);b&&(h=h.concat(yCe(b.keyframes).filter(_=>gCe(_,l)).map(({left:_,right:E})=>({left:_,right:E,trackId:g,objectKey:m,sheetId:a,projectId:s}))))}return h})}function PP(s,a,l){var h;if(l===void 0)return[];let m=[];for(let{objectKey:b,trackId:_,keyframeIds:E}of lae(l))m=m.concat((h=eB({projectId:s,sheetId:a,objectKey:b,trackId:_,keyframeIds:E}))!=null?h:[]);let g=sP(m.map(b=>b.pathToProp));return m.map(({keyframe:b,pathToProp:_})=>({keyframe:b,pathToProp:_.slice(g.length)}))}function eB({projectId:s,sheetId:a,objectKey:l,trackId:h,keyframeIds:m}){let g=(0,TP.val)(de().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[l]),b=g==null?void 0:g.trackData[h];if(!b)return null;let _=vCe((g==null?void 0:g.trackIdByPropPath)||{})[h];if(!_)return null;let E=[l,...oP(_)];return m.map(P=>({keyframe:b.keyframes.find(I=>I.id===P),pathToProp:E})).filter(({keyframe:P})=>P!==void 0)}function vCe(s){let a={};for(let[l,h]of Object.entries(s))a[h]=l;return a}function yCe(s){return s.map((a,l)=>({left:a,right:s[l+1]})).slice(0,-1)}function bCe(s){var a,l,h;let m=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,E]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))for(let P of Object.keys((h=E==null?void 0:E.byKeyframeId)!=null?h:{}))m.push({objectKey:g,trackId:_,keyframeId:P});return m}function lae(s){var a,l,h;let m=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,E]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))m.push({objectKey:g,trackId:_,keyframeIds:Object.keys((h=E==null?void 0:E.byKeyframeId)!=null?h:{})});return m}var TP,n5=C(()=>{TP=zt,Me(),nc()});function _Ce(s,a){return(0,uae.useMemo)(()=>wCe(s,a),[])}function wCe(s,a){let l=null,h=b=>de().tempTransaction(_=>s(_,b));function m(){l==null||l.discard(),l=null}let g={createAsset:a.sheet.project.assetStorage.createAsset,getAssetUrl:b=>b.id?a.sheet.project.assetStorage.getAssetUrl(b.id):void 0};return B({temporarilySetValue(b){m(),l=h(b)},discardTemporaryValue:m,permanentlySetValue(b){m(),h(b).commit()}},g)}var uae,xCe=C(()=>{Me(),uae=q(Fe())});function tB(s){var a;if(s.type==="sheetObject")return bo.default.createElement(bo.default.Fragment,null,bo.default.createElement(MP,{style:{paddingLeft:"".concat(s.indent*kP,"px")}},s.sheetObject.address.objectKey),s.children.map((l,h)=>bo.default.createElement(tB,L(B({key:h},l),{autoFocusInput:s.autoFocusInput&&h===0,indent:s.indent+1}))));if(s.type==="propWithChildren"){let l=(a=s.propConfig.label)!=null?a:td(s.pathToProp);return bo.default.createElement(bo.default.Fragment,null,bo.default.createElement(MP,{style:{paddingLeft:"".concat(s.indent*kP,"px")}},l),s.children.map((h,m)=>bo.default.createElement(tB,L(B({key:m},h),{autoFocusInput:s.autoFocusInput&&m===0,indent:s.indent+1}))))}else return bo.default.createElement(SCe,L(B({},s),{autoFocusInput:s.autoFocusInput,indent:s.indent}))}function SCe(s){var a;let l=(a=s.propConfig.label)!=null?a:td(s.pathToProp),h=ECe(s);if(s.propConfig.type==="enum")return bo.default.createElement(bo.default.Fragment,null);{let m=AN[s.propConfig.type];return bo.default.createElement(dae,null,bo.default.createElement(MP,null,bo.default.createElement("span",{style:{paddingLeft:"".concat(s.indent*kP,"px")}},l)),bo.default.createElement(fae,null,bo.default.createElement(m,{editingTools:h,propConfig:s.propConfig,value:EC(s.keyframe.value,s.propConfig),autoFocus:s.autoFocusInput})))}}function ECe(s){let a=s.sheetObject;return _Ce(({stateEditors:l},h)=>{let m=L(B({},s.keyframe),{value:h});l.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},a.address),{trackId:s.trackId,keyframes:[m],snappingFunction:a.sheet.getSequence().closestGridPosition}))},a)}var bo,cae,dae,hae,MP,kP,pae,fae,CCe=C(()=>{bo=q(Fe()),ze(),eee(),Q9(),xCe(),pp(),dae=ae.div(cae||(cae=J([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),MP=ae.div(hae||(hae=J([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),kP=10,fae=ae.div(pae||(pae=J([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function AP(s){return Xu({debugName:"useKeyframeInlineEditorPopover"},()=>IP.default.createElement(Yu,{showPopoverEdgeTriangle:!0},IP.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(s)?s.map((a,l)=>IP.default.createElement(tB,L(B({key:l},a),{autoFocusInput:l===0,indent:0}))):void 0)))}var IP,RP=C(()=>{IP=q(Fe()),qu(),Zu(),CCe()});function PCe(s,a,l){return ca(s,{displayName:"Keyframe",menuItems:()=>{let h=PP(l.leaf.sheetObject.address.projectId,l.leaf.sheetObject.address.sheetId,l.selection);return[{label:h.length>0?"Copy (selection)":"Copy",callback:()=>{h.length>0?de().transaction(m=>{m.stateEditors.studio.ahistoric.setClipboardKeyframes(h)}):de().transaction(m=>{m.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l.keyframe,pathToProp:l.leaf.pathToProp}])})}},{label:l.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{l.selection?l.selection.delete():de().transaction(({stateEditors:m})=>{m.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},l.leaf.sheetObject.address),{keyframeIds:[l.keyframe.id],trackId:l.leaf.trackId}))})}}]},onOpen(){a._debug("Show keyframe",l)}})}function TCe(s,a,l){let h=(0,Sp.useRef)(a);h.current=a;let{onClickFromDrag:m}=l,g=(0,Sp.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(_){let E=h.current,P=(0,DP.val)(de().atomP.historic.coreByProject[E.leaf.sheetObject.address.projectId].sheetsById[E.leaf.sheetObject.address.sheetId].sequence.tracksByObject),I=Jse(P,function(F,{trackId:N,objectKey:V}){var W,$;return F.id!==E.keyframe.id&&!(E.selection&&($=(W=E.selection.byObjectKey[V])==null?void 0:W.byTrackId[N])!=null&&$.byKeyframeId[F.id])});if(Qse(I),E.selection){let{selection:F,leaf:N}=E,{sheetObject:V}=N,W=F.getDragHandlers(L(B({},V.address),{domNode:s,positionAtStartOfDrag:E.track.data.keyframes[E.index].position})).onDragStart(_);return W&&L(B({},W),{onClick:m,onDragEnd:(...$)=>{var Z;(Z=W.onDragEnd)==null||Z.call(W,...$),fm()}})}let O=E,R=(0,DP.val)(O.layoutP.scaledSpace.toUnitSpace),A;return{onDrag(F,N,V){var W;let $=O.track.data.keyframes[O.index],Z=Math.max((W=ha.checkIfMouseEventSnapToPos(V,{ignore:s}))!=null?W:$.position+R(F),0);A==null||A.discard(),A=void 0,A=de().tempTransaction(({stateEditors:ie})=>{ie.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},O.leaf.sheetObject.address),{trackId:O.leaf.trackId,keyframes:[L(B({},$),{position:Z})],snappingFunction:(0,DP.val)(O.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(F){F?A==null||A.commit():A==null||A.discard(),fm()},onClick(F){m(F)}}}}),[m]),[b]=ji(s,g);return Sd(b,a.keyframe.position),$0(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var Sp,DP,c7,nB,d7,rB,mae,OP,gae,vae,yae,bae,_ae,wae,xae=C(()=>{Sp=q(Fe()),ze(),Me(),da(),ks(),Nr(),DP=zt,yo(),l0(),Zl(),cP(),dp(),n5(),Fr(),mm(),RP(),lm(),c7=6,nB=c7+2,d7={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},rB=({isSelected:s,isInlineEditorPopoverOpen:a})=>s&&a?d7.inlineEditorOpenColor:s?d7.selectedColor:a?d7.selectedAndInlineEditorOpenColor:d7.normalColor,OP=ae.div(mae||(mae=J([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),q0(c7),s=>rB(s),s=>s.flag===2?"outline: 2px solid white;":""),vae=ae.div(gae||(gae=J([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),q0(c7*1.5),s=>rB(s),s=>s.flag===2?"outline: 2px solid white;":""),bae=ae.div(yae||(yae=J([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),q0(12),Rr,OP,s=>s.isInlineEditorPopoverOpen?q0(nB):"",OP,q0(nB)),_ae=s=>{let a=cp("SingleKeyframeDot",s.keyframe.id),l=am(s.itemKey),[h,m]=Sr(null),[g]=PCe(m,a,s),{node:b,toggle:_,isOpen:E}=AP([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.leaf.pathToProp,propConfig:s.leaf.propConf,sheetObject:s.leaf.sheetObject,trackId:s.leaf.trackId}]);TCe(m,s,{onClickFromDrag(I){_(I,h.current)}});let P=!s.keyframe.type||s.keyframe.type==="bezier";return Sp.default.createElement(Sp.default.Fragment,null,Sp.default.createElement(bae,B({ref:h,isInlineEditorPopoverOpen:E},l.attrs)),P?Sp.default.createElement(OP,{isSelected:!!s.selection,isInlineEditorPopoverOpen:E,flag:l.flag}):Sp.default.createElement(vae,{isSelected:!!s.selection,isInlineEditorPopoverOpen:E,flag:l.flag}),b,g)},wae=_ae}),iB,sB,oB,bm,Sae,Eae,aB,Cae=C(()=>{a0(),iB=q(Fe()),ze(),xae(),sB=c7/2+1,oB=1e3,bm={normalColor:"#365b59",selectedColor:"#8A7842",barColor:s=>{let a=s.isSelected?bm.selectedColor:bm.normalColor;return s.isPopoverOpen?VE(.2,w3(.2,a)):a},hoverColor:s=>{let a=s.isSelected?bm.selectedColor:bm.normalColor;return s.isPopoverOpen?VE(.2,w3(.2,a)):VE(.1,w3(.1,a))}},Eae=ae.div(Sae||(Sae=J([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),bm.barColor,sB,oB,sB/2,bm.hoverColor),aB=iB.default.forwardRef((s,a)=>{let l={isPopoverOpen:s.isPopoverOpen,isSelected:s.isSelected};return iB.default.createElement(Eae,L(B({},l),{ref:a,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s.connectorLengthInUnitSpace/oB,"))")},onClick:h=>{var m;(m=s.openPopover)==null||m.call(s,h)}}),s.children)})});function MCe(s,a){let l=(0,lB.useRef)(a);l.current=a;let h=(0,lB.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(m){let g=l.current,b;if(g.selection){let{selection:I,leaf:O}=g,{sheetObject:R}=O;return I.getDragHandlers(L(B({},R.address),{domNode:s,positionAtStartOfDrag:g.track.data.keyframes[g.index].position})).onDragStart(m)}let _=g,E=(0,LP.val)(_.layoutP.sheet).getSequence(),P=(0,LP.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(I,O,R){let A=P(I);b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:F})=>{F.coreByProject.historic.sheetsById.sequence.transformKeyframes(L(B({},_.leaf.sheetObject.address),{trackId:_.leaf.trackId,keyframeIds:[_.keyframe.id,_.track.data.keyframes[_.index+1].id],translate:A,scale:1,origin:0,snappingFunction:E.closestGridPosition}))})},onDragEnd(I){I?b&&b.commit():b&&b.discard()}}}}),[]);ji(s,h)}function kCe(s,a,l,h){return ca(a,{displayName:"Tween",menuItems:()=>{let m=PP(s.leaf.sheetObject.address.projectId,s.leaf.sheetObject.address.sheetId,s.selection);return[{label:m.length>0?"Copy (selection)":"Copy",callback:()=>{m.length>0?de().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes(m)}):de().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l,pathToProp:s.leaf.pathToProp},{keyframe:h,pathToProp:s.leaf.pathToProp}])})}},{label:s.selection?"Delete (selection)":"Delete",callback:()=>{s.selection?s.selection.delete():de().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},s.leaf.sheetObject.address),{keyframeIds:[l.id,h.id],trackId:s.leaf.trackId}))})}}]}})}var LP,Ep,lB,uB,Pae,Tae,Mae,kae,Aae,ACe=C(()=>{Me(),da(),ks(),Nr(),LP=zt,Ep=q(Fe()),lB=q(Fe()),qu(),Zu(),CP(),Cae(),gP(),Pn(),n5(),n5(),ze(),uB=5,Tae=ae(Yu)(Pae||(Pae=J([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),GF),Mae=s=>{let{index:a,track:l}=s,h=l.data.keyframes[a],m=l.data.keyframes[a+1],[g,b]=Sr(null),{node:_,toggle:E,close:P}=Xu(()=>{let A=(0,LP.val)(s.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:A.screenX+uB,maxX:A.screenX+A.width-uB}}},()=>Ep.default.createElement(Aae,L(B({},s),{closePopover:P}))),[I]=kCe(s,b,h,m);MCe(b,s);let O=m.position-h.position,R={isPopoverOpen:Qn(()=>JF(L(B({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,left:h,right:m})),[s.leaf.sheetObject.address,s.leaf.trackId,h,m]),isSelected:s.selection!==void 0};return Ep.default.createElement(Ep.default.Fragment,null,Ep.default.createElement(aB,L(B({ref:g,connectorLengthInUnitSpace:O},R),{openPopover:A=>{b&&E(A,b)}}),_),I)},kae=Mae,Aae=Ep.default.forwardRef((s,a)=>{let{index:l,track:{data:h},selection:m}=s,g=h.keyframes[l],b=h.keyframes[l+1],_=s.leaf.trackId,E=s.leaf.sheetObject.address,P=Qn(()=>aae(E.projectId,E.sheetId,m).getValue(),[E,m]),I=B({left:g,right:b,trackId:_},E);return Ep.default.createElement(Tae,{showPopoverEdgeTriangle:!1,ref:a},Ep.default.createElement(QF,{curveConnection:I,additionalConnections:P,onRequestClose:s.closePopover}))})}),Iae,_m,Rae,Dae,Oae,Lae,Nae,ICe=C(()=>{Iae=zt,_m=q(Fe()),ze(),ACe(),xae(),Dae=ae.div(Rae||(Rae=J([`
  position: absolute;
`]))),Oae=_m.default.createElement(_m.default.Fragment,null),Lae=_m.default.memo(s=>{let{index:a,track:{data:l}}=s,h=l.keyframes[a],m=l.keyframes[a+1],g=h.connectedRight&&!!m;return _m.default.createElement(Dae,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Iae.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(h.position,"px))")}},_m.default.createElement(wae,L(B({},s),{itemKey:s.itemKey})),g?_m.default.createElement(kae,B({},s)):Oae)}),Nae=Lae});function RCe(s,a){return ca(s,{displayName:"Keyframe Track",menuItems:()=>{var l;let h=(l=(0,r5.val)(de().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?l:[];return[DCe(a,h)]}})}function DCe(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{var l;let h=(0,r5.val)(s.layoutP.sheet).getSequence(),m=(l=a[0])==null?void 0:l.pathToProp,g=a.filter(({keyframe:b,pathToProp:_})=>NEe(m,_)).map(({keyframe:b,pathToProp:_})=>b);de().transaction(({stateEditors:b})=>{var _;h.position=h.closestGridPosition(h.position);let E=(_=OCe(g))==null?void 0:_.position;for(let P of g)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(L(B({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,position:h.position+P.position-E,handles:P.handles,value:P.value,snappingFunction:h.closestGridPosition,type:P.type}))})}}}function OCe(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}var r5,Ed,Fae,Bae,cB,Uae,LCe=C(()=>{Pn(),r5=zt,Ed=q(Fe()),ze(),ICe(),da(),Nr(),Me(),nc(),mm(),bd(),Bae=ae.div(Fae||(Fae=J([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),cB=Ed.default.memo(s=>{var a;let{layoutP:l,trackData:h,leaf:m}=s,[g,b]=Sr(null),{selectedKeyframeIds:_,selection:E}=Qn(()=>{let Z=(0,r5.val)(l.selectionAtom),ie=(0,r5.val)(Z.pointer.current.byObjectKey[m.sheetObject.address.objectKey].byTrackId[m.trackId].byKeyframeId);return ie?{selectedKeyframeIds:ie,selection:(0,r5.val)(Z.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[l,m.trackId]),[P,I,O]=RCe(b,s),R=ir(VF),A=R.mode==="snapToSome"?(a=R.positions[m.sheetObject.address.objectKey])==null?void 0:a[m.trackId]:[],F=R.mode==="snapToAll",N=(0,Ed.useMemo)(()=>({data:h,id:m.trackId,sheetObject:s.leaf.sheetObject}),[h,m.trackId]),V=h.keyframes.map((Z,ie)=>Ed.default.createElement(Nae,{key:"keyframe-"+Z.id,itemKey:zs.forTrackKeyframe(m.sheetObject,m.trackId,Z.id),keyframe:Z,index:ie,track:N,layoutP:l,leaf:m,selection:_[Z.id]===!0?E:void 0})),W=A.map(Z=>Ed.default.createElement(i7,{key:"snap-target-"+Z,layoutP:l,leaf:m,position:Z})),$=F?h.keyframes.map(Z=>Ed.default.createElement(i7,{key:"additionalSnapTarget-".concat(Z.id),layoutP:l,leaf:m,position:Z.position})):null;return Ed.default.createElement(Bae,{ref:g,style:{background:O?"#444850 ":"unset"}},V,W,Ed.default.createElement(Ed.default.Fragment,null,$),P)}),cB.displayName="BasicKeyframedTrack",Uae=cB}),zae,h7,Vae,jae,NCe=C(()=>{Me(),Pn(),zae=zt,h7=q(Fe()),fP(),LCe(),dp(),Vae=({leaf:s,layoutP:a})=>{let l=cp("PrimitivePropRow",s.pathToProp.join());return Qn(()=>{let{sheetObject:h}=s,{trackId:m}=s,g=(0,zae.val)(de().atomP.historic.coreByProject[h.address.projectId].sheetsById[h.address.sheetId].sequence.tracksByObject[h.address.objectKey].trackData[m]);return(g==null?void 0:g.type)!=="BasicKeyframedTrack"?(l.errorDev("trackData type ".concat(g==null?void 0:g.type," is not yet supported on the sequence editor")),h7.default.createElement(J3,{leaf:s,isCollapsed:!1,node:h7.default.createElement("div",null)})):h7.default.createElement(J3,{leaf:s,isCollapsed:!1,node:h7.default.createElement(Uae,{layoutP:a,trackData:g,leaf:s})})},[s,a])},jae=Vae});function FCe(s){return s()}var BCe=C(()=>{});function Hae(s){let{index:a,aggregateKeyframes:l,selection:h}=s;return Qn(Gae(s),[a,l,h,s.viewModel])}function Gae(s){let{index:a,aggregateKeyframes:l,selection:h}=s,{projectId:m,sheetId:g}=s.viewModel.type==="sheet"?s.viewModel.sheet.address:s.viewModel.sheetObject.address;return()=>{let b=l[a],_=l[a+1],E=_&&b.keyframes.length===_.keyframes.length&&b.keyframes.every(({track:R},A)=>_.keyframes[A].track===R)?{length:_.position-b.position,selected:b.selected===0&&_.selected===0}:null,P=E?b.keyframes.map(({kf:R,track:A},F)=>L(B({},A.sheetObject.address),{trackId:A.id,left:R,right:_.keyframes[F].kf})):[],I=FCe(()=>{let R=dB.prism.memo("selectedConnections",()=>aae(m,g,h),[m,g,h]).getValue();return[...P,...R]}),O=P.every(R=>JF(R));return{itemKey:dB.prism.memo("itemKey",()=>s.viewModel.type==="sheet"?zs.forSheetAggregateKeyframe(s.viewModel.sheet,b.position):s.viewModel.type==="sheetObject"?zs.forSheetObjectAggregateKeyframe(s.viewModel.sheetObject,b.position):zs.forCompoundPropAggregateKeyframe(s.viewModel.sheetObject,s.viewModel.pathToProp,b.position),[s.viewModel,b.position]),cur:b,connected:E,isAggregateEditingInCurvePopover:O,allConnections:I}}}var dB,hB=C(()=>{dB=zt,bd(),CP(),Pn(),n5(),BCe()});function UCe(s,a){let l=(0,Y0.useRef)(a);l.current=a;let h=(0,Y0.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(m){let g=l.current,b,_=g.aggregateKeyframes[g.index].keyframes,{selection:E,viewModel:P}=g,I=P.type==="sheet"?P.sheet.address:P.sheetObject.address;if(E&&g.aggregateKeyframes[g.index].selected===0)return E.getDragHandlers(L(B({},I),{domNode:s,positionAtStartOfDrag:g.aggregateKeyframes[g.index].position})).onDragStart(m);let O=g,R=(0,NP.val)(O.layoutP.sheet).getSequence(),A=(0,NP.val)(O.layoutP.scaledSpace.toUnitSpace);return{onDrag(F,N,V){let W=A(F);b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:$})=>{for(let Z of _)$.coreByProject.historic.sheetsById.sequence.transformKeyframes(L(B({},Z.track.sheetObject.address),{trackId:Z.track.id,keyframeIds:[Z.kf.id,Z.track.data.keyframes[Z.track.data.keyframes.indexOf(Z.kf)+1].id],translate:W,scale:1,origin:0,snappingFunction:R.closestGridPosition}))})},onDragEnd(F){F?b&&b.commit():b&&b.discard()}}}}),[]);return ji(s,h)}function zCe(s,a){return ca(a,{displayName:"Aggregate Tween",menuItems:()=>{let l=s.utils.allConnections.reduce((_,E)=>{var P;return _.concat((P=eB(L(B({},E),{keyframeIds:[E.left.id,E.right.id]})))!=null?P:[])},[]),h=sP(l.map(_=>_.pathToProp)),m=l.map(({keyframe:_,pathToProp:E})=>({keyframe:_,pathToProp:E.slice(h.length)})),g=s.editorProps.viewModel,b=g.type==="sheet"?g.sheet.address:g.sheetObject.address;return[{label:"Copy",callback:()=>{if(s.editorProps.selection){let _=PP(b.projectId,b.sheetId,s.editorProps.selection);de().transaction(E=>{E.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}else de().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(m)})}},{label:"Delete",callback:()=>{s.editorProps.selection?s.editorProps.selection.delete():de().transaction(({stateEditors:_})=>{for(let E of s.utils.allConnections)_.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},b),{objectKey:E.objectKey,keyframeIds:[E.left.id,E.right.id],trackId:E.trackId}))})}}]}})}var NP,Y0,pB,Wae,$ae,Kae,Xae,VCe=C(()=>{NP=zt,Y0=q(Fe()),Cae(),qu(),Nr(),Me(),ks(),CP(),hB(),ze(),Zu(),n5(),da(),nc(),pB=5,$ae=ae(Yu)(Wae||(Wae=J([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),Kae=Y0.default.forwardRef((s,a)=>{let{allConnections:l}=Hae(s);return Y0.default.createElement($ae,{showPopoverEdgeTriangle:!1,ref:a},Y0.default.createElement(QF,{curveConnection:l[0],additionalConnections:l,onRequestClose:s.closePopover}))}),Xae=s=>{let[a,l]=Sr(null),{editorProps:h}=s,[m]=zCe(s,l),[g]=UCe(l,s.editorProps),{node:b,toggle:_,close:E}=Xu(()=>{let O=(0,NP.val)(h.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:O.screenX+pB,maxX:O.screenX+O.width-pB}}},()=>Y0.default.createElement(Kae,L(B({},h),{closePopover:E}))),{connected:P,isAggregateEditingInCurvePopover:I}=s.utils;return P||g?Y0.default.createElement(Y0.default.Fragment,null,Y0.default.createElement(aB,{ref:a,connectorLengthInUnitSpace:P?P.length:0,isSelected:P?P.selected:!1,isPopoverOpen:I,openPopover:O=>{l&&_(O,l)}}),b,m):Y0.default.createElement(Y0.default.Fragment,null)}});function jCe(s){let a={isSelected:s.isSelected,flag:s.flag};return Cd.default.createElement(FP,null,s.isAllHere?Cd.default.createElement(e0e,B({},a)):Cd.default.createElement(t0e,B({},a)))}var Cd,fB,qae,Yae,FP,Zae,Qae,mB,gB,vB,yB,Jae,e0e,t0e,HCe=C(()=>{Cd=q(Fe()),ze(),cP(),Fr(),fB=16,qae=fB+2,FP=ae.div(Yae||(Yae=J([`
  position: absolute;
  `,`
  z-index: 1;
`])),q0(fB)),Qae=ae.div(Zae||(Zae=J([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),q0(12),Rr,FP,FP,q0(qae)),mB="#F2C95C",gB="#40AAA4",vB="#45747C",yB=s=>s.isSelected===0?mB:s.isSelected===1?gB:vB,Jae=s=>s.isSelected===0?mB:s.isSelected===1?gB:vB,e0e=s=>Cd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cd.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:Jae(s)}),Cd.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:yB(s),stroke:s.flag===2?"white":void 0,strokeWidth:s.flag===2?"2px":void 0})),t0e=s=>Cd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cd.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:s.flag===2?"white":yB(s),strokeWidth:s.flag===2?"2px":void 0}))});function GCe(s,a){let l=s.children.map(h=>h.type==="propWithChildren"?bB(h,a):n0e(h,a)).filter(_B);return l.length===0?null:{type:"sheetObject",sheetObject:s.sheetObject,children:l}}function bB(s,a){let l=s.children.map(h=>h.type==="propWithChildren"?bB(h,a):n0e(h,a)).filter(_B);return l.length===0?null:{type:"propWithChildren",pathToProp:s.pathToProp,propConfig:s.propConf,children:l}}function n0e(s,a){let l=a.find(h=>h.track.id===s.trackId);return l?{type:"primitiveProp",keyframe:l.kf,pathToProp:s.pathToProp,propConfig:s.propConf,sheetObject:s.sheetObject,trackId:s.trackId}:null}function WCe(s){var a,l,h,m;let{cur:g}=s.utils,b=AP(s.editorProps.viewModel.type==="sheet"?null:s.editorProps.viewModel.type==="sheetObject"?(l=(a=GCe(s.editorProps.viewModel,g.keyframes))==null?void 0:a.children)!=null?l:null:(m=(h=bB(s.editorProps.viewModel,g.keyframes))==null?void 0:h.children)!=null?m:null),_=am(s.utils.itemKey);_.useRelations(()=>g.keyframes.map(O=>({affects:O.itemKey,flag:2})),[g.keyframes.map(O=>O.track.id).join("-")]);let[E,P]=Sr(null),[I]=$Ce(s,P);return p7.default.createElement(p7.default.Fragment,null,p7.default.createElement(Qae,L(B(B({ref:E},_.attrs),ha.includePositionSnapAttrs(g.position)),{onClick:O=>s.editorProps.viewModel.type!=="sheet"?b.open(O,E.current):null})),p7.default.createElement(jCe,{flag:_.flag,isAllHere:g.allHere,isSelected:g.selected}),I,b.node)}function $Ce(s,a){return ca(a,{displayName:"Aggregate Keyframe",menuItems:()=>{let l=s.editorProps.viewModel,h=s.editorProps.selection;return[{label:h?"Copy (selection)":"Copy",callback:()=>{if(h){let{projectId:m,sheetId:g}=l.type==="sheet"?l.sheet.address:l.sheetObject.address,b=PP(m,g,h);de().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(b)})}else{let m=s.utils.cur.keyframes.flatMap(E=>{var P;return(P=eB(L(B({},E.track.sheetObject.address),{trackId:E.track.id,keyframeIds:[E.kf.id]})))!=null?P:[]}),g=l.type==="sheet"?[]:l.type==="sheetObject"?[l.sheetObject.address.objectKey]:l.type==="propWithChildren"?[l.sheetObject.address.objectKey,...l.pathToProp]:[],b=sP([g,...m.map(E=>E.pathToProp)]),_=m.map(({keyframe:E,pathToProp:P})=>({keyframe:E,pathToProp:P.slice(b.length)}));de().transaction(E=>{E.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}}},{label:h?"Delete (selection)":"Delete",callback:()=>{h?h.delete():de().transaction(({stateEditors:m})=>{for(let g of s.utils.cur.keyframes)m.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},g.track.sheetObject.address),{keyframeIds:[g.kf.id],trackId:g.track.id}))})}}]}})}var p7,_B,KCe=C(()=>{p7=q(Fe()),Nr(),lm(),da(),HCe(),Me(),n5(),nc(),Zl(),RP(),_B=s=>s!==null}),r0e,f7,i0e,s0e,o0e,a0e,XCe=C(()=>{r0e=zt,f7=q(Fe()),ze(),VCe(),hB(),KCe(),s0e=ae.div(i0e||(i0e=J([`
  position: absolute;
`]))),o0e=f7.default.memo(s=>{let a=Hae(s);return f7.default.createElement(s0e,{style:{top:"".concat(s.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,r0e.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(a.cur.position,"px))")}},f7.default.createElement(WCe,{editorProps:s,utils:a}),f7.default.createElement(Xae,{editorProps:s,utils:a}))}),a0e=o0e});function qCe(s){let{layoutP:a,aggregatedKeyframes:l,viewModel:h}=s,m=cp("AggregatedKeyframeTrack"),[g,b]=Sr(null),{selectedPositions:_,selection:E}=YCe(a,l),[P,I,O]=JCe(b,s,()=>m._debug("see aggregatedKeyframes",s.aggregatedKeyframes)),R=(0,Z0.useMemo)(()=>[...l.byPosition.entries()].sort((Z,ie)=>Z[0]-ie[0]).map(([Z,ie])=>({position:Z,keyframes:ie,selected:_.get(Z),allHere:ie.length===l.tracks.length})),[l,_]),A=ir(VF),F=A.mode==="snapToAll",N=A.mode==="snapToSome"?A.positions:HN,V=(0,Z0.useMemo)(()=>h.type==="sheet"?WEe(h,N):OF(h,N),[N]).map(Z=>Z0.default.createElement(i7,{key:"snap-target-"+Z,layoutP:a,leaf:h,position:Z})),W=(0,Z0.useMemo)(()=>R.map(({position:Z,keyframes:ie},re)=>({position:Z,editorProps:{index:re,layoutP:a,viewModel:h,aggregateKeyframes:R,selection:_.has(Z)?E:void 0}})),[R,h,_]);rPe(b,Z=>{var ie;return(ie=W.find(re=>re.position===Z))==null?void 0:ie.editorProps},{onClickFromDrag(Z){}});let $=W.map((Z,ie)=>Z0.default.createElement(Z0.Fragment,{key:"agg-"+R[ie].keyframes[0].kf.id},F&&Z0.default.createElement(i7,{layoutP:a,leaf:h,position:Z.position}),Z0.default.createElement(a0e,B({},Z.editorProps))));return Z0.default.createElement(d0e,{ref:g,style:{background:O?"#444850 ":"unset"}},$,V,P)}function YCe(s,a){return Qn(()=>(0,fa.val)(ZCe(s,a)),[s,a])}function ZCe(s,a){return(0,fa.prism)(()=>{let l=(0,fa.val)(s.selectionAtom),h=(0,fa.val)(l.pointer.current);if(!h)return h0e;let m=new Map;for(let[g,b]of a.byPosition){let _=QCe(b,h);_!==void 0&&_!==UP&&m.set(g,_)}return{selectedPositions:m,selection:(0,fa.val)(l.pointer.current)}})}function QCe(s,a){var l,h,m;let g;for(let{track:b,kf:_}of s){let E=((m=(h=(l=a.byObjectKey[b.sheetObject.address.objectKey])==null?void 0:l.byTrackId[b.id])==null?void 0:h.byKeyframeId)==null?void 0:m[_.id])===!0;g===void 0?E?g=SB:g=UP:E?g===UP&&(g=EB):g===SB&&(g=EB)}return g}function JCe(s,a,l){return ca(s,{onOpen:l,displayName:"Aggregate Keyframe Track",menuItems:()=>{var h;let m=(h=(0,fa.pointerToPrism)(de().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?h:[];return[ePe(a,m)]}})}function ePe(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{let l=(0,fa.val)(s.layoutP.sheet).getSequence();s.viewModel.type==="sheet"?tPe(s.viewModel,a,l):nPe(s.viewModel,a,l)}}}function tPe(s,a,l){var h;let{projectId:m,sheetId:g,sheetInstanceId:b}=s.sheet.address;if(a.every(({pathToProp:_})=>_.length===0))for(let _ of s.children.map(E=>E.sheetObject)){let E=(0,fa.pointerToPrism)(de().atomP.historic.coreByProject[m].sheetsById[g].sequence.tracksByObject[_.address.objectKey]).getValue(),P=Object.keys((h=E==null?void 0:E.trackData)!=null?h:{});wB(_.address,P,a,l)}else{let _=(0,fa.pointerToPrism)(de().atomP.historic.coreByProject[m].sheetsById[g].sequence.tracksByObject).getValue(),E=a.map(({keyframe:P,pathToProp:I})=>{var O,R;let A=I[0],F=I.slice(1),N=tc([...F]),V=((R=(O=_==null?void 0:_[A])==null?void 0:O.trackIdByPropPath)!=null?R:{})[N];return V?{keyframe:P,trackId:V,address:{objectKey:A,projectId:m,sheetId:g,sheetInstanceId:b}}:null}).filter(P=>P!==null);l0e(E,l)}}function nPe(s,a,l){var h;let{projectId:m,sheetId:g,objectKey:b}=s.sheetObject.address,_=(0,fa.pointerToPrism)(de().atomP.historic.coreByProject[m].sheetsById[g].sequence.tracksByObject[b]).getValue();if(a.every(({pathToProp:E})=>E.length===0)){let E=Object.keys((h=_==null?void 0:_.trackData)!=null?h:{});if(s.type==="sheetObject")wB(s.sheetObject.address,E,a,l);else{let P=(_==null?void 0:_.trackIdByPropPath)||{},I=Object.entries(P).filter(([O,R])=>R!==void 0&&LEe(oP(O),s.pathToProp)).map(([O,R])=>R);wB(s.sheetObject.address,I,a,l)}}else{let E=(_==null?void 0:_.trackIdByPropPath)||{},P=s.type==="propWithChildren"?s.pathToProp:[],I=a.map(({keyframe:O,pathToProp:R})=>{let A=tc([...P,...R]),F=E[A];return F?{keyframe:O,trackId:F,address:s.sheetObject.address}:null}).filter(O=>O!==null);l0e(I,l)}}function wB(s,a,l,h){var m;h.position=h.closestGridPosition(h.position);let g=(m=u0e(l.map(({keyframe:b})=>b)))==null?void 0:m.position;de().transaction(({stateEditors:b})=>{for(let _ of a)for(let{keyframe:E}of l)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(L(B({},s),{trackId:_,position:h.position+E.position-g,handles:E.handles,value:E.value,snappingFunction:h.closestGridPosition,type:E.type}))})}function l0e(s,a){var l;a.position=a.closestGridPosition(a.position);let h=(l=u0e(s.map(({keyframe:m})=>m)))==null?void 0:l.position;de().transaction(({stateEditors:m})=>{for(let{keyframe:g,trackId:b,address:_}of s)m.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(L(B({},_),{trackId:b,position:a.position+g.position-h,handles:g.handles,value:g.value,snappingFunction:a.closestGridPosition,type:g.type}))})}function u0e(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}function rPe(s,a,l){let h=cp("useDragForAggregateKeyframeDot"),m=Wse(),g=(0,Z0.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(_){h._debug("onDragStart",{target:_.target});let E=Number(_.target.dataset.pos),P=a(E);if(!P)return h._debug("no props found for ",{positionToFind:E}),!1;m(!0,E);let I=(0,fa.prism)(Gae(P)).getValue().cur.keyframes,O=P.viewModel.type==="sheet"?P.viewModel.sheet.address:P.viewModel.sheetObject.address,R=(0,fa.val)(de().atomP.historic.coreByProject[O.projectId].sheetsById[O.sheetId].sequence.tracksByObject),A=Jse(R,function(W,{trackId:$,objectKey:Z}){var ie,re;return I.every(le=>W.id!==le.kf.id)&&!(P.selection&&(re=(ie=P.selection.byObjectKey[Z])==null?void 0:ie.byTrackId[$])!=null&&re.byKeyframeId[W.id])});if(Qse(A),P.selection&&P.aggregateKeyframes[P.index].selected===0){let{selection:W,viewModel:$}=P,Z=W.getDragHandlers(L(B({},O),{domNode:s,positionAtStartOfDrag:I[0].kf.position})).onDragStart(_);return Z&&L(B({},Z),{onClick:l.onClickFromDrag,onDragEnd:(...ie)=>{var re;(re=Z.onDragEnd)==null||re.call(Z,...ie),fm()}})}let F=P,N=(0,fa.val)(F.layoutP.scaledSpace.toUnitSpace),V;return{onDrag(W,$,Z){var ie;let re=Math.max((ie=ha.checkIfMouseEventSnapToPos(Z,{}))!=null?ie:I[0].kf.position+N(W),0);m(!0,re),V==null||V.discard(),V=void 0,V=de().tempTransaction(({stateEditors:le})=>{for(let Ce of I){let ye=Ce.kf;le.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},Ce.track.sheetObject.address),{trackId:Ce.track.id,keyframes:[L(B({},ye),{position:re})],snappingFunction:(0,fa.val)(F.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(W){m(!1,-1),W?V==null||V.commit():(V==null||V.discard(),l.onClickFromDrag(_)),fm()},onClick(W){l.onClickFromDrag(W)}}}}),[a,l.onClickFromDrag]),[b]=ji(s,g);return $0(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var fa,Z0,c0e,d0e,h0e,p0e,BP,xB,SB,EB,UP,CB=C(()=>{Pn(),fa=zt,Z0=q(Fe()),ze(),da(),Nr(),XCe(),Z3(),dp(),hB(),Zl(),ks(),yo(),l0(),Me(),nc(),mm(),tte(),mm(),Z3(),d0e=ae.div(c0e||(c0e=J([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),h0e=Object.freeze({selectedPositions:new Map,selection:void 0}),p0e=Z0.default.memo(qCe),BP=p0e,xB=(s=>(s[s.AllSelected=0]="AllSelected",s[s.AtLeastOneUnselected=1]="AtLeastOneUnselected",s[s.NoneSelected=2]="NoneSelected",s))(xB||{}),{AllSelected:SB,AtLeastOneUnselected:EB,NoneSelected:UP}=xB}),i5,PB,f0e,iPe=C(()=>{Pn(),i5=q(Fe()),NCe(),fP(),CB(),Z3(),dp(),PB=(s,a)=>s.type==="propWithChildren"?i5.default.createElement(f0e,{layoutP:a,viewModel:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}):i5.default.createElement(jae,{layoutP:a,leaf:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}),f0e=({viewModel:s,layoutP:a})=>{let l=cp("RightPropWithChildrenRow",s.pathToProp.join());return Qn(()=>{let h=lP(s);return i5.default.createElement(cZ,{logger:l},i5.default.createElement(J3,{leaf:s,node:i5.default.createElement(BP,{layoutP:a,aggregatedKeyframes:h,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(m=>PB(m,a))))},[s,a])}}),TB,m0e,g0e,sPe=C(()=>{Pn(),TB=q(Fe()),iPe(),fP(),Z3(),CB(),m0e=({leaf:s,layoutP:a})=>Qn(()=>{let l=lP(s);return TB.default.createElement(J3,{leaf:s,node:TB.default.createElement(BP,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(h=>PB(h,a)))},[s,a]),g0e=m0e}),zP,v0e,y0e,oPe=C(()=>{Pn(),zP=q(Fe()),sPe(),fP(),Z3(),CB(),v0e=({leaf:s,layoutP:a})=>Qn(()=>{let l=lP(s);return zP.default.createElement(J3,{leaf:s,node:zP.default.createElement(BP,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(h=>zP.default.createElement(g0e,{layoutP:a,key:"sheetObject-"+h.sheetObject.address.objectKey,leaf:h})))},[s,a]),y0e=v0e}),m7,wm,VP,b0e,_0e,w0e,x0e,S0e=C(()=>{Pn(),m7=zt,wm=q(Fe()),ze(),XEe(),coe(),oPe(),VP=1e6,_0e=ae.ul(b0e||(b0e=J([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),VP),w0e=({layoutP:s})=>Qn(()=>{let a=(0,m7.val)(s.tree),l=(0,m7.val)(s.tree.top)+Math.max((0,m7.val)(s.tree.heightIncludingChildren),(0,m7.val)(s.dopeSheetDims.height));return wm.default.createElement(wm.default.Fragment,null,wm.default.createElement(HF,{layoutP:s,height:l},wm.default.createElement(Rse,{layoutP:s,height:l},wm.default.createElement(_0e,{style:{top:a.top+"px"}},wm.default.createElement(y0e,{leaf:a,layoutP:s})))))},[s]),x0e=w0e});function MB(s,a,l,h){let m="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s,"px)"),g="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(a,") * 1px)");l===0&&(l=1e-4);let b="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(l,")");h===0&&(h=.001);let _="calc(var(--graphEditorVerticalSpace) * ".concat(h*-1,")");return"translate(".concat(m,", ").concat(g,") scale(").concat(b,", ").concat(_,")")}function aPe(s,a){let{index:l,trackData:h}=a,m=h.keyframes[l],g=h.keyframes[l+1];return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:b})=>{let{deleteKeyframes:_}=b.coreByProject.historic.sheetsById.sequence;_(L(B({},a.sheetObject.address),{trackId:a.trackId,keyframeIds:[m.id,g.id]}))})}}]})}var jP,E0e,C0e,P0e,T0e,M0e,kB=C(()=>{pp(),Me(),da(),Nr(),jP=q(Fe()),ze(),C0e=ae.path(E0e||(E0e=J([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),P0e="M 0 0 L 1 0 L 1 1",T0e=s=>{let{index:a,trackData:l}=s,h=l.keyframes[a],m=l.keyframes[a+1],g=m.position-h.position,[b,_]=Sr(null),[E]=aPe(_,s),P=s.isScalar?EC(h.value,s.propConfig):0,I=s.isScalar?EC(m.value,s.propConfig):1,O=s.extremumSpace.fromValueSpace(P),R=s.extremumSpace.fromValueSpace(I)-O,A=MB(h.position,O,g,R),F=h.handles[2],N=h.handles[3],V=m.handles[0],W=m.handles[1],$="M 0 0 C ".concat(F," ").concat(N," ").concat(V," ").concat(W," 1 1");return jP.default.createElement(jP.default.Fragment,null,jP.default.createElement(C0e,{ref:b,d:!h.type||h.type==="bezier"?$:P0e,style:{transform:A}}),E)},M0e=T0e});function lPe(s,a){let l=(0,xm.useRef)(a);l.current=a;let h=(0,xm.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let m,g=l.current,b=(0,g7.val)(g.layoutP.scaledSpace.toUnitSpace),_=(0,g7.val)(g.layoutP.graphEditorVerticalSpace.toExtremumSpace),E=g.extremumSpace.lock();return{onDrag(P,I){m&&(m.discard(),m=void 0);let{index:O,trackData:R}=g,A=R.keyframes[O],F=R.keyframes[O+1],N=b(P)/(F.position-A.position),V=-I,W=_(V),$=g.extremumSpace.deltaToValueSpace(W),Z=a.isScalar?A.value:0,ie=a.isScalar?F.value:1,re=$/(ie-Z);if(g.which==="left"){let le=Si(A.handles[2]+N,0,1),Ce=A.handles[3]+re;m=de().tempTransaction(({stateEditors:ye})=>{ye.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},g.sheetObject.address),{snappingFunction:(0,g7.val)(g.layoutP.sheet).getSequence().closestGridPosition,trackId:g.trackId,keyframes:[L(B({},A),{handles:[A.handles[0],A.handles[1],le,Ce]})]}))})}else{let le=Si(F.handles[0]+N,0,1),Ce=F.handles[1]+re;m=de().tempTransaction(({stateEditors:ye})=>{ye.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},g.sheetObject.address),{trackId:g.trackId,snappingFunction:(0,g7.val)(g.layoutP.sheet).getSequence().closestGridPosition,keyframes:[L(B({},F),{handles:[le,Ce,F.handles[2],F.handles[3]]})]}))})}},onDragEnd(P){E(),P?m&&m.commit():m&&m.discard()}}}}),[]);ji(s,h)}function uPe(s,a){return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var g7,xm,k0e,AB,A0e,I0e,R0e,D0e,O0e,IB,cPe=C(()=>{Me(),da(),ks(),Nr(),g7=zt,fi(),xm=q(Fe()),ze(),kB(),Fr(),AB=ae.circle(k0e||(k0e=J([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),I0e=ae.circle(A0e||(A0e=J([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),Rr,AB),D0e=ae.path(R0e||(R0e=J([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),O0e=s=>{let[a,l]=Sr(null),{index:h,trackData:m}=s,g=m.keyframes[h],b=m.keyframes[h+1],[_]=uPe(l,s);lPe(l,s);let E=s.which==="left"?g.handles[2]:b.handles[0],P=g.position+(b.position-g.position)*E,I=s.which==="left"?g.handles[3]:b.handles[1],O=s.isScalar?g.value:0,R=s.isScalar?b.value:1,A=O+(R-O)*I,F=s.extremumSpace.fromValueSpace(A),N=F-s.extremumSpace.fromValueSpace(s.which==="left"?O:R),V=MB(s.which==="left"?g.position:b.position,s.extremumSpace.fromValueSpace(s.which==="left"?O:R),P-(s.which==="left"?g.position:b.position),N);return xm.default.createElement("g",null,xm.default.createElement(I0e,{ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(P," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(F,") * 1px)")}}),xm.default.createElement(AB,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(P," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(F,") * 1px)")}}),xm.default.createElement(D0e,{d:"M 0 0 L 1 1",style:{transform:V}}),_)},IB=O0e});function dPe(s){let[a,l]=(0,Cp.useState)(!1);Sd(a,s.props.keyframe.position);let h=(0,Cp.useRef)(s.props);h.current=s.props;let m=(0,Cp.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(g){l(!0);let b=!!g.altKey,_=h.current,E=(0,HP.val)(_.layoutP.scaledSpace.toUnitSpace),P=(0,HP.val)(_.layoutP.graphEditorVerticalSpace.toExtremumSpace),I=_.extremumSpace.lock(),O;return{onDrag(R,A){let F=_.trackData.keyframes[_.index],N=E(R),V=-A,W=P(V),$=_.extremumSpace.deltaToValueSpace(W),Z=[],ie=L(B({},F),{position:F.position+N,value:F.value+$,handles:[...F.handles]});if(Z.push(ie),b){let re=_.trackData.keyframes[_.index-1];if(re&&Math.abs(F.value-re.value)>0){let Ce=L(B({},re),{handles:[...re.handles]});Z.push(Ce),Ce.handles[3]=pPe(re.handles[3],re.value,re.value,F.value,ie.value)}let le=_.trackData.keyframes[_.index+1];if(le&&Math.abs(F.value-le.value)>0){let Ce=L(B({},le),{handles:[...le.handles]});Z.push(Ce),Ce.handles[1]=fPe(Ce.handles[1],Ce.value,Ce.value,F.value,ie.value)}}O==null||O.discard(),O=de().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},_.sheetObject.address),{trackId:_.trackId,keyframes:Z,snappingFunction:(0,HP.val)(_.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(R){l(!1),I(),R?O==null||O.commit():(O==null||O.discard(),s.onDetectedClick(g))}}}}),[]);return ji(s.node,m),$0(a,"draggingPositionInSequenceEditor","move"),a}function hPe(s,a){return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}function pPe(s,a,l,h,m){return(h-a)*s/(m-l)}function fPe(s,a,l,h,m){return((a-h)*s+h-a+l-m)/(l-m)}var HP,Cp,L0e,RB,N0e,F0e,B0e,U0e,mPe=C(()=>{Me(),da(),ks(),Nr(),HP=zt,Cp=q(Fe()),ze(),yo(),yo(),Fr(),l0(),Zl(),RP(),lm(),RB=ae.circle(L0e||(L0e=J([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),F0e=ae.circle(N0e||(N0e=J([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),Rr,RB,fd),B0e=s=>{let[a,l]=Sr(null),{index:h,trackData:m}=s,g=m.keyframes[h],[b]=hPe(l,s),_=am(s.itemKey),E=g.value,P=s.extremumSpace.fromValueSpace(E),I=AP([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=dPe({node:l,props:s,onDetectedClick:R=>I.toggle(R,R.target instanceof Element?R.target:l)});return Cp.default.createElement(Cp.default.Fragment,null,Cp.default.createElement(F0e,L(B(B(B({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(P,") * 1px)")}},rc(g.position)),ha.includePositionSnapAttrs(g.position)),_.attrs),{className:O?"beingDragged":""})),Cp.default.createElement(RB,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(P,") * 1px)"),fill:_.flag===2?"white":void 0}}),I.node,b)},U0e=B0e});function gPe(s){let[a,l]=(0,Pp.useState)(!1);Sd(a,s.props.keyframe.position);let h=(0,Pp.useRef)(s.props);h.current=s.props;let m=(0,Pp.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(g){l(!0);let b=h.current,_=(0,DB.val)(b.layoutP.scaledSpace.toUnitSpace),E=b.extremumSpace.lock(),P;return{onDrag(I,O){let R=b.trackData.keyframes[b.index],A=_(I),F=[],N=L(B({},R),{position:R.position+A,value:R.value,handles:[...R.handles]});F.push(N),P==null||P.discard(),P=de().tempTransaction(({stateEditors:V})=>{V.coreByProject.historic.sheetsById.sequence.replaceKeyframes(L(B({},b.sheetObject.address),{trackId:b.trackId,keyframes:F,snappingFunction:(0,DB.val)(b.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(I){l(!1),E(),I?P==null||P.commit():(P==null||P.discard(),s.onDetectedClick(g))}}}}),[]);return ji(s.node,m),$0(a,"draggingPositionInSequenceEditor","ew-resize"),a}function vPe(s,a){return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(L(B({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var DB,Pp,z0e,OB,V0e,j0e,H0e,LB,yPe=C(()=>{Me(),da(),ks(),Nr(),DB=zt,Pp=q(Fe()),ze(),yo(),yo(),Fr(),l0(),Zl(),RP(),lm(),OB=ae.circle(z0e||(z0e=J([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),j0e=ae.circle(V0e||(V0e=J([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),Rr,OB,fd),H0e=s=>{let[a,l]=Sr(null),{index:h,trackData:m,itemKey:g}=s,b=m.keyframes[h],[_]=vPe(l,s),E=am(g),P=s.which==="left"?0:1,I=AP([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=gPe({node:l,props:s,onDetectedClick:A=>I.toggle(A,A.target instanceof Element?A.target:l)}),R=s.extremumSpace.fromValueSpace(P);return Pp.default.createElement(Pp.default.Fragment,null,Pp.default.createElement(j0e,L(B(B(B({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)")}},E.attrs),rc(b.position)),ha.includePositionSnapAttrs(b.position)),{className:O?"beingDragged":""})),Pp.default.createElement(OB,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)"),fill:E.flag===2?"white":void 0}}),I.node,_)},LB=H0e}),GP,G0e,W0e,$0e,K0e,bPe=C(()=>{GP=q(Fe()),ze(),kB(),W0e=ae.path(G0e||(G0e=J([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),$0e=s=>{let{index:a,trackData:l}=s,h="M 0 0 L 1 1",m=MB(l.keyframes[a].position,s.extremumSpace.fromValueSpace(0),0,s.extremumSpace.fromValueSpace(1)-s.extremumSpace.fromValueSpace(0));return GP.default.createElement(GP.default.Fragment,null,GP.default.createElement(W0e,{d:h,style:{transform:m}}))},K0e=$0e}),_o,X0e,q0e,Y0e,Z0e,Q0e,_Pe=C(()=>{_o=q(Fe()),ze(),kB(),cPe(),mPe(),yPe(),bPe(),q0e=ae.g(X0e||(X0e=J([`
  /* position: absolute; */
`]))),Y0e=_o.default.createElement(_o.default.Fragment,null),Z0e=s=>{let{index:a,trackData:l,isScalar:h}=s,m=l.keyframes[a],g=l.keyframes[a+1],b=m.connectedRight&&!!g&&g.value!==m.value;return _o.default.createElement(q0e,null,b?_o.default.createElement(_o.default.Fragment,null,_o.default.createElement(M0e,B({},s)),!m.type||m.type==="bezier"&&_o.default.createElement(_o.default.Fragment,null,_o.default.createElement(IB,L(B({},s),{which:"left"})),_o.default.createElement(IB,L(B({},s),{which:"right"})))):Y0e,h?_o.default.createElement(U0e,B({},s)):_o.default.createElement(_o.default.Fragment,null,_o.default.createElement(LB,L(B({},s),{which:"left"})),_o.default.createElement(LB,L(B({},s),{which:"right"})),_o.default.createElement(K0e,B({},s))))},Q0e=Z0e});function wPe(s,a){let l=1/0,h=-1/0;function m(g){l=Math.min(g,l),h=Math.max(g,h)}return s.forEach((g,b)=>{let _=EC(g.value,a);if(m(_),!g.connectedRight)return;let E=s[b+1];if(!E)return;let P=(typeof E.value=="number"?E.value:1)-_;m(_+g.handles[3]*P),m(_+E.handles[1]*P)}),[l,h]}function xPe(s){let a=0,l=1;function h(m){a=Math.min(m,a),l=Math.max(m,l)}return s.forEach((m,g)=>{if(!m.connectedRight)return;let b=s[g+1];b&&(h(m.handles[3]),h(b.handles[1]))}),[a,l]}var sc,J0e,ele,SPe=C(()=>{bd(),sc=q(Fe()),$P(),_Pe(),pp(),Pn(),J0e=sc.default.memo(({layoutP:s,trackData:a,sheetObject:l,trackId:h,color:m,pathToProp:g})=>{let b=SC(ir(l.template.configPointer),g);if(Ju(b))return console.error("Composite prop types cannot be keyframed"),sc.default.createElement(sc.default.Fragment,null);let[_,E]=(0,sc.useState)(!1),P=(0,sc.useMemo)(()=>{let A=new Set;return function(){let F=A.size===0;A.add(N),F&&E(!0);function N(){let V=A.size>0;A.delete(N),V&&A.size===0&&E(!1)}return N}},[]),I=(0,sc.useMemo)(()=>{let A=b.type==="number"?wPe(a.keyframes,b):xPe(a.keyframes),F=W=>(W-A[0])/(A[1]-A[0]),N=W=>A[0]+V(W),V=W=>W*(A[1]-A[0]);return{fromValueSpace:F,toValueSpace:N,deltaToValueSpace:V,lock:P}},[a.keyframes]),O=(0,sc.useRef)(void 0);_||(O.current=I);let R=a.keyframes.map((A,F)=>sc.default.createElement(Q0e,{pathToProp:g,propConfig:b,itemKey:zs.forTrackKeyframe(l,h,A.id),keyframe:A,index:F,trackData:a,layoutP:s,sheetObject:l,trackId:h,isScalar:b.type==="number",key:A.id,extremumSpace:O.current,color:m}));return sc.default.createElement("g",{style:{"--main-color":v7[m].iconColor}},R)}),ele=J0e}),tle,WP,nle,rle,EPe=C(()=>{Me(),Pn(),tle=zt,WP=q(Fe()),SPe(),nle=s=>Qn(()=>{let{sheetObject:a,trackId:l}=s,h=(0,tle.val)(de().atomP.historic.coreByProject[a.address.projectId].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[l]);return(h==null?void 0:h.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(h==null?void 0:h.type," is not yet supported on the graph editor")),WP.default.createElement(WP.default.Fragment,null)):WP.default.createElement(ele,L(B({},s),{trackData:h}))},[s.trackId,s.layoutP]),rle=nle});function ile({clippedSpaceRange:s,clippedSpaceWidth:a,fps:l,gapWidth:h=120},m){let g=1/l,b=s.end-s.start,_=a/(l*b),E=Math.floor(h/_),P=(E<l?sle(l).find(R=>R>=E):l*Math.floor(E/l))*g,I=Math.floor(s.start/P),O=Math.ceil(s.end/P);for(let R=I;R<=O;R++){let A=R*P,F=A%1===0;m(A,F)}}var sle,ole=C(()=>{fi(),sle=Dv(s=>{let a=[];for(let l=1;l<=s;l++)s%l===0&&a.push(l);return a})});function CPe(s){let{clippedSpaceWidth:a,height:l,ctx:h,unitSpaceToClippedSpace:m,snapToGrid:g}=s;h.clearRect(0,0,a,l),ile(s,(b,_)=>{let E=g(b),P=Math.floor(m(E));h.strokeStyle=_?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",h.beginPath(),h.moveTo(P,0),h.lineTo(P,l),h.stroke(),h.closePath()})}var Sm,Em,ale,lle,ule,cle,dle,hle,ple,fle,NB,mle=C(()=>{Sm=zt,Em=q(Fe()),ze(),ole(),Me(),lle=ae.div(ale||(ale=J([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),cle=ae.canvas(ule||(ule=J([`
  position: relative;
  left: 0;
`]))),dle=s=>{let a=s;return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},hle=()=>window.devicePixelRatio||1,ple=s=>hle()/dle(s),fle=({layoutP:s,width:a,height:l})=>{let h=(0,Em.useRef)(null),[m,g]=(0,Em.useState)(null),{ctx:b,ratio:_}=(0,Em.useMemo)(()=>{if(!m)return{};let E=m.getContext("2d"),P=ple(E);return{ctx:E,ratio:P}},[m]);return(0,Em.useLayoutEffect)(()=>{if(!b)return;m.width=a*_,m.height=l*_;let E=(0,Sm.prism)(()=>{let P=(0,Sm.val)(s.sheet).getSequence();return{ctx:b,clippedSpaceRange:(0,Sm.val)(s.clippedSpace.range),clippedSpaceWidth:(0,Sm.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,Sm.val)(s.clippedSpace.fromUnitSpace),height:l,leftPadding:(0,Sm.val)(s.scaledSpace.leftPadding),fps:P.subUnitsPerUnit,snapToGrid:I=>P.closestGridPosition(I)}}).onChange(de().ticker,P=>{b.save(),b.scale(_,_),CPe(P),b.restore()},!0);return()=>{E()}},[b,a,l,s]),Em.default.createElement(lle,{ref:h,style:{width:a+"px"}},Em.default.createElement(cle,{ref:g,style:{width:a+"px",height:l+"px"}}))},NB=fle}),oc,Cm,v7,gle,vle,yle,ble,_le,wle,$P=C(()=>{Me(),nc(),MC(),Pn(),oc=zt,Cm=q(Fe()),ze(),S0e(),coe(),EPe(),mle(),a0(),v7={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},vle=ae.div(gle||(gle=J([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),Hl(.03,"#1a1c1e")),ble=ae.svg(yle||(yle=J([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),_le=({layoutP:s})=>Qn(()=>{let a=(0,oc.val)(s.sheet),l=(0,oc.val)(de().atomP.historic.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].sequenceEditor.selectedPropsByObject),h=(0,oc.val)(s.graphEditorDims.height),m=(0,oc.val)(s.scaledSpace.fromUnitSpace)(1),g=[];if(l)for(let[_,E]of Object.entries(l)){let P=a.getObject(_);if(!P)continue;let I=(0,oc.val)(P.template.getMapOfValidSequenceTracks_forStudio());for(let[O,R]of Object.entries(E)){let A=oP(O),F=mp(I,A);F&&g.push(Cm.default.createElement(rle,{key:"graph-".concat(_,"-").concat(O),sheetObject:P,pathToProp:A,layoutP:s,trackId:F,color:R}))}}let b=(0,oc.val)(s.rightDims.width);return Cm.default.createElement(vle,{style:{width:b+"px",height:h+"px","--unitSpaceToScaledSpaceMultiplier":m,"--graphEditorVerticalSpace":"".concat((0,oc.val)(s.graphEditorVerticalSpace.space))}},Cm.default.createElement(NB,{layoutP:s,width:b,height:h}),Cm.default.createElement(HF,{layoutP:s,height:h},Cm.default.createElement(ble,{width:VP,height:h,viewBox:"0 0 ".concat(VP," ").concat(h)},Cm.default.createElement("g",{style:{transform:"translate(".concat((0,oc.val)(s.scaledSpace.leftPadding),"px, ").concat((0,oc.val)(s.graphEditorDims.padding.top),"px)")}},g))))},[s]),wle=_le}),xle,Q0,Sle,Ele,Cle,Ple,FB,Tle,Mle,kle,Ale,Ile,Rle,Dle,PPe=C(()=>{Me(),nc(),kC(),Pn(),xle=zt,Q0=q(Fe()),ze(),KN(),DC(),$P(),iP(),om(),use(),Sle={label:{color:"#9a9a9a"}},Cle=ae(TF)(Ele||(Ele=J([""]))),FB=ae(MF)(Ple||(Ple=J([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),Sle.label.color),Mle=ae.button(Tle||(Tle=J([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),s=>s.isSelected?v7[s.graphEditorColor].iconColor:gp.offColor),kle=()=>Q0.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Q0.default.createElement("g",{transform:"translate(0 100)"},Q0.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),Ile=ae.span(Ale||(Ale=J([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),fp,FB),Rle=({leaf:s})=>{var a;let l=I6(s.sheetObject.propsP,s.pathToProp),h=s.sheetObject,{controlIndicators:m}=$N(l,h,s.propConf),g=Qn(()=>{let R=s.sheetObject.address,A=tc(s.pathToProp);return(0,xle.val)(de().atomP.historic.projects.stateByProjectId[R.projectId].stateBySheetId[R.sheetId].sequenceEditor.selectedPropsByObject[R.objectKey][A])},[s]),b=(0,Q0.useRef)(!1),_=typeof g=="string";b.current=_;let E=(0,Q0.useCallback)(()=>{let R=s.sheetObject.address;de().transaction(({stateEditors:A})=>{b.current?A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(L(B({},R),{pathToProp:s.pathToProp})):(A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(L(B({},R),{pathToProp:s.pathToProp})),A.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[s]),P=(a=s.propConf.label)!=null?a:s.pathToProp[s.pathToProp.length-1],I=!0,O=(0,Q0.useRef)(null);return ase(O.current,s),Q0.default.createElement(Cle,{depth:s.depth},Q0.default.createElement(FB,{ref:O,isEven:s.n%2===0,style:{height:s.nodeHeight+"px"},isSelected:_===!0},Q0.default.createElement(Ile,null,P),m,Q0.default.createElement(Mle,{onClick:E,isSelected:_===!0,graphEditorColor:g??"1",style:{opacity:1},disabled:!I},Q0.default.createElement(kle,null))))},Dle=Rle});function BB(s,a){de().transaction(({stateEditors:l})=>{l.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(L(B({},a.sheetAddress),{studioSheetItemKey:a.sheetItemKey,isCollapsed:s}))})}var UB=C(()=>{Me()}),s5,zB,Ole,TPe=C(()=>{s5=q(Fe()),iP(),PPe(),UB(),zB=s=>{let a="prop"+s.pathToProp[s.pathToProp.length-1];return s.shouldRender?s.type==="propWithChildren"?s5.default.createElement(Ole,{leaf:s,key:a}):s5.default.createElement(Dle,{leaf:s,key:a}):s5.default.createElement(s5.default.Fragment,{key:a})},Ole=({leaf:s})=>s5.default.createElement(rP,{leaf:s,label:s.pathToProp[s.pathToProp.length-1],isCollapsed:s.isCollapsed,toggleCollapsed:()=>BB(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>zB(a)))}),Lle,Nle,Fle,MPe=C(()=>{Lle=q(Fe()),iP(),TPe(),UB(),Me(),Nle=({leaf:s})=>Lle.default.createElement(rP,{leaf:s,label:s.sheetObject.address.objectKey,isCollapsed:s.isCollapsed,toggleSelect:()=>{de().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set([s.sheetObject])})},toggleCollapsed:()=>BB(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>zB(a))),Fle=Nle}),VB,Ble,Ule,kPe=C(()=>{Pn(),VB=q(Fe()),MPe(),iP(),UB(),qte(),Ble=({leaf:s})=>Qn(()=>VB.default.createElement(rP,{leaf:s,label:s.sheet.address.sheetId,isCollapsed:s.isCollapsed,toggleCollapsed:()=>{BB(!s.isCollapsed,{sheetAddress:s.sheet.address,sheetItemKey:s.sheetItemKey})}},s.children.map(a=>VB.default.createElement(Fle,{key:"sheetObject-"+Kte(a.sheetObject),leaf:a}))),[s]),Ule=Ble}),jB,KP,zle,Vle,jle,Hle,Gle,Wle,APe=C(()=>{Pn(),jB=zt,KP=q(Fe()),ze(),kPe(),Vle=ae.div(zle||(zle=J([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),Hle=ae.ul(jle||(jle=J([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Gle=({layoutP:s})=>Qn(()=>{let a=(0,jB.val)(s.tree),l=(0,jB.val)(s.leftDims.width);return KP.default.createElement(Vle,{style:{width:l+"px",top:a.top+"px"}},KP.default.createElement(Hle,null,KP.default.createElement(Ule,{leaf:a})))},[s]),Wle=Gle}),HB,$le,Kle,Xle,qle,IPe=C(()=>{Fr(),kd(),Pn(),a0(),HB=q(Fe()),ze(),mle(),Kle=ae.div($le||($le=J([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>hc.rightBackground,Hl(.01,s6(1*.03,M3.panel.bg))),Xle=({layoutP:s})=>{let a=ir(s.rightDims.width),l=ir(s.panelDims.height);return HB.default.createElement(Kle,{style:{width:a+"px"}},HB.default.createElement(NB,{width:a,height:l,layoutP:s}))},qle=Xle}),o5,Yle,Zle,Qle,Jle,RPe=C(()=>{Pn(),o5=q(Fe()),ze(),APe(),IPe(),S0e(),Bse(),Zle=ae.div(Yle||(Yle=J([`
  position: absolute;
  left: 0;
  right: 0;
`]))),Qle=({layoutP:s})=>{let a=ir(s.dopeSheetDims.height);return o5.default.createElement(Zle,{style:{height:a+"px"}},o5.default.createElement(qle,{layoutP:s}),o5.default.createElement(Fse,null,o5.default.createElement(Wle,{layoutP:s}),o5.default.createElement(x0e,{layoutP:s})))},Jle=Qle});function DPe(s,a,l){return GB.prism.memo(s,()=>(0,GB.prism)(a),l).getValue()}var GB,OPe=C(()=>{GB=zt});function gi(s){return function(a,l){return s(a,l())}}function c0(s){return Object.freeze({audience:Pm(s,8)?"internal":Pm(s,16)?"dev":"public",category:Pm(s,4)?"troubleshooting":Pm(s,2)?"todo":"general",level:Pm(s,512)?512:Pm(s,256)?256:Pm(s,128)?128:64})}function Pm(s,a){return(s&a)===a}function vi(s,a){return((a&32)===32?!0:(a&16)===16?s.dev:(a&8)===8?s.internal:!1)&&s.min<=a}function eue(s=console,a={}){let l=L(B({},ac),{includes:B({},ac.includes)}),h={styled:FPe.bind(l,s),noStyle:UPe.bind(l,s)},m=NPe.bind(l);function g(){return l.loggingConsoleStyle&&l.loggerConsoleStyle?h.styled:h.noStyle}return l.create=g(),{configureLogger(b){var _;b==="console"?(l.loggerConsoleStyle=ac.loggerConsoleStyle,l.create=g()):b.type==="console"?(l.loggerConsoleStyle=(_=b.style)!=null?_:ac.loggerConsoleStyle,l.create=g()):b.type==="keyed"?(l.creatExt=E=>b.keyed(E.names),l.create=m):b.type==="named"&&(l.creatExt=LPe.bind(null,b.named),l.create=m)},configureLogging(b){var _,E,P,I,O;l.includes.dev=(_=b.dev)!=null?_:ac.includes.dev,l.includes.internal=(E=b.internal)!=null?E:ac.includes.internal,l.includes.min=(P=b.min)!=null?P:ac.includes.min,l.include=(I=b.include)!=null?I:ac.include,l.loggingConsoleStyle=(O=b.consoleStyle)!=null?O:ac.loggingConsoleStyle,l.create=g()},getLogger(){return l.create({names:[]})}}}function LPe(s,a){let l=[];for(let{name:h,key:m}of a.names)l.push(m==null?h:"".concat(h," (").concat(m,")"));return s(l)}function NPe(s){let a=B(B({},this.includes),this.include(s)),l=this.filtered,h=this.named.bind(this,s),m=this.creatExt(s),g=vi(a,524),b=vi(a,522),_=vi(a,521),E=vi(a,529),P=vi(a,545),I=vi(a,265),O=vi(a,268),R=vi(a,273),A=vi(a,289),F=vi(a,137),N=vi(a,145),V=vi(a,73),W=vi(a,81),$=g?m.error.bind(m,ja._hmm):l.bind(s,524),Z=b?m.error.bind(m,ja._todo):l.bind(s,522),ie=_?m.error.bind(m,ja._error):l.bind(s,521),re=E?m.error.bind(m,ja.errorDev):l.bind(s,529),le=P?m.error.bind(m,ja.errorPublic):l.bind(s,545),Ce=O?m.warn.bind(m,ja._kapow):l.bind(s,268),ye=I?m.warn.bind(m,ja._warn):l.bind(s,265),we=R?m.warn.bind(m,ja.warnDev):l.bind(s,273),Ne=A?m.warn.bind(m,ja.warnPublic):l.bind(s,273),lt=F?m.debug.bind(m,ja._debug):l.bind(s,137),ue=N?m.debug.bind(m,ja.debugDev):l.bind(s,145),Le=V?m.trace.bind(m,ja._trace):l.bind(s,73),Q=W?m.trace.bind(m,ja.traceDev):l.bind(s,81),He={_hmm:$,_todo:Z,_error:ie,errorDev:re,errorPublic:le,_kapow:Ce,_warn:ye,warnDev:we,warnPublic:Ne,_debug:lt,debugDev:ue,_trace:Le,traceDev:Q,lazy:{_hmm:g?gi($):$,_todo:b?gi(Z):Z,_error:_?gi(ie):ie,errorDev:E?gi(re):re,errorPublic:P?gi(le):le,_kapow:O?gi(Ce):Ce,_warn:I?gi(ye):ye,warnDev:R?gi(we):we,warnPublic:A?gi(Ne):Ne,_debug:F?gi(lt):lt,debugDev:N?gi(ue):ue,_trace:V?gi(Le):Le,traceDev:W?gi(Q):Q},named:h,utilFor:{internal(){return{debug:He._debug,error:He._error,warn:He._warn,trace:He._trace,named(Bt,Ie){return He.named(Bt,Ie).utilFor.internal()}}},dev(){return{debug:He.debugDev,error:He.errorDev,warn:He.warnDev,trace:He.traceDev,named(Bt,Ie){return He.named(Bt,Ie).utilFor.dev()}}},public(){return{error:He.errorPublic,warn:He.warnPublic,debug(Bt,Ie){He._warn('(public "debug" filtered out) '.concat(Bt),Ie)},trace(Bt,Ie){He._warn('(public "trace" filtered out) '.concat(Bt),Ie)},named(Bt,Ie){return He.named(Bt,Ie).utilFor.public()}}}}};return He}function FPe(s,a){let l=B(B({},this.includes),this.include(a)),h=[],m="";for(let E=0;E<a.names.length;E++){let{name:P,key:I}=a.names[E];if(m+=" %c".concat(P),h.push(this.style.css(P)),I!=null){let O="%c#".concat(I);m+=O,h.push(this.style.css(O))}}let g=this.filtered,b=this.named.bind(this,a),_=[m,...h];return tue(g,a,l,s,_,BPe(_),b)}function BPe(s){let a=s.slice(0);for(let l=1;l<a.length;l++)a[l]+=";background-color:#e0005a;padding:2px;color:white";return a}function UPe(s,a){let l=B(B({},this.includes),this.include(a)),h="";for(let _=0;_<a.names.length;_++){let{name:E,key:P}=a.names[_];h+=" ".concat(E),P!=null&&(h+="#".concat(P))}let m=this.filtered,g=this.named.bind(this,a),b=[h];return tue(m,a,l,s,b,b,g)}function tue(s,a,l,h,m,g,b){let _=vi(l,524),E=vi(l,522),P=vi(l,521),I=vi(l,529),O=vi(l,545),R=vi(l,265),A=vi(l,268),F=vi(l,273),N=vi(l,289),V=vi(l,137),W=vi(l,145),$=vi(l,73),Z=vi(l,81),ie=_?h.error.bind(h,...m):s.bind(a,524),re=E?h.error.bind(h,...m):s.bind(a,522),le=P?h.error.bind(h,...m):s.bind(a,521),Ce=I?h.error.bind(h,...m):s.bind(a,529),ye=O?h.error.bind(h,...m):s.bind(a,545),we=A?h.warn.bind(h,...g):s.bind(a,268),Ne=R?h.warn.bind(h,...m):s.bind(a,265),lt=F?h.warn.bind(h,...m):s.bind(a,273),ue=N?h.warn.bind(h,...m):s.bind(a,273),Le=V?h.info.bind(h,...m):s.bind(a,137),Q=W?h.info.bind(h,...m):s.bind(a,145),He=$?h.debug.bind(h,...m):s.bind(a,73),Bt=Z?h.debug.bind(h,...m):s.bind(a,81),Ie={_hmm:ie,_todo:re,_error:le,errorDev:Ce,errorPublic:ye,_kapow:we,_warn:Ne,warnDev:lt,warnPublic:ue,_debug:Le,debugDev:Q,_trace:He,traceDev:Bt,lazy:{_hmm:_?gi(ie):ie,_todo:E?gi(re):re,_error:P?gi(le):le,errorDev:I?gi(Ce):Ce,errorPublic:O?gi(ye):ye,_kapow:A?gi(we):we,_warn:R?gi(Ne):Ne,warnDev:F?gi(lt):lt,warnPublic:N?gi(ue):ue,_debug:V?gi(Le):Le,debugDev:W?gi(Q):Q,_trace:$?gi(He):He,traceDev:Z?gi(Bt):Bt},named:b,utilFor:{internal(){return{debug:Ie._debug,error:Ie._error,warn:Ie._warn,trace:Ie._trace,named(Re,$e){return Ie.named(Re,$e).utilFor.internal()}}},dev(){return{debug:Ie.debugDev,error:Ie.errorDev,warn:Ie.warnDev,trace:Ie.traceDev,named(Re,$e){return Ie.named(Re,$e).utilFor.dev()}}},public(){return{error:Ie.errorPublic,warn:Ie.warnPublic,debug(Re,$e){Ie._warn('(public "debug" filtered out) '.concat(Re),$e)},trace(Re,$e){Ie._warn('(public "trace" filtered out) '.concat(Re),$e)},named(Re,$e){return Ie.named(Re,$e).utilFor.public()}}}}};return Ie}var ja,ac,nue=C(()=>{ja={_hmm:c0(524),_todo:c0(522),_error:c0(521),errorDev:c0(529),errorPublic:c0(545),_kapow:c0(268),_warn:c0(265),warnDev:c0(273),warnPublic:c0(289),_debug:c0(137),debugDev:c0(145),_trace:c0(73),traceDev:c0(81)},ac={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(s,a,l){return this.create({names:[...s.names,{name:a,key:l}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(s){if(s.length<5)return s;let a=s.replace(this.collapseOnRE,"");return this.cssMemo.has(a)||this.cssMemo.set(a,this.css(s)),a},css(s){var a,l,h,m;let g=this.cssMemo.get(s);if(g)return g;let b="color:".concat((l=(a=this.color)==null?void 0:a.call(this,s))!=null?l:"hsl(".concat((s.charCodeAt(0)+s.charCodeAt(s.length-1))%360,", 100%, 60%)"));return(h=this.bold)!=null&&h.test(s)&&(b+=";font-weight:600"),(m=this.italic)!=null&&m.test(s)&&(b+=";font-style:italic"),this.cssMemo.set(s,b),b}}}}),WB,XP,qP=C(()=>{nue(),nue(),WB=eue(console,{_debug:function(){},_error:function(){}}),WB.configureLogging({dev:!0,min:64}),XP=WB.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),Tp,Tm,rue,zPe=C(()=>{bd(),Tp=zt,qP(),hd(),Tm=28,rue=(s,a)=>{var l;Tp.prism.ensurePrism();let h=!0,m=qE+Tm,g=0,b=a.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequence.collapsableItems,_=b.byId[zs.forSheet()].isCollapsed,E=(l=(0,Tp.pointerToPrism)(_).getValue())!=null?l:!1,P={type:"sheet",isCollapsed:E,sheet:s,children:[],sheetItemKey:zs.forSheet(),shouldRender:h,top:qE,depth:0,n:g,nodeHeight:h?Tm:0,heightIncludingChildren:-1};g+=1;for(let N of Object.values((0,Tp.val)(s.objectsP)))N&&I(N,P.children,P.depth+1,!E);P.heightIncludingChildren=m-P.top;function I(N,V,W,$){var Z;let ie=(0,Tp.val)(N.template.getMapOfValidSequenceTracks_forStudio()),re=(0,Tp.val)(N.template.configPointer);if(Object.keys(ie).length===0)return;let le=b.byId[zs.forSheetObject(N)].isCollapsed,Ce=(Z=(0,Tp.pointerToPrism)(le).getValue())!=null?Z:!1,ye={type:"sheetObject",isCollapsed:Ce,sheetItemKey:zs.forSheetObject(N),shouldRender:$,top:m,children:[],depth:W,n:g,sheetObject:N,nodeHeight:$?Tm:0,heightIncludingChildren:-1};V.push(ye),$&&(g+=1,m+=ye.nodeHeight),O(N,ie,[],re,ye.children,W+1,$&&!Ce),ye.heightIncludingChildren=m-ye.top}function O(N,V,W,$,Z,ie,re){for(let[le,Ce]of Object.entries(V)){let ye=$.props[le];R(N,Ce,[...W,le],ye,Z,ie,re)}}function R(N,V,W,$,Z,ie,re){$.type==="compound"?A(N,V,$,W,$,Z,ie,re):$.type==="enum"?XP.warn("Prop type enum is not yet supported in the sequence editor"):F(N,V,W,$,Z,ie,re)}function A(N,V,W,$,Z,ie,re,le){var Ce;let ye=b.byId[zs.forSheetObjectProp(N,$)].isCollapsed,we=(Ce=(0,Tp.pointerToPrism)(ye).getValue())!=null?Ce:!1,Ne={type:"propWithChildren",isCollapsed:we,propConf:W,pathToProp:$,sheetItemKey:zs.forSheetObjectProp(N,$),sheetObject:N,shouldRender:le,top:m,children:[],nodeHeight:le?Tm:0,heightIncludingChildren:-1,depth:re,trackMapping:V,n:g};ie.push(Ne),le&&(m+=Ne.nodeHeight,g+=1),O(N,V,$,Z,Ne.children,re+1,le&&!we),Ne.heightIncludingChildren=m-Ne.top}function F(N,V,W,$,Z,ie,re){let le={type:"primitiveProp",propConf:$,depth:ie,sheetItemKey:zs.forSheetObjectProp(N,W),sheetObject:N,pathToProp:W,shouldRender:re,top:m,nodeHeight:re?Tm:0,heightIncludingChildren:re?Tm:0,trackId:V,n:g};Z.push(le),g+=1,m+=le.nodeHeight}return P}});function VPe(s,a){let l=de(),h=l.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId],m=l.atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId];return(0,Ha.prism)(()=>{var g;let b=DPe("tree",()=>rue(s,l),[]),_=(0,Ha.val)(a),E=(0,Ha.val)(l.atomP.historic.panels.sequenceEditor.graphEditor),P=(0,Ha.val)(m.sequenceEditor.selectedPropsByObject),I=!!P&&Object.keys(P).length>0,{leftDims:O,rightDims:R,graphEditorDims:A,dopeSheetDims:F,horizontalScrollbarDims:N}=Ha.prism.memo("leftDims",()=>{var Ne;let lt={width:Math.floor(_.width*iue),height:_.height,screenX:_.screenX,screenY:_.screenY},ue={width:_.width-lt.width,height:_.height,screenX:_.screenX+lt.width,screenY:_.screenY},Le=I&&(E==null?void 0:E.isOpen)===!0,Q=Math.floor((Le?Si((Ne=E==null?void 0:E.height)!=null?Ne:.5,.1,.7):0)*_.heightWithoutBorder),He=0+Q,Bt=_.height-He,Ie={width:_.width,height:Bt,screenX:_.screenX,screenY:_.screenY},Re={isAvailable:I,isOpen:Le,width:ue.width,height:Q,screenX:_.screenX,screenY:_.screenY+Bt,padding:{top:20,bottom:20}};return{leftDims:lt,rightDims:ue,graphEditorDims:Re,dopeSheetDims:Ie,horizontalScrollbarDims:{bottom:0}}},[_,E,I]),V=Ha.prism.memo("graphEditorVerticalSpace",()=>{let Ne=A.height-A.padding.top-A.padding.bottom;return{space:Ne,fromExtremumSpace(lt){return lt*Ne},toExtremumSpace(lt){return lt/Ne}}},[A]),[W,$]=Ha.prism.state("isSeeking",!1),Z={isSeeking:W,setIsSeeking:$},ie={},re=(g=(0,Ha.val)(h.sequence.clippedSpaceRange))!=null?g:sue,le=Ha.prism.memo("scaledSpace",()=>{let Ne=re.end-re.start,lt=R.width,ue=Ne/lt,Le=lt/Ne;return{fromUnitSpace(Q){return Q*Le},toUnitSpace(Q){return Q*ue},leftPadding:10}},[re,R.width]),Ce=Ha.prism.memo("setClippedSpaceRange",()=>function(Ne){l.transaction(({stateEditors:lt})=>{let ue=B({},Ne);if(ue.end<=ue.start&&(ue.end=ue.start+1),ue.start<0){let Le=ue.end-ue.start;ue.start=0,ue.end=Le}lt.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(L(B({},s.address),{range:ue}))})},[]),ye=Ha.prism.memo("clippedSpace",()=>({range:re,width:R.width,fromUnitSpace(Ne){return le.fromUnitSpace(Ne-re.start)+le.leftPadding},toUnitSpace(Ne){return le.toUnitSpace(Ne-le.leftPadding)+re.start},setRange:Ce}),[re,R.width,le,Ce]),we=Ha.prism.memo("selection.current",()=>new Ha.Atom({}),[]);return PF("finalAtom",{sheet:s,tree:b,panelDims:_,leftDims:O,rightDims:R,dopeSheetDims:F,horizontalScrollbarDims:N,seeker:Z,unitSpace:ie,scaledSpace:le,clippedSpace:ye,graphEditorDims:A,graphEditorVerticalSpace:V,selectionAtom:we}).pointer})}var Ha,iue,sue,jPe=C(()=>{Me(),OPe(),ose(),Ha=zt,zPe(),fi(),iue=.2,sue={start:0,end:10}});function HPe(s){let{fullSecondStampsContainer:a,sequencePositionFormatter:l,snapToGrid:h,unitSpaceToClippedSpace:m}=s,g="";ile(s,(b,_)=>{let E=h(b),P=m(E);_?g+=oue(l.formatFullUnitForGrid(E),P,"full-unit"):g+=oue(l.formatSubUnitForGrid(E),P,"sub-unit")}),a.innerHTML=g}function oue(s,a,l){return'<span class="'.concat(l,'" style="transform: translate3d(').concat(a.toFixed(1),'px, -50%, 0);">').concat(s,"</span>")}var Mm,km,aue,lue,Mp,uue,cue,due,hue,pue,fue,mue=C(()=>{Mm=zt,a0(),km=q(Fe()),ze(),ole(),Me(),lue=ae.div(aue||(aue=J([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Mp={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return s6(.2,Mp.fullUnitStampColor)}},cue=ae.div(uue||(uue=J([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),hue=ae.div(due||(due=J([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Mp.fullUnitStampColor,Mp.stampFontSize,Mp.fullUnitStampColor,Mp.subUnitStampColor),pue=({layoutP:s,width:a})=>{let l=(0,km.useRef)(null),[h,m]=(0,km.useState)(null);return(0,km.useLayoutEffect)(()=>{if(h)return(0,Mm.prism)(()=>{let g=(0,Mm.val)(s.sheet).getSequence();return{fullSecondStampsContainer:h,clippedSpaceRange:(0,Mm.val)(s.clippedSpace.range),clippedSpaceWidth:(0,Mm.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,Mm.val)(s.clippedSpace.fromUnitSpace),leftPadding:(0,Mm.val)(s.scaledSpace.leftPadding),fps:g.subUnitsPerUnit,sequencePositionFormatter:g.positionFormatter,snapToGrid:b=>g.closestGridPosition(b)}}).onChange(de().ticker,HPe,!0)},[h,a,s]),km.default.createElement(lue,{ref:l,style:{width:a+"px"}},km.default.createElement(cue,{style:{width:a+"px"}},km.default.createElement(hue,{ref:m})))},fue=pue});function GPe(s){let[a,l]=(0,$B.useState)(!1);return(0,$B.useEffect)(()=>{if(l(!1),!s)return;let h=g=>{g.target===s?l(!0):l(!1)},m=()=>{l(!1)};return s.addEventListener("mouseenter",h),s.addEventListener("mousemove",h),s.addEventListener("mouseleave",m),()=>{l(!1),s.removeEventListener("mouseenter",h),s.removeEventListener("mousemove",h),s.removeEventListener("mouseleave",m)}},[s]),a}var $B,WPe=C(()=>{$B=q(Fe())});function $Pe(s,a){let l=0,[h,m]=s,[g,b]=a;return m-h>b-g?[g,b]:(h<g&&(l=0-h),m>b&&(l=b-m),[h+l,m+l])}var lc,kp,As,KB,gue,YP,vue,yue,bue=C(()=>{lc=zt,Pn(),Fr(),Me(),Im(),da(),ks(),Nr(),kp=q(Fe()),ze(),yo(),As={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},KB=1e3,YP=ae.div(gue||(gue=J([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>cc-1,s=>s.enabled?As.enabled.backgroundColor:As.disabled.backgroundColor,KB,As.hover.backgroundColor,As.dragging.backgroundColor,Rr),vue=({layoutP:s})=>{let a=(0,kp.useMemo)(()=>(0,lc.prism)(()=>{let{projectId:P,sheetId:I}=(0,lc.val)(s.sheet).address;return(0,lc.val)(de().atomP.ahistoric.projects.stateByProjectId[P].stateBySheetId[I].sequence.focusRange)}),[s]),[l,h]=Sr(null),[m]=ca(h,{menuItems:()=>{let P=(0,lc.val)(s.sheet),I=a.getValue();return[{label:"Delete focus range",callback:()=>{de().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(B({},P.address))}).commit()}},{label:I!=null&&I.enabled?"Disable focus range":"Enable focus range",callback:()=>{I!==void 0&&de().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(L(B({},P.address),{range:I.range,enabled:!I.enabled}))}).commit()}}]}}),g=ir(s.scaledSpace.toUnitSpace),b=ir(s.sheet),_=(0,kp.useMemo)(()=>{let P,I;return{debugName:"FocusRangeStrip",onDragStart(O){let R,A=a.getValue();if(!A)return!1;let F=A.range.start,N=A.range.end,V=!1,W=(0,lc.val)(s.sheet).getSequence();return{onDrag($){if(A=a.getValue(),A){V=!0;let Z=g($),ie=F+Z,re=N+Z;re<ie&&(re=ie),[P,I]=$Pe([ie,re],[0,W.length]).map(le=>W.closestGridPosition(le)),R&&R.discard(),R=de().tempTransaction(({stateEditors:le})=>{var Ce;le.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(L(B({},b.address),{range:{start:P,end:I},enabled:(Ce=A==null?void 0:A.enabled)!=null?Ce:!0}))})}},onDragEnd(){A&&(V&&R!==void 0?R.commit():R&&R.discard())}}},lockCSSCursorTo:"grabbing"}},[b,g]),[E]=ji(h,_);return Sd(E,-1),Qn(()=>{let P=a.getValue(),I=(P==null?void 0:P.range)||{start:0,end:0},O=(0,lc.val)(s.clippedSpace.fromUnitSpace)(I.start),R=(0,lc.val)(s.clippedSpace.fromUnitSpace)(I.end),A,F;return O<0&&(O=0),R>(0,lc.val)(s.clippedSpace.width)&&(R=(0,lc.val)(s.clippedSpace.width)),O>R?(F=0,A=0):(F=O,A=(R-O)/KB),P?kp.default.createElement(kp.default.Fragment,null,m,kp.default.createElement(YP,{id:"range-strip",enabled:P.enabled,className:"".concat(E?"dragging":""," ").concat(P.enabled?"enabled":""),ref:l,style:{transform:"translateX(".concat(F,"px) scale(").concat(A,", 1)")}})):kp.default.createElement(kp.default.Fragment,null)},[s,l,a,m,E])},yue=vue}),Ap,Pd,_ue,wue,xue,Sue,Eue,Cue,Pue,XB,KPe=C(()=>{Ap=zt,Pn(),Me(),Im(),l0(),ks(),Nr(),Pd=q(Fe()),ze(),yo(),bue(),Zl(),wue=ae.div(_ue||(_ue=J([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),s=>s.type==="start"?0:-As.thumbWidth,As.thumbWidth,()=>cc-1,({enabled:s})=>s?As.enabled.backgroundColor:As.disabled.backgroundColor,As.enabled.stroke,s=>s.type==="start"?"w-resize":"e-resize",fd,()=>YP,As.hover.backgroundColor,As.hover.stroke,()=>YP,As.dragging.backgroundColor,As.dragging.stroke,As.dragging.backgroundColor),Sue=ae.div(xue||(xue=J([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?90:-90,s=>s.type==="start"?As.thumbWidth:-As.thumbWidth+1),Cue=ae.div(Eue||(Eue=J([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?-90:90,()=>y7.backgroundColor,s=>s.type==="start"?-12:As.thumbWidth),Pue=({layoutP:s,thumbType:a})=>{var l;let[h,m]=Sr(null),g=(0,Pd.useMemo)(()=>(0,Ap.prism)(()=>{let{projectId:P,sheetId:I}=(0,Ap.val)(s.sheet).address;return(0,Ap.val)(de().atomP.ahistoric.projects.stateByProjectId[P].stateBySheetId[I].sequence.focusRange)}),[s]),b=(0,Pd.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let P,I,O=(0,Ap.val)(s.sheet),R={start:0,end:O.getSequence().length},A=g.getValue()||{range:R,enabled:!1},F=A.enabled,N=A.range[a],V=(0,Ap.val)(s.scaledSpace.toUnitSpace),W=V(As.rangeStripMinWidth);return{onDrag($,Z,ie){var re;let le,Ce=ha.checkIfMouseEventSnapToPos(ie,{ignore:m});if(Ce==null){let we=V($);le=N+we}else le=Ce;I=((re=g.getValue())==null?void 0:re.range)||R,a==="start"?le=Math.max(Math.min(le,I.end-W),0):le=Math.min(Math.max(le,I.start+W),O.getSequence().length);let ye=O.getSequence().closestGridPosition(le);P!==void 0&&P.discard(),P=de().tempTransaction(({stateEditors:we})=>{we.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(L(B({},O.address),{range:L(B({},I),{[a]:ye}),enabled:F}))})},onDragEnd($){$?P==null||P.commit():P==null||P.discard()}}}}),[s]),[_]=ji(m,b);$0(_,"draggingPositionInSequenceEditor",a==="start"?"w-resize":"e-resize");let E=ir(g);return Sd(_,(l=E==null?void 0:E.range[a])!=null?l:0),Qn(()=>{let P=g.getValue();if(!P)return null;let{enabled:I}=P,O=P.range[a],R=(0,Ap.val)(s.clippedSpace.fromUnitSpace)(O);return(R<0||(0,Ap.val)(s.clippedSpace.width)<R)&&(R=-1e4),Pd.default.createElement(wue,L(B(B({ref:h},ha.includePositionSnapAttrs(O)),rc(O)),{className:"".concat(_&&"dragging"," ").concat(I&&"enabled"),enabled:I,type:a,style:{transform:"translate3d(".concat(R,"px, 0, 0)")}}),Pd.default.createElement(Sue,{type:a,enabled:I}),Pd.default.createElement(Cue,{type:a}),Pd.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Pd.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Pd.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[s,h,g,_])},XB=Pue});function XPe(s,a){let[l,h]=(0,uc.useState)("none");return $0(l!=="none","dragging",l==="creating"?"ew-resize":"move"),(0,uc.useMemo)(()=>{let m=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(b){let _,E=(0,Am.val)(s.clippedSpace.toUnitSpace),P=(0,Am.val)(s.scaledSpace.toUnitSpace),I=(0,Am.val)(s.sheet),O=I.getSequence(),R=b.target.getBoundingClientRect(),A=E(b.clientX-R.left),F=P(As.rangeStripMinWidth);return{onDrag(N){let V=P(N),W=A,$=A+V;[W,$]=[Si(W,0,O.length),Si($,0,O.length)].map(Z=>O.closestGridPosition(Z)),$<W?[W,$]=[Math.max(Math.min($,W-F),0),W]:N>0&&($=Math.min(Math.max($,W+F),O.length)),_&&_.discard(),_=de().tempTransaction(({stateEditors:Z})=>{Z.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(L(B({},I.address),{range:{start:W,end:$},enabled:!0}))})},onDragEnd(N){N&&_!==void 0?_.commit():_&&_.discard()}}},lockCSSCursorTo:"ew-resize"}),g=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let b,_=a.current,E=a.current.addBoundsHighlightLock();return{onDrag(P,I){let O=L(B({},_.dims),{top:Si(_.dims.top+I,0,window.innerHeight-Gu),left:Si(_.dims.left+P,-_.dims.width+Gu,window.innerWidth-Gu)}),R=eP(O,{width:window.innerWidth,height:window.innerHeight});b==null||b.discard(),b=de().tempTransaction(({stateEditors:A})=>{A.studio.historic.panelPositions.setPanelPosition({position:R,panelId:_.panelId})})},onDragEnd(P){E(),P?b==null||b.commit():b==null||b.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(b){let[_,E]=b.shiftKey?["creating",m().onDragStart(b)]:["moving-panel",g().onDragStart(b)];return h(_),E===!1?!1:{onDrag(P,I,O,R,A){E.onDrag(P,I,O,R,A)},onDragEnd(P){var I;h("none"),(I=E.onDragEnd)==null||I.call(E,P)}}}}},[s,a])}var Am,uc,Tue,Mue,kue,Aue,qPe=C(()=>{Am=zt,Pn(),Me(),Y3(),Im(),l0(),ks(),WPe(),xse(),Nr(),fi(),uc=q(Fe()),ze(),bue(),KPe(),hd(),Mue=ae.div(Tue||(Tue=J([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>cc,s=>s.isShiftDown?"ew-resize":"move"),kue=({layoutP:s})=>{let[a,l]=Sr(null),h=q3(),m=(0,uc.useRef)(h);m.current=h;let g=(0,uc.useMemo)(()=>(0,Am.prism)(()=>{let{projectId:E,sheetId:P}=(0,Am.val)(s.sheet).address;return(0,Am.val)(de().atomP.ahistoric.projects.stateByProjectId[E].stateBySheetId[P].sequence.focusRange)}),[s]);ji(l,XPe(s,m));let b=_se("Shift"),_=GPe(l);return(0,uc.useEffect)(()=>{if(!b&&_)return m.current.addBoundsHighlightLock()},[!b&&_]),Qn(()=>uc.default.createElement(Mue,{ref:a,isShiftDown:b},uc.default.createElement(yue,{layoutP:s}),uc.default.createElement(XB,{thumbType:"start",layoutP:s}),uc.default.createElement(XB,{thumbType:"end",layoutP:s})),[s,g,b])},Aue=kue}),a5,cc,y7,Iue,Rue,Due,Oue,Im=C(()=>{Pn(),a5=q(Fe()),ze(),mue(),yo(),Fr(),qPe(),cc=18,y7={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},Rue=ae.div(Iue||(Iue=J([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),cc,y7.backgroundColor,y7.borderColor,Rr),Due=({layoutP:s})=>{let a=ir(s.rightDims.width);return a5.default.createElement(a5.default.Fragment,null,a5.default.createElement(Rue,B({},rc("hide")),a5.default.createElement(fue,{layoutP:s,width:a,height:cc}),a5.default.createElement(Aue,{layoutP:s})))},Oue=Due}),Rm,Lue,Nue,Fue,Bue,Uue,zue,Vue,jue,YPe=C(()=>{Rm=q(Fe()),ze(),Pn(),Me(),QL(),om(),Lue=s=>isFinite(s)&&s>0,Fue=ae.div(Nue||(Nue=J([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Uue=ae.div(Bue||(Bue=J([`
  `,`;
  white-space: nowrap;
`])),fp),zue=({deltaX:s})=>s*.25,Vue=({layoutP:s})=>{let a=ir(s.sheet),l=(0,Rm.useMemo)(()=>{let m;return{temporarilySetValue(g){m&&(m.discard(),m=void 0),m=de().tempTransaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(L(B({},a.address),{length:g}))})},discardTemporaryValue(){m&&(m.discard(),m=void 0)},permanentlySetValue(g){m&&(m.discard(),m=void 0),de().transaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(L(B({},a.address),{length:g}))})}}},[s,a]),h=(0,Rm.useRef)(null);return(0,Rm.useLayoutEffect)(()=>{h.current.focus()},[]),Qn(()=>{let m=a.getSequence().length;return Rm.default.createElement(Fue,null,Rm.default.createElement(Uue,null,"Sequence length"),Rm.default.createElement(iC,L(B({value:m},l),{isValid:Lue,inputRef:h,nudge:zue})))},[a,l,h])},jue=Vue});function ZPe(s,a){let l=(0,Ga.useRef)(a);l.current=a;let h=(0,Ga.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(g){let b,_=l.current,E=(0,Dm.val)(l.current.layoutP.sheet),P=E.getSequence().length,I=(0,Dm.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(O,R,A){let F=I(O);b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:N})=>{N.coreByProject.historic.sheetsById.sequence.setLength(L(B({},E.address),{length:P+F}))})},onDragEnd(O){O?b&&b.commit():b&&b.discard()}}}}),[]),[m]=ji(s,h);return Sd(m,-1),[m]}var Dm,Ga,qB,b7,Hue,Ip,Gue,Wue,$ue,Kue,Xue,que,Yue,Zue,Que,Jue,ece,QPe=C(()=>{Pn(),Dm=zt,Ga=q(Fe()),ze(),kd(),Im(),Nr(),ks(),Me(),qu(),yo(),F3(),YPe(),Fr(),Zu(),qB=1e3,b7={stripNormal:"#0000006c",stripActive:"#000000"},Ip=ae.div(Hue||(Hue=J([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>hc.lengthIndicatorStrip,cc,b7.stripNormal,b7.stripActive),Wue=ae.div(Gue||(Gue=J([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),cc-15),Kue=ae.div($ue||($ue=J([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),Rr,Ip,Ip,b7.stripActive),que=ae.div(Xue||(Xue=J([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),Rr,Ip,Ip,b7.stripActive),Zue=ae.div(Yue||(Yue=J([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),qB,()=>hc.lengthIndicatorCover,Ip,Ip),Que=-1e4,Jue=({layoutP:s})=>{let[a,l]=Sr(null),[h]=ZPe(l,{layoutP:s}),{node:m,toggle:g,close:b}=Xu({debugName:"LengthIndicator"},()=>Ga.default.createElement(Yu,null,Ga.default.createElement(jue,{layoutP:s,onRequestClose:b})));return Qn(()=>{let _=(0,Dm.val)(s.sheet),E=(0,Dm.val)(s.rightDims.height),P=_.getSequence(),I=P.length,O=I,R=(0,Dm.val)(s.clippedSpace.fromUnitSpace)(O),A=(0,Dm.val)(s.clippedSpace.width),F,N;return R>A?(N=0,F=0):(R<0&&(R=0),N=R,F=(A-R)/qB),Ga.default.createElement(Ga.default.Fragment,null,m,Ga.default.createElement(Ip,{style:{height:E+"px",transform:"translateX(".concat(N===0?Que:N,"px)")},className:h?"dragging":""},Ga.default.createElement(Wue,null,Ga.default.createElement(que,B({ref:a,onClick:V=>{g(V,l)}},rc("hide")),Ga.default.createElement(Vxe,null),Ga.default.createElement(jxe,null)),Ga.default.createElement(Kue,null,"Sequence length:"," ",P.positionFormatter.formatBasic(I)))),Ga.default.createElement(Zue,{title:"Length",style:{height:E+"px",transform:"translateX(".concat(N,"px) scale(").concat(F,", 1)")}}))},[s,a,h,m])},ece=Jue}),YB,Td,tce,nce,rce,ice,sce,oce,ace,lce,JPe=C(()=>{Pn(),YB=zt,Td=q(Fe()),ze(),mue(),kd(),Im(),yo(),nce=ae.div(tce||(tce=J([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),ice=ae.div(rce||(rce=J([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Mp.stampFontSize,Mp.fullUnitStampColor,y7.backgroundColor,()=>hc.currentFrameStamp),oce=ae.div(sce||(sce=J([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),ace=Td.default.memo(({layoutP:s})=>{let[a,l]=ir(Gse()),h=ir(s.clippedSpace.fromUnitSpace),{sequence:m,formatter:g,clippedSpaceWidth:b}=Qn(()=>{let I=(0,YB.val)(s.sheet).getSequence(),O=(0,YB.val)(s.clippedSpace.width);return{sequence:I,formatter:I.positionFormatter,clippedSpaceWidth:O}},[s]);if(a==-1)return Td.default.createElement(Td.default.Fragment,null);let _=l===3?m.closestGridPosition(a):a,E=h(_),P=E>=0&&E<=b;return Td.default.createElement(Td.default.Fragment,null,Td.default.createElement(nce,null,Td.default.createElement(ice,{style:{opacity:P?1:0,transform:"translate3d(calc(".concat(E,"px - 50%), 0, 0)")}},g.formatForPlayhead(_)),Td.default.createElement(oce,{posType:l,style:{opacity:P?1:0,transform:"translate3d(".concat(E,"px, 0, 0)")}}))," ")}),lce=ace}),Ql,ma,uce,cce,dce,hce,pce,ZP,fce,ZB,mce,QP,gce,JP,vce,QB,yce,bce,eTe=C(()=>{Pn(),Ql=zt,QS(),a0(),ma=q(Fe()),ze(),kd(),yo(),Fr(),ks(),cce=ae.div(uce||(uce=J([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>hc.horizontalScrollbar,Rr),hce=ae.div(dce||(dce=J([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),ZP=ae.div(pce||(pce=J([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),nL("absolute","-4px")),ZB=ae.div(fce||(fce=J([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),nL("absolute","0"),nL("absolute","-4px")),QP=ae(ZB)(mce||(mce=J([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),JP=ae(ZB)(gce||(gce=J([`
  cursor: e-resize;
  left: 0px;
`]))),QB=ae.div(vce||(vce=J([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),s=>s.active?"block":"none",QP,JP,ZP,QP,ZP,JP),yce=({layoutP:s})=>{let a=(0,ma.useCallback)(V=>V.toFixed(2),[]),l=(0,ma.useMemo)(()=>(0,Ql.prism)(()=>{let V=(0,Ql.val)(s.rightDims.width)-25,W=(0,Ql.val)(s.clippedSpace.range),$=(0,Ql.val)(s.sheet).getSequence().length,Z=Math.max(W.end,$),ie=W.start/Z*V,re=W.end/Z*V;return{rightWidth:V,clippedSpaceRange:W,sequenceLength:$,assumedLengthOfSequence:Z,rangeStartX:ie,rangeEndX:re,bottom:(0,Ql.val)(s.horizontalScrollbarDims.bottom)}}),[s]),{rangeStartX:h,rangeEndX:m,clippedSpaceRange:g,bottom:b}=ir(l),[_,E]=(0,ma.useState)("nothing"),P=(0,ma.useMemo)(()=>{let V=(0,Ql.val)(l),W=()=>{V=(0,Ql.val)(l)},$=Z=>Z/V.rightWidth*V.assumedLengthOfSequence;return{onRangeDragStart(){return W(),{onDrag(Z){E("both");let ie=$(Z),re=nd(V.clippedSpaceRange,le=>le+ie);(0,Ql.val)(s.clippedSpace.setRange)(re)},onDragEnd(){E("nothing")}}},onRangeStartDragStart(){return W(),{onDrag(Z){E("start");let ie=$(Z),re={start:V.clippedSpaceRange.start+ie,end:V.clippedSpaceRange.end};re.start>re.end-1&&(re.start=re.end-1),re.start<=0&&(re.start=0),(0,Ql.val)(s.clippedSpace.setRange)(re)},onDragEnd(){E("nothing")}}},onRangeEndDragStart(){return W(),{onDrag(Z){E("end");let ie=$(Z),re={start:V.clippedSpaceRange.start,end:V.clippedSpaceRange.end+ie};re.end<re.start+1&&(re.end=re.start+1),re.end>=V.assumedLengthOfSequence&&(re.end=V.assumedLengthOfSequence),(0,Ql.val)(s.clippedSpace.setRange)(re)},onDragEnd(){E("nothing")}}}}},[s,l]),[I,O]=(0,ma.useState)(null);ji(I,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:P.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[R,A]=(0,ma.useState)(null);ji(R,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:P.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[F,N]=(0,ma.useState)(null);return ji(F,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:P.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),ma.default.createElement(cce,B({style:{bottom:b+8+"px"}},rc("hide")),ma.default.createElement(hce,null,ma.default.createElement(ZP,{ref:O,style:{width:"".concat(m-h,"px"),transform:"translate3d(".concat(h,"px, 0, 0)")}}),ma.default.createElement(QP,{ref:A,style:{transform:"translate3d(".concat(h,"px, 0, 0)")}},ma.default.createElement(QB,{active:_==="both"||_==="start"},a(g.start))),ma.default.createElement(JP,{ref:N,style:{transform:"translate3d(".concat(m,"px, 0, 0)")}},ma.default.createElement(QB,{active:_==="both"||_==="end"},a(g.end)))))},bce=yce}),_ce,wce,xce,Sce,Ece,tTe=C(()=>{_ce=q(Fe()),ze(),xce=ae.div(wce||(wce=J([`
  position: absolute;
  inset: `,`px;
`])),s=>s.room*-1),Sce=s=>_ce.default.createElement(xce,{room:s.room}),Ece=Sce}),eT,tT,JB,Cce,Pce,Tce,Mce,kce,Ace,Ice,Rce,nTe=C(()=>{ze(),Pn(),QL(),om(),eT=q(Fe()),tT=q(Fe()),JB=zt,j9(),Cce=s=>isFinite(s)&&s>=0,Tce=ae.div(Pce||(Pce=J([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),kce=ae.div(Mce||(Mce=J([`
  `,`;
  white-space: nowrap;
`])),fp),Ace=({deltaX:s})=>s*.25,Ice=({layoutP:s,onRequestClose:a})=>{let l=(0,JB.val)(s.sheet),h=l.getSequence(),m=(0,eT.useMemo)(()=>{let b,_=h.position;return{temporarilySetValue(E){b&&(b=void 0),b=Si(E,0,h.length),h.position=b},discardTemporaryValue(){b&&(b=void 0,h.position=_,a("discardTemporaryValue"))},permanentlySetValue(E){b&&(b=void 0),h.position=Si(E,0,h.length),a("permanentlySetValue")}}},[s,h]),g=(0,eT.useRef)(null);return(0,eT.useLayoutEffect)(()=>{g.current.focus()},[]),Qn(()=>{let b=l.getSequence(),_=Number((0,JB.val)(b.pointer.position).toFixed(3));return tT.default.createElement(Tce,null,tT.default.createElement(kce,null,"Sequence position"),tT.default.createElement(iC,L(B({value:_},m),{isValid:Cce,inputRef:g,nudge:Ace})))},[l,m,g])},Rce=Ice}),Dce,rTe=C(()=>{Dce=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),Oce,iTe=C(()=>{rTe(),Oce=s=>Dce?s.metaKey===!0:s.ctrlKey===!0});function sTe(){nT=!1}function oTe(){nT=!0}function aTe(){let s=de();(0,Lce.useEffect)(()=>{let a=l=>{let h=l.composedPath()[0];if(!(h&&(h.tagName==="INPUT"||h.tagName==="TEXTAREA"))){if(l.key==="z"||l.key==="Z"||l.code==="KeyZ")if(Oce(l))l.shiftKey===!0?s.redo():s.undo();else return;else if(l.code==="Space"&&!l.shiftKey&&!l.metaKey&&!l.altKey&&!l.ctrlKey){if(!nT)return;let m=cxe();if(m)if(m.playing)m.pause();else{let{projectId:g,sheetId:b}=m.address,_=(0,Jl.prism)(()=>{let I=(0,Jl.val)(de().atomP.ahistoric.projects.stateByProjectId[g].stateBySheetId[b].sequence.focusRange);return Jl.prism.memo("shouldFollowFocusRange",()=>{let O=m.position;if(I){let R=O>=I.range.start&&O<=I.range.end;return I.enabled?!!R:!0}else return!0},[])&&I&&I.enabled?{range:[I.range.start,I.range.end],isFollowingARange:!0}:{range:[0,(0,Jl.val)(m.pointer.length)],isFollowingARange:!1}}),E=m.playDynamicRange((0,Jl.prism)(()=>(0,Jl.val)(_).range),de().ticker),P=eU(m);E.finally(()=>{P.set(void 0)}),P.set(_)}else return}else if(l.altKey&&(l.key==="\\"||l.code==="Backslash"||l.code==="IntlBackslash"))s.transaction(({stateEditors:m,drafts:g})=>{m.studio.ahistoric.setVisibilityState(g.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;l.preventDefault(),l.stopPropagation()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var Lce,Jl,nT,eU,Nce,tU=C(()=>{Lce=q(Fe()),Me(),iTe(),up(),Jl=zt,xC(),nT=!0,eU=P6(s=>new Jl.Atom(void 0)),Nce=P6(s=>(0,Jl.prism)(()=>{let a=eU(s).prism.getValue();if(a)return a.getValue().isFollowingARange;{let{projectId:l,sheetId:h}=s.address,m=(0,Jl.val)(de().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[h].sequence.focusRange);if(!m||!m.enabled)return!1;let g=(0,Jl.val)(s.pointer.position);return g>=m.range.start&&g<=m.range.end}}))});function lTe(s,a){return ca(s,{menuItems(){return[{label:"Place marker",callback:()=>{de().transaction(({stateEditors:l})=>{let h=(0,dc.val)(a.layoutP.sheet),m=h.getSequence();l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:h.address,markers:[{id:XSe(),position:m.position}],snappingFunction:m.closestGridPosition})})}}]}})}var dc,J0,Fce,Om,Bce,Uce,zce,nU,Vce,jce,Hce,Gce,Wce,$ce,uTe=C(()=>{tTe(),ks(),Nr(),Pn(),dc=zt,j9(),J0=q(Fe()),ze(),kd(),yo(),Fr(),qu(),Zu(),nTe(),tU(),l0(),da(),Me(),bd(),Zl(),mm(),Om=ae.div(Fce||(Fce=J([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>hc.playhead,s=>s.isVisible?"block":"none"),Uce=ae.div(Bce||(Bce=J([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),fd),nU=ae.div(zce||(zce=J([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),Rr,Om,Om,fd,Om),jce=ae.div(Vce||(Vce=J([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Om),Gce=ae.div(Hce||(Hce=J([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),nU,Om),Wce=({layoutP:s})=>{let[a,l]=Sr(null),{node:h,toggle:m,close:g}=Xu({debugName:"Playhead"},()=>J0.default.createElement(Yu,null,J0.default.createElement(Rce,{layoutP:s,onRequestClose:g}))),b=(0,J0.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let P=(0,dc.val)(s.sheet).getSequence(),I=P.position,O=(0,dc.val)(s.scaledSpace.toUnitSpace),R=(0,dc.val)(s.seeker.setIsSeeking);return R(!0),UF(),{onDrag(A,F,N){var V;let W=O(A);P.position=(V=ha.checkIfMouseEventSnapToPos(N,{ignore:l}))!=null?V:Si(I+W,0,P.length)},onDragEnd(A){R(!1),fm()},onClick(A){m(A,a.current)}}}}),[s,l]),[_]=ji(l,b);$0(_,"draggingPositionInSequenceEditor","ew-resize"),Sd(ir(s.seeker.isSeeking)||_,-1);let[E]=lTe(l,{layoutP:s});return Qn(()=>{let P=(0,dc.val)(s.seeker.isSeeking),I=(0,dc.val)(s.sheet).getSequence(),O=(0,dc.val)(Nce(I)),R=I.positionPrism.getValue(),A=(0,dc.val)(s.clippedSpace.fromUnitSpace)(R),F=A>=0&&A<=(0,dc.val)(s.clippedSpace.width);return J0.default.createElement(J0.default.Fragment,null,E,h,J0.default.createElement(Om,B({isVisible:F,style:{transform:"translate3d(".concat(A,"px, 0, 0)")},className:"".concat(P&&"seeking"," ").concat(O&&"playheadattachedtofocusrange")},rc("hide")),J0.default.createElement(nU,B({ref:a},ha.includePositionSnapAttrs(R)),J0.default.createElement(Ece,{room:8}),J0.default.createElement(jce,null),J0.default.createElement(Gce,null,I.positionFormatter.formatForPlayhead(I.closestGridPosition(R)))),J0.default.createElement(Uce,L(B({},ha.includePositionSnapAttrs(R)),{className:P?"seeking":""}))))},[s,a,h])},$ce=Wce}),Lm,_7,rT,Kce,Xce,qce,Yce,cTe=C(()=>{Lm=zt,Pn(),Me(),Im(),_7=q(Fe()),ze(),rT=1e3,Xce=ae.div(Kce||(Kce=J([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),cc,rT,s=>s.enabled?"#000000":"transparent"),qce=({layoutP:s})=>{let a=(0,_7.useMemo)(()=>(0,Lm.prism)(()=>{let{projectId:l,sheetId:h}=(0,Lm.val)(s.sheet).address;return(0,Lm.val)(de().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[h].sequence.focusRange)}),[s]);return Qn(()=>{let l=a.getValue();if(!l||!l.enabled)return null;let h=(0,Lm.val)(s.rightDims.height)-cc,m=(0,Lm.val)(s.clippedSpace.fromUnitSpace),g=(0,Lm.val)(s.clippedSpace.width),b=[];{let _=0,E=m(l.range.start),P,I;_>E?(I=0,P=0):(E>g&&(E=g),I=_,P=(E-_)/rT),b.push({translateX:I,scaleX:P})}{let _=m(l.range.end),E=g,P,I;_>E?(I=0,P=0):(_<0&&(_=0),I=_,P=(E-_)/rT),b.push({translateX:I,scaleX:P})}return _7.default.createElement(_7.default.Fragment,null,b.map(({translateX:_,scaleX:E},P)=>_7.default.createElement(Xce,{key:"curtain-".concat(P),enabled:!0,style:{height:"".concat(h,"px"),transform:"translateX(".concat(_,"px) scaleX(").concat(E,")")}})))},[s,a])},Yce=qce}),l5,Zce,Qce,Jce,ede,tde,dTe=C(()=>{l5=q(Fe()),ze(),Pn(),Me(),om(),sN(),Qce=ae.div(Zce||(Zce=J([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),ae.div(Jce||(Jce=J([`
  `,`;
  white-space: nowrap;
`])),fp),ede=({layoutP:s,marker:a})=>{var l;let h=ir(s.sheet),m=(0,l5.useMemo)(()=>{let b;return{temporarilySetValue(_){b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:E})=>{E.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:h.address,markerId:a.id,label:_})})},discardTemporaryValue(){b&&(b.discard(),b=void 0)},permanentlySetValue(_){b&&(b.discard(),b=void 0),de().transaction(({stateEditors:E})=>{E.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:h.address,markerId:a.id,label:_})})}}},[s,h]),g=(0,l5.useRef)(null);return(0,l5.useLayoutEffect)(()=>{g.current.focus()},[]),l5.default.createElement(Qce,null,l5.default.createElement(oC,L(B({value:(l=a.label)!=null?l:""},m),{isValid:()=>!0,inputRef:g})))},tde=ede});function hTe(s,a){return ca(s,{menuItems(){return[{label:"Remove marker",callback:()=>{de().transaction(({stateEditors:l})=>{l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:a.sheetAddress,markerId:a.markerId})})}}]}})}function pTe(s,a){let l=(0,ga.useRef)(a);l.current=a;let h=(0,ga.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(a.marker.id,")"),onDragStart(g){let b=l.current.marker,_=(0,iT.val)(a.layoutP.scaledSpace.toUnitSpace),E;return UF(),{onDrag(P,I,O){var R;let A=b,F=Math.max((R=ha.checkIfMouseEventSnapToPos(O,{ignore:s}))!=null?R:A.position+_(P),0);E==null||E.discard(),E=de().tempTransaction(({stateEditors:N})=>{N.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,iT.val)(a.layoutP.sheet.address),markers:[L(B({},A),{position:F})],snappingFunction:(0,iT.val)(a.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(P){P?E==null||E.commit():E==null||E.discard(),fm()}}}}),[]),[m]=ji(s,h);return Sd(m,a.marker.position),$0(m,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[m]}var iT,ga,rU,iU,nde,rde,ide,sde,ode,sT,ade,lde,ude,cde,dde,hde,fTe=C(()=>{iT=zt,Pn(),Me(),l0(),da(),Nr(),ga=q(Fe()),ze(),yo(),ks(),kd(),Zl(),cP(),Zse(),mm(),qu(),Zu(),dTe(),rU=12,iU=12,nde=rU*2,rde=iU*2,sde=ae.div(ide||(ide=J([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>hc.marker),sT=ae.div(ode||(ode=J([`
  position: absolute;
  `,`
  pointer-events: none;
`])),q0(rU,iU)),ade=ga.default.memo(()=>ga.default.createElement(sT,{children:ga.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ga.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),ude=ae.div(lde||(lde=J([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),ic.CSS,ic.CSS_WHEN_SOMETHING_DRAGGING,ic.BEING_DRAGGED_CLASS,fd,sT,ic.BEING_DRAGGED_CLASS,sT,q0(nde,rde)),cde=({layoutP:s,markerId:a})=>{let l=ir(s.sheet.address),h=ir(de().atomP.historic.projects.stateByProjectId[l.projectId].stateBySheetId[l.sheetId].sequenceEditor.markerSet.byId[a]);if(!h)return null;let m=ir(s.clippedSpace.width),g=ir(s.clippedSpace.fromUnitSpace)(h.position),b=g<=0||g>m,_=b?-1e4:g,E=b?0:1;return ga.default.createElement(sde,{style:{transform:"translateX(".concat(_,"px) scale(").concat(E,")")}},ga.default.createElement(hde,{marker:h,layoutP:s}))},dde=cde,hde=({layoutP:s,marker:a})=>{let l=ir(s.sheet.address),[h,m]=Sr(null),[g]=hTe(m,{sheetAddress:l,markerId:a.id}),[b]=pTe(m,{layoutP:s,marker:a}),{node:_,toggle:E,close:P}=Xu({debugName:"MarkerPopover"},()=>ga.default.createElement(Yu,null,ga.default.createElement(tde,{marker:a,layoutP:s,onRequestClose:P})));return ga.default.createElement(ga.default.Fragment,null,g,_,ga.default.createElement(ude,B({title:a.label?"Marker: ".concat(a.label):"Marker",ref:h,onClick:I=>{E(I,h.current)}},ic.reactProps({isDragging:b,position:a.position}))),ga.default.createElement(ade,null))}}),oT,pde,fde,mTe=C(()=>{Pn(),Me(),oT=q(Fe()),fTe(),pde=({layoutP:s})=>{let a=ir(s.sheet.address),l=de().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet,h=ir(l.allIds);return oT.default.createElement(oT.default.Fragment,null,h&&Object.keys(h).map(m=>oT.default.createElement(dde,{key:m,layoutP:s,markerId:m})))},fde=pde}),mde,Md,gde,vde,yde,bde,gTe=C(()=>{kd(),Pn(),mde=zt,Md=q(Fe()),ze(),QPe(),JPe(),eTe(),uTe(),Im(),cTe(),mTe(),vde=ae.div(gde||(gde=J([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>hc.rightOverlay),yde=({layoutP:s})=>Qn(()=>{let a=(0,mde.val)(s.rightDims.width);return Md.default.createElement(vde,{style:{width:a+"px"}},Md.default.createElement($ce,{layoutP:s}),Md.default.createElement(bce,{layoutP:s}),Md.default.createElement(lce,{layoutP:s}),Md.default.createElement(Oue,{layoutP:s}),Md.default.createElement(fde,{layoutP:s}),Md.default.createElement(ece,{layoutP:s}),Md.default.createElement(Yce,{layoutP:s}))},[s]),bde=yde}),_de,aT,wde,xde,Sde,Ede,vTe=C(()=>{_de=zt,Pn(),Me(),aT=q(Fe()),ze(),F3(),yo(),xde=ae.button(wde||(wde=J([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),Sde=({layoutP:s})=>{let a=ir(s.graphEditorDims.isOpen),l=(0,aT.useCallback)(()=>{let h=(0,_de.val)(s.graphEditorDims.isOpen);de().transaction(({stateEditors:m})=>{m.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!h})})},[s]);return aT.default.createElement(xde,B({onClick:l,title:"Toggle graph editor",className:a?"open":""},rc("hide")),aT.default.createElement(sSe,null))},Ede=Sde}),eu,Pi,Cde,Pde,Tde,Mde,hc,kde,Ade,Ide,Rde,Dde,Ode,Lde,Nde,Fde,kd=C(()=>{up(),Pn(),ose(),eu=zt,Pi=q(Fe()),ze(),RPe(),$P(),jPe(),gTe(),Y3(),die(),zie(),yo(),nt(),fi(),vTe(),hd(),lm(),Pde=ae(EF)(Cde||(Cde=J([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),k3.sequenceEditorPanel),Mde=ae.div(Tde||(Tde=J([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),hc=(()=>{let s={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},a=-1;for(let l of Object.keys(s))s[l]=a,a++;return s})(),Ade=ae(yF)(kde||(kde=J([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),Ide={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},Rde={width:800,height:200},Dde=s=>Pi.default.createElement(vF,{panelId:"sequenceEditor",defaultPosition:Ide,minDims:Rde},Pi.default.createElement(Ode,null)),Ode=()=>{let{dims:s}=q3(),[a,l]=(0,Pi.useState)(null);return Tee(a),Qn(()=>{let h=eu.prism.memo("panelSize",()=>{let R=s.width,A=s.height;return{width:R,height:A,widthWithoutBorder:R-2,heightWithoutBorder:A-4,screenX:s.left,screenY:s.top}},[s]),m=No(lp().filter(R=>pn(R)||wt(R)).map(R=>wt(R)?R.sheet:R));if(No(m.map(R=>R.template)).length!==1)return Pi.default.createElement(Pi.default.Fragment,null);let g=m[0];if(!g)return Pi.default.createElement(Pi.default.Fragment,null);let b=PF("panelSizeP",h).pointer,_=eu.prism.memo("key",()=>JSON.stringify(g.address),[g]),E=eu.prism.memo("layout",()=>VPe(g,b),[g,b]).getValue();if((0,eu.val)(E.tree.children).length===0)return Pi.default.createElement(Pi.default.Fragment,null);let P=eu.prism.memo("containerRef",Fde,[]),I=(0,eu.val)(E.graphEditorDims.isAvailable),O=(0,eu.val)(E.graphEditorDims.isOpen);return Pi.default.createElement(Pde,{ref:R=>{P(R),R!==a&&l(R)}},Pi.default.createElement(Mde,{style:{width:"".concat((0,eu.val)(E.leftDims.width),"px")}}),Pi.default.createElement(Kse,{layoutP:E},Pi.default.createElement(Lde,{layoutP:E}),Pi.default.createElement(Jle,{key:_+"-dopeSheet",layoutP:E}),O&&Pi.default.createElement(wle,{key:_+"-graphEditor",layoutP:E}),I&&Pi.default.createElement(Ede,{layoutP:E}),Pi.default.createElement(bde,{layoutP:E})))},[s,a])},Lde=({layoutP:s})=>Qn(()=>{let a=(0,eu.val)(s.sheet);return Pi.default.createElement(Ade,{style:{width:(0,eu.val)(s.leftDims.width)}},Pi.default.createElement(CL,null,Pi.default.createElement(ap,null,a.address.sheetId," "),Pi.default.createElement(h6,null,":"," "),Pi.default.createElement(ap,null,a.address.sheetInstanceId," "),Pi.default.createElement(h6,null," ",">"," "),Pi.default.createElement(ap,null,"Sequence")))},[s]),Nde=Dde,Fde=()=>{let s=null,a={passive:!1,capture:!1},l=h=>{Math.abs(h.deltaY)<Math.abs(h.deltaX)&&(h.preventDefault(),h.stopPropagation())};return h=>{s!==h&&s&&s.removeEventListener("wheel",l,a),s=h,h&&h.addEventListener("wheel",l,a)}}}),Nm,Bde,Ude,yTe=C(()=>{_xe(),fF(),Nm=q(Fe()),Me(),Pn(),OEe(),kd(),Bde=()=>{let s=ir(de().paneManager.allPanesD),a=Object.entries(s).map(([l,h])=>Nm.default.createElement(sse,{key:"pane-".concat(l),paneInstance:h}));return Nm.default.createElement(Nm.default.Fragment,null,a,Nm.default.createElement(XY,null),Nm.default.createElement(oie,null),Nm.default.createElement(Nde,null))},Ude=Bde}),zde,Vde,jde,bTe=C(()=>{ze(),jC(),Vde=ae($3)(zde||(zde=J([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),jde=Vde}),_Te=H((s,a)=>{var l,h;l=[],h=[];function m(g,b,_){var E,P,I,O,R,A,F,N;if(g===b)return 0;if(E=g.length,P=b.length,E===0)return P;if(P===0)return E;for(_&&(g=g.toLowerCase(),b=b.toLowerCase()),F=0;F<E;)h[F]=g.charCodeAt(F),l[F]=++F;for(N=0;N<P;)for(I=b.charCodeAt(N),O=R=N++,F=-1;++F<E;)A=I===h[F]?R:R+1,R=l[F],l[F]=O=R>O?A>O?O+1:A:A>R?R+1:A;return O}a.exports=m}),wTe=H((s,a)=>{var l=_Te();function h(){var m,g,b,_,E,P=0,I=arguments[0],O=arguments[1],R=O.length,A=arguments[2];A&&(_=A.threshold,E=A.ignoreCase),_===void 0&&(_=0);for(var F=0;F<R;++F)E?g=l(I,O[F],!0):g=l(I,O[F]),g>I.length?m=1-g/O[F].length:m=1-g/I.length,m>P&&(P=m,b=O[F]);return P>=_?b:null}a.exports=h});function xTe(s,a,l="Did you mean ",h="?"){let m=(0,Hde.default)(s,a,{threshold:.7});return m?l+JSON.stringify(m)+h:""}var Hde,STe=C(()=>{Hde=q(wTe())});function Gde(s,a){return s.length<=a?s:s.substr(0,a-3)+"..."}var ETe=C(()=>{}),Wde,sU,$de=C(()=>{ETe(),Wde=s=>typeof s=="string"?'string("'.concat(Gde(s,10),'")'):typeof s=="number"?"number(".concat(Gde(String(s),10),")"):s===null?"null":s===void 0?"undefined":typeof s=="boolean"?String(s):Array.isArray(s)?"array":typeof s=="object"?"object":"unknown",sU=Wde}),Kde,Xde,oU,qde=C(()=>{ze(),rm(),Xde=ae(Aq)(Kde||(Kde=J([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),oU=Xde}),u5,Yde,Zde,Qde,c5,w7=C(()=>{ze(),Fr(),u5=q(Fe()),H6(),nC(),ore(),qde(),Zde=ae.button(Yde||(Yde=J([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Rr,oU),Qde=u5.default.forwardRef((s,a)=>{var l=s,{title:h}=l,m=U(l,["title"]);let[g,b]=W3({enabled:typeof h=="string"},()=>u5.default.createElement(sF,null,h));return u5.default.createElement(u5.default.Fragment,null,g,u5.default.createElement(Zde,B({ref:tC([b,a])},m))," ")}),c5=Qde}),Jde,ehe,the,nhe,rhe,CTe=C(()=>{Jde=q(Fe()),w7(),ze(),Fr(),the=ae(c5)(ehe||(ehe=J([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Rr),nhe=({config:s,testId:a})=>{var l;return Jde.default.createElement(the,{onClick:s.onClick,"data-testid":a,title:s.title,dangerouslySetInnerHTML:{__html:(l=s.svgSource)!=null?l:""}})},rhe=nhe});function PTe({value:s,label:a,icon:l,onClick:h,isSelected:m}){return d5.default.createElement(d5.default.Fragment,null,d5.default.createElement(c5,{forwardedAs:Tq,className:m?"selected":void 0,"aria-label":a,onClick:h,title:a},l))}var d5,ihe,she,TTe=C(()=>{d5=q(Fe()),rm(),w7(),qde(),ihe=({value:s,onChange:a,options:l})=>d5.default.createElement(oU,null,l.map(({label:h,icon:m,value:g})=>d5.default.createElement(PTe,{key:g,value:g,isSelected:s===g,label:h,icon:m,onClick:()=>a(g)}))),she=ihe}),aU,ohe,ahe,lhe,uhe,MTe=C(()=>{aU=q(Fe()),ze(),Fr(),TTe(),ahe=ae.div(ohe||(ohe=J([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Rr),lhe=({config:s})=>aU.default.createElement(she,{onChange:s.onChange,options:s.options.map(({label:a,value:l,svgSource:h})=>({label:a,value:l,icon:aU.default.createElement(ahe,{dangerouslySetInnerHTML:{__html:h}})})),value:s.value}),uhe=lhe}),x7,che,dhe,hhe,phe,kTe=C(()=>{x7=q(Fe()),ze(),Fr(),w7(),vee(),qu(),dhe=ae.div(che||(che=J([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Rr),hhe=({config:s})=>{let a=(0,x7.useRef)(null),l=Xu(()=>{let h=a.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+s.label,constraints:{maxX:h.right,maxY:8,minX:h.left,minY:8},verticalGap:2}},()=>x7.default.createElement(ON,{items:s.items.map((h,m)=>({label:h.label,callback:()=>{var g;try{(g=h.onClick)==null||g.call(h)}catch(b){console.error(b)}}})),onRequestClose:()=>{l.close("clicked")}}));return x7.default.createElement(dhe,null,l.node,x7.default.createElement(c5,{ref:a,onClick:h=>{l.open(h,a.current)}},s.label))},phe=hhe});function ATe(s){return lU[s]}var S7,fhe,lU,mhe,ghe,ITe=C(()=>{STe(),$de(),S7=q(Fe()),CTe(),MTe(),kTe(),fhe=s=>S7.default.createElement(S7.default.Fragment,null,s.config.map((a,l)=>S7.default.createElement(mhe,{config:a,key:l}))),lU={Icon:rhe,Switch:uhe,Flyout:phe},mhe=({config:s})=>{let a=ATe(s.type);if(!a)throw new Error("No tool with tool.type ".concat(sU(s.type)," exists. Did you mean ").concat(xTe(s.type,Object.keys(lU))));return S7.default.createElement(a,{config:s})},ghe=fhe}),vhe,pc,yhe,bhe,_he,uU,whe,xhe,cU,She=C(()=>{vhe=zt,Pn(),Me(),pc=q(Fe()),ze(),ITe(),bhe=ae.div(yhe||(yhe=J([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),uU=ae.div(_he||(_he=J([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),whe=({extension:s,toolbarId:a})=>{var l;let h=(0,pc.useMemo)(()=>new vhe.Atom([]),[]),m=(l=s.toolbars)==null?void 0:l[a];(0,pc.useLayoutEffect)(()=>{let b=m==null?void 0:m(h.set.bind(h),de().publicApi);if(typeof b=="function")return b},[s,a,m]);let g=ir(h.prism);return pc.default.createElement(ghe,{config:g})},xhe=({toolbarId:s,showLeftDivider:a})=>{var l;let h=[],m=ir(de().atomP.ephemeral.extensions.byId),g=!1;for(let[,b]of Object.entries(m))!b||!((l=b.toolbars)!=null&&l[s])||(h.push(pc.default.createElement(pc.default.Fragment,{key:"extensionToolbar-"+b.id},g?pc.default.createElement(uU,null):void 0,pc.default.createElement(whe,{extension:b,toolbarId:s}))),g=!0);return h.length===0?null:pc.default.createElement(bhe,{"data-testid":"theatre-extensionToolbar-".concat(s)},a?pc.default.createElement(uU,null):void 0,h)},cU=xhe}),E7,Ehe,Che,Phe,lT,RTe=C(()=>{ze(),E7=q(Fe()),w7(),Che=ae(c5)(Ehe||(Ehe=J([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:s})=>s?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:s})=>s?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),Phe=(0,E7.forwardRef)((s,a)=>{var l=s,{children:h,hint:m,pinned:g,icon:b,pinHintIcon:_,unpinHintIcon:E}=l,P=U(l,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[I,O]=(0,E7.useState)(!1),R=I||m;return E7.default.createElement(Che,L(B({},P),{pinned:g,ref:a,onMouseOver:()=>O(!0),onMouseOut:()=>O(!1)}),E7.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},R&&!g?_:R&&g?E:b),h)}),lT=Phe});function DTe(s){return dU.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),dU.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var dU,hU,OTe=C(()=>{dU=q(Fe()),hU=DTe});function LTe(s){return pU.createElement("svg",B({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),pU.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var pU,fU,NTe=C(()=>{pU=q(Fe()),fU=LTe}),Is,The,Mhe,khe,mU,Ahe,Rp,Ihe,Rhe,Dhe,Ohe,Lhe,Nhe,Fhe,Bhe,Uhe,uT,zhe,Vhe,gU,vU,jhe,Hhe,FTe=C(()=>{Pn(),Me(),Is=q(Fe()),ze(),Mhe=ae.div(The||(The=J([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),mU=ae.div(khe||(khe=J([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Rp=ae(mU)(Ahe||(Ahe=J([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),Rhe=ae(mU)(Ihe||(Ihe=J([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),Ohe=ae.div(Dhe||(Dhe=J([`
  font-weight: 600;
`]))),Nhe=ae.div(Lhe||(Lhe=J([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),Bhe=ae.div(Fhe||(Fhe=J([`
  margin-left: 2px;
`]))),uT=ae.div(Uhe||(Uhe=J([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),Vhe=ae.div(zhe||(zhe=J([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),gU="0.7.0",vU=gU.match(/^[^\-]+/)[0],jhe=Is.default.forwardRef((s,a)=>{let l=ir(de().atomP.ahistoric.updateChecker.result.hasUpdates);return Is.default.createElement(Mhe,{ref:a},Is.default.createElement(Rp,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),Is.default.createElement(Rp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),Is.default.createElement(uT,null),Is.default.createElement(Rp,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),Is.default.createElement(Rp,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),Is.default.createElement(Rp,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),Is.default.createElement(uT,null),Is.default.createElement(Rhe,null,Is.default.createElement(Ohe,null,"Version"),Is.default.createElement(Nhe,null,Is.default.createElement(Bhe,null,gU," ",l===!0?"(outdated)":l===!1?"(latest)":""))),l===!0&&Is.default.createElement(Is.default.Fragment,null,Is.default.createElement(uT,null),Is.default.createElement(Rp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(vU)),className:"",target:"_blank"},"Update",Is.default.createElement(Vhe,null)),Is.default.createElement(Rp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(vU)),className:"",target:"_blank"},"What's new?")))}),Hhe=jhe}),ni,Ghe,Whe,$he,Khe,Xhe,qhe,yU,Yhe,bU,Zhe,_U,Qhe,Jhe,BTe=C(()=>{Pn(),Me(),ni=q(Fe()),ze(),H6(),bTe(),jC(),Ghe=zt,She(),RTe(),p6(),OTe(),NTe(),w7(),qu(),FTe(),Q6(),$he=ae.div(Whe||(Whe=J([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),Xhe=ae.div(Khe||(Khe=J([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),yU=ae.div(qhe||(qhe=J([`
  display: flex;
  gap: 8px;
`]))),bU=ae.div(Yhe||(Yhe=J([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:s})=>s==="info"?"#40aaa4":"#f59e0b"),ae.div(Zhe||(Zhe=J([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),_U=!1,Qhe=()=>{var s,a,l;let h=Qn(()=>{let N=(0,Ghe.val)(de().atomP.ephemeral.coreByProject);return Object.entries(N).map(([V,W])=>({projectId:V,state:W})).filter(({state:V})=>V.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[m,g]=W3({enabled:h.length>0,enterDelay:h.length>0?0:200},()=>h.length>0?ni.default.createElement(jde,null,h.length===1?'There is a state conflict in project "'.concat(h[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(h.length," projects that have state conflicts. They are highlighted in the outline below. ")):ni.default.createElement($3,null,ni.default.createElement(ni.default.Fragment,null,"Outline"))),b=(s=ir(de().atomP.ahistoric.pinOutline))!=null?s:!0,_=(a=ir(de().atomP.ahistoric.pinDetails))!=null?a:!0,E=ir(de().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,P=Xu(()=>{let N=I.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:N.right,maxY:8,minX:N.left-140,minY:8},verticalGap:2}},()=>ni.default.createElement(Hhe,null)),I=(0,ni.useRef)(null),O=(0,ni.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(_U||(_U=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),E||window.__IS_VISUAL_REGRESSION_TESTING?!0:E),[E]),{hasNotifications:R}=lF(),[A,F]=Mre();return ni.default.createElement($he,null,ni.default.createElement(yU,null,m,ni.default.createElement(lT,{ref:g,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{de().transaction(({stateEditors:N,drafts:V})=>{var W;N.studio.ahistoric.setPinOutline(!((W=V.ahistoric.pinOutline)==null||W))})},icon:ni.default.createElement(TL,null),pinHintIcon:ni.default.createElement(fU,null),unpinHintIcon:ni.default.createElement(hU,null),pinned:b}),h.length>0?ni.default.createElement(Xhe,null,h.length):null,ni.default.createElement(cU,{showLeftDivider:!0,toolbarId:"global"})),ni.default.createElement(yU,null,A,ni.default.createElement(lT,{ref:F,onClick:()=>{de().transaction(({stateEditors:N,drafts:V})=>{var W;N.studio.ahistoric.setPinNotifications(!((W=V.ahistoric.pinNotifications)!=null&&W))})},icon:ni.default.createElement(YE,null),pinHintIcon:ni.default.createElement(YE,null),unpinHintIcon:ni.default.createElement(YE,null),pinned:(l=ir(de().atomP.ahistoric.pinNotifications))!=null?l:!1},R&&ni.default.createElement(bU,{type:"warning"})),P.node,ni.default.createElement(c5,{ref:I,onClick:N=>{P.toggle(N,I.current)}},ni.default.createElement(Kq,null),O&&ni.default.createElement(bU,{type:"info"})),ni.default.createElement(lT,{ref:g,onClick:()=>{de().transaction(({stateEditors:N,drafts:V})=>{var W;N.studio.ahistoric.setPinDetails(!((W=V.ahistoric.pinDetails)==null||W))})},icon:ni.default.createElement($q,null),pinHintIcon:ni.default.createElement(hU,null),unpinHintIcon:ni.default.createElement(fU,null),pinned:_})))},Jhe=Qhe}),epe,C7,tpe,P7,npe,rpe,ipe,spe,ope=C(()=>{epe=zt,Pn(),C7=q(Fe()),tpe=q(Ll()),P7=new epe.Atom({set:{},byId:{}}),npe=1,rpe=()=>{let s=npe++;function a(h,m,g){P7.reduce(b=>({byId:L(B({},b.byId),{[s]:{comp:h,props:m,portalNode:g}}),set:L(B({},b.set),{[s]:!0})}))}function l(){P7.reduce(h=>{let m=B({},h.set),g=B({},h.byId);return delete m[s],{byId:g,set:m}})}return{mountOrRender:a,unmount:l}},ipe=()=>{let s=Object.keys(ir(P7.pointer.set));return C7.default.createElement(C7.default.Fragment,null,s.map(a=>C7.default.createElement(spe,{key:"id-"+a,id:a})))},spe=({id:s})=>{let{comp:a,portalNode:l,props:h}=ir(P7.pointer.byId[s]);return(0,tpe.createPortal)(C7.default.createElement(a,B({},h)),l)}});function UTe(s){let a=de(),[l,h]=Sr(void 0),m=eue();m.configureLogging({min:128,dev:xU,internal:xU});let g=m.getLogger().named("Theatre.js UIRoot");aTe();let b=ir(a.atomP.ahistoric.visibilityState);return(0,wo.useEffect)(()=>(b==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[b]),Qn(()=>{let _=(0,wU.val)(a.atomP.ahistoric.visibilityState);return(0,wU.val)(a.atomP.ephemeral.initialised)?wo.default.createElement(cZ,{logger:g},wo.default.createElement(hne,null,wo.default.createElement(Cxe,null,wo.default.createElement(hpe,null),wo.default.createElement(T3.Provider,{value:h},wo.default.createElement(EL,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:s.containerShadow},wo.default.createElement(wo.default.Fragment,null,wo.default.createElement(lpe,null),wo.default.createElement(cpe,{className:_==="everythingIsHidden"?"invisible":""},wo.default.createElement(SL,{ref:l}),wo.default.createElement(Jhe,null),wo.default.createElement(Ude,null),wo.default.createElement(kre,null)))))))):null},[a,l,h])}var wU,wo,ape,lpe,upe,cpe,dpe,xU,hpe,zTe=C(()=>{Me(),Pn(),wU=zt,wo=q(Fe()),ze(),yTe(),BTe(),Nr(),rm(),tU(),l0(),pne(),qL(),ope(),Fr(),qP(),dp(),Q6(),lpe=typeof window<"u"?V0(ape||(ape=J([`
  :host {
    contain: strict;
  }
`]))):{},cpe=ae(uZ)(upe||(upe=J([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),xU=/Playground.+Theatre\.js/.test((dpe=typeof document<"u"?document==null?void 0:document.title:null)!=null?dpe:""),hpe=()=>wo.default.createElement(ipe,null)}),VTe=H(s=>{var a=Ll();s.createRoot=a.createRoot,s.hydrateRoot=a.hydrateRoot}),ppe={};X(ppe,{default:()=>gpe});var fpe,mpe,gpe,jTe=C(()=>{zTe(),fpe=q(Fe()),mpe=q(VTe()),ope(),Fr(),She(),gpe=class{constructor(){xe(this,"containerEl",document.createElement("div")),xe(this,"_renderTimeout"),xe(this,"_documentBodyUIIsRenderedIn"),xe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let s=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let a=document.createElement("div");return a.id="theatrejs-faux-shadow-root",document.body.appendChild(a),a}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=s()}render(){let s=()=>{if(!document.body){this._renderTimeout=setTimeout(s,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),mpe.default.createRoot(this.containerShadow).render(fpe.default.createElement(UTe,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(s,10)}renderToolset(s,a){let l=rpe();return l.mountOrRender(Kwe(cU),{toolbarId:s},a),l.unmount}}}),HTe=H(s=>{s.compare=m,s.reduce=g;var a,l,h;s.REMOVE=a=-1,s.ADD=l=1,s.EQUAL=h=0;function m(I,O){var R=I.length,A=O.length,F=b(I,O),N=F<R&&F<A?_(I,O):0,V=N+F-1;R-=V,A-=V;for(var W=P(R,A),$=R-1;$>=0;--$)for(var Z=A-1;Z>=0;--Z)W[Z][$]=E(W,I,O,F,$,Z);return{prefix:F,matrix:W,suffix:N}}function g(I,O,R){var A,F,N,V,W=R.matrix,$=R.prefix;for(A=0;A<$;++A)O=I(O,h,A,A);for(N=A,$=W.length,A=0,F=0;A<$;)switch(V=W[A][F].type,O=I(O,V,A+N,F+N),V){case h:++A,++F;break;case a:++F;break;case l:++A;break}for(A+=N,F+=N,$=R.suffix,N=0;N<$;++N)O=I(O,h,A+N,F+N);return O}function b(I,O){for(var R=0,A=Math.min(I.length,O.length);R<A&&I[R]===O[R];)++R;return R}function _(I,O){for(var R=I.length-1,A=O.length-1,F=Math.min(R,A),N=0;N<F&&I[R-N]===O[A-N];)++N;return N}function E(I,O,R,A,F,N){return O[F+A]===R[N+A]?{value:I[N+1][F+1].value,type:h}:I[N][F+1].value<I[N+1][F].value?{value:I[N][F+1].value+1,type:a}:{value:I[N+1][F].value+1,type:l}}function P(I,O){var R=[],A,F,N;for(N=R[O]=[],F=0;F<I;++F)N[F]={value:I-F,type:a};for(A=0;A<O;++A)R[A]=[],R[A][I]={value:O-A,type:l};return R[O][I]={value:0,type:h},R}}),vpe=H(s=>{s.cons=a,s.tail=l,s.map=h;function a(m,g){var b=g.length,_=new Array(b+1);_[0]=m;for(var E=0;E<b;++E)_[E+1]=g[E];return _}function l(m){for(var g=m.length-1,b=new Array(g),_=0;_<g;++_)b[_]=m[_+1];return b}function h(m,g){for(var b=new Array(g.length),_=0;_<g.length;++_)b[_]=m(g[_]);return b}}),GTe=H((s,a)=>{a.exports=b;var l=/\/|~1|~0/g,h="/",m="~",g="~1";function b(_,E){var P,I,O,R;for(P=_.charAt(0)===h?1:0,I="",l.lastIndex=P;O=l.exec(_);)if(R=O[0],I+=_.slice(P,l.lastIndex-R.length),P=l.lastIndex,R===h){if(E(I)===!1)return _;I=""}else I+=R===g?h:m;return I+=_.slice(P),E(I),_}}),SU=H(s=>{var a=GTe();s.find=I,s.join=R,s.absolute=O,s.parse=A,s.contains=F,s.encodeSegment=V,s.decodeSegment=N,s.parseArrayIndex=Z,s.isValidArrayIndex=$;var l="/",h=/\//g,m="~1",g=/~1/g,b="~",_=/~/g,E="~0",P=/~0/g;function I(re,le,Ce,ye){if(typeof le=="string"){if(le==="")return{target:re,key:void 0};if(le===l)return{target:re,key:""};var we=re,Ne,lt=ye!==void 0;return a(le,function(ue){if(re==null)return we=null,!1;Array.isArray(re)?Ne=lt?ie(Ce,Z(ue),re,ye):ue==="-"?ue:Z(ue):Ne=ue,we=re,re=re[Ne]}),we===null?void 0:{target:we,key:Ne}}}function O(re){return re[0]===l?re:l+re}function R(re){return re.join(l)}function A(re){var le=[];return a(re,le.push.bind(le)),le}function F(re,le){return le.indexOf(re)===0&&le[re.length]===l}function N(re){return re.replace(g,l).replace(P,b)}function V(re){return re.replace(_,E).replace(h,m)}var W=/^(0|[1-9]\d*)$/;function $(re){return W.test(re)}function Z(re){if($(re))return+re;throw new SyntaxError("invalid array index "+re)}function ie(re,le,Ce,ye){var we=le;if(we<0)throw new Error("array index out of bounds "+we);if(ye!==void 0&&typeof re=="function"&&(we=re(le,Ce,ye),we<0))throw new Error("could not find patch context "+ye);return we}}),ype=H((s,a)=>{a.exports=l;function l(g){return g==null||typeof g!="object"?g:Array.isArray(g)?h(g):m(g)}function h(g){for(var b=g.length,_=new Array(b),E=0;E<b;++E)_[E]=l(g[E]);return _}function m(g){for(var b=Object.keys(g),_={},E,P=0,I=b.length;P<I;++P)E=b[P],_[E]=l(g[E]);return _}}),WTe=H((s,a)=>{a.exports=l;function l(g,b){return g===b?!0:Array.isArray(g)&&Array.isArray(b)?h(g,b):typeof g=="object"&&typeof b=="object"?m(g,b):!1}function h(g,b){if(g.length!==b.length)return!1;for(var _=0;_<g.length;++_)if(!l(g[_],b[_]))return!1;return!0}function m(g,b){if(g===null&&b!==null||g!==null&&b===null)return!1;var _=Object.keys(g),E=Object.keys(b);if(_.length!==E.length)return!1;for(var P=0,I;P<_.length;++P)if(I=_[P],!(I in b&&l(g[I],b[I])))return!1;return!0}}),$Te=H((s,a)=>{var l=SU();a.exports=function(I,O){var R=l.parse(I.path),A=l.parse(O.path),F=E(R,A),N=g(R,A,F.length),V=P(I),W=P(O);return F.length===0&&!N?[W,V]:N?m(V,R,W,A):h(V,R,W)};function h(I,O,R,A){if(I.path===R.path)throw new TypeError("cannot commute "+I.op+","+R.op+" with identical object paths");return[R,I]}function m(I,O,R,A){return O.length===A.length?b(I,O,R,A):(O.length>A.length?(O=_(R,A,I,O,-1),I.path=l.absolute(l.join(O))):(A=_(I,O,R,A,1),R.path=l.absolute(l.join(A))),[R,I])}function g(I,O,R){return l.isValidArrayIndex(I[R])&&l.isValidArrayIndex(O[R])}function b(I,O,R,A){var F=O.length-1,N=+O[F],V=+A[F],W;return N<V?I.op==="add"||I.op==="copy"?(W=A.slice(),W[F]=Math.max(0,V-1),R.path=l.absolute(l.join(W))):I.op==="remove"&&(W=A.slice(),W[F]=V+1,R.path=l.absolute(l.join(W))):R.op==="add"||R.op==="copy"?(W=O.slice(),W[F]=N+1,I.path=l.absolute(l.join(W))):N>V&&R.op==="remove"&&(W=O.slice(),W[F]=Math.max(0,N-1),I.path=l.absolute(l.join(W))),[R,I]}function _(I,O,R,A,F){var N=O.length-1,V=+O[N],W=+A[N],$=A.slice();return V>W||(I.op==="add"||I.op==="copy"?$[N]=Math.max(0,W-F):I.op==="remove"&&($[N]=Math.max(0,W+F))),$}function E(I,O){var R=I.length,A=O.length;if(R===0||A===0||R<2&&A<2)return[];for(var F=R===A?R-1:Math.min(R,A),N=0;N<F&&I[N]===O[N];)++N;return I.slice(0,N)}function P(I){return I.op==="remove"?{op:I.op,path:I.path}:I.op==="copy"||I.op==="move"?{op:I.op,path:I.path,from:I.from}:{op:I.op,path:I.path,value:I.value}}}),bpe=H((s,a)=>{a.exports=l;function l(h){Error.call(this),this.name=this.constructor.name,this.message=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),EU=H((s,a)=>{a.exports=l;function l(h){Error.call(this),this.name=this.constructor.name,this.message=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),_pe=H((s,a)=>{a.exports=l;function l(h){Error.call(this),this.name=this.constructor.name,this.message=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),wpe=H(s=>{var a=SU(),l=ype(),h=WTe(),m=$Te(),g=vpe(),b=bpe(),_=EU(),E=_pe(),P=a.find,I=a.parseArrayIndex;s.test={apply:O,inverse:R,commute:A},s.add={apply:F,inverse:V,commute:W},s.remove={apply:re,inverse:Ce,commute:ye},s.replace={apply:$,inverse:Z,commute:ie},s.move={apply:we,inverse:Ne,commute:lt},s.copy={apply:ue,inverse:Le,commute:W};function O(Ie,Re,$e){var Pt=P(Ie,Re.path,$e.findContext,Re.context),ce=Pt.target,ge,it;if(Array.isArray(ce)?(ge=I(Pt.key),it=ce[ge]):it=Pt.key===void 0?Pt.target:Pt.target[Pt.key],!h(it,Re.value))throw new b("test failed "+JSON.stringify(Re));return Ie}function R(Ie,Re){return Ie.push(Re),1}function A(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Re.op==="test"||Re.op==="replace"?[Re,Ie]:m(Ie,Re)}function F(Ie,Re,$e){var Pt=P(Ie,Re.path,$e.findContext,Re.context);if(Q(Pt))throw new _("path does not exist "+Re.path);if(Re.value===void 0)throw new _("missing value");var ce=l(Re.value);return Pt.key===void 0?ce:(N(Pt,ce),Ie)}function N(Ie,Re){var $e=Ie.target;if(Array.isArray($e))if(Ie.key==="-")$e.push(Re);else{if(Ie.key>$e.length)throw new _("target of add outside of array bounds");$e.splice(Ie.key,0,Re)}else if(Bt($e))$e[Ie.key]=Re;else throw new _("target of add must be an object or array "+Ie.key)}function V(Ie,Re){var $e=Re.context;return $e!==void 0&&($e={before:$e.before,after:g.cons(Re.value,$e.after)}),Ie.push({op:"test",path:Re.path,value:Re.value,context:$e}),Ie.push({op:"remove",path:Re.path,context:$e}),1}function W(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return m(Ie,Re)}function $(Ie,Re,$e){var Pt=P(Ie,Re.path,$e.findContext,Re.context);if(Q(Pt)||He(Pt))throw new _("path does not exist "+Re.path);if(Re.value===void 0)throw new _("missing value");var ce=l(Re.value);if(Pt.key===void 0)return ce;var ge=Pt.target;return Array.isArray(ge)?ge[I(Pt.key)]=ce:ge[Pt.key]=ce,Ie}function Z(Ie,Re,$e,Pt){var ce=Pt[$e-1];if(ce===void 0||ce.op!=="test"||ce.path!==Re.path)throw new E("cannot invert replace w/o test");var ge=ce.context;return ge!==void 0&&(ge={before:ge.before,after:g.cons(ce.value,g.tail(ge.after))}),Ie.push({op:"test",path:ce.path,value:Re.value}),Ie.push({op:"replace",path:ce.path,value:ce.value}),2}function ie(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Re.op==="test"||Re.op==="replace"?[Re,Ie]:m(Ie,Re)}function re(Ie,Re,$e){var Pt=P(Ie,Re.path,$e.findContext,Re.context);if(Q(Pt)||Pt.target[Pt.key]===void 0)throw new _("path does not exist "+Re.path);return le(Pt),Ie}function le(Ie){var Re=Ie.target,$e;if(Array.isArray(Re))return $e=Re.splice(I(Ie.key),1),$e[0];if(Bt(Re))return $e=Re[Ie.key],delete Re[Ie.key],$e;throw new _("target of remove must be an object or array")}function Ce(Ie,Re,$e,Pt){var ce=Pt[$e-1];if(ce===void 0||ce.op!=="test"||ce.path!==Re.path)throw new E("cannot invert remove w/o test");var ge=ce.context;return ge!==void 0&&(ge={before:ge.before,after:g.tail(ge.after)}),Ie.push({op:"add",path:ce.path,value:ce.value,context:ge}),2}function ye(Ie,Re){return Ie.path===Re.path&&Re.op==="remove"?[Re,Ie]:m(Ie,Re)}function we(Ie,Re,$e){if(a.contains(Re.path,Re.from))throw new _("move.from cannot be ancestor of move.path");var Pt=P(Ie,Re.path,$e.findContext,Re.context),ce=P(Ie,Re.from,$e.findContext,Re.fromContext);return N(Pt,le(ce)),Ie}function Ne(Ie,Re){return Ie.push({op:"move",path:Re.from,context:Re.fromContext,from:Re.path,fromContext:Re.context}),1}function lt(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return m(Ie,Re)}function ue(Ie,Re,$e){var Pt=P(Ie,Re.path,$e.findContext,Re.context),ce=P(Ie,Re.from,$e.findContext,Re.fromContext);if(Q(ce)||He(ce))throw new _("copy.from must exist");var ge=ce.target,it;return Array.isArray(ge)?it=ge[I(ce.key)]:it=ge[ce.key],N(Pt,l(it)),Ie}function Le(Ie,Re){throw new E("cannot invert "+Re.op)}function Q(Ie){return Ie===void 0||Ie.target==null&&Ie.key!==void 0}function He(Ie){return Ie.key!==void 0&&Ie.target[Ie.key]===void 0}function Bt(Ie){return Ie!==null&&typeof Ie=="object"}}),KTe=H(s=>{var a=wpe(),l=ype(),h=EU();s.apply=g,s.applyInPlace=b,s.clone=l,s.isValidObject=E,s.defaultHash=_;var m={};function g(I,O,R){return b(I,l(O),R)}function b(I,O,R){if(R||(R=m),!Array.isArray(I))return O;for(var A,F,N=0;N<I.length;++N){if(F=I[N],A=a[F.op],A===void 0)throw new h("invalid op "+JSON.stringify(F));O=A.apply(O,F,R)}return O}function _(I){return E(I)||P(I)?JSON.stringify(I):I}function E(I){return I!==null&&Object.prototype.toString.call(I)==="[object Object]"}function P(I){return Object.prototype.toString.call(I)==="[object Array]"}}),XTe=H((s,a)=>{var l=wpe();a.exports=function(m){var g=[],b,_;for(b=m.length-1;b>=0;b-=_)_=h(g,m[b],b,m);return g};function h(m,g,b,_){var E=l[g.op];return E!==void 0&&typeof E.inverse=="function"?E.inverse(m,g,b,_):1}}),qTe=H(s=>{var a=HTe(),l=vpe(),h=KTe(),m=XTe(),g=SU(),b=g.encodeSegment;s.diff=P,s.patch=h.apply,s.patchInPlace=h.applyInPlace,s.inverse=m,s.clone=h.clone,s.InvalidPatchOperationError=EU(),s.TestFailedError=bpe(),s.PatchNotInvertibleError=_pe();var _=h.isValidObject,E=h.defaultHash;function P(Z,ie,re){return O(Z,ie,"",I(re,[])).patch}function I(Z,ie){return typeof Z=="object"?{patch:ie,hash:V($,Z.hash,E),makeContext:V($,Z.makeContext,W),invertible:Z.invertible!==!1}:{patch:ie,hash:V($,Z,E),makeContext:W,invertible:!0}}function O(Z,ie,re,le){return Array.isArray(Z)&&Array.isArray(ie)?A(Z,ie,re,le):_(Z)&&_(ie)?R(Z,ie,re,le):N(Z,ie,re,le)}function R(Z,ie,re,le){var Ce=Object.keys(ie),ye=le.patch,we,Ne;for(we=Ce.length-1;we>=0;--we){Ne=Ce[we];var lt=re+"/"+b(Ne);Z[Ne]!==void 0?O(Z[Ne],ie[Ne],lt,le):ye.push({op:"add",path:lt,value:ie[Ne]})}for(Ce=Object.keys(Z),we=Ce.length-1;we>=0;--we)if(Ne=Ce[we],ie[Ne]===void 0){var ue=re+"/"+b(Ne);le.invertible&&ye.push({op:"test",path:ue,value:Z[Ne]}),ye.push({op:"remove",path:ue})}return le}function A(Z,ie,re,le){var Ce=l.map(le.hash,Z),ye=l.map(le.hash,ie),we=a.compare(Ce,ye);return F(Z,ie,re,le,we)}function F(Z,ie,re,le,Ce){var ye=0;return a.reduce(function(we,Ne,lt,ue){var Le,Q,He=we.patch,Bt=re+"/"+(ue+ye);return Ne===a.REMOVE?(Le=He[He.length-1],Q=we.makeContext(ue,Z),we.invertible&&He.push({op:"test",path:Bt,value:Z[ue],context:Q}),Le!==void 0&&Le.op==="add"&&Le.path===Bt?(Le.op="replace",Le.context=Q):He.push({op:"remove",path:Bt,context:Q}),ye-=1):Ne===a.ADD?(He.push({op:"add",path:Bt,value:ie[lt],context:we.makeContext(ue,Z)}),ye+=1):O(Z[ue],ie[lt],Bt,we),we},le,Ce)}function N(Z,ie,re,le){return Z!==ie&&(le.invertible&&le.patch.push({op:"test",path:re,value:Z}),le.patch.push({op:"replace",path:re,value:ie})),le}function V(Z,ie,re){return Z(ie)?ie:re}function W(){}function $(Z){return typeof Z=="function"}}),Fm=H((s,a)=>{function l(h,m){for(var g=0,b=m.length-1;g<b;g++){if(!h[m[g]])return null;h=h[m[g]]}return h}a.exports=l}),Dp=H((s,a)=>{function l(m){return m==="~0"?"~":"/"}function h(m){var g=m.split("/");if(m.indexOf("~")===-1)return g;for(var b=0,_=g.length;b<_;b++)g[b].indexOf("~")!==-1&&(g[b]=g[b].replace(/~[01]/g,l));return g}a.exports=h}),YTe=H((s,a)=>{var l=Fm(),h=Dp();function m(g,b){var _=h(b),E=_[_.length-1],P=l(g,_);return P?P[E]:void 0}a.exports=m}),cT=H((s,a)=>{function l(h,m){if(h===m)return!0;if(!(h&&m)||typeof h!="object"||typeof m!="object"||h.length!==m.length)return!1;if(Array.isArray(h)){if(!Array.isArray(m))return!1;for(var g=0,b=h.length;g<b;g++)if(!l(h[g],m[g]))return!1;return!0}var _=Object.keys(h);if(_.length!==Object.keys(m).length)return!1;for(var E=0,P=_.length;E<P;E++){var I=_[E];if(!l(h[I],m[I]))return!1}return!0}a.exports=l}),dT=H((s,a)=>{function l(h,m){if(m==="-")return h.length;for(var g=0,b=m.length;g<b;g++){var _=m.charCodeAt(g);if(57<_||_<48)return 1/0}return+m}a.exports=l}),hT=H((s,a)=>{var l=cT(),h=Fm(),m=dT(),g=Dp();function b(_,E,P,I){if(typeof P>"u")return"[op:add] require value, but got undefined";var O=g(E),R=O[O.length-1],A=h(_,O);if(A===null)return"[op:add] path not found: "+E;if(Array.isArray(A)){var F=m(A,R);if(A.length<F)return"[op:add] invalid array index: "+E;I(_,O).splice(F,0,P)}else l(A[R],P)||(I(_,O)[R]=P)}a.exports=b}),xpe=H((s,a)=>{var l=Fm(),h=dT(),m=Dp();function g(b,_,E){var P=m(_),I=P[P.length-1],O=l(b,P);if(O===null)return"[op:remove] path not found: "+_;if(Array.isArray(O)){var R=h(O,I);if(O.length<=R)return"[op:remove] invalid array index: "+_;E(b,P).splice(R,1)}else delete E(b,P)[I]}a.exports=g}),Spe=H((s,a)=>{var l=cT(),h=Fm(),m=dT(),g=Dp();function b(_,E,P,I){if(typeof P>"u")return"[op:replace] require value, but got undefined";var O=g(E),R=O[O.length-1],A=h(_,O);if(A===null)return"[op:replace] path not found: "+E;if(Array.isArray(A)){var F=m(A,R);if(A.length<=F)return"[op:replace] invalid array index: "+E;l(A[F],P)||I(_,O).splice(F,1,P)}else l(A[R],P)||(I(_,O)[R]=P)}a.exports=b}),Epe=H((s,a)=>{var l=hT(),h=Fm(),m=dT(),g=Dp();function b(_,E,P,I){if(P!==E){var O=g(E),R=O[O.length-1],A=h(_,O);if(A===null)return"[op:move] path not found: "+E;var F=void 0;if(Array.isArray(A)){var N=m(A,R);if(A.length<=N)return"[op:move] invalid array index: "+P;F=A[N],I(_,O).splice(N,1)}else F=A[R],delete I(_,O)[R];return l(_,P,F,I)}}a.exports=b}),Cpe=H((s,a)=>{var l=Fm(),h=Dp(),m=hT();function g(b,_,E,P){var I=h(_),O=I[I.length-1],R=l(b,I);return R===null?"[op:copy] path not found: "+_:m(b,E,R[O],P)}a.exports=g}),Ppe=H((s,a)=>{var l=cT(),h=Fm(),m=Dp();function g(b,_,E){var P=m(_),I=P[P.length-1],O=h(b,P);if(O===null)return"[op:test] path not found: "+_;if(!l(O[I],E)){var R=JSON.stringify(O[I]),A=JSON.stringify(E);return"[op:test] not matched: "+R+" "+A}}a.exports=g}),CU=H((s,a)=>{function l(h){if(!h||typeof h!="object")return h;if(Array.isArray(h)){for(var m=h.length,g=new Array(m),b=0;b<m;b++)g[b]=h[b];return g}for(var _=Object.keys(h),E={},P=0,I=_.length;P<I;P++){var O=_[P];E[O]=h[O]}return E}a.exports=l}),ZTe=H((s,a)=>{var l=YTe(),h=hT(),m=xpe(),g=Spe(),b=Epe(),_=Cpe(),E=Ppe(),P=cT(),I=CU(),O=Dp();function R(A,F){return{get:function(N){return l(A,N)},add:function(N,V){return h(A,N,V,F)},remove:function(N){return m(A,N,F)},replace:function(N,V){return g(A,N,V,F)},move:function(N,V){return b(A,N,V,F)},copy:function(N,V){return _(A,N,V,F)},test:function(N,V){return E(A,N,V)},deepEqual:P,shallowCopy:I,toKeys:O}}a.exports=R}),QTe=H((s,a)=>{function l(h,m,g,b){return b.error=g,b.partial?m[""]:h}a.exports=l}),JTe=H((s,a)=>{function l(h){return!!h}a.exports=l}),eMe=H((s,a)=>{function l(h){if(h)throw new TypeError(h)}a.exports=l}),tMe=H((s,a)=>{var l=CU();function h(m,g){for(var b=0,_=g.length-1;b<_;b++)m=m[g[b]]=l(m[g[b]]);return m}a.exports=h}),nMe=H((s,a)=>{var l=CU();function h(g,b,_){var E=g[b];return _.has(E)||(E=l(E),_.add(E)),E}function m(g,b,_){for(var E=0,P=b.length-1;E<P;E++)g=g[b[E]]=h(g,b[E],_);return g}a.exports=m}),rMe=H((s,a)=>{var l=ZTe(),h=QTe(),m=JTe(),g=eMe(),b=tMe(),_=nMe(),E=hT(),P=xpe(),I=Spe(),O=Epe(),R=Cpe(),A=Ppe(),F=Set||function(){var V=[];return V.has=function(W){return this.indexOf(W)!==-1},V.add=function(W){this.push(W)},V};function N(V,W,$){if(W.length===0)return V;$=$||{};for(var Z=$.strict?g:m,ie=W.length===1?b:function(Ne){return function(lt,ue){return _(lt,ue,Ne)}}(new F),re={"":V},le,Ce=0,ye=W.length;Ce<ye;Ce++){var we=W[Ce];switch(we.op){case"add":if(Z(E(re,""+we.path,we.value,ie)))return h(V,re,we,$);break;case"remove":if(Z(P(re,""+we.path,ie)))return h(V,re,we,$);break;case"replace":if(Z(I(re,""+we.path,we.value,ie)))return h(V,re,we,$);break;case"move":if(Z(O(re,""+we.from,""+we.path,ie)))return h(V,re,we,$);break;case"copy":if(Z(R(re,""+we.from,""+we.path,ie)))return h(V,re,we,$);break;case"test":if(Z(A(re,""+we.path,we.value)))return h(V,re,we,$);break;default:if($.custom&&$.custom[we.op]){if(le=le||l(re,ie),Z($.custom[we.op](le,we,Ce,W)))return h(V,re,we,$)}else return Z("[op:"+we.op+"] unknown"),h(V,re,we,$);break}}return re[""]}a.exports=N}),iMe=H((s,a)=>{a.exports=rMe()}),sMe=H((s,a)=>{(function(l,h){typeof s=="object"&&typeof a=="object"?a.exports=h():typeof s=="object"?s.blobCompare=h():l.blobCompare=h()})(window,function(){return function(l){var h={};function m(g){if(h[g])return h[g].exports;var b=h[g]={i:g,l:!1,exports:{}};return l[g].call(b.exports,b,b.exports,m),b.l=!0,b.exports}return m.m=l,m.c=h,m.d=function(g,b,_){m.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:_})},m.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},m.t=function(g,b){if(1&b&&(g=m(g)),8&b||4&b&&typeof g=="object"&&g&&g.__esModule)return g;var _=Object.create(null);if(m.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:g}),2&b&&typeof g!="string")for(var E in g)m.d(_,E,(function(P){return g[P]}).bind(null,E));return _},m.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return m.d(b,"a",b),b},m.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},m.p="",m(m.s=4)}([function(l,h,m){var g=function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(R,A){var F=[],N=!0,V=!1,W=void 0;try{for(var $,Z=R[Symbol.iterator]();!(N=($=Z.next()).done)&&(F.push($.value),!A||F.length!==A);N=!0);}catch(ie){V=!0,W=ie}finally{try{!N&&Z.return&&Z.return()}finally{if(V)throw W}}return F}(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b=function(){function I(O,R){for(var A=0;A<R.length;A++){var F=R[A];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(O,F.key,F)}}return function(O,R,A){return R&&I(O.prototype,R),A&&I(O,A),O}}();function _(I){if(Array.isArray(I)){for(var O=0,R=Array(I.length);O<I.length;O++)R[O]=I[O];return R}return Array.from(I)}var E=m(2),P=function(I){function O(R){(function(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")})(this,O);var A=function(F,N){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||typeof N!="object"&&typeof N!="function"?F:N}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return A._messageId=1,A._messages=new Map,A._worker=R,A._worker.onmessage=A._onMessage.bind(A),A._id=Math.ceil(1e7*Math.random()),A}return function(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);R.prototype=Object.create(A&&A.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(R,A):R.__proto__=A)}(O,I),b(O,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(R){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,F=this,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=arguments[3];return new Promise(function(W,$){var Z=F._messageId++;F._messages.set(Z,[W,$,V]),F._worker.postMessage([Z,A,R],N||[])})}},{key:"postMessage",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,A=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],N=arguments[2];return new Promise(function(V,W){var $=A._messageId++;A._messages.set($,[V,W,N]),A._worker.postMessage([$,R],F||[])})}},{key:"emit",value:function(R){for(var A=arguments.length,F=Array(A>1?A-1:0),N=1;N<A;N++)F[N-1]=arguments[N];this._worker.postMessage({eventName:R,args:F})}},{key:"_onMessage",value:function(R){var A;if(!Array.isArray(R.data)&&R.data.eventName)return(A=function $(Z,ie,re){Z===null&&(Z=Function.prototype);var le=Object.getOwnPropertyDescriptor(Z,ie);if(le===void 0){var Ce=Object.getPrototypeOf(Z);return Ce===null?void 0:$(Ce,ie,re)}if("value"in le)return le.value;var ye=le.get;return ye!==void 0?ye.call(re):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this)).call.apply(A,[this,R.data.eventName].concat(_(R.data.args)));var F,N=(F=R.data,Array.isArray(F)?F:Array.from(F)),V=N[0],W=N.slice(1);if(V===1)this._onEvent.apply(this,_(W));else{if(V!==0)throw new Error("Wrong message type '"+V+"'");this._onResult.apply(this,_(W))}}},{key:"_onResult",value:function(R,A,F){var N=this._messages.get(R),V=g(N,2),W=V[0],$=V[1];return this._messages.delete(R),A===1?W(F):$(F)}},{key:"_onEvent",value:function(R,A,F){var N=this._messages.get(R),V=g(N,3)[2];V&&V(A,F)}}]),O}(E);l.exports=P},function(l,h,m){l.exports=function(){return m(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(l,h,m){var g=function(){function _(E,P){for(var I=0;I<P.length;I++){var O=P[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}return function(E,P,I){return P&&_(E.prototype,P),I&&_(E,I),E}}(),b=function(){function _(){(function(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")})(this,_),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return g(_,[{key:"emit",value:function(E){if(!this.__listeners[E])return this;for(var P=arguments.length,I=Array(P>1?P-1:0),O=1;O<P;O++)I[O-1]=arguments[O];var R=!0,A=!1,F=void 0;try{for(var N,V=this.__listeners[E][Symbol.iterator]();!(R=(N=V.next()).done);R=!0){var W=N.value;W.apply(void 0,I)}}catch($){A=!0,F=$}finally{try{!R&&V.return&&V.return()}finally{if(A)throw F}}return this}},{key:"once",value:function(E,P){var I=this,O=function R(){I.off(E,R),P.apply(void 0,arguments)};return this.on(E,O)}},{key:"on",value:function(E,P){return this.__listeners[E]||(this.__listeners[E]=[]),this.__listeners[E].push(P),this}},{key:"off",value:function(E,P){return this.__listeners[E]=P?this.__listeners[E].filter(function(I){return I!==P}):[],this}}]),_}();l.exports=b},function(l,h,m){var g=window.URL||window.webkitURL;l.exports=function(b,_){try{try{var E;try{(E=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(b),E=E.getBlob()}catch{E=new Blob([b])}return new Worker(g.createObjectURL(E))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(b))}}catch{if(!_)throw Error("Inline worker is not supported");return new Worker(_)}}},function(l,h,m){m.r(h);var g=m(0),b=m.n(g),_=m(1),E=m.n(_);m.d(h,"workersEnabled",function(){return P}),m.d(h,"default",function(){return I});let P=!!window.Worker;class I{static toBinaryStringWithWorker(R,A){return ne(this,null,function*(){let F=new b.a(new E.a),N=yield F.exec("binary",{blob:R,chunk:A});return F.terminate(),N})}static toBinaryStringWithoutWorker(R,A){return function(F,N){return new Promise((V,W)=>{let $=new FileReader,Z=N?Math.min(N,F.size):F.size,ie=F.slice(0,Z);$.onload=()=>V($.result),$.onerror=W,$.readAsBinaryString(ie)})}(R,A)}static toBinaryString(R,A,F=!0){return F&&P?this.toBinaryStringWithWorker(R,A):this.toBinaryStringWithoutWorker(R,A)}static toArrayBufferWithWorker(R,A){return ne(this,null,function*(){let F=new b.a(new E.a),N=yield F.exec("buffer",{blob:R,chunk:A});return F.terminate(),N})}static toArrayBufferWithoutWorker(R,A){return function(F,N){return new Promise((V,W)=>{let $=new FileReader,Z=N?Math.min(N,F.size):F.size,ie=F.slice(0,Z);$.onload=()=>V($.result),$.onerror=W,$.readAsArrayBuffer(ie)})}(R,A)}static toArrayBuffer(R,A,F=!0){return F&&P?this.toArrayBufferWithWorker(R,A):this.toArrayBufferWithoutWorker(R,A)}static compareBuffersWithWorker(R,A){return ne(this,null,function*(){if(R===A)return!0;let F=new b.a(new E.a),N=yield F.exec("compare",{buf1:R,buf2:A},[R,A]);return F.terminate(),N})}static compareBuffersWithoutWorker(R,A){return function(F,N){if(F===N)return!0;if(F.byteLength!==N.byteLength)return!1;let V=new DataView(F),W=new DataView(N);for(var $=F.byteLength;$--;)if(V.getUint8($)!==W.getUint8($))return!1;return!0}(R,A)}static compareBuffers(R,A,F=!0){return F&&P?this.compareBuffersWithWorker(R,A):this.compareBuffersWithoutWorker(R,A)}static sizeEqual(R,A){return R.size===A.size}static typeEqual(R,A){return R.type===A.type}static magicNumbersEqual(R,A,F=!0){return ne(this,null,function*(){if(R===A)return!0;let N=[24,16,14,12,8,6,4],[V,W]=yield Promise.all([this.toBinaryString(R,24,F),this.toBinaryString(A,24,F)]);for(let $ of N)if(V.substring(0,$)===W.substring(0,$))return!0;return!1})}static bytesEqualWithBinaryString(R,A,F,N=!0){return ne(this,null,function*(){if(R===A)return!0;let[V,W]=yield Promise.all([this.toBinaryString(R,F,N),this.toBinaryString(A,F,N)]);return V===W})}static bytesEqualWithArrayBuffer(R,A,F,N=!0){return ne(this,null,function*(){if(R===A)return!0;let[V,W]=yield Promise.all([this.toArrayBuffer(R,F,N),this.toArrayBuffer(A,F,N)]);return this.compareBuffers(V,W,N)})}static isEqual(R,A){return ne(this,arguments,function*(F,N,{methods:V=["size","type","magic","byte"],byte:W="buffer",partial:$=!1,chunks:Z=null,worker:ie=!0}={}){let re=null;for(let le of V){if(re===!1||$&&re===!0)break;switch(le){case"byte":case"bytes":case"content":Z=Z instanceof Array?Z:[F.size],re=!0;for(let Ce of Z){let ye=!1;ye=W==="buffer"?yield this.bytesEqualWithArrayBuffer(F,N,Ce,ie):yield this.bytesEqualWithBinaryString(F,N,Ce,ie),ye||(re=!1)}break;case"magic":case"headers":case"numbers":case"mime":re=yield this.magicNumbersEqual(F,N,ie);break;case"size":case"sizes":re=this.sizeEqual(F,N);break;case"type":case"types":re=this.typeEqual(F,N);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return re})}}}])})}),Tpe={};X(Tpe,{ToolbarDropdownSelect:()=>Ske,default:()=>Cke}),t.exports=pe(Tpe),Me(),Ze();var Mpe=zt;nt();var oMe=0,aMe=class{constructor(s){this._studio=s,xe(this,"_id"),xe(this,"_state",{type:"Ready"}),this._id=String(oMe++)}get status(){return this._state.type}reset(){let{_state:s}=this;if(s.type!=="Ready")if(s.type==="Captured")this._state={type:"Ready"},s.transaction.discard(),s.flagsTransaction.discard();else throw s.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:s}=this;if(s.type==="Captured")s.transaction.commit(),s.flagsTransaction.discard(),this._state={type:"Committed"};else if(s.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw s.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(s){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let a=!0;try{this._state=B({type:"Captured"},this._capture(s)),a=!1}finally{a&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(s){let a=[],l=this._studio.tempTransaction(m=>{let g=!0,b={set:(_,E)=>{if(!g)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:P,path:I}=(0,Mpe.getPointerParts)(_);if(!wt(P))throw new Error("We can only scrub props of Sheet Objects for now");m.set(_,E),a.push(_)}};try{s(b)}finally{g=!1}}),h=this._studio.tempTransaction(({stateEditors:m})=>{a.forEach(g=>{let{root:b,path:_}=(0,Mpe.getPointerParts)(g);if(!wt(b))return;let E=b.template.getDefaultsAtPointer(g);Ct(E,(P,I)=>{m.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(L(B({},b.address),{pathToProp:I}))},_)})});return{transaction:l,flagsTransaction:h}}discard(){let{_state:s}=this;if(s.type==="Captured"||s.type==="Ready")s.type==="Captured"&&(s.transaction.discard(),s.flagsTransaction.discard()),this._state={type:"Discarded"};else throw s.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},lMe=zt,kpe=typeof window<"u"?Promise.resolve().then(()=>(jTe(),ppe)).then(s=>s.default):null,uMe=class{constructor(s){this.studio=s,xe(this,"_rendered",!1),xe(this,"_nonSSRBits",kpe?kpe.then(a=>new a):Promise.reject()),xe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(s=>{s.render()}).catch(s=>{throw console.error(s),s}))}hide(){this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,lMe.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(s,a){let l=!1,h=null;return this._nonSSRBits.then(m=>{l||(h=m.renderToolset(s,a))}).catch(m=>{console.error(m)}),()=>{if(h){h();return}l||(l=!0)}}},pT=zt;function cMe(s){return s}var dMe=(s,a=cMe)=>{let l=h=>({type:s,payload:a(h)});return l.type=s,l.is=h=>h&&h.type&&h.type===s,l},fc=dMe,Ape=q(qTe()),Ipe=q(iMe());Q9();var fT,hMe=new Uint8Array(16);function pMe(){if(!fT&&(fT=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!fT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fT(hMe)}var fMe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mMe(s){return typeof s=="string"&&fMe.test(s)}var gMe=mMe,xo=[];for(mT=0;mT<256;++mT)xo.push((mT+256).toString(16).substr(1));var mT;function vMe(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(xo[s[a+0]]+xo[s[a+1]]+xo[s[a+2]]+xo[s[a+3]]+"-"+xo[s[a+4]]+xo[s[a+5]]+"-"+xo[s[a+6]]+xo[s[a+7]]+"-"+xo[s[a+8]]+xo[s[a+9]]+"-"+xo[s[a+10]]+xo[s[a+11]]+xo[s[a+12]]+xo[s[a+13]]+xo[s[a+14]]+xo[s[a+15]]).toLowerCase();if(!gMe(l))throw TypeError("Stringified UUID is invalid");return l}var yMe=vMe;function bMe(s,a,l){s=s||{};var h=s.random||(s.rng||pMe)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,a){l=l||0;for(var m=0;m<16;++m)a[l+m]=h[m];return a}return yMe(h)}var _Me=bMe,T7={replaceHistory:fc("@history/replaceHistory"),startHistoryFromScratch:fc("@history/startHistoryFromScratch"),undo:fc("@history/undo"),redo:fc("@history/redo")},wMe={type:"@history/unknownAction",payload:""},xMe={maxNumberOfCommits:100},SMe=(s,a=xMe)=>{let l=PU(s(void 0,wMe));return function(h,m){return T7.startHistoryFromScratch.is(m)?PU(s(void 0,m.payload)):T7.replaceHistory.is(m)?m.payload:T7.undo.is(m)?h?PMe(h):l:T7.redo.is(m)?h?TMe(h):l:h?EMe(h,s(h.innerState,m),a):PU(s(void 0,m))}};function PU(s){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:s}}function EMe(s,a,l){if(a===s.innerState)return s;let h=CMe(s.innerState,a);if(h.forwardDiff.length===0)return s;let m=td(s.listOfCommitHashes),g={currentCommitHash:h.hash,commitsByHash:B({},s.commitsByHash),listOfCommitHashes:[...s.listOfCommitHashes],innerState:a};if(s.currentCommitHash!==m){let b=s.listOfCommitHashes.findIndex(_=>_===s.currentCommitHash);s.listOfCommitHashes.slice(b+1).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(b+1,g.listOfCommitHashes.length)}if(g.listOfCommitHashes.push(h.hash),g.commitsByHash[h.hash]=h,g.listOfCommitHashes.length>l.maxNumberOfCommits){let b=g.listOfCommitHashes.length-l.maxNumberOfCommits;g.listOfCommitHashes.slice(0,b).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(0,b)}return g}function CMe(s,a){let l=Ape.default.diff(s,a,{invertible:!1}),h=Ape.default.diff(a,s,{invertible:!1}),m=Date.now(),g=_Me();return{forwardDiff:l,backwardDiff:h,timestamp:m,hash:g}}function PMe(s){if(s.currentCommitHash===void 0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===-1)throw new Error("This should never happen");let l=s.commitsByHash[s.currentCommitHash],h=(0,Ipe.default)(s.innerState,l.backwardDiff),m=a-1,g=m===-1?void 0:s.listOfCommitHashes[m];return L(B({},s),{currentCommitHash:g,innerState:h})}function TMe(s){if(s.listOfCommitHashes.length===0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===s.listOfCommitHashes.length-1)return s;let l=a+1,h=s.listOfCommitHashes[l],m=s.commitsByHash[h],g=(0,Ipe.default)(s.innerState,m.forwardDiff);return L(B({},s),{currentCommitHash:h,innerState:g})}qP();var gT={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},Rpe=fc("@storeBundle/replacePersistentState",s=>s),Dpe=fc("@storeBundle/reduceParts",s=>s),h5={historic:T7,replacePersistentState:Rpe,reduceParts:Dpe},Ope=fc("@storeBundle/setInnerHistoricState",s=>s),MMe=(s=gT.historic,a)=>Ope.is(a)?a.payload:s,TU=SMe(MMe),Lpe=(s,a)=>{if(Rpe.is(a)){let{historic:l,ahistoric:h}=a.payload,m=(s==null?void 0:s.ephemeral)||gT.ephemeral;return{$persistent:{historic:l,ahistoric:h},ephemeral:m}}else if(s){let{historic:l,ahistoric:h}=s.$persistent,{ephemeral:m}=s;if(Dpe.is(a)){let g={historic:s.$persistent.historic.innerState,ahistoric:s.$persistent.ahistoric,ephemeral:s.ephemeral},b=a.payload(g);if(b===g)return s;l.innerState!==b.historic&&(l=TU(l,Ope(b.historic))),h=b.ahistoric,m=b.ephemeral}else{let g=TU(l,a);if(g===l)return s;l=g}return{$persistent:l===s.$persistent.historic&&h===s.$persistent.ahistoric?s.$persistent:{historic:l,ahistoric:h},ephemeral:m}}else{let l=TU(void 0,{}),h=gT.ahistoric,m=gT.ephemeral;return{$persistent:{historic:l,ahistoric:h},ephemeral:m}}},Npe=fc("@history/pushTempAction",s=>s),Fpe=fc("@history/discardTempAction",s=>s),Bpe=fc("@history/commitTempAction",s=>s),kMe=0,AMe=()=>{let s=kMe++;return{push:a=>Npe({id:s,originalAction:a}),discard:()=>Fpe(s),commit:()=>Bpe(s)}},IMe=(s,a)=>{if(s){let{tempActions:l,permanent:h}=s.$temps,m;if(Npe.is(a))l=[...l,a];else if(Bpe.is(a)){let b=l.find(_=>_.payload.id===a.payload);b?(m=b.payload.originalAction,l=l.filter(_=>_.payload.id!==a.payload)):XP.error("Comitting temp action group ".concat(a.payload," isn't possible as this group doesn't exist"))}else Fpe.is(a)?l=l.filter(b=>b.payload.id!==a.payload):m=a;m&&(h=Lpe(s.$temps.permanent,m));let g={historic:h.$persistent.historic.innerState,ahistoric:h.$persistent.ahistoric,ephemeral:h.ephemeral};for(let b of l)g=b.payload.originalAction.payload(g);return B({$temps:{tempActions:l,permanent:h},$persistent:h.$persistent},g)}else{let l=Lpe(void 0,a);return{$temps:{permanent:l,tempActions:[]},$persistent:l.$persistent,historic:l.$persistent.historic.innerState,ahistoric:l.$persistent.ahistoric,ephemeral:l.ephemeral}}};nc(),nc(),bd();function Upe(s,a){if(typeof s!="object"||s===null)return;if(a.length===0){for(let b of Object.keys(s))delete s[b];return}let l=a.slice(0,a.length-1),h=s,m=new WeakMap;for(let b of l){let _=h,E=_[b];if(typeof E!="object"||E===null)return;m.set(E,_),h=E}let g=a.slice().reverse();for(let b of g){if(delete h[b],Object.keys(h).length>0)return;h=m.get(h)}}function RMe(s,{scale:a,origin:l,translate:h}){let m=l+(s-l)*a;return h+m}function tu(s){for(var a=arguments.length,l=Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];throw Error("[Immer] minified error nr: "+s+(l.length?" "+l.map(function(m){return"'"+m+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function p5(s){return!!s&&!!s[d0]}function Bm(s){return!!s&&(function(a){if(!a||typeof a!="object")return!1;var l=Object.getPrototypeOf(a);if(l===null)return!0;var h=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return h===Object||typeof h=="function"&&Function.toString.call(h)===UMe}(s)||Array.isArray(s)||!!s[qpe]||!!s.constructor[qpe]||kU(s)||AU(s))}function M7(s,a,l){l===void 0&&(l=!1),f5(s)===0?(l?Object.keys:jU)(s).forEach(function(h){l&&typeof h=="symbol"||a(h,s[h],s)}):s.forEach(function(h,m){return a(m,h,s)})}function f5(s){var a=s[d0];return a?a.i>3?a.i-4:a.i:Array.isArray(s)?1:kU(s)?2:AU(s)?3:0}function MU(s,a){return f5(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function DMe(s,a){return f5(s)===2?s.get(a):s[a]}function zpe(s,a,l){var h=f5(s);h===2?s.set(a,l):h===3?(s.delete(a),s.add(l)):s[a]=l}function OMe(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}function kU(s){return FMe&&s instanceof Map}function AU(s){return BMe&&s instanceof Set}function Um(s){return s.o||s.t}function IU(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var a=zMe(s);delete a[d0];for(var l=jU(a),h=0;h<l.length;h++){var m=l[h],g=a[m];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(a[m]={configurable:!0,writable:!0,enumerable:g.enumerable,value:s[m]})}return Object.create(Object.getPrototypeOf(s),a)}function RU(s,a){return a===void 0&&(a=!1),DU(s)||p5(s)||!Bm(s)||(f5(s)>1&&(s.set=s.add=s.clear=s.delete=LMe),Object.freeze(s),a&&M7(s,function(l,h){return RU(h,!0)},!0)),s}function LMe(){tu(2)}function DU(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Ad(s){var a=VMe[s];return a||tu(18,s),a}function Vpe(){return k7}function OU(s,a){a&&(Ad("Patches"),s.u=[],s.s=[],s.v=a)}function vT(s){LU(s),s.p.forEach(NMe),s.p=null}function LU(s){s===k7&&(k7=s.l)}function jpe(s){return k7={p:[],l:k7,h:s,m:!0,_:0}}function NMe(s){var a=s[d0];a.i===0||a.i===1?a.j():a.O=!0}function NU(s,a){a._=a.p.length;var l=a.p[0],h=s!==void 0&&s!==l;return a.h.g||Ad("ES5").S(a,s,h),h?(l[d0].P&&(vT(a),tu(4)),Bm(s)&&(s=yT(a,s),a.l||bT(a,s)),a.u&&Ad("Patches").M(l[d0],s,a.u,a.s)):s=yT(a,l,[]),vT(a),a.u&&a.v(a.u,a.s),s!==Xpe?s:void 0}function yT(s,a,l){if(DU(a))return a;var h=a[d0];if(!h)return M7(a,function(g,b){return Hpe(s,h,a,g,b,l)},!0),a;if(h.A!==s)return a;if(!h.P)return bT(s,h.t,!0),h.t;if(!h.I){h.I=!0,h.A._--;var m=h.i===4||h.i===5?h.o=IU(h.k):h.o;M7(h.i===3?new Set(m):m,function(g,b){return Hpe(s,h,m,g,b,l)}),bT(s,m,!1),l&&s.u&&Ad("Patches").R(h,l,s.u,s.s)}return h.o}function Hpe(s,a,l,h,m,g){if(p5(m)){var b=yT(s,m,g&&a&&a.i!==3&&!MU(a.D,h)?g.concat(h):void 0);if(zpe(l,h,b),!p5(b))return;s.m=!1}if(Bm(m)&&!DU(m)){if(!s.h.F&&s._<1)return;yT(s,m),a&&a.A.l||bT(s,m)}}function bT(s,a,l){l===void 0&&(l=!1),s.h.F&&s.m&&RU(a,l)}function FU(s,a){var l=s[d0];return(l?Um(l):s)[a]}function Gpe(s,a){if(a in s)for(var l=Object.getPrototypeOf(s);l;){var h=Object.getOwnPropertyDescriptor(l,a);if(h)return h;l=Object.getPrototypeOf(l)}}function BU(s){s.P||(s.P=!0,s.l&&BU(s.l))}function UU(s){s.o||(s.o=IU(s.t))}function zU(s,a,l){var h=kU(a)?Ad("MapSet").N(a,l):AU(a)?Ad("MapSet").T(a,l):s.g?function(m,g){var b=Array.isArray(m),_={i:b?1:0,A:g?g.A:Vpe(),P:!1,I:!1,D:{},l:g,t:m,k:null,o:null,j:null,C:!1},E=_,P=wT;b&&(E=[_],P=xT);var I=Proxy.revocable(E,P),O=I.revoke,R=I.proxy;return _.k=R,_.j=O,R}(a,l):Ad("ES5").J(a,l);return(l?l.A:Vpe()).p.push(h),h}function _T(s){return p5(s)||tu(22,s),function a(l){if(!Bm(l))return l;var h,m=l[d0],g=f5(l);if(m){if(!m.P&&(m.i<4||!Ad("ES5").K(m)))return m.t;m.I=!0,h=Wpe(l,g),m.I=!1}else h=Wpe(l,g);return M7(h,function(b,_){m&&DMe(m.t,b)===_||zpe(h,b,a(_))}),g===3?new Set(h):h}(s)}function Wpe(s,a){switch(a){case 2:return new Map(s);case 3:return Array.from(s)}return IU(s)}var $pe,k7,VU=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",FMe=typeof Map<"u",BMe=typeof Set<"u",Kpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Xpe=VU?Symbol.for("immer-nothing"):(($pe={})["immer-nothing"]=!0,$pe),qpe=VU?Symbol.for("immer-draftable"):"__$immer_draftable",d0=VU?Symbol.for("immer-state"):"__$immer_state",UMe=""+Object.prototype.constructor,jU=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,zMe=Object.getOwnPropertyDescriptors||function(s){var a={};return jU(s).forEach(function(l){a[l]=Object.getOwnPropertyDescriptor(s,l)}),a},VMe={},wT={get:function(s,a){if(a===d0)return s;var l=Um(s);if(!MU(l,a))return function(m,g,b){var _,E=Gpe(g,b);return E?"value"in E?E.value:(_=E.get)===null||_===void 0?void 0:_.call(m.k):void 0}(s,l,a);var h=l[a];return s.I||!Bm(h)?h:h===FU(s.t,a)?(UU(s),s.o[a]=zU(s.A.h,h,s)):h},has:function(s,a){return a in Um(s)},ownKeys:function(s){return Reflect.ownKeys(Um(s))},set:function(s,a,l){var h=Gpe(Um(s),a);if(h!=null&&h.set)return h.set.call(s.k,l),!0;if(!s.P){var m=FU(Um(s),a),g=m==null?void 0:m[d0];if(g&&g.t===l)return s.o[a]=l,s.D[a]=!1,!0;if(OMe(l,m)&&(l!==void 0||MU(s.t,a)))return!0;UU(s),BU(s)}return s.o[a]===l&&typeof l!="number"&&(l!==void 0||a in s.o)||(s.o[a]=l,s.D[a]=!0,!0)},deleteProperty:function(s,a){return FU(s.t,a)!==void 0||a in s.t?(s.D[a]=!1,UU(s),BU(s)):delete s.D[a],s.o&&delete s.o[a],!0},getOwnPropertyDescriptor:function(s,a){var l=Um(s),h=Reflect.getOwnPropertyDescriptor(l,a);return h&&{writable:!0,configurable:s.i!==1||a!=="length",enumerable:h.enumerable,value:l[a]}},defineProperty:function(){tu(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){tu(12)}},xT={};M7(wT,function(s,a){xT[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}}),xT.deleteProperty=function(s,a){return wT.deleteProperty.call(this,s[0],a)},xT.set=function(s,a,l){return wT.set.call(this,s[0],a,l,s[0])};var jMe=function(){function s(l){var h=this;this.g=Kpe,this.F=!0,this.produce=function(m,g,b){if(typeof m=="function"&&typeof g!="function"){var _=g;g=m;var E=h;return function(A){var F=this;A===void 0&&(A=_);for(var N=arguments.length,V=Array(N>1?N-1:0),W=1;W<N;W++)V[W-1]=arguments[W];return E.produce(A,function($){var Z;return(Z=g).call.apply(Z,[F,$].concat(V))})}}var P;if(typeof g!="function"&&tu(6),b!==void 0&&typeof b!="function"&&tu(7),Bm(m)){var I=jpe(h),O=zU(h,m,void 0),R=!0;try{P=g(O),R=!1}finally{R?vT(I):LU(I)}return typeof Promise<"u"&&P instanceof Promise?P.then(function(A){return OU(I,b),NU(A,I)},function(A){throw vT(I),A}):(OU(I,b),NU(P,I))}if(!m||typeof m!="object")return(P=g(m))===Xpe?void 0:(P===void 0&&(P=m),h.F&&RU(P,!0),P);tu(21,m)},this.produceWithPatches=function(m,g){return typeof m=="function"?function(E){for(var P=arguments.length,I=Array(P>1?P-1:0),O=1;O<P;O++)I[O-1]=arguments[O];return h.produceWithPatches(E,function(R){return m.apply(void 0,[R].concat(I))})}:[h.produce(m,g,function(E,P){b=E,_=P}),b,_];var b,_},typeof(l==null?void 0:l.useProxies)=="boolean"&&this.setUseProxies(l.useProxies),typeof(l==null?void 0:l.autoFreeze)=="boolean"&&this.setAutoFreeze(l.autoFreeze)}var a=s.prototype;return a.createDraft=function(l){Bm(l)||tu(8),p5(l)&&(l=_T(l));var h=jpe(this),m=zU(this,l,void 0);return m[d0].C=!0,LU(h),m},a.finishDraft=function(l,h){var m=l&&l[d0],g=m.A;return OU(g,h),NU(void 0,g)},a.setAutoFreeze=function(l){this.F=l},a.setUseProxies=function(l){l&&!Kpe&&tu(20),this.g=l},a.applyPatches=function(l,h){var m;for(m=h.length-1;m>=0;m--){var g=h[m];if(g.path.length===0&&g.op==="replace"){l=g.value;break}}var b=Ad("Patches").$;return p5(l)?b(l,h):this.produce(l,function(_){return b(_,h.slice(m+1))})},s}(),h0=new jMe;h0.produce,h0.produceWithPatches.bind(h0),h0.setAutoFreeze.bind(h0),h0.setUseProxies.bind(h0),h0.applyPatches.bind(h0);var HU=h0.createDraft.bind(h0),GU=h0.finishDraft.bind(h0);SO(),Dl(),I8(),n3(),i3(),$P(),fi(),nt();var nu={create(s){let a={byId:{},allIds:{}};if(s)for(let[l,h]of s)a.byId[l]=h,a.allIds[l]=!0;return a},shallowCopy(s){return{byId:B({},s==null?void 0:s.byId),allIds:B({},s==null?void 0:s.allIds)}},add(s,a,l){return{byId:L(B({},s==null?void 0:s.byId),{[a]:l}),allIds:L(B({},s==null?void 0:s.allIds),{[a]:!0})}},merge(s){let a=nu.create();for(let l=0;l<s.length;l++)a.byId=B(B({},a.byId),s[l].byId),a.allIds=B(B({},a.allIds),s[l].allIds);return a},remove(s,a){let l=nu.shallowCopy(s);return delete l.allIds[a],delete l.byId[a],l},filter(s,a){let l=nu.shallowCopy(s);for(let[h,m]of Object.entries(l.byId))a(m)||(delete l.allIds[h],delete l.byId[h]);return l}},Ype=s=>(WU=s,$U),WU,So=()=>{if(WU===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return WU},$U;(s=>{(a=>{(l=>{(h=>{function m(g){let b=So().historic;b.panelPositions!=null||(b.panelPositions={}),b.panelPositions[g.panelId]=g.position}h.setPanelPosition=m})(l.panelPositions||(l.panelPositions={})),(h=>{function m(){var g;return(g=So().historic).panels!=null||(g.panels={}),So().historic.panels}h._ensure=m,(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.outlinePanel!=null||(_.outlinePanel={}),_.outlinePanel}g._ensure=b,(_=>{function E(I){let O=[];for(let R of No(I))At(R)?O.push(B({type:"Project"},R.address)):pn(R)?(O.push(B({type:"Sheet"},R.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.address)):et(R)?O.push(B({type:"Sheet"},R.address)):wt(R)?(O.push(B({type:"SheetObject"},R.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.sheet.address)):Zt(R)&&O.push(B({type:"SheetObject"},R.address));g._ensure().selection=O}_.set=E;function P(){g._ensure().selection=[]}_.unset=P})(g.selection||(g.selection={}))})(h.outline||(h.outline={})),(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.sequenceEditor!=null||(_.sequenceEditor={}),_.sequenceEditor}g._ensure=b,(_=>{function E(){let I=g._ensure();return I.graphEditor!=null||(I.graphEditor={height:.5,isOpen:!1}),I.graphEditor}function P(I){E().isOpen=I.isOpen}_.setIsOpen=P})(g.graphEditor||(g.graphEditor={}))})(h.sequenceEditor||(h.sequenceEditor={}))})(l.panels||(l.panels={})),(h=>{(m=>{function g(b){let _=So().historic;return _.projects.stateByProjectId[b.projectId]||(_.projects.stateByProjectId[b.projectId]={stateBySheetId:{}}),_.projects.stateByProjectId[b.projectId]}m._ensure=g,(b=>{function _(P){let I=s.studio.historic.projects.stateByProjectId._ensure(P);return I.stateBySheetId[P.sheetId]||(I.stateBySheetId[P.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),I.stateBySheetId[P.sheetId]}b._ensure=_;function E(P){s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(P).selectedInstanceId=P.sheetInstanceId}b.setSelectedInstanceId=E,(P=>{function I(V){let{selectedPropsByObject:W}=b._ensure(V).sequenceEditor;W[V.objectKey]||(W[V.objectKey]={});let $=W[V.objectKey],Z=tc(V.pathToProp),ie=new Set(Object.keys(v7));for(let[le,Ce]of Object.entries(_T(W)))for(let[ye,we]of Object.entries(Ce))ie.delete(we);let re=ie.size>0?ie.values().next().value:Object.keys(v7)[0];$[Z]=re}P.addPropToGraphEditor=I;function O(V){let{selectedPropsByObject:W}=b._ensure(V).sequenceEditor;if(!W[V.objectKey])return;let $=W[V.objectKey],Z=tc(V.pathToProp);$[Z]&&Upe(W,[V.objectKey,Z])}P.removePropFromGraphEditor=O;function R(V){let W=s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(V).sequenceEditor;return W.markerSet||(W.markerSet=nu.create()),W.markerSet}function A(V){let W=R(V.sheetAddress),$=V.markers.filter(le=>!!isFinite(le.position)).map(le=>L(B({},le),{position:V.snappingFunction(le.position)})),Z=Kr($,"id"),ie=nu.filter(W,le=>le&&!Z[le.id]),re=Kr(Object.values(ie.byId),"position");$.forEach(({position:le})=>{let Ce=re[le];Ce&&(ie=nu.remove(ie,Ce.id))}),Object.assign(W,nu.merge([ie,nu.create($.map(le=>[le.id,le]))]))}P.replaceMarkers=A;function F(V){let W=R(V.sheetAddress);Object.assign(W,nu.remove(W,V.markerId))}P.removeMarker=F;function N(V){let W=R(V.sheetAddress).byId[V.markerId];W!==void 0&&(W.label=V.label)}P.updateMarker=N})(b.sequenceEditor||(b.sequenceEditor={}))})(m.stateBySheetId||(m.stateBySheetId={}))})(h.stateByProjectId||(h.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.historic||(a.historic={})),(l=>{function h(m){So().ephemeral.showOutline=m}l.setShowOutline=h,(m=>{(g=>{function b(_){let E=So().ephemeral;return E.projects.stateByProjectId[_.projectId]||(E.projects.stateByProjectId[_.projectId]={stateBySheetId:{}}),E.projects.stateByProjectId[_.projectId]}g._ensure=b,(_=>{function E(P){let I=s.studio.ephemeral.projects.stateByProjectId._ensure(P);return I.stateBySheetId[P.sheetId]||(I.stateBySheetId[P.sheetId]={stateByObjectKey:{}}),I.stateBySheetId[P.sheetId]}_._ensure=E,(P=>{function I(O){var R;let A=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(O).stateByObjectKey;return A[R=O.objectKey]!=null||(A[R]={}),A[O.objectKey]}P._ensure=I,(O=>{function R(F){let N=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(F);return N.valuesBeingScrubbed!=null||(N.valuesBeingScrubbed={}),N.valuesBeingScrubbed}O._ensure=R;function A(F){Zh(R(F),F.pathToProp,!0)}O.flag=A})(P.propsBeingScrubbed||(P.propsBeingScrubbed={}))})(_.stateByObjectKey||(_.stateByObjectKey={}))})(g.stateBySheetId||(g.stateBySheetId={}))})(m.stateByProjectId||(m.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ephemeral||(a.ephemeral={})),(l=>{function h(E){So().ahistoric.pinOutline=E}l.setPinOutline=h;function m(E){So().ahistoric.pinDetails=E}l.setPinDetails=m;function g(E){So().ahistoric.pinNotifications=E}l.setPinNotifications=g;function b(E){So().ahistoric.visibilityState=E}l.setVisibilityState=b;function _(E){let P=sP(E.map(R=>R.pathToProp)),I=E.map(({keyframe:R,pathToProp:A})=>({keyframe:R,pathToProp:A.slice(P.length)})),O=So();O.ahistoric.clipboard?O.ahistoric.clipboard.keyframesWithRelativePaths=I:O.ahistoric.clipboard={keyframesWithRelativePaths:I}}l.setClipboardKeyframes=_,(E=>{(P=>{function I(O){let R=So().ahistoric;return R.projects.stateByProjectId[O.projectId]||(R.projects.stateByProjectId[O.projectId]={stateBySheetId:{}}),R.projects.stateByProjectId[O.projectId]}P._ensure=I,(O=>{function R(F){let N=s.studio.ahistoric.projects.stateByProjectId._ensure(F);return N.collapsedItemsInOutline||(N.collapsedItemsInOutline={}),N.collapsedItemsInOutline}O._ensure=R;function A(F){let N=s.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(F);F.isCollapsed?N[F.itemKey]=!0:delete N[F.itemKey]}O.set=A})(P.collapsedItemsInOutline||(P.collapsedItemsInOutline={})),(O=>{function R(A){let F=s.studio.ahistoric.projects.stateByProjectId._ensure(A);return F.stateBySheetId[A.sheetId]||(F.stateBySheetId[A.sheetId]={}),F.stateBySheetId[A.sheetId]}O._ensure=R,(A=>{function F(N){let V=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(N);return V.sequence||(V.sequence={}),V.sequence}A._ensure=F,(N=>{function V($){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange={range:$.range,enabled:$.enabled}}N.set=V;function W($){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange=void 0}N.unset=W})(A.focusRange||(A.focusRange={})),(N=>{function V(W){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W).clippedSpaceRange=B({},W.range)}N.set=V})(A.clippedSpaceRange||(A.clippedSpaceRange={})),(N=>{function V($){let Z=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($),ie=Z.collapsableItems;return ie||(ie=Z.collapsableItems=nu.create()),ie}function W($){let Z=V($);Object.assign(Z,nu.add(Z,$.studioSheetItemKey,{isCollapsed:$.isCollapsed}))}N.set=W})(A.sequenceEditorCollapsableItems||(A.sequenceEditorCollapsableItems={}))})(O.sequence||(O.sequence={}))})(P.stateBySheetId||(P.stateBySheetId={}))})(E.stateByProjectId||(E.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ahistoric||(a.ahistoric={}))})(s.studio||(s.studio={})),(a=>{(l=>{(h=>{function m(g){let b=So().historic.coreByProject[g.projectId].revisionHistory,_=50;b.unshift(g.revision),b.length>_&&(b.length=_)}h.add=m})(l.revisionHistory||(l.revisionHistory={})),(h=>{function m(_){let E=So().historic.coreByProject[_.projectId].sheetsById;return E[_.sheetId]||(E[_.sheetId]={staticOverrides:{byObject:{}}}),E[_.sheetId]}h._ensure=m;function g(_){let E=So().historic.coreByProject[_.projectId].sheetsById[_.sheetId];if(!E)return;delete E.staticOverrides.byObject[_.objectKey];let P=E.sequence;P&&delete P.tracksByObject[_.objectKey]}h.forgetObject=g;function b(_){So().historic.coreByProject[_.projectId].sheetsById[_.sheetId]&&delete So().historic.coreByProject[_.projectId].sheetsById[_.sheetId]}h.forgetSheet=b,(_=>{function E(ye){let we=s.coreByProject.historic.sheetsById._ensure(ye);return we.sequence!=null||(we.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),we.sequence}_._ensure=E;function P(ye){E(ye).length=Si(parseFloat(ye.length.toFixed(2)),.01,1/0)}_.setLength=P;function I(ye){var we;let Ne=s.coreByProject.historic.sheetsById.sequence._ensure(ye).tracksByObject;return Ne[we=ye.objectKey]!=null||(Ne[we]={trackData:{},trackIdByPropPath:{}}),Ne[ye.objectKey]}function O(ye,we){let Ne=I(ye),lt=tc(ye.pathToProp);if(typeof Ne.trackIdByPropPath[lt]=="string")return;let ue=KSe(),Le={type:"BasicKeyframedTrack",__debugName:"".concat(ye.objectKey,":").concat(lt),keyframes:[]};Ne.trackData[ue]=Le,Ne.trackIdByPropPath[lt]=ue}_.setPrimitivePropAsSequenced=O;function R(ye){let we=I(ye),Ne=tc(ye.pathToProp),lt=we.trackIdByPropPath[Ne];typeof lt=="string"&&(delete we.trackIdByPropPath[Ne],delete we.trackData[lt],s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ye))}_.setPrimitivePropAsStatic=R;function A(ye){let we=I(ye);for(let Ne of Object.keys(we.trackIdByPropPath)){let lt=JSON.parse(Ne);if(ye.pathToProp.every((ue,Le)=>lt[Le]===ue)){let ue=we.trackIdByPropPath[Ne];if(typeof ue!="string")continue;delete we.trackIdByPropPath[Ne],delete we.trackData[ue]}}s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ye)}_.setCompoundPropAsStatic=A;function F(ye){return I(ye).trackData[ye.trackId]}function N(ye){let we=F(ye);if(we)return we.keyframes.find(Ne=>Ne.id===ye.keyframeId)}function V(ye){let we=ye.snappingFunction(ye.position),Ne=F(ye);if(!Ne)return;let{keyframes:lt}=Ne,ue=lt.findIndex(He=>He.position===we);if(ue!==-1){let He=lt[ue];He.value=ye.value;return}let Le=$S(lt,He=>He.position<we);if(Le===-1){lt.unshift({id:Zee(),position:we,connectedRight:!0,handles:ye.handles||[.5,1,.5,0],type:ye.type||"bezier",value:ye.value});return}let Q=lt[Le];lt.splice(Le+1,0,{id:Zee(),position:we,connectedRight:Q.connectedRight,handles:ye.handles||[.5,1,.5,0],type:ye.type||"bezier",value:ye.value})}_.setKeyframeAtPosition=V;function W(ye){let we=F(ye);if(!we)return;let{keyframes:Ne}=we,lt=Ne.findIndex(ue=>ue.position===ye.position);lt!==-1&&Ne.splice(lt,1)}_.unsetKeyframeAtPosition=W;function $(ye){let we=F(ye);if(!we)return;let Ne=_T(we.keyframes).filter(lt=>ye.keyframeIds.includes(lt.id)).map(lt=>{let ue=lt.position,Le=ye.snappingFunction(RMe(ue,ye));return L(B({},lt),{position:Le})});Ce(L(B({},ye),{keyframes:Ne}))}_.transformKeyframes=$;function Z(ye){let we=F(ye);we&&(we.keyframes=we.keyframes.map((Ne,lt)=>{let ue=we.keyframes[lt-1],Le=ye.keyframeIds.includes(Ne.id),Q=ye.keyframeIds.includes(ue==null?void 0:ue.id);return Le&&!Q?L(B({},Ne),{handles:[Ne.handles[0],Ne.handles[1],ye.handles[0],ye.handles[1]]}):Le&&Q?L(B({},Ne),{handles:[ye.handles[2],ye.handles[3],ye.handles[0],ye.handles[1]]}):Q?L(B({},Ne),{handles:[ye.handles[2],ye.handles[3],Ne.handles[2],Ne.handles[3]]}):Ne}))}_.setTweenBetweenKeyframes=Z;function ie(ye){var we,Ne,lt,ue,Le,Q,He,Bt;let Ie=N(ye);Ie&&(Ie.handles=[(Ne=(we=ye.end)==null?void 0:we[0])!=null?Ne:Ie.handles[0],(ue=(lt=ye.end)==null?void 0:lt[1])!=null?ue:Ie.handles[1],(Q=(Le=ye.start)==null?void 0:Le[0])!=null?Q:Ie.handles[2],(Bt=(He=ye.start)==null?void 0:He[1])!=null?Bt:Ie.handles[3]])}_.setHandlesForKeyframe=ie;function re(ye){let we=F(ye);we&&(we.keyframes=we.keyframes.filter(Ne=>ye.keyframeIds.indexOf(Ne.id)===-1))}_.deleteKeyframes=re;function le(ye){let we=N(ye);we&&(we.type=ye.keyframeType)}_.setKeyframeType=le;function Ce(ye){let we=F(ye);if(!we)return;let Ne=_T(we.keyframes),lt=ye.keyframes.filter(Bt=>!(typeof Bt.value=="number"&&!isFinite(Bt.value)||!Bt.handles.every(Ie=>isFinite(Ie)))).map(Bt=>L(B({},Bt),{position:ye.snappingFunction(Bt.position)})),ue=Kr(lt,"id"),Le=Ne.filter(Bt=>!ue[Bt.id]),Q=Kr(Le,"position");lt.forEach(({position:Bt})=>{let Ie=Q[Bt];Ie&&uE(Le,Ie)});let He=dE([...Le,...lt],"position");we.keyframes=He}_.replaceKeyframes=Ce})(h.sequence||(h.sequence={})),(_=>{(E=>{function P(A){var F;let N=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject;return N[F=A.objectKey]!=null||(N[F]={}),N[A.objectKey]}function I(A){let F=P(A);Zh(F,A.pathToProp,A.value)}E.setValueOfCompoundProp=I;function O(A){let F=P(A);Zh(F,A.pathToProp,A.value)}E.setValueOfPrimitiveProp=O;function R(A){let F=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject[A.objectKey];F&&Upe(F,A.pathToProp)}E.unsetValueOfPrimitiveProp=R})(_.byObject||(_.byObject={}))})(h.staticOverrides||(h.staticOverrides={}))})(l.sheetsById||(l.sheetsById={}))})(a.historic||(a.historic={}))})(s.coreByProject||(s.coreByProject={}))})($U||($U={}));function KU(){let s,a,l=new Promise((m,g)=>{s=b=>{m(b),h.status="resolved"},a=b=>{g(b),h.status="rejected"}}),h={resolve:s,reject:a,promise:l,status:"pending"};return h}var HMe=zt;function GMe(s){let a=s.getState(),l=new HMe.Atom(a);return s.subscribe(()=>{let h=s.getState();l.set(h),a=h}),l}zu();function WMe(s){var a,l=s.Symbol;return typeof l=="function"?l.observable?a=l.observable:(a=l("observable"),l.observable=a):a="@@observable",a}var A7;typeof self<"u"?A7=self:typeof window<"u"?A7=window:typeof Ki<"u"?A7=Ki:A7=t;var $Me=WMe(A7),Zpe=$Me,Qpe={INIT:"@@redux/INIT"};function Jpe(s,a,l){var h;if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error("Expected the enhancer to be a function.");return l(Jpe)(s,a)}if(typeof s!="function")throw new Error("Expected the reducer to be a function.");var m=s,g=a,b=[],_=b,E=!1;function P(){_===b&&(_=b.slice())}function I(){return g}function O(N){if(typeof N!="function")throw new Error("Expected listener to be a function.");var V=!0;return P(),_.push(N),function(){if(V){V=!1,P();var W=_.indexOf(N);_.splice(W,1)}}}function R(N){if(!V9(N))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof N.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(E)throw new Error("Reducers may not dispatch actions.");try{E=!0,g=m(g,N)}finally{E=!1}for(var V=b=_,W=0;W<V.length;W++){var $=V[W];$()}return N}function A(N){if(typeof N!="function")throw new Error("Expected the nextReducer to be a function.");m=N,R({type:Qpe.INIT})}function F(){var N,V=O;return N={subscribe:function(W){if(typeof W!="object")throw new TypeError("Expected the observer to be an object.");function $(){W.next&&W.next(I())}$();var Z=V($);return{unsubscribe:Z}}},N[Zpe]=function(){return this},N}return R({type:Qpe.INIT}),h={dispatch:R,subscribe:O,getState:I,replaceReducer:A},h[Zpe]=F,h}function KMe(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length===0?function(h){return h}:a.length===1?a[0]:a.reduce(function(h,m){return function(){return h(m.apply(void 0,arguments))}})}function XMe(s){let a=KMe();return Jpe(s.rootReducer,void 0,a)}qP(),x8();var XU=new WeakMap,qMe=(s,a,l)=>{let h=E=>{s.dispatch(h5.replacePersistentState(E))},m=efe(l),g=()=>s.getState().$persistent;_();let b=()=>{let E=g(),P=XU.get(s);E!==P&&(XU.set(s,E),localStorage.setItem(m,JSON.stringify(E)))};s.subscribe(Z9(b,1e3)),window&&window.addEventListener("beforeunload",b);function _(){let E=localStorage.getItem(m);if(E){let P,I=!0;try{P=JSON.parse(E),I=!1}catch{XP.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{I||h(P),a()}}else a()}},YMe=(s,a)=>{let l=efe(a),h=s.getState().$persistent;localStorage.removeItem(l),XU.set(s,h)};function efe(s){return s+".persistent"}ane(),nt(),Gh(),Ze(),MC();var ST=zt;pp(),fi(),$de();function qU(s){if(typeof s=="boolean"||typeof s=="string"||typeof s=="number")return s;if(V9(s)){let a={},l=!1;for(let[h,m]of Object.entries(s))qU(m)!==void 0&&(a[h]=m,l=!0);if(l)return a}else return}function tfe(s,a,l){for(let[h,m]of Object.entries(s.props))if(m.type==="compound")tfe(m,[...a,h],l);else{if(m.type==="enum")throw new Error("Not yet implemented");l(m,[...a,h])}}function ZMe(s,a,l){return{set:(h,m)=>{s();let g=qU(m);if(typeof g>"u")return;let{root:b,path:_}=(0,ST.getPointerParts)(h);if(wt(b)){let E=b.template.getMapOfValidSequenceTracks_forStudio().getValue(),P=SC(b.template.staticConfig,_);if(!P)throw new Error("Object ".concat(b.address.objectKey," does not have a prop at ").concat(JSON.stringify(_)));let I=(O,R,A)=>{if(O==null)return;if(qU(R.deserializeAndSanitize(O))===void 0)throw new Error("Invalid value ".concat(sU(O)," for object.props").concat(A.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is invalid"));let F=L(B({},b.address),{pathToProp:A}),N=Qc(E,A);if(typeof N=="string"){let V=b.sheet.getSequence();V.position=V.closestGridPosition(V.position),a.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(L(B({},F),{trackId:N,position:V.position,value:O,snappingFunction:V.closestGridPosition,type:"bezier"}))}else a.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(L(B({},F),{value:O}))};if(P.type==="compound"){let O=(0,ST.getPointerParts)(h).path,R=O.length;tfe(P,O,(A,F)=>{let N=F.slice(R),V=mp(g,N);if(typeof V<"u")I(V,A,F);else throw new Error("Property object.props".concat(F.map(W=>"[".concat(JSON.stringify(W),"]")).join("")," is required but not provided"))})}else{if(P.type==="enum")throw new Error("Enums aren't implemented yet");I(g,P,_)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:h=>{s();let{root:m,path:g}=(0,ST.getPointerParts)(h);if(wt(m)){let b=m.template.getMapOfValidSequenceTracks_forStudio().getValue(),_=mp(m.template.getDefaultValues().getValue(),g),E=SC(m.template.staticConfig,g),P=(I,O)=>{let R=L(B({},m.address),{pathToProp:O}),A=Qc(b,O);typeof A=="string"?a.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(L(B({},R),{trackId:A,position:m.sheet.getSequence().positionSnappedToGrid})):E!==void 0&&a.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(R)};E.type==="compound"?Ct(_,(I,O)=>{P(I,O)},(0,ST.getPointerParts)(h).path):P(_,g)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return s(),l},get stateEditors(){return a}}}var QMe=class{constructor(){xe(this,"_reduxStore"),xe(this,"_atom"),xe(this,"atomP"),this._reduxStore=XMe({rootReducer:IMe,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=GMe(this._reduxStore),this.atomP=this._atom.pointer}initialize(s){let a=KU();return s.usePersistentStorage===!0?qMe(this._reduxStore,()=>{this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()},s.persistenceKey):(this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()),a.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(s){return YMe(this._reduxStore,s),this.getState()}__dev_startHistoryFromScratch(s){this._reduxStore.dispatch(h5.historic.startHistoryFromScratch(h5.reduceParts(a=>L(B({},a),{historic:s}))))}tempTransaction(s){let a=AMe(),l,h=a.push(h5.reduceParts(m=>{let g={historic:HU(m.historic),ahistoric:HU(m.ahistoric),ephemeral:HU(m.ephemeral)},b=!0,_=()=>{if(!b)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},E=Ype(g),P=ZMe(_,E,g);try{return s(P),b=!1,{historic:GU(g.historic),ahistoric:GU(g.ahistoric),ephemeral:GU(g.ephemeral)}}catch(I){return l=I,m}finally{Ype(void 0)}}));if(this._reduxStore.dispatch(h),l)throw this._reduxStore.dispatch(a.discard()),l;return{commit:()=>{this._reduxStore.dispatch(a.commit())},discard:()=>{this._reduxStore.dispatch(a.discard())}}}undo(){this._reduxStore.dispatch(h5.historic.undo())}redo(){this._reduxStore.dispatch(h5.historic.redo())}createContentOfSaveFile(s){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s])throw new Error("Project ".concat(s," has not been initialized."));let a=one();this.tempTransaction(({stateEditors:h})=>{h.coreByProject.historic.revisionHistory.add({projectId:s,revision:a})}).commit();let l=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s];return B({},l)}},JMe=zt,YU=class{constructor(){xe(this,"_values",{})}get(s,a){if(this.has(s))return this._values[s];{let l=a();return this._values[s]=l,l}}has(s){return this._values.hasOwnProperty(s)}};nt(),up(),Me(),fi(),tU();var eke=class{constructor(s){xe(this,"ui",{hide(){de().ui.hide()},get isHidden(){return de().ui.isHidden},restore(){de().ui.restore()},renderToolset(a,l){return de().ui.renderToolset(a,l)}}),xe(this,"_cache",new YU),xe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){sTe()},__experimental_enablePlayPauseKeyboardShortcut(){oTe()},__experimental_clearPersistentStorage(a){return de().clearPersistentStorage(a)},__experimental_createContentOfSaveFileTyped(a){return de().createContentOfSaveFile(a)}})}initialize(s){return de().initialize(s)}extend(s,a){de().extend(s,a)}transaction(s){return de().transaction(({set:a,unset:l,stateEditors:h})=>s({set:a,unset:l,__experimental_forgetObject:m=>{if(!un(m))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");h.coreByProject.historic.sheetsById.forgetObject(m.address)},__experimental_forgetSheet:m=>{if(!rn(m))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");h.coreByProject.historic.sheetsById.forgetSheet(m.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,JMe.prism)(()=>lp().filter(s=>s.type==="Theatre_SheetObject"||s.type==="Theatre_Sheet").map(s=>s.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(s){let a=[...s].filter(l=>un(l)||rn(l)).map(l=>de().corePrivateAPI(l));de().transaction(({stateEditors:l})=>{l.studio.historic.panels.outline.selection.set(a)})}onSelectionChange(s){let a=de();return this._getSelectionPrism().onChange(a.ticker,s,!0)}get selection(){return this._getSelection()}scrub(){return de().scrub()}getStudioProject(){let s=de().core;if(!s)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return de().getStudioProject(s)}debouncedScrub(s=1e3){let a,l=Z9(()=>{let h=a;h&&(a=void 0,h.commit())},s);return{capture:h=>{a||(a=this.scrub());let m=!0;try{a.capture(h),m=!1}finally{if(m){let g=a;a=void 0,g.discard()}else l()}}}}createPane(s){return de().paneManager.createPane(s)}destroyPane(s){return de().paneManager.destroyPane(s)}createContentOfSaveFile(s){return de().createContentOfSaveFile(s)}};Yee();var zm=zt,tke=class{constructor(s){this._studio=s,xe(this,"_cache",new YU),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let s=this._getAllPanes();s.onStale(()=>{s.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,zm.prism)(()=>{if(!(0,zm.val)(this._studio.coreP))return{};let s=(0,zm.val)(this._studio.atomP.historic.panelInstanceDesceriptors),a=(0,zm.val)(this._studio.atomP.ephemeral.extensions.paneClasses),l={};for(let h of Object.values(s)){if(!h)continue;let m=a[h.paneClass];if(!m)continue;let{instanceId:g}=h,{extensionId:b,classDefinition:_}=m,E=zm.prism.memo("instance-".concat(h.instanceId),()=>({extensionId:b,instanceId:g,definition:_}),[_]);l[g]=E}return l}))}get allPanesD(){return this._getAllPanes()}createPane(s){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let a=(0,zm.val)(this._studio.atomP.ephemeral.extensions.paneClasses[s].extensionId),l=(0,zm.val)(this._studio.atomP.historic.panelInstanceDesceriptors),h;for(let m=1;m<1e3&&(h="".concat(s," #").concat(m),!!l[h]);m++);if(!a)throw new Error('Pane class "'.concat(s,'" is not registered.'));return this._studio.transaction(({drafts:m})=>{m.historic.panelInstanceDesceriptors[h]={instanceId:h,paneClass:s}}),this._getAllPanes().getValue()[h]}destroyPane(s){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:a})=>{delete a.historic.panelInstanceDesceriptors[s]})}},ET=zt;Me();var nfe=30*60*1e3,nke=1e3*60*60;function rke(){return ne(this,null,function*(){let s=de().atomP.ahistoric.visibilityState;if((0,ET.val)(s)==="everythingIsVisible")return;let a=KU(),l=(0,ET.pointerToPrism)(s).onStale(()=>{(0,ET.val)(s)==="everythingIsVisible"&&(l(),a.resolve(void 0))});return a.promise})}function ike(){return ne(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield CT(500),yield rke();;){let s=(0,ET.val)(de().atomP.ahistoric.updateChecker);if(s&&s.result!=="error"){let a=s.lastChecked,l=Date.now(),h=Math.abs(l-a);h<nfe&&(yield CT(nfe-h))}try{let a=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(a.ok){let l=yield a.json();if(!ske(l))throw new Error("Bad response");de().transaction(({drafts:h})=>{h.ahistoric.updateChecker={lastChecked:Date.now(),result:B({},l)}}),yield CT(1e3)}else throw new Error("HTTP Error ".concat(a.statusText))}catch{yield CT(nke)}}})}var CT=s=>new Promise(a=>setTimeout(a,s));function ske(s){if(typeof s!="object")return!1;let a=s;return typeof a.hasUpdates!="boolean"?!1:a.hasUpdates===!0&&typeof a.newVersion=="string"&&typeof a.releasePage=="string"||a.hasUpdates===!1}var oke=q(U8());function Id(s){return new Promise((a,l)=>{s.oncomplete=s.onsuccess=()=>a(s.result),s.onabort=s.onerror=()=>l(s.error)})}function rfe(s,a){let l=indexedDB.open(s);l.onupgradeneeded=()=>l.result.createObjectStore(a);let h=Id(l);return(m,g)=>h.then(b=>g(b.transaction(a,m).objectStore(a)))}var ZU;function m5(){return ZU||(ZU=rfe("keyval-store","keyval")),ZU}function ake(s,a=m5()){return a("readonly",l=>Id(l.get(s)))}function lke(s,a,l=m5()){return l("readwrite",h=>(h.put(a,s),Id(h.transaction)))}function uke(s,a=m5()){return a("readwrite",l=>(l.delete(s),Id(l.transaction)))}function QU(s,a){return s.openCursor().onsuccess=function(){this.result&&(a(this.result),this.result.continue())},Id(s.transaction)}function cke(s=m5()){return s("readonly",a=>{if(a.getAllKeys)return Id(a.getAllKeys());let l=[];return QU(a,h=>l.push(h.key)).then(()=>l)})}function dke(s=m5()){return s("readonly",a=>{if(a.getAll)return Id(a.getAll());let l=[];return QU(a,h=>l.push(h.value)).then(()=>l)})}function hke(s=m5()){return s("readonly",a=>{if(a.getAll&&a.getAllKeys)return Promise.all([Id(a.getAllKeys()),Id(a.getAll())]).then(([h,m])=>h.map((g,b)=>[g,m[b]]));let l=[];return s("readonly",h=>QU(h,m=>l.push([m.key,m.value])).then(()=>l))})}var pke=s=>{let a=rfe("theatrejs-".concat(s),"default-store");return{set:(l,h)=>lke(l,h,a),get:l=>ake(l,a),del:l=>uke(l,a),keys:()=>cke(a),entries:()=>hke(a),values:()=>dke(a)}};Ire(),Q6();var ife="theatre-0.4",fke=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,mke="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",gke=class{constructor(){xe(this,"ui"),xe(this,"publicApi"),xe(this,"address"),xe(this,"_projectsProxy",new pT.PointerProxy(new pT.Atom({}).pointer)),xe(this,"projectsP",this._projectsProxy.pointer),xe(this,"_store",new QMe),xe(this,"_corePrivateApi"),xe(this,"_cache",new YU),xe(this,"paneManager"),xe(this,"_coreAtom",new pT.Atom({})),xe(this,"_initializedDeferred",KU()),xe(this,"_initializeFnCalled",!1),xe(this,"_didWarnAboutNotInitializing",!1),xe(this,"_coreBits"),xe(this,"_rafDriver"),this.address={studioId:U6(10)},this.publicApi=new eke(this),this.ui=new uMe(this),this._attachToIncomingProjects(),this.paneManager=new tke(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(fke),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(s){return ne(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(mke);let a={persistenceKey:ife,usePersistentStorage:!0};if(typeof(s==null?void 0:s.persistenceKey)=="string"&&(a.persistenceKey=s.persistenceKey),((s==null?void 0:s.usePersistentStorage)===!1||typeof window>"u")&&(a.usePersistentStorage=!1),s!=null&&s.__experimental_rafDriver){if(s.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let l=this._coreBits.privateAPI(s.__experimental_rafDriver);if(!l)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=l}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(a)}catch(l){this._initializedDeferred.reject(l);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),ike().catch(l=>{console.error(l)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let s=(0,pT.pointerToPrism)(this.projectsP),a=l=>{for(let h of Object.values(l))h.isAttachedToStudio||h.attachToStudio(this)};s.onStale(()=>{a(s.getValue())}),a(s.getValue())}setCoreBits(s){this._coreBits=s,this._corePrivateApi=s.privateAPI,this._coreAtom.setByPointer(a=>a.core,s.coreExports),this._setProjectsP(s.projectsP)}_setProjectsP(s){this._projectsProxy.setPointer(s)}scrub(){return new aMe(this)}tempTransaction(s){return this._store.tempTransaction(s)}transaction(s){return this.tempTransaction(s).commit()}__dev_startHistoryFromScratch(s){return this._store.__dev_startHistoryFromScratch(s)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(s,a){if(!s||typeof s!="object")throw new Error("Extensions must be JS objects");if(typeof s.id!="string")throw new Error("extension.id must be a string");let l=(a==null?void 0:a.__experimental_reconfigure)===!0,h=s.id,m=this._store.getState().ephemeral.extensions.byId[h];if(m&&!l){if(s===m||(0,oke.default)(s,m))return;throw new Error('Extension id "'.concat(s.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:g})=>{var b,_;g.ephemeral.extensions.byId[s.id]=s;let E=g.ephemeral.extensions.paneClasses;l&&m&&((b=m.panes)==null||b.forEach(P=>{delete E[P.class]})),(_=s.panes)==null||_.forEach(P=>{if(typeof P.class!="string")throw new Error("pane.class must be a string");if(P.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let I=E[P.class];if(I)if(l&&I.extensionId===s.id)console.warn('Pane class "'.concat(P.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(P.class,'" already exists and is supplied by extension ').concat(I));E[P.class]={extensionId:s.id,classDefinition:P}})})}getStudioProject(s){return this._cache.get("getStudioProject",()=>s.getProject("Studio"))}getExtensionSheet(s,a){return this._cache.get("extensionSheet-"+s,()=>this.getStudioProject(a).sheet("Extension "+s))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(s){return this._store.createContentOfSaveFile(s)}createAssetStorage(s,a){return ne(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:P=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:P=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let l=pke("".concat(s.address.projectId,"-assets")),h=uF(s),m=yield l.keys();yield Promise.all(m.map(P=>ne(this,null,function*(){h.includes(P)||(yield l.del(P))}))),yield Promise.all(m.map(P=>ne(this,null,function*(){var I,O;let R="".concat(a,"/").concat(P);try{(yield fetch(R,{method:"HEAD"})).ok&&(yield l.del(P))}catch{Z6.error("Failed to access assets","Failed to access assets at ".concat((O=(I=s.config.assets)==null?void 0:I.baseUrl)!=null?O:"/",". This is likely due to a CORS issue."))}})));let g=new Map(yield l.entries()),b=new Map,_=P=>{if(b.has(P))return b.get(P);{let I=URL.createObjectURL(P);return b.set(P,I),I}},E=P=>{let I=g.get(P);if(!I)throw new Error("Asset with id ".concat(P," not found"));return _(I)};return{getAssetUrl:P=>g.has(P)?E(P):"".concat(a,"/").concat(P),createAsset:P=>ne(this,null,function*(){var I,O,R;let A=uF(s),F=!1;if(A.includes(P.name)){let N;try{N=(I=g.get(P.name))!=null?I:yield fetch("".concat(a,"/").concat(P.name)).then(V=>V.ok?V.blob():void 0)}catch{return Z6.error("Failed to access assets","Failed to access assets at ".concat((R=(O=s.config.assets)==null?void 0:O.baseUrl)!=null?R:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(N){if(F=yield(yield Promise.resolve().then(()=>q(sMe()))).default.isEqual(P,N),F)return P.name;{let V=W=>{let $=prompt(W,P.name);return $===null?!1:$===""?V("Asset name cannot be empty. Please choose a different file name for this asset."):A.includes($)?(console.log(A),V("An asset with this name already exists. Please choose a different file name for this asset.")):(P=new File([P],$,{type:P.type}),!0)};if(!V("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return g.set(P.name,P),yield l.set(P.name,P),P.name})}})}clearPersistentStorage(s=ife){this._store.__experimental_clearPersistentStorage(s)}},JU="__TheatreJS_StudioBundle",vke="__TheatreJS_CoreBundle",yke="__TheatreJS_Notifications",bke=class{constructor(s){this._studio=s,xe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(s){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=s;let a;s.getBitsForStudio(this._studio,l=>{a=l}),this._studio.setCoreBits(a)}},_ke=q(Fe());ze();var sfe,wke=ae.div(sfe||(sfe=J([""]))),xke=s=>_ke.default.createElement(wke,null),Ske=xke;Q6();var ez=new gke;_t(ez);var Eke=ez.publicApi,Cke=Eke;Pke();function Pke(){if(typeof window>"u")return;let s=window[JU];if(typeof s<"u")throw typeof s=="object"&&s&&typeof s.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(JU," seems to be already set by a module other than @theatre/core."));let a=new bke(ez);window[JU]=a;let l=window[vke];l&&l!==null&&l.type==="Theatre_CoreBundle"&&a.registerCoreBundle(l)}typeof window<"u"&&(window[yke]={notify:Z6});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(RA,RA.exports);var $De=RA.exports;const F8e=xge($De);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const h_="161",H5={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},G5={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KDe=0,t9e=1,XDe=2,B8e=1,qDe=2,qd=3,Ac=0,Ps=1,Ca=2,xl=0,P2=1,TG=2,MG=3,kG=4,U8e=5,Mf=100,z8e=101,V8e=102,AG=103,IG=104,g$=200,v$=201,y$=202,b$=203,Lb=204,Nb=205,_$=206,w$=207,x$=208,S$=209,j8e=210,E$=211,C$=212,P$=213,T$=214,YDe=0,ZDe=1,QDe=2,DA=3,JDe=4,eOe=5,tOe=6,nOe=7,kI=0,rOe=1,iOe=2,jf=0,sOe=1,oOe=2,aOe=3,lOe=4,uOe=5,cOe=6,n9e="attached",dOe="detached",k4=300,ig=301,sg=302,OA=303,RG=304,AI=306,gh=1e3,Ss=1001,DG=1002,Es=1003,r9e=1004,Ey=1005,as=1006,aj=1007,w2=1008,x0=1009,hOe=1010,pOe=1011,M$=1012,H8e=1013,th=1014,ml=1015,F2=1016,G8e=1017,W8e=1018,Hf=1020,fOe=1021,ea=1023,mOe=1024,gOe=1025,T2=1026,B2=1027,vOe=1028,$8e=1029,yOe=1030,K8e=1031,X8e=1033,lj=33776,uj=33777,cj=33778,dj=33779,i9e=35840,s9e=35841,o9e=35842,a9e=35843,q8e=36196,l9e=37492,u9e=37496,c9e=37808,d9e=37809,h9e=37810,p9e=37811,f9e=37812,m9e=37813,g9e=37814,v9e=37815,y9e=37816,b9e=37817,_9e=37818,w9e=37819,x9e=37820,S9e=37821,hj=36492,E9e=36494,C9e=36495,bOe=36283,P9e=36284,T9e=36285,M9e=36286,_Oe=2200,wOe=2201,xOe=2202,LA=2300,NA=2301,pj=2302,A4=2400,I4=2401,FA=2402,k$=2500,SOe=2501,II=3e3,lh=3001,p_=3200,EOe=3201,vg=0,COe=1,gl="",ls="srgb",vh="srgb-linear",A$="display-p3",RI="display-p3-linear",BA="linear",Ai="srgb",UA="rec709",zA="p3",W5=7680,k9e=519,POe=512,TOe=513,MOe=514,Y8e=515,kOe=516,AOe=517,IOe=518,ROe=519,A9e=35044,OG="300 es",LG=1035,nh=2e3,VA=2001;class k0{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,u=i.length;o<u;o++)i[o].call(this,e);e.target=null}}}const Xo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let I9e=1234567;const ab=Math.PI/180,og=180/Math.PI;function o1(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Xo[t&255]+Xo[t>>8&255]+Xo[t>>16&255]+Xo[t>>24&255]+"-"+Xo[e&255]+Xo[e>>8&255]+"-"+Xo[e>>16&15|64]+Xo[e>>24&255]+"-"+Xo[n&63|128]+Xo[n>>8&255]+"-"+Xo[n>>16&255]+Xo[n>>24&255]+Xo[r&255]+Xo[r>>8&255]+Xo[r>>16&255]+Xo[r>>24&255]).toLowerCase()}function Ls(t,e,n){return Math.max(e,Math.min(n,t))}function I$(t,e){return(t%e+e)%e}function DOe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function OOe(t,e,n){return t!==e?(n-t)/(e-t):0}function lb(t,e,n){return(1-n)*t+n*e}function LOe(t,e,n,r){return lb(t,e,1-Math.exp(-n*r))}function NOe(t,e=1){return e-Math.abs(I$(t,e*2)-e)}function FOe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function BOe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function UOe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function zOe(t,e){return t+Math.random()*(e-t)}function VOe(t){return t*(.5-Math.random())}function jOe(t){t!==void 0&&(I9e=t);let e=I9e+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function HOe(t){return t*ab}function GOe(t){return t*og}function NG(t){return(t&t-1)===0&&t!==0}function WOe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function jA(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function $Oe(t,e,n,r,i){const o=Math.cos,u=Math.sin,d=o(n/2),f=u(n/2),v=o((e+r)/2),x=u((e+r)/2),S=o((e-r)/2),M=u((e-r)/2),D=o((r-e)/2),G=u((r-e)/2);switch(i){case"XYX":t.set(d*x,f*S,f*M,d*v);break;case"YZY":t.set(f*M,d*x,f*S,d*v);break;case"ZXZ":t.set(f*S,f*M,d*x,d*v);break;case"XZX":t.set(d*x,f*G,f*D,d*v);break;case"YXY":t.set(f*D,d*x,f*G,d*v);break;case"ZYZ":t.set(f*G,f*D,d*x,d*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function m4(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ba(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Zo={DEG2RAD:ab,RAD2DEG:og,generateUUID:o1,clamp:Ls,euclideanModulo:I$,mapLinear:DOe,inverseLerp:OOe,lerp:lb,damp:LOe,pingpong:NOe,smoothstep:FOe,smootherstep:BOe,randInt:UOe,randFloat:zOe,randFloatSpread:VOe,seededRandom:jOe,degToRad:HOe,radToDeg:GOe,isPowerOfTwo:NG,ceilPowerOfTwo:WOe,floorPowerOfTwo:jA,setQuaternionFromProperEuler:$Oe,normalize:ba,denormalize:m4};class ln{constructor(e=0,n=0){ln.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ls(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,u=this.y-e.y;return this.x=o*r-u*i+e.x,this.y=o*i+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mr{constructor(e,n,r,i,o,u,d,f,v){mr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,d,f,v)}set(e,n,r,i,o,u,d,f,v){const x=this.elements;return x[0]=e,x[1]=i,x[2]=d,x[3]=n,x[4]=o,x[5]=f,x[6]=r,x[7]=u,x[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],d=r[3],f=r[6],v=r[1],x=r[4],S=r[7],M=r[2],D=r[5],G=r[8],B=i[0],L=i[3],U=i[6],C=i[1],H=i[4],X=i[7],fe=i[2],q=i[5],pe=i[8];return o[0]=u*B+d*C+f*fe,o[3]=u*L+d*H+f*q,o[6]=u*U+d*X+f*pe,o[1]=v*B+x*C+S*fe,o[4]=v*L+x*H+S*q,o[7]=v*U+x*X+S*pe,o[2]=M*B+D*C+G*fe,o[5]=M*L+D*H+G*q,o[8]=M*U+D*X+G*pe,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],d=e[5],f=e[6],v=e[7],x=e[8];return n*u*x-n*d*v-r*o*x+r*d*f+i*o*v-i*u*f}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],d=e[5],f=e[6],v=e[7],x=e[8],S=x*u-d*v,M=d*f-x*o,D=v*o-u*f,G=n*S+r*M+i*D;if(G===0)return this.set(0,0,0,0,0,0,0,0,0);const B=1/G;return e[0]=S*B,e[1]=(i*v-x*r)*B,e[2]=(d*r-i*u)*B,e[3]=M*B,e[4]=(x*n-i*f)*B,e[5]=(i*o-d*n)*B,e[6]=D*B,e[7]=(r*f-v*n)*B,e[8]=(u*n-r*o)*B,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,u,d){const f=Math.cos(o),v=Math.sin(o);return this.set(r*f,r*v,-r*(f*u+v*d)+u+e,-i*v,i*f,-i*(-v*u+f*d)+d+n,0,0,1),this}scale(e,n){return this.premultiply(fj.makeScale(e,n)),this}rotate(e){return this.premultiply(fj.makeRotation(-e)),this}translate(e,n){return this.premultiply(fj.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fj=new mr;function Z8e(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Fb(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function KOe(){const t=Fb("canvas");return t.style.display="block",t}const R9e={};function W4(t){t in R9e||(R9e[t]=!0,console.warn(t))}const D9e=new mr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),O9e=new mr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),JM={[vh]:{transfer:BA,primaries:UA,toReference:t=>t,fromReference:t=>t},[ls]:{transfer:Ai,primaries:UA,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[RI]:{transfer:BA,primaries:zA,toReference:t=>t.applyMatrix3(O9e),fromReference:t=>t.applyMatrix3(D9e)},[A$]:{transfer:Ai,primaries:zA,toReference:t=>t.convertSRGBToLinear().applyMatrix3(O9e),fromReference:t=>t.applyMatrix3(D9e).convertLinearToSRGB()}},XOe=new Set([vh,RI]),di={enabled:!0,_workingColorSpace:vh,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!XOe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=JM[e].toReference,i=JM[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return JM[t].primaries},getTransfer:function(t){return t===gl?BA:JM[t].transfer}};function $4(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function mj(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let $5;class Q8e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{$5===void 0&&($5=Fb("canvas")),$5.width=e.width,$5.height=e.height;const r=$5.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=$5}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Fb("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let u=0;u<o.length;u++)o[u]=$4(o[u]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor($4(n[r]/255)*255):n[r]=$4(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let qOe=0;class J8e{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qOe++}),this.uuid=o1(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let u=0,d=i.length;u<d;u++)i[u].isDataTexture?o.push(gj(i[u].image)):o.push(gj(i[u]))}else o=gj(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function gj(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Q8e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let YOe=0;class Qi extends k0{constructor(e=Qi.DEFAULT_IMAGE,n=Qi.DEFAULT_MAPPING,r=Ss,i=Ss,o=as,u=w2,d=ea,f=x0,v=Qi.DEFAULT_ANISOTROPY,x=gl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:YOe++}),this.uuid=o1(),this.name="",this.source=new J8e(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=u,this.anisotropy=v,this.format=d,this.internalFormat=null,this.type=f,this.offset=new ln(0,0),this.repeat=new ln(1,1),this.center=new ln(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof x=="string"?this.colorSpace=x:(W4("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=x===lh?ls:gl),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==k4)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case gh:e.x=e.x-Math.floor(e.x);break;case Ss:e.x=e.x<0?0:1;break;case DG:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case gh:e.y=e.y-Math.floor(e.y);break;case Ss:e.y=e.y<0?0:1;break;case DG:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return W4("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ls?lh:II}set encoding(e){W4("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===lh?ls:gl}}Qi.DEFAULT_IMAGE=null;Qi.DEFAULT_MAPPING=k4;Qi.DEFAULT_ANISOTROPY=1;class Dr{constructor(e=0,n=0,r=0,i=1){Dr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*i+u[12]*o,this.y=u[1]*n+u[5]*r+u[9]*i+u[13]*o,this.z=u[2]*n+u[6]*r+u[10]*i+u[14]*o,this.w=u[3]*n+u[7]*r+u[11]*i+u[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const f=e.elements,v=f[0],x=f[4],S=f[8],M=f[1],D=f[5],G=f[9],B=f[2],L=f[6],U=f[10];if(Math.abs(x-M)<.01&&Math.abs(S-B)<.01&&Math.abs(G-L)<.01){if(Math.abs(x+M)<.1&&Math.abs(S+B)<.1&&Math.abs(G+L)<.1&&Math.abs(v+D+U-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const H=(v+1)/2,X=(D+1)/2,fe=(U+1)/2,q=(x+M)/4,pe=(S+B)/4,xe=(G+L)/4;return H>X&&H>fe?H<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(H),i=q/r,o=pe/r):X>fe?X<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(X),r=q/i,o=xe/i):fe<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(fe),r=pe/o,i=xe/o),this.set(r,i,o,n),this}let C=Math.sqrt((L-G)*(L-G)+(S-B)*(S-B)+(M-x)*(M-x));return Math.abs(C)<.001&&(C=1),this.x=(L-G)/C,this.y=(S-B)/C,this.z=(M-x)/C,this.w=Math.acos((v+D+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ZOe extends k0{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Dr(0,0,e,n),this.scissorTest=!1,this.viewport=new Dr(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(W4("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===lh?ls:gl),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:as,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Qi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new J8e(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class C0 extends ZOe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class e6e extends Qi{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Es,this.minFilter=Es,this.wrapR=Ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class QOe extends Qi{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Es,this.minFilter=Es,this.wrapR=Ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ws{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,u,d){let f=r[i+0],v=r[i+1],x=r[i+2],S=r[i+3];const M=o[u+0],D=o[u+1],G=o[u+2],B=o[u+3];if(d===0){e[n+0]=f,e[n+1]=v,e[n+2]=x,e[n+3]=S;return}if(d===1){e[n+0]=M,e[n+1]=D,e[n+2]=G,e[n+3]=B;return}if(S!==B||f!==M||v!==D||x!==G){let L=1-d;const U=f*M+v*D+x*G+S*B,C=U>=0?1:-1,H=1-U*U;if(H>Number.EPSILON){const fe=Math.sqrt(H),q=Math.atan2(fe,U*C);L=Math.sin(L*q)/fe,d=Math.sin(d*q)/fe}const X=d*C;if(f=f*L+M*X,v=v*L+D*X,x=x*L+G*X,S=S*L+B*X,L===1-d){const fe=1/Math.sqrt(f*f+v*v+x*x+S*S);f*=fe,v*=fe,x*=fe,S*=fe}}e[n]=f,e[n+1]=v,e[n+2]=x,e[n+3]=S}static multiplyQuaternionsFlat(e,n,r,i,o,u){const d=r[i],f=r[i+1],v=r[i+2],x=r[i+3],S=o[u],M=o[u+1],D=o[u+2],G=o[u+3];return e[n]=d*G+x*S+f*D-v*M,e[n+1]=f*G+x*M+v*S-d*D,e[n+2]=v*G+x*D+d*M-f*S,e[n+3]=x*G-d*S-f*M-v*D,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,u=e._order,d=Math.cos,f=Math.sin,v=d(r/2),x=d(i/2),S=d(o/2),M=f(r/2),D=f(i/2),G=f(o/2);switch(u){case"XYZ":this._x=M*x*S+v*D*G,this._y=v*D*S-M*x*G,this._z=v*x*G+M*D*S,this._w=v*x*S-M*D*G;break;case"YXZ":this._x=M*x*S+v*D*G,this._y=v*D*S-M*x*G,this._z=v*x*G-M*D*S,this._w=v*x*S+M*D*G;break;case"ZXY":this._x=M*x*S-v*D*G,this._y=v*D*S+M*x*G,this._z=v*x*G+M*D*S,this._w=v*x*S-M*D*G;break;case"ZYX":this._x=M*x*S-v*D*G,this._y=v*D*S+M*x*G,this._z=v*x*G-M*D*S,this._w=v*x*S+M*D*G;break;case"YZX":this._x=M*x*S+v*D*G,this._y=v*D*S+M*x*G,this._z=v*x*G-M*D*S,this._w=v*x*S-M*D*G;break;case"XZY":this._x=M*x*S-v*D*G,this._y=v*D*S-M*x*G,this._z=v*x*G+M*D*S,this._w=v*x*S+M*D*G;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],u=n[1],d=n[5],f=n[9],v=n[2],x=n[6],S=n[10],M=r+d+S;if(M>0){const D=.5/Math.sqrt(M+1);this._w=.25/D,this._x=(x-f)*D,this._y=(o-v)*D,this._z=(u-i)*D}else if(r>d&&r>S){const D=2*Math.sqrt(1+r-d-S);this._w=(x-f)/D,this._x=.25*D,this._y=(i+u)/D,this._z=(o+v)/D}else if(d>S){const D=2*Math.sqrt(1+d-r-S);this._w=(o-v)/D,this._x=(i+u)/D,this._y=.25*D,this._z=(f+x)/D}else{const D=2*Math.sqrt(1+S-r-d);this._w=(u-i)/D,this._x=(o+v)/D,this._y=(f+x)/D,this._z=.25*D}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ls(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,u=e._w,d=n._x,f=n._y,v=n._z,x=n._w;return this._x=r*x+u*d+i*v-o*f,this._y=i*x+u*f+o*d-r*v,this._z=o*x+u*v+r*f-i*d,this._w=u*x-r*d-i*f-o*v,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,u=this._w;let d=u*e._w+r*e._x+i*e._y+o*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=u,this._x=r,this._y=i,this._z=o,this;const f=1-d*d;if(f<=Number.EPSILON){const D=1-n;return this._w=D*u+n*this._w,this._x=D*r+n*this._x,this._y=D*i+n*this._y,this._z=D*o+n*this._z,this.normalize(),this}const v=Math.sqrt(f),x=Math.atan2(v,d),S=Math.sin((1-n)*x)/v,M=Math.sin(n*x)/v;return this._w=u*S+this._w*M,this._x=r*S+this._x*M,this._y=i*S+this._y*M,this._z=o*S+this._z*M,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Oe{constructor(e=0,n=0,r=0){Oe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(L9e.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(L9e.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,u=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*u,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*u,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*u,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,u=e.y,d=e.z,f=e.w,v=2*(u*i-d*r),x=2*(d*n-o*i),S=2*(o*r-u*n);return this.x=n+f*v+u*S-d*x,this.y=r+f*x+d*v-o*S,this.z=i+f*S+o*x-u*v,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,u=n.x,d=n.y,f=n.z;return this.x=i*f-o*d,this.y=o*u-r*f,this.z=r*d-i*u,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return vj.copy(this).projectOnVector(e),this.sub(vj)}reflect(e){return this.sub(vj.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ls(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vj=new Oe,L9e=new Ws;class yg{constructor(e=new Oe(1/0,1/0,1/0),n=new Oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(fu.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(fu.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=fu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let u=0,d=o.count;u<d;u++)e.isMesh===!0?e.getVertexPosition(u,fu):fu.fromBufferAttribute(o,u),fu.applyMatrix4(e.matrixWorld),this.expandByPoint(fu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ek.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),ek.copy(r.boundingBox)),ek.applyMatrix4(e.matrixWorld),this.union(ek)}const i=e.children;for(let o=0,u=i.length;o<u;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fu),fu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cy),tk.subVectors(this.max,Cy),K5.subVectors(e.a,Cy),X5.subVectors(e.b,Cy),q5.subVectors(e.c,Cy),tf.subVectors(X5,K5),nf.subVectors(q5,X5),t2.subVectors(K5,q5);let n=[0,-tf.z,tf.y,0,-nf.z,nf.y,0,-t2.z,t2.y,tf.z,0,-tf.x,nf.z,0,-nf.x,t2.z,0,-t2.x,-tf.y,tf.x,0,-nf.y,nf.x,0,-t2.y,t2.x,0];return!yj(n,K5,X5,q5,tk)||(n=[1,0,0,0,1,0,0,0,1],!yj(n,K5,X5,q5,tk))?!1:(nk.crossVectors(tf,nf),n=[nk.x,nk.y,nk.z],yj(n,K5,X5,q5,tk))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(zd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zd=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],fu=new Oe,ek=new yg,K5=new Oe,X5=new Oe,q5=new Oe,tf=new Oe,nf=new Oe,t2=new Oe,Cy=new Oe,tk=new Oe,nk=new Oe,n2=new Oe;function yj(t,e,n,r,i){for(let o=0,u=t.length-3;o<=u;o+=3){n2.fromArray(t,o);const d=i.x*Math.abs(n2.x)+i.y*Math.abs(n2.y)+i.z*Math.abs(n2.z),f=e.dot(n2),v=n.dot(n2),x=r.dot(n2);if(Math.max(-Math.max(f,v,x),Math.min(f,v,x))>d)return!1}return!0}const JOe=new yg,Py=new Oe,bj=new Oe;class Z2{constructor(e=new Oe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):JOe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,u=e.length;o<u;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Py.subVectors(e,this.center);const n=Py.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Py,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bj.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Py.copy(e.center).add(bj)),this.expandByPoint(Py.copy(e.center).sub(bj))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vd=new Oe,_j=new Oe,rk=new Oe,rf=new Oe,wj=new Oe,ik=new Oe,xj=new Oe;class bg{constructor(e=new Oe,n=new Oe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vd)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Vd.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Vd.copy(this.origin).addScaledVector(this.direction,n),Vd.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){_j.copy(e).add(n).multiplyScalar(.5),rk.copy(n).sub(e).normalize(),rf.copy(this.origin).sub(_j);const o=e.distanceTo(n)*.5,u=-this.direction.dot(rk),d=rf.dot(this.direction),f=-rf.dot(rk),v=rf.lengthSq(),x=Math.abs(1-u*u);let S,M,D,G;if(x>0)if(S=u*f-d,M=u*d-f,G=o*x,S>=0)if(M>=-G)if(M<=G){const B=1/x;S*=B,M*=B,D=S*(S+u*M+2*d)+M*(u*S+M+2*f)+v}else M=o,S=Math.max(0,-(u*M+d)),D=-S*S+M*(M+2*f)+v;else M=-o,S=Math.max(0,-(u*M+d)),D=-S*S+M*(M+2*f)+v;else M<=-G?(S=Math.max(0,-(-u*o+d)),M=S>0?-o:Math.min(Math.max(-o,-f),o),D=-S*S+M*(M+2*f)+v):M<=G?(S=0,M=Math.min(Math.max(-o,-f),o),D=M*(M+2*f)+v):(S=Math.max(0,-(u*o+d)),M=S>0?o:Math.min(Math.max(-o,-f),o),D=-S*S+M*(M+2*f)+v);else M=u>0?-o:o,S=Math.max(0,-(u*M+d)),D=-S*S+M*(M+2*f)+v;return r&&r.copy(this.origin).addScaledVector(this.direction,S),i&&i.copy(_j).addScaledVector(rk,M),D}intersectSphere(e,n){Vd.subVectors(e.center,this.origin);const r=Vd.dot(this.direction),i=Vd.dot(Vd)-r*r,o=e.radius*e.radius;if(i>o)return null;const u=Math.sqrt(o-i),d=r-u,f=r+u;return f<0?null:d<0?this.at(f,n):this.at(d,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,u,d,f;const v=1/this.direction.x,x=1/this.direction.y,S=1/this.direction.z,M=this.origin;return v>=0?(r=(e.min.x-M.x)*v,i=(e.max.x-M.x)*v):(r=(e.max.x-M.x)*v,i=(e.min.x-M.x)*v),x>=0?(o=(e.min.y-M.y)*x,u=(e.max.y-M.y)*x):(o=(e.max.y-M.y)*x,u=(e.min.y-M.y)*x),r>u||o>i||((o>r||isNaN(r))&&(r=o),(u<i||isNaN(i))&&(i=u),S>=0?(d=(e.min.z-M.z)*S,f=(e.max.z-M.z)*S):(d=(e.max.z-M.z)*S,f=(e.min.z-M.z)*S),r>f||d>i)||((d>r||r!==r)&&(r=d),(f<i||i!==i)&&(i=f),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Vd)!==null}intersectTriangle(e,n,r,i,o){wj.subVectors(n,e),ik.subVectors(r,e),xj.crossVectors(wj,ik);let u=this.direction.dot(xj),d;if(u>0){if(i)return null;d=1}else if(u<0)d=-1,u=-u;else return null;rf.subVectors(this.origin,e);const f=d*this.direction.dot(ik.crossVectors(rf,ik));if(f<0)return null;const v=d*this.direction.dot(wj.cross(rf));if(v<0||f+v>u)return null;const x=-d*rf.dot(xj);return x<0?null:this.at(x/u,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Bn{constructor(e,n,r,i,o,u,d,f,v,x,S,M,D,G,B,L){Bn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,d,f,v,x,S,M,D,G,B,L)}set(e,n,r,i,o,u,d,f,v,x,S,M,D,G,B,L){const U=this.elements;return U[0]=e,U[4]=n,U[8]=r,U[12]=i,U[1]=o,U[5]=u,U[9]=d,U[13]=f,U[2]=v,U[6]=x,U[10]=S,U[14]=M,U[3]=D,U[7]=G,U[11]=B,U[15]=L,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Y5.setFromMatrixColumn(e,0).length(),o=1/Y5.setFromMatrixColumn(e,1).length(),u=1/Y5.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,u=Math.cos(r),d=Math.sin(r),f=Math.cos(i),v=Math.sin(i),x=Math.cos(o),S=Math.sin(o);if(e.order==="XYZ"){const M=u*x,D=u*S,G=d*x,B=d*S;n[0]=f*x,n[4]=-f*S,n[8]=v,n[1]=D+G*v,n[5]=M-B*v,n[9]=-d*f,n[2]=B-M*v,n[6]=G+D*v,n[10]=u*f}else if(e.order==="YXZ"){const M=f*x,D=f*S,G=v*x,B=v*S;n[0]=M+B*d,n[4]=G*d-D,n[8]=u*v,n[1]=u*S,n[5]=u*x,n[9]=-d,n[2]=D*d-G,n[6]=B+M*d,n[10]=u*f}else if(e.order==="ZXY"){const M=f*x,D=f*S,G=v*x,B=v*S;n[0]=M-B*d,n[4]=-u*S,n[8]=G+D*d,n[1]=D+G*d,n[5]=u*x,n[9]=B-M*d,n[2]=-u*v,n[6]=d,n[10]=u*f}else if(e.order==="ZYX"){const M=u*x,D=u*S,G=d*x,B=d*S;n[0]=f*x,n[4]=G*v-D,n[8]=M*v+B,n[1]=f*S,n[5]=B*v+M,n[9]=D*v-G,n[2]=-v,n[6]=d*f,n[10]=u*f}else if(e.order==="YZX"){const M=u*f,D=u*v,G=d*f,B=d*v;n[0]=f*x,n[4]=B-M*S,n[8]=G*S+D,n[1]=S,n[5]=u*x,n[9]=-d*x,n[2]=-v*x,n[6]=D*S+G,n[10]=M-B*S}else if(e.order==="XZY"){const M=u*f,D=u*v,G=d*f,B=d*v;n[0]=f*x,n[4]=-S,n[8]=v*x,n[1]=M*S+B,n[5]=u*x,n[9]=D*S-G,n[2]=G*S-D,n[6]=d*x,n[10]=B*S+M}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(eLe,e,tLe)}lookAt(e,n,r){const i=this.elements;return v0.subVectors(e,n),v0.lengthSq()===0&&(v0.z=1),v0.normalize(),sf.crossVectors(r,v0),sf.lengthSq()===0&&(Math.abs(r.z)===1?v0.x+=1e-4:v0.z+=1e-4,v0.normalize(),sf.crossVectors(r,v0)),sf.normalize(),sk.crossVectors(v0,sf),i[0]=sf.x,i[4]=sk.x,i[8]=v0.x,i[1]=sf.y,i[5]=sk.y,i[9]=v0.y,i[2]=sf.z,i[6]=sk.z,i[10]=v0.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],d=r[4],f=r[8],v=r[12],x=r[1],S=r[5],M=r[9],D=r[13],G=r[2],B=r[6],L=r[10],U=r[14],C=r[3],H=r[7],X=r[11],fe=r[15],q=i[0],pe=i[4],xe=i[8],J=i[12],ne=i[1],Pe=i[5],mt=i[9],_t=i[13],de=i[2],je=i[6],Me=i[10],Ct=i[14],We=i[3],tt=i[7],Ze=i[11],dt=i[15];return o[0]=u*q+d*ne+f*de+v*We,o[4]=u*pe+d*Pe+f*je+v*tt,o[8]=u*xe+d*mt+f*Me+v*Ze,o[12]=u*J+d*_t+f*Ct+v*dt,o[1]=x*q+S*ne+M*de+D*We,o[5]=x*pe+S*Pe+M*je+D*tt,o[9]=x*xe+S*mt+M*Me+D*Ze,o[13]=x*J+S*_t+M*Ct+D*dt,o[2]=G*q+B*ne+L*de+U*We,o[6]=G*pe+B*Pe+L*je+U*tt,o[10]=G*xe+B*mt+L*Me+U*Ze,o[14]=G*J+B*_t+L*Ct+U*dt,o[3]=C*q+H*ne+X*de+fe*We,o[7]=C*pe+H*Pe+X*je+fe*tt,o[11]=C*xe+H*mt+X*Me+fe*Ze,o[15]=C*J+H*_t+X*Ct+fe*dt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],u=e[1],d=e[5],f=e[9],v=e[13],x=e[2],S=e[6],M=e[10],D=e[14],G=e[3],B=e[7],L=e[11],U=e[15];return G*(+o*f*S-i*v*S-o*d*M+r*v*M+i*d*D-r*f*D)+B*(+n*f*D-n*v*M+o*u*M-i*u*D+i*v*x-o*f*x)+L*(+n*v*S-n*d*D-o*u*S+r*u*D+o*d*x-r*v*x)+U*(-i*d*x-n*f*S+n*d*M+i*u*S-r*u*M+r*f*x)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],d=e[5],f=e[6],v=e[7],x=e[8],S=e[9],M=e[10],D=e[11],G=e[12],B=e[13],L=e[14],U=e[15],C=S*L*v-B*M*v+B*f*D-d*L*D-S*f*U+d*M*U,H=G*M*v-x*L*v-G*f*D+u*L*D+x*f*U-u*M*U,X=x*B*v-G*S*v+G*d*D-u*B*D-x*d*U+u*S*U,fe=G*S*f-x*B*f-G*d*M+u*B*M+x*d*L-u*S*L,q=n*C+r*H+i*X+o*fe;if(q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const pe=1/q;return e[0]=C*pe,e[1]=(B*M*o-S*L*o-B*i*D+r*L*D+S*i*U-r*M*U)*pe,e[2]=(d*L*o-B*f*o+B*i*v-r*L*v-d*i*U+r*f*U)*pe,e[3]=(S*f*o-d*M*o-S*i*v+r*M*v+d*i*D-r*f*D)*pe,e[4]=H*pe,e[5]=(x*L*o-G*M*o+G*i*D-n*L*D-x*i*U+n*M*U)*pe,e[6]=(G*f*o-u*L*o-G*i*v+n*L*v+u*i*U-n*f*U)*pe,e[7]=(u*M*o-x*f*o+x*i*v-n*M*v-u*i*D+n*f*D)*pe,e[8]=X*pe,e[9]=(G*S*o-x*B*o-G*r*D+n*B*D+x*r*U-n*S*U)*pe,e[10]=(u*B*o-G*d*o+G*r*v-n*B*v-u*r*U+n*d*U)*pe,e[11]=(x*d*o-u*S*o-x*r*v+n*S*v+u*r*D-n*d*D)*pe,e[12]=fe*pe,e[13]=(x*B*i-G*S*i+G*r*M-n*B*M-x*r*L+n*S*L)*pe,e[14]=(G*d*i-u*B*i-G*r*f+n*B*f+u*r*L-n*d*L)*pe,e[15]=(u*S*i-x*d*i+x*r*f-n*S*f-u*r*M+n*d*M)*pe,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,u=e.x,d=e.y,f=e.z,v=o*u,x=o*d;return this.set(v*u+r,v*d-i*f,v*f+i*d,0,v*d+i*f,x*d+r,x*f-i*u,0,v*f-i*d,x*f+i*u,o*f*f+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,u){return this.set(1,r,o,0,e,1,u,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,u=n._y,d=n._z,f=n._w,v=o+o,x=u+u,S=d+d,M=o*v,D=o*x,G=o*S,B=u*x,L=u*S,U=d*S,C=f*v,H=f*x,X=f*S,fe=r.x,q=r.y,pe=r.z;return i[0]=(1-(B+U))*fe,i[1]=(D+X)*fe,i[2]=(G-H)*fe,i[3]=0,i[4]=(D-X)*q,i[5]=(1-(M+U))*q,i[6]=(L+C)*q,i[7]=0,i[8]=(G+H)*pe,i[9]=(L-C)*pe,i[10]=(1-(M+B))*pe,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=Y5.set(i[0],i[1],i[2]).length();const u=Y5.set(i[4],i[5],i[6]).length(),d=Y5.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],mu.copy(this);const v=1/o,x=1/u,S=1/d;return mu.elements[0]*=v,mu.elements[1]*=v,mu.elements[2]*=v,mu.elements[4]*=x,mu.elements[5]*=x,mu.elements[6]*=x,mu.elements[8]*=S,mu.elements[9]*=S,mu.elements[10]*=S,n.setFromRotationMatrix(mu),r.x=o,r.y=u,r.z=d,this}makePerspective(e,n,r,i,o,u,d=nh){const f=this.elements,v=2*o/(n-e),x=2*o/(r-i),S=(n+e)/(n-e),M=(r+i)/(r-i);let D,G;if(d===nh)D=-(u+o)/(u-o),G=-2*u*o/(u-o);else if(d===VA)D=-u/(u-o),G=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);return f[0]=v,f[4]=0,f[8]=S,f[12]=0,f[1]=0,f[5]=x,f[9]=M,f[13]=0,f[2]=0,f[6]=0,f[10]=D,f[14]=G,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,n,r,i,o,u,d=nh){const f=this.elements,v=1/(n-e),x=1/(r-i),S=1/(u-o),M=(n+e)*v,D=(r+i)*x;let G,B;if(d===nh)G=(u+o)*S,B=-2*S;else if(d===VA)G=o*S,B=-1*S;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);return f[0]=2*v,f[4]=0,f[8]=0,f[12]=-M,f[1]=0,f[5]=2*x,f[9]=0,f[13]=-D,f[2]=0,f[6]=0,f[10]=B,f[14]=-G,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Y5=new Oe,mu=new Bn,eLe=new Oe(0,0,0),tLe=new Oe(1,1,1),sf=new Oe,sk=new Oe,v0=new Oe,N9e=new Bn,F9e=new Ws;class Ea{constructor(e=0,n=0,r=0,i=Ea.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],u=i[4],d=i[8],f=i[1],v=i[5],x=i[9],S=i[2],M=i[6],D=i[10];switch(n){case"XYZ":this._y=Math.asin(Ls(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-x,D),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(M,v),this._z=0);break;case"YXZ":this._x=Math.asin(-Ls(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(d,D),this._z=Math.atan2(f,v)):(this._y=Math.atan2(-S,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ls(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(-S,D),this._z=Math.atan2(-u,v)):(this._y=0,this._z=Math.atan2(f,o));break;case"ZYX":this._y=Math.asin(-Ls(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(M,D),this._z=Math.atan2(f,o)):(this._x=0,this._z=Math.atan2(-u,v));break;case"YZX":this._z=Math.asin(Ls(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-x,v),this._y=Math.atan2(-S,o)):(this._x=0,this._y=Math.atan2(d,D));break;case"XZY":this._z=Math.asin(-Ls(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(M,v),this._y=Math.atan2(d,o)):(this._x=Math.atan2(-x,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return N9e.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N9e,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return F9e.setFromEuler(this),this.setFromQuaternion(F9e,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ea.DEFAULT_ORDER="XYZ";class R${constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let nLe=0;const B9e=new Oe,Z5=new Ws,jd=new Bn,ok=new Oe,Ty=new Oe,rLe=new Oe,iLe=new Ws,U9e=new Oe(1,0,0),z9e=new Oe(0,1,0),V9e=new Oe(0,0,1),sLe={type:"added"},oLe={type:"removed"};class Or extends k0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nLe++}),this.uuid=o1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Or.DEFAULT_UP.clone();const e=new Oe,n=new Ea,r=new Ws,i=new Oe(1,1,1);function o(){r.setFromEuler(n,!1)}function u(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Bn},normalMatrix:{value:new mr}}),this.matrix=new Bn,this.matrixWorld=new Bn,this.matrixAutoUpdate=Or.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Or.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new R$,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Z5.setFromAxisAngle(e,n),this.quaternion.multiply(Z5),this}rotateOnWorldAxis(e,n){return Z5.setFromAxisAngle(e,n),this.quaternion.premultiply(Z5),this}rotateX(e){return this.rotateOnAxis(U9e,e)}rotateY(e){return this.rotateOnAxis(z9e,e)}rotateZ(e){return this.rotateOnAxis(V9e,e)}translateOnAxis(e,n){return B9e.copy(e).applyQuaternion(this.quaternion),this.position.add(B9e.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(U9e,e)}translateY(e){return this.translateOnAxis(z9e,e)}translateZ(e){return this.translateOnAxis(V9e,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(jd.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ok.copy(e):ok.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ty.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jd.lookAt(Ty,ok,this.up):jd.lookAt(ok,Ty,this.up),this.quaternion.setFromRotationMatrix(jd),i&&(jd.extractRotation(i.matrixWorld),Z5.setFromRotationMatrix(jd),this.quaternion.premultiply(Z5.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(sLe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(oLe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),jd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),jd.multiply(e.parent.matrixWorld)),e.applyMatrix4(jd),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const u=this.children[r].getObjectByProperty(e,n);if(u!==void 0)return u}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,u=i.length;o<u;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ty,e,rLe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ty,iLe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,u=i.length;o<u;o++){const d=i[o];d.matrixWorldAutoUpdate===!0&&d.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(d=>({boxInitialized:d.boxInitialized,boxMin:d.box.min.toArray(),boxMax:d.box.max.toArray(),sphereInitialized:d.sphereInitialized,sphereRadius:d.sphere.radius,sphereCenter:d.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(d,f){return d[f.uuid]===void 0&&(d[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const f=d.shapes;if(Array.isArray(f))for(let v=0,x=f.length;v<x;v++){const S=f[v];o(e.shapes,S)}else o(e.shapes,f)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let f=0,v=this.material.length;f<v;f++)d.push(o(e.materials,this.material[f]));i.material=d}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let d=0;d<this.children.length;d++)i.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let d=0;d<this.animations.length;d++){const f=this.animations[d];i.animations.push(o(e.animations,f))}}if(n){const d=u(e.geometries),f=u(e.materials),v=u(e.textures),x=u(e.images),S=u(e.shapes),M=u(e.skeletons),D=u(e.animations),G=u(e.nodes);d.length>0&&(r.geometries=d),f.length>0&&(r.materials=f),v.length>0&&(r.textures=v),x.length>0&&(r.images=x),S.length>0&&(r.shapes=S),M.length>0&&(r.skeletons=M),D.length>0&&(r.animations=D),G.length>0&&(r.nodes=G)}return r.object=i,r;function u(d){const f=[];for(const v in d){const x=d[v];delete x.metadata,f.push(x)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Or.DEFAULT_UP=new Oe(0,1,0);Or.DEFAULT_MATRIX_AUTO_UPDATE=!0;Or.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gu=new Oe,Hd=new Oe,Sj=new Oe,Gd=new Oe,Q5=new Oe,J5=new Oe,j9e=new Oe,Ej=new Oe,Cj=new Oe,Pj=new Oe;class Cc{constructor(e=new Oe,n=new Oe,r=new Oe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),gu.subVectors(e,n),i.cross(gu);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){gu.subVectors(i,n),Hd.subVectors(r,n),Sj.subVectors(e,n);const u=gu.dot(gu),d=gu.dot(Hd),f=gu.dot(Sj),v=Hd.dot(Hd),x=Hd.dot(Sj),S=u*v-d*d;if(S===0)return o.set(0,0,0),null;const M=1/S,D=(v*f-d*x)*M,G=(u*x-d*f)*M;return o.set(1-D-G,G,D)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Gd)===null?!1:Gd.x>=0&&Gd.y>=0&&Gd.x+Gd.y<=1}static getInterpolation(e,n,r,i,o,u,d,f){return this.getBarycoord(e,n,r,i,Gd)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(o,Gd.x),f.addScaledVector(u,Gd.y),f.addScaledVector(d,Gd.z),f)}static isFrontFacing(e,n,r,i){return gu.subVectors(r,n),Hd.subVectors(e,n),gu.cross(Hd).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gu.subVectors(this.c,this.b),Hd.subVectors(this.a,this.b),gu.cross(Hd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Cc.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return Cc.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Cc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let u,d;Q5.subVectors(i,r),J5.subVectors(o,r),Ej.subVectors(e,r);const f=Q5.dot(Ej),v=J5.dot(Ej);if(f<=0&&v<=0)return n.copy(r);Cj.subVectors(e,i);const x=Q5.dot(Cj),S=J5.dot(Cj);if(x>=0&&S<=x)return n.copy(i);const M=f*S-x*v;if(M<=0&&f>=0&&x<=0)return u=f/(f-x),n.copy(r).addScaledVector(Q5,u);Pj.subVectors(e,o);const D=Q5.dot(Pj),G=J5.dot(Pj);if(G>=0&&D<=G)return n.copy(o);const B=D*v-f*G;if(B<=0&&v>=0&&G<=0)return d=v/(v-G),n.copy(r).addScaledVector(J5,d);const L=x*G-D*S;if(L<=0&&S-x>=0&&D-G>=0)return j9e.subVectors(o,i),d=(S-x)/(S-x+(D-G)),n.copy(i).addScaledVector(j9e,d);const U=1/(L+B+M);return u=B*U,d=M*U,n.copy(r).addScaledVector(Q5,u).addScaledVector(J5,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const t6e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},of={h:0,s:0,l:0},ak={h:0,s:0,l:0};function Tj(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class vn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ls){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,di.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=di.workingColorSpace){return this.r=e,this.g=n,this.b=r,di.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=di.workingColorSpace){if(e=I$(e,1),n=Ls(n,0,1),r=Ls(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;this.r=Tj(u,o,e+1/3),this.g=Tj(u,o,e),this.b=Tj(u,o,e-1/3)}return di.toWorkingColorSpace(this,i),this}setStyle(e,n=ls){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const u=i[1],d=i[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(u===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ls){const r=t6e[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$4(e.r),this.g=$4(e.g),this.b=$4(e.b),this}copyLinearToSRGB(e){return this.r=mj(e.r),this.g=mj(e.g),this.b=mj(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ls){return di.fromWorkingColorSpace(qo.copy(this),e),Math.round(Ls(qo.r*255,0,255))*65536+Math.round(Ls(qo.g*255,0,255))*256+Math.round(Ls(qo.b*255,0,255))}getHexString(e=ls){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=di.workingColorSpace){di.fromWorkingColorSpace(qo.copy(this),n);const r=qo.r,i=qo.g,o=qo.b,u=Math.max(r,i,o),d=Math.min(r,i,o);let f,v;const x=(d+u)/2;if(d===u)f=0,v=0;else{const S=u-d;switch(v=x<=.5?S/(u+d):S/(2-u-d),u){case r:f=(i-o)/S+(i<o?6:0);break;case i:f=(o-r)/S+2;break;case o:f=(r-i)/S+4;break}f/=6}return e.h=f,e.s=v,e.l=x,e}getRGB(e,n=di.workingColorSpace){return di.fromWorkingColorSpace(qo.copy(this),n),e.r=qo.r,e.g=qo.g,e.b=qo.b,e}getStyle(e=ls){di.fromWorkingColorSpace(qo.copy(this),e);const n=qo.r,r=qo.g,i=qo.b;return e!==ls?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(of),this.setHSL(of.h+e,of.s+n,of.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(of),e.getHSL(ak);const r=lb(of.h,ak.h,n),i=lb(of.s,ak.s,n),o=lb(of.l,ak.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qo=new vn;vn.NAMES=t6e;let aLe=0;class A0 extends k0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:aLe++}),this.uuid=o1(),this.name="",this.type="Material",this.blending=P2,this.side=Ac,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Lb,this.blendDst=Nb,this.blendEquation=Mf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vn(0,0,0),this.blendAlpha=0,this.depthFunc=DA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=k9e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=W5,this.stencilZFail=W5,this.stencilZPass=W5,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==P2&&(r.blending=this.blending),this.side!==Ac&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Lb&&(r.blendSrc=this.blendSrc),this.blendDst!==Nb&&(r.blendDst=this.blendDst),this.blendEquation!==Mf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==DA&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==k9e&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==W5&&(r.stencilFail=this.stencilFail),this.stencilZFail!==W5&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==W5&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const u=[];for(const d in o){const f=o[d];delete f.metadata,u.push(f)}return u}if(n){const o=i(e.textures),u=i(e.images);o.length>0&&(r.textures=o),u.length>0&&(r.images=u)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Zf extends A0{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Qd=lLe();function lLe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let f=0;f<256;++f){const v=f-127;v<-27?(r[f]=0,r[f|256]=32768,i[f]=24,i[f|256]=24):v<-14?(r[f]=1024>>-v-14,r[f|256]=1024>>-v-14|32768,i[f]=-v-1,i[f|256]=-v-1):v<=15?(r[f]=v+15<<10,r[f|256]=v+15<<10|32768,i[f]=13,i[f|256]=13):v<128?(r[f]=31744,r[f|256]=64512,i[f]=24,i[f|256]=24):(r[f]=31744,r[f|256]=64512,i[f]=13,i[f|256]=13)}const o=new Uint32Array(2048),u=new Uint32Array(64),d=new Uint32Array(64);for(let f=1;f<1024;++f){let v=f<<13,x=0;for(;!(v&8388608);)v<<=1,x-=8388608;v&=-8388609,x+=947912704,o[f]=v|x}for(let f=1024;f<2048;++f)o[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)u[f]=f<<23;u[31]=1199570944,u[32]=2147483648;for(let f=33;f<63;++f)u[f]=2147483648+(f-32<<23);u[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(d[f]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:u,offsetTable:d}}function uLe(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ls(t,-65504,65504),Qd.floatView[0]=t;const e=Qd.uint32View[0],n=e>>23&511;return Qd.baseTable[n]+((e&8388607)>>Qd.shiftTable[n])}function cLe(t){const e=t>>10;return Qd.uint32View[0]=Qd.mantissaTable[Qd.offsetTable[e]+(t&1023)]+Qd.exponentTable[e],Qd.floatView[0]}const H9e={toHalfFloat:uLe,fromHalfFloat:cLe},Ds=new Oe,lk=new ln;class Ta{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=A9e,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ml,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return W4("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)lk.fromBufferAttribute(this,n),lk.applyMatrix3(e),this.setXY(n,lk.x,lk.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ds.fromBufferAttribute(this,n),Ds.applyMatrix3(e),this.setXYZ(n,Ds.x,Ds.y,Ds.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ds.fromBufferAttribute(this,n),Ds.applyMatrix4(e),this.setXYZ(n,Ds.x,Ds.y,Ds.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ds.fromBufferAttribute(this,n),Ds.applyNormalMatrix(e),this.setXYZ(n,Ds.x,Ds.y,Ds.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ds.fromBufferAttribute(this,n),Ds.transformDirection(e),this.setXYZ(n,Ds.x,Ds.y,Ds.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=m4(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ba(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=m4(n,this.array)),n}setX(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=m4(n,this.array)),n}setY(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=m4(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=m4(n,this.array)),n}setW(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),r=ba(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),r=ba(r,this.array),i=ba(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),r=ba(r,this.array),i=ba(i,this.array),o=ba(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==A9e&&(e.usage=this.usage),e}}class D$ extends Ta{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class n6e extends Ta{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Vr extends Ta{constructor(e,n,r){super(new Float32Array(e),n,r)}}let dLe=0;const al=new Bn,Mj=new Or,e4=new Oe,y0=new yg,My=new yg,so=new Oe;class Ji extends k0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dLe++}),this.uuid=o1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Z8e(e)?n6e:D$)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new mr().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return al.makeRotationFromQuaternion(e),this.applyMatrix4(al),this}rotateX(e){return al.makeRotationX(e),this.applyMatrix4(al),this}rotateY(e){return al.makeRotationY(e),this.applyMatrix4(al),this}rotateZ(e){return al.makeRotationZ(e),this.applyMatrix4(al),this}translate(e,n,r){return al.makeTranslation(e,n,r),this.applyMatrix4(al),this}scale(e,n,r){return al.makeScale(e,n,r),this.applyMatrix4(al),this}lookAt(e){return Mj.lookAt(e),Mj.updateMatrix(),this.applyMatrix4(Mj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(e4).negate(),this.translate(e4.x,e4.y,e4.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Vr(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yg);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];y0.setFromBufferAttribute(o),this.morphTargetsRelative?(so.addVectors(this.boundingBox.min,y0.min),this.boundingBox.expandByPoint(so),so.addVectors(this.boundingBox.max,y0.max),this.boundingBox.expandByPoint(so)):(this.boundingBox.expandByPoint(y0.min),this.boundingBox.expandByPoint(y0.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Z2);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Oe,1/0);return}if(e){const r=this.boundingSphere.center;if(y0.setFromBufferAttribute(e),n)for(let o=0,u=n.length;o<u;o++){const d=n[o];My.setFromBufferAttribute(d),this.morphTargetsRelative?(so.addVectors(y0.min,My.min),y0.expandByPoint(so),so.addVectors(y0.max,My.max),y0.expandByPoint(so)):(y0.expandByPoint(My.min),y0.expandByPoint(My.max))}y0.getCenter(r);let i=0;for(let o=0,u=e.count;o<u;o++)so.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(so));if(n)for(let o=0,u=n.length;o<u;o++){const d=n[o],f=this.morphTargetsRelative;for(let v=0,x=d.count;v<x;v++)so.fromBufferAttribute(d,v),f&&(e4.fromBufferAttribute(e,v),so.add(e4)),i=Math.max(i,r.distanceToSquared(so))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,u=n.uv.array,d=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ta(new Float32Array(4*d),4));const f=this.getAttribute("tangent").array,v=[],x=[];for(let ne=0;ne<d;ne++)v[ne]=new Oe,x[ne]=new Oe;const S=new Oe,M=new Oe,D=new Oe,G=new ln,B=new ln,L=new ln,U=new Oe,C=new Oe;function H(ne,Pe,mt){S.fromArray(i,ne*3),M.fromArray(i,Pe*3),D.fromArray(i,mt*3),G.fromArray(u,ne*2),B.fromArray(u,Pe*2),L.fromArray(u,mt*2),M.sub(S),D.sub(S),B.sub(G),L.sub(G);const _t=1/(B.x*L.y-L.x*B.y);isFinite(_t)&&(U.copy(M).multiplyScalar(L.y).addScaledVector(D,-B.y).multiplyScalar(_t),C.copy(D).multiplyScalar(B.x).addScaledVector(M,-L.x).multiplyScalar(_t),v[ne].add(U),v[Pe].add(U),v[mt].add(U),x[ne].add(C),x[Pe].add(C),x[mt].add(C))}let X=this.groups;X.length===0&&(X=[{start:0,count:r.length}]);for(let ne=0,Pe=X.length;ne<Pe;++ne){const mt=X[ne],_t=mt.start,de=mt.count;for(let je=_t,Me=_t+de;je<Me;je+=3)H(r[je+0],r[je+1],r[je+2])}const fe=new Oe,q=new Oe,pe=new Oe,xe=new Oe;function J(ne){pe.fromArray(o,ne*3),xe.copy(pe);const Pe=v[ne];fe.copy(Pe),fe.sub(pe.multiplyScalar(pe.dot(Pe))).normalize(),q.crossVectors(xe,Pe);const _t=q.dot(x[ne])<0?-1:1;f[ne*4]=fe.x,f[ne*4+1]=fe.y,f[ne*4+2]=fe.z,f[ne*4+3]=_t}for(let ne=0,Pe=X.length;ne<Pe;++ne){const mt=X[ne],_t=mt.start,de=mt.count;for(let je=_t,Me=_t+de;je<Me;je+=3)J(r[je+0]),J(r[je+1]),J(r[je+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ta(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let M=0,D=r.count;M<D;M++)r.setXYZ(M,0,0,0);const i=new Oe,o=new Oe,u=new Oe,d=new Oe,f=new Oe,v=new Oe,x=new Oe,S=new Oe;if(e)for(let M=0,D=e.count;M<D;M+=3){const G=e.getX(M+0),B=e.getX(M+1),L=e.getX(M+2);i.fromBufferAttribute(n,G),o.fromBufferAttribute(n,B),u.fromBufferAttribute(n,L),x.subVectors(u,o),S.subVectors(i,o),x.cross(S),d.fromBufferAttribute(r,G),f.fromBufferAttribute(r,B),v.fromBufferAttribute(r,L),d.add(x),f.add(x),v.add(x),r.setXYZ(G,d.x,d.y,d.z),r.setXYZ(B,f.x,f.y,f.z),r.setXYZ(L,v.x,v.y,v.z)}else for(let M=0,D=n.count;M<D;M+=3)i.fromBufferAttribute(n,M+0),o.fromBufferAttribute(n,M+1),u.fromBufferAttribute(n,M+2),x.subVectors(u,o),S.subVectors(i,o),x.cross(S),r.setXYZ(M+0,x.x,x.y,x.z),r.setXYZ(M+1,x.x,x.y,x.z),r.setXYZ(M+2,x.x,x.y,x.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)so.fromBufferAttribute(e,n),so.normalize(),e.setXYZ(n,so.x,so.y,so.z)}toNonIndexed(){function e(d,f){const v=d.array,x=d.itemSize,S=d.normalized,M=new v.constructor(f.length*x);let D=0,G=0;for(let B=0,L=f.length;B<L;B++){d.isInterleavedBufferAttribute?D=f[B]*d.data.stride+d.offset:D=f[B]*x;for(let U=0;U<x;U++)M[G++]=v[D++]}return new Ta(M,x,S)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Ji,r=this.index.array,i=this.attributes;for(const d in i){const f=i[d],v=e(f,r);n.setAttribute(d,v)}const o=this.morphAttributes;for(const d in o){const f=[],v=o[d];for(let x=0,S=v.length;x<S;x++){const M=v[x],D=e(M,r);f.push(D)}n.morphAttributes[d]=f}n.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let d=0,f=u.length;d<f;d++){const v=u[d];n.addGroup(v.start,v.count,v.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const v in f)f[v]!==void 0&&(e[v]=f[v]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const f in r){const v=r[f];e.data.attributes[f]=v.toJSON(e.data)}const i={};let o=!1;for(const f in this.morphAttributes){const v=this.morphAttributes[f],x=[];for(let S=0,M=v.length;S<M;S++){const D=v[S];x.push(D.toJSON(e.data))}x.length>0&&(i[f]=x,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const d=this.boundingSphere;return d!==null&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const v in i){const x=i[v];this.setAttribute(v,x.clone(n))}const o=e.morphAttributes;for(const v in o){const x=[],S=o[v];for(let M=0,D=S.length;M<D;M++)x.push(S[M].clone(n));this.morphAttributes[v]=x}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let v=0,x=u.length;v<x;v++){const S=u[v];this.addGroup(S.start,S.count,S.materialIndex)}const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const G9e=new Bn,r2=new bg,uk=new Z2,W9e=new Oe,t4=new Oe,n4=new Oe,r4=new Oe,kj=new Oe,ck=new Oe,dk=new ln,hk=new ln,pk=new ln,$9e=new Oe,K9e=new Oe,X9e=new Oe,fk=new Oe,mk=new Oe;class Ri extends Or{constructor(e=new Ji,n=new Zf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,u=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const d=this.morphTargetInfluences;if(o&&d){ck.set(0,0,0);for(let f=0,v=o.length;f<v;f++){const x=d[f],S=o[f];x!==0&&(kj.fromBufferAttribute(S,e),u?ck.addScaledVector(kj,x):ck.addScaledVector(kj.sub(n),x))}n.add(ck)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),uk.copy(r.boundingSphere),uk.applyMatrix4(o),r2.copy(e.ray).recast(e.near),!(uk.containsPoint(r2.origin)===!1&&(r2.intersectSphere(uk,W9e)===null||r2.origin.distanceToSquared(W9e)>(e.far-e.near)**2))&&(G9e.copy(o).invert(),r2.copy(e.ray).applyMatrix4(G9e),!(r.boundingBox!==null&&r2.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,r2)))}_computeIntersections(e,n,r){let i;const o=this.geometry,u=this.material,d=o.index,f=o.attributes.position,v=o.attributes.uv,x=o.attributes.uv1,S=o.attributes.normal,M=o.groups,D=o.drawRange;if(d!==null)if(Array.isArray(u))for(let G=0,B=M.length;G<B;G++){const L=M[G],U=u[L.materialIndex],C=Math.max(L.start,D.start),H=Math.min(d.count,Math.min(L.start+L.count,D.start+D.count));for(let X=C,fe=H;X<fe;X+=3){const q=d.getX(X),pe=d.getX(X+1),xe=d.getX(X+2);i=gk(this,U,e,r,v,x,S,q,pe,xe),i&&(i.faceIndex=Math.floor(X/3),i.face.materialIndex=L.materialIndex,n.push(i))}}else{const G=Math.max(0,D.start),B=Math.min(d.count,D.start+D.count);for(let L=G,U=B;L<U;L+=3){const C=d.getX(L),H=d.getX(L+1),X=d.getX(L+2);i=gk(this,u,e,r,v,x,S,C,H,X),i&&(i.faceIndex=Math.floor(L/3),n.push(i))}}else if(f!==void 0)if(Array.isArray(u))for(let G=0,B=M.length;G<B;G++){const L=M[G],U=u[L.materialIndex],C=Math.max(L.start,D.start),H=Math.min(f.count,Math.min(L.start+L.count,D.start+D.count));for(let X=C,fe=H;X<fe;X+=3){const q=X,pe=X+1,xe=X+2;i=gk(this,U,e,r,v,x,S,q,pe,xe),i&&(i.faceIndex=Math.floor(X/3),i.face.materialIndex=L.materialIndex,n.push(i))}}else{const G=Math.max(0,D.start),B=Math.min(f.count,D.start+D.count);for(let L=G,U=B;L<U;L+=3){const C=L,H=L+1,X=L+2;i=gk(this,u,e,r,v,x,S,C,H,X),i&&(i.faceIndex=Math.floor(L/3),n.push(i))}}}}function hLe(t,e,n,r,i,o,u,d){let f;if(e.side===Ps?f=r.intersectTriangle(u,o,i,!0,d):f=r.intersectTriangle(i,o,u,e.side===Ac,d),f===null)return null;mk.copy(d),mk.applyMatrix4(t.matrixWorld);const v=n.ray.origin.distanceTo(mk);return v<n.near||v>n.far?null:{distance:v,point:mk.clone(),object:t}}function gk(t,e,n,r,i,o,u,d,f,v){t.getVertexPosition(d,t4),t.getVertexPosition(f,n4),t.getVertexPosition(v,r4);const x=hLe(t,e,n,r,t4,n4,r4,fk);if(x){i&&(dk.fromBufferAttribute(i,d),hk.fromBufferAttribute(i,f),pk.fromBufferAttribute(i,v),x.uv=Cc.getInterpolation(fk,t4,n4,r4,dk,hk,pk,new ln)),o&&(dk.fromBufferAttribute(o,d),hk.fromBufferAttribute(o,f),pk.fromBufferAttribute(o,v),x.uv1=Cc.getInterpolation(fk,t4,n4,r4,dk,hk,pk,new ln),x.uv2=x.uv1),u&&($9e.fromBufferAttribute(u,d),K9e.fromBufferAttribute(u,f),X9e.fromBufferAttribute(u,v),x.normal=Cc.getInterpolation(fk,t4,n4,r4,$9e,K9e,X9e,new Oe),x.normal.dot(r.direction)>0&&x.normal.multiplyScalar(-1));const S={a:d,b:f,c:v,normal:new Oe,materialIndex:0};Cc.getNormal(t4,n4,r4,S.normal),x.face=S}return x}class f_ extends Ji{constructor(e=1,n=1,r=1,i=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:u};const d=this;i=Math.floor(i),o=Math.floor(o),u=Math.floor(u);const f=[],v=[],x=[],S=[];let M=0,D=0;G("z","y","x",-1,-1,r,n,e,u,o,0),G("z","y","x",1,-1,r,n,-e,u,o,1),G("x","z","y",1,1,e,r,n,i,u,2),G("x","z","y",1,-1,e,r,-n,i,u,3),G("x","y","z",1,-1,e,n,r,i,o,4),G("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(f),this.setAttribute("position",new Vr(v,3)),this.setAttribute("normal",new Vr(x,3)),this.setAttribute("uv",new Vr(S,2));function G(B,L,U,C,H,X,fe,q,pe,xe,J){const ne=X/pe,Pe=fe/xe,mt=X/2,_t=fe/2,de=q/2,je=pe+1,Me=xe+1;let Ct=0,We=0;const tt=new Oe;for(let Ze=0;Ze<Me;Ze++){const dt=Ze*Pe-_t;for(let At=0;At<je;At++){const pn=At*ne-mt;tt[B]=pn*C,tt[L]=dt*H,tt[U]=de,v.push(tt.x,tt.y,tt.z),tt[B]=0,tt[L]=0,tt[U]=q>0?1:-1,x.push(tt.x,tt.y,tt.z),S.push(At/pe),S.push(1-Ze/xe),Ct+=1}}for(let Ze=0;Ze<xe;Ze++)for(let dt=0;dt<pe;dt++){const At=M+dt+je*Ze,pn=M+dt+je*(Ze+1),et=M+(dt+1)+je*(Ze+1),wt=M+(dt+1)+je*Ze;f.push(At,pn,wt),f.push(pn,et,wt),We+=6}d.addGroup(D,We,J),D+=We,M+=Ct}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f_(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ag(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function _a(t){const e={};for(let n=0;n<t.length;n++){const r=ag(t[n]);for(const i in r)e[i]=r[i]}return e}function pLe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function r6e(t){return t.getRenderTarget()===null?t.outputColorSpace:di.workingColorSpace}const fLe={clone:ag,merge:_a};var mLe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gLe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ia extends A0{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mLe,this.fragmentShader=gLe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ag(e.uniforms),this.uniformsGroups=pLe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?n.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?n.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?n.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?n.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?n.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?n.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?n.uniforms[i]={type:"m4",value:u.toArray()}:n.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class DI extends Or{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Bn,this.projectionMatrix=new Bn,this.projectionMatrixInverse=new Bn,this.coordinateSystem=nh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const af=new Oe,q9e=new ln,Y9e=new ln;class $s extends DI{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=og*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ab*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return og*2*Math.atan(Math.tan(ab*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){af.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(af.x,af.y).multiplyScalar(-e/af.z),af.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(af.x,af.y).multiplyScalar(-e/af.z)}getViewSize(e,n){return this.getViewBounds(e,q9e,Y9e),n.subVectors(Y9e,q9e)}setViewOffset(e,n,r,i,o,u){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ab*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const f=u.fullWidth,v=u.fullHeight;o+=u.offsetX*i/f,n-=u.offsetY*r/v,i*=u.width/f,r*=u.height/v}const d=this.filmOffset;d!==0&&(o+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const i4=-90,s4=1;class vLe extends Or{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new $s(i4,s4,e,n);i.layers=this.layers,this.add(i);const o=new $s(i4,s4,e,n);o.layers=this.layers,this.add(o);const u=new $s(i4,s4,e,n);u.layers=this.layers,this.add(u);const d=new $s(i4,s4,e,n);d.layers=this.layers,this.add(d);const f=new $s(i4,s4,e,n);f.layers=this.layers,this.add(f);const v=new $s(i4,s4,e,n);v.layers=this.layers,this.add(v)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,u,d,f]=n;for(const v of n)this.remove(v);if(e===nh)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),d.up.set(0,1,0),d.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===VA)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),d.up.set(0,-1,0),d.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const v of n)this.add(v),v.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,d,f,v,x]=this.children,S=e.getRenderTarget(),M=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),G=e.xr.enabled;e.xr.enabled=!1;const B=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,u),e.setRenderTarget(r,2,i),e.render(n,d),e.setRenderTarget(r,3,i),e.render(n,f),e.setRenderTarget(r,4,i),e.render(n,v),r.texture.generateMipmaps=B,e.setRenderTarget(r,5,i),e.render(n,x),e.setRenderTarget(S,M,D),e.xr.enabled=G,r.texture.needsPMREMUpdate=!0}}class OI extends Qi{constructor(e,n,r,i,o,u,d,f,v,x){e=e!==void 0?e:[],n=n!==void 0?n:ig,super(e,n,r,i,o,u,d,f,v,x),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class yLe extends C0{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(W4("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===lh?ls:gl),this.texture=new OI(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:as}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new f_(5,5,5),o=new Ia({name:"CubemapFromEquirect",uniforms:ag(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ps,blending:xl});o.uniforms.tEquirect.value=n;const u=new Ri(i,o),d=n.minFilter;return n.minFilter===w2&&(n.minFilter=as),new vLe(1,10,this).update(e,u),n.minFilter=d,u.geometry.dispose(),u.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(n,r,i);e.setRenderTarget(o)}}const Aj=new Oe,bLe=new Oe,_Le=new mr;class Ef{constructor(e=new Oe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Aj.subVectors(r,n).cross(bLe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Aj),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||_Le.getNormalMatrix(e),i=this.coplanarPoint(Aj).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const i2=new Z2,vk=new Oe;class O${constructor(e=new Ef,n=new Ef,r=new Ef,i=new Ef,o=new Ef,u=new Ef){this.planes=[e,n,r,i,o,u]}set(e,n,r,i,o,u){const d=this.planes;return d[0].copy(e),d[1].copy(n),d[2].copy(r),d[3].copy(i),d[4].copy(o),d[5].copy(u),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=nh){const r=this.planes,i=e.elements,o=i[0],u=i[1],d=i[2],f=i[3],v=i[4],x=i[5],S=i[6],M=i[7],D=i[8],G=i[9],B=i[10],L=i[11],U=i[12],C=i[13],H=i[14],X=i[15];if(r[0].setComponents(f-o,M-v,L-D,X-U).normalize(),r[1].setComponents(f+o,M+v,L+D,X+U).normalize(),r[2].setComponents(f+u,M+x,L+G,X+C).normalize(),r[3].setComponents(f-u,M-x,L-G,X-C).normalize(),r[4].setComponents(f-d,M-S,L-B,X-H).normalize(),n===nh)r[5].setComponents(f+d,M+S,L+B,X+H).normalize();else if(n===VA)r[5].setComponents(d,S,B,H).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),i2.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),i2.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(i2)}intersectsSprite(e){return i2.center.set(0,0,0),i2.radius=.7071067811865476,i2.applyMatrix4(e.matrixWorld),this.intersectsSphere(i2)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(vk.x=i.normal.x>0?e.max.x:e.min.x,vk.y=i.normal.y>0?e.max.y:e.min.y,vk.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(vk)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function i6e(){let t=null,e=!1,n=null,r=null;function i(o,u){n(o,u),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function wLe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(v,x){const S=v.array,M=v.usage,D=S.byteLength,G=t.createBuffer();t.bindBuffer(x,G),t.bufferData(x,S,M),v.onUploadCallback();let B;if(S instanceof Float32Array)B=t.FLOAT;else if(S instanceof Uint16Array)if(v.isFloat16BufferAttribute)if(n)B=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else B=t.UNSIGNED_SHORT;else if(S instanceof Int16Array)B=t.SHORT;else if(S instanceof Uint32Array)B=t.UNSIGNED_INT;else if(S instanceof Int32Array)B=t.INT;else if(S instanceof Int8Array)B=t.BYTE;else if(S instanceof Uint8Array)B=t.UNSIGNED_BYTE;else if(S instanceof Uint8ClampedArray)B=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+S);return{buffer:G,type:B,bytesPerElement:S.BYTES_PER_ELEMENT,version:v.version,size:D}}function o(v,x,S){const M=x.array,D=x._updateRange,G=x.updateRanges;if(t.bindBuffer(S,v),D.count===-1&&G.length===0&&t.bufferSubData(S,0,M),G.length!==0){for(let B=0,L=G.length;B<L;B++){const U=G[B];n?t.bufferSubData(S,U.start*M.BYTES_PER_ELEMENT,M,U.start,U.count):t.bufferSubData(S,U.start*M.BYTES_PER_ELEMENT,M.subarray(U.start,U.start+U.count))}x.clearUpdateRanges()}D.count!==-1&&(n?t.bufferSubData(S,D.offset*M.BYTES_PER_ELEMENT,M,D.offset,D.count):t.bufferSubData(S,D.offset*M.BYTES_PER_ELEMENT,M.subarray(D.offset,D.offset+D.count)),D.count=-1),x.onUploadCallback()}function u(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)}function d(v){v.isInterleavedBufferAttribute&&(v=v.data);const x=r.get(v);x&&(t.deleteBuffer(x.buffer),r.delete(v))}function f(v,x){if(v.isGLBufferAttribute){const M=r.get(v);(!M||M.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const S=r.get(v);if(S===void 0)r.set(v,i(v,x));else if(S.version<v.version){if(S.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(S.buffer,v,x),S.version=v.version}}return{get:u,remove:d,update:f}}class _g extends Ji{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,u=n/2,d=Math.floor(r),f=Math.floor(i),v=d+1,x=f+1,S=e/d,M=n/f,D=[],G=[],B=[],L=[];for(let U=0;U<x;U++){const C=U*M-u;for(let H=0;H<v;H++){const X=H*S-o;G.push(X,-C,0),B.push(0,0,1),L.push(H/d),L.push(1-U/f)}}for(let U=0;U<f;U++)for(let C=0;C<d;C++){const H=C+v*U,X=C+v*(U+1),fe=C+1+v*(U+1),q=C+1+v*U;D.push(H,X,q),D.push(X,fe,q)}this.setIndex(D),this.setAttribute("position",new Vr(G,3)),this.setAttribute("normal",new Vr(B,3)),this.setAttribute("uv",new Vr(L,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _g(e.width,e.height,e.widthSegments,e.heightSegments)}}var xLe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,SLe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ELe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CLe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PLe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,TLe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MLe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kLe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ALe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ILe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,RLe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,DLe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,OLe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,LLe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,NLe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,FLe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,BLe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ULe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zLe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,VLe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,jLe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,HLe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,GLe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,WLe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$Le=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,KLe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XLe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qLe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,YLe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ZLe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,QLe="gl_FragColor = linearToOutputTexel( gl_FragColor );",JLe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,eNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,tNe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nNe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rNe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sNe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oNe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,aNe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lNe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uNe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cNe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,dNe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hNe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pNe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fNe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mNe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gNe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vNe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yNe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bNe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_Ne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,wNe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xNe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SNe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ENe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,CNe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,PNe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,TNe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,MNe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,kNe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ANe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,INe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,RNe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DNe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ONe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,LNe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NNe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,FNe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,BNe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,UNe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zNe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,VNe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jNe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HNe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,GNe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,WNe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,$Ne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,KNe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,XNe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qNe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,YNe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ZNe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,QNe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JNe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,iFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sFe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oFe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,aFe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lFe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,uFe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,cFe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dFe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,hFe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pFe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,fFe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mFe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gFe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_Fe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const wFe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xFe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,EFe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PFe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TFe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MFe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,kFe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,AFe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RFe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DFe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OFe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LFe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NFe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FFe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BFe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UFe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zFe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VFe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,jFe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,HFe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GFe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WFe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$Fe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KFe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XFe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qFe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,YFe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZFe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QFe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,JFe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eBe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fr={alphahash_fragment:xLe,alphahash_pars_fragment:SLe,alphamap_fragment:ELe,alphamap_pars_fragment:CLe,alphatest_fragment:PLe,alphatest_pars_fragment:TLe,aomap_fragment:MLe,aomap_pars_fragment:kLe,batching_pars_vertex:ALe,batching_vertex:ILe,begin_vertex:RLe,beginnormal_vertex:DLe,bsdfs:OLe,iridescence_fragment:LLe,bumpmap_pars_fragment:NLe,clipping_planes_fragment:FLe,clipping_planes_pars_fragment:BLe,clipping_planes_pars_vertex:ULe,clipping_planes_vertex:zLe,color_fragment:VLe,color_pars_fragment:jLe,color_pars_vertex:HLe,color_vertex:GLe,common:WLe,cube_uv_reflection_fragment:$Le,defaultnormal_vertex:KLe,displacementmap_pars_vertex:XLe,displacementmap_vertex:qLe,emissivemap_fragment:YLe,emissivemap_pars_fragment:ZLe,colorspace_fragment:QLe,colorspace_pars_fragment:JLe,envmap_fragment:eNe,envmap_common_pars_fragment:tNe,envmap_pars_fragment:nNe,envmap_pars_vertex:rNe,envmap_physical_pars_fragment:mNe,envmap_vertex:iNe,fog_vertex:sNe,fog_pars_vertex:oNe,fog_fragment:aNe,fog_pars_fragment:lNe,gradientmap_pars_fragment:uNe,lightmap_fragment:cNe,lightmap_pars_fragment:dNe,lights_lambert_fragment:hNe,lights_lambert_pars_fragment:pNe,lights_pars_begin:fNe,lights_toon_fragment:gNe,lights_toon_pars_fragment:vNe,lights_phong_fragment:yNe,lights_phong_pars_fragment:bNe,lights_physical_fragment:_Ne,lights_physical_pars_fragment:wNe,lights_fragment_begin:xNe,lights_fragment_maps:SNe,lights_fragment_end:ENe,logdepthbuf_fragment:CNe,logdepthbuf_pars_fragment:PNe,logdepthbuf_pars_vertex:TNe,logdepthbuf_vertex:MNe,map_fragment:kNe,map_pars_fragment:ANe,map_particle_fragment:INe,map_particle_pars_fragment:RNe,metalnessmap_fragment:DNe,metalnessmap_pars_fragment:ONe,morphcolor_vertex:LNe,morphnormal_vertex:NNe,morphtarget_pars_vertex:FNe,morphtarget_vertex:BNe,normal_fragment_begin:UNe,normal_fragment_maps:zNe,normal_pars_fragment:VNe,normal_pars_vertex:jNe,normal_vertex:HNe,normalmap_pars_fragment:GNe,clearcoat_normal_fragment_begin:WNe,clearcoat_normal_fragment_maps:$Ne,clearcoat_pars_fragment:KNe,iridescence_pars_fragment:XNe,opaque_fragment:qNe,packing:YNe,premultiplied_alpha_fragment:ZNe,project_vertex:QNe,dithering_fragment:JNe,dithering_pars_fragment:eFe,roughnessmap_fragment:tFe,roughnessmap_pars_fragment:nFe,shadowmap_pars_fragment:rFe,shadowmap_pars_vertex:iFe,shadowmap_vertex:sFe,shadowmask_pars_fragment:oFe,skinbase_vertex:aFe,skinning_pars_vertex:lFe,skinning_vertex:uFe,skinnormal_vertex:cFe,specularmap_fragment:dFe,specularmap_pars_fragment:hFe,tonemapping_fragment:pFe,tonemapping_pars_fragment:fFe,transmission_fragment:mFe,transmission_pars_fragment:gFe,uv_pars_fragment:vFe,uv_pars_vertex:yFe,uv_vertex:bFe,worldpos_vertex:_Fe,background_vert:wFe,background_frag:xFe,backgroundCube_vert:SFe,backgroundCube_frag:EFe,cube_vert:CFe,cube_frag:PFe,depth_vert:TFe,depth_frag:MFe,distanceRGBA_vert:kFe,distanceRGBA_frag:AFe,equirect_vert:IFe,equirect_frag:RFe,linedashed_vert:DFe,linedashed_frag:OFe,meshbasic_vert:LFe,meshbasic_frag:NFe,meshlambert_vert:FFe,meshlambert_frag:BFe,meshmatcap_vert:UFe,meshmatcap_frag:zFe,meshnormal_vert:VFe,meshnormal_frag:jFe,meshphong_vert:HFe,meshphong_frag:GFe,meshphysical_vert:WFe,meshphysical_frag:$Fe,meshtoon_vert:KFe,meshtoon_frag:XFe,points_vert:qFe,points_frag:YFe,shadow_vert:ZFe,shadow_frag:QFe,sprite_vert:JFe,sprite_frag:eBe},en={common:{diffuse:{value:new vn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mr},alphaMap:{value:null},alphaMapTransform:{value:new mr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mr},normalScale:{value:new ln(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mr},alphaTest:{value:0},uvTransform:{value:new mr}},sprite:{diffuse:{value:new vn(16777215)},opacity:{value:1},center:{value:new ln(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mr},alphaMap:{value:null},alphaMapTransform:{value:new mr},alphaTest:{value:0}}},Sc={basic:{uniforms:_a([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.fog]),vertexShader:fr.meshbasic_vert,fragmentShader:fr.meshbasic_frag},lambert:{uniforms:_a([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new vn(0)}}]),vertexShader:fr.meshlambert_vert,fragmentShader:fr.meshlambert_frag},phong:{uniforms:_a([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new vn(0)},specular:{value:new vn(1118481)},shininess:{value:30}}]),vertexShader:fr.meshphong_vert,fragmentShader:fr.meshphong_frag},standard:{uniforms:_a([en.common,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.roughnessmap,en.metalnessmap,en.fog,en.lights,{emissive:{value:new vn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fr.meshphysical_vert,fragmentShader:fr.meshphysical_frag},toon:{uniforms:_a([en.common,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.gradientmap,en.fog,en.lights,{emissive:{value:new vn(0)}}]),vertexShader:fr.meshtoon_vert,fragmentShader:fr.meshtoon_frag},matcap:{uniforms:_a([en.common,en.bumpmap,en.normalmap,en.displacementmap,en.fog,{matcap:{value:null}}]),vertexShader:fr.meshmatcap_vert,fragmentShader:fr.meshmatcap_frag},points:{uniforms:_a([en.points,en.fog]),vertexShader:fr.points_vert,fragmentShader:fr.points_frag},dashed:{uniforms:_a([en.common,en.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fr.linedashed_vert,fragmentShader:fr.linedashed_frag},depth:{uniforms:_a([en.common,en.displacementmap]),vertexShader:fr.depth_vert,fragmentShader:fr.depth_frag},normal:{uniforms:_a([en.common,en.bumpmap,en.normalmap,en.displacementmap,{opacity:{value:1}}]),vertexShader:fr.meshnormal_vert,fragmentShader:fr.meshnormal_frag},sprite:{uniforms:_a([en.sprite,en.fog]),vertexShader:fr.sprite_vert,fragmentShader:fr.sprite_frag},background:{uniforms:{uvTransform:{value:new mr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fr.background_vert,fragmentShader:fr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:fr.backgroundCube_vert,fragmentShader:fr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fr.cube_vert,fragmentShader:fr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fr.equirect_vert,fragmentShader:fr.equirect_frag},distanceRGBA:{uniforms:_a([en.common,en.displacementmap,{referencePosition:{value:new Oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fr.distanceRGBA_vert,fragmentShader:fr.distanceRGBA_frag},shadow:{uniforms:_a([en.lights,en.fog,{color:{value:new vn(0)},opacity:{value:1}}]),vertexShader:fr.shadow_vert,fragmentShader:fr.shadow_frag}};Sc.physical={uniforms:_a([Sc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mr},clearcoatNormalScale:{value:new ln(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mr},sheen:{value:0},sheenColor:{value:new vn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mr},transmissionSamplerSize:{value:new ln},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mr},attenuationDistance:{value:0},attenuationColor:{value:new vn(0)},specularColor:{value:new vn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mr},anisotropyVector:{value:new ln},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mr}}]),vertexShader:fr.meshphysical_vert,fragmentShader:fr.meshphysical_frag};const yk={r:0,b:0,g:0};function tBe(t,e,n,r,i,o,u){const d=new vn(0);let f=o===!0?0:1,v,x,S=null,M=0,D=null;function G(L,U){let C=!1,H=U.isScene===!0?U.background:null;H&&H.isTexture&&(H=(U.backgroundBlurriness>0?n:e).get(H)),H===null?B(d,f):H&&H.isColor&&(B(H,1),C=!0);const X=t.xr.getEnvironmentBlendMode();X==="additive"?r.buffers.color.setClear(0,0,0,1,u):X==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,u),(t.autoClear||C)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),H&&(H.isCubeTexture||H.mapping===AI)?(x===void 0&&(x=new Ri(new f_(1,1,1),new Ia({name:"BackgroundCubeMaterial",uniforms:ag(Sc.backgroundCube.uniforms),vertexShader:Sc.backgroundCube.vertexShader,fragmentShader:Sc.backgroundCube.fragmentShader,side:Ps,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(fe,q,pe){this.matrixWorld.copyPosition(pe.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(x)),x.material.uniforms.envMap.value=H,x.material.uniforms.flipEnvMap.value=H.isCubeTexture&&H.isRenderTargetTexture===!1?-1:1,x.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,x.material.toneMapped=di.getTransfer(H.colorSpace)!==Ai,(S!==H||M!==H.version||D!==t.toneMapping)&&(x.material.needsUpdate=!0,S=H,M=H.version,D=t.toneMapping),x.layers.enableAll(),L.unshift(x,x.geometry,x.material,0,0,null)):H&&H.isTexture&&(v===void 0&&(v=new Ri(new _g(2,2),new Ia({name:"BackgroundMaterial",uniforms:ag(Sc.background.uniforms),vertexShader:Sc.background.vertexShader,fragmentShader:Sc.background.fragmentShader,side:Ac,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(v)),v.material.uniforms.t2D.value=H,v.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,v.material.toneMapped=di.getTransfer(H.colorSpace)!==Ai,H.matrixAutoUpdate===!0&&H.updateMatrix(),v.material.uniforms.uvTransform.value.copy(H.matrix),(S!==H||M!==H.version||D!==t.toneMapping)&&(v.material.needsUpdate=!0,S=H,M=H.version,D=t.toneMapping),v.layers.enableAll(),L.unshift(v,v.geometry,v.material,0,0,null))}function B(L,U){L.getRGB(yk,r6e(t)),r.buffers.color.setClear(yk.r,yk.g,yk.b,U,u)}return{getClearColor:function(){return d},setClearColor:function(L,U=1){d.set(L),f=U,B(d,f)},getClearAlpha:function(){return f},setClearAlpha:function(L){f=L,B(d,f)},render:G}}function nBe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),u=r.isWebGL2||o!==null,d={},f=L(null);let v=f,x=!1;function S(de,je,Me,Ct,We){let tt=!1;if(u){const Ze=B(Ct,Me,je);v!==Ze&&(v=Ze,D(v.object)),tt=U(de,Ct,Me,We),tt&&C(de,Ct,Me,We)}else{const Ze=je.wireframe===!0;(v.geometry!==Ct.id||v.program!==Me.id||v.wireframe!==Ze)&&(v.geometry=Ct.id,v.program=Me.id,v.wireframe=Ze,tt=!0)}We!==null&&n.update(We,t.ELEMENT_ARRAY_BUFFER),(tt||x)&&(x=!1,xe(de,je,Me,Ct),We!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(We).buffer))}function M(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function D(de){return r.isWebGL2?t.bindVertexArray(de):o.bindVertexArrayOES(de)}function G(de){return r.isWebGL2?t.deleteVertexArray(de):o.deleteVertexArrayOES(de)}function B(de,je,Me){const Ct=Me.wireframe===!0;let We=d[de.id];We===void 0&&(We={},d[de.id]=We);let tt=We[je.id];tt===void 0&&(tt={},We[je.id]=tt);let Ze=tt[Ct];return Ze===void 0&&(Ze=L(M()),tt[Ct]=Ze),Ze}function L(de){const je=[],Me=[],Ct=[];for(let We=0;We<i;We++)je[We]=0,Me[We]=0,Ct[We]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:je,enabledAttributes:Me,attributeDivisors:Ct,object:de,attributes:{},index:null}}function U(de,je,Me,Ct){const We=v.attributes,tt=je.attributes;let Ze=0;const dt=Me.getAttributes();for(const At in dt)if(dt[At].location>=0){const et=We[At];let wt=tt[At];if(wt===void 0&&(At==="instanceMatrix"&&de.instanceMatrix&&(wt=de.instanceMatrix),At==="instanceColor"&&de.instanceColor&&(wt=de.instanceColor)),et===void 0||et.attribute!==wt||wt&&et.data!==wt.data)return!0;Ze++}return v.attributesNum!==Ze||v.index!==Ct}function C(de,je,Me,Ct){const We={},tt=je.attributes;let Ze=0;const dt=Me.getAttributes();for(const At in dt)if(dt[At].location>=0){let et=tt[At];et===void 0&&(At==="instanceMatrix"&&de.instanceMatrix&&(et=de.instanceMatrix),At==="instanceColor"&&de.instanceColor&&(et=de.instanceColor));const wt={};wt.attribute=et,et&&et.data&&(wt.data=et.data),We[At]=wt,Ze++}v.attributes=We,v.attributesNum=Ze,v.index=Ct}function H(){const de=v.newAttributes;for(let je=0,Me=de.length;je<Me;je++)de[je]=0}function X(de){fe(de,0)}function fe(de,je){const Me=v.newAttributes,Ct=v.enabledAttributes,We=v.attributeDivisors;Me[de]=1,Ct[de]===0&&(t.enableVertexAttribArray(de),Ct[de]=1),We[de]!==je&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](de,je),We[de]=je)}function q(){const de=v.newAttributes,je=v.enabledAttributes;for(let Me=0,Ct=je.length;Me<Ct;Me++)je[Me]!==de[Me]&&(t.disableVertexAttribArray(Me),je[Me]=0)}function pe(de,je,Me,Ct,We,tt,Ze){Ze===!0?t.vertexAttribIPointer(de,je,Me,We,tt):t.vertexAttribPointer(de,je,Me,Ct,We,tt)}function xe(de,je,Me,Ct){if(r.isWebGL2===!1&&(de.isInstancedMesh||Ct.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;H();const We=Ct.attributes,tt=Me.getAttributes(),Ze=je.defaultAttributeValues;for(const dt in tt){const At=tt[dt];if(At.location>=0){let pn=We[dt];if(pn===void 0&&(dt==="instanceMatrix"&&de.instanceMatrix&&(pn=de.instanceMatrix),dt==="instanceColor"&&de.instanceColor&&(pn=de.instanceColor)),pn!==void 0){const et=pn.normalized,wt=pn.itemSize,Zt=n.get(pn);if(Zt===void 0)continue;const rn=Zt.buffer,un=Zt.type,nt=Zt.bytesPerElement,Tt=r.isWebGL2===!0&&(un===t.INT||un===t.UNSIGNED_INT||pn.gpuType===H8e);if(pn.isInterleavedBufferAttribute){const Mt=pn.data,Ve=Mt.stride,or=pn.offset;if(Mt.isInstancedInterleavedBuffer){for(let $t=0;$t<At.locationSize;$t++)fe(At.location+$t,Mt.meshPerAttribute);de.isInstancedMesh!==!0&&Ct._maxInstanceCount===void 0&&(Ct._maxInstanceCount=Mt.meshPerAttribute*Mt.count)}else for(let $t=0;$t<At.locationSize;$t++)X(At.location+$t);t.bindBuffer(t.ARRAY_BUFFER,rn);for(let $t=0;$t<At.locationSize;$t++)pe(At.location+$t,wt/At.locationSize,un,et,Ve*nt,(or+wt/At.locationSize*$t)*nt,Tt)}else{if(pn.isInstancedBufferAttribute){for(let Mt=0;Mt<At.locationSize;Mt++)fe(At.location+Mt,pn.meshPerAttribute);de.isInstancedMesh!==!0&&Ct._maxInstanceCount===void 0&&(Ct._maxInstanceCount=pn.meshPerAttribute*pn.count)}else for(let Mt=0;Mt<At.locationSize;Mt++)X(At.location+Mt);t.bindBuffer(t.ARRAY_BUFFER,rn);for(let Mt=0;Mt<At.locationSize;Mt++)pe(At.location+Mt,wt/At.locationSize,un,et,wt*nt,wt/At.locationSize*Mt*nt,Tt)}}else if(Ze!==void 0){const et=Ze[dt];if(et!==void 0)switch(et.length){case 2:t.vertexAttrib2fv(At.location,et);break;case 3:t.vertexAttrib3fv(At.location,et);break;case 4:t.vertexAttrib4fv(At.location,et);break;default:t.vertexAttrib1fv(At.location,et)}}}}q()}function J(){mt();for(const de in d){const je=d[de];for(const Me in je){const Ct=je[Me];for(const We in Ct)G(Ct[We].object),delete Ct[We];delete je[Me]}delete d[de]}}function ne(de){if(d[de.id]===void 0)return;const je=d[de.id];for(const Me in je){const Ct=je[Me];for(const We in Ct)G(Ct[We].object),delete Ct[We];delete je[Me]}delete d[de.id]}function Pe(de){for(const je in d){const Me=d[je];if(Me[de.id]===void 0)continue;const Ct=Me[de.id];for(const We in Ct)G(Ct[We].object),delete Ct[We];delete Me[de.id]}}function mt(){_t(),x=!0,v!==f&&(v=f,D(v.object))}function _t(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:S,reset:mt,resetDefaultState:_t,dispose:J,releaseStatesOfGeometry:ne,releaseStatesOfProgram:Pe,initAttributes:H,enableAttribute:X,disableUnusedAttributes:q}}function rBe(t,e,n,r){const i=r.isWebGL2;let o;function u(x){o=x}function d(x,S){t.drawArrays(o,x,S),n.update(S,o,1)}function f(x,S,M){if(M===0)return;let D,G;if(i)D=t,G="drawArraysInstanced";else if(D=e.get("ANGLE_instanced_arrays"),G="drawArraysInstancedANGLE",D===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}D[G](o,x,S,M),n.update(S,o,M)}function v(x,S,M){if(M===0)return;const D=e.get("WEBGL_multi_draw");if(D===null)for(let G=0;G<M;G++)this.render(x[G],S[G]);else{D.multiDrawArraysWEBGL(o,x,0,S,0,M);let G=0;for(let B=0;B<M;B++)G+=S[B];n.update(G,o,1)}}this.setMode=u,this.render=d,this.renderInstances=f,this.renderMultiDraw=v}function iBe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const pe=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(pe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(pe){if(pe==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";pe="mediump"}return pe==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const u=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let d=n.precision!==void 0?n.precision:"highp";const f=o(d);f!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",f,"instead."),d=f);const v=u||e.has("WEBGL_draw_buffers"),x=n.logarithmicDepthBuffer===!0,S=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),M=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),D=t.getParameter(t.MAX_TEXTURE_SIZE),G=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),B=t.getParameter(t.MAX_VERTEX_ATTRIBS),L=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),U=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),H=M>0,X=u||e.has("OES_texture_float"),fe=H&&X,q=u?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:u,drawBuffers:v,getMaxAnisotropy:i,getMaxPrecision:o,precision:d,logarithmicDepthBuffer:x,maxTextures:S,maxVertexTextures:M,maxTextureSize:D,maxCubemapSize:G,maxAttributes:B,maxVertexUniforms:L,maxVaryings:U,maxFragmentUniforms:C,vertexTextures:H,floatFragmentTextures:X,floatVertexTextures:fe,maxSamples:q}}function sBe(t){const e=this;let n=null,r=0,i=!1,o=!1;const u=new Ef,d=new mr,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(S,M){const D=S.length!==0||M||r!==0||i;return i=M,r=S.length,D},this.beginShadows=function(){o=!0,x(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(S,M){n=x(S,M,0)},this.setState=function(S,M,D){const G=S.clippingPlanes,B=S.clipIntersection,L=S.clipShadows,U=t.get(S);if(!i||G===null||G.length===0||o&&!L)o?x(null):v();else{const C=o?0:r,H=C*4;let X=U.clippingState||null;f.value=X,X=x(G,M,H,D);for(let fe=0;fe!==H;++fe)X[fe]=n[fe];U.clippingState=X,this.numIntersection=B?this.numPlanes:0,this.numPlanes+=C}};function v(){f.value!==n&&(f.value=n,f.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function x(S,M,D,G){const B=S!==null?S.length:0;let L=null;if(B!==0){if(L=f.value,G!==!0||L===null){const U=D+B*4,C=M.matrixWorldInverse;d.getNormalMatrix(C),(L===null||L.length<U)&&(L=new Float32Array(U));for(let H=0,X=D;H!==B;++H,X+=4)u.copy(S[H]).applyMatrix4(C,d),u.normal.toArray(L,X),L[X+3]=u.constant}f.value=L,f.needsUpdate=!0}return e.numPlanes=B,e.numIntersection=0,L}}function oBe(t){let e=new WeakMap;function n(u,d){return d===OA?u.mapping=ig:d===RG&&(u.mapping=sg),u}function r(u){if(u&&u.isTexture){const d=u.mapping;if(d===OA||d===RG)if(e.has(u)){const f=e.get(u).texture;return n(f,u.mapping)}else{const f=u.image;if(f&&f.height>0){const v=new yLe(f.height);return v.fromEquirectangularTexture(t,u),e.set(u,v),u.addEventListener("dispose",i),n(v.texture,u.mapping)}else return null}}return u}function i(u){const d=u.target;d.removeEventListener("dispose",i);const f=e.get(d);f!==void 0&&(e.delete(d),f.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Bb extends DI{constructor(e=-1,n=1,r=1,i=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,u=r+e,d=i+n,f=i-n;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=v*this.view.offsetX,u=o+v*this.view.width,d-=x*this.view.offsetY,f=d-x*this.view.height}this.projectionMatrix.makeOrthographic(o,u,d,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const R4=4,Z9e=[.125,.215,.35,.446,.526,.582],v2=20,Ij=new Bb,Q9e=new vn;let Rj=null,Dj=0,Oj=0;const p2=(1+Math.sqrt(5))/2,o4=1/p2,J9e=[new Oe(1,1,1),new Oe(-1,1,1),new Oe(1,1,-1),new Oe(-1,1,-1),new Oe(0,p2,o4),new Oe(0,p2,-o4),new Oe(o4,0,p2),new Oe(-o4,0,p2),new Oe(p2,o4,0),new Oe(-p2,o4,0)];class e3e{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Rj=this._renderer.getRenderTarget(),Dj=this._renderer.getActiveCubeFace(),Oj=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=r3e(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=n3e(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rj,Dj,Oj),e.scissorTest=!1,bk(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ig||e.mapping===sg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Rj=this._renderer.getRenderTarget(),Dj=this._renderer.getActiveCubeFace(),Oj=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:as,minFilter:as,generateMipmaps:!1,type:F2,format:ea,colorSpace:vh,depthBuffer:!1},i=t3e(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=t3e(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=aBe(o)),this._blurMaterial=lBe(o,e,n)}return i}_compileMaterial(e){const n=new Ri(this._lodPlanes[0],e);this._renderer.compile(n,Ij)}_sceneToCubeUV(e,n,r,i){const d=new $s(90,1,n,r),f=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],x=this._renderer,S=x.autoClear,M=x.toneMapping;x.getClearColor(Q9e),x.toneMapping=jf,x.autoClear=!1;const D=new Zf({name:"PMREM.Background",side:Ps,depthWrite:!1,depthTest:!1}),G=new Ri(new f_,D);let B=!1;const L=e.background;L?L.isColor&&(D.color.copy(L),e.background=null,B=!0):(D.color.copy(Q9e),B=!0);for(let U=0;U<6;U++){const C=U%3;C===0?(d.up.set(0,f[U],0),d.lookAt(v[U],0,0)):C===1?(d.up.set(0,0,f[U]),d.lookAt(0,v[U],0)):(d.up.set(0,f[U],0),d.lookAt(0,0,v[U]));const H=this._cubeSize;bk(i,C*H,U>2?H:0,H,H),x.setRenderTarget(i),B&&x.render(G,d),x.render(e,d)}G.geometry.dispose(),G.material.dispose(),x.toneMapping=M,x.autoClear=S,e.background=L}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ig||e.mapping===sg;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=r3e()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=n3e());const o=i?this._cubemapMaterial:this._equirectMaterial,u=new Ri(this._lodPlanes[0],o),d=o.uniforms;d.envMap.value=e;const f=this._cubeSize;bk(n,0,0,3*f,2*f),r.setRenderTarget(n),r.render(u,Ij)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),u=J9e[(i-1)%J9e.length];this._blur(e,i-1,i,o,u)}n.autoClear=r}_blur(e,n,r,i,o){const u=this._pingPongRenderTarget;this._halfBlur(e,u,n,r,i,"latitudinal",o),this._halfBlur(u,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,u,d){const f=this._renderer,v=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const x=3,S=new Ri(this._lodPlanes[i],v),M=v.uniforms,D=this._sizeLods[r]-1,G=isFinite(o)?Math.PI/(2*D):2*Math.PI/(2*v2-1),B=o/G,L=isFinite(o)?1+Math.floor(x*B):v2;L>v2&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${L} samples when the maximum is set to ${v2}`);const U=[];let C=0;for(let pe=0;pe<v2;++pe){const xe=pe/B,J=Math.exp(-xe*xe/2);U.push(J),pe===0?C+=J:pe<L&&(C+=2*J)}for(let pe=0;pe<U.length;pe++)U[pe]=U[pe]/C;M.envMap.value=e.texture,M.samples.value=L,M.weights.value=U,M.latitudinal.value=u==="latitudinal",d&&(M.poleAxis.value=d);const{_lodMax:H}=this;M.dTheta.value=G,M.mipInt.value=H-r;const X=this._sizeLods[i],fe=3*X*(i>H-R4?i-H+R4:0),q=4*(this._cubeSize-X);bk(n,fe,q,3*X,2*X),f.setRenderTarget(n),f.render(S,Ij)}}function aBe(t){const e=[],n=[],r=[];let i=t;const o=t-R4+1+Z9e.length;for(let u=0;u<o;u++){const d=Math.pow(2,i);n.push(d);let f=1/d;u>t-R4?f=Z9e[u-t+R4-1]:u===0&&(f=0),r.push(f);const v=1/(d-2),x=-v,S=1+v,M=[x,x,S,x,S,S,x,x,S,S,x,S],D=6,G=6,B=3,L=2,U=1,C=new Float32Array(B*G*D),H=new Float32Array(L*G*D),X=new Float32Array(U*G*D);for(let q=0;q<D;q++){const pe=q%3*2/3-1,xe=q>2?0:-1,J=[pe,xe,0,pe+2/3,xe,0,pe+2/3,xe+1,0,pe,xe,0,pe+2/3,xe+1,0,pe,xe+1,0];C.set(J,B*G*q),H.set(M,L*G*q);const ne=[q,q,q,q,q,q];X.set(ne,U*G*q)}const fe=new Ji;fe.setAttribute("position",new Ta(C,B)),fe.setAttribute("uv",new Ta(H,L)),fe.setAttribute("faceIndex",new Ta(X,U)),e.push(fe),i>R4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function t3e(t,e,n){const r=new C0(t,e,n);return r.texture.mapping=AI,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function bk(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function lBe(t,e,n){const r=new Float32Array(v2),i=new Oe(0,1,0);return new Ia({name:"SphericalGaussianBlur",defines:{n:v2,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:L$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xl,depthTest:!1,depthWrite:!1})}function n3e(){return new Ia({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:L$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xl,depthTest:!1,depthWrite:!1})}function r3e(){return new Ia({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:L$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xl,depthTest:!1,depthWrite:!1})}function L$(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uBe(t){let e=new WeakMap,n=null;function r(d){if(d&&d.isTexture){const f=d.mapping,v=f===OA||f===RG,x=f===ig||f===sg;if(v||x)if(d.isRenderTargetTexture&&d.needsPMREMUpdate===!0){d.needsPMREMUpdate=!1;let S=e.get(d);return n===null&&(n=new e3e(t)),S=v?n.fromEquirectangular(d,S):n.fromCubemap(d,S),e.set(d,S),S.texture}else{if(e.has(d))return e.get(d).texture;{const S=d.image;if(v&&S&&S.height>0||x&&S&&i(S)){n===null&&(n=new e3e(t));const M=v?n.fromEquirectangular(d):n.fromCubemap(d);return e.set(d,M),d.addEventListener("dispose",o),M.texture}else return null}}}return d}function i(d){let f=0;const v=6;for(let x=0;x<v;x++)d[x]!==void 0&&f++;return f===v}function o(d){const f=d.target;f.removeEventListener("dispose",o);const v=e.get(f);v!==void 0&&(e.delete(f),v.dispose())}function u(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:u}}function cBe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function dBe(t,e,n,r){const i={},o=new WeakMap;function u(S){const M=S.target;M.index!==null&&e.remove(M.index);for(const G in M.attributes)e.remove(M.attributes[G]);for(const G in M.morphAttributes){const B=M.morphAttributes[G];for(let L=0,U=B.length;L<U;L++)e.remove(B[L])}M.removeEventListener("dispose",u),delete i[M.id];const D=o.get(M);D&&(e.remove(D),o.delete(M)),r.releaseStatesOfGeometry(M),M.isInstancedBufferGeometry===!0&&delete M._maxInstanceCount,n.memory.geometries--}function d(S,M){return i[M.id]===!0||(M.addEventListener("dispose",u),i[M.id]=!0,n.memory.geometries++),M}function f(S){const M=S.attributes;for(const G in M)e.update(M[G],t.ARRAY_BUFFER);const D=S.morphAttributes;for(const G in D){const B=D[G];for(let L=0,U=B.length;L<U;L++)e.update(B[L],t.ARRAY_BUFFER)}}function v(S){const M=[],D=S.index,G=S.attributes.position;let B=0;if(D!==null){const C=D.array;B=D.version;for(let H=0,X=C.length;H<X;H+=3){const fe=C[H+0],q=C[H+1],pe=C[H+2];M.push(fe,q,q,pe,pe,fe)}}else if(G!==void 0){const C=G.array;B=G.version;for(let H=0,X=C.length/3-1;H<X;H+=3){const fe=H+0,q=H+1,pe=H+2;M.push(fe,q,q,pe,pe,fe)}}else return;const L=new(Z8e(M)?n6e:D$)(M,1);L.version=B;const U=o.get(S);U&&e.remove(U),o.set(S,L)}function x(S){const M=o.get(S);if(M){const D=S.index;D!==null&&M.version<D.version&&v(S)}else v(S);return o.get(S)}return{get:d,update:f,getWireframeAttribute:x}}function hBe(t,e,n,r){const i=r.isWebGL2;let o;function u(D){o=D}let d,f;function v(D){d=D.type,f=D.bytesPerElement}function x(D,G){t.drawElements(o,G,d,D*f),n.update(G,o,1)}function S(D,G,B){if(B===0)return;let L,U;if(i)L=t,U="drawElementsInstanced";else if(L=e.get("ANGLE_instanced_arrays"),U="drawElementsInstancedANGLE",L===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}L[U](o,G,d,D*f,B),n.update(G,o,B)}function M(D,G,B){if(B===0)return;const L=e.get("WEBGL_multi_draw");if(L===null)for(let U=0;U<B;U++)this.render(D[U]/f,G[U]);else{L.multiDrawElementsWEBGL(o,G,0,d,D,0,B);let U=0;for(let C=0;C<B;C++)U+=G[C];n.update(U,o,1)}}this.setMode=u,this.setIndex=v,this.render=x,this.renderInstances=S,this.renderMultiDraw=M}function pBe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,u,d){switch(n.calls++,u){case t.TRIANGLES:n.triangles+=d*(o/3);break;case t.LINES:n.lines+=d*(o/2);break;case t.LINE_STRIP:n.lines+=d*(o-1);break;case t.LINE_LOOP:n.lines+=d*o;break;case t.POINTS:n.points+=d*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function fBe(t,e){return t[0]-e[0]}function mBe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gBe(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,u=new Dr,d=[];for(let v=0;v<8;v++)d[v]=[v,0];function f(v,x,S){const M=v.morphTargetInfluences;if(e.isWebGL2===!0){const G=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,B=G!==void 0?G.length:0;let L=o.get(x);if(L===void 0||L.count!==B){let je=function(){_t.dispose(),o.delete(x),x.removeEventListener("dispose",je)};var D=je;L!==void 0&&L.texture.dispose();const H=x.morphAttributes.position!==void 0,X=x.morphAttributes.normal!==void 0,fe=x.morphAttributes.color!==void 0,q=x.morphAttributes.position||[],pe=x.morphAttributes.normal||[],xe=x.morphAttributes.color||[];let J=0;H===!0&&(J=1),X===!0&&(J=2),fe===!0&&(J=3);let ne=x.attributes.position.count*J,Pe=1;ne>e.maxTextureSize&&(Pe=Math.ceil(ne/e.maxTextureSize),ne=e.maxTextureSize);const mt=new Float32Array(ne*Pe*4*B),_t=new e6e(mt,ne,Pe,B);_t.type=ml,_t.needsUpdate=!0;const de=J*4;for(let Me=0;Me<B;Me++){const Ct=q[Me],We=pe[Me],tt=xe[Me],Ze=ne*Pe*4*Me;for(let dt=0;dt<Ct.count;dt++){const At=dt*de;H===!0&&(u.fromBufferAttribute(Ct,dt),mt[Ze+At+0]=u.x,mt[Ze+At+1]=u.y,mt[Ze+At+2]=u.z,mt[Ze+At+3]=0),X===!0&&(u.fromBufferAttribute(We,dt),mt[Ze+At+4]=u.x,mt[Ze+At+5]=u.y,mt[Ze+At+6]=u.z,mt[Ze+At+7]=0),fe===!0&&(u.fromBufferAttribute(tt,dt),mt[Ze+At+8]=u.x,mt[Ze+At+9]=u.y,mt[Ze+At+10]=u.z,mt[Ze+At+11]=tt.itemSize===4?u.w:1)}}L={count:B,texture:_t,size:new ln(ne,Pe)},o.set(x,L),x.addEventListener("dispose",je)}let U=0;for(let H=0;H<M.length;H++)U+=M[H];const C=x.morphTargetsRelative?1:1-U;S.getUniforms().setValue(t,"morphTargetBaseInfluence",C),S.getUniforms().setValue(t,"morphTargetInfluences",M),S.getUniforms().setValue(t,"morphTargetsTexture",L.texture,n),S.getUniforms().setValue(t,"morphTargetsTextureSize",L.size)}else{const G=M===void 0?0:M.length;let B=r[x.id];if(B===void 0||B.length!==G){B=[];for(let X=0;X<G;X++)B[X]=[X,0];r[x.id]=B}for(let X=0;X<G;X++){const fe=B[X];fe[0]=X,fe[1]=M[X]}B.sort(mBe);for(let X=0;X<8;X++)X<G&&B[X][1]?(d[X][0]=B[X][0],d[X][1]=B[X][1]):(d[X][0]=Number.MAX_SAFE_INTEGER,d[X][1]=0);d.sort(fBe);const L=x.morphAttributes.position,U=x.morphAttributes.normal;let C=0;for(let X=0;X<8;X++){const fe=d[X],q=fe[0],pe=fe[1];q!==Number.MAX_SAFE_INTEGER&&pe?(L&&x.getAttribute("morphTarget"+X)!==L[q]&&x.setAttribute("morphTarget"+X,L[q]),U&&x.getAttribute("morphNormal"+X)!==U[q]&&x.setAttribute("morphNormal"+X,U[q]),i[X]=pe,C+=pe):(L&&x.hasAttribute("morphTarget"+X)===!0&&x.deleteAttribute("morphTarget"+X),U&&x.hasAttribute("morphNormal"+X)===!0&&x.deleteAttribute("morphNormal"+X),i[X]=0)}const H=x.morphTargetsRelative?1:1-C;S.getUniforms().setValue(t,"morphTargetBaseInfluence",H),S.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:f}}function vBe(t,e,n,r){let i=new WeakMap;function o(f){const v=r.render.frame,x=f.geometry,S=e.get(f,x);if(i.get(S)!==v&&(e.update(S),i.set(S,v)),f.isInstancedMesh&&(f.hasEventListener("dispose",d)===!1&&f.addEventListener("dispose",d),i.get(f)!==v&&(n.update(f.instanceMatrix,t.ARRAY_BUFFER),f.instanceColor!==null&&n.update(f.instanceColor,t.ARRAY_BUFFER),i.set(f,v))),f.isSkinnedMesh){const M=f.skeleton;i.get(M)!==v&&(M.update(),i.set(M,v))}return S}function u(){i=new WeakMap}function d(f){const v=f.target;v.removeEventListener("dispose",d),n.remove(v.instanceMatrix),v.instanceColor!==null&&n.remove(v.instanceColor)}return{update:o,dispose:u}}class N$ extends Qi{constructor(e,n,r,i,o,u,d,f,v,x){if(x=x!==void 0?x:T2,x!==T2&&x!==B2)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&x===T2&&(r=th),r===void 0&&x===B2&&(r=Hf),super(null,i,o,u,d,f,x,r,v),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=d!==void 0?d:Es,this.minFilter=f!==void 0?f:Es,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const s6e=new Qi,o6e=new N$(1,1);o6e.compareFunction=Y8e;const a6e=new e6e,l6e=new QOe,u6e=new OI,i3e=[],s3e=[],o3e=new Float32Array(16),a3e=new Float32Array(9),l3e=new Float32Array(4);function wg(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=i3e[i];if(o===void 0&&(o=new Float32Array(i),i3e[i]=o),e!==0){r.toArray(o,0);for(let u=1,d=0;u!==e;++u)d+=n,t[u].toArray(o,d)}return o}function qs(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ys(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function LI(t,e){let n=s3e[e];n===void 0&&(n=new Int32Array(e),s3e[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function yBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function bBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qs(n,e))return;t.uniform2fv(this.addr,e),Ys(n,e)}}function _Be(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(qs(n,e))return;t.uniform3fv(this.addr,e),Ys(n,e)}}function wBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qs(n,e))return;t.uniform4fv(this.addr,e),Ys(n,e)}}function xBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qs(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ys(n,e)}else{if(qs(n,r))return;l3e.set(r),t.uniformMatrix2fv(this.addr,!1,l3e),Ys(n,r)}}function SBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qs(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ys(n,e)}else{if(qs(n,r))return;a3e.set(r),t.uniformMatrix3fv(this.addr,!1,a3e),Ys(n,r)}}function EBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qs(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ys(n,e)}else{if(qs(n,r))return;o3e.set(r),t.uniformMatrix4fv(this.addr,!1,o3e),Ys(n,r)}}function CBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function PBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qs(n,e))return;t.uniform2iv(this.addr,e),Ys(n,e)}}function TBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qs(n,e))return;t.uniform3iv(this.addr,e),Ys(n,e)}}function MBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qs(n,e))return;t.uniform4iv(this.addr,e),Ys(n,e)}}function kBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ABe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qs(n,e))return;t.uniform2uiv(this.addr,e),Ys(n,e)}}function IBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qs(n,e))return;t.uniform3uiv(this.addr,e),Ys(n,e)}}function RBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qs(n,e))return;t.uniform4uiv(this.addr,e),Ys(n,e)}}function DBe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?o6e:s6e;n.setTexture2D(e||o,i)}function OBe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||l6e,i)}function LBe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||u6e,i)}function NBe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||a6e,i)}function FBe(t){switch(t){case 5126:return yBe;case 35664:return bBe;case 35665:return _Be;case 35666:return wBe;case 35674:return xBe;case 35675:return SBe;case 35676:return EBe;case 5124:case 35670:return CBe;case 35667:case 35671:return PBe;case 35668:case 35672:return TBe;case 35669:case 35673:return MBe;case 5125:return kBe;case 36294:return ABe;case 36295:return IBe;case 36296:return RBe;case 35678:case 36198:case 36298:case 36306:case 35682:return DBe;case 35679:case 36299:case 36307:return OBe;case 35680:case 36300:case 36308:case 36293:return LBe;case 36289:case 36303:case 36311:case 36292:return NBe}}function BBe(t,e){t.uniform1fv(this.addr,e)}function UBe(t,e){const n=wg(e,this.size,2);t.uniform2fv(this.addr,n)}function zBe(t,e){const n=wg(e,this.size,3);t.uniform3fv(this.addr,n)}function VBe(t,e){const n=wg(e,this.size,4);t.uniform4fv(this.addr,n)}function jBe(t,e){const n=wg(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function HBe(t,e){const n=wg(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function GBe(t,e){const n=wg(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function WBe(t,e){t.uniform1iv(this.addr,e)}function $Be(t,e){t.uniform2iv(this.addr,e)}function KBe(t,e){t.uniform3iv(this.addr,e)}function XBe(t,e){t.uniform4iv(this.addr,e)}function qBe(t,e){t.uniform1uiv(this.addr,e)}function YBe(t,e){t.uniform2uiv(this.addr,e)}function ZBe(t,e){t.uniform3uiv(this.addr,e)}function QBe(t,e){t.uniform4uiv(this.addr,e)}function JBe(t,e,n){const r=this.cache,i=e.length,o=LI(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let u=0;u!==i;++u)n.setTexture2D(e[u]||s6e,o[u])}function eUe(t,e,n){const r=this.cache,i=e.length,o=LI(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let u=0;u!==i;++u)n.setTexture3D(e[u]||l6e,o[u])}function tUe(t,e,n){const r=this.cache,i=e.length,o=LI(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let u=0;u!==i;++u)n.setTextureCube(e[u]||u6e,o[u])}function nUe(t,e,n){const r=this.cache,i=e.length,o=LI(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let u=0;u!==i;++u)n.setTexture2DArray(e[u]||a6e,o[u])}function rUe(t){switch(t){case 5126:return BBe;case 35664:return UBe;case 35665:return zBe;case 35666:return VBe;case 35674:return jBe;case 35675:return HBe;case 35676:return GBe;case 5124:case 35670:return WBe;case 35667:case 35671:return $Be;case 35668:case 35672:return KBe;case 35669:case 35673:return XBe;case 5125:return qBe;case 36294:return YBe;case 36295:return ZBe;case 36296:return QBe;case 35678:case 36198:case 36298:case 36306:case 35682:return JBe;case 35679:case 36299:case 36307:return eUe;case 35680:case 36300:case 36308:case 36293:return tUe;case 36289:case 36303:case 36311:case 36292:return nUe}}class iUe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=FBe(n.type)}}class sUe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=rUe(n.type)}}class oUe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,u=i.length;o!==u;++o){const d=i[o];d.setValue(e,n[d.id],r)}}}const Lj=/(\w+)(\])?(\[|\.)?/g;function u3e(t,e){t.seq.push(e),t.map[e.id]=e}function aUe(t,e,n){const r=t.name,i=r.length;for(Lj.lastIndex=0;;){const o=Lj.exec(r),u=Lj.lastIndex;let d=o[1];const f=o[2]==="]",v=o[3];if(f&&(d=d|0),v===void 0||v==="["&&u+2===i){u3e(n,v===void 0?new iUe(d,t,e):new sUe(d,t,e));break}else{let S=n.map[d];S===void 0&&(S=new oUe(d),u3e(n,S)),n=S}}}class Qk{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),u=e.getUniformLocation(n,o.name);aUe(o,u,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,u=n.length;o!==u;++o){const d=n[o],f=r[d.id];f.needsUpdate!==!1&&d.setValue(e,f.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const u=e[i];u.id in n&&r.push(u)}return r}}function c3e(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const lUe=37297;let uUe=0;function cUe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let u=i;u<o;u++){const d=u+1;r.push(`${d===e?">":" "} ${d}: ${n[u]}`)}return r.join(`
`)}function dUe(t){const e=di.getPrimaries(di.workingColorSpace),n=di.getPrimaries(t);let r;switch(e===n?r="":e===zA&&n===UA?r="LinearDisplayP3ToLinearSRGB":e===UA&&n===zA&&(r="LinearSRGBToLinearDisplayP3"),t){case vh:case RI:return[r,"LinearTransferOETF"];case ls:case A$:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function d3e(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const u=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+cUe(t.getShaderSource(e),u)}else return i}function hUe(t,e){const n=dUe(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function pUe(t,e){let n;switch(e){case sOe:n="Linear";break;case oOe:n="Reinhard";break;case aOe:n="OptimizedCineon";break;case lOe:n="ACESFilmic";break;case cOe:n="AgX";break;case uOe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function fUe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(D4).join(`
`)}function mUe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(D4).join(`
`)}function gUe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function vUe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),u=o.name;let d=1;o.type===t.FLOAT_MAT2&&(d=2),o.type===t.FLOAT_MAT3&&(d=3),o.type===t.FLOAT_MAT4&&(d=4),n[u]={type:o.type,location:t.getAttribLocation(e,u),locationSize:d}}return n}function D4(t){return t!==""}function h3e(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function p3e(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yUe=/^[ \t]*#include +<([\w\d./]+)>/gm;function FG(t){return t.replace(yUe,_Ue)}const bUe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function _Ue(t,e){let n=fr[e];if(n===void 0){const r=bUe.get(e);if(r!==void 0)n=fr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return FG(n)}const wUe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function f3e(t){return t.replace(wUe,xUe)}function xUe(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function m3e(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function SUe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===B8e?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===qDe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===qd&&(e="SHADOWMAP_TYPE_VSM"),e}function EUe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ig:case sg:e="ENVMAP_TYPE_CUBE";break;case AI:e="ENVMAP_TYPE_CUBE_UV";break}return e}function CUe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case sg:e="ENVMAP_MODE_REFRACTION";break}return e}function PUe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case kI:e="ENVMAP_BLENDING_MULTIPLY";break;case rOe:e="ENVMAP_BLENDING_MIX";break;case iOe:e="ENVMAP_BLENDING_ADD";break}return e}function TUe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function MUe(t,e,n,r){const i=t.getContext(),o=n.defines;let u=n.vertexShader,d=n.fragmentShader;const f=SUe(n),v=EUe(n),x=CUe(n),S=PUe(n),M=TUe(n),D=n.isWebGL2?"":fUe(n),G=mUe(n),B=gUe(o),L=i.createProgram();let U,C,H=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(U=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B].filter(D4).join(`
`),U.length>0&&(U+=`
`),C=[D,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B].filter(D4).join(`
`),C.length>0&&(C+=`
`)):(U=[m3e(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(D4).join(`
`),C=[D,m3e(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,B,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+x:"",n.envMap?"#define "+S:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==jf?"#define TONE_MAPPING":"",n.toneMapping!==jf?fr.tonemapping_pars_fragment:"",n.toneMapping!==jf?pUe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",fr.colorspace_pars_fragment,hUe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(D4).join(`
`)),u=FG(u),u=h3e(u,n),u=p3e(u,n),d=FG(d),d=h3e(d,n),d=p3e(d,n),u=f3e(u),d=f3e(d),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(H=`#version 300 es
`,U=[G,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+U,C=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===OG?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===OG?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const X=H+U+u,fe=H+C+d,q=c3e(i,i.VERTEX_SHADER,X),pe=c3e(i,i.FRAGMENT_SHADER,fe);i.attachShader(L,q),i.attachShader(L,pe),n.index0AttributeName!==void 0?i.bindAttribLocation(L,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(L,0,"position"),i.linkProgram(L);function xe(mt){if(t.debug.checkShaderErrors){const _t=i.getProgramInfoLog(L).trim(),de=i.getShaderInfoLog(q).trim(),je=i.getShaderInfoLog(pe).trim();let Me=!0,Ct=!0;if(i.getProgramParameter(L,i.LINK_STATUS)===!1)if(Me=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,L,q,pe);else{const We=d3e(i,q,"vertex"),tt=d3e(i,pe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(L,i.VALIDATE_STATUS)+`

Material Name: `+mt.name+`
Material Type: `+mt.type+`

Program Info Log: `+_t+`
`+We+`
`+tt)}else _t!==""?console.warn("THREE.WebGLProgram: Program Info Log:",_t):(de===""||je==="")&&(Ct=!1);Ct&&(mt.diagnostics={runnable:Me,programLog:_t,vertexShader:{log:de,prefix:U},fragmentShader:{log:je,prefix:C}})}i.deleteShader(q),i.deleteShader(pe),J=new Qk(i,L),ne=vUe(i,L)}let J;this.getUniforms=function(){return J===void 0&&xe(this),J};let ne;this.getAttributes=function(){return ne===void 0&&xe(this),ne};let Pe=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Pe===!1&&(Pe=i.getProgramParameter(L,lUe)),Pe},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(L),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=uUe++,this.cacheKey=e,this.usedTimes=1,this.program=L,this.vertexShader=q,this.fragmentShader=pe,this}let kUe=0;class AUe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new IUe(e),n.set(e,r)),r}}class IUe{constructor(e){this.id=kUe++,this.code=e,this.usedTimes=0}}function RUe(t,e,n,r,i,o,u){const d=new R$,f=new AUe,v=new Set,x=[],S=i.isWebGL2,M=i.logarithmicDepthBuffer,D=i.vertexTextures;let G=i.precision;const B={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function L(ne){return v.add(ne),ne===0?"uv":`uv${ne}`}function U(ne,Pe,mt,_t,de){const je=_t.fog,Me=de.geometry,Ct=ne.isMeshStandardMaterial?_t.environment:null,We=(ne.isMeshStandardMaterial?n:e).get(ne.envMap||Ct),tt=We&&We.mapping===AI?We.image.height:null,Ze=B[ne.type];ne.precision!==null&&(G=i.getMaxPrecision(ne.precision),G!==ne.precision&&console.warn("THREE.WebGLProgram.getParameters:",ne.precision,"not supported, using",G,"instead."));const dt=Me.morphAttributes.position||Me.morphAttributes.normal||Me.morphAttributes.color,At=dt!==void 0?dt.length:0;let pn=0;Me.morphAttributes.position!==void 0&&(pn=1),Me.morphAttributes.normal!==void 0&&(pn=2),Me.morphAttributes.color!==void 0&&(pn=3);let et,wt,Zt,rn;if(Ze){const ar=Sc[Ze];et=ar.vertexShader,wt=ar.fragmentShader}else et=ne.vertexShader,wt=ne.fragmentShader,f.update(ne),Zt=f.getVertexShaderID(ne),rn=f.getFragmentShaderID(ne);const un=t.getRenderTarget(),nt=de.isInstancedMesh===!0,Tt=de.isBatchedMesh===!0,Mt=!!ne.map,Ve=!!ne.matcap,or=!!We,$t=!!ne.aoMap,Ht=!!ne.lightMap,Kt=!!ne.bumpMap,Kn=!!ne.normalMap,cn=!!ne.displacementMap,ve=!!ne.emissiveMap,he=!!ne.metalnessMap,Je=!!ne.roughnessMap,Dt=ne.anisotropy>0,Ft=ne.clearcoat>0,Rt=ne.iridescence>0,bn=ne.sheen>0,sn=ne.transmission>0,dn=Dt&&!!ne.anisotropyMap,Dn=Ft&&!!ne.clearcoatMap,Xn=Ft&&!!ne.clearcoatNormalMap,Ut=Ft&&!!ne.clearcoatRoughnessMap,vr=Rt&&!!ne.iridescenceMap,sr=Rt&&!!ne.iridescenceThicknessMap,Tn=bn&&!!ne.sheenColorMap,kn=bn&&!!ne.sheenRoughnessMap,on=!!ne.specularMap,Un=!!ne.specularColorMap,Ae=!!ne.specularIntensityMap,Xt=sn&&!!ne.transmissionMap,Jt=sn&&!!ne.thicknessMap,mn=!!ne.gradientMap,Te=!!ne.alphaMap,Wt=ne.alphaTest>0,Nt=!!ne.alphaHash,gn=!!ne.extensions;let On=jf;ne.toneMapped&&(un===null||un.isXRRenderTarget===!0)&&(On=t.toneMapping);const cr={isWebGL2:S,shaderID:Ze,shaderType:ne.type,shaderName:ne.name,vertexShader:et,fragmentShader:wt,defines:ne.defines,customVertexShaderID:Zt,customFragmentShaderID:rn,isRawShaderMaterial:ne.isRawShaderMaterial===!0,glslVersion:ne.glslVersion,precision:G,batching:Tt,instancing:nt,instancingColor:nt&&de.instanceColor!==null,supportsVertexTextures:D,outputColorSpace:un===null?t.outputColorSpace:un.isXRRenderTarget===!0?un.texture.colorSpace:vh,alphaToCoverage:!!ne.alphaToCoverage,map:Mt,matcap:Ve,envMap:or,envMapMode:or&&We.mapping,envMapCubeUVHeight:tt,aoMap:$t,lightMap:Ht,bumpMap:Kt,normalMap:Kn,displacementMap:D&&cn,emissiveMap:ve,normalMapObjectSpace:Kn&&ne.normalMapType===COe,normalMapTangentSpace:Kn&&ne.normalMapType===vg,metalnessMap:he,roughnessMap:Je,anisotropy:Dt,anisotropyMap:dn,clearcoat:Ft,clearcoatMap:Dn,clearcoatNormalMap:Xn,clearcoatRoughnessMap:Ut,iridescence:Rt,iridescenceMap:vr,iridescenceThicknessMap:sr,sheen:bn,sheenColorMap:Tn,sheenRoughnessMap:kn,specularMap:on,specularColorMap:Un,specularIntensityMap:Ae,transmission:sn,transmissionMap:Xt,thicknessMap:Jt,gradientMap:mn,opaque:ne.transparent===!1&&ne.blending===P2&&ne.alphaToCoverage===!1,alphaMap:Te,alphaTest:Wt,alphaHash:Nt,combine:ne.combine,mapUv:Mt&&L(ne.map.channel),aoMapUv:$t&&L(ne.aoMap.channel),lightMapUv:Ht&&L(ne.lightMap.channel),bumpMapUv:Kt&&L(ne.bumpMap.channel),normalMapUv:Kn&&L(ne.normalMap.channel),displacementMapUv:cn&&L(ne.displacementMap.channel),emissiveMapUv:ve&&L(ne.emissiveMap.channel),metalnessMapUv:he&&L(ne.metalnessMap.channel),roughnessMapUv:Je&&L(ne.roughnessMap.channel),anisotropyMapUv:dn&&L(ne.anisotropyMap.channel),clearcoatMapUv:Dn&&L(ne.clearcoatMap.channel),clearcoatNormalMapUv:Xn&&L(ne.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ut&&L(ne.clearcoatRoughnessMap.channel),iridescenceMapUv:vr&&L(ne.iridescenceMap.channel),iridescenceThicknessMapUv:sr&&L(ne.iridescenceThicknessMap.channel),sheenColorMapUv:Tn&&L(ne.sheenColorMap.channel),sheenRoughnessMapUv:kn&&L(ne.sheenRoughnessMap.channel),specularMapUv:on&&L(ne.specularMap.channel),specularColorMapUv:Un&&L(ne.specularColorMap.channel),specularIntensityMapUv:Ae&&L(ne.specularIntensityMap.channel),transmissionMapUv:Xt&&L(ne.transmissionMap.channel),thicknessMapUv:Jt&&L(ne.thicknessMap.channel),alphaMapUv:Te&&L(ne.alphaMap.channel),vertexTangents:!!Me.attributes.tangent&&(Kn||Dt),vertexColors:ne.vertexColors,vertexAlphas:ne.vertexColors===!0&&!!Me.attributes.color&&Me.attributes.color.itemSize===4,pointsUvs:de.isPoints===!0&&!!Me.attributes.uv&&(Mt||Te),fog:!!je,useFog:ne.fog===!0,fogExp2:!!je&&je.isFogExp2,flatShading:ne.flatShading===!0,sizeAttenuation:ne.sizeAttenuation===!0,logarithmicDepthBuffer:M,skinning:de.isSkinnedMesh===!0,morphTargets:Me.morphAttributes.position!==void 0,morphNormals:Me.morphAttributes.normal!==void 0,morphColors:Me.morphAttributes.color!==void 0,morphTargetsCount:At,morphTextureStride:pn,numDirLights:Pe.directional.length,numPointLights:Pe.point.length,numSpotLights:Pe.spot.length,numSpotLightMaps:Pe.spotLightMap.length,numRectAreaLights:Pe.rectArea.length,numHemiLights:Pe.hemi.length,numDirLightShadows:Pe.directionalShadowMap.length,numPointLightShadows:Pe.pointShadowMap.length,numSpotLightShadows:Pe.spotShadowMap.length,numSpotLightShadowsWithMaps:Pe.numSpotLightShadowsWithMaps,numLightProbes:Pe.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:ne.dithering,shadowMapEnabled:t.shadowMap.enabled&&mt.length>0,shadowMapType:t.shadowMap.type,toneMapping:On,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Mt&&ne.map.isVideoTexture===!0&&di.getTransfer(ne.map.colorSpace)===Ai,premultipliedAlpha:ne.premultipliedAlpha,doubleSided:ne.side===Ca,flipSided:ne.side===Ps,useDepthPacking:ne.depthPacking>=0,depthPacking:ne.depthPacking||0,index0AttributeName:ne.index0AttributeName,extensionDerivatives:gn&&ne.extensions.derivatives===!0,extensionFragDepth:gn&&ne.extensions.fragDepth===!0,extensionDrawBuffers:gn&&ne.extensions.drawBuffers===!0,extensionShaderTextureLOD:gn&&ne.extensions.shaderTextureLOD===!0,extensionClipCullDistance:gn&&ne.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:gn&&ne.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:S||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:S||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:S||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:ne.customProgramCacheKey()};return cr.vertexUv1s=v.has(1),cr.vertexUv2s=v.has(2),cr.vertexUv3s=v.has(3),v.clear(),cr}function C(ne){const Pe=[];if(ne.shaderID?Pe.push(ne.shaderID):(Pe.push(ne.customVertexShaderID),Pe.push(ne.customFragmentShaderID)),ne.defines!==void 0)for(const mt in ne.defines)Pe.push(mt),Pe.push(ne.defines[mt]);return ne.isRawShaderMaterial===!1&&(H(Pe,ne),X(Pe,ne),Pe.push(t.outputColorSpace)),Pe.push(ne.customProgramCacheKey),Pe.join()}function H(ne,Pe){ne.push(Pe.precision),ne.push(Pe.outputColorSpace),ne.push(Pe.envMapMode),ne.push(Pe.envMapCubeUVHeight),ne.push(Pe.mapUv),ne.push(Pe.alphaMapUv),ne.push(Pe.lightMapUv),ne.push(Pe.aoMapUv),ne.push(Pe.bumpMapUv),ne.push(Pe.normalMapUv),ne.push(Pe.displacementMapUv),ne.push(Pe.emissiveMapUv),ne.push(Pe.metalnessMapUv),ne.push(Pe.roughnessMapUv),ne.push(Pe.anisotropyMapUv),ne.push(Pe.clearcoatMapUv),ne.push(Pe.clearcoatNormalMapUv),ne.push(Pe.clearcoatRoughnessMapUv),ne.push(Pe.iridescenceMapUv),ne.push(Pe.iridescenceThicknessMapUv),ne.push(Pe.sheenColorMapUv),ne.push(Pe.sheenRoughnessMapUv),ne.push(Pe.specularMapUv),ne.push(Pe.specularColorMapUv),ne.push(Pe.specularIntensityMapUv),ne.push(Pe.transmissionMapUv),ne.push(Pe.thicknessMapUv),ne.push(Pe.combine),ne.push(Pe.fogExp2),ne.push(Pe.sizeAttenuation),ne.push(Pe.morphTargetsCount),ne.push(Pe.morphAttributeCount),ne.push(Pe.numDirLights),ne.push(Pe.numPointLights),ne.push(Pe.numSpotLights),ne.push(Pe.numSpotLightMaps),ne.push(Pe.numHemiLights),ne.push(Pe.numRectAreaLights),ne.push(Pe.numDirLightShadows),ne.push(Pe.numPointLightShadows),ne.push(Pe.numSpotLightShadows),ne.push(Pe.numSpotLightShadowsWithMaps),ne.push(Pe.numLightProbes),ne.push(Pe.shadowMapType),ne.push(Pe.toneMapping),ne.push(Pe.numClippingPlanes),ne.push(Pe.numClipIntersection),ne.push(Pe.depthPacking)}function X(ne,Pe){d.disableAll(),Pe.isWebGL2&&d.enable(0),Pe.supportsVertexTextures&&d.enable(1),Pe.instancing&&d.enable(2),Pe.instancingColor&&d.enable(3),Pe.matcap&&d.enable(4),Pe.envMap&&d.enable(5),Pe.normalMapObjectSpace&&d.enable(6),Pe.normalMapTangentSpace&&d.enable(7),Pe.clearcoat&&d.enable(8),Pe.iridescence&&d.enable(9),Pe.alphaTest&&d.enable(10),Pe.vertexColors&&d.enable(11),Pe.vertexAlphas&&d.enable(12),Pe.vertexUv1s&&d.enable(13),Pe.vertexUv2s&&d.enable(14),Pe.vertexUv3s&&d.enable(15),Pe.vertexTangents&&d.enable(16),Pe.anisotropy&&d.enable(17),Pe.alphaHash&&d.enable(18),Pe.batching&&d.enable(19),ne.push(d.mask),d.disableAll(),Pe.fog&&d.enable(0),Pe.useFog&&d.enable(1),Pe.flatShading&&d.enable(2),Pe.logarithmicDepthBuffer&&d.enable(3),Pe.skinning&&d.enable(4),Pe.morphTargets&&d.enable(5),Pe.morphNormals&&d.enable(6),Pe.morphColors&&d.enable(7),Pe.premultipliedAlpha&&d.enable(8),Pe.shadowMapEnabled&&d.enable(9),Pe.useLegacyLights&&d.enable(10),Pe.doubleSided&&d.enable(11),Pe.flipSided&&d.enable(12),Pe.useDepthPacking&&d.enable(13),Pe.dithering&&d.enable(14),Pe.transmission&&d.enable(15),Pe.sheen&&d.enable(16),Pe.opaque&&d.enable(17),Pe.pointsUvs&&d.enable(18),Pe.decodeVideoTexture&&d.enable(19),Pe.alphaToCoverage&&d.enable(20),ne.push(d.mask)}function fe(ne){const Pe=B[ne.type];let mt;if(Pe){const _t=Sc[Pe];mt=fLe.clone(_t.uniforms)}else mt=ne.uniforms;return mt}function q(ne,Pe){let mt;for(let _t=0,de=x.length;_t<de;_t++){const je=x[_t];if(je.cacheKey===Pe){mt=je,++mt.usedTimes;break}}return mt===void 0&&(mt=new MUe(t,Pe,ne,o),x.push(mt)),mt}function pe(ne){if(--ne.usedTimes===0){const Pe=x.indexOf(ne);x[Pe]=x[x.length-1],x.pop(),ne.destroy()}}function xe(ne){f.remove(ne)}function J(){f.dispose()}return{getParameters:U,getProgramCacheKey:C,getUniforms:fe,acquireProgram:q,releaseProgram:pe,releaseShaderCache:xe,programs:x,dispose:J}}function DUe(){let t=new WeakMap;function e(o){let u=t.get(o);return u===void 0&&(u={},t.set(o,u)),u}function n(o){t.delete(o)}function r(o,u,d){t.get(o)[u]=d}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function OUe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function g3e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function v3e(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function u(S,M,D,G,B,L){let U=t[e];return U===void 0?(U={id:S.id,object:S,geometry:M,material:D,groupOrder:G,renderOrder:S.renderOrder,z:B,group:L},t[e]=U):(U.id=S.id,U.object=S,U.geometry=M,U.material=D,U.groupOrder=G,U.renderOrder=S.renderOrder,U.z=B,U.group=L),e++,U}function d(S,M,D,G,B,L){const U=u(S,M,D,G,B,L);D.transmission>0?r.push(U):D.transparent===!0?i.push(U):n.push(U)}function f(S,M,D,G,B,L){const U=u(S,M,D,G,B,L);D.transmission>0?r.unshift(U):D.transparent===!0?i.unshift(U):n.unshift(U)}function v(S,M){n.length>1&&n.sort(S||OUe),r.length>1&&r.sort(M||g3e),i.length>1&&i.sort(M||g3e)}function x(){for(let S=e,M=t.length;S<M;S++){const D=t[S];if(D.id===null)break;D.id=null,D.object=null,D.geometry=null,D.material=null,D.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:d,unshift:f,finish:x,sort:v}}function LUe(){let t=new WeakMap;function e(r,i){const o=t.get(r);let u;return o===void 0?(u=new v3e,t.set(r,[u])):i>=o.length?(u=new v3e,o.push(u)):u=o[i],u}function n(){t=new WeakMap}return{get:e,dispose:n}}function NUe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Oe,color:new vn};break;case"SpotLight":n={position:new Oe,direction:new Oe,color:new vn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oe,color:new vn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oe,skyColor:new vn,groundColor:new vn};break;case"RectAreaLight":n={color:new vn,position:new Oe,halfWidth:new Oe,halfHeight:new Oe};break}return t[e.id]=n,n}}}function FUe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ln};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ln};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ln,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let BUe=0;function UUe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function zUe(t,e){const n=new NUe,r=FUe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let x=0;x<9;x++)i.probe.push(new Oe);const o=new Oe,u=new Bn,d=new Bn;function f(x,S){let M=0,D=0,G=0;for(let mt=0;mt<9;mt++)i.probe[mt].set(0,0,0);let B=0,L=0,U=0,C=0,H=0,X=0,fe=0,q=0,pe=0,xe=0,J=0;x.sort(UUe);const ne=S===!0?Math.PI:1;for(let mt=0,_t=x.length;mt<_t;mt++){const de=x[mt],je=de.color,Me=de.intensity,Ct=de.distance,We=de.shadow&&de.shadow.map?de.shadow.map.texture:null;if(de.isAmbientLight)M+=je.r*Me*ne,D+=je.g*Me*ne,G+=je.b*Me*ne;else if(de.isLightProbe){for(let tt=0;tt<9;tt++)i.probe[tt].addScaledVector(de.sh.coefficients[tt],Me);J++}else if(de.isDirectionalLight){const tt=n.get(de);if(tt.color.copy(de.color).multiplyScalar(de.intensity*ne),de.castShadow){const Ze=de.shadow,dt=r.get(de);dt.shadowBias=Ze.bias,dt.shadowNormalBias=Ze.normalBias,dt.shadowRadius=Ze.radius,dt.shadowMapSize=Ze.mapSize,i.directionalShadow[B]=dt,i.directionalShadowMap[B]=We,i.directionalShadowMatrix[B]=de.shadow.matrix,X++}i.directional[B]=tt,B++}else if(de.isSpotLight){const tt=n.get(de);tt.position.setFromMatrixPosition(de.matrixWorld),tt.color.copy(je).multiplyScalar(Me*ne),tt.distance=Ct,tt.coneCos=Math.cos(de.angle),tt.penumbraCos=Math.cos(de.angle*(1-de.penumbra)),tt.decay=de.decay,i.spot[U]=tt;const Ze=de.shadow;if(de.map&&(i.spotLightMap[pe]=de.map,pe++,Ze.updateMatrices(de),de.castShadow&&xe++),i.spotLightMatrix[U]=Ze.matrix,de.castShadow){const dt=r.get(de);dt.shadowBias=Ze.bias,dt.shadowNormalBias=Ze.normalBias,dt.shadowRadius=Ze.radius,dt.shadowMapSize=Ze.mapSize,i.spotShadow[U]=dt,i.spotShadowMap[U]=We,q++}U++}else if(de.isRectAreaLight){const tt=n.get(de);tt.color.copy(je).multiplyScalar(Me),tt.halfWidth.set(de.width*.5,0,0),tt.halfHeight.set(0,de.height*.5,0),i.rectArea[C]=tt,C++}else if(de.isPointLight){const tt=n.get(de);if(tt.color.copy(de.color).multiplyScalar(de.intensity*ne),tt.distance=de.distance,tt.decay=de.decay,de.castShadow){const Ze=de.shadow,dt=r.get(de);dt.shadowBias=Ze.bias,dt.shadowNormalBias=Ze.normalBias,dt.shadowRadius=Ze.radius,dt.shadowMapSize=Ze.mapSize,dt.shadowCameraNear=Ze.camera.near,dt.shadowCameraFar=Ze.camera.far,i.pointShadow[L]=dt,i.pointShadowMap[L]=We,i.pointShadowMatrix[L]=de.shadow.matrix,fe++}i.point[L]=tt,L++}else if(de.isHemisphereLight){const tt=n.get(de);tt.skyColor.copy(de.color).multiplyScalar(Me*ne),tt.groundColor.copy(de.groundColor).multiplyScalar(Me*ne),i.hemi[H]=tt,H++}}C>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=en.LTC_FLOAT_1,i.rectAreaLTC2=en.LTC_FLOAT_2):(i.rectAreaLTC1=en.LTC_HALF_1,i.rectAreaLTC2=en.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=en.LTC_FLOAT_1,i.rectAreaLTC2=en.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=en.LTC_HALF_1,i.rectAreaLTC2=en.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=M,i.ambient[1]=D,i.ambient[2]=G;const Pe=i.hash;(Pe.directionalLength!==B||Pe.pointLength!==L||Pe.spotLength!==U||Pe.rectAreaLength!==C||Pe.hemiLength!==H||Pe.numDirectionalShadows!==X||Pe.numPointShadows!==fe||Pe.numSpotShadows!==q||Pe.numSpotMaps!==pe||Pe.numLightProbes!==J)&&(i.directional.length=B,i.spot.length=U,i.rectArea.length=C,i.point.length=L,i.hemi.length=H,i.directionalShadow.length=X,i.directionalShadowMap.length=X,i.pointShadow.length=fe,i.pointShadowMap.length=fe,i.spotShadow.length=q,i.spotShadowMap.length=q,i.directionalShadowMatrix.length=X,i.pointShadowMatrix.length=fe,i.spotLightMatrix.length=q+pe-xe,i.spotLightMap.length=pe,i.numSpotLightShadowsWithMaps=xe,i.numLightProbes=J,Pe.directionalLength=B,Pe.pointLength=L,Pe.spotLength=U,Pe.rectAreaLength=C,Pe.hemiLength=H,Pe.numDirectionalShadows=X,Pe.numPointShadows=fe,Pe.numSpotShadows=q,Pe.numSpotMaps=pe,Pe.numLightProbes=J,i.version=BUe++)}function v(x,S){let M=0,D=0,G=0,B=0,L=0;const U=S.matrixWorldInverse;for(let C=0,H=x.length;C<H;C++){const X=x[C];if(X.isDirectionalLight){const fe=i.directional[M];fe.direction.setFromMatrixPosition(X.matrixWorld),o.setFromMatrixPosition(X.target.matrixWorld),fe.direction.sub(o),fe.direction.transformDirection(U),M++}else if(X.isSpotLight){const fe=i.spot[G];fe.position.setFromMatrixPosition(X.matrixWorld),fe.position.applyMatrix4(U),fe.direction.setFromMatrixPosition(X.matrixWorld),o.setFromMatrixPosition(X.target.matrixWorld),fe.direction.sub(o),fe.direction.transformDirection(U),G++}else if(X.isRectAreaLight){const fe=i.rectArea[B];fe.position.setFromMatrixPosition(X.matrixWorld),fe.position.applyMatrix4(U),d.identity(),u.copy(X.matrixWorld),u.premultiply(U),d.extractRotation(u),fe.halfWidth.set(X.width*.5,0,0),fe.halfHeight.set(0,X.height*.5,0),fe.halfWidth.applyMatrix4(d),fe.halfHeight.applyMatrix4(d),B++}else if(X.isPointLight){const fe=i.point[D];fe.position.setFromMatrixPosition(X.matrixWorld),fe.position.applyMatrix4(U),D++}else if(X.isHemisphereLight){const fe=i.hemi[L];fe.direction.setFromMatrixPosition(X.matrixWorld),fe.direction.transformDirection(U),L++}}}return{setup:f,setupView:v,state:i}}function y3e(t,e){const n=new zUe(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function u(S){r.push(S)}function d(S){i.push(S)}function f(S){n.setup(r,S)}function v(S){n.setupView(r,S)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:f,setupLightsView:v,pushLight:u,pushShadow:d}}function VUe(t,e){let n=new WeakMap;function r(o,u=0){const d=n.get(o);let f;return d===void 0?(f=new y3e(t,e),n.set(o,[f])):u>=d.length?(f=new y3e(t,e),d.push(f)):f=d[u],f}function i(){n=new WeakMap}return{get:r,dispose:i}}class c6e extends A0{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=p_,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class jUe extends A0{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const HUe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GUe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WUe(t,e,n){let r=new O$;const i=new ln,o=new ln,u=new Dr,d=new c6e({depthPacking:EOe}),f=new jUe,v={},x=n.maxTextureSize,S={[Ac]:Ps,[Ps]:Ac,[Ca]:Ca},M=new Ia({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ln},radius:{value:4}},vertexShader:HUe,fragmentShader:GUe}),D=M.clone();D.defines.HORIZONTAL_PASS=1;const G=new Ji;G.setAttribute("position",new Ta(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const B=new Ri(G,M),L=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=B8e;let U=this.type;this.render=function(q,pe,xe){if(L.enabled===!1||L.autoUpdate===!1&&L.needsUpdate===!1||q.length===0)return;const J=t.getRenderTarget(),ne=t.getActiveCubeFace(),Pe=t.getActiveMipmapLevel(),mt=t.state;mt.setBlending(xl),mt.buffers.color.setClear(1,1,1,1),mt.buffers.depth.setTest(!0),mt.setScissorTest(!1);const _t=U!==qd&&this.type===qd,de=U===qd&&this.type!==qd;for(let je=0,Me=q.length;je<Me;je++){const Ct=q[je],We=Ct.shadow;if(We===void 0){console.warn("THREE.WebGLShadowMap:",Ct,"has no shadow.");continue}if(We.autoUpdate===!1&&We.needsUpdate===!1)continue;i.copy(We.mapSize);const tt=We.getFrameExtents();if(i.multiply(tt),o.copy(We.mapSize),(i.x>x||i.y>x)&&(i.x>x&&(o.x=Math.floor(x/tt.x),i.x=o.x*tt.x,We.mapSize.x=o.x),i.y>x&&(o.y=Math.floor(x/tt.y),i.y=o.y*tt.y,We.mapSize.y=o.y)),We.map===null||_t===!0||de===!0){const dt=this.type!==qd?{minFilter:Es,magFilter:Es}:{};We.map!==null&&We.map.dispose(),We.map=new C0(i.x,i.y,dt),We.map.texture.name=Ct.name+".shadowMap",We.camera.updateProjectionMatrix()}t.setRenderTarget(We.map),t.clear();const Ze=We.getViewportCount();for(let dt=0;dt<Ze;dt++){const At=We.getViewport(dt);u.set(o.x*At.x,o.y*At.y,o.x*At.z,o.y*At.w),mt.viewport(u),We.updateMatrices(Ct,dt),r=We.getFrustum(),X(pe,xe,We.camera,Ct,this.type)}We.isPointLightShadow!==!0&&this.type===qd&&C(We,xe),We.needsUpdate=!1}U=this.type,L.needsUpdate=!1,t.setRenderTarget(J,ne,Pe)};function C(q,pe){const xe=e.update(B);M.defines.VSM_SAMPLES!==q.blurSamples&&(M.defines.VSM_SAMPLES=q.blurSamples,D.defines.VSM_SAMPLES=q.blurSamples,M.needsUpdate=!0,D.needsUpdate=!0),q.mapPass===null&&(q.mapPass=new C0(i.x,i.y)),M.uniforms.shadow_pass.value=q.map.texture,M.uniforms.resolution.value=q.mapSize,M.uniforms.radius.value=q.radius,t.setRenderTarget(q.mapPass),t.clear(),t.renderBufferDirect(pe,null,xe,M,B,null),D.uniforms.shadow_pass.value=q.mapPass.texture,D.uniforms.resolution.value=q.mapSize,D.uniforms.radius.value=q.radius,t.setRenderTarget(q.map),t.clear(),t.renderBufferDirect(pe,null,xe,D,B,null)}function H(q,pe,xe,J){let ne=null;const Pe=xe.isPointLight===!0?q.customDistanceMaterial:q.customDepthMaterial;if(Pe!==void 0)ne=Pe;else if(ne=xe.isPointLight===!0?f:d,t.localClippingEnabled&&pe.clipShadows===!0&&Array.isArray(pe.clippingPlanes)&&pe.clippingPlanes.length!==0||pe.displacementMap&&pe.displacementScale!==0||pe.alphaMap&&pe.alphaTest>0||pe.map&&pe.alphaTest>0){const mt=ne.uuid,_t=pe.uuid;let de=v[mt];de===void 0&&(de={},v[mt]=de);let je=de[_t];je===void 0&&(je=ne.clone(),de[_t]=je,pe.addEventListener("dispose",fe)),ne=je}if(ne.visible=pe.visible,ne.wireframe=pe.wireframe,J===qd?ne.side=pe.shadowSide!==null?pe.shadowSide:pe.side:ne.side=pe.shadowSide!==null?pe.shadowSide:S[pe.side],ne.alphaMap=pe.alphaMap,ne.alphaTest=pe.alphaTest,ne.map=pe.map,ne.clipShadows=pe.clipShadows,ne.clippingPlanes=pe.clippingPlanes,ne.clipIntersection=pe.clipIntersection,ne.displacementMap=pe.displacementMap,ne.displacementScale=pe.displacementScale,ne.displacementBias=pe.displacementBias,ne.wireframeLinewidth=pe.wireframeLinewidth,ne.linewidth=pe.linewidth,xe.isPointLight===!0&&ne.isMeshDistanceMaterial===!0){const mt=t.properties.get(ne);mt.light=xe}return ne}function X(q,pe,xe,J,ne){if(q.visible===!1)return;if(q.layers.test(pe.layers)&&(q.isMesh||q.isLine||q.isPoints)&&(q.castShadow||q.receiveShadow&&ne===qd)&&(!q.frustumCulled||r.intersectsObject(q))){q.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,q.matrixWorld);const _t=e.update(q),de=q.material;if(Array.isArray(de)){const je=_t.groups;for(let Me=0,Ct=je.length;Me<Ct;Me++){const We=je[Me],tt=de[We.materialIndex];if(tt&&tt.visible){const Ze=H(q,tt,J,ne);q.onBeforeShadow(t,q,pe,xe,_t,Ze,We),t.renderBufferDirect(xe,null,_t,Ze,q,We),q.onAfterShadow(t,q,pe,xe,_t,Ze,We)}}}else if(de.visible){const je=H(q,de,J,ne);q.onBeforeShadow(t,q,pe,xe,_t,je,null),t.renderBufferDirect(xe,null,_t,je,q,null),q.onAfterShadow(t,q,pe,xe,_t,je,null)}}const mt=q.children;for(let _t=0,de=mt.length;_t<de;_t++)X(mt[_t],pe,xe,J,ne)}function fe(q){q.target.removeEventListener("dispose",fe);for(const xe in v){const J=v[xe],ne=q.target.uuid;ne in J&&(J[ne].dispose(),delete J[ne])}}}function $Ue(t,e,n){const r=n.isWebGL2;function i(){let Te=!1;const Wt=new Dr;let Nt=null;const gn=new Dr(0,0,0,0);return{setMask:function(On){Nt!==On&&!Te&&(t.colorMask(On,On,On,On),Nt=On)},setLocked:function(On){Te=On},setClear:function(On,cr,ar,pr,Mr){Mr===!0&&(On*=pr,cr*=pr,ar*=pr),Wt.set(On,cr,ar,pr),gn.equals(Wt)===!1&&(t.clearColor(On,cr,ar,pr),gn.copy(Wt))},reset:function(){Te=!1,Nt=null,gn.set(-1,0,0,0)}}}function o(){let Te=!1,Wt=null,Nt=null,gn=null;return{setTest:function(On){On?nt(t.DEPTH_TEST):Tt(t.DEPTH_TEST)},setMask:function(On){Wt!==On&&!Te&&(t.depthMask(On),Wt=On)},setFunc:function(On){if(Nt!==On){switch(On){case YDe:t.depthFunc(t.NEVER);break;case ZDe:t.depthFunc(t.ALWAYS);break;case QDe:t.depthFunc(t.LESS);break;case DA:t.depthFunc(t.LEQUAL);break;case JDe:t.depthFunc(t.EQUAL);break;case eOe:t.depthFunc(t.GEQUAL);break;case tOe:t.depthFunc(t.GREATER);break;case nOe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Nt=On}},setLocked:function(On){Te=On},setClear:function(On){gn!==On&&(t.clearDepth(On),gn=On)},reset:function(){Te=!1,Wt=null,Nt=null,gn=null}}}function u(){let Te=!1,Wt=null,Nt=null,gn=null,On=null,cr=null,ar=null,pr=null,Mr=null;return{setTest:function(Zn){Te||(Zn?nt(t.STENCIL_TEST):Tt(t.STENCIL_TEST))},setMask:function(Zn){Wt!==Zn&&!Te&&(t.stencilMask(Zn),Wt=Zn)},setFunc:function(Zn,oi,ns){(Nt!==Zn||gn!==oi||On!==ns)&&(t.stencilFunc(Zn,oi,ns),Nt=Zn,gn=oi,On=ns)},setOp:function(Zn,oi,ns){(cr!==Zn||ar!==oi||pr!==ns)&&(t.stencilOp(Zn,oi,ns),cr=Zn,ar=oi,pr=ns)},setLocked:function(Zn){Te=Zn},setClear:function(Zn){Mr!==Zn&&(t.clearStencil(Zn),Mr=Zn)},reset:function(){Te=!1,Wt=null,Nt=null,gn=null,On=null,cr=null,ar=null,pr=null,Mr=null}}}const d=new i,f=new o,v=new u,x=new WeakMap,S=new WeakMap;let M={},D={},G=new WeakMap,B=[],L=null,U=!1,C=null,H=null,X=null,fe=null,q=null,pe=null,xe=null,J=new vn(0,0,0),ne=0,Pe=!1,mt=null,_t=null,de=null,je=null,Me=null;const Ct=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let We=!1,tt=0;const Ze=t.getParameter(t.VERSION);Ze.indexOf("WebGL")!==-1?(tt=parseFloat(/^WebGL (\d)/.exec(Ze)[1]),We=tt>=1):Ze.indexOf("OpenGL ES")!==-1&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(Ze)[1]),We=tt>=2);let dt=null,At={};const pn=t.getParameter(t.SCISSOR_BOX),et=t.getParameter(t.VIEWPORT),wt=new Dr().fromArray(pn),Zt=new Dr().fromArray(et);function rn(Te,Wt,Nt,gn){const On=new Uint8Array(4),cr=t.createTexture();t.bindTexture(Te,cr),t.texParameteri(Te,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Te,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let ar=0;ar<Nt;ar++)r&&(Te===t.TEXTURE_3D||Te===t.TEXTURE_2D_ARRAY)?t.texImage3D(Wt,0,t.RGBA,1,1,gn,0,t.RGBA,t.UNSIGNED_BYTE,On):t.texImage2D(Wt+ar,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,On);return cr}const un={};un[t.TEXTURE_2D]=rn(t.TEXTURE_2D,t.TEXTURE_2D,1),un[t.TEXTURE_CUBE_MAP]=rn(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(un[t.TEXTURE_2D_ARRAY]=rn(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),un[t.TEXTURE_3D]=rn(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),d.setClear(0,0,0,1),f.setClear(1),v.setClear(0),nt(t.DEPTH_TEST),f.setFunc(DA),cn(!1),ve(t9e),nt(t.CULL_FACE),Kt(xl);function nt(Te){M[Te]!==!0&&(t.enable(Te),M[Te]=!0)}function Tt(Te){M[Te]!==!1&&(t.disable(Te),M[Te]=!1)}function Mt(Te,Wt){return D[Te]!==Wt?(t.bindFramebuffer(Te,Wt),D[Te]=Wt,r&&(Te===t.DRAW_FRAMEBUFFER&&(D[t.FRAMEBUFFER]=Wt),Te===t.FRAMEBUFFER&&(D[t.DRAW_FRAMEBUFFER]=Wt)),!0):!1}function Ve(Te,Wt){let Nt=B,gn=!1;if(Te)if(Nt=G.get(Wt),Nt===void 0&&(Nt=[],G.set(Wt,Nt)),Te.isWebGLMultipleRenderTargets){const On=Te.texture;if(Nt.length!==On.length||Nt[0]!==t.COLOR_ATTACHMENT0){for(let cr=0,ar=On.length;cr<ar;cr++)Nt[cr]=t.COLOR_ATTACHMENT0+cr;Nt.length=On.length,gn=!0}}else Nt[0]!==t.COLOR_ATTACHMENT0&&(Nt[0]=t.COLOR_ATTACHMENT0,gn=!0);else Nt[0]!==t.BACK&&(Nt[0]=t.BACK,gn=!0);gn&&(n.isWebGL2?t.drawBuffers(Nt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Nt))}function or(Te){return L!==Te?(t.useProgram(Te),L=Te,!0):!1}const $t={[Mf]:t.FUNC_ADD,[z8e]:t.FUNC_SUBTRACT,[V8e]:t.FUNC_REVERSE_SUBTRACT};if(r)$t[AG]=t.MIN,$t[IG]=t.MAX;else{const Te=e.get("EXT_blend_minmax");Te!==null&&($t[AG]=Te.MIN_EXT,$t[IG]=Te.MAX_EXT)}const Ht={[g$]:t.ZERO,[v$]:t.ONE,[y$]:t.SRC_COLOR,[Lb]:t.SRC_ALPHA,[j8e]:t.SRC_ALPHA_SATURATE,[x$]:t.DST_COLOR,[_$]:t.DST_ALPHA,[b$]:t.ONE_MINUS_SRC_COLOR,[Nb]:t.ONE_MINUS_SRC_ALPHA,[S$]:t.ONE_MINUS_DST_COLOR,[w$]:t.ONE_MINUS_DST_ALPHA,[E$]:t.CONSTANT_COLOR,[C$]:t.ONE_MINUS_CONSTANT_COLOR,[P$]:t.CONSTANT_ALPHA,[T$]:t.ONE_MINUS_CONSTANT_ALPHA};function Kt(Te,Wt,Nt,gn,On,cr,ar,pr,Mr,Zn){if(Te===xl){U===!0&&(Tt(t.BLEND),U=!1);return}if(U===!1&&(nt(t.BLEND),U=!0),Te!==U8e){if(Te!==C||Zn!==Pe){if((H!==Mf||q!==Mf)&&(t.blendEquation(t.FUNC_ADD),H=Mf,q=Mf),Zn)switch(Te){case P2:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case TG:t.blendFunc(t.ONE,t.ONE);break;case MG:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case kG:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case P2:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case TG:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case MG:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case kG:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}X=null,fe=null,pe=null,xe=null,J.set(0,0,0),ne=0,C=Te,Pe=Zn}return}On=On||Wt,cr=cr||Nt,ar=ar||gn,(Wt!==H||On!==q)&&(t.blendEquationSeparate($t[Wt],$t[On]),H=Wt,q=On),(Nt!==X||gn!==fe||cr!==pe||ar!==xe)&&(t.blendFuncSeparate(Ht[Nt],Ht[gn],Ht[cr],Ht[ar]),X=Nt,fe=gn,pe=cr,xe=ar),(pr.equals(J)===!1||Mr!==ne)&&(t.blendColor(pr.r,pr.g,pr.b,Mr),J.copy(pr),ne=Mr),C=Te,Pe=!1}function Kn(Te,Wt){Te.side===Ca?Tt(t.CULL_FACE):nt(t.CULL_FACE);let Nt=Te.side===Ps;Wt&&(Nt=!Nt),cn(Nt),Te.blending===P2&&Te.transparent===!1?Kt(xl):Kt(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),f.setFunc(Te.depthFunc),f.setTest(Te.depthTest),f.setMask(Te.depthWrite),d.setMask(Te.colorWrite);const gn=Te.stencilWrite;v.setTest(gn),gn&&(v.setMask(Te.stencilWriteMask),v.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),v.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),Je(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?nt(t.SAMPLE_ALPHA_TO_COVERAGE):Tt(t.SAMPLE_ALPHA_TO_COVERAGE)}function cn(Te){mt!==Te&&(Te?t.frontFace(t.CW):t.frontFace(t.CCW),mt=Te)}function ve(Te){Te!==KDe?(nt(t.CULL_FACE),Te!==_t&&(Te===t9e?t.cullFace(t.BACK):Te===XDe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Tt(t.CULL_FACE),_t=Te}function he(Te){Te!==de&&(We&&t.lineWidth(Te),de=Te)}function Je(Te,Wt,Nt){Te?(nt(t.POLYGON_OFFSET_FILL),(je!==Wt||Me!==Nt)&&(t.polygonOffset(Wt,Nt),je=Wt,Me=Nt)):Tt(t.POLYGON_OFFSET_FILL)}function Dt(Te){Te?nt(t.SCISSOR_TEST):Tt(t.SCISSOR_TEST)}function Ft(Te){Te===void 0&&(Te=t.TEXTURE0+Ct-1),dt!==Te&&(t.activeTexture(Te),dt=Te)}function Rt(Te,Wt,Nt){Nt===void 0&&(dt===null?Nt=t.TEXTURE0+Ct-1:Nt=dt);let gn=At[Nt];gn===void 0&&(gn={type:void 0,texture:void 0},At[Nt]=gn),(gn.type!==Te||gn.texture!==Wt)&&(dt!==Nt&&(t.activeTexture(Nt),dt=Nt),t.bindTexture(Te,Wt||un[Te]),gn.type=Te,gn.texture=Wt)}function bn(){const Te=At[dt];Te!==void 0&&Te.type!==void 0&&(t.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function sn(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function dn(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Dn(){try{t.texSubImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Xn(){try{t.texSubImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ut(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function vr(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function sr(){try{t.texStorage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Tn(){try{t.texStorage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function kn(){try{t.texImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function on(){try{t.texImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Un(Te){wt.equals(Te)===!1&&(t.scissor(Te.x,Te.y,Te.z,Te.w),wt.copy(Te))}function Ae(Te){Zt.equals(Te)===!1&&(t.viewport(Te.x,Te.y,Te.z,Te.w),Zt.copy(Te))}function Xt(Te,Wt){let Nt=S.get(Wt);Nt===void 0&&(Nt=new WeakMap,S.set(Wt,Nt));let gn=Nt.get(Te);gn===void 0&&(gn=t.getUniformBlockIndex(Wt,Te.name),Nt.set(Te,gn))}function Jt(Te,Wt){const gn=S.get(Wt).get(Te);x.get(Wt)!==gn&&(t.uniformBlockBinding(Wt,gn,Te.__bindingPointIndex),x.set(Wt,gn))}function mn(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),M={},dt=null,At={},D={},G=new WeakMap,B=[],L=null,U=!1,C=null,H=null,X=null,fe=null,q=null,pe=null,xe=null,J=new vn(0,0,0),ne=0,Pe=!1,mt=null,_t=null,de=null,je=null,Me=null,wt.set(0,0,t.canvas.width,t.canvas.height),Zt.set(0,0,t.canvas.width,t.canvas.height),d.reset(),f.reset(),v.reset()}return{buffers:{color:d,depth:f,stencil:v},enable:nt,disable:Tt,bindFramebuffer:Mt,drawBuffers:Ve,useProgram:or,setBlending:Kt,setMaterial:Kn,setFlipSided:cn,setCullFace:ve,setLineWidth:he,setPolygonOffset:Je,setScissorTest:Dt,activeTexture:Ft,bindTexture:Rt,unbindTexture:bn,compressedTexImage2D:sn,compressedTexImage3D:dn,texImage2D:kn,texImage3D:on,updateUBOMapping:Xt,uniformBlockBinding:Jt,texStorage2D:sr,texStorage3D:Tn,texSubImage2D:Dn,texSubImage3D:Xn,compressedTexSubImage2D:Ut,compressedTexSubImage3D:vr,scissor:Un,viewport:Ae,reset:mn}}function KUe(t,e,n,r,i,o,u){const d=i.isWebGL2,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let S;const M=new WeakMap;let D=!1;try{D=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function G(ve,he){return D?new OffscreenCanvas(ve,he):Fb("canvas")}function B(ve,he,Je,Dt){let Ft=1;if((ve.width>Dt||ve.height>Dt)&&(Ft=Dt/Math.max(ve.width,ve.height)),Ft<1||he===!0)if(typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ve instanceof ImageBitmap){const Rt=he?jA:Math.floor,bn=Rt(Ft*ve.width),sn=Rt(Ft*ve.height);S===void 0&&(S=G(bn,sn));const dn=Je?G(bn,sn):S;return dn.width=bn,dn.height=sn,dn.getContext("2d").drawImage(ve,0,0,bn,sn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+bn+"x"+sn+")."),dn}else return"data"in ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),ve;return ve}function L(ve){return NG(ve.width)&&NG(ve.height)}function U(ve){return d?!1:ve.wrapS!==Ss||ve.wrapT!==Ss||ve.minFilter!==Es&&ve.minFilter!==as}function C(ve,he){return ve.generateMipmaps&&he&&ve.minFilter!==Es&&ve.minFilter!==as}function H(ve){t.generateMipmap(ve)}function X(ve,he,Je,Dt,Ft=!1){if(d===!1)return he;if(ve!==null){if(t[ve]!==void 0)return t[ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let Rt=he;if(he===t.RED&&(Je===t.FLOAT&&(Rt=t.R32F),Je===t.HALF_FLOAT&&(Rt=t.R16F),Je===t.UNSIGNED_BYTE&&(Rt=t.R8)),he===t.RED_INTEGER&&(Je===t.UNSIGNED_BYTE&&(Rt=t.R8UI),Je===t.UNSIGNED_SHORT&&(Rt=t.R16UI),Je===t.UNSIGNED_INT&&(Rt=t.R32UI),Je===t.BYTE&&(Rt=t.R8I),Je===t.SHORT&&(Rt=t.R16I),Je===t.INT&&(Rt=t.R32I)),he===t.RG&&(Je===t.FLOAT&&(Rt=t.RG32F),Je===t.HALF_FLOAT&&(Rt=t.RG16F),Je===t.UNSIGNED_BYTE&&(Rt=t.RG8)),he===t.RGBA){const bn=Ft?BA:di.getTransfer(Dt);Je===t.FLOAT&&(Rt=t.RGBA32F),Je===t.HALF_FLOAT&&(Rt=t.RGBA16F),Je===t.UNSIGNED_BYTE&&(Rt=bn===Ai?t.SRGB8_ALPHA8:t.RGBA8),Je===t.UNSIGNED_SHORT_4_4_4_4&&(Rt=t.RGBA4),Je===t.UNSIGNED_SHORT_5_5_5_1&&(Rt=t.RGB5_A1)}return(Rt===t.R16F||Rt===t.R32F||Rt===t.RG16F||Rt===t.RG32F||Rt===t.RGBA16F||Rt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Rt}function fe(ve,he,Je){return C(ve,Je)===!0||ve.isFramebufferTexture&&ve.minFilter!==Es&&ve.minFilter!==as?Math.log2(Math.max(he.width,he.height))+1:ve.mipmaps!==void 0&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?he.mipmaps.length:1}function q(ve){return ve===Es||ve===r9e||ve===Ey?t.NEAREST:t.LINEAR}function pe(ve){const he=ve.target;he.removeEventListener("dispose",pe),J(he),he.isVideoTexture&&x.delete(he)}function xe(ve){const he=ve.target;he.removeEventListener("dispose",xe),Pe(he)}function J(ve){const he=r.get(ve);if(he.__webglInit===void 0)return;const Je=ve.source,Dt=M.get(Je);if(Dt){const Ft=Dt[he.__cacheKey];Ft.usedTimes--,Ft.usedTimes===0&&ne(ve),Object.keys(Dt).length===0&&M.delete(Je)}r.remove(ve)}function ne(ve){const he=r.get(ve);t.deleteTexture(he.__webglTexture);const Je=ve.source,Dt=M.get(Je);delete Dt[he.__cacheKey],u.memory.textures--}function Pe(ve){const he=ve.texture,Je=r.get(ve),Dt=r.get(he);if(Dt.__webglTexture!==void 0&&(t.deleteTexture(Dt.__webglTexture),u.memory.textures--),ve.depthTexture&&ve.depthTexture.dispose(),ve.isWebGLCubeRenderTarget)for(let Ft=0;Ft<6;Ft++){if(Array.isArray(Je.__webglFramebuffer[Ft]))for(let Rt=0;Rt<Je.__webglFramebuffer[Ft].length;Rt++)t.deleteFramebuffer(Je.__webglFramebuffer[Ft][Rt]);else t.deleteFramebuffer(Je.__webglFramebuffer[Ft]);Je.__webglDepthbuffer&&t.deleteRenderbuffer(Je.__webglDepthbuffer[Ft])}else{if(Array.isArray(Je.__webglFramebuffer))for(let Ft=0;Ft<Je.__webglFramebuffer.length;Ft++)t.deleteFramebuffer(Je.__webglFramebuffer[Ft]);else t.deleteFramebuffer(Je.__webglFramebuffer);if(Je.__webglDepthbuffer&&t.deleteRenderbuffer(Je.__webglDepthbuffer),Je.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Je.__webglMultisampledFramebuffer),Je.__webglColorRenderbuffer)for(let Ft=0;Ft<Je.__webglColorRenderbuffer.length;Ft++)Je.__webglColorRenderbuffer[Ft]&&t.deleteRenderbuffer(Je.__webglColorRenderbuffer[Ft]);Je.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Je.__webglDepthRenderbuffer)}if(ve.isWebGLMultipleRenderTargets)for(let Ft=0,Rt=he.length;Ft<Rt;Ft++){const bn=r.get(he[Ft]);bn.__webglTexture&&(t.deleteTexture(bn.__webglTexture),u.memory.textures--),r.remove(he[Ft])}r.remove(he),r.remove(ve)}let mt=0;function _t(){mt=0}function de(){const ve=mt;return ve>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+i.maxTextures),mt+=1,ve}function je(ve){const he=[];return he.push(ve.wrapS),he.push(ve.wrapT),he.push(ve.wrapR||0),he.push(ve.magFilter),he.push(ve.minFilter),he.push(ve.anisotropy),he.push(ve.internalFormat),he.push(ve.format),he.push(ve.type),he.push(ve.generateMipmaps),he.push(ve.premultiplyAlpha),he.push(ve.flipY),he.push(ve.unpackAlignment),he.push(ve.colorSpace),he.join()}function Me(ve,he){const Je=r.get(ve);if(ve.isVideoTexture&&Kn(ve),ve.isRenderTargetTexture===!1&&ve.version>0&&Je.__version!==ve.version){const Dt=ve.image;if(Dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{wt(Je,ve,he);return}}n.bindTexture(t.TEXTURE_2D,Je.__webglTexture,t.TEXTURE0+he)}function Ct(ve,he){const Je=r.get(ve);if(ve.version>0&&Je.__version!==ve.version){wt(Je,ve,he);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Je.__webglTexture,t.TEXTURE0+he)}function We(ve,he){const Je=r.get(ve);if(ve.version>0&&Je.__version!==ve.version){wt(Je,ve,he);return}n.bindTexture(t.TEXTURE_3D,Je.__webglTexture,t.TEXTURE0+he)}function tt(ve,he){const Je=r.get(ve);if(ve.version>0&&Je.__version!==ve.version){Zt(Je,ve,he);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Je.__webglTexture,t.TEXTURE0+he)}const Ze={[gh]:t.REPEAT,[Ss]:t.CLAMP_TO_EDGE,[DG]:t.MIRRORED_REPEAT},dt={[Es]:t.NEAREST,[r9e]:t.NEAREST_MIPMAP_NEAREST,[Ey]:t.NEAREST_MIPMAP_LINEAR,[as]:t.LINEAR,[aj]:t.LINEAR_MIPMAP_NEAREST,[w2]:t.LINEAR_MIPMAP_LINEAR},At={[POe]:t.NEVER,[ROe]:t.ALWAYS,[TOe]:t.LESS,[Y8e]:t.LEQUAL,[MOe]:t.EQUAL,[IOe]:t.GEQUAL,[kOe]:t.GREATER,[AOe]:t.NOTEQUAL};function pn(ve,he,Je){if(he.type===ml&&e.has("OES_texture_float_linear")===!1&&(he.magFilter===as||he.magFilter===aj||he.magFilter===Ey||he.magFilter===w2||he.minFilter===as||he.minFilter===aj||he.minFilter===Ey||he.minFilter===w2)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),Je?(t.texParameteri(ve,t.TEXTURE_WRAP_S,Ze[he.wrapS]),t.texParameteri(ve,t.TEXTURE_WRAP_T,Ze[he.wrapT]),(ve===t.TEXTURE_3D||ve===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ve,t.TEXTURE_WRAP_R,Ze[he.wrapR]),t.texParameteri(ve,t.TEXTURE_MAG_FILTER,dt[he.magFilter]),t.texParameteri(ve,t.TEXTURE_MIN_FILTER,dt[he.minFilter])):(t.texParameteri(ve,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(ve,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(ve===t.TEXTURE_3D||ve===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ve,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(he.wrapS!==Ss||he.wrapT!==Ss)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ve,t.TEXTURE_MAG_FILTER,q(he.magFilter)),t.texParameteri(ve,t.TEXTURE_MIN_FILTER,q(he.minFilter)),he.minFilter!==Es&&he.minFilter!==as&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),he.compareFunction&&(t.texParameteri(ve,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ve,t.TEXTURE_COMPARE_FUNC,At[he.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Dt=e.get("EXT_texture_filter_anisotropic");if(he.magFilter===Es||he.minFilter!==Ey&&he.minFilter!==w2||he.type===ml&&e.has("OES_texture_float_linear")===!1||d===!1&&he.type===F2&&e.has("OES_texture_half_float_linear")===!1)return;(he.anisotropy>1||r.get(he).__currentAnisotropy)&&(t.texParameterf(ve,Dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(he.anisotropy,i.getMaxAnisotropy())),r.get(he).__currentAnisotropy=he.anisotropy)}}function et(ve,he){let Je=!1;ve.__webglInit===void 0&&(ve.__webglInit=!0,he.addEventListener("dispose",pe));const Dt=he.source;let Ft=M.get(Dt);Ft===void 0&&(Ft={},M.set(Dt,Ft));const Rt=je(he);if(Rt!==ve.__cacheKey){Ft[Rt]===void 0&&(Ft[Rt]={texture:t.createTexture(),usedTimes:0},u.memory.textures++,Je=!0),Ft[Rt].usedTimes++;const bn=Ft[ve.__cacheKey];bn!==void 0&&(Ft[ve.__cacheKey].usedTimes--,bn.usedTimes===0&&ne(he)),ve.__cacheKey=Rt,ve.__webglTexture=Ft[Rt].texture}return Je}function wt(ve,he,Je){let Dt=t.TEXTURE_2D;(he.isDataArrayTexture||he.isCompressedArrayTexture)&&(Dt=t.TEXTURE_2D_ARRAY),he.isData3DTexture&&(Dt=t.TEXTURE_3D);const Ft=et(ve,he),Rt=he.source;n.bindTexture(Dt,ve.__webglTexture,t.TEXTURE0+Je);const bn=r.get(Rt);if(Rt.version!==bn.__version||Ft===!0){n.activeTexture(t.TEXTURE0+Je);const sn=di.getPrimaries(di.workingColorSpace),dn=he.colorSpace===gl?null:di.getPrimaries(he.colorSpace),Dn=he.colorSpace===gl||sn===dn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,he.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,he.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dn);const Xn=U(he)&&L(he.image)===!1;let Ut=B(he.image,Xn,!1,i.maxTextureSize);Ut=cn(he,Ut);const vr=L(Ut)||d,sr=o.convert(he.format,he.colorSpace);let Tn=o.convert(he.type),kn=X(he.internalFormat,sr,Tn,he.colorSpace,he.isVideoTexture);pn(Dt,he,vr);let on;const Un=he.mipmaps,Ae=d&&he.isVideoTexture!==!0&&kn!==q8e,Xt=bn.__version===void 0||Ft===!0,Jt=Rt.dataReady,mn=fe(he,Ut,vr);if(he.isDepthTexture)kn=t.DEPTH_COMPONENT,d?he.type===ml?kn=t.DEPTH_COMPONENT32F:he.type===th?kn=t.DEPTH_COMPONENT24:he.type===Hf?kn=t.DEPTH24_STENCIL8:kn=t.DEPTH_COMPONENT16:he.type===ml&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),he.format===T2&&kn===t.DEPTH_COMPONENT&&he.type!==M$&&he.type!==th&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),he.type=th,Tn=o.convert(he.type)),he.format===B2&&kn===t.DEPTH_COMPONENT&&(kn=t.DEPTH_STENCIL,he.type!==Hf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),he.type=Hf,Tn=o.convert(he.type))),Xt&&(Ae?n.texStorage2D(t.TEXTURE_2D,1,kn,Ut.width,Ut.height):n.texImage2D(t.TEXTURE_2D,0,kn,Ut.width,Ut.height,0,sr,Tn,null));else if(he.isDataTexture)if(Un.length>0&&vr){Ae&&Xt&&n.texStorage2D(t.TEXTURE_2D,mn,kn,Un[0].width,Un[0].height);for(let Te=0,Wt=Un.length;Te<Wt;Te++)on=Un[Te],Ae?Jt&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,on.width,on.height,sr,Tn,on.data):n.texImage2D(t.TEXTURE_2D,Te,kn,on.width,on.height,0,sr,Tn,on.data);he.generateMipmaps=!1}else Ae?(Xt&&n.texStorage2D(t.TEXTURE_2D,mn,kn,Ut.width,Ut.height),Jt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ut.width,Ut.height,sr,Tn,Ut.data)):n.texImage2D(t.TEXTURE_2D,0,kn,Ut.width,Ut.height,0,sr,Tn,Ut.data);else if(he.isCompressedTexture)if(he.isCompressedArrayTexture){Ae&&Xt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,mn,kn,Un[0].width,Un[0].height,Ut.depth);for(let Te=0,Wt=Un.length;Te<Wt;Te++)on=Un[Te],he.format!==ea?sr!==null?Ae?Jt&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,0,on.width,on.height,Ut.depth,sr,on.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Te,kn,on.width,on.height,Ut.depth,0,on.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Jt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,0,on.width,on.height,Ut.depth,sr,Tn,on.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Te,kn,on.width,on.height,Ut.depth,0,sr,Tn,on.data)}else{Ae&&Xt&&n.texStorage2D(t.TEXTURE_2D,mn,kn,Un[0].width,Un[0].height);for(let Te=0,Wt=Un.length;Te<Wt;Te++)on=Un[Te],he.format!==ea?sr!==null?Ae?Jt&&n.compressedTexSubImage2D(t.TEXTURE_2D,Te,0,0,on.width,on.height,sr,on.data):n.compressedTexImage2D(t.TEXTURE_2D,Te,kn,on.width,on.height,0,on.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Jt&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,on.width,on.height,sr,Tn,on.data):n.texImage2D(t.TEXTURE_2D,Te,kn,on.width,on.height,0,sr,Tn,on.data)}else if(he.isDataArrayTexture)Ae?(Xt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,mn,kn,Ut.width,Ut.height,Ut.depth),Jt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ut.width,Ut.height,Ut.depth,sr,Tn,Ut.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,kn,Ut.width,Ut.height,Ut.depth,0,sr,Tn,Ut.data);else if(he.isData3DTexture)Ae?(Xt&&n.texStorage3D(t.TEXTURE_3D,mn,kn,Ut.width,Ut.height,Ut.depth),Jt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ut.width,Ut.height,Ut.depth,sr,Tn,Ut.data)):n.texImage3D(t.TEXTURE_3D,0,kn,Ut.width,Ut.height,Ut.depth,0,sr,Tn,Ut.data);else if(he.isFramebufferTexture){if(Xt)if(Ae)n.texStorage2D(t.TEXTURE_2D,mn,kn,Ut.width,Ut.height);else{let Te=Ut.width,Wt=Ut.height;for(let Nt=0;Nt<mn;Nt++)n.texImage2D(t.TEXTURE_2D,Nt,kn,Te,Wt,0,sr,Tn,null),Te>>=1,Wt>>=1}}else if(Un.length>0&&vr){Ae&&Xt&&n.texStorage2D(t.TEXTURE_2D,mn,kn,Un[0].width,Un[0].height);for(let Te=0,Wt=Un.length;Te<Wt;Te++)on=Un[Te],Ae?Jt&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,sr,Tn,on):n.texImage2D(t.TEXTURE_2D,Te,kn,sr,Tn,on);he.generateMipmaps=!1}else Ae?(Xt&&n.texStorage2D(t.TEXTURE_2D,mn,kn,Ut.width,Ut.height),Jt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,sr,Tn,Ut)):n.texImage2D(t.TEXTURE_2D,0,kn,sr,Tn,Ut);C(he,vr)&&H(Dt),bn.__version=Rt.version,he.onUpdate&&he.onUpdate(he)}ve.__version=he.version}function Zt(ve,he,Je){if(he.image.length!==6)return;const Dt=et(ve,he),Ft=he.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ve.__webglTexture,t.TEXTURE0+Je);const Rt=r.get(Ft);if(Ft.version!==Rt.__version||Dt===!0){n.activeTexture(t.TEXTURE0+Je);const bn=di.getPrimaries(di.workingColorSpace),sn=he.colorSpace===gl?null:di.getPrimaries(he.colorSpace),dn=he.colorSpace===gl||bn===sn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,he.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,he.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,dn);const Dn=he.isCompressedTexture||he.image[0].isCompressedTexture,Xn=he.image[0]&&he.image[0].isDataTexture,Ut=[];for(let Te=0;Te<6;Te++)!Dn&&!Xn?Ut[Te]=B(he.image[Te],!1,!0,i.maxCubemapSize):Ut[Te]=Xn?he.image[Te].image:he.image[Te],Ut[Te]=cn(he,Ut[Te]);const vr=Ut[0],sr=L(vr)||d,Tn=o.convert(he.format,he.colorSpace),kn=o.convert(he.type),on=X(he.internalFormat,Tn,kn,he.colorSpace),Un=d&&he.isVideoTexture!==!0,Ae=Rt.__version===void 0||Dt===!0,Xt=Ft.dataReady;let Jt=fe(he,vr,sr);pn(t.TEXTURE_CUBE_MAP,he,sr);let mn;if(Dn){Un&&Ae&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Jt,on,vr.width,vr.height);for(let Te=0;Te<6;Te++){mn=Ut[Te].mipmaps;for(let Wt=0;Wt<mn.length;Wt++){const Nt=mn[Wt];he.format!==ea?Tn!==null?Un?Xt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt,0,0,Nt.width,Nt.height,Tn,Nt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt,on,Nt.width,Nt.height,0,Nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Un?Xt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt,0,0,Nt.width,Nt.height,Tn,kn,Nt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt,on,Nt.width,Nt.height,0,Tn,kn,Nt.data)}}}else{mn=he.mipmaps,Un&&Ae&&(mn.length>0&&Jt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Jt,on,Ut[0].width,Ut[0].height));for(let Te=0;Te<6;Te++)if(Xn){Un?Xt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Ut[Te].width,Ut[Te].height,Tn,kn,Ut[Te].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,on,Ut[Te].width,Ut[Te].height,0,Tn,kn,Ut[Te].data);for(let Wt=0;Wt<mn.length;Wt++){const gn=mn[Wt].image[Te].image;Un?Xt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt+1,0,0,gn.width,gn.height,Tn,kn,gn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt+1,on,gn.width,gn.height,0,Tn,kn,gn.data)}}else{Un?Xt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Tn,kn,Ut[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,on,Tn,kn,Ut[Te]);for(let Wt=0;Wt<mn.length;Wt++){const Nt=mn[Wt];Un?Xt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt+1,0,0,Tn,kn,Nt.image[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Wt+1,on,Tn,kn,Nt.image[Te])}}}C(he,sr)&&H(t.TEXTURE_CUBE_MAP),Rt.__version=Ft.version,he.onUpdate&&he.onUpdate(he)}ve.__version=he.version}function rn(ve,he,Je,Dt,Ft,Rt){const bn=o.convert(Je.format,Je.colorSpace),sn=o.convert(Je.type),dn=X(Je.internalFormat,bn,sn,Je.colorSpace);if(!r.get(he).__hasExternalTextures){const Xn=Math.max(1,he.width>>Rt),Ut=Math.max(1,he.height>>Rt);Ft===t.TEXTURE_3D||Ft===t.TEXTURE_2D_ARRAY?n.texImage3D(Ft,Rt,dn,Xn,Ut,he.depth,0,bn,sn,null):n.texImage2D(Ft,Rt,dn,Xn,Ut,0,bn,sn,null)}n.bindFramebuffer(t.FRAMEBUFFER,ve),Kt(he)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Dt,Ft,r.get(Je).__webglTexture,0,Ht(he)):(Ft===t.TEXTURE_2D||Ft>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ft<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Dt,Ft,r.get(Je).__webglTexture,Rt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function un(ve,he,Je){if(t.bindRenderbuffer(t.RENDERBUFFER,ve),he.depthBuffer&&!he.stencilBuffer){let Dt=d===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(Je||Kt(he)){const Ft=he.depthTexture;Ft&&Ft.isDepthTexture&&(Ft.type===ml?Dt=t.DEPTH_COMPONENT32F:Ft.type===th&&(Dt=t.DEPTH_COMPONENT24));const Rt=Ht(he);Kt(he)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Rt,Dt,he.width,he.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Rt,Dt,he.width,he.height)}else t.renderbufferStorage(t.RENDERBUFFER,Dt,he.width,he.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,ve)}else if(he.depthBuffer&&he.stencilBuffer){const Dt=Ht(he);Je&&Kt(he)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Dt,t.DEPTH24_STENCIL8,he.width,he.height):Kt(he)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Dt,t.DEPTH24_STENCIL8,he.width,he.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,he.width,he.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,ve)}else{const Dt=he.isWebGLMultipleRenderTargets===!0?he.texture:[he.texture];for(let Ft=0;Ft<Dt.length;Ft++){const Rt=Dt[Ft],bn=o.convert(Rt.format,Rt.colorSpace),sn=o.convert(Rt.type),dn=X(Rt.internalFormat,bn,sn,Rt.colorSpace),Dn=Ht(he);Je&&Kt(he)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Dn,dn,he.width,he.height):Kt(he)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Dn,dn,he.width,he.height):t.renderbufferStorage(t.RENDERBUFFER,dn,he.width,he.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function nt(ve,he){if(he&&he.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ve),!(he.depthTexture&&he.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(he.depthTexture).__webglTexture||he.depthTexture.image.width!==he.width||he.depthTexture.image.height!==he.height)&&(he.depthTexture.image.width=he.width,he.depthTexture.image.height=he.height,he.depthTexture.needsUpdate=!0),Me(he.depthTexture,0);const Dt=r.get(he.depthTexture).__webglTexture,Ft=Ht(he);if(he.depthTexture.format===T2)Kt(he)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Dt,0,Ft):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Dt,0);else if(he.depthTexture.format===B2)Kt(he)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Dt,0,Ft):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Dt,0);else throw new Error("Unknown depthTexture format")}function Tt(ve){const he=r.get(ve),Je=ve.isWebGLCubeRenderTarget===!0;if(ve.depthTexture&&!he.__autoAllocateDepthBuffer){if(Je)throw new Error("target.depthTexture not supported in Cube render targets");nt(he.__webglFramebuffer,ve)}else if(Je){he.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)n.bindFramebuffer(t.FRAMEBUFFER,he.__webglFramebuffer[Dt]),he.__webglDepthbuffer[Dt]=t.createRenderbuffer(),un(he.__webglDepthbuffer[Dt],ve,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,he.__webglFramebuffer),he.__webglDepthbuffer=t.createRenderbuffer(),un(he.__webglDepthbuffer,ve,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Mt(ve,he,Je){const Dt=r.get(ve);he!==void 0&&rn(Dt.__webglFramebuffer,ve,ve.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Je!==void 0&&Tt(ve)}function Ve(ve){const he=ve.texture,Je=r.get(ve),Dt=r.get(he);ve.addEventListener("dispose",xe),ve.isWebGLMultipleRenderTargets!==!0&&(Dt.__webglTexture===void 0&&(Dt.__webglTexture=t.createTexture()),Dt.__version=he.version,u.memory.textures++);const Ft=ve.isWebGLCubeRenderTarget===!0,Rt=ve.isWebGLMultipleRenderTargets===!0,bn=L(ve)||d;if(Ft){Je.__webglFramebuffer=[];for(let sn=0;sn<6;sn++)if(d&&he.mipmaps&&he.mipmaps.length>0){Je.__webglFramebuffer[sn]=[];for(let dn=0;dn<he.mipmaps.length;dn++)Je.__webglFramebuffer[sn][dn]=t.createFramebuffer()}else Je.__webglFramebuffer[sn]=t.createFramebuffer()}else{if(d&&he.mipmaps&&he.mipmaps.length>0){Je.__webglFramebuffer=[];for(let sn=0;sn<he.mipmaps.length;sn++)Je.__webglFramebuffer[sn]=t.createFramebuffer()}else Je.__webglFramebuffer=t.createFramebuffer();if(Rt)if(i.drawBuffers){const sn=ve.texture;for(let dn=0,Dn=sn.length;dn<Dn;dn++){const Xn=r.get(sn[dn]);Xn.__webglTexture===void 0&&(Xn.__webglTexture=t.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(d&&ve.samples>0&&Kt(ve)===!1){const sn=Rt?he:[he];Je.__webglMultisampledFramebuffer=t.createFramebuffer(),Je.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Je.__webglMultisampledFramebuffer);for(let dn=0;dn<sn.length;dn++){const Dn=sn[dn];Je.__webglColorRenderbuffer[dn]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Je.__webglColorRenderbuffer[dn]);const Xn=o.convert(Dn.format,Dn.colorSpace),Ut=o.convert(Dn.type),vr=X(Dn.internalFormat,Xn,Ut,Dn.colorSpace,ve.isXRRenderTarget===!0),sr=Ht(ve);t.renderbufferStorageMultisample(t.RENDERBUFFER,sr,vr,ve.width,ve.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+dn,t.RENDERBUFFER,Je.__webglColorRenderbuffer[dn])}t.bindRenderbuffer(t.RENDERBUFFER,null),ve.depthBuffer&&(Je.__webglDepthRenderbuffer=t.createRenderbuffer(),un(Je.__webglDepthRenderbuffer,ve,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ft){n.bindTexture(t.TEXTURE_CUBE_MAP,Dt.__webglTexture),pn(t.TEXTURE_CUBE_MAP,he,bn);for(let sn=0;sn<6;sn++)if(d&&he.mipmaps&&he.mipmaps.length>0)for(let dn=0;dn<he.mipmaps.length;dn++)rn(Je.__webglFramebuffer[sn][dn],ve,he,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+sn,dn);else rn(Je.__webglFramebuffer[sn],ve,he,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+sn,0);C(he,bn)&&H(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Rt){const sn=ve.texture;for(let dn=0,Dn=sn.length;dn<Dn;dn++){const Xn=sn[dn],Ut=r.get(Xn);n.bindTexture(t.TEXTURE_2D,Ut.__webglTexture),pn(t.TEXTURE_2D,Xn,bn),rn(Je.__webglFramebuffer,ve,Xn,t.COLOR_ATTACHMENT0+dn,t.TEXTURE_2D,0),C(Xn,bn)&&H(t.TEXTURE_2D)}n.unbindTexture()}else{let sn=t.TEXTURE_2D;if((ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(d?sn=ve.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(sn,Dt.__webglTexture),pn(sn,he,bn),d&&he.mipmaps&&he.mipmaps.length>0)for(let dn=0;dn<he.mipmaps.length;dn++)rn(Je.__webglFramebuffer[dn],ve,he,t.COLOR_ATTACHMENT0,sn,dn);else rn(Je.__webglFramebuffer,ve,he,t.COLOR_ATTACHMENT0,sn,0);C(he,bn)&&H(sn),n.unbindTexture()}ve.depthBuffer&&Tt(ve)}function or(ve){const he=L(ve)||d,Je=ve.isWebGLMultipleRenderTargets===!0?ve.texture:[ve.texture];for(let Dt=0,Ft=Je.length;Dt<Ft;Dt++){const Rt=Je[Dt];if(C(Rt,he)){const bn=ve.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,sn=r.get(Rt).__webglTexture;n.bindTexture(bn,sn),H(bn),n.unbindTexture()}}}function $t(ve){if(d&&ve.samples>0&&Kt(ve)===!1){const he=ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture],Je=ve.width,Dt=ve.height;let Ft=t.COLOR_BUFFER_BIT;const Rt=[],bn=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,sn=r.get(ve),dn=ve.isWebGLMultipleRenderTargets===!0;if(dn)for(let Dn=0;Dn<he.length;Dn++)n.bindFramebuffer(t.FRAMEBUFFER,sn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,sn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,sn.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,sn.__webglFramebuffer);for(let Dn=0;Dn<he.length;Dn++){Rt.push(t.COLOR_ATTACHMENT0+Dn),ve.depthBuffer&&Rt.push(bn);const Xn=sn.__ignoreDepthValues!==void 0?sn.__ignoreDepthValues:!1;if(Xn===!1&&(ve.depthBuffer&&(Ft|=t.DEPTH_BUFFER_BIT),ve.stencilBuffer&&(Ft|=t.STENCIL_BUFFER_BIT)),dn&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,sn.__webglColorRenderbuffer[Dn]),Xn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[bn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[bn])),dn){const Ut=r.get(he[Dn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ut,0)}t.blitFramebuffer(0,0,Je,Dt,0,0,Je,Dt,Ft,t.NEAREST),v&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Rt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),dn)for(let Dn=0;Dn<he.length;Dn++){n.bindFramebuffer(t.FRAMEBUFFER,sn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.RENDERBUFFER,sn.__webglColorRenderbuffer[Dn]);const Xn=r.get(he[Dn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,sn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.TEXTURE_2D,Xn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,sn.__webglMultisampledFramebuffer)}}function Ht(ve){return Math.min(i.maxSamples,ve.samples)}function Kt(ve){const he=r.get(ve);return d&&ve.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&he.__useRenderToTexture!==!1}function Kn(ve){const he=u.render.frame;x.get(ve)!==he&&(x.set(ve,he),ve.update())}function cn(ve,he){const Je=ve.colorSpace,Dt=ve.format,Ft=ve.type;return ve.isCompressedTexture===!0||ve.isVideoTexture===!0||ve.format===LG||Je!==vh&&Je!==gl&&(di.getTransfer(Je)===Ai?d===!1?e.has("EXT_sRGB")===!0&&Dt===ea?(ve.format=LG,ve.minFilter=as,ve.generateMipmaps=!1):he=Q8e.sRGBToLinear(he):(Dt!==ea||Ft!==x0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Je)),he}this.allocateTextureUnit=de,this.resetTextureUnits=_t,this.setTexture2D=Me,this.setTexture2DArray=Ct,this.setTexture3D=We,this.setTextureCube=tt,this.rebindTextures=Mt,this.setupRenderTarget=Ve,this.updateRenderTargetMipmap=or,this.updateMultisampleRenderTarget=$t,this.setupDepthRenderbuffer=Tt,this.setupFrameBufferTexture=rn,this.useMultisampledRTT=Kt}function XUe(t,e,n){const r=n.isWebGL2;function i(o,u=gl){let d;const f=di.getTransfer(u);if(o===x0)return t.UNSIGNED_BYTE;if(o===G8e)return t.UNSIGNED_SHORT_4_4_4_4;if(o===W8e)return t.UNSIGNED_SHORT_5_5_5_1;if(o===hOe)return t.BYTE;if(o===pOe)return t.SHORT;if(o===M$)return t.UNSIGNED_SHORT;if(o===H8e)return t.INT;if(o===th)return t.UNSIGNED_INT;if(o===ml)return t.FLOAT;if(o===F2)return r?t.HALF_FLOAT:(d=e.get("OES_texture_half_float"),d!==null?d.HALF_FLOAT_OES:null);if(o===fOe)return t.ALPHA;if(o===ea)return t.RGBA;if(o===mOe)return t.LUMINANCE;if(o===gOe)return t.LUMINANCE_ALPHA;if(o===T2)return t.DEPTH_COMPONENT;if(o===B2)return t.DEPTH_STENCIL;if(o===LG)return d=e.get("EXT_sRGB"),d!==null?d.SRGB_ALPHA_EXT:null;if(o===vOe)return t.RED;if(o===$8e)return t.RED_INTEGER;if(o===yOe)return t.RG;if(o===K8e)return t.RG_INTEGER;if(o===X8e)return t.RGBA_INTEGER;if(o===lj||o===uj||o===cj||o===dj)if(f===Ai)if(d=e.get("WEBGL_compressed_texture_s3tc_srgb"),d!==null){if(o===lj)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===uj)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===cj)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===dj)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(d=e.get("WEBGL_compressed_texture_s3tc"),d!==null){if(o===lj)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===uj)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===cj)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===dj)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===i9e||o===s9e||o===o9e||o===a9e)if(d=e.get("WEBGL_compressed_texture_pvrtc"),d!==null){if(o===i9e)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===s9e)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===o9e)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===a9e)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===q8e)return d=e.get("WEBGL_compressed_texture_etc1"),d!==null?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===l9e||o===u9e)if(d=e.get("WEBGL_compressed_texture_etc"),d!==null){if(o===l9e)return f===Ai?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(o===u9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===c9e||o===d9e||o===h9e||o===p9e||o===f9e||o===m9e||o===g9e||o===v9e||o===y9e||o===b9e||o===_9e||o===w9e||o===x9e||o===S9e)if(d=e.get("WEBGL_compressed_texture_astc"),d!==null){if(o===c9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===d9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===h9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===p9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===f9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===m9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===g9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===v9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===y9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===b9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===_9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===w9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===x9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===S9e)return f===Ai?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===hj||o===E9e||o===C9e)if(d=e.get("EXT_texture_compression_bptc"),d!==null){if(o===hj)return f===Ai?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===E9e)return d.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===C9e)return d.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===bOe||o===P9e||o===T9e||o===M9e)if(d=e.get("EXT_texture_compression_rgtc"),d!==null){if(o===hj)return d.COMPRESSED_RED_RGTC1_EXT;if(o===P9e)return d.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===T9e)return d.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===M9e)return d.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Hf?r?t.UNSIGNED_INT_24_8:(d=e.get("WEBGL_depth_texture"),d!==null?d.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class qUe extends $s{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let x2=class extends Or{constructor(){super(),this.isGroup=!0,this.type="Group"}};const YUe={type:"move"};class Nj{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new x2,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new x2,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new x2,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,u=null;const d=this._targetRay,f=this._grip,v=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(v&&e.hand){u=!0;for(const B of e.hand.values()){const L=n.getJointPose(B,r),U=this._getHandJoint(v,B);L!==null&&(U.matrix.fromArray(L.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=L.radius),U.visible=L!==null}const x=v.joints["index-finger-tip"],S=v.joints["thumb-tip"],M=x.position.distanceTo(S.position),D=.02,G=.005;v.inputState.pinching&&M>D+G?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&M<=D-G&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1));d!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(d.matrix.fromArray(i.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,i.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(i.linearVelocity)):d.hasLinearVelocity=!1,i.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(i.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(YUe)))}return d!==null&&(d.visible=i!==null),f!==null&&(f.visible=o!==null),v!==null&&(v.visible=u!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new x2;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const ZUe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,QUe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class JUe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Qi,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new Ia({extensions:{fragDepth:!0},vertexShader:ZUe,fragmentShader:QUe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Ri(new _g(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class eze extends k0{constructor(e,n){super();const r=this;let i=null,o=1,u=null,d="local-floor",f=1,v=null,x=null,S=null,M=null,D=null,G=null;const B=new JUe,L=n.getContextAttributes();let U=null,C=null;const H=[],X=[],fe=new ln;let q=null;const pe=new $s;pe.layers.enable(1),pe.viewport=new Dr;const xe=new $s;xe.layers.enable(2),xe.viewport=new Dr;const J=[pe,xe],ne=new qUe;ne.layers.enable(1),ne.layers.enable(2);let Pe=null,mt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(et){let wt=H[et];return wt===void 0&&(wt=new Nj,H[et]=wt),wt.getTargetRaySpace()},this.getControllerGrip=function(et){let wt=H[et];return wt===void 0&&(wt=new Nj,H[et]=wt),wt.getGripSpace()},this.getHand=function(et){let wt=H[et];return wt===void 0&&(wt=new Nj,H[et]=wt),wt.getHandSpace()};function _t(et){const wt=X.indexOf(et.inputSource);if(wt===-1)return;const Zt=H[wt];Zt!==void 0&&(Zt.update(et.inputSource,et.frame,v||u),Zt.dispatchEvent({type:et.type,data:et.inputSource}))}function de(){i.removeEventListener("select",_t),i.removeEventListener("selectstart",_t),i.removeEventListener("selectend",_t),i.removeEventListener("squeeze",_t),i.removeEventListener("squeezestart",_t),i.removeEventListener("squeezeend",_t),i.removeEventListener("end",de),i.removeEventListener("inputsourceschange",je);for(let et=0;et<H.length;et++){const wt=X[et];wt!==null&&(X[et]=null,H[et].disconnect(wt))}Pe=null,mt=null,B.reset(),e.setRenderTarget(U),D=null,M=null,S=null,i=null,C=null,pn.stop(),r.isPresenting=!1,e.setPixelRatio(q),e.setSize(fe.width,fe.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(et){o=et,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(et){d=et,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v||u},this.setReferenceSpace=function(et){v=et},this.getBaseLayer=function(){return M!==null?M:D},this.getBinding=function(){return S},this.getFrame=function(){return G},this.getSession=function(){return i},this.setSession=async function(et){if(i=et,i!==null){if(U=e.getRenderTarget(),i.addEventListener("select",_t),i.addEventListener("selectstart",_t),i.addEventListener("selectend",_t),i.addEventListener("squeeze",_t),i.addEventListener("squeezestart",_t),i.addEventListener("squeezeend",_t),i.addEventListener("end",de),i.addEventListener("inputsourceschange",je),L.xrCompatible!==!0&&await n.makeXRCompatible(),q=e.getPixelRatio(),e.getSize(fe),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const wt={antialias:i.renderState.layers===void 0?L.antialias:!0,alpha:!0,depth:L.depth,stencil:L.stencil,framebufferScaleFactor:o};D=new XRWebGLLayer(i,n,wt),i.updateRenderState({baseLayer:D}),e.setPixelRatio(1),e.setSize(D.framebufferWidth,D.framebufferHeight,!1),C=new C0(D.framebufferWidth,D.framebufferHeight,{format:ea,type:x0,colorSpace:e.outputColorSpace,stencilBuffer:L.stencil})}else{let wt=null,Zt=null,rn=null;L.depth&&(rn=L.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,wt=L.stencil?B2:T2,Zt=L.stencil?Hf:th);const un={colorFormat:n.RGBA8,depthFormat:rn,scaleFactor:o};S=new XRWebGLBinding(i,n),M=S.createProjectionLayer(un),i.updateRenderState({layers:[M]}),e.setPixelRatio(1),e.setSize(M.textureWidth,M.textureHeight,!1),C=new C0(M.textureWidth,M.textureHeight,{format:ea,type:x0,depthTexture:new N$(M.textureWidth,M.textureHeight,Zt,void 0,void 0,void 0,void 0,void 0,void 0,wt),stencilBuffer:L.stencil,colorSpace:e.outputColorSpace,samples:L.antialias?4:0});const nt=e.properties.get(C);nt.__ignoreDepthValues=M.ignoreDepthValues}C.isXRRenderTarget=!0,this.setFoveation(f),v=null,u=await i.requestReferenceSpace(d),pn.setContext(i),pn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function je(et){for(let wt=0;wt<et.removed.length;wt++){const Zt=et.removed[wt],rn=X.indexOf(Zt);rn>=0&&(X[rn]=null,H[rn].disconnect(Zt))}for(let wt=0;wt<et.added.length;wt++){const Zt=et.added[wt];let rn=X.indexOf(Zt);if(rn===-1){for(let nt=0;nt<H.length;nt++)if(nt>=X.length){X.push(Zt),rn=nt;break}else if(X[nt]===null){X[nt]=Zt,rn=nt;break}if(rn===-1)break}const un=H[rn];un&&un.connect(Zt)}}const Me=new Oe,Ct=new Oe;function We(et,wt,Zt){Me.setFromMatrixPosition(wt.matrixWorld),Ct.setFromMatrixPosition(Zt.matrixWorld);const rn=Me.distanceTo(Ct),un=wt.projectionMatrix.elements,nt=Zt.projectionMatrix.elements,Tt=un[14]/(un[10]-1),Mt=un[14]/(un[10]+1),Ve=(un[9]+1)/un[5],or=(un[9]-1)/un[5],$t=(un[8]-1)/un[0],Ht=(nt[8]+1)/nt[0],Kt=Tt*$t,Kn=Tt*Ht,cn=rn/(-$t+Ht),ve=cn*-$t;wt.matrixWorld.decompose(et.position,et.quaternion,et.scale),et.translateX(ve),et.translateZ(cn),et.matrixWorld.compose(et.position,et.quaternion,et.scale),et.matrixWorldInverse.copy(et.matrixWorld).invert();const he=Tt+cn,Je=Mt+cn,Dt=Kt-ve,Ft=Kn+(rn-ve),Rt=Ve*Mt/Je*he,bn=or*Mt/Je*he;et.projectionMatrix.makePerspective(Dt,Ft,Rt,bn,he,Je),et.projectionMatrixInverse.copy(et.projectionMatrix).invert()}function tt(et,wt){wt===null?et.matrixWorld.copy(et.matrix):et.matrixWorld.multiplyMatrices(wt.matrixWorld,et.matrix),et.matrixWorldInverse.copy(et.matrixWorld).invert()}this.updateCamera=function(et){if(i===null)return;B.texture!==null&&(et.near=B.depthNear,et.far=B.depthFar),ne.near=xe.near=pe.near=et.near,ne.far=xe.far=pe.far=et.far,(Pe!==ne.near||mt!==ne.far)&&(i.updateRenderState({depthNear:ne.near,depthFar:ne.far}),Pe=ne.near,mt=ne.far,pe.near=Pe,pe.far=mt,xe.near=Pe,xe.far=mt,pe.updateProjectionMatrix(),xe.updateProjectionMatrix(),et.updateProjectionMatrix());const wt=et.parent,Zt=ne.cameras;tt(ne,wt);for(let rn=0;rn<Zt.length;rn++)tt(Zt[rn],wt);Zt.length===2?We(ne,pe,xe):ne.projectionMatrix.copy(pe.projectionMatrix),Ze(et,ne,wt)};function Ze(et,wt,Zt){Zt===null?et.matrix.copy(wt.matrixWorld):(et.matrix.copy(Zt.matrixWorld),et.matrix.invert(),et.matrix.multiply(wt.matrixWorld)),et.matrix.decompose(et.position,et.quaternion,et.scale),et.updateMatrixWorld(!0),et.projectionMatrix.copy(wt.projectionMatrix),et.projectionMatrixInverse.copy(wt.projectionMatrixInverse),et.isPerspectiveCamera&&(et.fov=og*2*Math.atan(1/et.projectionMatrix.elements[5]),et.zoom=1)}this.getCamera=function(){return ne},this.getFoveation=function(){if(!(M===null&&D===null))return f},this.setFoveation=function(et){f=et,M!==null&&(M.fixedFoveation=et),D!==null&&D.fixedFoveation!==void 0&&(D.fixedFoveation=et)},this.hasDepthSensing=function(){return B.texture!==null};let dt=null;function At(et,wt){if(x=wt.getViewerPose(v||u),G=wt,x!==null){const Zt=x.views;D!==null&&(e.setRenderTargetFramebuffer(C,D.framebuffer),e.setRenderTarget(C));let rn=!1;Zt.length!==ne.cameras.length&&(ne.cameras.length=0,rn=!0);for(let nt=0;nt<Zt.length;nt++){const Tt=Zt[nt];let Mt=null;if(D!==null)Mt=D.getViewport(Tt);else{const or=S.getViewSubImage(M,Tt);Mt=or.viewport,nt===0&&(e.setRenderTargetTextures(C,or.colorTexture,M.ignoreDepthValues?void 0:or.depthStencilTexture),e.setRenderTarget(C))}let Ve=J[nt];Ve===void 0&&(Ve=new $s,Ve.layers.enable(nt),Ve.viewport=new Dr,J[nt]=Ve),Ve.matrix.fromArray(Tt.transform.matrix),Ve.matrix.decompose(Ve.position,Ve.quaternion,Ve.scale),Ve.projectionMatrix.fromArray(Tt.projectionMatrix),Ve.projectionMatrixInverse.copy(Ve.projectionMatrix).invert(),Ve.viewport.set(Mt.x,Mt.y,Mt.width,Mt.height),nt===0&&(ne.matrix.copy(Ve.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale)),rn===!0&&ne.cameras.push(Ve)}const un=i.enabledFeatures;if(un&&un.includes("depth-sensing")){const nt=S.getDepthInformation(Zt[0]);nt&&nt.isValid&&nt.texture&&B.init(e,nt,i.renderState)}}for(let Zt=0;Zt<H.length;Zt++){const rn=X[Zt],un=H[Zt];rn!==null&&un!==void 0&&un.update(rn,wt,v||u)}B.render(e,ne),dt&&dt(et,wt),wt.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:wt}),G=null}const pn=new i6e;pn.setAnimationLoop(At),this.setAnimationLoop=function(et){dt=et},this.dispose=function(){}}}function tze(t,e){function n(L,U){L.matrixAutoUpdate===!0&&L.updateMatrix(),U.value.copy(L.matrix)}function r(L,U){U.color.getRGB(L.fogColor.value,r6e(t)),U.isFog?(L.fogNear.value=U.near,L.fogFar.value=U.far):U.isFogExp2&&(L.fogDensity.value=U.density)}function i(L,U,C,H,X){U.isMeshBasicMaterial||U.isMeshLambertMaterial?o(L,U):U.isMeshToonMaterial?(o(L,U),S(L,U)):U.isMeshPhongMaterial?(o(L,U),x(L,U)):U.isMeshStandardMaterial?(o(L,U),M(L,U),U.isMeshPhysicalMaterial&&D(L,U,X)):U.isMeshMatcapMaterial?(o(L,U),G(L,U)):U.isMeshDepthMaterial?o(L,U):U.isMeshDistanceMaterial?(o(L,U),B(L,U)):U.isMeshNormalMaterial?o(L,U):U.isLineBasicMaterial?(u(L,U),U.isLineDashedMaterial&&d(L,U)):U.isPointsMaterial?f(L,U,C,H):U.isSpriteMaterial?v(L,U):U.isShadowMaterial?(L.color.value.copy(U.color),L.opacity.value=U.opacity):U.isShaderMaterial&&(U.uniformsNeedUpdate=!1)}function o(L,U){L.opacity.value=U.opacity,U.color&&L.diffuse.value.copy(U.color),U.emissive&&L.emissive.value.copy(U.emissive).multiplyScalar(U.emissiveIntensity),U.map&&(L.map.value=U.map,n(U.map,L.mapTransform)),U.alphaMap&&(L.alphaMap.value=U.alphaMap,n(U.alphaMap,L.alphaMapTransform)),U.bumpMap&&(L.bumpMap.value=U.bumpMap,n(U.bumpMap,L.bumpMapTransform),L.bumpScale.value=U.bumpScale,U.side===Ps&&(L.bumpScale.value*=-1)),U.normalMap&&(L.normalMap.value=U.normalMap,n(U.normalMap,L.normalMapTransform),L.normalScale.value.copy(U.normalScale),U.side===Ps&&L.normalScale.value.negate()),U.displacementMap&&(L.displacementMap.value=U.displacementMap,n(U.displacementMap,L.displacementMapTransform),L.displacementScale.value=U.displacementScale,L.displacementBias.value=U.displacementBias),U.emissiveMap&&(L.emissiveMap.value=U.emissiveMap,n(U.emissiveMap,L.emissiveMapTransform)),U.specularMap&&(L.specularMap.value=U.specularMap,n(U.specularMap,L.specularMapTransform)),U.alphaTest>0&&(L.alphaTest.value=U.alphaTest);const C=e.get(U).envMap;if(C&&(L.envMap.value=C,L.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,L.reflectivity.value=U.reflectivity,L.ior.value=U.ior,L.refractionRatio.value=U.refractionRatio),U.lightMap){L.lightMap.value=U.lightMap;const H=t._useLegacyLights===!0?Math.PI:1;L.lightMapIntensity.value=U.lightMapIntensity*H,n(U.lightMap,L.lightMapTransform)}U.aoMap&&(L.aoMap.value=U.aoMap,L.aoMapIntensity.value=U.aoMapIntensity,n(U.aoMap,L.aoMapTransform))}function u(L,U){L.diffuse.value.copy(U.color),L.opacity.value=U.opacity,U.map&&(L.map.value=U.map,n(U.map,L.mapTransform))}function d(L,U){L.dashSize.value=U.dashSize,L.totalSize.value=U.dashSize+U.gapSize,L.scale.value=U.scale}function f(L,U,C,H){L.diffuse.value.copy(U.color),L.opacity.value=U.opacity,L.size.value=U.size*C,L.scale.value=H*.5,U.map&&(L.map.value=U.map,n(U.map,L.uvTransform)),U.alphaMap&&(L.alphaMap.value=U.alphaMap,n(U.alphaMap,L.alphaMapTransform)),U.alphaTest>0&&(L.alphaTest.value=U.alphaTest)}function v(L,U){L.diffuse.value.copy(U.color),L.opacity.value=U.opacity,L.rotation.value=U.rotation,U.map&&(L.map.value=U.map,n(U.map,L.mapTransform)),U.alphaMap&&(L.alphaMap.value=U.alphaMap,n(U.alphaMap,L.alphaMapTransform)),U.alphaTest>0&&(L.alphaTest.value=U.alphaTest)}function x(L,U){L.specular.value.copy(U.specular),L.shininess.value=Math.max(U.shininess,1e-4)}function S(L,U){U.gradientMap&&(L.gradientMap.value=U.gradientMap)}function M(L,U){L.metalness.value=U.metalness,U.metalnessMap&&(L.metalnessMap.value=U.metalnessMap,n(U.metalnessMap,L.metalnessMapTransform)),L.roughness.value=U.roughness,U.roughnessMap&&(L.roughnessMap.value=U.roughnessMap,n(U.roughnessMap,L.roughnessMapTransform)),e.get(U).envMap&&(L.envMapIntensity.value=U.envMapIntensity)}function D(L,U,C){L.ior.value=U.ior,U.sheen>0&&(L.sheenColor.value.copy(U.sheenColor).multiplyScalar(U.sheen),L.sheenRoughness.value=U.sheenRoughness,U.sheenColorMap&&(L.sheenColorMap.value=U.sheenColorMap,n(U.sheenColorMap,L.sheenColorMapTransform)),U.sheenRoughnessMap&&(L.sheenRoughnessMap.value=U.sheenRoughnessMap,n(U.sheenRoughnessMap,L.sheenRoughnessMapTransform))),U.clearcoat>0&&(L.clearcoat.value=U.clearcoat,L.clearcoatRoughness.value=U.clearcoatRoughness,U.clearcoatMap&&(L.clearcoatMap.value=U.clearcoatMap,n(U.clearcoatMap,L.clearcoatMapTransform)),U.clearcoatRoughnessMap&&(L.clearcoatRoughnessMap.value=U.clearcoatRoughnessMap,n(U.clearcoatRoughnessMap,L.clearcoatRoughnessMapTransform)),U.clearcoatNormalMap&&(L.clearcoatNormalMap.value=U.clearcoatNormalMap,n(U.clearcoatNormalMap,L.clearcoatNormalMapTransform),L.clearcoatNormalScale.value.copy(U.clearcoatNormalScale),U.side===Ps&&L.clearcoatNormalScale.value.negate())),U.iridescence>0&&(L.iridescence.value=U.iridescence,L.iridescenceIOR.value=U.iridescenceIOR,L.iridescenceThicknessMinimum.value=U.iridescenceThicknessRange[0],L.iridescenceThicknessMaximum.value=U.iridescenceThicknessRange[1],U.iridescenceMap&&(L.iridescenceMap.value=U.iridescenceMap,n(U.iridescenceMap,L.iridescenceMapTransform)),U.iridescenceThicknessMap&&(L.iridescenceThicknessMap.value=U.iridescenceThicknessMap,n(U.iridescenceThicknessMap,L.iridescenceThicknessMapTransform))),U.transmission>0&&(L.transmission.value=U.transmission,L.transmissionSamplerMap.value=C.texture,L.transmissionSamplerSize.value.set(C.width,C.height),U.transmissionMap&&(L.transmissionMap.value=U.transmissionMap,n(U.transmissionMap,L.transmissionMapTransform)),L.thickness.value=U.thickness,U.thicknessMap&&(L.thicknessMap.value=U.thicknessMap,n(U.thicknessMap,L.thicknessMapTransform)),L.attenuationDistance.value=U.attenuationDistance,L.attenuationColor.value.copy(U.attenuationColor)),U.anisotropy>0&&(L.anisotropyVector.value.set(U.anisotropy*Math.cos(U.anisotropyRotation),U.anisotropy*Math.sin(U.anisotropyRotation)),U.anisotropyMap&&(L.anisotropyMap.value=U.anisotropyMap,n(U.anisotropyMap,L.anisotropyMapTransform))),L.specularIntensity.value=U.specularIntensity,L.specularColor.value.copy(U.specularColor),U.specularColorMap&&(L.specularColorMap.value=U.specularColorMap,n(U.specularColorMap,L.specularColorMapTransform)),U.specularIntensityMap&&(L.specularIntensityMap.value=U.specularIntensityMap,n(U.specularIntensityMap,L.specularIntensityMapTransform))}function G(L,U){U.matcap&&(L.matcap.value=U.matcap)}function B(L,U){const C=e.get(U).light;L.referencePosition.value.setFromMatrixPosition(C.matrixWorld),L.nearDistance.value=C.shadow.camera.near,L.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function nze(t,e,n,r){let i={},o={},u=[];const d=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(C,H){const X=H.program;r.uniformBlockBinding(C,X)}function v(C,H){let X=i[C.id];X===void 0&&(G(C),X=x(C),i[C.id]=X,C.addEventListener("dispose",L));const fe=H.program;r.updateUBOMapping(C,fe);const q=e.render.frame;o[C.id]!==q&&(M(C),o[C.id]=q)}function x(C){const H=S();C.__bindingPointIndex=H;const X=t.createBuffer(),fe=C.__size,q=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,X),t.bufferData(t.UNIFORM_BUFFER,fe,q),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,H,X),X}function S(){for(let C=0;C<d;C++)if(u.indexOf(C)===-1)return u.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function M(C){const H=i[C.id],X=C.uniforms,fe=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,H);for(let q=0,pe=X.length;q<pe;q++){const xe=Array.isArray(X[q])?X[q]:[X[q]];for(let J=0,ne=xe.length;J<ne;J++){const Pe=xe[J];if(D(Pe,q,J,fe)===!0){const mt=Pe.__offset,_t=Array.isArray(Pe.value)?Pe.value:[Pe.value];let de=0;for(let je=0;je<_t.length;je++){const Me=_t[je],Ct=B(Me);typeof Me=="number"||typeof Me=="boolean"?(Pe.__data[0]=Me,t.bufferSubData(t.UNIFORM_BUFFER,mt+de,Pe.__data)):Me.isMatrix3?(Pe.__data[0]=Me.elements[0],Pe.__data[1]=Me.elements[1],Pe.__data[2]=Me.elements[2],Pe.__data[3]=0,Pe.__data[4]=Me.elements[3],Pe.__data[5]=Me.elements[4],Pe.__data[6]=Me.elements[5],Pe.__data[7]=0,Pe.__data[8]=Me.elements[6],Pe.__data[9]=Me.elements[7],Pe.__data[10]=Me.elements[8],Pe.__data[11]=0):(Me.toArray(Pe.__data,de),de+=Ct.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,mt,Pe.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function D(C,H,X,fe){const q=C.value,pe=H+"_"+X;if(fe[pe]===void 0)return typeof q=="number"||typeof q=="boolean"?fe[pe]=q:fe[pe]=q.clone(),!0;{const xe=fe[pe];if(typeof q=="number"||typeof q=="boolean"){if(xe!==q)return fe[pe]=q,!0}else if(xe.equals(q)===!1)return xe.copy(q),!0}return!1}function G(C){const H=C.uniforms;let X=0;const fe=16;for(let pe=0,xe=H.length;pe<xe;pe++){const J=Array.isArray(H[pe])?H[pe]:[H[pe]];for(let ne=0,Pe=J.length;ne<Pe;ne++){const mt=J[ne],_t=Array.isArray(mt.value)?mt.value:[mt.value];for(let de=0,je=_t.length;de<je;de++){const Me=_t[de],Ct=B(Me),We=X%fe;We!==0&&fe-We<Ct.boundary&&(X+=fe-We),mt.__data=new Float32Array(Ct.storage/Float32Array.BYTES_PER_ELEMENT),mt.__offset=X,X+=Ct.storage}}}const q=X%fe;return q>0&&(X+=fe-q),C.__size=X,C.__cache={},this}function B(C){const H={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(H.boundary=4,H.storage=4):C.isVector2?(H.boundary=8,H.storage=8):C.isVector3||C.isColor?(H.boundary=16,H.storage=12):C.isVector4?(H.boundary=16,H.storage=16):C.isMatrix3?(H.boundary=48,H.storage=48):C.isMatrix4?(H.boundary=64,H.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),H}function L(C){const H=C.target;H.removeEventListener("dispose",L);const X=u.indexOf(H.__bindingPointIndex);u.splice(X,1),t.deleteBuffer(i[H.id]),delete i[H.id],delete o[H.id]}function U(){for(const C in i)t.deleteBuffer(i[C]);u=[],i={},o={}}return{bind:f,update:v,dispose:U}}class F${constructor(e={}){const{canvas:n=KOe(),context:r=null,depth:i=!0,stencil:o=!0,alpha:u=!1,antialias:d=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:v=!1,powerPreference:x="default",failIfMajorPerformanceCaveat:S=!1}=e;this.isWebGLRenderer=!0;let M;r!==null?M=r.getContextAttributes().alpha:M=u;const D=new Uint32Array(4),G=new Int32Array(4);let B=null,L=null;const U=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ls,this._useLegacyLights=!1,this.toneMapping=jf,this.toneMappingExposure=1;const H=this;let X=!1,fe=0,q=0,pe=null,xe=-1,J=null;const ne=new Dr,Pe=new Dr;let mt=null;const _t=new vn(0);let de=0,je=n.width,Me=n.height,Ct=1,We=null,tt=null;const Ze=new Dr(0,0,je,Me),dt=new Dr(0,0,je,Me);let At=!1;const pn=new O$;let et=!1,wt=!1,Zt=null;const rn=new Bn,un=new ln,nt=new Oe,Tt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Mt(){return pe===null?Ct:1}let Ve=r;function or(be,Qe){for(let yt=0;yt<be.length;yt++){const gt=be[yt],ht=n.getContext(gt,Qe);if(ht!==null)return ht}return null}try{const be={alpha:!0,depth:i,stencil:o,antialias:d,premultipliedAlpha:f,preserveDrawingBuffer:v,powerPreference:x,failIfMajorPerformanceCaveat:S};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${h_}`),n.addEventListener("webglcontextlost",mn,!1),n.addEventListener("webglcontextrestored",Te,!1),n.addEventListener("webglcontextcreationerror",Wt,!1),Ve===null){const Qe=["webgl2","webgl","experimental-webgl"];if(H.isWebGL1Renderer===!0&&Qe.shift(),Ve=or(Qe,be),Ve===null)throw or(Qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Ve.getShaderPrecisionFormat===void 0&&(Ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(be){throw console.error("THREE.WebGLRenderer: "+be.message),be}let $t,Ht,Kt,Kn,cn,ve,he,Je,Dt,Ft,Rt,bn,sn,dn,Dn,Xn,Ut,vr,sr,Tn,kn,on,Un,Ae;function Xt(){$t=new cBe(Ve),Ht=new iBe(Ve,$t,e),$t.init(Ht),on=new XUe(Ve,$t,Ht),Kt=new $Ue(Ve,$t,Ht),Kn=new pBe(Ve),cn=new DUe,ve=new KUe(Ve,$t,Kt,cn,Ht,on,Kn),he=new oBe(H),Je=new uBe(H),Dt=new wLe(Ve,Ht),Un=new nBe(Ve,$t,Dt,Ht),Ft=new dBe(Ve,Dt,Kn,Un),Rt=new vBe(Ve,Ft,Dt,Kn),sr=new gBe(Ve,Ht,ve),Xn=new sBe(cn),bn=new RUe(H,he,Je,$t,Ht,Un,Xn),sn=new tze(H,cn),dn=new LUe,Dn=new VUe($t,Ht),vr=new tBe(H,he,Je,Kt,Rt,M,f),Ut=new WUe(H,Rt,Ht),Ae=new nze(Ve,Kn,Ht,Kt),Tn=new rBe(Ve,$t,Kn,Ht),kn=new hBe(Ve,$t,Kn,Ht),Kn.programs=bn.programs,H.capabilities=Ht,H.extensions=$t,H.properties=cn,H.renderLists=dn,H.shadowMap=Ut,H.state=Kt,H.info=Kn}Xt();const Jt=new eze(H,Ve);this.xr=Jt,this.getContext=function(){return Ve},this.getContextAttributes=function(){return Ve.getContextAttributes()},this.forceContextLoss=function(){const be=$t.get("WEBGL_lose_context");be&&be.loseContext()},this.forceContextRestore=function(){const be=$t.get("WEBGL_lose_context");be&&be.restoreContext()},this.getPixelRatio=function(){return Ct},this.setPixelRatio=function(be){be!==void 0&&(Ct=be,this.setSize(je,Me,!1))},this.getSize=function(be){return be.set(je,Me)},this.setSize=function(be,Qe,yt=!0){if(Jt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}je=be,Me=Qe,n.width=Math.floor(be*Ct),n.height=Math.floor(Qe*Ct),yt===!0&&(n.style.width=be+"px",n.style.height=Qe+"px"),this.setViewport(0,0,be,Qe)},this.getDrawingBufferSize=function(be){return be.set(je*Ct,Me*Ct).floor()},this.setDrawingBufferSize=function(be,Qe,yt){je=be,Me=Qe,Ct=yt,n.width=Math.floor(be*yt),n.height=Math.floor(Qe*yt),this.setViewport(0,0,be,Qe)},this.getCurrentViewport=function(be){return be.copy(ne)},this.getViewport=function(be){return be.copy(Ze)},this.setViewport=function(be,Qe,yt,gt){be.isVector4?Ze.set(be.x,be.y,be.z,be.w):Ze.set(be,Qe,yt,gt),Kt.viewport(ne.copy(Ze).multiplyScalar(Ct).floor())},this.getScissor=function(be){return be.copy(dt)},this.setScissor=function(be,Qe,yt,gt){be.isVector4?dt.set(be.x,be.y,be.z,be.w):dt.set(be,Qe,yt,gt),Kt.scissor(Pe.copy(dt).multiplyScalar(Ct).floor())},this.getScissorTest=function(){return At},this.setScissorTest=function(be){Kt.setScissorTest(At=be)},this.setOpaqueSort=function(be){We=be},this.setTransparentSort=function(be){tt=be},this.getClearColor=function(be){return be.copy(vr.getClearColor())},this.setClearColor=function(){vr.setClearColor.apply(vr,arguments)},this.getClearAlpha=function(){return vr.getClearAlpha()},this.setClearAlpha=function(){vr.setClearAlpha.apply(vr,arguments)},this.clear=function(be=!0,Qe=!0,yt=!0){let gt=0;if(be){let ht=!1;if(pe!==null){const hn=pe.texture.format;ht=hn===X8e||hn===K8e||hn===$8e}if(ht){const hn=pe.texture.type,Cn=hn===x0||hn===th||hn===M$||hn===Hf||hn===G8e||hn===W8e,Nn=vr.getClearColor(),jn=vr.getClearAlpha(),rr=Nn.r,qn=Nn.g,Fn=Nn.b;Cn?(D[0]=rr,D[1]=qn,D[2]=Fn,D[3]=jn,Ve.clearBufferuiv(Ve.COLOR,0,D)):(G[0]=rr,G[1]=qn,G[2]=Fn,G[3]=jn,Ve.clearBufferiv(Ve.COLOR,0,G))}else gt|=Ve.COLOR_BUFFER_BIT}Qe&&(gt|=Ve.DEPTH_BUFFER_BIT),yt&&(gt|=Ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ve.clear(gt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",mn,!1),n.removeEventListener("webglcontextrestored",Te,!1),n.removeEventListener("webglcontextcreationerror",Wt,!1),dn.dispose(),Dn.dispose(),cn.dispose(),he.dispose(),Je.dispose(),Rt.dispose(),Un.dispose(),Ae.dispose(),bn.dispose(),Jt.dispose(),Jt.removeEventListener("sessionstart",Mr),Jt.removeEventListener("sessionend",Zn),Zt&&(Zt.dispose(),Zt=null),oi.stop()};function mn(be){be.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;const be=Kn.autoReset,Qe=Ut.enabled,yt=Ut.autoUpdate,gt=Ut.needsUpdate,ht=Ut.type;Xt(),Kn.autoReset=be,Ut.enabled=Qe,Ut.autoUpdate=yt,Ut.needsUpdate=gt,Ut.type=ht}function Wt(be){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",be.statusMessage)}function Nt(be){const Qe=be.target;Qe.removeEventListener("dispose",Nt),gn(Qe)}function gn(be){On(be),cn.remove(be)}function On(be){const Qe=cn.get(be).programs;Qe!==void 0&&(Qe.forEach(function(yt){bn.releaseProgram(yt)}),be.isShaderMaterial&&bn.releaseShaderCache(be))}this.renderBufferDirect=function(be,Qe,yt,gt,ht,hn){Qe===null&&(Qe=Tt);const Cn=ht.isMesh&&ht.matrixWorld.determinant()<0,Nn=h1(be,Qe,yt,gt,ht);Kt.setMaterial(gt,Cn);let jn=yt.index,rr=1;if(gt.wireframe===!0){if(jn=Ft.getWireframeAttribute(yt),jn===void 0)return;rr=2}const qn=yt.drawRange,Fn=yt.attributes.position;let xr=qn.start*rr,Bs=(qn.start+qn.count)*rr;hn!==null&&(xr=Math.max(xr,hn.start*rr),Bs=Math.min(Bs,(hn.start+hn.count)*rr)),jn!==null?(xr=Math.max(xr,0),Bs=Math.min(Bs,jn.count)):Fn!=null&&(xr=Math.max(xr,0),Bs=Math.min(Bs,Fn.count));const pi=Bs-xr;if(pi<0||pi===1/0)return;Un.setup(ht,gt,Nn,yt,jn);let Do,Gr=Tn;if(jn!==null&&(Do=Dt.get(jn),Gr=kn,Gr.setIndex(Do)),ht.isMesh)gt.wireframe===!0?(Kt.setLineWidth(gt.wireframeLinewidth*Mt()),Gr.setMode(Ve.LINES)):Gr.setMode(Ve.TRIANGLES);else if(ht.isLine){let $n=gt.linewidth;$n===void 0&&($n=1),Kt.setLineWidth($n*Mt()),ht.isLineSegments?Gr.setMode(Ve.LINES):ht.isLineLoop?Gr.setMode(Ve.LINE_LOOP):Gr.setMode(Ve.LINE_STRIP)}else ht.isPoints?Gr.setMode(Ve.POINTS):ht.isSprite&&Gr.setMode(Ve.TRIANGLES);if(ht.isBatchedMesh)Gr.renderMultiDraw(ht._multiDrawStarts,ht._multiDrawCounts,ht._multiDrawCount);else if(ht.isInstancedMesh)Gr.renderInstances(xr,pi,ht.count);else if(yt.isInstancedBufferGeometry){const $n=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Au=Math.min(yt.instanceCount,$n);Gr.renderInstances(xr,pi,Au)}else Gr.render(xr,pi)};function cr(be,Qe,yt){be.transparent===!0&&be.side===Ca&&be.forceSinglePass===!1?(be.side=Ps,be.needsUpdate=!0,ia(be,Qe,yt),be.side=Ac,be.needsUpdate=!0,ia(be,Qe,yt),be.side=Ca):ia(be,Qe,yt)}this.compile=function(be,Qe,yt=null){yt===null&&(yt=be),L=Dn.get(yt),L.init(),C.push(L),yt.traverseVisible(function(ht){ht.isLight&&ht.layers.test(Qe.layers)&&(L.pushLight(ht),ht.castShadow&&L.pushShadow(ht))}),be!==yt&&be.traverseVisible(function(ht){ht.isLight&&ht.layers.test(Qe.layers)&&(L.pushLight(ht),ht.castShadow&&L.pushShadow(ht))}),L.setupLights(H._useLegacyLights);const gt=new Set;return be.traverse(function(ht){const hn=ht.material;if(hn)if(Array.isArray(hn))for(let Cn=0;Cn<hn.length;Cn++){const Nn=hn[Cn];cr(Nn,yt,ht),gt.add(Nn)}else cr(hn,yt,ht),gt.add(hn)}),C.pop(),L=null,gt},this.compileAsync=function(be,Qe,yt=null){const gt=this.compile(be,Qe,yt);return new Promise(ht=>{function hn(){if(gt.forEach(function(Cn){cn.get(Cn).currentProgram.isReady()&&gt.delete(Cn)}),gt.size===0){ht(be);return}setTimeout(hn,10)}$t.get("KHR_parallel_shader_compile")!==null?hn():setTimeout(hn,10)})};let ar=null;function pr(be){ar&&ar(be)}function Mr(){oi.stop()}function Zn(){oi.start()}const oi=new i6e;oi.setAnimationLoop(pr),typeof self<"u"&&oi.setContext(self),this.setAnimationLoop=function(be){ar=be,Jt.setAnimationLoop(be),be===null?oi.stop():oi.start()},Jt.addEventListener("sessionstart",Mr),Jt.addEventListener("sessionend",Zn),this.render=function(be,Qe){if(Qe!==void 0&&Qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(X===!0)return;be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),Qe.parent===null&&Qe.matrixWorldAutoUpdate===!0&&Qe.updateMatrixWorld(),Jt.enabled===!0&&Jt.isPresenting===!0&&(Jt.cameraAutoUpdate===!0&&Jt.updateCamera(Qe),Qe=Jt.getCamera()),be.isScene===!0&&be.onBeforeRender(H,be,Qe,pe),L=Dn.get(be,C.length),L.init(),C.push(L),rn.multiplyMatrices(Qe.projectionMatrix,Qe.matrixWorldInverse),pn.setFromProjectionMatrix(rn),wt=this.localClippingEnabled,et=Xn.init(this.clippingPlanes,wt),B=dn.get(be,U.length),B.init(),U.push(B),ns(be,Qe,0,H.sortObjects),B.finish(),H.sortObjects===!0&&B.sort(We,tt),this.info.render.frame++,et===!0&&Xn.beginShadows();const yt=L.state.shadowsArray;if(Ut.render(yt,be,Qe),et===!0&&Xn.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Jt.enabled===!1||Jt.isPresenting===!1||Jt.hasDepthSensing()===!1)&&vr.render(B,be),L.setupLights(H._useLegacyLights),Qe.isArrayCamera){const gt=Qe.cameras;for(let ht=0,hn=gt.length;ht<hn;ht++){const Cn=gt[ht];Mu(B,be,Cn,Cn.viewport)}}else Mu(B,be,Qe);pe!==null&&(ve.updateMultisampleRenderTarget(pe),ve.updateRenderTargetMipmap(pe)),be.isScene===!0&&be.onAfterRender(H,be,Qe),Un.resetDefaultState(),xe=-1,J=null,C.pop(),C.length>0?L=C[C.length-1]:L=null,U.pop(),U.length>0?B=U[U.length-1]:B=null};function ns(be,Qe,yt,gt){if(be.visible===!1)return;if(be.layers.test(Qe.layers)){if(be.isGroup)yt=be.renderOrder;else if(be.isLOD)be.autoUpdate===!0&&be.update(Qe);else if(be.isLight)L.pushLight(be),be.castShadow&&L.pushShadow(be);else if(be.isSprite){if(!be.frustumCulled||pn.intersectsSprite(be)){gt&&nt.setFromMatrixPosition(be.matrixWorld).applyMatrix4(rn);const Cn=Rt.update(be),Nn=be.material;Nn.visible&&B.push(be,Cn,Nn,yt,nt.z,null)}}else if((be.isMesh||be.isLine||be.isPoints)&&(!be.frustumCulled||pn.intersectsObject(be))){const Cn=Rt.update(be),Nn=be.material;if(gt&&(be.boundingSphere!==void 0?(be.boundingSphere===null&&be.computeBoundingSphere(),nt.copy(be.boundingSphere.center)):(Cn.boundingSphere===null&&Cn.computeBoundingSphere(),nt.copy(Cn.boundingSphere.center)),nt.applyMatrix4(be.matrixWorld).applyMatrix4(rn)),Array.isArray(Nn)){const jn=Cn.groups;for(let rr=0,qn=jn.length;rr<qn;rr++){const Fn=jn[rr],xr=Nn[Fn.materialIndex];xr&&xr.visible&&B.push(be,Cn,xr,yt,nt.z,Fn)}}else Nn.visible&&B.push(be,Cn,Nn,yt,nt.z,null)}}const hn=be.children;for(let Cn=0,Nn=hn.length;Cn<Nn;Cn++)ns(hn[Cn],Qe,yt,gt)}function Mu(be,Qe,yt,gt){const ht=be.opaque,hn=be.transmissive,Cn=be.transparent;L.setupLightsView(yt),et===!0&&Xn.setGlobalState(H.clippingPlanes,yt),hn.length>0&&Nc(ht,hn,Qe,yt),gt&&Kt.viewport(ne.copy(gt)),ht.length>0&&Tl(ht,Qe,yt),hn.length>0&&Tl(hn,Qe,yt),Cn.length>0&&Tl(Cn,Qe,yt),Kt.buffers.depth.setTest(!0),Kt.buffers.depth.setMask(!0),Kt.buffers.color.setMask(!0),Kt.setPolygonOffset(!1)}function Nc(be,Qe,yt,gt){if((yt.isScene===!0?yt.overrideMaterial:null)!==null)return;const hn=Ht.isWebGL2;Zt===null&&(Zt=new C0(1,1,{generateMipmaps:!0,type:$t.has("EXT_color_buffer_half_float")?F2:x0,minFilter:w2,samples:hn?4:0})),H.getDrawingBufferSize(un),hn?Zt.setSize(un.x,un.y):Zt.setSize(jA(un.x),jA(un.y));const Cn=H.getRenderTarget();H.setRenderTarget(Zt),H.getClearColor(_t),de=H.getClearAlpha(),de<1&&H.setClearColor(16777215,.5),H.clear();const Nn=H.toneMapping;H.toneMapping=jf,Tl(be,yt,gt),ve.updateMultisampleRenderTarget(Zt),ve.updateRenderTargetMipmap(Zt);let jn=!1;for(let rr=0,qn=Qe.length;rr<qn;rr++){const Fn=Qe[rr],xr=Fn.object,Bs=Fn.geometry,pi=Fn.material,Do=Fn.group;if(pi.side===Ca&&xr.layers.test(gt.layers)){const Gr=pi.side;pi.side=Ps,pi.needsUpdate=!0,Sh(xr,yt,gt,Bs,pi,Do),pi.side=Gr,pi.needsUpdate=!0,jn=!0}}jn===!0&&(ve.updateMultisampleRenderTarget(Zt),ve.updateRenderTargetMipmap(Zt)),H.setRenderTarget(Cn),H.setClearColor(_t,de),H.toneMapping=Nn}function Tl(be,Qe,yt){const gt=Qe.isScene===!0?Qe.overrideMaterial:null;for(let ht=0,hn=be.length;ht<hn;ht++){const Cn=be[ht],Nn=Cn.object,jn=Cn.geometry,rr=gt===null?Cn.material:gt,qn=Cn.group;Nn.layers.test(yt.layers)&&Sh(Nn,Qe,yt,jn,rr,qn)}}function Sh(be,Qe,yt,gt,ht,hn){be.onBeforeRender(H,Qe,yt,gt,ht,hn),be.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,be.matrixWorld),be.normalMatrix.getNormalMatrix(be.modelViewMatrix),ht.onBeforeRender(H,Qe,yt,gt,be,hn),ht.transparent===!0&&ht.side===Ca&&ht.forceSinglePass===!1?(ht.side=Ps,ht.needsUpdate=!0,H.renderBufferDirect(yt,Qe,gt,ht,be,hn),ht.side=Ac,ht.needsUpdate=!0,H.renderBufferDirect(yt,Qe,gt,ht,be,hn),ht.side=Ca):H.renderBufferDirect(yt,Qe,gt,ht,be,hn),be.onAfterRender(H,Qe,yt,gt,ht,hn)}function ia(be,Qe,yt){Qe.isScene!==!0&&(Qe=Tt);const gt=cn.get(be),ht=L.state.lights,hn=L.state.shadowsArray,Cn=ht.state.version,Nn=bn.getParameters(be,ht.state,hn,Qe,yt),jn=bn.getProgramCacheKey(Nn);let rr=gt.programs;gt.environment=be.isMeshStandardMaterial?Qe.environment:null,gt.fog=Qe.fog,gt.envMap=(be.isMeshStandardMaterial?Je:he).get(be.envMap||gt.environment),rr===void 0&&(be.addEventListener("dispose",Nt),rr=new Map,gt.programs=rr);let qn=rr.get(jn);if(qn!==void 0){if(gt.currentProgram===qn&&gt.lightsStateVersion===Cn)return Fc(be,Nn),qn}else Nn.uniforms=bn.getUniforms(be),be.onBuild(yt,Nn,H),be.onBeforeCompile(Nn,H),qn=bn.acquireProgram(Nn,jn),rr.set(jn,qn),gt.uniforms=Nn.uniforms;const Fn=gt.uniforms;return(!be.isShaderMaterial&&!be.isRawShaderMaterial||be.clipping===!0)&&(Fn.clippingPlanes=Xn.uniform),Fc(be,Nn),gt.needsLights=Eh(be),gt.lightsStateVersion=Cn,gt.needsLights&&(Fn.ambientLightColor.value=ht.state.ambient,Fn.lightProbe.value=ht.state.probe,Fn.directionalLights.value=ht.state.directional,Fn.directionalLightShadows.value=ht.state.directionalShadow,Fn.spotLights.value=ht.state.spot,Fn.spotLightShadows.value=ht.state.spotShadow,Fn.rectAreaLights.value=ht.state.rectArea,Fn.ltc_1.value=ht.state.rectAreaLTC1,Fn.ltc_2.value=ht.state.rectAreaLTC2,Fn.pointLights.value=ht.state.point,Fn.pointLightShadows.value=ht.state.pointShadow,Fn.hemisphereLights.value=ht.state.hemi,Fn.directionalShadowMap.value=ht.state.directionalShadowMap,Fn.directionalShadowMatrix.value=ht.state.directionalShadowMatrix,Fn.spotShadowMap.value=ht.state.spotShadowMap,Fn.spotLightMatrix.value=ht.state.spotLightMatrix,Fn.spotLightMap.value=ht.state.spotLightMap,Fn.pointShadowMap.value=ht.state.pointShadowMap,Fn.pointShadowMatrix.value=ht.state.pointShadowMatrix),gt.currentProgram=qn,gt.uniformsList=null,qn}function ku(be){if(be.uniformsList===null){const Qe=be.currentProgram.getUniforms();be.uniformsList=Qk.seqWithValue(Qe.seq,be.uniforms)}return be.uniformsList}function Fc(be,Qe){const yt=cn.get(be);yt.outputColorSpace=Qe.outputColorSpace,yt.batching=Qe.batching,yt.instancing=Qe.instancing,yt.instancingColor=Qe.instancingColor,yt.skinning=Qe.skinning,yt.morphTargets=Qe.morphTargets,yt.morphNormals=Qe.morphNormals,yt.morphColors=Qe.morphColors,yt.morphTargetsCount=Qe.morphTargetsCount,yt.numClippingPlanes=Qe.numClippingPlanes,yt.numIntersection=Qe.numClipIntersection,yt.vertexAlphas=Qe.vertexAlphas,yt.vertexTangents=Qe.vertexTangents,yt.toneMapping=Qe.toneMapping}function h1(be,Qe,yt,gt,ht){Qe.isScene!==!0&&(Qe=Tt),ve.resetTextureUnits();const hn=Qe.fog,Cn=gt.isMeshStandardMaterial?Qe.environment:null,Nn=pe===null?H.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:vh,jn=(gt.isMeshStandardMaterial?Je:he).get(gt.envMap||Cn),rr=gt.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,qn=!!yt.attributes.tangent&&(!!gt.normalMap||gt.anisotropy>0),Fn=!!yt.morphAttributes.position,xr=!!yt.morphAttributes.normal,Bs=!!yt.morphAttributes.color;let pi=jf;gt.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(pi=H.toneMapping);const Do=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,Gr=Do!==void 0?Do.length:0,$n=cn.get(gt),Au=L.state.lights;if(et===!0&&(wt===!0||be!==J)){const Us=be===J&&gt.id===xe;Xn.setState(gt,be,Us)}let Wr=!1;gt.version===$n.__version?($n.needsLights&&$n.lightsStateVersion!==Au.state.version||$n.outputColorSpace!==Nn||ht.isBatchedMesh&&$n.batching===!1||!ht.isBatchedMesh&&$n.batching===!0||ht.isInstancedMesh&&$n.instancing===!1||!ht.isInstancedMesh&&$n.instancing===!0||ht.isSkinnedMesh&&$n.skinning===!1||!ht.isSkinnedMesh&&$n.skinning===!0||ht.isInstancedMesh&&$n.instancingColor===!0&&ht.instanceColor===null||ht.isInstancedMesh&&$n.instancingColor===!1&&ht.instanceColor!==null||$n.envMap!==jn||gt.fog===!0&&$n.fog!==hn||$n.numClippingPlanes!==void 0&&($n.numClippingPlanes!==Xn.numPlanes||$n.numIntersection!==Xn.numIntersection)||$n.vertexAlphas!==rr||$n.vertexTangents!==qn||$n.morphTargets!==Fn||$n.morphNormals!==xr||$n.morphColors!==Bs||$n.toneMapping!==pi||Ht.isWebGL2===!0&&$n.morphTargetsCount!==Gr)&&(Wr=!0):(Wr=!0,$n.__version=gt.version);let Oo=$n.currentProgram;Wr===!0&&(Oo=ia(gt,Qe,ht));let Ml=!1,co=!1,D0=!1;const wi=Oo.getUniforms(),Na=$n.uniforms;if(Kt.useProgram(Oo.program)&&(Ml=!0,co=!0,D0=!0),gt.id!==xe&&(xe=gt.id,co=!0),Ml||J!==be){wi.setValue(Ve,"projectionMatrix",be.projectionMatrix),wi.setValue(Ve,"viewMatrix",be.matrixWorldInverse);const Us=wi.map.cameraPosition;Us!==void 0&&Us.setValue(Ve,nt.setFromMatrixPosition(be.matrixWorld)),Ht.logarithmicDepthBuffer&&wi.setValue(Ve,"logDepthBufFC",2/(Math.log(be.far+1)/Math.LN2)),(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial)&&wi.setValue(Ve,"isOrthographic",be.isOrthographicCamera===!0),J!==be&&(J=be,co=!0,D0=!0)}if(ht.isSkinnedMesh){wi.setOptional(Ve,ht,"bindMatrix"),wi.setOptional(Ve,ht,"bindMatrixInverse");const Us=ht.skeleton;Us&&(Ht.floatVertexTextures?(Us.boneTexture===null&&Us.computeBoneTexture(),wi.setValue(Ve,"boneTexture",Us.boneTexture,ve)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ht.isBatchedMesh&&(wi.setOptional(Ve,ht,"batchingTexture"),wi.setValue(Ve,"batchingTexture",ht._matricesTexture,ve));const Iu=yt.morphAttributes;if((Iu.position!==void 0||Iu.normal!==void 0||Iu.color!==void 0&&Ht.isWebGL2===!0)&&sr.update(ht,yt,Oo),(co||$n.receiveShadow!==ht.receiveShadow)&&($n.receiveShadow=ht.receiveShadow,wi.setValue(Ve,"receiveShadow",ht.receiveShadow)),gt.isMeshGouraudMaterial&&gt.envMap!==null&&(Na.envMap.value=jn,Na.flipEnvMap.value=jn.isCubeTexture&&jn.isRenderTargetTexture===!1?-1:1),co&&(wi.setValue(Ve,"toneMappingExposure",H.toneMappingExposure),$n.needsLights&&r0(Na,D0),hn&&gt.fog===!0&&sn.refreshFogUniforms(Na,hn),sn.refreshMaterialUniforms(Na,gt,Ct,Me,Zt),Qk.upload(Ve,ku($n),Na,ve)),gt.isShaderMaterial&&gt.uniformsNeedUpdate===!0&&(Qk.upload(Ve,ku($n),Na,ve),gt.uniformsNeedUpdate=!1),gt.isSpriteMaterial&&wi.setValue(Ve,"center",ht.center),wi.setValue(Ve,"modelViewMatrix",ht.modelViewMatrix),wi.setValue(Ve,"normalMatrix",ht.normalMatrix),wi.setValue(Ve,"modelMatrix",ht.matrixWorld),gt.isShaderMaterial||gt.isRawShaderMaterial){const Us=gt.uniformsGroups;for(let Ru=0,Bc=Us.length;Ru<Bc;Ru++)if(Ht.isWebGL2){const Fa=Us[Ru];Ae.update(Fa,Oo),Ae.bind(Fa,Oo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Oo}function r0(be,Qe){be.ambientLightColor.needsUpdate=Qe,be.lightProbe.needsUpdate=Qe,be.directionalLights.needsUpdate=Qe,be.directionalLightShadows.needsUpdate=Qe,be.pointLights.needsUpdate=Qe,be.pointLightShadows.needsUpdate=Qe,be.spotLights.needsUpdate=Qe,be.spotLightShadows.needsUpdate=Qe,be.rectAreaLights.needsUpdate=Qe,be.hemisphereLights.needsUpdate=Qe}function Eh(be){return be.isMeshLambertMaterial||be.isMeshToonMaterial||be.isMeshPhongMaterial||be.isMeshStandardMaterial||be.isShadowMaterial||be.isShaderMaterial&&be.lights===!0}this.getActiveCubeFace=function(){return fe},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return pe},this.setRenderTargetTextures=function(be,Qe,yt){cn.get(be.texture).__webglTexture=Qe,cn.get(be.depthTexture).__webglTexture=yt;const gt=cn.get(be);gt.__hasExternalTextures=!0,gt.__hasExternalTextures&&(gt.__autoAllocateDepthBuffer=yt===void 0,gt.__autoAllocateDepthBuffer||$t.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),gt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(be,Qe){const yt=cn.get(be);yt.__webglFramebuffer=Qe,yt.__useDefaultFramebuffer=Qe===void 0},this.setRenderTarget=function(be,Qe=0,yt=0){pe=be,fe=Qe,q=yt;let gt=!0,ht=null,hn=!1,Cn=!1;if(be){const jn=cn.get(be);jn.__useDefaultFramebuffer!==void 0?(Kt.bindFramebuffer(Ve.FRAMEBUFFER,null),gt=!1):jn.__webglFramebuffer===void 0?ve.setupRenderTarget(be):jn.__hasExternalTextures&&ve.rebindTextures(be,cn.get(be.texture).__webglTexture,cn.get(be.depthTexture).__webglTexture);const rr=be.texture;(rr.isData3DTexture||rr.isDataArrayTexture||rr.isCompressedArrayTexture)&&(Cn=!0);const qn=cn.get(be).__webglFramebuffer;be.isWebGLCubeRenderTarget?(Array.isArray(qn[Qe])?ht=qn[Qe][yt]:ht=qn[Qe],hn=!0):Ht.isWebGL2&&be.samples>0&&ve.useMultisampledRTT(be)===!1?ht=cn.get(be).__webglMultisampledFramebuffer:Array.isArray(qn)?ht=qn[yt]:ht=qn,ne.copy(be.viewport),Pe.copy(be.scissor),mt=be.scissorTest}else ne.copy(Ze).multiplyScalar(Ct).floor(),Pe.copy(dt).multiplyScalar(Ct).floor(),mt=At;if(Kt.bindFramebuffer(Ve.FRAMEBUFFER,ht)&&Ht.drawBuffers&&gt&&Kt.drawBuffers(be,ht),Kt.viewport(ne),Kt.scissor(Pe),Kt.setScissorTest(mt),hn){const jn=cn.get(be.texture);Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,jn.__webglTexture,yt)}else if(Cn){const jn=cn.get(be.texture),rr=Qe||0;Ve.framebufferTextureLayer(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,jn.__webglTexture,yt||0,rr)}xe=-1},this.readRenderTargetPixels=function(be,Qe,yt,gt,ht,hn,Cn){if(!(be&&be.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nn=cn.get(be).__webglFramebuffer;if(be.isWebGLCubeRenderTarget&&Cn!==void 0&&(Nn=Nn[Cn]),Nn){Kt.bindFramebuffer(Ve.FRAMEBUFFER,Nn);try{const jn=be.texture,rr=jn.format,qn=jn.type;if(rr!==ea&&on.convert(rr)!==Ve.getParameter(Ve.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Fn=qn===F2&&($t.has("EXT_color_buffer_half_float")||Ht.isWebGL2&&$t.has("EXT_color_buffer_float"));if(qn!==x0&&on.convert(qn)!==Ve.getParameter(Ve.IMPLEMENTATION_COLOR_READ_TYPE)&&!(qn===ml&&(Ht.isWebGL2||$t.has("OES_texture_float")||$t.has("WEBGL_color_buffer_float")))&&!Fn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Qe>=0&&Qe<=be.width-gt&&yt>=0&&yt<=be.height-ht&&Ve.readPixels(Qe,yt,gt,ht,on.convert(rr),on.convert(qn),hn)}finally{const jn=pe!==null?cn.get(pe).__webglFramebuffer:null;Kt.bindFramebuffer(Ve.FRAMEBUFFER,jn)}}},this.copyFramebufferToTexture=function(be,Qe,yt=0){const gt=Math.pow(2,-yt),ht=Math.floor(Qe.image.width*gt),hn=Math.floor(Qe.image.height*gt);ve.setTexture2D(Qe,0),Ve.copyTexSubImage2D(Ve.TEXTURE_2D,yt,0,0,be.x,be.y,ht,hn),Kt.unbindTexture()},this.copyTextureToTexture=function(be,Qe,yt,gt=0){const ht=Qe.image.width,hn=Qe.image.height,Cn=on.convert(yt.format),Nn=on.convert(yt.type);ve.setTexture2D(yt,0),Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,yt.flipY),Ve.pixelStorei(Ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),Ve.pixelStorei(Ve.UNPACK_ALIGNMENT,yt.unpackAlignment),Qe.isDataTexture?Ve.texSubImage2D(Ve.TEXTURE_2D,gt,be.x,be.y,ht,hn,Cn,Nn,Qe.image.data):Qe.isCompressedTexture?Ve.compressedTexSubImage2D(Ve.TEXTURE_2D,gt,be.x,be.y,Qe.mipmaps[0].width,Qe.mipmaps[0].height,Cn,Qe.mipmaps[0].data):Ve.texSubImage2D(Ve.TEXTURE_2D,gt,be.x,be.y,Cn,Nn,Qe.image),gt===0&&yt.generateMipmaps&&Ve.generateMipmap(Ve.TEXTURE_2D),Kt.unbindTexture()},this.copyTextureToTexture3D=function(be,Qe,yt,gt,ht=0){if(H.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const hn=be.max.x-be.min.x+1,Cn=be.max.y-be.min.y+1,Nn=be.max.z-be.min.z+1,jn=on.convert(gt.format),rr=on.convert(gt.type);let qn;if(gt.isData3DTexture)ve.setTexture3D(gt,0),qn=Ve.TEXTURE_3D;else if(gt.isDataArrayTexture||gt.isCompressedArrayTexture)ve.setTexture2DArray(gt,0),qn=Ve.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,gt.flipY),Ve.pixelStorei(Ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,gt.premultiplyAlpha),Ve.pixelStorei(Ve.UNPACK_ALIGNMENT,gt.unpackAlignment);const Fn=Ve.getParameter(Ve.UNPACK_ROW_LENGTH),xr=Ve.getParameter(Ve.UNPACK_IMAGE_HEIGHT),Bs=Ve.getParameter(Ve.UNPACK_SKIP_PIXELS),pi=Ve.getParameter(Ve.UNPACK_SKIP_ROWS),Do=Ve.getParameter(Ve.UNPACK_SKIP_IMAGES),Gr=yt.isCompressedTexture?yt.mipmaps[ht]:yt.image;Ve.pixelStorei(Ve.UNPACK_ROW_LENGTH,Gr.width),Ve.pixelStorei(Ve.UNPACK_IMAGE_HEIGHT,Gr.height),Ve.pixelStorei(Ve.UNPACK_SKIP_PIXELS,be.min.x),Ve.pixelStorei(Ve.UNPACK_SKIP_ROWS,be.min.y),Ve.pixelStorei(Ve.UNPACK_SKIP_IMAGES,be.min.z),yt.isDataTexture||yt.isData3DTexture?Ve.texSubImage3D(qn,ht,Qe.x,Qe.y,Qe.z,hn,Cn,Nn,jn,rr,Gr.data):yt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ve.compressedTexSubImage3D(qn,ht,Qe.x,Qe.y,Qe.z,hn,Cn,Nn,jn,Gr.data)):Ve.texSubImage3D(qn,ht,Qe.x,Qe.y,Qe.z,hn,Cn,Nn,jn,rr,Gr),Ve.pixelStorei(Ve.UNPACK_ROW_LENGTH,Fn),Ve.pixelStorei(Ve.UNPACK_IMAGE_HEIGHT,xr),Ve.pixelStorei(Ve.UNPACK_SKIP_PIXELS,Bs),Ve.pixelStorei(Ve.UNPACK_SKIP_ROWS,pi),Ve.pixelStorei(Ve.UNPACK_SKIP_IMAGES,Do),ht===0&&gt.generateMipmaps&&Ve.generateMipmap(qn),Kt.unbindTexture()},this.initTexture=function(be){be.isCubeTexture?ve.setTextureCube(be,0):be.isData3DTexture?ve.setTexture3D(be,0):be.isDataArrayTexture||be.isCompressedArrayTexture?ve.setTexture2DArray(be,0):ve.setTexture2D(be,0),Kt.unbindTexture()},this.resetState=function(){fe=0,q=0,pe=null,Kt.reset(),Un.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return nh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===A$?"display-p3":"srgb",n.unpackColorSpace=di.workingColorSpace===RI?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ls?lh:II}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===lh?ls:vh}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class rze extends F${}rze.prototype.isWebGL1Renderer=!0;class HA extends Or{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}const b3e=new Oe,_3e=new Dr,w3e=new Dr,ize=new Oe,x3e=new Bn,_k=new Oe,Fj=new Z2,S3e=new Bn,Bj=new bg;class d6e extends Ri{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=n9e,this.bindMatrix=new Bn,this.bindMatrixInverse=new Bn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new yg),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,_k),this.boundingBox.expandByPoint(_k)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Z2),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,_k),this.boundingSphere.expandByPoint(_k)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fj.copy(this.boundingSphere),Fj.applyMatrix4(i),e.ray.intersectsSphere(Fj)!==!1&&(S3e.copy(i).invert(),Bj.copy(e.ray).applyMatrix4(S3e),!(this.boundingBox!==null&&Bj.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,Bj)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dr,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===n9e?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===dOe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;_3e.fromBufferAttribute(i.attributes.skinIndex,e),w3e.fromBufferAttribute(i.attributes.skinWeight,e),b3e.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const u=w3e.getComponent(o);if(u!==0){const d=_3e.getComponent(o);x3e.multiplyMatrices(r.bones[d].matrixWorld,r.boneInverses[d]),n.addScaledVector(ize.copy(b3e).applyMatrix4(x3e),u)}}return n.applyMatrix4(this.bindMatrixInverse)}}class BG extends Or{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xy extends Qi{constructor(e=null,n=1,r=1,i,o,u,d,f,v=Es,x=Es,S,M){super(null,u,d,f,v,x,i,o,S,M),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E3e=new Bn,sze=new Bn;class B${constructor(e=[],n=[]){this.uuid=o1(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Bn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Bn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,u=e.length;o<u;o++){const d=e[o]?e[o].matrixWorld:sze;E3e.multiplyMatrices(d,n[o]),E3e.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new B$(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Xy(n,e,e,ea,ml);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let u=n[o];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new BG),this.bones.push(u),this.boneInverses.push(new Bn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const u=n[i];e.bones.push(u.uuid);const d=r[i];e.boneInverses.push(d.toArray())}return e}}class a1 extends A0{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const C3e=new Oe,P3e=new Oe,T3e=new Bn,Uj=new bg,wk=new Z2;class Ub extends Or{constructor(e=new Ji,n=new a1){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)C3e.fromBufferAttribute(n,i-1),P3e.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=C3e.distanceTo(P3e);e.setAttribute("lineDistance",new Vr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),wk.copy(r.boundingSphere),wk.applyMatrix4(i),wk.radius+=o,e.ray.intersectsSphere(wk)===!1)return;T3e.copy(i).invert(),Uj.copy(e.ray).applyMatrix4(T3e);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=d*d,v=new Oe,x=new Oe,S=new Oe,M=new Oe,D=this.isLineSegments?2:1,G=r.index,L=r.attributes.position;if(G!==null){const U=Math.max(0,u.start),C=Math.min(G.count,u.start+u.count);for(let H=U,X=C-1;H<X;H+=D){const fe=G.getX(H),q=G.getX(H+1);if(v.fromBufferAttribute(L,fe),x.fromBufferAttribute(L,q),Uj.distanceSqToSegment(v,x,M,S)>f)continue;M.applyMatrix4(this.matrixWorld);const xe=e.ray.origin.distanceTo(M);xe<e.near||xe>e.far||n.push({distance:xe,point:S.clone().applyMatrix4(this.matrixWorld),index:H,face:null,faceIndex:null,object:this})}}else{const U=Math.max(0,u.start),C=Math.min(L.count,u.start+u.count);for(let H=U,X=C-1;H<X;H+=D){if(v.fromBufferAttribute(L,H),x.fromBufferAttribute(L,H+1),Uj.distanceSqToSegment(v,x,M,S)>f)continue;M.applyMatrix4(this.matrixWorld);const q=e.ray.origin.distanceTo(M);q<e.near||q>e.far||n.push({distance:q,point:S.clone().applyMatrix4(this.matrixWorld),index:H,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}const M3e=new Oe,k3e=new Oe;class NI extends Ub{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)M3e.fromBufferAttribute(n,i),k3e.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+M3e.distanceTo(k3e);e.setAttribute("lineDistance",new Vr(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class h6e extends A0{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const A3e=new Bn,UG=new bg,xk=new Z2,Sk=new Oe;class oze extends Or{constructor(e=new Ji,n=new h6e){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xk.copy(r.boundingSphere),xk.applyMatrix4(i),xk.radius+=o,e.ray.intersectsSphere(xk)===!1)return;A3e.copy(i).invert(),UG.copy(e.ray).applyMatrix4(A3e);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=d*d,v=r.index,S=r.attributes.position;if(v!==null){const M=Math.max(0,u.start),D=Math.min(v.count,u.start+u.count);for(let G=M,B=D;G<B;G++){const L=v.getX(G);Sk.fromBufferAttribute(S,L),I3e(Sk,L,f,i,e,n,this)}}else{const M=Math.max(0,u.start),D=Math.min(S.count,u.start+u.count);for(let G=M,B=D;G<B;G++)Sk.fromBufferAttribute(S,G),I3e(Sk,G,f,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}function I3e(t,e,n,r,i,o,u){const d=UG.distanceSqToPoint(t);if(d<n){const f=new Oe;UG.closestPointToPoint(t,f),f.applyMatrix4(r);const v=i.ray.origin.distanceTo(f);if(v<i.near||v>i.far)return;o.push({distance:v,distanceToRay:Math.sqrt(d),point:f,index:e,face:null,object:u})}}class aze{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let u;n?u=n:u=e*r[o-1];let d=0,f=o-1,v;for(;d<=f;)if(i=Math.floor(d+(f-d)/2),v=r[i]-u,v<0)d=i+1;else if(v>0)f=i-1;else{f=i;break}if(i=f,r[i]===u)return i/(o-1);const x=r[i],M=r[i+1]-x,D=(u-x)/M;return(i+D)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const u=this.getPoint(i),d=this.getPoint(o),f=n||(u.isVector2?new ln:new Oe);return f.copy(d).sub(u).normalize(),f}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Oe,i=[],o=[],u=[],d=new Oe,f=new Bn;for(let D=0;D<=e;D++){const G=D/e;i[D]=this.getTangentAt(G,new Oe)}o[0]=new Oe,u[0]=new Oe;let v=Number.MAX_VALUE;const x=Math.abs(i[0].x),S=Math.abs(i[0].y),M=Math.abs(i[0].z);x<=v&&(v=x,r.set(1,0,0)),S<=v&&(v=S,r.set(0,1,0)),M<=v&&r.set(0,0,1),d.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],d),u[0].crossVectors(i[0],o[0]);for(let D=1;D<=e;D++){if(o[D]=o[D-1].clone(),u[D]=u[D-1].clone(),d.crossVectors(i[D-1],i[D]),d.length()>Number.EPSILON){d.normalize();const G=Math.acos(Ls(i[D-1].dot(i[D]),-1,1));o[D].applyMatrix4(f.makeRotationAxis(d,G))}u[D].crossVectors(i[D],o[D])}if(n===!0){let D=Math.acos(Ls(o[0].dot(o[e]),-1,1));D/=e,i[0].dot(d.crossVectors(o[0],o[e]))>0&&(D=-D);for(let G=1;G<=e;G++)o[G].applyMatrix4(f.makeRotationAxis(i[G],D*G)),u[G].crossVectors(i[G],o[G])}return{tangents:i,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class U$ extends Ji{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],u=[],d=[],f=[],v=new Oe,x=new ln;u.push(0,0,0),d.push(0,0,1),f.push(.5,.5);for(let S=0,M=3;S<=n;S++,M+=3){const D=r+S/n*i;v.x=e*Math.cos(D),v.y=e*Math.sin(D),u.push(v.x,v.y,v.z),d.push(0,0,1),x.x=(u[M]/e+1)/2,x.y=(u[M+1]/e+1)/2,f.push(x.x,x.y)}for(let S=1;S<=n;S++)o.push(S,S+1,0);this.setIndex(o),this.setAttribute("position",new Vr(u,3)),this.setAttribute("normal",new Vr(d,3)),this.setAttribute("uv",new Vr(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U$(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class z$ extends Ji{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],u=[];d(i),v(r),x(),this.setAttribute("position",new Vr(o,3)),this.setAttribute("normal",new Vr(o.slice(),3)),this.setAttribute("uv",new Vr(u,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function d(C){const H=new Oe,X=new Oe,fe=new Oe;for(let q=0;q<n.length;q+=3)D(n[q+0],H),D(n[q+1],X),D(n[q+2],fe),f(H,X,fe,C)}function f(C,H,X,fe){const q=fe+1,pe=[];for(let xe=0;xe<=q;xe++){pe[xe]=[];const J=C.clone().lerp(X,xe/q),ne=H.clone().lerp(X,xe/q),Pe=q-xe;for(let mt=0;mt<=Pe;mt++)mt===0&&xe===q?pe[xe][mt]=J:pe[xe][mt]=J.clone().lerp(ne,mt/Pe)}for(let xe=0;xe<q;xe++)for(let J=0;J<2*(q-xe)-1;J++){const ne=Math.floor(J/2);J%2===0?(M(pe[xe][ne+1]),M(pe[xe+1][ne]),M(pe[xe][ne])):(M(pe[xe][ne+1]),M(pe[xe+1][ne+1]),M(pe[xe+1][ne]))}}function v(C){const H=new Oe;for(let X=0;X<o.length;X+=3)H.x=o[X+0],H.y=o[X+1],H.z=o[X+2],H.normalize().multiplyScalar(C),o[X+0]=H.x,o[X+1]=H.y,o[X+2]=H.z}function x(){const C=new Oe;for(let H=0;H<o.length;H+=3){C.x=o[H+0],C.y=o[H+1],C.z=o[H+2];const X=L(C)/2/Math.PI+.5,fe=U(C)/Math.PI+.5;u.push(X,1-fe)}G(),S()}function S(){for(let C=0;C<u.length;C+=6){const H=u[C+0],X=u[C+2],fe=u[C+4],q=Math.max(H,X,fe),pe=Math.min(H,X,fe);q>.9&&pe<.1&&(H<.2&&(u[C+0]+=1),X<.2&&(u[C+2]+=1),fe<.2&&(u[C+4]+=1))}}function M(C){o.push(C.x,C.y,C.z)}function D(C,H){const X=C*3;H.x=e[X+0],H.y=e[X+1],H.z=e[X+2]}function G(){const C=new Oe,H=new Oe,X=new Oe,fe=new Oe,q=new ln,pe=new ln,xe=new ln;for(let J=0,ne=0;J<o.length;J+=9,ne+=6){C.set(o[J+0],o[J+1],o[J+2]),H.set(o[J+3],o[J+4],o[J+5]),X.set(o[J+6],o[J+7],o[J+8]),q.set(u[ne+0],u[ne+1]),pe.set(u[ne+2],u[ne+3]),xe.set(u[ne+4],u[ne+5]),fe.copy(C).add(H).add(X).divideScalar(3);const Pe=L(fe);B(q,ne+0,C,Pe),B(pe,ne+2,H,Pe),B(xe,ne+4,X,Pe)}}function B(C,H,X,fe){fe<0&&C.x===1&&(u[H]=C.x-1),X.x===0&&X.z===0&&(u[H]=fe/2/Math.PI+.5)}function L(C){return Math.atan2(C.z,-C.x)}function U(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z$(e.vertices,e.indices,e.radius,e.details)}}const lze={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=p6e(t,0,i,n,!0);const u=[];if(!o||o.next===o.prev)return u;let d,f,v,x,S,M,D;if(r&&(o=pze(t,e,o,n)),t.length>80*n){d=v=t[0],f=x=t[1];for(let G=n;G<i;G+=n)S=t[G],M=t[G+1],S<d&&(d=S),M<f&&(f=M),S>v&&(v=S),M>x&&(x=M);D=Math.max(v-d,x-f),D=D!==0?32767/D:0}return zb(o,u,n,d,f,D,0),u}};function p6e(t,e,n,r,i){let o,u;if(i===Eze(t,e,n,r)>0)for(o=e;o<n;o+=r)u=R3e(o,t[o],t[o+1],u);else for(o=n-r;o>=e;o-=r)u=R3e(o,t[o],t[o+1],u);return u&&FI(u,u.next)&&(jb(u),u=u.next),u}function U2(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(FI(n,n.next)||qi(n.prev,n,n.next)===0)){if(jb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function zb(t,e,n,r,i,o,u){if(!t)return;!u&&o&&yze(t,r,i,o);let d=t,f,v;for(;t.prev!==t.next;){if(f=t.prev,v=t.next,o?cze(t,r,i,o):uze(t)){e.push(f.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),jb(t),t=v.next,d=v.next;continue}if(t=v,t===d){u?u===1?(t=dze(U2(t),e,n),zb(t,e,n,r,i,o,2)):u===2&&hze(t,e,n,r,i,o):zb(U2(t),e,n,r,i,o,1);break}}}function uze(t){const e=t.prev,n=t,r=t.next;if(qi(e,n,r)>=0)return!1;const i=e.x,o=n.x,u=r.x,d=e.y,f=n.y,v=r.y,x=i<o?i<u?i:u:o<u?o:u,S=d<f?d<v?d:v:f<v?f:v,M=i>o?i>u?i:u:o>u?o:u,D=d>f?d>v?d:v:f>v?f:v;let G=r.next;for(;G!==e;){if(G.x>=x&&G.x<=M&&G.y>=S&&G.y<=D&&O4(i,d,o,f,u,v,G.x,G.y)&&qi(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function cze(t,e,n,r){const i=t.prev,o=t,u=t.next;if(qi(i,o,u)>=0)return!1;const d=i.x,f=o.x,v=u.x,x=i.y,S=o.y,M=u.y,D=d<f?d<v?d:v:f<v?f:v,G=x<S?x<M?x:M:S<M?S:M,B=d>f?d>v?d:v:f>v?f:v,L=x>S?x>M?x:M:S>M?S:M,U=zG(D,G,e,n,r),C=zG(B,L,e,n,r);let H=t.prevZ,X=t.nextZ;for(;H&&H.z>=U&&X&&X.z<=C;){if(H.x>=D&&H.x<=B&&H.y>=G&&H.y<=L&&H!==i&&H!==u&&O4(d,x,f,S,v,M,H.x,H.y)&&qi(H.prev,H,H.next)>=0||(H=H.prevZ,X.x>=D&&X.x<=B&&X.y>=G&&X.y<=L&&X!==i&&X!==u&&O4(d,x,f,S,v,M,X.x,X.y)&&qi(X.prev,X,X.next)>=0))return!1;X=X.nextZ}for(;H&&H.z>=U;){if(H.x>=D&&H.x<=B&&H.y>=G&&H.y<=L&&H!==i&&H!==u&&O4(d,x,f,S,v,M,H.x,H.y)&&qi(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;X&&X.z<=C;){if(X.x>=D&&X.x<=B&&X.y>=G&&X.y<=L&&X!==i&&X!==u&&O4(d,x,f,S,v,M,X.x,X.y)&&qi(X.prev,X,X.next)>=0)return!1;X=X.nextZ}return!0}function dze(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!FI(i,o)&&f6e(i,r,r.next,o)&&Vb(i,o)&&Vb(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),jb(r),jb(r.next),r=t=o),r=r.next}while(r!==t);return U2(r)}function hze(t,e,n,r,i,o){let u=t;do{let d=u.next.next;for(;d!==u.prev;){if(u.i!==d.i&&wze(u,d)){let f=m6e(u,d);u=U2(u,u.next),f=U2(f,f.next),zb(u,e,n,r,i,o,0),zb(f,e,n,r,i,o,0);return}d=d.next}u=u.next}while(u!==t)}function pze(t,e,n,r){const i=[];let o,u,d,f,v;for(o=0,u=e.length;o<u;o++)d=e[o]*r,f=o<u-1?e[o+1]*r:t.length,v=p6e(t,d,f,r,!1),v===v.next&&(v.steiner=!0),i.push(_ze(v));for(i.sort(fze),o=0;o<i.length;o++)n=mze(i[o],n);return n}function fze(t,e){return t.x-e.x}function mze(t,e){const n=gze(t,e);if(!n)return e;const r=m6e(n,t);return U2(r,r.next),U2(n,n.next)}function gze(t,e){let n=e,r=-1/0,i;const o=t.x,u=t.y;do{if(u<=n.y&&u>=n.next.y&&n.next.y!==n.y){const M=n.x+(u-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(M<=o&&M>r&&(r=M,i=n.x<n.next.x?n:n.next,M===o))return i}n=n.next}while(n!==e);if(!i)return null;const d=i,f=i.x,v=i.y;let x=1/0,S;n=i;do o>=n.x&&n.x>=f&&o!==n.x&&O4(u<v?o:r,u,f,v,u<v?r:o,u,n.x,n.y)&&(S=Math.abs(u-n.y)/(o-n.x),Vb(n,t)&&(S<x||S===x&&(n.x>i.x||n.x===i.x&&vze(i,n)))&&(i=n,x=S)),n=n.next;while(n!==d);return i}function vze(t,e){return qi(t.prev,t,e.prev)<0&&qi(e.next,t,t.next)<0}function yze(t,e,n,r){let i=t;do i.z===0&&(i.z=zG(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,bze(i)}function bze(t){let e,n,r,i,o,u,d,f,v=1;do{for(n=t,t=null,o=null,u=0;n;){for(u++,r=n,d=0,e=0;e<v&&(d++,r=r.nextZ,!!r);e++);for(f=v;d>0||f>0&&r;)d!==0&&(f===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,d--):(i=r,r=r.nextZ,f--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,v*=2}while(u>1);return t}function zG(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function _ze(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function O4(t,e,n,r,i,o,u,d){return(i-u)*(e-d)>=(t-u)*(o-d)&&(t-u)*(r-d)>=(n-u)*(e-d)&&(n-u)*(o-d)>=(i-u)*(r-d)}function wze(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!xze(t,e)&&(Vb(t,e)&&Vb(e,t)&&Sze(t,e)&&(qi(t.prev,t,e.prev)||qi(t,e.prev,e))||FI(t,e)&&qi(t.prev,t,t.next)>0&&qi(e.prev,e,e.next)>0)}function qi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function FI(t,e){return t.x===e.x&&t.y===e.y}function f6e(t,e,n,r){const i=Ck(qi(t,e,n)),o=Ck(qi(t,e,r)),u=Ck(qi(n,r,t)),d=Ck(qi(n,r,e));return!!(i!==o&&u!==d||i===0&&Ek(t,n,e)||o===0&&Ek(t,r,e)||u===0&&Ek(n,t,r)||d===0&&Ek(n,e,r))}function Ek(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ck(t){return t>0?1:t<0?-1:0}function xze(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&f6e(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Vb(t,e){return qi(t.prev,t,t.next)<0?qi(t,e,t.next)>=0&&qi(t,t.prev,e)>=0:qi(t,e,t.prev)<0||qi(t,t.next,e)<0}function Sze(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function m6e(t,e){const n=new VG(t.i,t.x,t.y),r=new VG(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function R3e(t,e,n,r){const i=new VG(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function VG(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Eze(t,e,n,r){let i=0;for(let o=e,u=n-r;o<n;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}class V${static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return V$.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];D3e(e),O3e(r,e);let u=e.length;n.forEach(D3e);for(let f=0;f<n.length;f++)i.push(u),u+=n[f].length,O3e(r,n[f]);const d=lze.triangulate(r,i);for(let f=0;f<d.length;f+=3)o.push(d.slice(f,f+3));return o}}function D3e(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function O3e(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class j$ extends z${constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new j$(e.radius,e.detail)}}class Gf extends Ji{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,u=0,d=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:u,thetaLength:d},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const f=Math.min(u+d,Math.PI);let v=0;const x=[],S=new Oe,M=new Oe,D=[],G=[],B=[],L=[];for(let U=0;U<=r;U++){const C=[],H=U/r;let X=0;U===0&&u===0?X=.5/n:U===r&&f===Math.PI&&(X=-.5/n);for(let fe=0;fe<=n;fe++){const q=fe/n;S.x=-e*Math.cos(i+q*o)*Math.sin(u+H*d),S.y=e*Math.cos(u+H*d),S.z=e*Math.sin(i+q*o)*Math.sin(u+H*d),G.push(S.x,S.y,S.z),M.copy(S).normalize(),B.push(M.x,M.y,M.z),L.push(q+X,1-H),C.push(v++)}x.push(C)}for(let U=0;U<r;U++)for(let C=0;C<n;C++){const H=x[U][C+1],X=x[U][C],fe=x[U+1][C],q=x[U+1][C+1];(U!==0||u>0)&&D.push(H,X,q),(U!==r-1||f<Math.PI)&&D.push(X,fe,q)}this.setIndex(D),this.setAttribute("position",new Vr(G,3)),this.setAttribute("normal",new Vr(B,3)),this.setAttribute("uv",new Vr(L,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Cze extends A0{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vg,this.normalScale=new ln(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class g6e extends Cze{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ln(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ls(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ub extends A0{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vn(16777215),this.specular=new vn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vg,this.normalScale=new ln(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Pze extends A0{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vg,this.normalScale=new ln(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Tze extends A0{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vg,this.normalScale=new ln(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class v6e extends A0{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vg,this.normalScale=new ln(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Pk(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Mze(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kze(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function L3e(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,u=0;u!==r;++o){const d=n[o]*e;for(let f=0;f!==e;++f)i[u++]=t[d+f]}return i}function y6e(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let u=o[r];if(u!==void 0)if(Array.isArray(u))do u=o[r],u!==void 0&&(e.push(o.time),n.push.apply(n,u)),o=t[i++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[r],u!==void 0&&(e.push(o.time),u.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do u=o[r],u!==void 0&&(e.push(o.time),n.push(u)),o=t[i++];while(o!==void 0)}class BI{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let u;n:{r:if(!(e<i)){for(let d=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===d)break;if(o=i,i=n[++r],e<i)break t}u=n.length;break n}if(!(e>=o)){const d=n[1];e<d&&(r=2,o=d);for(let f=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===f)break;if(i=o,o=n[--r-1],e>=o)break t}u=r,r=0;break n}break e}for(;r<u;){const d=r+u>>>1;e<n[d]?u=d:r=d+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let u=0;u!==i;++u)n[u]=r[o+u];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Aze extends BI{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:A4,endingEnd:A4}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,u=e+1,d=i[o],f=i[u];if(d===void 0)switch(this.getSettings_().endingStart){case I4:o=e,d=2*n-r;break;case FA:o=i.length-2,d=n+i[o]-i[o+1];break;default:o=e,d=r}if(f===void 0)switch(this.getSettings_().endingEnd){case I4:u=e,f=2*r-n;break;case FA:u=1,f=r+i[1]-i[0];break;default:u=e-1,f=n}const v=(r-n)*.5,x=this.valueSize;this._weightPrev=v/(n-d),this._weightNext=v/(f-r),this._offsetPrev=o*x,this._offsetNext=u*x}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,f=e*d,v=f-d,x=this._offsetPrev,S=this._offsetNext,M=this._weightPrev,D=this._weightNext,G=(r-n)/(i-n),B=G*G,L=B*G,U=-M*L+2*M*B-M*G,C=(1+M)*L+(-1.5-2*M)*B+(-.5+M)*G+1,H=(-1-D)*L+(1.5+D)*B+.5*G,X=D*L-D*B;for(let fe=0;fe!==d;++fe)o[fe]=U*u[x+fe]+C*u[v+fe]+H*u[f+fe]+X*u[S+fe];return o}}class b6e extends BI{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,f=e*d,v=f-d,x=(r-n)/(i-n),S=1-x;for(let M=0;M!==d;++M)o[M]=u[v+M]*S+u[f+M]*x;return o}}class Ize extends BI{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Lc{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pk(n,this.TimeBufferType),this.values=Pk(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Pk(e.times,Array),values:Pk(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Ize(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new b6e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Aze(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case LA:n=this.InterpolantFactoryMethodDiscrete;break;case NA:n=this.InterpolantFactoryMethodLinear;break;case pj:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return LA;case this.InterpolantFactoryMethodLinear:return NA;case this.InterpolantFactoryMethodSmooth:return pj}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,u=i-1;for(;o!==i&&r[o]<e;)++o;for(;u!==-1&&r[u]>n;)--u;if(++u,o!==0||u!==i){o>=u&&(u=Math.max(u,1),o=u-1);const d=this.getValueSize();this.times=r.slice(o,u),this.values=this.values.slice(o*d,u*d)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let d=0;d!==o;d++){const f=r[d];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,f),e=!1;break}if(u!==null&&u>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,f,u),e=!1;break}u=f}if(i!==void 0&&Mze(i))for(let d=0,f=i.length;d!==f;++d){const v=i[d];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,v),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===pj,o=e.length-1;let u=1;for(let d=1;d<o;++d){let f=!1;const v=e[d],x=e[d+1];if(v!==x&&(d!==1||v!==e[0]))if(i)f=!0;else{const S=d*r,M=S-r,D=S+r;for(let G=0;G!==r;++G){const B=n[S+G];if(B!==n[M+G]||B!==n[D+G]){f=!0;break}}}if(f){if(d!==u){e[u]=e[d];const S=d*r,M=u*r;for(let D=0;D!==r;++D)n[M+D]=n[S+D]}++u}}if(o>0){e[u]=e[o];for(let d=o*r,f=u*r,v=0;v!==r;++v)n[f+v]=n[d+v];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=n.slice(0,u*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Lc.prototype.TimeBufferType=Float32Array;Lc.prototype.ValueBufferType=Float32Array;Lc.prototype.DefaultInterpolation=NA;class xg extends Lc{}xg.prototype.ValueTypeName="bool";xg.prototype.ValueBufferType=Array;xg.prototype.DefaultInterpolation=LA;xg.prototype.InterpolantFactoryMethodLinear=void 0;xg.prototype.InterpolantFactoryMethodSmooth=void 0;class _6e extends Lc{}_6e.prototype.ValueTypeName="color";class Hb extends Lc{}Hb.prototype.ValueTypeName="number";class Rze extends BI{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,f=(r-n)/(i-n);let v=e*d;for(let x=v+d;v!==x;v+=4)Ws.slerpFlat(o,0,u,v-d,u,v,f);return o}}class z2 extends Lc{InterpolantFactoryMethodLinear(e){return new Rze(this.times,this.values,this.getValueSize(),e)}}z2.prototype.ValueTypeName="quaternion";z2.prototype.DefaultInterpolation=NA;z2.prototype.InterpolantFactoryMethodSmooth=void 0;class Sg extends Lc{}Sg.prototype.ValueTypeName="string";Sg.prototype.ValueBufferType=Array;Sg.prototype.DefaultInterpolation=LA;Sg.prototype.InterpolantFactoryMethodLinear=void 0;Sg.prototype.InterpolantFactoryMethodSmooth=void 0;class Gb extends Lc{}Gb.prototype.ValueTypeName="vector";class jG{constructor(e,n=-1,r,i=k$){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=o1(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let u=0,d=r.length;u!==d;++u)n.push(Oze(r[u]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,u=r.length;o!==u;++o)n.push(Lc.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,u=[];for(let d=0;d<o;d++){let f=[],v=[];f.push((d+o-1)%o,d,(d+1)%o),v.push(0,1,0);const x=kze(f);f=L3e(f,1,x),v=L3e(v,1,x),!i&&f[0]===0&&(f.push(o),v.push(v[0])),u.push(new Hb(".morphTargetInfluences["+n[d].name+"]",f,v).scale(1/r))}return new this(e,-1,u)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let d=0,f=e.length;d<f;d++){const v=e[d],x=v.name.match(o);if(x&&x.length>1){const S=x[1];let M=i[S];M||(i[S]=M=[]),M.push(v)}}const u=[];for(const d in i)u.push(this.CreateFromMorphTargetSequence(d,i[d],n,r));return u}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(S,M,D,G,B){if(D.length!==0){const L=[],U=[];y6e(D,L,U,G),L.length!==0&&B.push(new S(M,L,U))}},i=[],o=e.name||"default",u=e.fps||30,d=e.blendMode;let f=e.length||-1;const v=e.hierarchy||[];for(let S=0;S<v.length;S++){const M=v[S].keys;if(!(!M||M.length===0))if(M[0].morphTargets){const D={};let G;for(G=0;G<M.length;G++)if(M[G].morphTargets)for(let B=0;B<M[G].morphTargets.length;B++)D[M[G].morphTargets[B]]=-1;for(const B in D){const L=[],U=[];for(let C=0;C!==M[G].morphTargets.length;++C){const H=M[G];L.push(H.time),U.push(H.morphTarget===B?1:0)}i.push(new Hb(".morphTargetInfluence["+B+"]",L,U))}f=D.length*u}else{const D=".bones["+n[S].name+"]";r(Gb,D+".position",M,"pos",i),r(z2,D+".quaternion",M,"rot",i),r(Gb,D+".scale",M,"scl",i)}}return i.length===0?null:new this(o,f,i,d)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Dze(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hb;case"vector":case"vector2":case"vector3":case"vector4":return Gb;case"color":return _6e;case"quaternion":return z2;case"bool":case"boolean":return xg;case"string":return Sg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Oze(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Dze(t.type);if(t.times===void 0){const n=[],r=[];y6e(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const GA={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Lze{constructor(e,n,r){const i=this;let o=!1,u=0,d=0,f;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(x){d++,o===!1&&i.onStart!==void 0&&i.onStart(x,u,d),o=!0},this.itemEnd=function(x){u++,i.onProgress!==void 0&&i.onProgress(x,u,d),u===d&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(x){i.onError!==void 0&&i.onError(x)},this.resolveURL=function(x){return f?f(x):x},this.setURLModifier=function(x){return f=x,this},this.addHandler=function(x,S){return v.push(x,S),this},this.removeHandler=function(x){const S=v.indexOf(x);return S!==-1&&v.splice(S,2),this},this.getHandler=function(x){for(let S=0,M=v.length;S<M;S+=2){const D=v[S],G=v[S+1];if(D.global&&(D.lastIndex=0),D.test(x))return G}return null}}}const Nze=new Lze;class Qf{constructor(e){this.manager=e!==void 0?e:Nze,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qf.DEFAULT_MATERIAL_NAME="__DEFAULT";const Wd={};class Fze extends Error{constructor(e,n){super(e),this.response=n}}class Bze extends Qf{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=GA.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Wd[e]!==void 0){Wd[e].push({onLoad:n,onProgress:r,onError:i});return}Wd[e]=[],Wd[e].push({onLoad:n,onProgress:r,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),d=this.mimeType,f=this.responseType;fetch(u).then(v=>{if(v.status===200||v.status===0){if(v.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||v.body===void 0||v.body.getReader===void 0)return v;const x=Wd[e],S=v.body.getReader(),M=v.headers.get("Content-Length")||v.headers.get("X-File-Size"),D=M?parseInt(M):0,G=D!==0;let B=0;const L=new ReadableStream({start(U){C();function C(){S.read().then(({done:H,value:X})=>{if(H)U.close();else{B+=X.byteLength;const fe=new ProgressEvent("progress",{lengthComputable:G,loaded:B,total:D});for(let q=0,pe=x.length;q<pe;q++){const xe=x[q];xe.onProgress&&xe.onProgress(fe)}U.enqueue(X),C()}})}}});return new Response(L)}else throw new Fze(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`,v)}).then(v=>{switch(f){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(x=>new DOMParser().parseFromString(x,d));case"json":return v.json();default:if(d===void 0)return v.text();{const S=/charset="?([^;"\s]*)"?/i.exec(d),M=S&&S[1]?S[1].toLowerCase():void 0,D=new TextDecoder(M);return v.arrayBuffer().then(G=>D.decode(G))}}}).then(v=>{GA.add(e,v);const x=Wd[e];delete Wd[e];for(let S=0,M=x.length;S<M;S++){const D=x[S];D.onLoad&&D.onLoad(v)}}).catch(v=>{const x=Wd[e];if(x===void 0)throw this.manager.itemError(e),v;delete Wd[e];for(let S=0,M=x.length;S<M;S++){const D=x[S];D.onError&&D.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class w6e extends Qf{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=GA.get(e);if(u!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(u),o.manager.itemEnd(e)},0),u;const d=Fb("img");function f(){x(),GA.add(e,this),n&&n(this),o.manager.itemEnd(e)}function v(S){x(),i&&i(S),o.manager.itemError(e),o.manager.itemEnd(e)}function x(){d.removeEventListener("load",f,!1),d.removeEventListener("error",v,!1)}return d.addEventListener("load",f,!1),d.addEventListener("error",v,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),o.manager.itemStart(e),d.src=e,d}}class Uze extends Qf{constructor(e){super(e)}load(e,n,r,i){const o=new OI;o.colorSpace=ls;const u=new w6e(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let d=0;function f(v){u.load(e[v],function(x){o.images[v]=x,d++,d===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let v=0;v<e.length;++v)f(v);return o}}class x6e extends Qf{constructor(e){super(e)}load(e,n,r,i){const o=new Qi,u=new w6e(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(d){o.image=d,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class Eg extends Or{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new vn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class zze extends Eg{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Or.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const zj=new Bn,N3e=new Oe,F3e=new Oe;class H${constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ln(512,512),this.map=null,this.mapPass=null,this.matrix=new Bn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new O$,this._frameExtents=new ln(1,1),this._viewportCount=1,this._viewports=[new Dr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;N3e.setFromMatrixPosition(e.matrixWorld),n.position.copy(N3e),F3e.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(F3e),n.updateMatrixWorld(),zj.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zj),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(zj)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Vze extends H${constructor(){super(new $s(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=og*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class G$ extends Eg{constructor(e,n,r=0,i=Math.PI/3,o=0,u=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Or.DEFAULT_UP),this.updateMatrix(),this.target=new Or,this.distance=r,this.angle=i,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new Vze}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const B3e=new Bn,ky=new Oe,Vj=new Oe;class jze extends H${constructor(){super(new $s(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ln(4,2),this._viewportCount=6,this._viewports=[new Dr(2,1,1,1),new Dr(0,1,1,1),new Dr(3,1,1,1),new Dr(1,1,1,1),new Dr(3,0,1,1),new Dr(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),ky.setFromMatrixPosition(e.matrixWorld),r.position.copy(ky),Vj.copy(r.position),Vj.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(Vj),r.updateMatrixWorld(),i.makeTranslation(-ky.x,-ky.y,-ky.z),B3e.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(B3e)}}class U3e extends Eg{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new jze}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Hze extends H${constructor(){super(new Bb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class S6e extends Eg{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Or.DEFAULT_UP),this.updateMatrix(),this.target=new Or,this.shadow=new Hze}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Gze extends Eg{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Wze extends Eg{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class $ze{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Kze{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=z3e(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=z3e();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function z3e(){return(typeof performance>"u"?Date:performance).now()}class Xze{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,u;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let d=0;d!==i;++d)r[o+d]=r[d];u=n}else{u+=n;const d=n/u;this._mixBufferRegion(r,o,0,d,i)}this.cumulativeWeight=u}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,d=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const f=n*this._origIndex;this._mixBufferRegion(r,i,f,1-o,n)}u>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let f=n,v=n+n;f!==v;++f)if(r[f]!==r[f+n]){d.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,u=i;o!==u;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let u=0;u!==o;++u)e[n+u]=e[r+u]}_slerp(e,n,r,i){Ws.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const u=this._workIndex*o;Ws.multiplyQuaternionsFlat(e,u,e,n,e,r),Ws.slerpFlat(e,n,e,n,e,u,i)}_lerp(e,n,r,i,o){const u=1-i;for(let d=0;d!==o;++d){const f=n+d;e[f]=e[f]*u+e[r+d]*i}}_lerpAdditive(e,n,r,i,o){for(let u=0;u!==o;++u){const d=n+u;e[d]=e[d]+e[r+u]*i}}}const W$="\\[\\]\\.:\\/",qze=new RegExp("["+W$+"]","g"),$$="[^"+W$+"]",Yze="[^"+W$.replace("\\.","")+"]",Zze=/((?:WC+[\/:])*)/.source.replace("WC",$$),Qze=/(WCOD+)?/.source.replace("WCOD",Yze),Jze=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$$),eVe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$$),tVe=new RegExp("^"+Zze+Qze+Jze+eVe+"$"),nVe=["material","materials","bones","map"];class rVe{constructor(e,n,r){const i=r||zr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class zr{constructor(e,n,r){this.path=n,this.parsedPath=r||zr.parseTrackName(n),this.node=zr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new zr.Composite(e,n,r):new zr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qze,"")}static parseTrackName(e){const n=tVe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);nVe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let u=0;u<o.length;u++){const d=o[u];if(d.name===n||d.uuid===n)return d;const f=r(d.children);if(f)return f}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=zr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let x=0;x<e.length;x++)if(e[x].name===v){v=x;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const u=e[i];if(u===void 0){const v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+i+" but it wasn't found.",e);return}let d=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?d=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}f=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(f=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][d]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}zr.Composite=rVe;zr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};zr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};zr.prototype.GetterByBindingType=[zr.prototype._getValue_direct,zr.prototype._getValue_array,zr.prototype._getValue_arrayElement,zr.prototype._getValue_toArray];zr.prototype.SetterByBindingTypeAndVersioning=[[zr.prototype._setValue_direct,zr.prototype._setValue_direct_setNeedsUpdate,zr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zr.prototype._setValue_array,zr.prototype._setValue_array_setNeedsUpdate,zr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zr.prototype._setValue_arrayElement,zr.prototype._setValue_arrayElement_setNeedsUpdate,zr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zr.prototype._setValue_fromArray,zr.prototype._setValue_fromArray_setNeedsUpdate,zr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class iVe{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,u=o.length,d=new Array(u),f={endingStart:A4,endingEnd:A4};for(let v=0;v!==u;++v){const x=o[v].createInterpolant(null);d[v]=x,x.settings=f}this._interpolantSettings=f,this._interpolants=d,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=wOe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,u=o/i,d=i/o;e.warp(1,u,n),this.warp(d,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,u=this.timeScale;let d=this._timeScaleInterpolant;d===null&&(d=i._lendControlInterpolant(),this._timeScaleInterpolant=d);const f=d.parameterPositions,v=d.sampleValues;return f[0]=o,f[1]=o+r,v[0]=e/u,v[1]=n/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const f=(e-o)*r;f<0||r===0?n=0:(this._startTime=null,n=r*f)}n*=this._updateTimeScale(e);const u=this._updateTime(n),d=this._updateWeight(e);if(d>0){const f=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case SOe:for(let x=0,S=f.length;x!==S;++x)f[x].evaluate(u),v[x].accumulateAdditive(d);break;case k$:default:for(let x=0,S=f.length;x!==S;++x)f[x].evaluate(u),v[x].accumulate(i,d)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const u=r===xOe;if(e===0)return o===-1?i:u&&(o&1)===1?n-i:i;if(r===_Oe){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=n||i<0){const d=Math.floor(i/n);i-=n*d,o+=Math.abs(d);const f=this.repetitions-o;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const v=e<0;this._setEndings(v,!v,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d})}}else this.time=i;if(u&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=I4,i.endingEnd=I4):(e?i.endingStart=this.zeroSlopeAtStart?I4:A4:i.endingStart=FA,n?i.endingEnd=this.zeroSlopeAtEnd?I4:A4:i.endingEnd=FA)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const d=u.parameterPositions,f=u.sampleValues;return d[0]=o,f[0]=n,d[1]=o+e,f[1]=r,this}}const sVe=new Float32Array(1);class oVe extends k0{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,u=e._propertyBindings,d=e._interpolants,f=r.uuid,v=this._bindingsByRootAndName;let x=v[f];x===void 0&&(x={},v[f]=x);for(let S=0;S!==o;++S){const M=i[S],D=M.name;let G=x[D];if(G!==void 0)++G.referenceCount,u[S]=G;else{if(G=u[S],G!==void 0){G._cacheIndex===null&&(++G.referenceCount,this._addInactiveBinding(G,f,D));continue}const B=n&&n._propertyBindings[S].binding.parsedPath;G=new Xze(zr.create(r,D,B),M.ValueTypeName,M.getValueSize()),++G.referenceCount,this._addInactiveBinding(G,f,D),u[S]=G}d[S].resultBuffer=G.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let u=o[n];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=u;else{const d=u.knownActions;e._byClipCacheIndex=d.length,d.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,u=this._actionsByClip,d=u[o],f=d.knownActions,v=f[f.length-1],x=e._byClipCacheIndex;v._byClipCacheIndex=x,f[x]=v,f.pop(),e._byClipCacheIndex=null;const S=d.actionByRoot,M=(e._localRoot||this._root).uuid;delete S[M],f.length===0&&delete u[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let u=i[n];u===void 0&&(u={},i[n]=u),u[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,u=this._bindingsByRootAndName,d=u[i],f=n[n.length-1],v=e._cacheIndex;f._cacheIndex=v,n[v]=f,n.pop(),delete d[o],Object.keys(d).length===0&&delete u[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new b6e(new Float32Array(2),new Float32Array(2),1,sVe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let u=typeof e=="string"?jG.findByName(i,e):e;const d=u!==null?u.uuid:e,f=this._actionsByClip[d];let v=null;if(r===void 0&&(u!==null?r=u.blendMode:r=k$),f!==void 0){const S=f.actionByRoot[o];if(S!==void 0&&S.blendMode===r)return S;v=f.knownActions[0],u===null&&(u=v._clip)}if(u===null)return null;const x=new iVe(this,u,n,r);return this._bindAction(x,v),this._addInactiveAction(x,d,o),x}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?jG.findByName(r,e):e,u=o?o.uuid:e,d=this._actionsByClip[u];return d!==void 0&&d.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),u=this._accuIndex^=1;for(let v=0;v!==r;++v)n[v]._update(i,e,o,u);const d=this._bindings,f=this._nActiveBindings;for(let v=0;v!==f;++v)d[v].apply(u);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const u=o.knownActions;for(let d=0,f=u.length;d!==f;++d){const v=u[d];this._deactivateAction(v);const x=v._cacheIndex,S=n[n.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,S._cacheIndex=x,n[x]=S,n.pop(),this._removeInactiveBindingsForAction(v)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const u in r){const d=r[u].actionByRoot,f=d[n];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const u in o){const d=o[u];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Ii{constructor(e){this.value=e}clone(){return new Ii(this.value.clone===void 0?this.value:this.value.clone())}}class aVe{constructor(e,n,r=0,i=1/0){this.ray=new bg(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new R$,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return HG(e,this,r,n),r.sort(V3e),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)HG(e[i],this,r,n);return r.sort(V3e),r}}function V3e(t,e){return t.distance-e.distance}function HG(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,u=i.length;o<u;o++)HG(i[o],e,n,!0)}}class j3e{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ls(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const H3e=new Oe;class lVe extends Or{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Ji,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,d=1,f=32;u<f;u++,d++){const v=u/f*Math.PI*2,x=d/f*Math.PI*2;i.push(Math.cos(v),Math.sin(v),1,Math.cos(x),Math.sin(x),1)}r.setAttribute("position",new Vr(i,3));const o=new a1({fog:!1,toneMapped:!1});this.cone=new NI(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),H3e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(H3e),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}class uVe extends Ri{constructor(e,n,r){const i=new Gf(n,4,2),o=new Zf({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const cVe=new Oe,G3e=new vn,W3e=new vn;class dVe extends Or{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new j$(n);i.rotateY(Math.PI*.5),this.material=new Zf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),u=new Float32Array(o.count*3);i.setAttribute("color",new Ta(u,3)),this.add(new Ri(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");G3e.copy(this.light.color),W3e.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?G3e:W3e;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(cVe.setFromMatrixPosition(this.light.matrixWorld).negate())}}const $3e=new Oe,Tk=new Oe,K3e=new Oe;class hVe extends Or{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Ji;i.setAttribute("position",new Vr([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new a1({fog:!1,toneMapped:!1});this.lightPlane=new Ub(i,o),this.add(this.lightPlane),i=new Ji,i.setAttribute("position",new Vr([0,0,0,0,0,1],3)),this.targetLine=new Ub(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),$3e.setFromMatrixPosition(this.light.matrixWorld),Tk.setFromMatrixPosition(this.light.target.matrixWorld),K3e.subVectors(Tk,$3e),this.lightPlane.lookAt(Tk),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Tk),this.targetLine.scale.z=K3e.length()}}const Mk=new Oe,ss=new DI;class pVe extends NI{constructor(e){const n=new Ji,r=new a1({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],u={};d("n1","n2"),d("n2","n4"),d("n4","n3"),d("n3","n1"),d("f1","f2"),d("f2","f4"),d("f4","f3"),d("f3","f1"),d("n1","f1"),d("n2","f2"),d("n3","f3"),d("n4","f4"),d("p","n1"),d("p","n2"),d("p","n3"),d("p","n4"),d("u1","u2"),d("u2","u3"),d("u3","u1"),d("c","t"),d("p","c"),d("cn1","cn2"),d("cn3","cn4"),d("cf1","cf2"),d("cf3","cf4");function d(G,B){f(G),f(B)}function f(G){i.push(0,0,0),o.push(0,0,0),u[G]===void 0&&(u[G]=[]),u[G].push(i.length/3-1)}n.setAttribute("position",new Vr(i,3)),n.setAttribute("color",new Vr(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const v=new vn(16755200),x=new vn(16711680),S=new vn(43775),M=new vn(16777215),D=new vn(3355443);this.setColors(v,x,S,M,D)}setColors(e,n,r,i,o){const d=this.geometry.getAttribute("color");d.setXYZ(0,e.r,e.g,e.b),d.setXYZ(1,e.r,e.g,e.b),d.setXYZ(2,e.r,e.g,e.b),d.setXYZ(3,e.r,e.g,e.b),d.setXYZ(4,e.r,e.g,e.b),d.setXYZ(5,e.r,e.g,e.b),d.setXYZ(6,e.r,e.g,e.b),d.setXYZ(7,e.r,e.g,e.b),d.setXYZ(8,e.r,e.g,e.b),d.setXYZ(9,e.r,e.g,e.b),d.setXYZ(10,e.r,e.g,e.b),d.setXYZ(11,e.r,e.g,e.b),d.setXYZ(12,e.r,e.g,e.b),d.setXYZ(13,e.r,e.g,e.b),d.setXYZ(14,e.r,e.g,e.b),d.setXYZ(15,e.r,e.g,e.b),d.setXYZ(16,e.r,e.g,e.b),d.setXYZ(17,e.r,e.g,e.b),d.setXYZ(18,e.r,e.g,e.b),d.setXYZ(19,e.r,e.g,e.b),d.setXYZ(20,e.r,e.g,e.b),d.setXYZ(21,e.r,e.g,e.b),d.setXYZ(22,e.r,e.g,e.b),d.setXYZ(23,e.r,e.g,e.b),d.setXYZ(24,n.r,n.g,n.b),d.setXYZ(25,n.r,n.g,n.b),d.setXYZ(26,n.r,n.g,n.b),d.setXYZ(27,n.r,n.g,n.b),d.setXYZ(28,n.r,n.g,n.b),d.setXYZ(29,n.r,n.g,n.b),d.setXYZ(30,n.r,n.g,n.b),d.setXYZ(31,n.r,n.g,n.b),d.setXYZ(32,r.r,r.g,r.b),d.setXYZ(33,r.r,r.g,r.b),d.setXYZ(34,r.r,r.g,r.b),d.setXYZ(35,r.r,r.g,r.b),d.setXYZ(36,r.r,r.g,r.b),d.setXYZ(37,r.r,r.g,r.b),d.setXYZ(38,i.r,i.g,i.b),d.setXYZ(39,i.r,i.g,i.b),d.setXYZ(40,o.r,o.g,o.b),d.setXYZ(41,o.r,o.g,o.b),d.setXYZ(42,o.r,o.g,o.b),d.setXYZ(43,o.r,o.g,o.b),d.setXYZ(44,o.r,o.g,o.b),d.setXYZ(45,o.r,o.g,o.b),d.setXYZ(46,o.r,o.g,o.b),d.setXYZ(47,o.r,o.g,o.b),d.setXYZ(48,o.r,o.g,o.b),d.setXYZ(49,o.r,o.g,o.b),d.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;ss.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ws("c",n,e,ss,0,0,-1),ws("t",n,e,ss,0,0,1),ws("n1",n,e,ss,-r,-i,-1),ws("n2",n,e,ss,r,-i,-1),ws("n3",n,e,ss,-r,i,-1),ws("n4",n,e,ss,r,i,-1),ws("f1",n,e,ss,-r,-i,1),ws("f2",n,e,ss,r,-i,1),ws("f3",n,e,ss,-r,i,1),ws("f4",n,e,ss,r,i,1),ws("u1",n,e,ss,r*.7,i*1.1,-1),ws("u2",n,e,ss,-r*.7,i*1.1,-1),ws("u3",n,e,ss,0,i*2,-1),ws("cf1",n,e,ss,-r,0,1),ws("cf2",n,e,ss,r,0,1),ws("cf3",n,e,ss,0,-i,1),ws("cf4",n,e,ss,0,i,1),ws("cn1",n,e,ss,-r,0,-1),ws("cn2",n,e,ss,r,0,-1),ws("cn3",n,e,ss,0,-i,-1),ws("cn4",n,e,ss,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ws(t,e,n,r,i,o,u){Mk.set(i,o,u).unproject(r);const d=e[t];if(d!==void 0){const f=n.getAttribute("position");for(let v=0,x=d.length;v<x;v++)f.setXYZ(d[v],Mk.x,Mk.y,Mk.z)}}class X3e extends NI{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ji;i.setAttribute("position",new Vr(n,3)),i.setAttribute("color",new Vr(r,3));const o=new a1({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new vn,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h_);class fVe{constructor(e,n,r=!0){yr(this,"components",new Map);yr(this,"listen");yr(this,"_appID","");yr(this,"_debugEnabled");yr(this,"_broadcastChannel");yr(this,"_webSocket");yr(this,"_mode","app");yr(this,"_connected",!1);yr(this,"_useBC",!1);yr(this,"messageHandler",e=>{this.listen!==void 0&&(this._useBC?this.listen(e.data):this.listen(JSON.parse(e.data)))});yr(this,"openHandler",()=>{this._connected=!0});yr(this,"closeHandler",()=>{this._connected=!1});this._appID=e,this._debugEnabled=n,n&&(this._useBC=r,r?(this._broadcastChannel=new BroadcastChannel(e),this._broadcastChannel.addEventListener("message",this.messageHandler)):(this._webSocket=new WebSocket(e),this._webSocket.addEventListener("open",this.openHandler),this._webSocket.addEventListener("close",this.closeHandler),this._webSocket.addEventListener("message",this.messageHandler)))}addComponent(e,n){this.components.set(e,n)}dispose(){this._broadcastChannel!==void 0&&this._broadcastChannel.removeEventListener("message",this.messageHandler),this._webSocket!==void 0&&(this._webSocket.removeEventListener("open",this.openHandler),this._webSocket.removeEventListener("close",this.closeHandler),this._webSocket.removeEventListener("message",this.messageHandler)),this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){var n,r;this._mode!==e.target&&(this._useBC?(n=this._broadcastChannel)==null||n.postMessage(e):this._connected&&((r=this._webSocket)==null||r.send(JSON.stringify(e))))}get appID(){return this._appID}get connected(){return this._connected}get debugEnabled(){return this._debugEnabled}get mode(){return this._mode}get isApp(){return this._mode==="app"}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor")}}const Cr=new k0,Pr={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject",CREATE_TEXTURE:"ToolEvents::createTexture",REQUEST_METHOD:"ToolEvents::requestMethod",ADD_CAMERA:"ToolEvents::addCamera",REMOVE_CAMERA:"ToolEvents::removeCamera"};function mVe(t,e,n){function r(o){switch(e.forEach(u=>{u.callback(t,u.remote,o)}),o.event){case"custom":Cr.dispatchEvent({type:Pr.CUSTOM,value:o.data});break}}function i(o){switch(n.forEach(u=>{u.callback(t,u.remote,o)}),o.event){case"custom":Cr.dispatchEvent({type:Pr.CUSTOM,value:o.data});break}}t.listen=o=>{o.target==="editor"?i(o):r(o)}}class UI{constructor(e){yr(this,"app");this.app=e}dispose(){}handleApp(e,n,r){}handleEditor(e,n,r){}}class gVe extends UI{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}handleApp(e,n,r){switch(r.event){case"selectComponent":Cr.dispatchEvent({type:Pr.SELECT_DROPDOWN,value:r.data});break;case"draggableListUpdate":Cr.dispatchEvent({type:Pr.DRAG_UPDATE,value:r.data});break}}}const K$=()=>{};function M2(t){return t.substring(0,1).toUpperCase()+t.substring(1)}function f2(t,e,n){return Math.min(e,Math.max(t,n))}function q3e(t,e,n){return(n-t)/(e-t)}function Y3e(t,e,n){return t*(1-n)+e*n}function vVe(){return Math.round(Math.random()*1e6).toString()}function yVe(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function bVe(t){const e=Math.round(t.r*255),n=Math.round(t.g*255),r=Math.round(t.b*255),i=f=>{const v=f.toString(16);return v.length===1?"0"+v:v},o=i(e),u=i(n),d=i(r);return"#"+o+u+d}function cb(t,e=1){return Number(t.toFixed(e))}let GG=0;const _Ve=()=>{GG=0},zI=t=>{if(!t)return;let e=t.name.replace(" ","");e.length===0&&(e=`obj_${GG}`,GG++),t.parent!==null&&t.parent.uuid.length>0&&(e=`${t.parent.uuid}.${e}`),t.uuid=e,t.children.forEach(n=>{zI(n)})},wVe=t=>{t&&(Array.isArray(t)?t.forEach(e=>e.dispose()):t.dispose())},WA=t=>{var e;if(t){for(;t.children.length>0;){const n=t.children[0];n.type==="Audio"?(n.pause(),n.parent&&n.parent.remove(n)):WA(n)}if(t.parent&&t.parent.remove(t),t.isMesh){const n=t;(e=n.geometry)==null||e.dispose(),wVe(n.material)}t.dispose!==void 0&&t.dispose()}},hI=class hI extends UI{constructor(){super(...arguments);yr(this,"project");yr(this,"sheets",new Map);yr(this,"sheetObjects",new Map);yr(this,"sheetObjectCBs",new Map);yr(this,"sheetObjectUnsubscribe",new Map);yr(this,"activeSheet");yr(this,"studio")}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var i;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(i=this.project)==null?void 0:i.sheet(n),this.sheets.set(n,r)),r}playSheet(n,r){var i;(i=this.sheet(n))==null||i.sequence.play(r),this.app.send({event:"playSheet",target:"editor",data:{sheet:n,value:r}})}pauseSheet(n){var r;(r=this.sheet(n))==null||r.sequence.pause(),this.app.send({event:"pauseSheet",target:"editor",data:{sheet:n}})}clearSheetObjects(n){this.sheetObjects.forEach((r,i)=>{i.search(`${n}_`)>-1&&this.unsubscribe(r)})}sheetObject(n,r,i,o){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const u=this.sheet(n);if(u===void 0)return;const d=`${n}_${r}`;let f=this.sheetObjects.get(d);f!==void 0?f=u.object(r,{...i,...f.value},{reconfigure:!0}):f=u.object(r,i),this.sheetObjects.set(d,f),this.sheetObjectCBs.set(d,o!==void 0?o:K$);const v=f.onValuesChange(x=>{if(this.app.editor){for(const M in x){const D=x[M];typeof D=="object"&&yVe(D)&&(x[M]={r:D.r,g:D.g,b:D.b,a:D.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheet:n,sheetObject:d,values:x}})}const S=this.sheetObjectCBs.get(d);S!==void 0&&S(x)});return this.sheetObjectUnsubscribe.set(d,v),f}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=n.address.sheetId,i=n.address.objectKey,o=this.sheets.get(r);o==null||o.detachObject(i);const u=`${r}_${i}`,d=this.sheetObjectUnsubscribe.get(u);d!==void 0&&(this.sheetObjects.delete(u),this.sheetObjectCBs.delete(u),this.sheetObjectUnsubscribe.delete(u),d())}handleApp(n,r,i){var d,f;const o=r;let u;switch(i.event){case"setSheet":u=o.sheets.get(i.data.sheet),u!==void 0&&(o.activeSheet=u,(d=this.studio)==null||d.setSelection([u]));break;case"setSheetObject":u=o.sheetObjects.get(`${i.data.sheet}_${i.data.key}`),u!==void 0&&((f=this.studio)==null||f.setSelection([u]));break;case"updateSheetObject":u=o.sheets.get(i.data.sheet),u!==void 0&&u.sequence.pause(),u=o.sheetObjectCBs.get(i.data.sheetObject),u!==void 0&&u(i.data.values);break;case"updateTimeline":u=o.sheets.get(i.data.sheet),o.activeSheet!==void 0&&(o.activeSheet.sequence.position=i.data.position);break}}handleEditor(n,r,i){var o,u;if(n.editor){const d=r;switch(i.event){case"playSheet":(o=d.sheet(i.data.sheet))==null||o.sequence.play(i.data.value);break;case"pauseSheet":(u=d.sheet(i.data.sheet))==null||u.sequence.pause();break}}}handleEditorApp(n,r){var i,o,u;if(n.editor){(i=this.studio)==null||i.ui.restore(),(o=this.studio)==null||o.onSelectionChange(x=>{x.length<1||x.forEach(S=>{let M=S.address.sheetId,D="setSheet",G={};switch(S.type){case"Theatre_Sheet_PublicAPI":D="setSheet",G={sheet:S.address.sheetId},r.activeSheet=r.sheets.get(S.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":D="setSheetObject",M+=`_${S.address.objectKey}`,G={id:M,sheet:S.address.sheetId,key:S.address.objectKey},r.activeSheet=r.sheets.get(S.address.sheetId);break}n.send({event:D,target:"app",data:G})})});let d=-1;const f=()=>{var x;if((x=hI.rafDriver)==null||x.tick(performance.now()),r.activeSheet!==void 0&&d!==r.activeSheet.sequence.position){d=r.activeSheet.sequence.position;const S=r.activeSheet;n.send({event:"updateTimeline",target:"app",data:{position:d,sheet:S.address.sheetId}})}},v=()=>{f(),requestAnimationFrame(v)};f(),v()}else(u=this.studio)==null||u.ui.hide()}};yr(hI,"rafDriver");let lg=hI;function xVe(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function E6e(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(E6e(n))}),e}function SVe(t){const e={};for(const n in t){const r=t[n].value;e[n]={value:r},r===null?e[n].value={src:""}:r.isTexture&&(e[n].value={src:r.image.src})}return e}function EVe(t){switch(t){case"blendSrcAlpha":case"blendDstAlpha":case"blendEquationAlpha":case"clippingPlanes":case"shadowSide":case"precision":return!0}return!1}function a4(t){const e={};for(const n in t){if(n.substring(0,1)==="_"||n.substring(0,2)==="is"||EVe(n))continue;const r=typeof t[n],i=t[n];switch(r){case"boolean":case"number":case"string":e[n]=i;break;case"object":if(i!==null)if(e[n]=i,i.isTexture)if(i instanceof Qi){const o=i.source.toJSON();e[n]={src:o.url}}else i instanceof OI&&(console.log("env map"),console.log(i.source.data),console.log(i.source.toJSON()),e[n]={src:""});else n==="uniforms"&&(e[n]=SVe(e[n]));else e[n]={src:""};break}}return e}function jj(t){t.updateMatrix();const e={name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements,animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};t.animations.forEach(r=>{e.animations.push({name:r.name,duration:r.duration,blendMode:r.blendMode})});const n=t.type.toLowerCase();if(n.search("mesh")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(a4(o))}),e.material=i}else e.material=a4(r.material)}else if(n.search("points")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(a4(o))}),e.material=i}else e.material=a4(r.material)}else if(n.search("line")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(a4(o))}),e.material=i}else e.material=a4(r.material)}else n.search("camera")>-1?t.type==="PerspectiveCamera"?e.perspectiveCameraInfo={fov:t.fov,zoom:t.zoom,near:t.near,far:t.far,focus:t.focus,aspect:t.aspect,filmGauge:t.filmGauge,filmOffset:t.filmOffset}:t.type==="OrthographicCamera"&&(e.orthographicCameraInfo={zoom:t.zoom,near:t.near,far:t.far,left:t.left,right:t.right,top:t.top,bottom:t.bottom}):n.search("light")>-1&&(e.lightInfo={color:t.color,intensity:t.intensity,decay:t.decay,distance:t.distance,angle:t.angle,penumbra:t.penumbra,groundColor:t.groundColor,width:t.width,height:t.height});return e}function CVe(t,e){const n=e.split(".");switch(n.length){case 1:return t[n[0]];case 2:return t[n[0]][n[1]];case 3:return t[n[0]][n[1]][n[2]];case 4:return t[n[0]][n[1]][n[2]][n[3]];case 5:return t[n[0]][n[1]][n[2]][n[3]][n[4]];case 6:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]}}function Er(t,e,n){const r=e.split(".");switch(r.length){case 1:t[r[0]]=n;break;case 2:t[r[0]][r[1]]=n;break;case 3:t[r[0]][r[1]][r[2]]=n;break;case 4:t[r[0]][r[1]][r[2]][r[3]]=n;break;case 5:t[r[0]][r[1]][r[2]][r[3]][r[4]]=n;break}}function db(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{const i=new Qi(r);i.wrapS=gh,i.wrapT=gh,i.needsUpdate=!0,e(i)},r.onerror=n,r.src=t})}class PVe extends UI{constructor(){super(...arguments);yr(this,"scene");yr(this,"renderer")}getObject(n){this.app.debugEnabled&&this.app.send({event:"getObject",target:"app",data:n})}setObject(n){const r=jj(n);this.app.send({event:"setObject",target:"editor",data:r})}requestMethod(n,r,i,o){this.app.send({event:"requestMethod",target:"app",data:{uuid:n,key:r,value:i,subitem:o}})}updateObject(n,r,i){this.app.send({event:"updateObject",target:"app",data:{uuid:n,key:r,value:i}})}createTexture(n,r,i){this.app.send({event:"createTexture",target:"app",data:{uuid:n,key:r,value:i}})}setScene(n){if(n===void 0||(this.scene=n,!this.app.debugEnabled))return;_Ve(),zI(this.scene);const r=E6e(this.scene);this.app.send({event:"setScene",target:"editor",data:r})}addCamera(n){if(!this.app.debugEnabled)return;const r=jj(n);this.app.send({event:"addCamera",target:"editor",data:r})}removeCamera(n){if(!this.app.debugEnabled)return;const r=jj(n);this.app.send({event:"removeCamera",target:"editor",data:r})}handleApp(n,r,i){switch(i.event){case"getObject":Cr.dispatchEvent({type:Pr.GET_OBJECT,value:i.data});break;case"updateObject":Cr.dispatchEvent({type:Pr.UPDATE_OBJECT,value:i.data});break;case"createTexture":Cr.dispatchEvent({type:Pr.CREATE_TEXTURE,value:i.data});break;case"requestMethod":Cr.dispatchEvent({type:Pr.REQUEST_METHOD,value:i.data});break}}handleEditor(n,r,i){switch(i.event){case"setObject":Cr.dispatchEvent({type:Pr.SET_OBJECT,value:i.data});break;case"setScene":Cr.dispatchEvent({type:Pr.SET_SCENE,value:i.data});break;case"addCamera":Cr.dispatchEvent({type:Pr.ADD_CAMERA,value:i.data});break;case"removeCamera":Cr.dispatchEvent({type:Pr.REMOVE_CAMERA,value:i.data});break}}resize(n,r){var i;(i=this.renderer)==null||i.setSize(n,r)}set dpr(n){var r;(r=this.renderer)==null||r.setPixelRatio(f2(1,2,n))}get dpr(){var n;return this.renderer!==void 0?(n=this.renderer)==null?void 0:n.getPixelRatio():1}get width(){var n;return this.renderer!==void 0?((n=this.renderer)==null?void 0:n.domElement.width)/this.dpr:0}get height(){var n;return this.renderer!==void 0?((n=this.renderer)==null?void 0:n.domElement.height)/this.dpr:0}get canvas(){var n;return this.renderer!==void 0?(n=this.renderer)==null?void 0:n.domElement:null}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function _i(t){return t==null}function X$(t){return t!==null&&typeof t=="object"}function WG(t){return t!==null&&typeof t=="object"}function TVe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function V2(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return WG(o)&&WG(u)?Object.assign(Object.assign({},r),{[i]:V2(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function q$(t){return X$(t)?"target"in t:!1}const MVe={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let Jo=class g4{static alreadyDisposed(){return new g4({type:"alreadydisposed"})}static notBindable(){return new g4({type:"notbindable"})}static notCompatible(e,n){return new g4({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new g4({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new g4({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=MVe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Z3e=class C6e{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!C6e.isBindable(r))throw Jo.notBindable();if(!(e in r))throw Jo.propertyNotFound(e);r[e]=n}},Fs=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}},kVe=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new Fs,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}},AVe=class{constructor(e){this.emitter=new Fs,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}},IVe=class{constructor(e){this.emitter=new Fs,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Vi(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new AVe(t):new kVe(t,e)}function RVe(t){return[new IVe(t),(e,n)=>{t.setRawValue(e,n)}]}let wr=class P6e{constructor(e){this.emitter=new Fs,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:Vi(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new P6e(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},m_=class{constructor(e){this.values=wr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},DVe=class{constructor(e){this.values=wr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return _i(r)||(i=Math.max(i,r)),_i(n)||(i=Math.min(i,n)),i}},OVe=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},LVe=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const NVe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let FVe=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=NVe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const BVe={"+":t=>t,"-":t=>-t,"~":t=>~t};let UVe=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=BVe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function Y$(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function Wb(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function zVe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function $b(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function VVe(t,e){const n=$b(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=$b(t,e);return i===""?"":r+i}function Z$(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=VVe(t,e);return r===""?"":n+r}function T6e(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=zVe(t,e);return e+=r.length,r===""?"":r+$b(t,e)}function jVe(t,e){const n=T6e(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=$b(t,e);return e+=i.length,n+r+i+Z$(t,e)}function HVe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=$b(t,e);return e+=r.length,r===""?"":n+r+Z$(t,e)}function GVe(t,e){const n=T6e(t,e);return e+=n.length,n===""?"":n+Z$(t,e)}const WVe=Y$([jVe,HVe,GVe]);function $Ve(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function KVe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=$Ve(t,e);return r===""?"":n+r}function XVe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function qVe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=XVe(t,e);return r===""?"":n+r}function YVe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function ZVe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=YVe(t,e);return r===""?"":n+r}const QVe=Y$([KVe,qVe,ZVe]),JVe=Y$([QVe,WVe]);function eje(t,e){const n=JVe(t,e);return e+=n.length,n===""?null:{evaluable:new LVe(n),cursor:e}}function tje(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=k6e(t,e);if(!r)return null;e=r.cursor,e+=Wb(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function nje(t,e){var n;return(n=eje(t,e))!==null&&n!==void 0?n:tje(t,e)}function M6e(t,e){const n=nje(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=M6e(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new UVe(r,i.evaluable)}):null}function rje(t,e,n){n+=Wb(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=Wb(e,n).length,{cursor:n,operator:r}):null}function ije(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=rje(e,n,r);if(!u)break;r=u.cursor;const d=t(n,r);if(!d)return null;r=d.cursor,o=new FVe(u.operator,o,d.evaluable)}return o?{cursor:r,evaluable:o}:null}}const sje=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>ije(t,e),M6e);function k6e(t,e){return e+=Wb(t,e).length,sje(t,e)}function oje(t){const e=k6e(t,0);return!e||e.cursor+Wb(t,e.cursor).length!==t.length?null:e.evaluable}function yh(t){var e;const n=oje(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function A6e(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=yh(t);if(!_i(e))return e}return 0}function aje(t){return String(t)}function n0(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Qr(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function Q3e(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Xs(t,e,n){return Math.min(Math.max(t,e),n)}function I6e(t,e){return(t%e+e)%e}function lje(t,e){return _i(t.step)?Math.max(Q3e(e),2):Q3e(t.step)}function R6e(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function D6e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function O6e(t,e){return _i(t.step)?null:new OVe(t.step,e)}function L6e(t){return!_i(t.max)&&!_i(t.min)?new m_({max:t.max,min:t.min}):!_i(t.max)||!_i(t.min)?new DVe({max:t.max,min:t.min}):null}function N6e(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:n0(lje(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:R6e(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:D6e(t,e)}}function F6e(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function Q$(t){return{constraint:t.constraint,textProps:wr.fromObject(N6e(t.params,t.initialValue))}}let Q2=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},VI=class{constructor(e){this.target=e}},g_=class extends VI{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},uje=class extends VI{constructor(e,n){super(e),this.expanded=n}},cje=class extends VI{constructor(e,n){super(e),this.index=n}},Kb=class extends Q2{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Fs,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new g_(this,n.binding.target.read(),e.options.last))}};class dje{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Fs}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function hje(t){if(!("binding"in t))return!1;const e=t.binding;return q$(e)&&"read"in e&&"write"in e}function pje(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],d=u(t[o]);return d.succeeded?Object.assign(Object.assign({},i),{[o]:d.value}):void 0},{});return r}function fje(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function mje(t){return t===null?!1:typeof t=="object"}function $d(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function J3e(t){return{custom:e=>$d(e)(t),boolean:$d(e=>typeof e=="boolean"?e:void 0)(t),number:$d(e=>typeof e=="number"?e:void 0)(t),string:$d(e=>typeof e=="string"?e:void 0)(t),function:$d(e=>typeof e=="function"?e:void 0)(t),constant:e=>$d(n=>n===e?e:void 0)(t),raw:$d(e=>e)(t),object:e=>$d(n=>{if(mje(n))return pje(n,e)})(t),array:e=>$d(n=>{if(Array.isArray(n))return fje(n,e)})(t)}}const $G={optional:J3e(!0),required:J3e(!1)};function ts(t,e){const n=e($G),r=$G.required.object(n)(t);return r.succeeded?r.value:void 0}function I0(t,e,n,r){if(e&&!e(t))return!1;const i=ts(t,n);return i?r(i):!1}function R0(t,e){var n;return V2((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function k2(t){return"value"in t}function B6e(t){if(!X$(t)||!("binding"in t))return!1;const e=t.binding;return q$(e)}const Pc="http://www.w3.org/2000/svg";function $A(t){t.offsetHeight}function gje(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function J$(t){return t.ontouchstart!==void 0}function vje(){return globalThis}function yje(){return vje().document}function bje(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const _je={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function jI(t,e){const n=t.createElementNS(Pc,"svg");return n.innerHTML=_je[e],n}function U6e(t,e,n){t.insertBefore(e,t.children[n])}function eK(t){t.parentElement&&t.parentElement.removeChild(t)}function z6e(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function wje(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function V6e(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function uh(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Ic(t,e,n){uh(t.value(e),n)}const xje="tp";function Hr(t){return(n,r)=>[xje,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const Ay=Hr("lbl");function Sje(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}let j6e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ay()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Ay("l")),Ic(n.props,"label",o=>{_i(o)?this.element.classList.add(Ay(void 0,"nol")):(this.element.classList.remove(Ay(void 0,"nol")),wje(r),r.appendChild(Sje(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(Ay("v")),this.element.appendChild(i),this.valueElement=i}},H6e=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new j6e(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return I0(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return R0(null,{label:this.props.get("label")})}};function Eje(){return["veryfirst","first","last","verylast"]}const e5e=Hr(""),t5e={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let HI=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Eje().forEach(r=>{n.classList.remove(e5e(void 0,t5e[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(e5e(void 0,t5e[r]))})}),this.viewProps.handleDispose(()=>{eK(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return I0(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return R0(null,Object.assign({},this.viewProps.exportState()))}},j2=class extends HI{constructor(e,n){if(n.value!==n.valueController.value)throw Jo.shouldNeverHappen();const r=n.valueController.viewProps,i=new H6e(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new j6e(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return I0(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return R0(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function n5e(t){const e=Object.assign({},t);return delete e.value,e}class G6e extends j2{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return I0(e,n=>super.importState(n5e(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return R0(()=>n5e(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Cje(t){return k2(t)&&B6e(t.value)}class Pje extends G6e{importState(e){return I0(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function Tje(t){return k2(t)&&hje(t.value)}function W6e(t,e){for(;t.length<e;)t.push(void 0)}function Mje(t){const e=[];return W6e(e,t),e}function kje(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function Aje(t,e){const n=[...kje(t),e];return n.length>t.length?n.splice(0,n.length-t.length):W6e(n,t.length),n}class Ije{constructor(e){this.emitter=new Fs,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Vi(Mje(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=Aje(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Rje(t){if(!("binding"in t))return!1;const e=t.binding;return q$(e)&&"read"in e&&!("write"in e)}class Dje extends G6e{exportState(){return R0(()=>super.exportState(),{binding:{readonly:!0}})}}function Oje(t){return k2(t)&&Rje(t.value)}let Lje=class extends Q2{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new VI(this))}),this}};function Nje(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function Cg(t,e){return n=>{Nje(t,e,n)}}function tK(t,e){uh(t,n=>{e.textContent=n??""})}const Hj=Hr("btn");let Fje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Hj()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(Hj("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(Hj("t")),tK(n.props.value("title"),i),this.buttonElement.appendChild(i)}},Bje=class{constructor(e,n){this.emitter=new Fs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Fje(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return I0(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return R0(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},r5e=class extends HI{constructor(e,n){const r=new Bje(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new H6e(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return I0(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return R0(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},$6e=class{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const Pg=new $6e("2.0.0");function La(t){return Object.assign({core:Pg},t)}const Uje=La({id:"button",type:"blade",accept(t){const e=ts(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new r5e(t.document,{blade:t.blade,buttonProps:wr.fromObject({title:t.params.title}),labelProps:wr.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof r5e?new Lje(t.controller):null}});function zje(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Vje(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function jje(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Hje(t){return X$(t)?"refresh"in t&&typeof t.refresh=="function":!1}function Gje(t,e){if(!Z3e.isBindable(t))throw Jo.notBindable();return new Z3e(t,e)}let Wje=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Fs,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,Gje(e,n),i),d=this.pool_.createBindingApi(u);return this.add(d,i.index)}addFolder(e){return Vje(this,e)}addButton(e){return zje(this,e)}addTab(e){return jje(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{Hje(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=B6e(n.value)?n.value.binding:null;this.emitter_.emit("change",new g_(r,i?i.target.read():n.value.rawValue,e.options.last))}},nK=class extends Q2{constructor(e,n){super(e),this.rackApi_=new Wje(e.rackController,n)}},rK=class extends HI{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return I0(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return R0(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function KG(t){return"rackController"in t}let $je=class{constructor(e){this.emitter=new Fs,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Jo.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function Kje(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(k2(r)&&r.value===e)return r}return null}function Xje(t){return KG(t)?t.rackController.rack.bcSet_:null}let qje=class{constructor(e){var n,r;this.emitter=new Fs,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new $je(Xje),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),k2(r))r.value.emitter.on("change",this.onChildValueChange_);else if(KG(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(k2(r))r.value.emitter.off("change",this.onChildValueChange_);else if(KG(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=Kje(this.find(k2),e.sender);if(!n)throw Jo.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},iK=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new qje({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&U6e(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&eK(e.bladeController.view.element)}};function Tg(){return new wr({positions:Vi([],{equals:TVe})})}let sK=class K6e extends wr{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=wr.createCore(n);return new K6e(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!_i(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Ic(this,"expanded",r),Ic(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function Yje(t,e){let n=0;return gje(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),$A(e),n=e.clientHeight,t.set("temporaryExpanded",null),$A(e)}),n}function i5e(t,e){e.style.height=t.styleHeight}function oK(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),_i(t.get("expandedHeight"))){const n=Yje(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),$A(e)}),t.emitter.on("change",()=>{i5e(t,e)}),i5e(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let X6e=class extends nK{constructor(e,n){super(e,n),this.emitter_=new Fs,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new uje(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}};const q6e=Hr("cnt");let Zje=class{constructor(e,n){var r;this.className_=Hr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),q6e()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ic(this.foldable_,"completed",Cg(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Ic(n.props,"title",v=>{_i(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),tK(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const d=e.createElement("div");d.classList.add(this.className_("m")),this.buttonElement.appendChild(d);const f=e.createElement("div");f.classList.add(this.className_("c")),this.element.appendChild(f),this.containerElement=f}},XG=class extends rK{constructor(e,n){var r;const i=sK.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new Zje(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new iK({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,oK(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return I0(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return R0(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const Qje=La({id:"folder",type:"blade",accept(t){const e=ts(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new XG(t.document,{blade:t.blade,expanded:t.params.expanded,props:wr.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof XG?new X6e(t.controller,t.pool):null}}),Jje=Hr("");function s5e(t,e){return Cg(t,Jje(void 0,e))}let J2=class Y6e extends wr{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=RVe(Vi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new Y6e(wr.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){uh(this.globalDisabled_,s5e(e,"disabled")),Ic(this,"hidden",s5e(e,"hidden"))}bindDisabled(e){uh(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){uh(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const o5e=Hr("tbp");let eHe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(o5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(o5e("c")),this.element.appendChild(r),this.containerElement=r}};const Iy=Hr("tbi");let tHe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Iy()),n.viewProps.bindClassModifiers(this.element),Ic(n.props,"selected",o=>{o?this.element.classList.add(Iy(void 0,"sel")):this.element.classList.remove(Iy(void 0,"sel"))});const r=e.createElement("button");r.classList.add(Iy("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(Iy("t")),tK(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},nHe=class{constructor(e,n){this.emitter=new Fs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new tHe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},qG=class extends rK{constructor(e,n){const r=new eHe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new iK({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new nHe(e,{props:n.itemProps,viewProps:J2.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Ic(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return I0(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return R0(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},rHe=class extends nK{constructor(e,n){super(e,n),this.emitter_=new Fs,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new qG(n,{blade:Tg(),itemProps:wr.fromObject({selected:!1,title:e.title}),props:wr.fromObject({selected:!1}),viewProps:J2.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new cje(this,e.rawValue))}},iHe=class extends nK{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const a5e=-1;let sHe=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Vi(!0),this.selectedIndex=Vi(a5e),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=a5e,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const Ry=Hr("tab");let oHe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ry(),q6e()),n.viewProps.bindClassModifiers(this.element),uh(n.empty,Cg(this.element,Ry(void 0,"nop")));const r=e.createElement("div");r.classList.add(Ry("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(Ry("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(Ry("c")),this.element.appendChild(o),this.contentsElement=o}},l5e=class extends rK{constructor(e,n){const r=new sHe,i=new oHe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new iK({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;U6e(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;eK(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const Z6e=La({id:"tab",type:"blade",accept(t){const e=ts(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new l5e(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new qG(t.document,{blade:Tg(),itemProps:wr.fromObject({selected:!1,title:n.title}),props:wr.fromObject({selected:!1}),viewProps:J2.create()});e.add(r)}),e},api(t){return t.controller instanceof l5e?new rHe(t.controller,t.pool):t.controller instanceof qG?new iHe(t.controller,t.pool):null}});function aHe(t,e){const n=t.accept(e.params);if(!n)return null;const r=ts(e.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return t.controller({blade:Tg(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:J2.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let aK=class extends Kb{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},lHe=class{constructor(){this.disabled=!1,this.emitter=new Fs}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},uHe=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Fs,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},v_=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function KA(t,e){if(t instanceof e)return t;if(t instanceof v_){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}let y_=class{constructor(e){this.values=wr.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}};function b_(t){var e;const n=$G;if(Array.isArray(t))return(e=ts({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function lK(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function uK(t){return _i(t)?null:new y_(lK(t))}const Gj=Hr("lst");let cHe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Gj()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(Gj("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(Gj("m")),i.appendChild(jI(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Ic(this.props_,"options",o=>{z6e(this.selectElement),o.forEach(u=>{const d=e.createElement("option");d.textContent=u.text,this.selectElement.appendChild(d)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Jf=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new cHe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return I0(e,null,n=>({options:n.required.custom(b_)}),n=>(this.props.set("options",lK(n.options)),!0))}exportProps(){return R0(null,{options:this.props.get("options")})}};const u5e=Hr("pop");let dHe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(u5e()),n.viewProps.bindClassModifiers(this.element),uh(n.shows,Cg(this.element,u5e(void 0,"v")))}},Q6e=class{constructor(e,n){this.shows=Vi(!1),this.viewProps=n.viewProps,this.view=new dHe(e,{shows:this.shows,viewProps:this.viewProps})}};const c5e=Hr("txt");let hHe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(c5e()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(c5e("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},Xb=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new hHe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);_i(i)||(this.value.rawValue=i),this.view.refresh()}};function pHe(t){return String(t)}function J6e(t){return t==="false"?!1:!!t}function d5e(t){return pHe(t)}function fHe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const mHe=n0(0);function XA(t){return mHe(t)+"%"}function e7e(t){return String(t)}function YG(t){return t}function Mg({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Qa(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function qb(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function bh(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function gHe(t){return t==="ArrowUp"||t==="ArrowDown"}function t7e(t){return gHe(t)||t==="ArrowLeft"||t==="ArrowRight"}function Wj(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}let e9=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Fs,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Wj(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Wj(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Wj(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const ll=Hr("txt");let vHe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ll(),ll(void 0,"num")),n.arrayPosition&&this.element.classList.add(ll(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(ll("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ll()),this.inputElement.classList.add(ll("i"));const i=e.createElement("div");i.classList.add(ll("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(Pc,"svg");o.classList.add(ll("g")),this.knobElement.appendChild(o);const u=e.createElementNS(Pc,"path");u.classList.add(ll("gb")),o.appendChild(u),this.guideBodyElem_=u;const d=e.createElementNS(Pc,"path");d.classList.add(ll("gh")),o.appendChild(d),this.guideHeadElem_=d;const f=e.createElement("div");f.classList.add(Hr("tt")()),this.knobElement.appendChild(f),this.tooltipElem_=f,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(ll(void 0,"drg"));return}this.element.classList.add(ll(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Xs(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},__=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Vi(null),this.view=new vHe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new e9(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);_i(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=Qa(this.props.get("keyScale"),qb(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Qa(this.props.get("keyScale"),qb(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const $j=Hr("sld");let yHe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add($j()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add($j("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add($j("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Xs(Qr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},bHe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new yHe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e9(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Qr(Xs(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Qa(this.props.get("keyScale"),bh(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Qa(this.props.get("keyScale"),bh(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Kj=Hr("sldtxt");let _He=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Kj());const r=e.createElement("div");r.classList.add(Kj("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Kj("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},qA=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new bHe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new __(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new _He(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return I0(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return R0(null,{max:e.get("max"),min:e.get("min")})}};function n7e(t){return{sliderProps:new wr({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new wr({formatter:Vi(t.formatter),keyScale:t.keyScale,pointerScale:Vi(t.pointerScale)})}}const wHe={containerUnitSize:"cnt-usz"};function r7e(t){return`--${wHe[t]}`}function Yb(t){return F6e(t)}function If(t){if(WG(t))return ts(t,Yb)}function rh(t,e){if(!t)return;const n=[],r=O6e(t,e);r&&n.push(r);const i=L6e(t);return i&&n.push(i),new v_(n)}function xHe(t){return t?t.major===Pg.major:!1}function i7e(t){if(t==="inline"||t==="popup")return t}function w_(t,e){t.write(e)}const kk=Hr("ckb");let SHe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(kk()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(kk("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(kk("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(kk("w")),r.appendChild(o);const u=jI(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},EHe=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new SHe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function CHe(t){const e=[],n=uK(t.options);return n&&e.push(n),new v_(e)}const PHe=La({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=ts(e,r=>({options:r.optional.custom(b_),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>J6e,constraint:t=>CHe(t.params),writer:t=>w_},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&KA(r,y_);return i?new Jf(e,{props:new wr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new EHe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Jf?new aK(t.controller):null}}),s2=Hr("col");let THe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(s2()),n.foldable.bindExpandedClass(this.element,s2(void 0,"expanded")),Ic(n.foldable,"completed",Cg(this.element,s2(void 0,"cpl")));const r=e.createElement("div");r.classList.add(s2("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(s2("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(s2("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(s2("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};function MHe(t,e,n){const r=Xs(t/255,0,1),i=Xs(e/255,0,1),o=Xs(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),f=u-d;let v=0,x=0;const S=(d+u)/2;return f!==0&&(x=f/(1-Math.abs(u+d-1)),r===u?v=(i-o)/f:i===u?v=2+(o-r)/f:v=4+(r-i)/f,v=v/6+(v<0?1:0)),[v*360,x*100,S*100]}function kHe(t,e,n){const r=(t%360+360)%360,i=Xs(e/100,0,1),o=Xs(n/100,0,1),u=(1-Math.abs(2*o-1))*i,d=u*(1-Math.abs(r/60%2-1)),f=o-u/2;let v,x,S;return r>=0&&r<60?[v,x,S]=[u,d,0]:r>=60&&r<120?[v,x,S]=[d,u,0]:r>=120&&r<180?[v,x,S]=[0,u,d]:r>=180&&r<240?[v,x,S]=[0,d,u]:r>=240&&r<300?[v,x,S]=[d,0,u]:[v,x,S]=[u,0,d],[(v+f)*255,(x+f)*255,(S+f)*255]}function AHe(t,e,n){const r=Xs(t/255,0,1),i=Xs(e/255,0,1),o=Xs(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),f=u-d;let v;f===0?v=0:u===r?v=60*(((i-o)/f%6+6)%6):u===i?v=60*((o-r)/f+2):v=60*((r-i)/f+4);const x=u===0?0:f/u,S=u;return[v,x*100,S*100]}function s7e(t,e,n){const r=I6e(t,360),i=Xs(e/100,0,1),o=Xs(n/100,0,1),u=o*i,d=u*(1-Math.abs(r/60%2-1)),f=o-u;let v,x,S;return r>=0&&r<60?[v,x,S]=[u,d,0]:r>=60&&r<120?[v,x,S]=[d,u,0]:r>=120&&r<180?[v,x,S]=[0,u,d]:r>=180&&r<240?[v,x,S]=[0,d,u]:r>=240&&r<300?[v,x,S]=[d,0,u]:[v,x,S]=[u,0,d],[(v+f)*255,(x+f)*255,(S+f)*255]}function IHe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function RHe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Rc(t){return[t[0],t[1],t[2]]}function GI(t,e){return[t[0],t[1],t[2],e]}const DHe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:IHe,rgb:kHe},hsv:{hsl:RHe,hsv:(t,e,n)=>[t,e,n],rgb:s7e},rgb:{hsl:MHe,hsv:AHe,rgb:(t,e,n)=>[t,e,n]}};function ug(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function OHe(t,e){return t===e?e:I6e(t,e)}function o7e(t,e,n){var r;const i=ug(e,n);return[e==="rgb"?Xs(t[0],0,i[0]):OHe(t[0],i[0]),Xs(t[1],0,i[1]),Xs(t[2],0,i[2]),Xs((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function h5e(t,e,n,r){const i=ug(e,n),o=ug(e,r);return t.map((u,d)=>u/i[d]*o[d])}function a7e(t,e,n){const r=h5e(t,e.mode,e.type,"int"),i=DHe[e.mode][n.mode](...r);return h5e(i,n.mode,"int",n.type)}let Jr=class l7e{static black(){return new l7e([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=o7e(e,n,this.type)}getComponents(e){return GI(a7e(Rc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const lf=Hr("colp");let LHe=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(lf()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(lf("hsv"));const i=e.createElement("div");i.classList.add(lf("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(lf("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(lf("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const d=e.createElement("div");d.classList.add(lf("a"));const f=e.createElement("div");f.classList.add(lf("ap")),f.appendChild(this.alphaViews_.palette.element),d.appendChild(f);const v=e.createElement("div");v.classList.add(lf("at")),v.appendChild(this.alphaViews_.text.element),d.appendChild(v),this.element.appendChild(d)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function NHe(t){return t==="int"?"int":t==="float"?"float":void 0}function cK(t){return ts(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(NHe)}),expanded:e.optional.boolean,picker:e.optional.custom(i7e),readonly:e.optional.constant(!1)}))}function H2(t){return t?.1:1}function u7e(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let dK=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=o7e(e,n,this.type)}getComponents(e){return GI(a7e(Rc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const FHe={int:(t,e)=>new Jr(t,e),float:(t,e)=>new dK(t,e)};function hK(t,e,n){return FHe[n](t,e)}function BHe(t){return t.type==="float"}function UHe(t){return t.type==="int"}function zHe(t){const e=t.getComponents(),n=ug(t.mode,"int");return new Jr([Math.round(Qr(e[0],0,1,0,n[0])),Math.round(Qr(e[1],0,1,0,n[1])),Math.round(Qr(e[2],0,1,0,n[2])),e[3]],t.mode)}function VHe(t){const e=t.getComponents(),n=ug(t.mode,"int");return new dK([Qr(e[0],0,n[0],0,1),Qr(e[1],0,n[1],0,1),Qr(e[2],0,n[2],0,1),e[3]],t.mode)}function ka(t,e){if(t.type===e)return t;if(UHe(t)&&e==="float")return VHe(t);if(BHe(t)&&e==="int")return zHe(t);throw Jo.shouldNeverHappen()}function jHe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function bl(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const HHe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function c7e(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return HHe[r](n)}function d7e(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bl(e[1],255),bl(e[2],255),bl(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function GHe(t){const e=d7e(t);return e?new Jr(e,"rgb"):null}function h7e(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bl(e[1],255),bl(e[2],255),bl(e[3],255),bl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function WHe(t){const e=h7e(t);return e?new Jr(e,"rgb"):null}function p7e(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[c7e(e[1]),bl(e[2],100),bl(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function $He(t){const e=p7e(t);return e?new Jr(e,"hsl"):null}function f7e(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[c7e(e[1]),bl(e[2],100),bl(e[3],100),bl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function KHe(t){const e=f7e(t);return e?new Jr(e,"hsl"):null}function m7e(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function XHe(t){const e=m7e(t);return e?new Jr(e,"rgb"):null}function g7e(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Qr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Qr(parseInt(n[4],16),0,255,0,1)]:null}function qHe(t){const e=g7e(t);return e?new Jr(e,"rgb"):null}function v7e(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function p5e(t){return e=>{const n=v7e(e);return n?hK(n,"rgb",t):null}}function y7e(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function f5e(t){return e=>{const n=y7e(e);return n?hK(n,"rgb",t):null}}const YHe=[{parser:m7e,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:g7e,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:d7e,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:h7e,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:p7e,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:f7e,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:v7e,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:y7e,result:{alpha:!0,mode:"rgb",notation:"object"}}];function ZHe(t){return YHe.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function QHe(t,e="int"){const n=ZHe(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function x_(t){const e=[XHe,qHe,GHe,WHe,$He,KHe];t==="int"&&e.push(p5e("int"),f5e("int")),t==="float"&&e.push(p5e("float"),f5e("float"));const n=fHe(e);return r=>{const i=n(r);return i?ka(i,t):null}}function JHe(t){const e=x_("int");if(typeof t!="string")return Jr.black();const n=e(t);return n??Jr.black()}function b7e(t){const e=Xs(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function pK(t,e="#"){const n=Rc(t.getComponents("rgb")).map(b7e).join("");return`${e}${n}`}function fK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(b7e).join("");return`${e}${r}`}function _7e(t){const e=n0(0),n=ka(t,"int");return`rgb(${Rc(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function Jk(t){const e=n0(2),n=n0(0);return`rgba(${ka(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function eGe(t){const e=[n0(0),XA,XA],n=ka(t,"int");return`hsl(${Rc(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function tGe(t){const e=[n0(0),XA,XA,n0(2)];return`hsla(${ka(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function w7e(t,e){const n=n0(e==="float"?2:0),r=["r","g","b"],i=ka(t,e);return`{${Rc(i.getComponents("rgb")).map((u,d)=>`${r[d]}: ${n(u)}`).join(", ")}}`}function nGe(t){return e=>w7e(e,t)}function x7e(t,e){const n=n0(2),r=n0(e==="float"?2:0),i=["r","g","b","a"];return`{${ka(t,e).getComponents("rgb").map((d,f)=>{const v=f===3?n:r;return`${i[f]}: ${v(d)}`}).join(", ")}}`}function rGe(t){return e=>x7e(e,t)}const iGe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:pK},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:fK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:_7e},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Jk},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:eGe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:tGe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:nGe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:rGe(e)}],[])];function S7e(t){return iGe.reduce((e,n)=>e||(jHe(n.format,t)?n.stringifier:null),null)}const Dy=Hr("apl");let sGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Dy()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Dy("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Dy("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(Dy("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(Dy("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Jr([n[0],n[1],n[2],0],"rgb"),i=new Jr([n[0],n[1],n[2],255],"rgb"),o=["to right",Jk(r),Jk(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=Jk(e);const u=Qr(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}},oGe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new sGe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e9(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Jr([o,u,d,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Qa(H2(!0),bh(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Jr([i,o,u,d+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Qa(H2(!0),bh(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const l4=Hr("coltxt");function aGe(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}let lGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(l4()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(l4("m")),this.modeElem_=aGe(e),this.modeElem_.classList.add(l4("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(l4("mm")),i.appendChild(jI(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(l4("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),uh(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){z6e(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(l4("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function uGe(t){return n0(t==="float"?2:0)}function cGe(t,e,n){const r=ug(t,e)[n];return new m_({min:0,max:r})}function dGe(t,e,n){return new __(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:wr.fromObject({formatter:uGe(e.colorType),keyScale:H2(!1),pointerScale:e.colorType==="float"?.01:1}),value:Vi(0,{constraint:cGe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function hGe(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:yh,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=dGe(t,n,r);return Mg({primary:e.value,secondary:i.value,forward(o){return ka(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const d=e.colorMode,v=ka(o,e.colorType).getComponents(d);v[r]=u;const x=hK(GI(Rc(v),v[3]),d,e.colorType);return ka(x,"int")}}),i})}function pGe(t,e){const n=new Xb(t,{parser:x_("int"),props:wr.fromObject({formatter:pK}),value:Vi(Jr.black()),viewProps:e.viewProps});return Mg({primary:e.value,secondary:n.value,forward:r=>new Jr(Rc(r.getComponents()),r.mode),backward:(r,i)=>new Jr(GI(Rc(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function fGe(t){return t!=="hex"}let mGe=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Vi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new lGe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return fGe(n)?hGe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):pGe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const Xj=Hr("hpl");let gGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Xj()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Xj("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Xj("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=_7e(new Jr([n,100,100],"hsv"));const r=Qr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},vGe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new gGe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e9(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Qr(Xs(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Jr([r,o,u,d],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Qa(H2(!1),bh(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Jr([i+n,o,u,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Qa(H2(!1),bh(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const qj=Hr("svp"),m5e=64;let yGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(qj()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=m5e,r.width=m5e,r.classList.add(qj("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(qj("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=bje(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),d=u.data;for(let x=0;x<o;x++)for(let S=0;S<i;S++){const M=Qr(S,0,i,0,100),D=Qr(x,0,o,100,0),G=s7e(r[0],M,D),B=(x*i+S)*4;d[B]=G[0],d[B+1]=G[1],d[B+2]=G[2],d[B+3]=255}e.putImageData(u,0,0);const f=Qr(r[1],0,100,0,100);this.markerElem_.style.left=`${f}%`;const v=Qr(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}},bGe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new yGe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e9(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Qr(e.point.x,0,e.bounds.width,0,100),i=Qr(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Jr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){t7e(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=H2(!1),d=Qa(u,bh(e)),f=Qa(u,qb(e));d===0&&f===0||this.value.setRawValue(new Jr([n,r+d,i+f,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=H2(!1),r=Qa(n,bh(e)),i=Qa(n,qb(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},_Ge=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new vGe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new bGe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new oGe(e,{value:this.value,viewProps:this.viewProps}),text:new __(e,{parser:yh,props:wr.fromObject({pointerScale:.01,keyScale:.1,formatter:n0(2)}),value:Vi(0,{constraint:new m_({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Mg({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Jr(o,r.mode)}}),this.textsC_=new mGe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new LHe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const Yj=Hr("colsw");let wGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(Yj()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Yj("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(Yj("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=fK(e)}onValueChange_(){this.update_()}},xGe=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new wGe(e,{value:this.value,viewProps:this.viewProps})}},mK=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=sK.create(n.expanded),this.swatchC_=new xGe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new Xb(e,{parser:n.parser,props:wr.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new THe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Q6e(e,{viewProps:this.viewProps}):null;const i=new _Ge(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Mg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),oK(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=V6e(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!J$(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function SGe(t){return Rc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function EGe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function CGe(t){return new Jr([t>>16&255,t>>8&255,t&255],"rgb")}function PGe(t){return new Jr([t>>24&255,t>>16&255,t>>8&255,Qr(t&255,0,255,0,1)],"rgb")}function TGe(t){return typeof t!="number"?Jr.black():CGe(t)}function MGe(t){return typeof t!="number"?Jr.black():PGe(t)}function eA(t,e){return typeof t!="object"||_i(t)?!1:e in t&&typeof t[e]=="number"}function E7e(t){return eA(t,"r")&&eA(t,"g")&&eA(t,"b")}function C7e(t){return E7e(t)&&eA(t,"a")}function P7e(t){return E7e(t)}function gK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function g5e(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function kGe(t){const e=S7e(t);return e?(n,r)=>{w_(n,e(r))}:null}function AGe(t){const e=t?EGe:SGe;return(n,r)=>{w_(n,e(r))}}function IGe(t,e,n){const i=ka(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function RGe(t,e,n){const i=ka(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function DGe(t,e){return(n,r)=>{t?IGe(n,r,e):RGe(n,r,e)}}function OGe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function LGe(t){return t?e=>fK(e,"0x"):e=>pK(e,"0x")}function NGe(t){return"color"in t||t.view==="color"}const FGe=La({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!NGe(e))return null;const n=cK(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:OGe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?MGe:TGe,equals:gK,writer:t=>AGe(t.params.supportsAlpha)},controller:t=>{var e,n;return new mK(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:LGe(t.params.supportsAlpha),parser:x_("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function BGe(t,e){if(!P7e(t))return ka(Jr.black(),e);if(e==="int"){const n=g5e(t);return new Jr(n,"rgb")}if(e==="float"){const n=g5e(t);return new dK(n,"rgb")}return ka(Jr.black(),"int")}function UGe(t){return C7e(t)}function zGe(t){return e=>{const n=BGe(e,t);return ka(n,"int")}}function VGe(t,e){return n=>t?x7e(n,e):w7e(n,e)}const jGe=La({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!P7e(t))return null;const r=cK(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=u7e(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>zGe(t.params.colorType),equals:gK,writer:t=>DGe(UGe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=C7e(t.initialValue);return new mK(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:VGe(r,t.params.colorType),parser:x_("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),HGe=La({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=QHe(t,u7e(e));if(!n)return null;const r=S7e(n);if(!r)return null;const i=cK(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>JHe,equals:gK,writer:t=>{const e=kGe(t.params.format);if(!e)throw Jo.notBindable();return e}},controller:t=>{var e,n;return new mK(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:x_("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let vK=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}};const v5e=Hr("pndtxt");let GGe=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(v5e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(v5e("a")),i.appendChild(r.element),this.element.appendChild(i)})}};function WGe(t,e,n){return new __(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Vi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let yK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>WGe(e,n,i)),this.acs_.forEach((r,i)=>{Mg({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const d=n.assembly.toComponents(o);return d[i]=u,n.assembly.fromComponents(d)}})}),this.view=new GGe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},$Ge=class extends Kb{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function KGe(t,e){const n=[],r=O6e(t,e);r&&n.push(r);const i=L6e(t);i&&n.push(i);const o=uK(t.options);return o&&n.push(o),new v_(n)}const XGe=La({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=ts(e,r=>Object.assign(Object.assign({},F6e(r)),{options:r.optional.custom(b_),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>A6e,constraint:t=>KGe(t.params,t.initialValue),writer:t=>w_},controller:t=>{const e=t.value,n=t.constraint,r=n&&KA(n,y_);if(r)return new Jf(t.document,{props:new wr({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=N6e(t.params,e.rawValue),o=n&&KA(n,m_);return o?new qA(t.document,Object.assign(Object.assign({},n7e(Object.assign(Object.assign({},i),{keyScale:Vi(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:yh,value:e,viewProps:t.viewProps})):new __(t.document,{parser:yh,props:wr.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof qA?new $Ge(t.controller):t.controller.valueController instanceof Jf?new aK(t.controller):null}});let Wf=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(_i(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const T7e={toComponents:t=>t.getComponents(),fromComponents:t=>new Wf(...t)},u4=Hr("p2d");let qGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(u4()),n.viewProps.bindClassModifiers(this.element),uh(n.expanded,Cg(this.element,u4(void 0,"expanded")));const r=e.createElement("div");r.classList.add(u4("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(u4("b")),i.appendChild(jI(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(u4("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(u4("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};const uf=Hr("p2dp");let YGe=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(uf()),n.layout==="popup"&&this.element.classList.add(uf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(uf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(Pc,"svg");i.classList.add(uf("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(Pc,"line");o.classList.add(uf("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(Pc,"line");u.classList.add(uf("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const d=e.createElementNS(Pc,"line");d.classList.add(uf("l")),d.setAttributeNS(null,"x1","50%"),d.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(d),this.lineElem_=d;const f=e.createElement("div");f.classList.add(uf("m")),this.padElement.appendChild(f),this.markerElem_=f,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=Qr(e,-r,+r,0,100),o=Qr(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function y5e(t,e,n){return[Qa(e[0],bh(t)),Qa(e[1],qb(t))*(n?1:-1)]}let ZGe=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new YGe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e9(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=Qr(e.point.x,0,e.bounds.width,-r,+r),o=Qr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Wf(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){t7e(e.key)&&e.preventDefault();const[n,r]=y5e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Wf(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=y5e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},QGe=class{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=sK.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Q6e(e,{viewProps:this.viewProps}):null;const o=new ZGe(e,{layout:n.pickerLayout,props:new wr({invertsY:Vi(n.invertsY),max:Vi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new yK(e,{assembly:T7e,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new qGe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Mg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),oK(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=V6e(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!J$(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function JGe(t){return Wf.isObject(t)?new Wf(t.x,t.y):new Wf}function eWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function tWe(t,e){return new vK({assembly:T7e,components:[rh(Object.assign(Object.assign({},t),t.x),e.x),rh(Object.assign(Object.assign({},t),t.y),e.y)]})}function b5e(t,e){var n,r;if(!_i(t.min)||!_i(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=R6e(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function nWe(t,e){var n,r;const i=b5e(V2(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=b5e(V2(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function rWe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const iWe=La({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Wf.isObject(t))return null;const n=ts(e,r=>Object.assign(Object.assign({},Yb(r)),{expanded:r.optional.boolean,picker:r.optional.custom(i7e),readonly:r.optional.constant(!1),x:r.optional.custom(If),y:r.optional.object(Object.assign(Object.assign({},Yb(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>JGe,constraint:t=>tWe(t.params,t.initialValue),equals:Wf.equals,writer:()=>eWe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new QGe(r,{axes:i.rawValue.getComponents().map((d,f)=>{var v;return Q$({constraint:o.components[f],initialValue:d,params:V2(t.params,(v=u[f])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:rWe(t.params),max:nWe(t.params,i.rawValue),parser:yh,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});let K4=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(_i(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const M7e={toComponents:t=>t.getComponents(),fromComponents:t=>new K4(...t)};function sWe(t){return K4.isObject(t)?new K4(t.x,t.y,t.z):new K4}function oWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function aWe(t,e){return new vK({assembly:M7e,components:[rh(Object.assign(Object.assign({},t),t.x),e.x),rh(Object.assign(Object.assign({},t),t.y),e.y),rh(Object.assign(Object.assign({},t),t.z),e.z)]})}const lWe=La({id:"input-point3d",type:"input",accept:(t,e)=>{if(!K4.isObject(t))return null;const n=ts(e,r=>Object.assign(Object.assign({},Yb(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(If),y:r.optional.custom(If),z:r.optional.custom(If)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>sWe,constraint:t=>aWe(t.params,t.initialValue),equals:K4.equals,writer:t=>oWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new yK(t.document,{assembly:M7e,axes:e.rawValue.getComponents().map((i,o)=>{var u;return Q$({constraint:n.components[o],initialValue:i,params:V2(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:yh,value:e,viewProps:t.viewProps})}});let X4=class{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(_i(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const k7e={toComponents:t=>t.getComponents(),fromComponents:t=>new X4(...t)};function uWe(t){return X4.isObject(t)?new X4(t.x,t.y,t.z,t.w):new X4}function cWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function dWe(t,e){return new vK({assembly:k7e,components:[rh(Object.assign(Object.assign({},t),t.x),e.x),rh(Object.assign(Object.assign({},t),t.y),e.y),rh(Object.assign(Object.assign({},t),t.z),e.z),rh(Object.assign(Object.assign({},t),t.w),e.w)]})}const hWe=La({id:"input-point4d",type:"input",accept:(t,e)=>{if(!X4.isObject(t))return null;const n=ts(e,r=>Object.assign(Object.assign({},Yb(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(If),x:r.optional.custom(If),y:r.optional.custom(If),z:r.optional.custom(If)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>uWe,constraint:t=>dWe(t.params,t.initialValue),equals:X4.equals,writer:t=>cWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new yK(t.document,{assembly:k7e,axes:e.rawValue.getComponents().map((i,o)=>{var u;return Q$({constraint:n.components[o],initialValue:i,params:V2(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:yh,value:e,viewProps:t.viewProps})}});function pWe(t){const e=[],n=uK(t.options);return n&&e.push(n),new v_(e)}const fWe=La({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=ts(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(b_)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>e7e,constraint:t=>pWe(t.params),writer:t=>w_},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&KA(r,y_);return i?new Jf(e,{props:new wr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new Xb(e,{parser:o=>o,props:wr.fromObject({formatter:YG}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Jf?new aK(t.controller):null}}),S_={monitor:{defaultInterval:200,defaultRows:3}},_5e=Hr("mll");let mWe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(_5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(_5e("i")),r.style.height=`calc(var(${r7e("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},bK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new mWe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const w5e=Hr("sgl");let gWe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(w5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(w5e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},_K=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new gWe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const vWe=La({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=ts(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>J6e},controller:t=>{var e;return t.value.rawValue.length===1?new _K(t.document,{formatter:d5e,value:t.value,viewProps:t.viewProps}):new bK(t.document,{formatter:d5e,rows:(e=t.params.rows)!==null&&e!==void 0?e:S_.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let yWe=class extends Kb{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const cf=Hr("grl");let bWe=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Pc,"svg");r.classList.add(cf("g")),r.style.height=`calc(var(${r7e("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(Pc,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(cf("t"),Hr("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,S)=>{if(x===void 0)return;const M=Qr(S,0,n,0,e.width),D=Qr(x,r,i,e.height,0);o.push([M,D].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,d=this.value.rawValue[this.cursor_.rawValue];if(d===void 0){u.classList.remove(cf("t","a"));return}const f=Qr(this.cursor_.rawValue,0,n,0,e.width),v=Qr(d,r,i,e.height,0);u.style.left=`${f}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(d)}`,u.classList.contains(cf("t","a"))||(u.classList.add(cf("t","a"),cf("t","in")),$A(u),u.classList.remove(cf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},A7e=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Vi(-1),this.view=new bWe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!J$(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new e9(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return I0(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return R0(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Qr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Qr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function ZG(t){return _i(t.format)?n0(2):t.format}function _We(t){var e;return t.value.rawValue.length===1?new _K(t.document,{formatter:ZG(t.params),value:t.value,viewProps:t.viewProps}):new bK(t.document,{formatter:ZG(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:S_.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function wWe(t){var e,n,r;return new A7e(t.document,{formatter:ZG(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:S_.monitor.defaultRows,props:wr.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function x5e(t){return t.view==="graph"}const xWe=La({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=ts(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>x5e(t)?64:1,reader:t=>A6e},controller:t=>x5e(t.params)?wWe(t):_We(t),api:t=>t.controller.valueController instanceof A7e?new yWe(t.controller):null}),SWe=La({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=ts(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>e7e},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new bK(t.document,{formatter:YG,rows:(e=t.params.rows)!==null&&e!==void 0?e:S_.monitor.defaultRows,value:n,viewProps:t.viewProps}):new _K(t.document,{formatter:YG,value:n,viewProps:t.viewProps})}});class EWe{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class CWe{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function PWe(t,e){var n;const r=t.accept(e.target.read(),e.params);if(_i(r))return null;const i={target:e.target,initialValue:r.initialValue,params:r.params},o=ts(e.params,S=>({disabled:S.optional.boolean,hidden:S.optional.boolean,label:S.optional.string,tag:S.optional.string})),u=t.binding.reader(i),d=t.binding.constraint?t.binding.constraint(i):void 0,f=new CWe({reader:u,target:e.target,writer:t.binding.writer(i)}),v=new dje(Vi(u(r.initialValue),{constraint:d,equals:t.binding.equals}),f),x=t.controller({constraint:d,document:e.document,initialValue:r.initialValue,params:r.params,value:v,viewProps:J2.create({disabled:o==null?void 0:o.disabled,hidden:o==null?void 0:o.hidden})});return new Pje(e.document,{blade:Tg(),props:wr.fromObject({label:"label"in e.params?(n=o==null?void 0:o.label)!==null&&n!==void 0?n:null:e.target.key}),tag:o==null?void 0:o.tag,value:v,valueController:x})}class TWe{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function MWe(t,e){return e===0?new lHe:new uHe(t,e??S_.monitor.defaultInterval)}function kWe(t,e){var n,r,i;const o=t.accept(e.target.read(),e.params);if(_i(o))return null;const u={target:e.target,initialValue:o.initialValue,params:o.params},d=ts(e.params,M=>({bufferSize:M.optional.number,disabled:M.optional.boolean,hidden:M.optional.boolean,interval:M.optional.number,label:M.optional.string})),f=t.binding.reader(u),v=(r=(n=d==null?void 0:d.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))!==null&&r!==void 0?r:1,x=new Ije({binding:new TWe({reader:f,target:e.target}),bufferSize:v,ticker:MWe(e.document,d==null?void 0:d.interval)}),S=t.controller({document:e.document,params:o.params,value:x,viewProps:J2.create({disabled:d==null?void 0:d.disabled,hidden:d==null?void 0:d.hidden})});return S.viewProps.bindDisabled(x.ticker),S.viewProps.handleDispose(()=>{x.ticker.dispose()}),new Dje(e.document,{blade:Tg(),props:wr.fromObject({label:"label"in e.params?(i=d==null?void 0:d.label)!==null&&i!==void 0?i:null:e.target.key}),value:x,valueController:S})}class AWe{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!xHe(n.core))throw Jo.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((i,o)=>i??PWe(o,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((i,o)=>i??kWe(o,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const i=n.read();if(_i(i))throw new Jo({context:{key:n.key},type:"nomatchingcontroller"});const o=this.createInput_(e,n,r);if(o)return o;const u=this.createMonitor_(e,n,r);if(u)return u;throw new Jo({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((i,o)=>i??aHe(o,{document:e,params:n}),null);if(!r)throw new Jo({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new Kb(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new Kb(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Tje(e))return this.createInputBindingApi_(e);if(Oje(e))return this.createMonitorBindingApi_(e);throw Jo.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Cje(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:e,pool:this}),null);if(!n)throw Jo.shouldNeverHappen();return this.apiCache_.add(e,n)}}const IWe=new EWe;function RWe(){const t=new AWe(IWe);return[iWe,lWe,hWe,fWe,XGe,HGe,jGe,FGe,PHe,vWe,SWe,xWe,Uje,Qje,Z6e].forEach(e=>{t.register("core",e)}),t}class DWe extends Q2{constructor(e){super(e),this.emitter_=new Fs,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new g_(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class OWe extends Q2{}class LWe extends Q2{constructor(e){super(e),this.emitter_=new Fs,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new g_(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class NWe extends Q2{constructor(e){super(e),this.emitter_=new Fs,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new g_(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}const FWe=function(){return{id:"list",type:"blade",core:Pg,accept(t){const e=ts(t,n=>({options:n.required.custom(b_),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new y_(lK(t.params.options)),n=Vi(t.params.value,{constraint:e}),r=new Jf(t.document,{props:new wr({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new j2(t.document,{blade:t.blade,props:wr.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof j2)||!(t.controller.valueController instanceof Jf)?null:new DWe(t.controller)}}}();class BWe extends X6e{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class UWe extends XG{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const S5e=Hr("spr");class zWe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(S5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(S5e("r")),this.element.appendChild(r)}}class E5e extends HI{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new zWe(e,{viewProps:n.viewProps})}))}}const VWe={id:"separator",type:"blade",core:Pg,accept(t){const e=ts(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new E5e(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof E5e?new OWe(t.controller):null}},jWe={id:"slider",type:"blade",core:Pg,accept(t){const e=ts(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,i=new m_({max:t.params.max,min:t.params.min}),o=Vi(r,{constraint:i}),u=new qA(t.document,Object.assign(Object.assign({},n7e({formatter:(n=t.params.format)!==null&&n!==void 0?n:aje,keyScale:Vi(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:D6e(t.params,r)})),{parser:yh,value:o,viewProps:t.viewProps}));return new j2(t.document,{blade:t.blade,props:wr.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof j2)||!(t.controller.valueController instanceof qA)?null:new LWe(t.controller)}},HWe=function(){return{id:"text",type:"blade",core:Pg,accept(t){const e=ts(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Vi(t.params.value),r=new Xb(t.document,{parser:t.params.parse,props:wr.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:i=>String(i)}),value:n,viewProps:t.viewProps});return new j2(t.document,{blade:t.blade,props:wr.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof j2)||!(t.controller.valueController instanceof Xb)?null:new NWe(t.controller)}}}();function GWe(t){const e=t.createElement("div");return e.classList.add(Hr("dfw")()),t.body&&t.body.appendChild(e),e}function WWe(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class $We extends BWe{constructor(e){var n,r;const i=e??{},o=(n=i.document)!==null&&n!==void 0?n:yje(),u=RWe(),d=new UWe(o,{expanded:i.expanded,blade:Tg(),props:wr.fromObject({title:i.title}),viewProps:J2.create()});super(d,u),this.pool_=u,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:GWe(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Jo.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Jo.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&WWe(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[FWe,VWe,jWe,Z6e,HWe]})}}new $6e("4.0.0");function Ui(t){return t==null}function wK(t){return t!==null&&typeof t=="object"}function QG(t){return t!==null&&typeof t=="object"}function KWe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function G2(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return QG(o)&&QG(u)?Object.assign(Object.assign({},r),{[i]:G2(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function XWe(t){return wK(t)?"target"in t:!1}const qWe={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Pa{static alreadyDisposed(){return new Pa({type:"alreadydisposed"})}static notBindable(){return new Pa({type:"notbindable"})}static notCompatible(e,n){return new Pa({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Pa({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Pa({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=qWe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class YA{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!YA.isBindable(r))throw Pa.notBindable();if(!(e in r))throw Pa.propertyNotFound(e);r[e]=n}}class ra{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}}class YWe{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new ra,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}}class ZWe{constructor(e){this.emitter=new ra,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class QWe{constructor(e){this.emitter=new ra,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function cs(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new ZWe(t):new YWe(t,e)}function JWe(t){return[new QWe(t),(e,n)=>{t.setRawValue(e,n)}]}class hr{constructor(e){this.emitter=new ra,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:cs(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new hr(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class E_{constructor(e){this.values=hr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class xK{constructor(e){this.values=hr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return Ui(r)||(i=Math.max(i,r)),Ui(n)||(i=Math.min(i,n)),i}}class e$e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class t$e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const n$e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class r$e{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=n$e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const i$e={"+":t=>t,"-":t=>-t,"~":t=>~t};class s$e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=i$e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function SK(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function Zb(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function o$e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Qb(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function a$e(t,e){const n=Qb(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=Qb(t,e);return i===""?"":r+i}function EK(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=a$e(t,e);return r===""?"":n+r}function I7e(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=o$e(t,e);return e+=r.length,r===""?"":r+Qb(t,e)}function l$e(t,e){const n=I7e(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=Qb(t,e);return e+=i.length,n+r+i+EK(t,e)}function u$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=Qb(t,e);return e+=r.length,r===""?"":n+r+EK(t,e)}function c$e(t,e){const n=I7e(t,e);return e+=n.length,n===""?"":n+EK(t,e)}const d$e=SK([l$e,u$e,c$e]);function h$e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function p$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=h$e(t,e);return r===""?"":n+r}function f$e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function m$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=f$e(t,e);return r===""?"":n+r}function g$e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function v$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=g$e(t,e);return r===""?"":n+r}const y$e=SK([p$e,m$e,v$e]),b$e=SK([y$e,d$e]);function _$e(t,e){const n=b$e(t,e);return e+=n.length,n===""?null:{evaluable:new t$e(n),cursor:e}}function w$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=D7e(t,e);if(!r)return null;e=r.cursor,e+=Zb(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function x$e(t,e){var n;return(n=_$e(t,e))!==null&&n!==void 0?n:w$e(t,e)}function R7e(t,e){const n=x$e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=R7e(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new s$e(r,i.evaluable)}):null}function S$e(t,e,n){n+=Zb(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=Zb(e,n).length,{cursor:n,operator:r}):null}function E$e(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=S$e(e,n,r);if(!u)break;r=u.cursor;const d=t(n,r);if(!d)return null;r=d.cursor,o=new r$e(u.operator,o,d.evaluable)}return o?{cursor:r,evaluable:o}:null}}const C$e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>E$e(t,e),R7e);function D7e(t,e){return e+=Zb(t,e).length,C$e(t,e)}function P$e(t){const e=D7e(t,0);return!e||e.cursor+Zb(t,e.cursor).length!==t.length?null:e.evaluable}function Eu(t){var e;const n=P$e(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function CK(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Eu(t);if(!Ui(e))return e}return 0}function Ro(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function dr(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function C5e(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Yi(t,e,n){return Math.min(Math.max(t,e),n)}function O7e(t,e){return(t%e+e)%e}function T$e(t,e){return Ui(t.step)?Math.max(C5e(e),2):C5e(t.step)}function L7e(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function M$e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function PK(t,e){return Ui(t.step)?null:new e$e(t.step,e)}function TK(t){return!Ui(t.max)&&!Ui(t.min)?new E_({max:t.max,min:t.min}):!Ui(t.max)||!Ui(t.min)?new xK({max:t.max,min:t.min}):null}function MK(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:Ro(T$e(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:L7e(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:M$e(t,e)}}function kK(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function AK(t){return{constraint:t.constraint,textProps:hr.fromObject(MK(t.params,t.initialValue))}}class t9{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class kg{constructor(e){this.target=e}}class WI extends kg{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class k$e extends kg{constructor(e,n){super(e),this.expanded=n}}class A$e extends kg{constructor(e,n){super(e),this.index=n}}class IK extends t9{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ra,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new WI(this,n.binding.target.read(),e.options.last))}}function I$e(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],d=u(t[o]);return d.succeeded?Object.assign(Object.assign({},i),{[o]:d.value}):void 0},{});return r}function R$e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function D$e(t){return t===null?!1:typeof t=="object"}function Kd(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function P5e(t){return{custom:e=>Kd(e)(t),boolean:Kd(e=>typeof e=="boolean"?e:void 0)(t),number:Kd(e=>typeof e=="number"?e:void 0)(t),string:Kd(e=>typeof e=="string"?e:void 0)(t),function:Kd(e=>typeof e=="function"?e:void 0)(t),constant:e=>Kd(n=>n===e?e:void 0)(t),raw:Kd(e=>e)(t),object:e=>Kd(n=>{if(D$e(n))return I$e(n,e)})(t),array:e=>Kd(n=>{if(Array.isArray(n))return R$e(n,e)})(t)}}const JG={optional:P5e(!0),required:P5e(!1)};function ds(t,e){const n=e(JG),r=JG.required.object(n)(t);return r.succeeded?r.value:void 0}function Pu(t,e,n,r){if(e&&!e(t))return!1;const i=ds(t,n);return i?r(i):!1}function Tu(t,e){var n;return G2((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function tA(t){return"value"in t}function O$e(t){if(!wK(t)||!("binding"in t))return!1;const e=t.binding;return XWe(e)}const ao="http://www.w3.org/2000/svg";function ZA(t){t.offsetHeight}function L$e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function $I(t){return t.ontouchstart!==void 0}function N$e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const F$e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function KI(t,e){const n=t.createElementNS(ao,"svg");return n.innerHTML=F$e[e],n}function N7e(t,e,n){t.insertBefore(e,t.children[n])}function RK(t){t.parentElement&&t.parentElement.removeChild(t)}function F7e(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function B$e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function DK(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Sl(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Pl(t,e,n){Sl(t.value(e),n)}const U$e="tp";function gr(t){return(n,r)=>[U$e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const Oy=gr("lbl");function z$e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class B7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Oy()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Oy("l")),Pl(n.props,"label",o=>{Ui(o)?this.element.classList.add(Oy(void 0,"nol")):(this.element.classList.remove(Oy(void 0,"nol")),B$e(r),r.appendChild(z$e(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(Oy("v")),this.element.appendChild(i),this.valueElement=i}}class XI{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new B7e(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Pu(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Tu(null,{label:this.props.get("label")})}}function V$e(){return["veryfirst","first","last","verylast"]}const T5e=gr(""),M5e={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class C_{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{V$e().forEach(r=>{n.classList.remove(T5e(void 0,M5e[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(T5e(void 0,M5e[r]))})}),this.viewProps.handleDispose(()=>{RK(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Pu(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Tu(null,Object.assign({},this.viewProps.exportState()))}}class QA extends C_{constructor(e,n){if(n.value!==n.valueController.value)throw Pa.shouldNeverHappen();const r=n.valueController.viewProps,i=new XI(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new B7e(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Pu(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Tu(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function U7e(t,e){for(;t.length<e;)t.push(void 0)}function j$e(t){const e=[];return U7e(e,t),e}function H$e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function G$e(t,e){const n=[...H$e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):U7e(n,t.length),n}class W$e extends t9{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new kg(this))}),this}}function $$e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function l1(t,e){return n=>{$$e(t,e,n)}}function OK(t,e){Sl(t,n=>{e.textContent=n??""})}const Zj=gr("btn");class K$e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Zj()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(Zj("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(Zj("t")),OK(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class z7e{constructor(e,n){this.emitter=new ra,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new K$e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Pu(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Tu(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class k5e extends C_{constructor(e,n){const r=new z7e(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new XI(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Pu(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Tu(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class X$e{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const q$e=new X$e("2.0.0-beta.2");function Ts(t){return Object.assign({core:q$e},t)}Ts({id:"button",type:"blade",accept(t){const e=ds(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new k5e(t.document,{blade:t.blade,buttonProps:hr.fromObject({title:t.params.title}),labelProps:hr.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof k5e?new W$e(t.controller):null}});function Y$e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Z$e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Q$e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function J$e(t){return wK(t)?"refresh"in t&&typeof t.refresh=="function":!1}function eKe(t,e){if(!YA.isBindable(t))throw Pa.notBindable();return new YA(t,e)}class tKe{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ra,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,eKe(e,n),i),d=this.pool_.createBindingApi(u);return this.add(d,i.index)}addFolder(e){return Z$e(this,e)}addButton(e){return Y$e(this,e)}addTab(e){return Q$e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{J$e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=O$e(n.value)?n.value.binding:null;this.emitter_.emit("change",new WI(r,i?i.target.read():n.value.rawValue,e.options.last))}}class LK extends t9{constructor(e,n){super(e),this.rackApi_=new tKe(e.rackController,n)}}class NK extends C_{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Pu(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Tu(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function eW(t){return"rackController"in t}class nKe{constructor(e){this.emitter=new ra,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Pa.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function rKe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(tA(r)&&r.value===e)return r}return null}function iKe(t){return eW(t)?t.rackController.rack.bcSet_:null}class sKe{constructor(e){var n,r;this.emitter=new ra,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new nKe(iKe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),tA(r))r.value.emitter.on("change",this.onChildValueChange_);else if(eW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(tA(r))r.value.emitter.off("change",this.onChildValueChange_);else if(eW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=rKe(this.find(tA),e.sender);if(!n)throw Pa.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class FK{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new sKe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&N7e(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&RK(e.bladeController.view.element)}}function V7e(){return new hr({positions:cs([],{equals:KWe})})}class Ag extends hr{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=hr.createCore(n);return new Ag(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ui(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Pl(this,"expanded",r),Pl(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function oKe(t,e){let n=0;return L$e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),ZA(e),n=e.clientHeight,t.set("temporaryExpanded",null),ZA(e)}),n}function A5e(t,e){e.style.height=t.styleHeight}function qI(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Ui(t.get("expandedHeight"))){const n=oKe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),ZA(e)}),t.emitter.on("change",()=>{A5e(t,e)}),A5e(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class aKe extends LK{constructor(e,n){super(e,n),this.emitter_=new ra,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new k$e(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}}const j7e=gr("cnt");class lKe{constructor(e,n){var r;this.className_=gr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),j7e()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Pl(this.foldable_,"completed",l1(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Pl(n.props,"title",v=>{Ui(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),OK(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const d=e.createElement("div");d.classList.add(this.className_("m")),this.buttonElement.appendChild(d);const f=e.createElement("div");f.classList.add(this.className_("c")),this.element.appendChild(f),this.containerElement=f}}class I5e extends NK{constructor(e,n){var r;const i=Ag.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new lKe(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new FK({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,qI(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Pu(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Tu(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ts({id:"folder",type:"blade",accept(t){const e=ds(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new I5e(t.document,{blade:t.blade,expanded:t.params.expanded,props:hr.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof I5e?new aKe(t.controller,t.pool):null}});const uKe=gr("");function R5e(t,e){return l1(t,uKe(void 0,e))}class _h extends hr{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=JWe(cs(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new _h(hr.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Sl(this.globalDisabled_,R5e(e,"disabled")),Pl(this,"hidden",R5e(e,"hidden"))}bindDisabled(e){Sl(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Sl(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const D5e=gr("tbp");class cKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(D5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(D5e("c")),this.element.appendChild(r),this.containerElement=r}}const Ly=gr("tbi");class dKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ly()),n.viewProps.bindClassModifiers(this.element),Pl(n.props,"selected",o=>{o?this.element.classList.add(Ly(void 0,"sel")):this.element.classList.remove(Ly(void 0,"sel"))});const r=e.createElement("button");r.classList.add(Ly("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(Ly("t")),OK(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class hKe{constructor(e,n){this.emitter=new ra,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new dKe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class tW extends NK{constructor(e,n){const r=new cKe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new FK({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new hKe(e,{props:n.itemProps,viewProps:_h.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Pl(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Pu(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Tu(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class pKe extends LK{constructor(e,n){super(e,n),this.emitter_=new ra,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new tW(n,{blade:V7e(),itemProps:hr.fromObject({selected:!1,title:e.title}),props:hr.fromObject({selected:!1}),viewProps:_h.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new A$e(this,e.rawValue))}}class fKe extends LK{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const O5e=-1;class mKe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=cs(!0),this.selectedIndex=cs(O5e),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=O5e,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Ny=gr("tab");class gKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ny(),j7e()),n.viewProps.bindClassModifiers(this.element),Sl(n.empty,l1(this.element,Ny(void 0,"nop")));const r=e.createElement("div");r.classList.add(Ny("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(Ny("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(Ny("c")),this.element.appendChild(o),this.contentsElement=o}}class L5e extends NK{constructor(e,n){const r=new mKe,i=new gKe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new FK({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;N7e(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;RK(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Ts({id:"tab",type:"blade",accept(t){const e=ds(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new L5e(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new tW(t.document,{blade:V7e(),itemProps:hr.fromObject({selected:!1,title:n.title}),props:hr.fromObject({selected:!1}),viewProps:_h.create()});e.add(r)}),e},api(t){return t.controller instanceof L5e?new pKe(t.controller,t.pool):t.controller instanceof tW?new fKe(t.controller,t.pool):null}});class BK extends IK{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class vKe{constructor(){this.disabled=!1,this.emitter=new ra}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class yKe{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new ra,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Ig{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function Jb(t,e){if(t instanceof e)return t;if(t instanceof Ig){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}class YI{constructor(e){this.values=hr.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function ZI(t){var e;const n=JG;if(Array.isArray(t))return(e=ds({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function H7e(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function UK(t){return Ui(t)?null:new YI(H7e(t))}const Qj=gr("lst");class bKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Qj()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(Qj("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(Qj("m")),i.appendChild(KI(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Pl(this.props_,"options",o=>{F7e(this.selectElement),o.forEach(u=>{const d=e.createElement("option");d.textContent=u.text,this.selectElement.appendChild(d)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class cg{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new bKe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Pu(e,null,n=>({options:n.required.custom(ZI)}),n=>(this.props.set("options",H7e(n.options)),!0))}exportProps(){return Tu(null,{options:this.props.get("options")})}}const N5e=gr("pop");class _Ke{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(N5e()),n.viewProps.bindClassModifiers(this.element),Sl(n.shows,l1(this.element,N5e(void 0,"v")))}}class zK{constructor(e,n){this.shows=cs(!1),this.viewProps=n.viewProps,this.view=new _Ke(e,{shows:this.shows,viewProps:this.viewProps})}}const F5e=gr("txt");class wKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(F5e()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(F5e("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class QI{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new wKe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Ui(i)||(this.value.rawValue=i),this.view.refresh()}}function xKe(t){return String(t)}function VK(t){return t==="false"?!1:!!t}function B5e(t){return xKe(t)}function SKe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const EKe=Ro(0);function JA(t){return EKe(t)+"%"}function jK(t){return String(t)}function nW(t){return t}function n9({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function lo(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function W2(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Cu(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function CKe(t){return t==="ArrowUp"||t==="ArrowDown"}function eI(t){return CKe(t)||t==="ArrowLeft"||t==="ArrowRight"}function Jj(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}class xh{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ra,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Jj(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Jj(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Jj(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const ul=gr("txt");class PKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ul(),ul(void 0,"num")),n.arrayPosition&&this.element.classList.add(ul(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(ul("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ul()),this.inputElement.classList.add(ul("i"));const i=e.createElement("div");i.classList.add(ul("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(ao,"svg");o.classList.add(ul("g")),this.knobElement.appendChild(o);const u=e.createElementNS(ao,"path");u.classList.add(ul("gb")),o.appendChild(u),this.guideBodyElem_=u;const d=e.createElementNS(ao,"path");d.classList.add(ul("gh")),o.appendChild(d),this.guideHeadElem_=d;const f=e.createElement("div");f.classList.add(gr("tt")()),this.knobElement.appendChild(f),this.tooltipElem_=f,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(ul(void 0,"drg"));return}this.element.classList.add(ul(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Yi(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class P_{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=cs(null),this.view=new PKe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new xh(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Ui(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=lo(this.props.get("keyScale"),W2(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){lo(this.props.get("keyScale"),W2(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const eH=gr("sld");class TKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(eH()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(eH("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(eH("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Yi(dr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class MKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new TKe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new xh(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(dr(Yi(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=lo(this.props.get("keyScale"),Cu(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){lo(this.props.get("keyScale"),Cu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const tH=gr("sldtxt");class kKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(tH());const r=e.createElement("div");r.classList.add(tH("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(tH("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class U5e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new MKe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new P_(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new kKe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Pu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Tu(null,{max:e.get("max"),min:e.get("min")})}}function AKe(t){return{sliderProps:new hr({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new hr({formatter:cs(t.formatter),keyScale:t.keyScale,pointerScale:cs(t.pointerScale)})}}const IKe={containerUnitSize:"cnt-usz"};function G7e(t){return`--${IKe[t]}`}class W7e{constructor(e,n){const r=gr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function e_(t){return kK(t)}function Rf(t){if(QG(t))return ds(t,e_)}function ih(t,e){if(!t)return;const n=[],r=PK(t,e);r&&n.push(r);const i=TK(t);return i&&n.push(i),new Ig(n)}function $7e(t){if(t==="inline"||t==="popup")return t}function u1(t,e){t.write(e)}const Ak=gr("ckb");class RKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ak()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(Ak("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(Ak("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(Ak("w")),r.appendChild(o);const u=KI(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class DKe{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new RKe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function OKe(t){const e=[],n=UK(t.options);return n&&e.push(n),new Ig(e)}Ts({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=ds(e,r=>({options:r.optional.custom(ZI),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>VK,constraint:t=>OKe(t.params),writer:t=>u1},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&Jb(r,YI);return i?new cg(e,{props:new hr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new DKe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof cg?new BK(t.controller):null}});const o2=gr("col");class LKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(o2()),n.foldable.bindExpandedClass(this.element,o2(void 0,"expanded")),Pl(n.foldable,"completed",l1(this.element,o2(void 0,"cpl")));const r=e.createElement("div");r.classList.add(o2("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(o2("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(o2("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(o2("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}function NKe(t,e,n){const r=Yi(t/255,0,1),i=Yi(e/255,0,1),o=Yi(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),f=u-d;let v=0,x=0;const S=(d+u)/2;return f!==0&&(x=f/(1-Math.abs(u+d-1)),r===u?v=(i-o)/f:i===u?v=2+(o-r)/f:v=4+(r-i)/f,v=v/6+(v<0?1:0)),[v*360,x*100,S*100]}function FKe(t,e,n){const r=(t%360+360)%360,i=Yi(e/100,0,1),o=Yi(n/100,0,1),u=(1-Math.abs(2*o-1))*i,d=u*(1-Math.abs(r/60%2-1)),f=o-u/2;let v,x,S;return r>=0&&r<60?[v,x,S]=[u,d,0]:r>=60&&r<120?[v,x,S]=[d,u,0]:r>=120&&r<180?[v,x,S]=[0,u,d]:r>=180&&r<240?[v,x,S]=[0,d,u]:r>=240&&r<300?[v,x,S]=[d,0,u]:[v,x,S]=[u,0,d],[(v+f)*255,(x+f)*255,(S+f)*255]}function BKe(t,e,n){const r=Yi(t/255,0,1),i=Yi(e/255,0,1),o=Yi(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),f=u-d;let v;f===0?v=0:u===r?v=60*(((i-o)/f%6+6)%6):u===i?v=60*((o-r)/f+2):v=60*((r-i)/f+4);const x=u===0?0:f/u,S=u;return[v,x*100,S*100]}function K7e(t,e,n){const r=O7e(t,360),i=Yi(e/100,0,1),o=Yi(n/100,0,1),u=o*i,d=u*(1-Math.abs(r/60%2-1)),f=o-u;let v,x,S;return r>=0&&r<60?[v,x,S]=[u,d,0]:r>=60&&r<120?[v,x,S]=[d,u,0]:r>=120&&r<180?[v,x,S]=[0,u,d]:r>=180&&r<240?[v,x,S]=[0,d,u]:r>=240&&r<300?[v,x,S]=[d,0,u]:[v,x,S]=[u,0,d],[(v+f)*255,(x+f)*255,(S+f)*255]}function UKe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function zKe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Dc(t){return[t[0],t[1],t[2]]}function JI(t,e){return[t[0],t[1],t[2],e]}const VKe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:UKe,rgb:FKe},hsv:{hsl:zKe,hsv:(t,e,n)=>[t,e,n],rgb:K7e},rgb:{hsl:NKe,hsv:BKe,rgb:(t,e,n)=>[t,e,n]}};function dg(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function jKe(t,e){return t===e?e:O7e(t,e)}function X7e(t,e,n){var r;const i=dg(e,n);return[e==="rgb"?Yi(t[0],0,i[0]):jKe(t[0],i[0]),Yi(t[1],0,i[1]),Yi(t[2],0,i[2]),Yi((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function z5e(t,e,n,r){const i=dg(e,n),o=dg(e,r);return t.map((u,d)=>u/i[d]*o[d])}function q7e(t,e,n){const r=z5e(t,e.mode,e.type,"int"),i=VKe[e.mode][n.mode](...r);return z5e(i,n.mode,"int",n.type)}class Zr{static black(){return new Zr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=X7e(e,n,this.type)}getComponents(e){return JI(q7e(Dc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const df=gr("colp");class HKe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(df()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(df("hsv"));const i=e.createElement("div");i.classList.add(df("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(df("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(df("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const d=e.createElement("div");d.classList.add(df("a"));const f=e.createElement("div");f.classList.add(df("ap")),f.appendChild(this.alphaViews_.palette.element),d.appendChild(f);const v=e.createElement("div");v.classList.add(df("at")),v.appendChild(this.alphaViews_.text.element),d.appendChild(v),this.element.appendChild(d)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function GKe(t){return t==="int"?"int":t==="float"?"float":void 0}function HK(t){return ds(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(GKe)}),expanded:e.optional.boolean,picker:e.optional.custom($7e),readonly:e.optional.constant(!1)}))}function $2(t){return t?.1:1}function Y7e(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class GK{constructor(e,n){this.type="float",this.mode=n,this.comps_=X7e(e,n,this.type)}getComponents(e){return JI(q7e(Dc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const WKe={int:(t,e)=>new Zr(t,e),float:(t,e)=>new GK(t,e)};function WK(t,e,n){return WKe[n](t,e)}function $Ke(t){return t.type==="float"}function KKe(t){return t.type==="int"}function XKe(t){const e=t.getComponents(),n=dg(t.mode,"int");return new Zr([Math.round(dr(e[0],0,1,0,n[0])),Math.round(dr(e[1],0,1,0,n[1])),Math.round(dr(e[2],0,1,0,n[2])),e[3]],t.mode)}function qKe(t){const e=t.getComponents(),n=dg(t.mode,"int");return new GK([dr(e[0],0,n[0],0,1),dr(e[1],0,n[1],0,1),dr(e[2],0,n[2],0,1),e[3]],t.mode)}function Aa(t,e){if(t.type===e)return t;if(KKe(t)&&e==="float")return qKe(t);if($Ke(t)&&e==="int")return XKe(t);throw Pa.shouldNeverHappen()}function YKe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function _l(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const ZKe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function Z7e(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return ZKe[r](n)}function Q7e(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[_l(e[1],255),_l(e[2],255),_l(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function QKe(t){const e=Q7e(t);return e?new Zr(e,"rgb"):null}function J7e(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[_l(e[1],255),_l(e[2],255),_l(e[3],255),_l(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function JKe(t){const e=J7e(t);return e?new Zr(e,"rgb"):null}function eye(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Z7e(e[1]),_l(e[2],100),_l(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function eXe(t){const e=eye(t);return e?new Zr(e,"hsl"):null}function tye(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Z7e(e[1]),_l(e[2],100),_l(e[3],100),_l(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function tXe(t){const e=tye(t);return e?new Zr(e,"hsl"):null}function nye(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function nXe(t){const e=nye(t);return e?new Zr(e,"rgb"):null}function rye(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),dr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),dr(parseInt(n[4],16),0,255,0,1)]:null}function rXe(t){const e=rye(t);return e?new Zr(e,"rgb"):null}function iye(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function V5e(t){return e=>{const n=iye(e);return n?WK(n,"rgb",t):null}}function sye(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function j5e(t){return e=>{const n=sye(e);return n?WK(n,"rgb",t):null}}const iXe=[{parser:nye,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:rye,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Q7e,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:J7e,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:eye,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:tye,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:iye,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:sye,result:{alpha:!0,mode:"rgb",notation:"object"}}];function sXe(t){return iXe.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function oXe(t,e="int"){const n=sXe(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function T_(t){const e=[nXe,rXe,QKe,JKe,eXe,tXe];t==="int"&&e.push(V5e("int"),j5e("int")),t==="float"&&e.push(V5e("float"),j5e("float"));const n=SKe(e);return r=>{const i=n(r);return i?Aa(i,t):null}}function aXe(t){const e=T_("int");if(typeof t!="string")return Zr.black();const n=e(t);return n??Zr.black()}function oye(t){const e=Yi(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function $K(t,e="#"){const n=Dc(t.getComponents("rgb")).map(oye).join("");return`${e}${n}`}function KK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(oye).join("");return`${e}${r}`}function aye(t){const e=Ro(0),n=Aa(t,"int");return`rgb(${Dc(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function nA(t){const e=Ro(2),n=Ro(0);return`rgba(${Aa(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function lXe(t){const e=[Ro(0),JA,JA],n=Aa(t,"int");return`hsl(${Dc(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function uXe(t){const e=[Ro(0),JA,JA,Ro(2)];return`hsla(${Aa(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function lye(t,e){const n=Ro(e==="float"?2:0),r=["r","g","b"],i=Aa(t,e);return`{${Dc(i.getComponents("rgb")).map((u,d)=>`${r[d]}: ${n(u)}`).join(", ")}}`}function cXe(t){return e=>lye(e,t)}function uye(t,e){const n=Ro(2),r=Ro(e==="float"?2:0),i=["r","g","b","a"];return`{${Aa(t,e).getComponents("rgb").map((d,f)=>{const v=f===3?n:r;return`${i[f]}: ${v(d)}`}).join(", ")}}`}function dXe(t){return e=>uye(e,t)}const hXe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:$K},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:KK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:aye},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:nA},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:lXe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:uXe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:cXe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:dXe(e)}],[])];function cye(t){return hXe.reduce((e,n)=>e||(YKe(n.format,t)?n.stringifier:null),null)}const Fy=gr("apl");class pXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Fy()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Fy("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Fy("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(Fy("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(Fy("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Zr([n[0],n[1],n[2],0],"rgb"),i=new Zr([n[0],n[1],n[2],255],"rgb"),o=["to right",nA(r),nA(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=nA(e);const u=dr(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}}class fXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new pXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new xh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Zr([o,u,d,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=lo($2(!0),Cu(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Zr([i,o,u,d+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){lo($2(!0),Cu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const c4=gr("coltxt");function mXe(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}class gXe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(c4()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(c4("m")),this.modeElem_=mXe(e),this.modeElem_.classList.add(c4("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(c4("mm")),i.appendChild(KI(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(c4("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),Sl(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){F7e(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(c4("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function vXe(t){return Ro(t==="float"?2:0)}function yXe(t,e,n){const r=dg(t,e)[n];return new E_({min:0,max:r})}function bXe(t,e,n){return new P_(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:hr.fromObject({formatter:vXe(e.colorType),keyScale:$2(!1),pointerScale:e.colorType==="float"?.01:1}),value:cs(0,{constraint:yXe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function _Xe(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Eu,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=bXe(t,n,r);return n9({primary:e.value,secondary:i.value,forward(o){return Aa(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const d=e.colorMode,v=Aa(o,e.colorType).getComponents(d);v[r]=u;const x=WK(JI(Dc(v),v[3]),d,e.colorType);return Aa(x,"int")}}),i})}function wXe(t,e){const n=new QI(t,{parser:T_("int"),props:hr.fromObject({formatter:$K}),value:cs(Zr.black()),viewProps:e.viewProps});return n9({primary:e.value,secondary:n.value,forward:r=>new Zr(Dc(r.getComponents()),r.mode),backward:(r,i)=>new Zr(JI(Dc(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function xXe(t){return t!=="hex"}class SXe{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=cs(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new gXe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return xXe(n)?_Xe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):wXe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const nH=gr("hpl");class EXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(nH()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(nH("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(nH("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=aye(new Zr([n,100,100],"hsv"));const r=dr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class CXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new EXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new xh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=dr(Yi(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Zr([r,o,u,d],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=lo($2(!1),Cu(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Zr([i+n,o,u,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){lo($2(!1),Cu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const rH=gr("svp"),H5e=64;class PXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(rH()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=H5e,r.width=H5e,r.classList.add(rH("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(rH("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=N$e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),d=u.data;for(let x=0;x<o;x++)for(let S=0;S<i;S++){const M=dr(S,0,i,0,100),D=dr(x,0,o,100,0),G=K7e(r[0],M,D),B=(x*i+S)*4;d[B]=G[0],d[B+1]=G[1],d[B+2]=G[2],d[B+3]=255}e.putImageData(u,0,0);const f=dr(r[1],0,100,0,100);this.markerElem_.style.left=`${f}%`;const v=dr(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}}class TXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new PXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new xh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=dr(e.point.x,0,e.bounds.width,0,100),i=dr(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Zr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){eI(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=$2(!1),d=lo(u,Cu(e)),f=lo(u,W2(e));d===0&&f===0||this.value.setRawValue(new Zr([n,r+d,i+f,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=$2(!1),r=lo(n,Cu(e)),i=lo(n,W2(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class MXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new CXe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new TXe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new fXe(e,{value:this.value,viewProps:this.viewProps}),text:new P_(e,{parser:Eu,props:hr.fromObject({pointerScale:.01,keyScale:.1,formatter:Ro(2)}),value:cs(0,{constraint:new E_({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&n9({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Zr(o,r.mode)}}),this.textsC_=new SXe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new HKe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const iH=gr("colsw");class kXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(iH()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(iH("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(iH("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=KK(e)}onValueChange_(){this.update_()}}class AXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new kXe(e,{value:this.value,viewProps:this.viewProps})}}class XK{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ag.create(n.expanded),this.swatchC_=new AXe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new QI(e,{parser:n.parser,props:hr.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new LKe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new zK(e,{viewProps:this.viewProps}):null;const i=new MXe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),n9({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qI(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=DK(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!$I(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function IXe(t){return Dc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function RXe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function DXe(t){return new Zr([t>>16&255,t>>8&255,t&255],"rgb")}function OXe(t){return new Zr([t>>24&255,t>>16&255,t>>8&255,dr(t&255,0,255,0,1)],"rgb")}function LXe(t){return typeof t!="number"?Zr.black():DXe(t)}function NXe(t){return typeof t!="number"?Zr.black():OXe(t)}function rA(t,e){return typeof t!="object"||Ui(t)?!1:e in t&&typeof t[e]=="number"}function dye(t){return rA(t,"r")&&rA(t,"g")&&rA(t,"b")}function hye(t){return dye(t)&&rA(t,"a")}function pye(t){return dye(t)}function qK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function G5e(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function FXe(t){const e=cye(t);return e?(n,r)=>{u1(n,e(r))}:null}function BXe(t){const e=t?RXe:IXe;return(n,r)=>{u1(n,e(r))}}function UXe(t,e,n){const i=Aa(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function zXe(t,e,n){const i=Aa(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function VXe(t,e){return(n,r)=>{t?UXe(n,r,e):zXe(n,r,e)}}function jXe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function HXe(t){return t?e=>KK(e,"0x"):e=>$K(e,"0x")}function GXe(t){return"color"in t||t.view==="color"}Ts({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!GXe(e))return null;const n=HK(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:jXe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?NXe:LXe,equals:qK,writer:t=>BXe(t.params.supportsAlpha)},controller:t=>{var e,n;return new XK(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:HXe(t.params.supportsAlpha),parser:T_("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function WXe(t,e){if(!pye(t))return Aa(Zr.black(),e);if(e==="int"){const n=G5e(t);return new Zr(n,"rgb")}if(e==="float"){const n=G5e(t);return new GK(n,"rgb")}return Aa(Zr.black(),"int")}function $Xe(t){return hye(t)}function KXe(t){return e=>{const n=WXe(e,t);return Aa(n,"int")}}function XXe(t,e){return n=>t?uye(n,e):lye(n,e)}Ts({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!pye(t))return null;const r=HK(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=Y7e(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>KXe(t.params.colorType),equals:qK,writer:t=>VXe($Xe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=hye(t.initialValue);return new XK(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:XXe(r,t.params.colorType),parser:T_("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});Ts({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=oXe(t,Y7e(e));if(!n)return null;const r=cye(n);if(!r)return null;const i=HK(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>aXe,equals:qK,writer:t=>{const e=FXe(t.params.format);if(!e)throw Pa.notBindable();return e}},controller:t=>{var e,n;return new XK(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:T_("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class eR{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}}const W5e=gr("pndtxt");class qXe{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(W5e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(W5e("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function YXe(t,e,n){return new P_(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:cs(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Rg{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>YXe(e,n,i)),this.acs_.forEach((r,i)=>{n9({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const d=n.assembly.toComponents(o);return d[i]=u,n.assembly.fromComponents(d)}})}),this.view=new qXe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class ZXe extends IK{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function QXe(t,e){const n=[],r=PK(t,e);r&&n.push(r);const i=TK(t);i&&n.push(i);const o=UK(t.options);return o&&n.push(o),new Ig(n)}Ts({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=ds(e,r=>Object.assign(Object.assign({},kK(r)),{options:r.optional.custom(ZI),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>CK,constraint:t=>QXe(t.params,t.initialValue),writer:t=>u1},controller:t=>{const e=t.value,n=t.constraint,r=n&&Jb(n,YI);if(r)return new cg(t.document,{props:new hr({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=MK(t.params,e.rawValue),o=n&&Jb(n,E_);return o?new U5e(t.document,Object.assign(Object.assign({},AKe(Object.assign(Object.assign({},i),{keyScale:cs(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:Eu,value:e,viewProps:t.viewProps})):new P_(t.document,{parser:Eu,props:hr.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof U5e?new ZXe(t.controller):t.controller.valueController instanceof cg?new BK(t.controller):null}});class $f{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Ui(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const fye={toComponents:t=>t.getComponents(),fromComponents:t=>new $f(...t)},d4=gr("p2d");class JXe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(d4()),n.viewProps.bindClassModifiers(this.element),Sl(n.expanded,l1(this.element,d4(void 0,"expanded")));const r=e.createElement("div");r.classList.add(d4("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(d4("b")),i.appendChild(KI(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(d4("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(d4("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}const hf=gr("p2dp");class eqe{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(hf()),n.layout==="popup"&&this.element.classList.add(hf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(hf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(ao,"svg");i.classList.add(hf("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(ao,"line");o.classList.add(hf("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(ao,"line");u.classList.add(hf("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const d=e.createElementNS(ao,"line");d.classList.add(hf("l")),d.setAttributeNS(null,"x1","50%"),d.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(d),this.lineElem_=d;const f=e.createElement("div");f.classList.add(hf("m")),this.padElement.appendChild(f),this.markerElem_=f,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=dr(e,-r,+r,0,100),o=dr(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function $5e(t,e,n){return[lo(e[0],Cu(t)),lo(e[1],W2(t))*(n?1:-1)]}class tqe{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new eqe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new xh(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=dr(e.point.x,0,e.bounds.width,-r,+r),o=dr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new $f(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){eI(e.key)&&e.preventDefault();const[n,r]=$5e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new $f(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=$5e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class nqe{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ag.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new zK(e,{viewProps:this.viewProps}):null;const o=new tqe(e,{layout:n.pickerLayout,props:new hr({invertsY:cs(n.invertsY),max:cs(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new Rg(e,{assembly:fye,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new JXe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),n9({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qI(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=DK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!$I(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function rqe(t){return $f.isObject(t)?new $f(t.x,t.y):new $f}function iqe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function sqe(t,e){return new eR({assembly:fye,components:[ih(Object.assign(Object.assign({},t),t.x),e.x),ih(Object.assign(Object.assign({},t),t.y),e.y)]})}function K5e(t,e){var n,r;if(!Ui(t.min)||!Ui(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=L7e(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function oqe(t,e){var n,r;const i=K5e(G2(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=K5e(G2(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function aqe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Ts({id:"input-point2d",type:"input",accept:(t,e)=>{if(!$f.isObject(t))return null;const n=ds(e,r=>Object.assign(Object.assign({},e_(r)),{expanded:r.optional.boolean,picker:r.optional.custom($7e),readonly:r.optional.constant(!1),x:r.optional.custom(Rf),y:r.optional.object(Object.assign(Object.assign({},e_(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>rqe,constraint:t=>sqe(t.params,t.initialValue),equals:$f.equals,writer:()=>iqe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new nqe(r,{axes:i.rawValue.getComponents().map((d,f)=>{var v;return AK({constraint:o.components[f],initialValue:d,params:G2(t.params,(v=u[f])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:aqe(t.params),max:oqe(t.params,i.rawValue),parser:Eu,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class q4{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ui(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const mye={toComponents:t=>t.getComponents(),fromComponents:t=>new q4(...t)};function lqe(t){return q4.isObject(t)?new q4(t.x,t.y,t.z):new q4}function uqe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function cqe(t,e){return new eR({assembly:mye,components:[ih(Object.assign(Object.assign({},t),t.x),e.x),ih(Object.assign(Object.assign({},t),t.y),e.y),ih(Object.assign(Object.assign({},t),t.z),e.z)]})}Ts({id:"input-point3d",type:"input",accept:(t,e)=>{if(!q4.isObject(t))return null;const n=ds(e,r=>Object.assign(Object.assign({},e_(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Rf),y:r.optional.custom(Rf),z:r.optional.custom(Rf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>lqe,constraint:t=>cqe(t.params,t.initialValue),equals:q4.equals,writer:t=>uqe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new Rg(t.document,{assembly:mye,axes:e.rawValue.getComponents().map((i,o)=>{var u;return AK({constraint:n.components[o],initialValue:i,params:G2(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:Eu,value:e,viewProps:t.viewProps})}});class Y4{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ui(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const gye={toComponents:t=>t.getComponents(),fromComponents:t=>new Y4(...t)};function dqe(t){return Y4.isObject(t)?new Y4(t.x,t.y,t.z,t.w):new Y4}function hqe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function pqe(t,e){return new eR({assembly:gye,components:[ih(Object.assign(Object.assign({},t),t.x),e.x),ih(Object.assign(Object.assign({},t),t.y),e.y),ih(Object.assign(Object.assign({},t),t.z),e.z),ih(Object.assign(Object.assign({},t),t.w),e.w)]})}Ts({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Y4.isObject(t))return null;const n=ds(e,r=>Object.assign(Object.assign({},e_(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Rf),x:r.optional.custom(Rf),y:r.optional.custom(Rf),z:r.optional.custom(Rf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>dqe,constraint:t=>pqe(t.params,t.initialValue),equals:Y4.equals,writer:t=>hqe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new Rg(t.document,{assembly:gye,axes:e.rawValue.getComponents().map((i,o)=>{var u;return AK({constraint:n.components[o],initialValue:i,params:G2(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:Eu,value:e,viewProps:t.viewProps})}});function fqe(t){const e=[],n=UK(t.options);return n&&e.push(n),new Ig(e)}Ts({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=ds(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(ZI)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>jK,constraint:t=>fqe(t.params),writer:t=>u1},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&Jb(r,YI);return i?new cg(e,{props:new hr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new QI(e,{parser:o=>o,props:hr.fromObject({formatter:nW}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof cg?new BK(t.controller):null}});const M_={monitor:{defaultInterval:200,defaultRows:3}},X5e=gr("mll");class mqe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(X5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(X5e("i")),r.style.height=`calc(var(${G7e("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class YK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new mqe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const q5e=gr("sgl");class gqe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(q5e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(q5e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class ZK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new gqe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Ts({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=ds(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>VK},controller:t=>{var e;return t.value.rawValue.length===1?new ZK(t.document,{formatter:B5e,value:t.value,viewProps:t.viewProps}):new YK(t.document,{formatter:B5e,rows:(e=t.params.rows)!==null&&e!==void 0?e:M_.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class vqe extends IK{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const pf=gr("grl");class yqe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(pf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(ao,"svg");r.classList.add(pf("g")),r.style.height=`calc(var(${G7e("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(ao,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(pf("t"),gr("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,S)=>{if(x===void 0)return;const M=dr(S,0,n,0,e.width),D=dr(x,r,i,e.height,0);o.push([M,D].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,d=this.value.rawValue[this.cursor_.rawValue];if(d===void 0){u.classList.remove(pf("t","a"));return}const f=dr(this.cursor_.rawValue,0,n,0,e.width),v=dr(d,r,i,e.height,0);u.style.left=`${f}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(d)}`,u.classList.contains(pf("t","a"))||(u.classList.add(pf("t","a"),pf("t","in")),ZA(u),u.classList.remove(pf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class QK{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=cs(-1),this.view=new yqe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!$I(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new xh(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Pu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Tu(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(dr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(dr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function rW(t){return Ui(t.format)?Ro(2):t.format}function bqe(t){var e;return t.value.rawValue.length===1?new ZK(t.document,{formatter:rW(t.params),value:t.value,viewProps:t.viewProps}):new YK(t.document,{formatter:rW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:M_.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function _qe(t){var e,n,r;return new QK(t.document,{formatter:rW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:M_.monitor.defaultRows,props:hr.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function Y5e(t){return t.view==="graph"}Ts({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=ds(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Y5e(t)?64:1,reader:t=>CK},controller:t=>Y5e(t.params)?_qe(t):bqe(t),api:t=>t.controller.valueController instanceof QK?new vqe(t.controller):null});Ts({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=ds(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>jK},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new YK(t.document,{formatter:nW,rows:(e=t.params.rows)!==null&&e!==void 0?e:M_.monitor.defaultRows,value:n,viewProps:t.viewProps}):new ZK(t.document,{formatter:nW,value:n,viewProps:t.viewProps})}});class vye{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new kg(this))}),this}}class wqe extends kg{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class yye extends t9{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new ra;const n=this.controller.valueController;n.cellControllers.forEach((r,i)=>{const o=new vye(r);this.cellToApiMap_.set(r,o),r.emitter.on("click",()=>{const u=i%n.size[0],d=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new wqe(this,o,[u,d])})})})}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i.event)}),this}}class bye{constructor(e,n){this.size=n.size;const[r,i]=this.size,o=[];for(let u=0;u<i;u++)for(let d=0;d<r;d++){const f=new z7e(e,{props:hr.fromObject(Object.assign({},n.cellConfig(d,u))),viewProps:_h.create()});o.push(f)}this.cellCs_=o,this.viewProps=_h.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(u=>{u.viewProps.set("disposed",!0)})}),this.view=new W7e(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}}class Z5e extends C_{constructor(e,n){const r=n.valueController,i=new XI(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}const xqe=Ts({id:"buttongrid",type:"blade",accept(t){const e=ds(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Z5e(t.document,{blade:t.blade,labelProps:hr.fromObject({label:t.params.label}),valueController:new bye(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof Z5e?new yye(t.controller):null}});class _ye extends t9{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,i=>{r(new WI(this,i.rawValue,i.options.last))}),this}}function cl(t,e,n){return t*(1-n)+e*n}const Sqe=20,Eqe=.001,sH=100;function Cqe(t,e){let n=.25,r=.5,i=-1;for(let o=0;o<Sqe;o++){const[u,d]=t.curve(r);if(r+=n*(u<e?1:-1),i=d,n*=.5,Math.abs(e-u)<Eqe)break}return i}class e1{constructor(e=0,n=0,r=1,i=1){this.cache_=[],this.comps_=[e,n,r,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return Ui(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=cl(0,this.x1,e),r=cl(0,this.y1,e),i=cl(this.x1,this.x2,e),o=cl(this.y1,this.y2,e),u=cl(this.x2,1,e),d=cl(this.y2,1,e),f=cl(n,i,e),v=cl(r,o,e),x=cl(i,u,e),S=cl(o,d,e);return[cl(f,x,e),cl(v,S,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<sH;r++)n.push(Cqe(this,dr(r,0,sH-1,0,1)));this.cache_=n}return this.cache_[Math.round(dr(Yi(e,0,1),0,1,0,sH-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const JK={toComponents:t=>t.toObject(),fromComponents:t=>new e1(...t)};function Pqe(t){const e=Ro(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const Q5e=[0,.5,.5,1];function Tqe(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new e1(...Q5e);const n=[e[1],e[2],e[3],e[4]].reduce((r,i)=>{if(!r)return null;const o=Number(i);return isNaN(o)?null:[...r,o]},[]);return new e1(...n??Q5e)}const a2=gr("cbz");class wye{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(a2()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,a2(void 0,"expanded")),Pl(n.foldable,"completed",l1(this.element,a2(void 0,"cpl")));const r=e.createElement("div");r.classList.add(a2("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(a2("b")),n.viewProps.bindDisabled(i);const o=e.createElementNS(ao,"svg");o.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(o),r.appendChild(i),this.buttonElement=i;const u=e.createElement("div");if(u.classList.add(a2("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const d=e.createElement("div");d.classList.add(a2("p")),this.element.appendChild(d),this.pickerElement=d}else this.pickerElement=null}}const oH=gr("cbzp");class xye{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(oH()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(oH("g")),this.element.appendChild(r),this.graphElement=r;const i=e.createElement("div");i.classList.add(oH("t")),this.element.appendChild(i),this.textElement=i}}function Sye(t,e){const n=new MutationObserver(i=>{for(const o of i)o.type==="childList"&&o.addedNodes.forEach(u=>{u.contains(u)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const ff=gr("cbzg");function Mqe(t,e){return n=>e(t(n))}class Eye{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ff()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(ff("p")),this.element.appendChild(r),this.previewElement=r;const i=e.createElementNS(ao,"svg");i.classList.add(ff("g")),this.element.appendChild(i),this.svgElem_=i;const o=e.createElementNS(ao,"path");o.classList.add(ff("u")),this.svgElem_.appendChild(o),this.guideElem_=o;const u=e.createElementNS(ao,"polyline");u.classList.add(ff("l")),this.svgElem_.appendChild(u),this.lineElem_=u,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(d=>{d.classList.add(ff("h")),this.element.appendChild(d)}),this.vectorElems_=[e.createElementNS(ao,"line"),e.createElementNS(ao,"line")],this.vectorElems_.forEach(d=>{d.classList.add(ff("v")),this.svgElem_.appendChild(d)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((d,f)=>{Sl(this.sel_,Mqe(v=>v===f,l1(d,ff("h","sel"))))}),Sye(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:dr(e,0,1,0,i),y:dr(n,0,1,o-u,u)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:Yi(dr(e,0,i,0,1),0,1),y:dr(n,o-u,u,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(o=>{const u=this.valueToPosition(0,o),d=this.valueToPosition(1,o);return[`M ${u.x},${u.y}`,`L ${d.x},${d.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const o=this.valueToPosition(...e.curve(r));if(n.push([o.x,o.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=e.toObject();[0,1].forEach(o=>{const u=this.valueToPosition(o,o),d=this.valueToPosition(i[o*2],i[o*2+1]),f=this.vectorElems_[o];f.setAttributeNS(null,"x1",String(u.x)),f.setAttributeNS(null,"y1",String(u.y)),f.setAttributeNS(null,"x2",String(d.x)),f.setAttributeNS(null,"y2",String(d.y));const v=this.handleElems_[o];v.style.left=`${d.x}px`,v.style.top=`${d.y}px`})}onValueChange_(){this.refresh()}}const J5e=24,e4e=400,t4e=1e3,h4=gr("cbzprv");class Cye{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(h4()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(ao,"svg");r.classList.add(h4("g")),this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(ao,"path");i.classList.add(h4("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const o=e.createElement("div");o.classList.add(h4("m")),this.element.appendChild(o),this.markerElem_=o,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),Sye(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(h4("m","a")),this.startTime_=new Date().getTime()+e4e,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(h4("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Yi(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,i=[],o=this.value_.rawValue;for(let u=0;u<J5e;u++){const d=dr(u,0,J5e-1,0,1),f=dr(o.y(d),0,1,0,n);i.push(`M ${f},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",i.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/t4e;this.updateMarker_(n),e>t4e+e4e&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function iW(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}function kqe(t,e,n,r){const i=iW(t,e,n,r),o=Math.atan2(r-e,n-t),u=Math.round(o/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(u)*i,y:e+Math.sin(u)*i}}class Pye{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=cs(0),this.viewProps=n.viewProps,this.view=new Eye(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Cye(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new xh(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const i=this.sel_.rawValue,o=this.value.rawValue.toObject(),u=this.view.positionToValue(e.x,e.y),d=n?kqe(i,i,u.x,u.y):u;o[i*2]=d.x,o[i*2+1]=d.y,this.value.setRawValue(new e1(...o),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,i=this.view.valueToPosition(r.x1,r.y1),o=iW(n.point.x,n.point.y,i.x,i.y),u=this.view.valueToPosition(r.x2,r.y2),d=iW(n.point.x,n.point.y,u.x,u.y);this.sel_.rawValue=o<=d?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){eI(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;r[n*2]+=lo(i,Cu(e)),r[n*2+1]+=lo(i,W2(e)),this.value.setRawValue(new e1(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){eI(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=lo(n,Cu(e)),i=lo(n,W2(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Tye{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new xye(e,{viewProps:this.viewProps}),this.gc_=new Pye(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new xK({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new Rg(e,{assembly:JK,axes:[r,i,r,i],parser:Eu,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class sW{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ag.create(n.expanded),this.view=new wye(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new QI(e,{parser:Tqe,props:hr.fromObject({formatter:Pqe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new zK(e,{viewProps:this.viewProps}):null;const r=new Tye(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Sl(this.popC_.shows,i=>{i&&r.refresh()}),n9({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qI(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=DK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!$I(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function Aqe(){return new eR({assembly:JK,components:[0,1,2,3].map(t=>t%2===0?new xK({min:0,max:1}):void 0)})}const Iqe=Ts({id:"cubicbezier",type:"blade",accept(t){const e=ds(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new e1(...t.params.value),i=cs(r,{constraint:Aqe(),equals:e1.equals}),o=new sW(t.document,{axis:{textProps:hr.fromObject({keyScale:.1,pointerScale:.01,formatter:Ro(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps});return new QA(t.document,{blade:t.blade,props:hr.fromObject({label:t.params.label}),value:i,valueController:o})},api(t){return!(t.controller instanceof QA)||!(t.controller.valueController instanceof sW)?null:new _ye(t.controller)}});class Mye extends t9{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const n4e=20;class kye{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=n4e)return;const e=this.timestamps_.length-n4e;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const By=gr("fps");class Aye{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(By()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(By("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(By("l")),this.element.appendChild(r);const i=e.createElement("span");i.classList.add(By("v")),i.textContent="--",r.appendChild(i),this.valueElement=i;const o=e.createElement("span");o.classList.add(By("u")),o.textContent="FPS",r.appendChild(o)}}class Iye{constructor(e,n){this.stopwatch_=new kye,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new Aye(e,{viewProps:this.viewProps}),this.graphC_=new QK(e,{formatter:Ro(0),props:hr.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=G$e(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class r4e extends C_{constructor(e,n){const r=n.valueController,i=new XI(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}function Rqe(t,e){return e===0?new vKe:new yKe(t,e??M_.monitor.defaultInterval)}const Dqe=Ts({id:"fpsgraph",type:"blade",accept(t){const e=ds(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,i;const o=(e=t.params.interval)!==null&&e!==void 0?e:500;return new r4e(t.document,{blade:t.blade,labelProps:hr.fromObject({label:t.params.label}),valueController:new Iye(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(i=t.params.min)!==null&&i!==void 0?i:0,ticker:Rqe(t.document,o),value:cs(j$e(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof r4e?new Mye(t.controller):null}});class S0{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const eX={fromComponents:t=>new S0(t[0],t[1]),toComponents:t=>[t.min,t.max]};class tX{constructor(e){this.edge=e}constrain(e){var n,r,i,o,u,d,f,v;if(e.min<=e.max)return new S0((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(o=(i=this.edge)===null||i===void 0?void 0:i.constrain(e.max))!==null&&o!==void 0?o:e.max);const x=(e.min+e.max)/2;return new S0((d=(u=this.edge)===null||u===void 0?void 0:u.constrain(x))!==null&&d!==void 0?d:x,(v=(f=this.edge)===null||f===void 0?void 0:f.constrain(x))!==null&&v!==void 0?v:x)}}const aH=gr("rsltxt");class Rye{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(aH());const r=e.createElement("div");r.classList.add(aH("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(aH("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const l2=gr("rsl");class Dye{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(l2()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(l2("t")),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(l2("b")),r.appendChild(i),this.barElement=i;const o=["min","max"].map(u=>{const d=e.createElement("div");return d.classList.add(l2("k"),l2("k",u)),r.appendChild(d),d});this.knobElements=[o[0],o[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Yi(dr(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(l2(void 0,"zero")):this.element.classList.remove(l2(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,i)=>{r.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Oye{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new Dye(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new xh(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),i=this.sliderProps.get("max");return dr(n,0,1,r,i)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,i=this.sliderProps.get("min"),o=this.sliderProps.get("max"),u=dr(r.min,i,o,0,1),d=dr(r.max,i,o,0,1);Math.abs(d-n)<=.025?this.grabbing_="max":Math.abs(u-n)<=.025?this.grabbing_="min":n>=u&&n<=d?(this.grabbing_="length",this.grabOffset_=dr(n-u,0,1,0,o-i)):n<u?(this.grabbing_="min",this.onPointerMove_(e)):n>d&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const i=this.sliderProps.get("min"),o=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new S0(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new S0(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const u=this.value.rawValue.length;let d=r-this.grabOffset_,f=d+u;d<i?(d=i,f=i+u):f>o&&(d=o-u,f=o),this.value.setRawValue(new S0(d,f),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Lye{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new Oye(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new Rg(e,{assembly:eX,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new Rye(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Oqe(t){return S0.isObject(t)?new S0(t.min,t.max):new S0(0,0)}function Lqe(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function Nqe(t){const e=[],n=TK(t);n&&e.push(n);const r=PK(t);return r&&e.push(r),new tX(new Ig(e))}const Fqe=Ts({id:"input-interval",type:"input",accept:(t,e)=>{if(!S0.isObject(t))return null;const n=ds(e,r=>Object.assign(Object.assign({},kK(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new S0(t.min,t.max),params:n}:null},binding:{reader:t=>Oqe,constraint:t=>Nqe(t.params),equals:S0.equals,writer:t=>Lqe},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof tX))throw Pa.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,i=hr.fromObject(MK(t.params,r)),o=n.edge&&Jb(n.edge,E_);if(o)return new Lye(t.document,{constraint:n.edge,parser:Eu,sliderProps:new hr({keyScale:i.value("keyScale"),max:o.values.value("max"),min:o.values.value("min")}),textProps:i,value:e,viewProps:t.viewProps});const u={constraint:n.edge,textProps:i};return new Rg(t.document,{assembly:eX,axes:[u,u],parser:Eu,value:e,viewProps:t.viewProps})}});class Nye{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class Fye extends WI{constructor(e,n,r,i,o){super(e,i,o),this.cell=n,this.index=r}}class Bye extends t9{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const i=new Nye(r);this.cellToApiMap_.set(r,i)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,i=>{const o=this.controller.valueController,u=o.findCellByValue(i.rawValue);if(!u)return;const d=this.cellToApiMap_.get(u);if(!d)return;const f=o.cellControllers.indexOf(u);r(new Fye(this,d,[f%o.size[0],Math.floor(f/o.size[0])],i.rawValue))})}}const Uy=gr("rad");class Uye{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Uy()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(Uy("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(Uy("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),r.appendChild(i),this.inputElement=i;const o=e.createElement("div");o.classList.add(Uy("b")),r.appendChild(o);const u=e.createElement("div");u.classList.add(Uy("t")),o.appendChild(u),Pl(n.props,"title",d=>{u.textContent=d})}}class zye{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new Uye(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class tI{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,i]=this.size;for(let o=0;o<i;o++)for(let u=0;u<r;u++){const d=new zye(e,{name:n.groupName,props:hr.fromObject(Object.assign({},n.cellConfig(u,o))),viewProps:_h.create()});this.cellCs_.push(d),this.cellValues_.push(n.cellConfig(u,o).value)}this.value=n.value,Sl(this.value,o=>{const u=this.findCellByValue(o);u&&(u.view.inputElement.checked=!0)}),this.viewProps=_h.create(),this.view=new W7e(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(o=>{o.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(i=>i.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const Bqe=function(){return Ts({id:"radiogrid",type:"blade",accept(t){const e=ds(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=cs(t.params.value);return new QA(t.document,{blade:t.blade,props:hr.fromObject({label:t.params.label}),value:e,valueController:new tI(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof QA)||!(t.controller.valueController instanceof tI)?null:new Bye(t.controller)}})}();function nX(t){return Ts({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=ds(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new tI(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const Uqe=nX({isType:t=>typeof t=="number",binding:{reader:t=>CK,writer:t=>u1}}),zqe=nX({isType:t=>typeof t=="string",binding:{reader:t=>jK,writer:t=>u1}}),Vqe=nX({isType:t=>typeof t=="boolean",binding:{reader:t=>VK,writer:t=>u1}}),jqe="essentials",Hqe='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',Gqe=[xqe,Iqe,Dqe,Fqe,Bqe,Vqe,Uqe,zqe],Wqe=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:vye,ButtonGridApi:yye,ButtonGridController:bye,CubicBezier:e1,CubicBezierApi:_ye,CubicBezierAssembly:JK,CubicBezierController:sW,CubicBezierGraphController:Pye,CubicBezierGraphView:Eye,CubicBezierPickerController:Tye,CubicBezierPickerView:xye,CubicBezierPreviewView:Cye,CubicBezierView:wye,FpsGraphBladeApi:Mye,FpsGraphController:Iye,FpsView:Aye,Fpswatch:kye,Interval:S0,IntervalAssembly:eX,IntervalConstraint:tX,RadioCellApi:Nye,RadioController:zye,RadioGridApi:Bye,RadioGridController:tI,RadioView:Uye,RangeSliderController:Oye,RangeSliderTextController:Lye,RangeSliderTextView:Rye,RangeSliderView:Dye,TpRadioGridChangeEvent:Fye,css:Hqe,id:jqe,plugins:Gqe},Symbol.toStringTag,{value:"Module"}));class $qe extends UI{constructor(n){super(n);yr(this,"bindCBs");yr(this,"buttonCBs");yr(this,"pane");yr(this,"appCallbacks",0);yr(this,"editorCallbacks",0);yr(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new $We({title:"GUI"}),this.pane.registerPlugin(Wqe)}dispose(){var n;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.pane)==null||n.dispose(),this.pane=void 0)}addFolder(n,r=void 0,i=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:i}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,i,o=void 0){const u=this.bindID,d=i.onChange!==void 0?i.onChange:K$;this.bindCBs.set(u,d),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.pane).addBinding(n,r,i).on("change",v=>{this.app.send({event:"updateBind",target:"app",data:{id:u,value:v.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:u,name:r,params:i,parent:o}}),this.appCallbacks++)}triggerBind(n,r){const i=this.bindCBs.get(n);i!==void 0?i(r):console.warn(`No callback for: ${n}`,r)}button(n,r,i=void 0){const o=this.bindID;this.buttonCBs.set(o,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:o}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:o,name:n,callback:r,parent:i}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.pane)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}handleApp(n,r,i){const o=r;switch(i.event){case"addFolder":o.addFolder(i.data.name,i.data.params,i.data.parent);break;case"bindObject":o.bind(i.data.name,i.data.params,i.data.parent);break;case"updateBind":o.triggerBind(i.data.id,i.data.value);break;case"addButton":o.button(i.data.name,i.data.callback,i.data.parent);break;case"clickButton":o.triggerButton(i.data.id);break}}}const Kqe=!0,Ar=new fVe("ws://localhost:8080",Kqe),_f=new lg(Ar),qy=new PVe(Ar);Ar.addComponent("theatre",_f);Ar.addComponent("three",qy);{_f.studio=F8e;const t=new gVe(Ar),e=new $qe(Ar);Ar.addComponent("components",t),Ar.addComponent("debug",e);const n=[{remote:_f,callback:_f.handleApp},{remote:qy,callback:qy.handleApp},{remote:t,callback:t.handleApp},{remote:e,callback:e.handleApp}],r=[{remote:_f,callback:_f.handleEditor},{remote:qy,callback:qy.handleEditor}];mVe(Ar,n,r),_f.handleEditorApp(Ar,_f)}const t_=new k0,n_={LOAD_COMPLETE:"Events::loadComplete"};function Xqe(t){return Ke.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[Ke.jsx("div",{className:"header",children:t.header}),t.children,Ke.jsx("div",{className:"footer",children:t.footer})]})}function Vye(t){return t.title.search("<")>-1?Ke.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):Ke.jsx("button",{children:t.title})}const rX=Et.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),tR=Et.createContext({}),iX=Et.createContext(null),nR=typeof document<"u",oW=nR?Et.useLayoutEffect:Et.useEffect,jye=Et.createContext({strict:!1});function qqe(t,e,n,r){const{visualElement:i}=Et.useContext(tR),o=Et.useContext(jye),u=Et.useContext(iX),d=Et.useContext(rX).reducedMotion,f=Et.useRef();r=r||o.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:i,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const v=f.current;return Et.useInsertionEffect(()=>{v&&v.update(n,u)}),oW(()=>{v&&v.render()}),Et.useEffect(()=>{v&&v.updateFeatures()}),(window.HandoffAppearAnimations?oW:Et.useEffect)(()=>{v&&v.animationState&&v.animationState.animateChanges()}),v}function L4(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Yqe(t,e,n){return Et.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):L4(n)&&(n.current=r))},[e])}function r_(t){return typeof t=="string"||Array.isArray(t)}function rR(t){return typeof t=="object"&&typeof t.start=="function"}const sX=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oX=["initial",...sX];function iR(t){return rR(t.animate)||oX.some(e=>r_(t[e]))}function Hye(t){return!!(iR(t)||t.variants)}function Zqe(t,e){if(iR(t)){const{initial:n,animate:r}=t;return{initial:n===!1||r_(n)?n:void 0,animate:r_(r)?r:void 0}}return t.inherit!==!1?e:{}}function Qqe(t){const{initial:e,animate:n}=Zqe(t,Et.useContext(tR));return Et.useMemo(()=>({initial:e,animate:n}),[i4e(e),i4e(n)])}function i4e(t){return Array.isArray(t)?t.join(" "):t}const s4e={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},i_={};for(const t in s4e)i_[t]={isEnabled:e=>s4e[t].some(n=>!!e[n])};function Jqe(t){for(const e in t)i_[e]={...i_[e],...t[e]}}const Gye=Et.createContext({}),Wye=Et.createContext({}),eYe=Symbol.for("motionComponentSymbol");function tYe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Jqe(t);function o(d,f){let v;const x={...Et.useContext(rX),...d,layoutId:nYe(d)},{isStatic:S}=x,M=Qqe(d),D=r(d,S);if(!S&&nR){M.visualElement=qqe(i,D,x,e);const G=Et.useContext(Wye),B=Et.useContext(jye).strict;M.visualElement&&(v=M.visualElement.loadFeatures(x,B,t,G))}return Et.createElement(tR.Provider,{value:M},v&&M.visualElement?Et.createElement(v,{visualElement:M.visualElement,...x}):null,n(i,d,Yqe(D,M.visualElement,f),D,S,M.visualElement))}const u=Et.forwardRef(o);return u[eYe]=i,u}function nYe({layoutId:t}){const e=Et.useContext(Gye).id;return e&&t!==void 0?e+"-"+t:t}function rYe(t){function e(r,i={}){return tYe(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const iYe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aX(t){return typeof t!="string"||t.includes("-")?!1:!!(iYe.indexOf(t)>-1||/[A-Z]/.test(t))}const nI={};function sYe(t){Object.assign(nI,t)}const k_=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],r9=new Set(k_);function $ye(t,{layout:e,layoutId:n}){return r9.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!nI[t]||t==="opacity")}const Ra=t=>!!(t&&t.getVelocity),oYe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aYe=k_.length;function lYe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let u=0;u<aYe;u++){const d=k_[u];if(t[d]!==void 0){const f=oYe[d]||d;o+=`${f}(${t[d]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const Kye=t=>e=>typeof e=="string"&&e.startsWith(t),Xye=Kye("--"),aW=Kye("var(--"),uYe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,cYe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,t1=(t,e,n)=>Math.min(Math.max(n,t),e),i9={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hb={...i9,transform:t=>t1(0,1,t)},Ik={...i9,default:1},pb=t=>Math.round(t*1e5)/1e5,sR=/(-)?([\d]*\.?[\d])+/g,qye=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,dYe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function A_(t){return typeof t=="string"}const I_=t=>({test:e=>A_(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wf=I_("deg"),kc=I_("%"),Yn=I_("px"),hYe=I_("vh"),pYe=I_("vw"),o4e={...kc,parse:t=>kc.parse(t)/100,transform:t=>kc.transform(t*100)},a4e={...i9,transform:Math.round},Yye={borderWidth:Yn,borderTopWidth:Yn,borderRightWidth:Yn,borderBottomWidth:Yn,borderLeftWidth:Yn,borderRadius:Yn,radius:Yn,borderTopLeftRadius:Yn,borderTopRightRadius:Yn,borderBottomRightRadius:Yn,borderBottomLeftRadius:Yn,width:Yn,maxWidth:Yn,height:Yn,maxHeight:Yn,size:Yn,top:Yn,right:Yn,bottom:Yn,left:Yn,padding:Yn,paddingTop:Yn,paddingRight:Yn,paddingBottom:Yn,paddingLeft:Yn,margin:Yn,marginTop:Yn,marginRight:Yn,marginBottom:Yn,marginLeft:Yn,rotate:wf,rotateX:wf,rotateY:wf,rotateZ:wf,scale:Ik,scaleX:Ik,scaleY:Ik,scaleZ:Ik,skew:wf,skewX:wf,skewY:wf,distance:Yn,translateX:Yn,translateY:Yn,translateZ:Yn,x:Yn,y:Yn,z:Yn,perspective:Yn,transformPerspective:Yn,opacity:hb,originX:o4e,originY:o4e,originZ:Yn,zIndex:a4e,fillOpacity:hb,strokeOpacity:hb,numOctaves:a4e};function lX(t,e,n,r){const{style:i,vars:o,transform:u,transformOrigin:d}=t;let f=!1,v=!1,x=!0;for(const S in e){const M=e[S];if(Xye(S)){o[S]=M;continue}const D=Yye[S],G=cYe(M,D);if(r9.has(S)){if(f=!0,u[S]=G,!x)continue;M!==(D.default||0)&&(x=!1)}else S.startsWith("origin")?(v=!0,d[S]=G):i[S]=G}if(e.transform||(f||r?i.transform=lYe(t.transform,n,x,r):i.transform&&(i.transform="none")),v){const{originX:S="50%",originY:M="50%",originZ:D=0}=d;i.transformOrigin=`${S} ${M} ${D}`}}const uX=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Zye(t,e,n){for(const r in e)!Ra(e[r])&&!$ye(r,n)&&(t[r]=e[r])}function fYe({transformTemplate:t},e,n){return Et.useMemo(()=>{const r=uX();return lX(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function mYe(t,e,n){const r=t.style||{},i={};return Zye(i,r,t),Object.assign(i,fYe(t,e,n)),t.transformValues?t.transformValues(i):i}function gYe(t,e,n){const r={},i=mYe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const vYe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function rI(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||vYe.has(t)}let Qye=t=>!rI(t);function yYe(t){t&&(Qye=e=>e.startsWith("on")?!rI(e):t(e))}try{yYe(require("@emotion/is-prop-valid").default)}catch{}function bYe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Qye(i)||n===!0&&rI(i)||!e&&!rI(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function l4e(t,e,n){return typeof t=="string"?t:Yn.transform(e+n*t)}function _Ye(t,e,n){const r=l4e(e,t.x,t.width),i=l4e(n,t.y,t.height);return`${r} ${i}`}const wYe={offset:"stroke-dashoffset",array:"stroke-dasharray"},xYe={offset:"strokeDashoffset",array:"strokeDasharray"};function SYe(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?wYe:xYe;t[o.offset]=Yn.transform(-r);const u=Yn.transform(e),d=Yn.transform(n);t[o.array]=`${u} ${d}`}function cX(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...v},x,S,M){if(lX(t,v,x,M),S){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:D,style:G,dimensions:B}=t;D.transform&&(B&&(G.transform=D.transform),delete D.transform),B&&(i!==void 0||o!==void 0||G.transform)&&(G.transformOrigin=_Ye(B,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(D.x=e),n!==void 0&&(D.y=n),r!==void 0&&(D.scale=r),u!==void 0&&SYe(D,u,d,f,!1)}const Jye=()=>({...uX(),attrs:{}}),dX=t=>typeof t=="string"&&t.toLowerCase()==="svg";function EYe(t,e,n,r){const i=Et.useMemo(()=>{const o=Jye();return cX(o,e,{enableHardwareAcceleration:!1},dX(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Zye(o,t.style,t),i.style={...o,...i.style}}return i}function CYe(t=!1){return(n,r,i,{latestValues:o},u)=>{const f=(aX(n)?EYe:gYe)(r,o,u,n),x={...bYe(r,typeof n=="string",t),...f,ref:i},{children:S}=r,M=Et.useMemo(()=>Ra(S)?S.get():S,[S]);return Et.createElement(n,{...x,children:M})}}const hX=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function ebe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const tbe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nbe(t,e,n,r){ebe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(tbe.has(i)?i:hX(i),e.attrs[i])}function pX(t,e){const{style:n}=t,r={};for(const i in n)(Ra(n[i])||e.style&&Ra(e.style[i])||$ye(i,t))&&(r[i]=n[i]);return r}function rbe(t,e){const n=pX(t,e);for(const r in t)if(Ra(t[r])||Ra(e[r])){const i=k_.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function fX(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function R_(t){const e=Et.useRef(null);return e.current===null&&(e.current=t()),e.current}const iI=t=>Array.isArray(t),PYe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),TYe=t=>iI(t)?t[t.length-1]||0:t;function iA(t){const e=Ra(t)?t.get():t;return PYe(e)?e.toValue():e}function MYe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const u={latestValues:kYe(r,i,o,t),renderState:e()};return n&&(u.mount=d=>n(r,d,u)),u}const ibe=t=>(e,n)=>{const r=Et.useContext(tR),i=Et.useContext(iX),o=()=>MYe(t,e,r,i);return n?o():R_(o)};function kYe(t,e,n,r){const i={},o=r(t,{});for(const M in o)i[M]=iA(o[M]);let{initial:u,animate:d}=t;const f=iR(t),v=Hye(t);e&&v&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let x=n?n.initial===!1:!1;x=x||u===!1;const S=x?d:u;return S&&typeof S!="boolean"&&!rR(S)&&(Array.isArray(S)?S:[S]).forEach(D=>{const G=fX(t,D);if(!G)return;const{transitionEnd:B,transition:L,...U}=G;for(const C in U){let H=U[C];if(Array.isArray(H)){const X=x?H.length-1:0;H=H[X]}H!==null&&(i[C]=H)}for(const C in B)i[C]=B[C]}),i}const AYe={useVisualState:ibe({scrapeMotionValuesFromProps:rbe,createRenderState:Jye,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}cX(n,r,{enableHardwareAcceleration:!1},dX(e.tagName),t.transformTemplate),nbe(e,n)}})},IYe={useVisualState:ibe({scrapeMotionValuesFromProps:pX,createRenderState:uX})};function RYe(t,{forwardMotionProps:e=!1},n,r){return{...aX(t)?AYe:IYe,preloadedFeatures:n,useRender:CYe(e),createVisualElement:r,Component:t}}function sh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const sbe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function oR(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const DYe=t=>e=>sbe(e)&&t(e,oR(e));function ch(t,e,n,r){return sh(t,e,DYe(n),r)}const OYe=(t,e)=>n=>e(t(n)),Kf=(...t)=>t.reduce(OYe);function obe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const u4e=obe("dragHorizontal"),c4e=obe("dragVertical");function abe(t){let e=!1;if(t==="y")e=c4e();else if(t==="x")e=u4e();else{const n=u4e(),r=c4e();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function lbe(){const t=abe(!0);return t?(t(),!1):!0}class c1{constructor(e){this.isMounted=!1,this.node=e}update(){}}const us=t=>t;function LYe(t){let e=[],n=[],r=0,i=!1,o=!1;const u=new WeakSet,d={schedule:(f,v=!1,x=!1)=>{const S=x&&i,M=S?e:n;return v&&u.add(f),M.indexOf(f)===-1&&(M.push(f),S&&i&&(r=e.length)),f},cancel:f=>{const v=n.indexOf(f);v!==-1&&n.splice(v,1),u.delete(f)},process:f=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let v=0;v<r;v++){const x=e[v];x(f),u.has(x)&&(d.schedule(x),t())}i=!1,o&&(o=!1,d.process(f))}};return d}const Rk=["prepare","read","update","preRender","render","postRender"],NYe=40;function FYe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Rk.reduce((S,M)=>(S[M]=LYe(()=>n=!0),S),{}),u=S=>o[S].process(i),d=()=>{const S=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,NYe),1),i.timestamp=S,i.isProcessing=!0,Rk.forEach(u),i.isProcessing=!1,n&&e&&(r=!1,t(d))},f=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:Rk.reduce((S,M)=>{const D=o[M];return S[M]=(G,B=!1,L=!1)=>(n||f(),D.schedule(G,B,L)),S},{}),cancel:S=>Rk.forEach(M=>o[M].cancel(S)),state:i,steps:o}}const{schedule:zi,cancel:Oc,state:Yo,steps:lH}=FYe(typeof requestAnimationFrame<"u"?requestAnimationFrame:us,!0);function d4e(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,u)=>{if(o.type==="touch"||lbe())return;const d=t.getProps();t.animationState&&d.whileHover&&t.animationState.setActive("whileHover",e),d[r]&&zi.update(()=>d[r](o,u))};return ch(t.current,n,i,{passive:!t.getProps()[r]})}class BYe extends c1{mount(){this.unmount=Kf(d4e(this.node,!0),d4e(this.node,!1))}unmount(){}}class UYe extends c1{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kf(sh(this.node.current,"focus",()=>this.onFocus()),sh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ube=(t,e)=>e?t===e?!0:ube(t,e.parentElement):!1;function uH(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,oR(n))}class zYe extends c1{constructor(){super(...arguments),this.removeStartListeners=us,this.removeEndListeners=us,this.removeAccessibleListeners=us,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),o=ch(window,"pointerup",(d,f)=>{if(!this.checkPressEnd())return;const{onTap:v,onTapCancel:x}=this.node.getProps();zi.update(()=>{ube(this.node.current,d.target)?v&&v(d,f):x&&x(d,f)})},{passive:!(r.onTap||r.onPointerUp)}),u=ch(window,"pointercancel",(d,f)=>this.cancelPress(d,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Kf(o,u),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const u=d=>{d.key!=="Enter"||!this.checkPressEnd()||uH("up",(f,v)=>{const{onTap:x}=this.node.getProps();x&&zi.update(()=>x(f,v))})};this.removeEndListeners(),this.removeEndListeners=sh(this.node.current,"keyup",u),uH("down",(d,f)=>{this.startPress(d,f)})},n=sh(this.node.current,"keydown",e),r=()=>{this.isPressing&&uH("cancel",(o,u)=>this.cancelPress(o,u))},i=sh(this.node.current,"blur",r);this.removeAccessibleListeners=Kf(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&zi.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!lbe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&zi.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ch(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=sh(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Kf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const lW=new WeakMap,cH=new WeakMap,VYe=t=>{const e=lW.get(t.target);e&&e(t)},jYe=t=>{t.forEach(VYe)};function HYe({root:t,...e}){const n=t||document;cH.has(n)||cH.set(n,{});const r=cH.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(jYe,{root:t,...e})),r[i]}function GYe(t,e,n){const r=HYe(e);return lW.set(t,n),r.observe(t),()=>{lW.delete(t),r.unobserve(t)}}const WYe={some:0,all:1};class $Ye extends c1{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:WYe[i]},d=f=>{const{isIntersecting:v}=f;if(this.isInView===v||(this.isInView=v,o&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:x,onViewportLeave:S}=this.node.getProps(),M=v?x:S;M&&M(f)};return GYe(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(KYe(e,n))&&this.startObserver()}unmount(){}}function KYe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const XYe={inView:{Feature:$Ye},tap:{Feature:zYe},focus:{Feature:UYe},hover:{Feature:BYe}};function cbe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function qYe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function YYe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function aR(t,e,n){const r=t.getProps();return fX(r,e,n!==void 0?n:r.custom,qYe(t),YYe(t))}const ZYe="framerAppearId",QYe="data-"+hX(ZYe);let JYe=us,mX=us;const Xf=t=>t*1e3,dh=t=>t/1e3,eZe={current:!1},dbe=t=>Array.isArray(t)&&typeof t[0]=="number";function hbe(t){return!!(!t||typeof t=="string"&&pbe[t]||dbe(t)||Array.isArray(t)&&t.every(hbe))}const Yy=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,pbe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yy([0,.65,.55,1]),circOut:Yy([.55,0,1,.45]),backIn:Yy([.31,.01,.66,-.59]),backOut:Yy([.33,1.53,.69,.99])};function fbe(t){if(t)return dbe(t)?Yy(t):Array.isArray(t)?t.map(fbe):pbe[t]}function tZe(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:u="loop",ease:d,times:f}={}){const v={[e]:n};f&&(v.offset=f);const x=fbe(d);return Array.isArray(x)&&(v.easing=x),t.animate(v,{delay:r,duration:i,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}function nZe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const mbe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rZe=1e-7,iZe=12;function sZe(t,e,n,r,i){let o,u,d=0;do u=e+(n-e)/2,o=mbe(u,r,i)-t,o>0?n=u:e=u;while(Math.abs(o)>rZe&&++d<iZe);return u}function D_(t,e,n,r){if(t===e&&n===r)return us;const i=o=>sZe(o,0,1,t,n);return o=>o===0||o===1?o:mbe(i(o),e,r)}const oZe=D_(.42,0,1,1),aZe=D_(0,0,.58,1),gbe=D_(.42,0,.58,1),lZe=t=>Array.isArray(t)&&typeof t[0]!="number",vbe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ybe=t=>e=>1-t(1-e),bbe=t=>1-Math.sin(Math.acos(t)),gX=ybe(bbe),uZe=vbe(gX),_be=D_(.33,1.53,.69,.99),vX=ybe(_be),cZe=vbe(vX),dZe=t=>(t*=2)<1?.5*vX(t):.5*(2-Math.pow(2,-10*(t-1))),hZe={linear:us,easeIn:oZe,easeInOut:gbe,easeOut:aZe,circIn:bbe,circInOut:uZe,circOut:gX,backIn:vX,backInOut:cZe,backOut:_be,anticipate:dZe},h4e=t=>{if(Array.isArray(t)){mX(t.length===4);const[e,n,r,i]=t;return D_(e,n,r,i)}else if(typeof t=="string")return hZe[t];return t},yX=(t,e)=>n=>!!(A_(n)&&dYe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),wbe=(t,e,n)=>r=>{if(!A_(r))return r;const[i,o,u,d]=r.match(sR);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},pZe=t=>t1(0,255,t),dH={...i9,transform:t=>Math.round(pZe(t))},S2={test:yX("rgb","red"),parse:wbe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+dH.transform(t)+", "+dH.transform(e)+", "+dH.transform(n)+", "+pb(hb.transform(r))+")"};function fZe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const uW={test:yX("#"),parse:fZe,transform:S2.transform},N4={test:yX("hsl","hue"),parse:wbe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+kc.transform(pb(e))+", "+kc.transform(pb(n))+", "+pb(hb.transform(r))+")"},xa={test:t=>S2.test(t)||uW.test(t)||N4.test(t),parse:t=>S2.test(t)?S2.parse(t):N4.test(t)?N4.parse(t):uW.parse(t),transform:t=>A_(t)?t:t.hasOwnProperty("red")?S2.transform(t):N4.transform(t)},Bi=(t,e,n)=>-n*t+n*e+t;function hH(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mZe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;i=hH(f,d,t+1/3),o=hH(f,d,t),u=hH(f,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}const pH=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},gZe=[uW,S2,N4],vZe=t=>gZe.find(e=>e.test(t));function p4e(t){const e=vZe(t);let n=e.parse(t);return e===N4&&(n=mZe(n)),n}const xbe=(t,e)=>{const n=p4e(t),r=p4e(e),i={...n};return o=>(i.red=pH(n.red,r.red,o),i.green=pH(n.green,r.green,o),i.blue=pH(n.blue,r.blue,o),i.alpha=Bi(n.alpha,r.alpha,o),S2.transform(i))};function yZe(t){var e,n;return isNaN(t)&&A_(t)&&(((e=t.match(sR))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(qye))===null||n===void 0?void 0:n.length)||0)>0}const Sbe={regex:uYe,countKey:"Vars",token:"${v}",parse:us},Ebe={regex:qye,countKey:"Colors",token:"${c}",parse:xa.parse},Cbe={regex:sR,countKey:"Numbers",token:"${n}",parse:i9.parse};function fH(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function sI(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&fH(n,Sbe),fH(n,Ebe),fH(n,Cbe),n}function Pbe(t){return sI(t).values}function Tbe(t){const{values:e,numColors:n,numVars:r,tokenised:i}=sI(t),o=e.length;return u=>{let d=i;for(let f=0;f<o;f++)f<r?d=d.replace(Sbe.token,u[f]):f<r+n?d=d.replace(Ebe.token,xa.transform(u[f])):d=d.replace(Cbe.token,pb(u[f]));return d}}const bZe=t=>typeof t=="number"?0:t;function _Ze(t){const e=Pbe(t);return Tbe(t)(e.map(bZe))}const n1={test:yZe,parse:Pbe,createTransformer:Tbe,getAnimatableNone:_Ze},Mbe=(t,e)=>n=>`${n>0?e:t}`;function kbe(t,e){return typeof t=="number"?n=>Bi(t,e,n):xa.test(t)?xbe(t,e):t.startsWith("var(")?Mbe(t,e):Ibe(t,e)}const Abe=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,u)=>kbe(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=i[u](o);return n}},wZe=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kbe(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},Ibe=(t,e)=>{const n=n1.createTransformer(e),r=sI(t),i=sI(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Kf(Abe(r.values,i.values),n):Mbe(t,e)},s_=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},f4e=(t,e)=>n=>Bi(t,e,n);function xZe(t){return typeof t=="number"?f4e:typeof t=="string"?xa.test(t)?xbe:Ibe:Array.isArray(t)?Abe:typeof t=="object"?wZe:f4e}function SZe(t,e,n){const r=[],i=n||xZe(t[0]),o=t.length-1;for(let u=0;u<o;u++){let d=i(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||us:e;d=Kf(f,d)}r.push(d)}return r}function bX(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(mX(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=SZe(e,r,i),d=u.length,f=v=>{let x=0;if(d>1)for(;x<t.length-2&&!(v<t[x+1]);x++);const S=s_(t[x],t[x+1],v);return u[x](S)};return n?v=>f(t1(t[0],t[o-1],v)):f}function EZe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=s_(0,e,r);t.push(Bi(n,1,i))}}function CZe(t){const e=[0];return EZe(e,t.length-1),e}function PZe(t,e){return t.map(n=>n*e)}function TZe(t,e){return t.map(()=>e||gbe).splice(0,t.length-1)}function oI({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=lZe(r)?r.map(h4e):h4e(r),o={done:!1,value:e[0]},u=PZe(n&&n.length===e.length?n:CZe(e),t),d=bX(u,e,{ease:Array.isArray(i)?i:TZe(e,i)});return{calculatedDuration:t,next:f=>(o.value=d(f),o.done=f>=t,o)}}function Rbe(t,e){return e?t*(1e3/e):0}const MZe=5;function Dbe(t,e,n){const r=Math.max(e-MZe,0);return Rbe(n-t(r),e-r)}const mH=.001,kZe=.01,m4e=10,AZe=.05,IZe=1;function RZe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o;JYe(t<=Xf(m4e));let u=1-e;u=t1(AZe,IZe,u),t=t1(kZe,m4e,dh(t)),u<1?(i=v=>{const x=v*u,S=x*t,M=x-n,D=cW(v,u),G=Math.exp(-S);return mH-M/D*G},o=v=>{const S=v*u*t,M=S*n+n,D=Math.pow(u,2)*Math.pow(v,2)*t,G=Math.exp(-S),B=cW(Math.pow(v,2),u);return(-i(v)+mH>0?-1:1)*((M-D)*G)/B}):(i=v=>{const x=Math.exp(-v*t),S=(v-n)*t+1;return-mH+x*S},o=v=>{const x=Math.exp(-v*t),S=(n-v)*(t*t);return x*S});const d=5/t,f=OZe(i,o,d);if(t=Xf(t),isNaN(f))return{stiffness:100,damping:10,duration:t};{const v=Math.pow(f,2)*r;return{stiffness:v,damping:u*2*Math.sqrt(r*v),duration:t}}}const DZe=12;function OZe(t,e,n){let r=n;for(let i=1;i<DZe;i++)r=r-t(r)/e(r);return r}function cW(t,e){return t*Math.sqrt(1-e*e)}const LZe=["duration","bounce"],NZe=["stiffness","damping","mass"];function g4e(t,e){return e.some(n=>t[n]!==void 0)}function FZe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!g4e(t,NZe)&&g4e(t,LZe)){const n=RZe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function Obe({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],u={done:!1,value:i},{stiffness:d,damping:f,mass:v,velocity:x,duration:S,isResolvedFromDuration:M}=FZe(r),D=x?-dh(x):0,G=f/(2*Math.sqrt(d*v)),B=o-i,L=dh(Math.sqrt(d/v)),U=Math.abs(B)<5;n||(n=U?.01:2),e||(e=U?.005:.5);let C;if(G<1){const H=cW(L,G);C=X=>{const fe=Math.exp(-G*L*X);return o-fe*((D+G*L*B)/H*Math.sin(H*X)+B*Math.cos(H*X))}}else if(G===1)C=H=>o-Math.exp(-L*H)*(B+(D+L*B)*H);else{const H=L*Math.sqrt(G*G-1);C=X=>{const fe=Math.exp(-G*L*X),q=Math.min(H*X,300);return o-fe*((D+G*L*B)*Math.sinh(q)+H*B*Math.cosh(q))/H}}return{calculatedDuration:M&&S||null,next:H=>{const X=C(H);if(M)u.done=H>=S;else{let fe=D;H!==0&&(G<1?fe=Dbe(C,H,X):fe=0);const q=Math.abs(fe)<=n,pe=Math.abs(o-X)<=e;u.done=q&&pe}return u.value=u.done?o:X,u}}}function v4e({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:f,restDelta:v=.5,restSpeed:x}){const S=t[0],M={done:!1,value:S},D=xe=>d!==void 0&&xe<d||f!==void 0&&xe>f,G=xe=>d===void 0?f:f===void 0||Math.abs(d-xe)<Math.abs(f-xe)?d:f;let B=n*e;const L=S+B,U=u===void 0?L:u(L);U!==L&&(B=U-S);const C=xe=>-B*Math.exp(-xe/r),H=xe=>U+C(xe),X=xe=>{const J=C(xe),ne=H(xe);M.done=Math.abs(J)<=v,M.value=M.done?U:ne};let fe,q;const pe=xe=>{D(M.value)&&(fe=xe,q=Obe({keyframes:[M.value,G(M.value)],velocity:Dbe(H,xe,M.value),damping:i,stiffness:o,restDelta:v,restSpeed:x}))};return pe(0),{calculatedDuration:null,next:xe=>{let J=!1;return!q&&fe===void 0&&(J=!0,X(xe),pe(xe)),fe!==void 0&&xe>fe?q.next(xe-fe):(!J&&X(xe),M)}}}const BZe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>zi.update(e,!0),stop:()=>Oc(e),now:()=>Yo.isProcessing?Yo.timestamp:performance.now()}},y4e=2e4;function b4e(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<y4e;)e+=n,r=t.next(e);return e>=y4e?1/0:e}const UZe={decay:v4e,inertia:v4e,tween:oI,keyframes:oI,spring:Obe};function aI({autoplay:t=!0,delay:e=0,driver:n=BZe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:d="loop",onPlay:f,onStop:v,onComplete:x,onUpdate:S,...M}){let D=1,G=!1,B,L;const U=()=>{L=new Promise(dt=>{B=dt})};U();let C;const H=UZe[i]||oI;let X;H!==oI&&typeof r[0]!="number"&&(X=bX([0,100],r,{clamp:!1}),r=[0,100]);const fe=H({...M,keyframes:r});let q;d==="mirror"&&(q=H({...M,keyframes:[...r].reverse(),velocity:-(M.velocity||0)}));let pe="idle",xe=null,J=null,ne=null;fe.calculatedDuration===null&&o&&(fe.calculatedDuration=b4e(fe));const{calculatedDuration:Pe}=fe;let mt=1/0,_t=1/0;Pe!==null&&(mt=Pe+u,_t=mt*(o+1)-u);let de=0;const je=dt=>{if(J===null)return;D>0&&(J=Math.min(J,dt)),D<0&&(J=Math.min(dt-_t/D,J)),xe!==null?de=xe:de=Math.round(dt-J)*D;const At=de-e*(D>=0?1:-1),pn=D>=0?At<0:At>_t;de=Math.max(At,0),pe==="finished"&&xe===null&&(de=_t);let et=de,wt=fe;if(o){const nt=de/mt;let Tt=Math.floor(nt),Mt=nt%1;!Mt&&nt>=1&&(Mt=1),Mt===1&&Tt--,Tt=Math.min(Tt,o+1);const Ve=!!(Tt%2);Ve&&(d==="reverse"?(Mt=1-Mt,u&&(Mt-=u/mt)):d==="mirror"&&(wt=q));let or=t1(0,1,Mt);de>_t&&(or=d==="reverse"&&Ve?1:0),et=or*mt}const Zt=pn?{done:!1,value:r[0]}:wt.next(et);X&&(Zt.value=X(Zt.value));let{done:rn}=Zt;!pn&&Pe!==null&&(rn=D>=0?de>=_t:de<=0);const un=xe===null&&(pe==="finished"||pe==="running"&&rn);return S&&S(Zt.value),un&&We(),Zt},Me=()=>{C&&C.stop(),C=void 0},Ct=()=>{pe="idle",Me(),B(),U(),J=ne=null},We=()=>{pe="finished",x&&x(),Me(),B()},tt=()=>{if(G)return;C||(C=n(je));const dt=C.now();f&&f(),xe!==null?J=dt-xe:(!J||pe==="finished")&&(J=dt),pe==="finished"&&U(),ne=J,xe=null,pe="running",C.start()};t&&tt();const Ze={then(dt,At){return L.then(dt,At)},get time(){return dh(de)},set time(dt){dt=Xf(dt),de=dt,xe!==null||!C||D===0?xe=dt:J=C.now()-dt/D},get duration(){const dt=fe.calculatedDuration===null?b4e(fe):fe.calculatedDuration;return dh(dt)},get speed(){return D},set speed(dt){dt===D||!C||(D=dt,Ze.time=dh(de))},get state(){return pe},play:tt,pause:()=>{pe="paused",xe=de},stop:()=>{G=!0,pe!=="idle"&&(pe="idle",v&&v(),Ct())},cancel:()=>{ne!==null&&je(ne),Ct()},complete:()=>{pe="finished"},sample:dt=>(J=0,je(dt))};return Ze}function zZe(t){let e;return()=>(e===void 0&&(e=t()),e)}const VZe=zZe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jZe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Dk=10,HZe=2e4,GZe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!hbe(e.ease);function WZe(t,e,{onUpdate:n,onComplete:r,...i}){if(!(VZe()&&jZe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let u=!1,d,f;const v=()=>{f=new Promise(C=>{d=C})};v();let{keyframes:x,duration:S=300,ease:M,times:D}=i;if(GZe(e,i)){const C=aI({...i,repeat:0,delay:0});let H={done:!1,value:x[0]};const X=[];let fe=0;for(;!H.done&&fe<HZe;)H=C.sample(fe),X.push(H.value),fe+=Dk;D=void 0,x=X,S=fe-Dk,M="linear"}const G=tZe(t.owner.current,e,x,{...i,duration:S,ease:M,times:D}),B=()=>G.cancel(),L=()=>{zi.update(B),d(),v()};return G.onfinish=()=>{t.set(nZe(x,i)),r&&r(),L()},{then(C,H){return f.then(C,H)},attachTimeline(C){return G.timeline=C,G.onfinish=null,us},get time(){return dh(G.currentTime||0)},set time(C){G.currentTime=Xf(C)},get speed(){return G.playbackRate},set speed(C){G.playbackRate=C},get duration(){return dh(S)},play:()=>{u||(G.play(),Oc(B))},pause:()=>G.pause(),stop:()=>{if(u=!0,G.playState==="idle")return;const{currentTime:C}=G;if(C){const H=aI({...i,autoplay:!1});t.setWithVelocity(H.sample(C-Dk).value,H.sample(C).value,Dk)}L()},complete:()=>G.finish(),cancel:L}}function $Ze({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:us,pause:us,stop:us,then:o=>(o(),Promise.resolve()),cancel:us,complete:us});return e?aI({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const KZe={type:"spring",stiffness:500,damping:25,restSpeed:10},XZe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qZe={type:"keyframes",duration:.8},YZe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZZe=(t,{keyframes:e})=>e.length>2?qZe:r9.has(t)?t.startsWith("scale")?XZe(e[1]):KZe:YZe,dW=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(n1.test(e)||e==="0")&&!e.startsWith("url(")),QZe=new Set(["brightness","contrast","saturate","opacity"]);function JZe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(sR)||[];if(!r)return t;const i=n.replace(r,"");let o=QZe.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const eQe=/([a-z-]*)\(.*?\)/g,hW={...n1,getAnimatableNone:t=>{const e=t.match(eQe);return e?e.map(JZe).join(" "):t}},tQe={...Yye,color:xa,backgroundColor:xa,outlineColor:xa,fill:xa,stroke:xa,borderColor:xa,borderTopColor:xa,borderRightColor:xa,borderBottomColor:xa,borderLeftColor:xa,filter:hW,WebkitFilter:hW},_X=t=>tQe[t];function Lbe(t,e){let n=_X(t);return n!==hW&&(n=n1),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Nbe=t=>/^0[^.\s]+$/.test(t);function nQe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Nbe(t)}function rQe(t,e,n,r){const i=dW(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const u=r.from!==void 0?r.from:t.get();let d;const f=[];for(let v=0;v<o.length;v++)o[v]===null&&(o[v]=v===0?u:o[v-1]),nQe(o[v])&&f.push(v),typeof o[v]=="string"&&o[v]!=="none"&&o[v]!=="0"&&(d=o[v]);if(i&&f.length&&d)for(let v=0;v<f.length;v++){const x=f[v];o[x]=Lbe(e,d)}return o}function iQe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:d,from:f,elapsed:v,...x}){return!!Object.keys(x).length}function Fbe(t,e){return t[e]||t.default||t}const wX=(t,e,n,r={})=>i=>{const o=Fbe(r,t)||{},u=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Xf(u);const f=rQe(e,t,n,o),v=f[0],x=f[f.length-1],S=dW(t,v),M=dW(t,x);let D={keyframes:f,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-d,onUpdate:G=>{e.set(G),o.onUpdate&&o.onUpdate(G)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(iQe(o)||(D={...D,...ZZe(t,D)}),D.duration&&(D.duration=Xf(D.duration)),D.repeatDelay&&(D.repeatDelay=Xf(D.repeatDelay)),!S||!M||eZe.current||o.type===!1)return $Ze(D);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const G=WZe(e,t,D);if(G)return G}return aI(D)};function lI(t){return!!(Ra(t)&&t.add)}const Bbe=t=>/^\-?\d*\.?\d+$/.test(t);function xX(t,e){t.indexOf(e)===-1&&t.push(e)}function SX(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function sQe([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(i,0,o)}return t}class EX{constructor(){this.subscriptions=[]}add(e){return xX(this.subscriptions,e),()=>SX(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oQe=t=>!isNaN(parseFloat(t)),fb={current:void 0};class aQe{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:u}=Yo;this.lastUpdated!==u&&(this.timeDelta=o,this.lastUpdated=u,zi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>zi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=oQe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new EX);const r=this.events[e].add(n);return e==="change"?()=>{r(),zi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return fb.current&&fb.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Rbe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function K2(t,e){return new aQe(t,e)}const Ube=t=>e=>e.test(t),lQe={test:t=>t==="auto",parse:t=>t},zbe=[i9,Yn,kc,wf,pYe,hYe,lQe],zy=t=>zbe.find(Ube(t)),uQe=[...zbe,xa,n1],cQe=t=>uQe.find(Ube(t));function dQe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,K2(n))}function hQe(t,e){const n=aR(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const u in o){const d=TYe(o[u]);dQe(t,u,d)}}function pQe(t,e,n){var r,i;const o=Object.keys(e).filter(d=>!t.hasValue(d)),u=o.length;if(u)for(let d=0;d<u;d++){const f=o[d],v=e[f];let x=null;Array.isArray(v)&&(x=v[0]),x===null&&(x=(i=(r=n[f])!==null&&r!==void 0?r:t.readValue(f))!==null&&i!==void 0?i:e[f]),x!=null&&(typeof x=="string"&&(Bbe(x)||Nbe(x))?x=parseFloat(x):!cQe(x)&&n1.test(v)&&(x=Lbe(f,v)),t.addValue(f,K2(x,{owner:t})),n[f]===void 0&&(n[f]=x),x!==null&&t.setBaseTarget(f,x))}}function fQe(t,e){return e?(e[t]||e.default||e).from:void 0}function mQe(t,e,n){const r={};for(const i in t){const o=fQe(i,e);if(o!==void 0)r[i]=o;else{const u=n.getValue(i);u&&(r[i]=u.get())}}return r}function gQe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Vbe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...d}=t.makeTargetAnimatable(e);const f=t.getValue("willChange");r&&(o=r);const v=[],x=i&&t.animationState&&t.animationState.getState()[i];for(const S in d){const M=t.getValue(S),D=d[S];if(!M||D===void 0||x&&gQe(x,S))continue;const G={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!M.hasAnimated){const L=t.getProps()[QYe];L&&(G.elapsed=window.HandoffAppearAnimations(L,S,M,zi))}M.start(wX(S,M,D,t.shouldReduceMotion&&r9.has(S)?{type:!1}:G));const B=M.animation;lI(f)&&(f.add(S),B.then(()=>f.remove(S))),v.push(B)}return u&&Promise.all(v).then(()=>{u&&hQe(t,u)}),v}function pW(t,e,n={}){const r=aR(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Vbe(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:v=0,staggerChildren:x,staggerDirection:S}=i;return vQe(t,e,v+f,x,S,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[f,v]=d==="beforeChildren"?[o,u]:[u,o];return f().then(()=>v())}else return Promise.all([o(),u(n.delay)])}function vQe(t,e,n=0,r=0,i=1,o){const u=[],d=(t.variantChildren.size-1)*r,f=i===1?(v=0)=>v*r:(v=0)=>d-v*r;return Array.from(t.variantChildren).sort(yQe).forEach((v,x)=>{v.notify("AnimationStart",e),u.push(pW(v,e,{...o,delay:n+f(x)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(u)}function yQe(t,e){return t.sortNodePosition(e)}function bQe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>pW(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=pW(t,e,n);else{const i=typeof e=="function"?aR(t,e,n.custom):e;r=Promise.all(Vbe(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const _Qe=[...sX].reverse(),wQe=sX.length;function xQe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bQe(t,n,r)))}function SQe(t){let e=xQe(t);const n=CQe();let r=!0;const i=(f,v)=>{const x=aR(t,v);if(x){const{transition:S,transitionEnd:M,...D}=x;f={...f,...D,...M}}return f};function o(f){e=f(t)}function u(f,v){const x=t.getProps(),S=t.getVariantContext(!0)||{},M=[],D=new Set;let G={},B=1/0;for(let U=0;U<wQe;U++){const C=_Qe[U],H=n[C],X=x[C]!==void 0?x[C]:S[C],fe=r_(X),q=C===v?H.isActive:null;q===!1&&(B=U);let pe=X===S[C]&&X!==x[C]&&fe;if(pe&&r&&t.manuallyAnimateOnMount&&(pe=!1),H.protectedKeys={...G},!H.isActive&&q===null||!X&&!H.prevProp||rR(X)||typeof X=="boolean")continue;const xe=EQe(H.prevProp,X);let J=xe||C===v&&H.isActive&&!pe&&fe||U>B&&fe;const ne=Array.isArray(X)?X:[X];let Pe=ne.reduce(i,{});q===!1&&(Pe={});const{prevResolvedValues:mt={}}=H,_t={...mt,...Pe},de=je=>{J=!0,D.delete(je),H.needsAnimating[je]=!0};for(const je in _t){const Me=Pe[je],Ct=mt[je];G.hasOwnProperty(je)||(Me!==Ct?iI(Me)&&iI(Ct)?!cbe(Me,Ct)||xe?de(je):H.protectedKeys[je]=!0:Me!==void 0?de(je):D.add(je):Me!==void 0&&D.has(je)?de(je):H.protectedKeys[je]=!0)}H.prevProp=X,H.prevResolvedValues=Pe,H.isActive&&(G={...G,...Pe}),r&&t.blockInitialAnimation&&(J=!1),J&&!pe&&M.push(...ne.map(je=>({animation:je,options:{type:C,...f}})))}if(D.size){const U={};D.forEach(C=>{const H=t.getBaseTarget(C);H!==void 0&&(U[C]=H)}),M.push({animation:U})}let L=!!M.length;return r&&x.initial===!1&&!t.manuallyAnimateOnMount&&(L=!1),r=!1,L?e(M):Promise.resolve()}function d(f,v,x){var S;if(n[f].isActive===v)return Promise.resolve();(S=t.variantChildren)===null||S===void 0||S.forEach(D=>{var G;return(G=D.animationState)===null||G===void 0?void 0:G.setActive(f,v)}),n[f].isActive=v;const M=u(x,f);for(const D in n)n[D].protectedKeys={};return M}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>n}}function EQe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!cbe(e,t):!1}function u2(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CQe(){return{animate:u2(!0),whileInView:u2(),whileHover:u2(),whileTap:u2(),whileDrag:u2(),whileFocus:u2(),exit:u2()}}class PQe extends c1{constructor(e){super(e),e.animationState||(e.animationState=SQe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),rR(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let TQe=0;class MQe extends c1{constructor(){super(...arguments),this.id=TQe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const kQe={animation:{Feature:PQe},exit:{Feature:MQe}},_4e=(t,e)=>Math.abs(t-e);function AQe(t,e){const n=_4e(t.x,e.x),r=_4e(t.y,e.y);return Math.sqrt(n**2+r**2)}class jbe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=vH(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,S=AQe(v.offset,{x:0,y:0})>=3;if(!x&&!S)return;const{point:M}=v,{timestamp:D}=Yo;this.history.push({...M,timestamp:D});const{onStart:G,onMove:B}=this.handlers;x||(G&&G(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=gH(x,this.transformPagePoint),zi.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:S,onSessionEnd:M}=this.handlers,D=vH(v.type==="pointercancel"?this.lastMoveEventInfo:gH(x,this.transformPagePoint),this.history);this.startEvent&&S&&S(v,D),M&&M(v,D)},!sbe(e))return;this.handlers=n,this.transformPagePoint=r;const i=oR(e),o=gH(i,this.transformPagePoint),{point:u}=o,{timestamp:d}=Yo;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,vH(o,this.history)),this.removeListeners=Kf(ch(window,"pointermove",this.handlePointerMove),ch(window,"pointerup",this.handlePointerUp),ch(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Oc(this.updatePoint)}}function gH(t,e){return e?{point:e(t.point)}:t}function w4e(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vH({point:t},e){return{point:t,delta:w4e(t,Hbe(e)),offset:w4e(t,IQe(e)),velocity:RQe(e,.1)}}function IQe(t){return t[0]}function Hbe(t){return t[t.length-1]}function RQe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Hbe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Xf(e)));)n--;if(!r)return{x:0,y:0};const o=dh(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function P0(t){return t.max-t.min}function fW(t,e=0,n=.01){return Math.abs(t-e)<=n}function x4e(t,e,n,r=.5){t.origin=r,t.originPoint=Bi(e.min,e.max,t.origin),t.scale=P0(n)/P0(e),(fW(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Bi(n.min,n.max,t.origin)-t.originPoint,(fW(t.translate)||isNaN(t.translate))&&(t.translate=0)}function mb(t,e,n,r){x4e(t.x,e.x,n.x,r?r.originX:void 0),x4e(t.y,e.y,n.y,r?r.originY:void 0)}function S4e(t,e,n){t.min=n.min+e.min,t.max=t.min+P0(e)}function DQe(t,e,n){S4e(t.x,e.x,n.x),S4e(t.y,e.y,n.y)}function E4e(t,e,n){t.min=e.min-n.min,t.max=t.min+P0(e)}function gb(t,e,n){E4e(t.x,e.x,n.x),E4e(t.y,e.y,n.y)}function OQe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Bi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Bi(n,t,r.max):Math.min(t,n)),t}function C4e(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function LQe(t,{top:e,left:n,bottom:r,right:i}){return{x:C4e(t.x,n,i),y:C4e(t.y,e,r)}}function P4e(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function NQe(t,e){return{x:P4e(t.x,e.x),y:P4e(t.y,e.y)}}function FQe(t,e){let n=.5;const r=P0(t),i=P0(e);return i>r?n=s_(e.min,e.max-r,t.min):r>i&&(n=s_(t.min,t.max-i,e.min)),t1(0,1,n)}function BQe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mW=.35;function UQe(t=mW){return t===!1?t=0:t===!0&&(t=mW),{x:T4e(t,"left","right"),y:T4e(t,"top","bottom")}}function T4e(t,e,n){return{min:M4e(t,e),max:M4e(t,n)}}function M4e(t,e){return typeof t=="number"?t:t[e]||0}const k4e=()=>({translate:0,scale:1,origin:0,originPoint:0}),F4=()=>({x:k4e(),y:k4e()}),A4e=()=>({min:0,max:0}),Os=()=>({x:A4e(),y:A4e()});function xc(t){return[t("x"),t("y")]}function Gbe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zQe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function VQe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yH(t){return t===void 0||t===1}function gW({scale:t,scaleX:e,scaleY:n}){return!yH(t)||!yH(e)||!yH(n)}function m2(t){return gW(t)||Wbe(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Wbe(t){return I4e(t.x)||I4e(t.y)}function I4e(t){return t&&t!=="0%"}function uI(t,e,n){const r=t-n,i=e*r;return n+i}function R4e(t,e,n,r,i){return i!==void 0&&(t=uI(t,i,r)),uI(t,n,r)+e}function vW(t,e=0,n=1,r,i){t.min=R4e(t.min,e,n,r,i),t.max=R4e(t.max,e,n,r,i)}function $be(t,{x:e,y:n}){vW(t.x,e.translate,e.scale,e.originPoint),vW(t.y,n.translate,n.scale,n.originPoint)}function jQe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let d=0;d<i;d++){o=n[d],u=o.projectionDelta;const f=o.instance;f&&f.style&&f.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&B4(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,$be(t,u)),r&&m2(o.latestValues)&&B4(t,o.latestValues))}e.x=D4e(e.x),e.y=D4e(e.y)}function D4e(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Cf(t,e){t.min=t.min+e,t.max=t.max+e}function O4e(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,u=Bi(t.min,t.max,o);vW(t,e[n],e[r],u,e.scale)}const HQe=["x","scaleX","originX"],GQe=["y","scaleY","originY"];function B4(t,e){O4e(t.x,e,HQe),O4e(t.y,e,GQe)}function Kbe(t,e){return Gbe(VQe(t.getBoundingClientRect(),e))}function WQe(t,e,n){const r=Kbe(t,n),{scroll:i}=e;return i&&(Cf(r.x,i.offset.x),Cf(r.y,i.offset.y)),r}const $Qe=new WeakMap;class KQe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Os(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{this.stopAnimation(),n&&this.snapToCursor(oR(f,"page").point)},o=(f,v)=>{const{drag:x,dragPropagation:S,onDragStart:M}=this.getProps();if(x&&!S&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=abe(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xc(G=>{let B=this.getAxisMotionValue(G).get()||0;if(kc.test(B)){const{projection:L}=this.visualElement;if(L&&L.layout){const U=L.layout.layoutBox[G];U&&(B=P0(U)*(parseFloat(B)/100))}}this.originPoint[G]=B}),M&&zi.update(()=>M(f,v),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(f,v)=>{const{dragPropagation:x,dragDirectionLock:S,onDirectionLock:M,onDrag:D}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:G}=v;if(S&&this.currentDirection===null){this.currentDirection=XQe(G),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",v.point,G),this.updateAxis("y",v.point,G),this.visualElement.render(),D&&D(f,v)},d=(f,v)=>this.stop(f,v);this.panSession=new jbe(e,{onSessionStart:i,onStart:o,onMove:u,onSessionEnd:d},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&zi.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ok(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=OQe(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&L4(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=LQe(r.layoutBox,e):this.constraints=!1,this.elastic=UQe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xc(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=BQe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!L4(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=WQe(r,i.root,this.visualElement.getTransformPagePoint());let u=NQe(i.layout.layoutBox,o);if(n){const d=n(zQe(u));this.hasMutatedConstraints=!!d,d&&(u=Gbe(d))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},v=xc(x=>{if(!Ok(x,n,this.currentDirection))return;let S=f&&f[x]||{};u&&(S={min:0,max:0});const M=i?200:1e6,D=i?40:1e7,G={type:"inertia",velocity:r?e[x]:0,bounceStiffness:M,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...o,...S};return this.startAxisValueAnimation(x,G)});return Promise.all(v).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(wX(e,r,0,n))}stopAnimation(){xc(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xc(n=>{const{drag:r}=this.getProps();if(!Ok(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:d}=i.layout.layoutBox[n];o.set(e[n]-Bi(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!L4(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};xc(u=>{const d=this.getAxisMotionValue(u);if(d){const f=d.get();i[u]=FQe({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xc(u=>{if(!Ok(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:v}=this.constraints[u];d.set(Bi(f,v,i[u]))})}addListeners(){if(!this.visualElement.current)return;$Qe.set(this.visualElement,this);const e=this.visualElement.current,n=ch(e,"pointerdown",f=>{const{drag:v,dragListener:x=!0}=this.getProps();v&&x&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();L4(f)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const u=sh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",({delta:f,hasLayoutChanged:v})=>{this.isDragging&&v&&(xc(x=>{const S=this.getAxisMotionValue(x);S&&(this.originPoint[x]+=f[x].translate,S.set(S.get()+f[x].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=mW,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function Ok(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function XQe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class qQe extends c1{constructor(e){super(e),this.removeGroupControls=us,this.removeListeners=us,this.controls=new KQe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||us}unmount(){this.removeGroupControls(),this.removeListeners()}}const L4e=t=>(e,n)=>{t&&zi.update(()=>t(e,n))};class YQe extends c1{constructor(){super(...arguments),this.removePointerDownListener=us}onPointerDown(e){this.session=new jbe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:L4e(e),onStart:L4e(n),onMove:r,onEnd:(o,u)=>{delete this.session,i&&zi.update(()=>i(o,u))}}}mount(){this.removePointerDownListener=ch(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function ZQe(){const t=Et.useContext(iX);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=Et.useId();return Et.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const sA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N4e(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Yn.test(t))t=parseFloat(t);else return t;const n=N4e(t,e.target.x),r=N4e(t,e.target.y);return`${n}% ${r}%`}},QQe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=n1.parse(t);if(i.length>5)return r;const o=n1.createTransformer(t),u=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;i[0+u]/=d,i[1+u]/=f;const v=Bi(d,f,.5);return typeof i[2+u]=="number"&&(i[2+u]/=v),typeof i[3+u]=="number"&&(i[3+u]/=v),o(i)}};class JQe extends Rge.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;sYe(eJe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),sA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,i||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||zi.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Xbe(t){const[e,n]=ZQe(),r=Et.useContext(Gye);return Rge.createElement(JQe,{...t,layoutGroup:r,switchLayoutGroup:Et.useContext(Wye),isPresent:e,safeToRemove:n})}const eJe={borderRadius:{...Vy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vy,borderTopRightRadius:Vy,borderBottomLeftRadius:Vy,borderBottomRightRadius:Vy,boxShadow:QQe},qbe=["TopLeft","TopRight","BottomLeft","BottomRight"],tJe=qbe.length,F4e=t=>typeof t=="string"?parseFloat(t):t,B4e=t=>typeof t=="number"||Yn.test(t);function nJe(t,e,n,r,i,o){i?(t.opacity=Bi(0,n.opacity!==void 0?n.opacity:1,rJe(r)),t.opacityExit=Bi(e.opacity!==void 0?e.opacity:1,0,iJe(r))):o&&(t.opacity=Bi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<tJe;u++){const d=`border${qbe[u]}Radius`;let f=U4e(e,d),v=U4e(n,d);if(f===void 0&&v===void 0)continue;f||(f=0),v||(v=0),f===0||v===0||B4e(f)===B4e(v)?(t[d]=Math.max(Bi(F4e(f),F4e(v),r),0),(kc.test(v)||kc.test(f))&&(t[d]+="%")):t[d]=v}(e.rotate||n.rotate)&&(t.rotate=Bi(e.rotate||0,n.rotate||0,r))}function U4e(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rJe=Ybe(0,.5,gX),iJe=Ybe(.5,.95,us);function Ybe(t,e,n){return r=>r<t?0:r>e?1:n(s_(t,e,r))}function z4e(t,e){t.min=e.min,t.max=e.max}function dl(t,e){z4e(t.x,e.x),z4e(t.y,e.y)}function V4e(t,e,n,r,i){return t-=e,t=uI(t,1/n,r),i!==void 0&&(t=uI(t,1/i,r)),t}function sJe(t,e=0,n=1,r=.5,i,o=t,u=t){if(kc.test(e)&&(e=parseFloat(e),e=Bi(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=Bi(o.min,o.max,r);t===o&&(d-=e),t.min=V4e(t.min,e,n,d,i),t.max=V4e(t.max,e,n,d,i)}function j4e(t,e,[n,r,i],o,u){sJe(t,e[n],e[r],e[i],e.scale,o,u)}const oJe=["x","scaleX","originX"],aJe=["y","scaleY","originY"];function H4e(t,e,n,r){j4e(t.x,e,oJe,n?n.x:void 0,r?r.x:void 0),j4e(t.y,e,aJe,n?n.y:void 0,r?r.y:void 0)}function G4e(t){return t.translate===0&&t.scale===1}function Zbe(t){return G4e(t.x)&&G4e(t.y)}function lJe(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Qbe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function W4e(t){return P0(t.x)/P0(t.y)}class uJe{constructor(){this.members=[]}add(e){xX(this.members,e),e.scheduleRender()}remove(e){if(SX(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $4e(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:f,rotateX:v,rotateY:x}=n;f&&(r+=`rotate(${f}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const cJe=(t,e)=>t.depth-e.depth;class dJe{constructor(){this.children=[],this.isDirty=!1}add(e){xX(this.children,e),this.isDirty=!0}remove(e){SX(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cJe),this.isDirty=!1,this.children.forEach(e)}}function hJe(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Oc(r),t(o-e))};return zi.read(r,!0),()=>Oc(r)}function pJe(t){window.MotionDebug&&window.MotionDebug.record(t)}function fJe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function mJe(t,e,n){const r=Ra(t)?t:K2(t);return r.start(wX("",r,e,n)),r.animation}const K4e=["","X","Y","Z"],X4e=1e3;let gJe=0;const g2={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Jbe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},d=e==null?void 0:e()){this.id=gJe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{g2.totalNodes=g2.resolvedTargetDeltas=g2.recalculatedProjection=0,this.nodes.forEach(bJe),this.nodes.forEach(EJe),this.nodes.forEach(CJe),this.nodes.forEach(_Je),pJe(g2)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new dJe)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new EX),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fJe(u),this.instance=u;const{layoutId:f,layout:v,visualElement:x}=this.options;if(x&&!x.current&&x.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(v||f)&&(this.isLayoutDirty=!0),t){let S;const M=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,S&&S(),S=hJe(M,250),sA.hasAnimatedSinceResize&&(sA.hasAnimatedSinceResize=!1,this.nodes.forEach(Y4e))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&x&&(f||v)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:M,hasRelativeTargetChanged:D,layout:G})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||x.getDefaultTransition()||AJe,{onLayoutAnimationStart:L,onLayoutAnimationComplete:U}=x.getProps(),C=!this.targetLayout||!Qbe(this.targetLayout,G)||D,H=!M&&D;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||M&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(S,H);const X={...Fbe(B,"layout"),onPlay:L,onComplete:U};(x.shouldReduceMotion||this.options.layoutRoot)&&(X.delay=0,X.type=!1),this.startAnimation(X)}else M||Y4e(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=G})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Oc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PJe),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const S=this.path[x];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(q4e);return}this.isUpdating||this.nodes.forEach(xJe),this.isUpdating=!1,this.nodes.forEach(SJe),this.nodes.forEach(vJe),this.nodes.forEach(yJe),this.clearAllSnapshots();const d=performance.now();Yo.delta=t1(0,1e3/60,d-Yo.timestamp),Yo.timestamp=d,Yo.isProcessing=!0,lH.update.process(Yo),lH.preRender.process(Yo),lH.render.process(Yo),Yo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(wJe),this.sharedNodes.forEach(TJe)}scheduleUpdateProjection(){zi.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){zi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Os(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!Zbe(this.projectionDelta),f=this.getTransformTemplate(),v=f?f(this.latestValues,""):void 0,x=v!==this.prevTransformTemplateValue;u&&(d||m2(this.latestValues)||x)&&(i(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),IJe(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Os();const d=u.measureViewportBox(),{scroll:f}=this.root;return f&&(Cf(d.x,f.offset.x),Cf(d.y,f.offset.y)),d}removeElementScroll(u){const d=Os();dl(d,u);for(let f=0;f<this.path.length;f++){const v=this.path[f],{scroll:x,options:S}=v;if(v!==this.root&&x&&S.layoutScroll){if(x.isRoot){dl(d,u);const{scroll:M}=this.root;M&&(Cf(d.x,-M.offset.x),Cf(d.y,-M.offset.y))}Cf(d.x,x.offset.x),Cf(d.y,x.offset.y)}}return d}applyTransform(u,d=!1){const f=Os();dl(f,u);for(let v=0;v<this.path.length;v++){const x=this.path[v];!d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&B4(f,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),m2(x.latestValues)&&B4(f,x.latestValues)}return m2(this.latestValues)&&B4(f,this.latestValues),f}removeTransform(u){const d=Os();dl(d,u);for(let f=0;f<this.path.length;f++){const v=this.path[f];if(!v.instance||!m2(v.latestValues))continue;gW(v.latestValues)&&v.updateSnapshot();const x=Os(),S=v.measurePageBox();dl(x,S),H4e(d,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,x)}return m2(this.latestValues)&&H4e(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==f;if(!(u||v&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:S,layoutId:M}=this.options;if(!(!this.layout||!(S||M))){if(this.resolvedRelativeTargetAt=Yo.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Os(),this.relativeTargetOrigin=Os(),gb(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),dl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Os(),this.targetWithTransforms=Os()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DQe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dl(this.target,this.layout.layoutBox),$be(this.target,this.targetDelta)):dl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Os(),this.relativeTargetOrigin=Os(),gb(this.relativeTargetOrigin,this.target,D.target),dl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}g2.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gW(this.parent.latestValues)||Wbe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let v=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(v=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===Yo.timestamp&&(v=!1),v)return;const{layout:x,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||S))return;dl(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,D=this.treeScale.y;jQe(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:G}=d;if(!G){this.projectionTransform&&(this.projectionDelta=F4(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=F4(),this.projectionDeltaWithTransform=F4());const B=this.projectionTransform;mb(this.projectionDelta,this.layoutCorrected,G,this.latestValues),this.projectionTransform=$4e(this.projectionDelta,this.treeScale),(this.projectionTransform!==B||this.treeScale.x!==M||this.treeScale.y!==D)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",G)),g2.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,d=!1){const f=this.snapshot,v=f?f.latestValues:{},x={...this.latestValues},S=F4();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const M=Os(),D=f?f.source:void 0,G=this.layout?this.layout.source:void 0,B=D!==G,L=this.getStack(),U=!L||L.members.length<=1,C=!!(B&&!U&&this.options.crossfade===!0&&!this.path.some(kJe));this.animationProgress=0;let H;this.mixTargetDelta=X=>{const fe=X/1e3;Z4e(S.x,u.x,fe),Z4e(S.y,u.y,fe),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gb(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MJe(this.relativeTarget,this.relativeTargetOrigin,M,fe),H&&lJe(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=Os()),dl(H,this.relativeTarget)),B&&(this.animationValues=x,nJe(x,v,this.latestValues,fe,C,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=fe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Oc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zi.update(()=>{sA.hasAnimatedSinceResize=!0,this.currentAnimation=mJe(0,X4e,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(X4e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:v,latestValues:x}=u;if(!(!d||!f||!v)){if(this!==u&&this.layout&&v&&e_e(this.options.animationType,this.layout.layoutBox,v.layoutBox)){f=this.target||Os();const S=P0(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+S;const M=P0(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+M}dl(d,f),B4(d,x),mb(this.projectionDeltaWithTransform,this.layoutCorrected,d,x)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new uJe),this.sharedNodes.get(u).add(d);const v=d.options.initialPromotionConfig;d.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const v=this.getStack();v&&v.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.rotate||f.rotateX||f.rotateY||f.rotateZ)&&(d=!0),!d)return;const v={};for(let x=0;x<K4e.length;x++){const S="rotate"+K4e[x];f[S]&&(v[S]=f[S],u.setStaticValue(S,0))}u.render();for(const x in v)u.setStaticValue(x,v[x]);u.scheduleRender()}getProjectionStyles(u={}){var d,f;const v={};if(!this.instance||this.isSVG)return v;if(this.isVisible)v.visibility="";else return{visibility:"hidden"};const x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,v.opacity="",v.pointerEvents=iA(u.pointerEvents)||"",v.transform=x?x(this.latestValues,""):"none",v;const S=this.getLead();if(!this.projectionDelta||!this.layout||!S.target){const B={};return this.options.layoutId&&(B.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,B.pointerEvents=iA(u.pointerEvents)||""),this.hasProjected&&!m2(this.latestValues)&&(B.transform=x?x({},""):"none",this.hasProjected=!1),B}const M=S.animationValues||S.latestValues;this.applyTransformsToTarget(),v.transform=$4e(this.projectionDeltaWithTransform,this.treeScale,M),x&&(v.transform=x(M,v.transform));const{x:D,y:G}=this.projectionDelta;v.transformOrigin=`${D.origin*100}% ${G.origin*100}% 0`,S.animationValues?v.opacity=S===this?(f=(d=M.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:v.opacity=S===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const B in nI){if(M[B]===void 0)continue;const{correct:L,applyTo:U}=nI[B],C=v.transform==="none"?M[B]:L(M[B],S);if(U){const H=U.length;for(let X=0;X<H;X++)v[U[X]]=C}else v[B]=C}return this.options.layoutId&&(v.pointerEvents=S===this?iA(u.pointerEvents)||"":"none"),v}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(q4e),this.root.sharedNodes.clear()}}}function vJe(t){t.updateLayout()}function yJe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?xc(S=>{const M=u?n.measuredBox[S]:n.layoutBox[S],D=P0(M);M.min=r[S].min,M.max=M.min+D}):e_e(o,n.layoutBox,r)&&xc(S=>{const M=u?n.measuredBox[S]:n.layoutBox[S],D=P0(r[S]);M.max=M.min+D,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[S].max=t.relativeTarget[S].min+D)});const d=F4();mb(d,r,n.layoutBox);const f=F4();u?mb(f,t.applyTransform(i,!0),n.measuredBox):mb(f,r,n.layoutBox);const v=!Zbe(d);let x=!1;if(!t.resumeFrom){const S=t.getClosestProjectingParent();if(S&&!S.resumeFrom){const{snapshot:M,layout:D}=S;if(M&&D){const G=Os();gb(G,n.layoutBox,M.layoutBox);const B=Os();gb(B,r,D.layoutBox),Qbe(G,B)||(x=!0),S.options.layoutRoot&&(t.relativeTarget=B,t.relativeTargetOrigin=G,t.relativeParent=S)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:d,hasLayoutChanged:v,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function bJe(t){g2.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _Je(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wJe(t){t.clearSnapshot()}function q4e(t){t.clearMeasurements()}function xJe(t){t.isLayoutDirty=!1}function SJe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Y4e(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EJe(t){t.resolveTargetDelta()}function CJe(t){t.calcProjection()}function PJe(t){t.resetRotation()}function TJe(t){t.removeLeadSnapshot()}function Z4e(t,e,n){t.translate=Bi(e.translate,0,n),t.scale=Bi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Q4e(t,e,n,r){t.min=Bi(e.min,n.min,r),t.max=Bi(e.max,n.max,r)}function MJe(t,e,n,r){Q4e(t.x,e.x,n.x,r),Q4e(t.y,e.y,n.y,r)}function kJe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const AJe={duration:.45,ease:[.4,0,.1,1]},J4e=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),ege=J4e("applewebkit/")&&!J4e("chrome/")?Math.round:us;function tge(t){t.min=ege(t.min),t.max=ege(t.max)}function IJe(t){tge(t.x),tge(t.y)}function e_e(t,e,n){return t==="position"||t==="preserve-aspect"&&!fW(W4e(e),W4e(n),.2)}const RJe=Jbe({attachResizeListener:(t,e)=>sh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bH={current:void 0},t_e=Jbe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bH.current){const t=new RJe({});t.mount(window),t.setOptions({layoutScroll:!0}),bH.current=t}return bH.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),DJe={pan:{Feature:YQe},drag:{Feature:qQe,ProjectionNode:t_e,MeasureLayout:Xbe}},OJe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function LJe(t){const e=OJe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function yW(t,e,n=1){const[r,i]=LJe(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return Bbe(u)?parseFloat(u):u}else return aW(i)?yW(i,e,n+1):i}function NJe(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const o=i.get();if(!aW(o))return;const u=yW(o,r);u&&i.set(u)});for(const i in e){const o=e[i];if(!aW(o))continue;const u=yW(o,r);u&&(e[i]=u,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:e,transitionEnd:n}}const FJe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),n_e=t=>FJe.has(t),BJe=t=>Object.keys(t).some(n_e),nge=t=>t===i9||t===Yn,rge=(t,e)=>parseFloat(t.split(", ")[e]),ige=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return rge(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?rge(o[1],t):0}},UJe=new Set(["x","y","z"]),zJe=k_.filter(t=>!UJe.has(t));function VJe(t){const e=[];return zJe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const hg={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ige(4,13),y:ige(5,14)};hg.translateX=hg.x;hg.translateY=hg.y;const jJe=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:u}=o,d={};u==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(v=>{d[v]=hg[v](r,o)}),e.render();const f=e.measureViewportBox();return n.forEach(v=>{const x=e.getValue(v);x&&x.jump(d[v]),t[v]=hg[v](f,o)}),t},HJe=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(n_e);let o=[],u=!1;const d=[];if(i.forEach(f=>{const v=t.getValue(f);if(!t.hasValue(f))return;let x=n[f],S=zy(x);const M=e[f];let D;if(iI(M)){const G=M.length,B=M[0]===null?1:0;x=M[B],S=zy(x);for(let L=B;L<G&&M[L]!==null;L++)D?mX(zy(M[L])===D):D=zy(M[L])}else D=zy(M);if(S!==D)if(nge(S)&&nge(D)){const G=v.get();typeof G=="string"&&v.set(parseFloat(G)),typeof M=="string"?e[f]=parseFloat(M):Array.isArray(M)&&D===Yn&&(e[f]=M.map(parseFloat))}else S!=null&&S.transform&&(D!=null&&D.transform)&&(x===0||M===0)?x===0?v.set(D.transform(x)):e[f]=S.transform(M):(u||(o=VJe(t),u=!0),d.push(f),r[f]=r[f]!==void 0?r[f]:e[f],v.jump(M))}),d.length){const f=d.indexOf("height")>=0?window.pageYOffset:null,v=jJe(e,t,d);return o.length&&o.forEach(([x,S])=>{t.getValue(x).set(S)}),t.render(),nR&&f!==null&&window.scrollTo({top:f}),{target:v,transitionEnd:r}}else return{target:e,transitionEnd:r}};function GJe(t,e,n,r){return BJe(e)?HJe(t,e,n,r):{target:e,transitionEnd:r}}const WJe=(t,e,n,r)=>{const i=NJe(t,e,r);return e=i.target,r=i.transitionEnd,GJe(t,e,n,r)},bW={current:null},r_e={current:!1};function $Je(){if(r_e.current=!0,!!nR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bW.current=t.matches;t.addListener(e),e()}else bW.current=!1}function KJe(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],u=n[i];if(Ra(o))t.addValue(i,o),lI(r)&&r.add(i);else if(Ra(u))t.addValue(i,K2(o,{owner:t})),lI(r)&&r.remove(i);else if(u!==o)if(t.hasValue(i)){const d=t.getValue(i);!d.hasAnimated&&d.set(o)}else{const d=t.getStaticValue(i);t.addValue(i,K2(d!==void 0?d:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const sge=new WeakMap,i_e=Object.keys(i_),XJe=i_e.length,oge=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],qJe=oX.length;class YJe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>zi.render(this.render,!1,!0);const{latestValues:d,renderState:f}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.isControllingVariants=iR(n),this.isVariantNode=Hye(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{});for(const S in x){const M=x[S];d[S]!==void 0&&Ra(M)&&(M.set(d[S],!1),lI(v)&&v.add(S))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,sge.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),r_e.current||$Je(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bW.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){sge.delete(this.current),this.projection&&this.projection.unmount(),Oc(this.notifyUpdate),Oc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=r9.has(e),i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&zi.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,o){let u,d;for(let f=0;f<XJe;f++){const v=i_e[f],{isEnabled:x,Feature:S,ProjectionNode:M,MeasureLayout:D}=i_[v];M&&(u=M),x(n)&&(!this.features[v]&&S&&(this.features[v]=new S(this)),D&&(d=D))}if(!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:f,layout:v,drag:x,dragConstraints:S,layoutScroll:M,layoutRoot:D}=n;this.projection.setOptions({layoutId:f,layout:v,alwaysMeasureLayout:!!x||S&&L4(S),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof v=="string"?v:"both",initialPromotionConfig:o,layoutScroll:M,layoutRoot:D})}return d}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Os()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<oge.length;r++){const i=oge[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=KJe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<qJe;r++){const i=oX[r],o=this.props[i];(r_(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=K2(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=fX(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ra(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new EX),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class s_e extends YJe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},o){let u=mQe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),u&&(u=i(u))),o){pQe(this,r,u);const d=WJe(this,r,u,n);n=d.transitionEnd,r=d.target}return{transition:e,transitionEnd:n,...r}}}function ZJe(t){return window.getComputedStyle(t)}class QJe extends s_e{readValueFromInstance(e,n){if(r9.has(n)){const r=_X(n);return r&&r.default||0}else{const r=ZJe(e),i=(Xye(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Kbe(e,n)}build(e,n,r,i){lX(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return pX(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ra(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){ebe(e,n,r,i)}}class JJe extends s_e{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(r9.has(n)){const r=_X(n);return r&&r.default||0}return n=tbe.has(n)?n:hX(n),e.getAttribute(n)}measureInstanceViewportBox(){return Os()}scrapeMotionValuesFromProps(e,n){return rbe(e,n)}build(e,n,r,i){cX(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){nbe(e,n,r,i)}mount(e){this.isSVGTag=dX(e.tagName),super.mount(e)}}const eet=(t,e)=>aX(t)?new JJe(e,{enableHardwareAcceleration:!1}):new QJe(e,{enableHardwareAcceleration:!0}),tet={layout:{ProjectionNode:t_e,MeasureLayout:Xbe}},net={...kQe,...XYe,...DJe,...tet},o_e=rYe((t,e)=>RYe(t,e,net,eet)),a_e=Et.createContext(null);function ret(t,e,n,r){if(!r)return t;const i=t.findIndex(x=>x.value===e);if(i===-1)return t;const o=r>0?1:-1,u=t[i+o];if(!u)return t;const d=t[i],f=u.layout,v=Bi(f.min,f.max,.5);return o===1&&d.layout.max+n>v||o===-1&&d.layout.min+n<v?sQe(t,i,i+o):t}function iet({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...o},u){const d=R_(()=>o_e(e)),f=[],v=Et.useRef(!1),x={axis:n,registerItem:(S,M)=>{M&&f.findIndex(D=>S===D.value)===-1&&(f.push({value:S,layout:M[n]}),f.sort(aet))},updateOrder:(S,M,D)=>{if(v.current)return;const G=ret(f,S,M,D);f!==G&&(v.current=!0,r(G.map(oet).filter(B=>i.indexOf(B)!==-1)))}};return Et.useEffect(()=>{v.current=!1}),Et.createElement(d,{...o,ref:u,ignoreStrict:!0},Et.createElement(a_e.Provider,{value:x},t))}const set=Et.forwardRef(iet);function oet(t){return t.value}function aet(t,e){return t.layout.min-e.layout.min}function l_e(t){const e=R_(()=>K2(t)),{isStatic:n}=Et.useContext(rX);if(n){const[,r]=Et.useState(t);Et.useEffect(()=>e.on("change",r),[])}return e}const uet=t=>typeof t=="object"&&t.mix,cet=t=>uet(t)?t.mix:void 0;function det(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],o=t[2+n],u=t[3+n],d=bX(i,o,{mixer:cet(o[0]),...u});return e?d(r):d}function u_e(t,e){const n=l_e(e()),r=()=>n.set(e());return r(),oW(()=>{const i=()=>zi.update(r,!1,!0),o=t.map(u=>u.on("change",i));return()=>{o.forEach(u=>u()),Oc(r)}}),n}function het(t){fb.current=[],t();const e=u_e(fb.current,t);return fb.current=void 0,e}function pet(t,e,n,r){if(typeof t=="function")return het(t);const i=typeof e=="function"?e:det(e,n,r);return Array.isArray(t)?age(t,i):age([t],([o])=>i(o))}function age(t,e){const n=R_(()=>[]);return u_e(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function lge(t,e=0){return Ra(t)?t:l_e(e)}function fet({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:o=!0,...u},d){const f=R_(()=>o_e(r)),v=Et.useContext(a_e),x={x:lge(e.x),y:lge(e.y)},S=pet([x.x,x.y],([L,U])=>L||U?1:"unset"),M=Et.useRef(null),{axis:D,registerItem:G,updateOrder:B}=v;return Et.useEffect(()=>{G(n,M.current)},[v]),Et.createElement(f,{drag:D,...u,dragSnapToOrigin:!0,style:{...e,x:x.x,y:x.y,zIndex:S},layout:o,onDrag:(L,U)=>{const{velocity:C}=U;C[D]&&B(n,x[D].get(),C[D]),i&&i(L,U)},onLayoutMeasure:L=>{M.current=L},ref:d,ignoreStrict:!0},t)}const met=Et.forwardRef(fet),c_e={Group:set,Item:met},get=Ke.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[Ke.jsx("circle",{cx:"7",cy:"7",r:"6"}),Ke.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),Ke.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),vet=Ke.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:Ke.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function yet(t){return Ke.jsx(c_e.Item,{value:t.title,children:Ke.jsxs("div",{children:[vet,Ke.jsx("span",{children:t.title}),Ke.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:get})]})},t.title)}function bet(t){const[e,n]=Et.useState(!1),[r,i]=Et.useState(t.options),o=v=>{t.onDragComplete(v),i(v)},u=v=>{const x=[...r];x.splice(v,1),o(x)},d=[];r.forEach((v,x)=>{d.push(Ke.jsx(yet,{index:x,title:v,onDelete:u},v))});let f="dropdown draggable";return t.subdropdown&&(f+=" subdropdown"),Ke.jsxs("div",{className:f,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Ke.jsx(Vye,{title:t.title}),Ke.jsx(c_e.Group,{axis:"y",values:r,onReorder:o,style:{visibility:e?"visible":"hidden"},children:d})]})}function _et(t){const{option:e}=t,[n,r]=Et.useState("");let i;switch(e.type){case"draggable":i=Ke.jsx(bet,{title:e.title,options:e.value,onDragComplete:o=>{e.onDragComplete!==void 0&&e.onDragComplete(o)},subdropdown:!0});break;case"dropdown":i=Ke.jsx(d_e,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":i=Ke.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return Ke.jsx("li",{className:n===e.title?"selected":"",children:i},vVe())}function d_e(t){const[e,n]=Et.useState(!1),r=[];t.options.map((o,u)=>{t.onSelect!==void 0&&(o.onSelect=t.onSelect),r.push(Ke.jsx(_et,{option:o},u))});let i="dropdown";return t.subdropdown&&(i+=" subdropdown"),Ke.jsxs("div",{className:i,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Ke.jsx(Vye,{title:t.title}),Ke.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function CX(t){const[e,n]=Et.useState(t.open!==void 0?t.open:!0),r=!e||t.children===void 0;return Ke.jsxs("div",{className:`accordion ${r?"hide":""}`,children:[Ke.jsxs("button",{className:"toggle",onClick:()=>{const i=!e;t.onToggle!==void 0&&t.onToggle(i),n(i)},children:[Ke.jsx("p",{className:`status ${e?"open":""}`,children:"Toggle"}),Ke.jsx("p",{className:"label",children:M2(t.label)})]}),t.button,Ke.jsx("div",{className:e?"open":"",children:Ke.jsx("div",{children:t.children})})]})}function h_e(t){const[e,n]=Et.useState(!1),r=t.child!==void 0&&t.child.children.length>0,i=[];return t.child!==void 0&&t.child.children.length>0&&t.child.children.map(o=>{i.push(Ke.jsx(h_e,{child:o,three:t.three},Math.random()))}),Ke.jsx(Ke.Fragment,{children:t.child!==void 0&&Ke.jsxs("div",{className:"childObject",children:[Ke.jsxs("div",{className:"child",children:[r?Ke.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,Ke.jsx("button",{className:"name",style:{left:r?"20px":"5px"},onClick:()=>{t.child!==void 0&&(t.three.getObject(t.child.uuid),e||n(!0))},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),Ke.jsx("div",{className:`icon ${xVe(t.child)}`})]}),Ke.jsx("div",{className:e?"open":"",children:Ke.jsx("div",{className:"container",children:i})})]},Math.random())})}function wet(t){var n;const e=[];return(n=t.child)==null||n.children.map(r=>{e.push(Ke.jsx(h_e,{child:r,three:t.three},Math.random()))}),Ke.jsx("div",{className:`scene ${t.class!==void 0?t.class:""}`,children:e})}const xet="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVRoge2Y0Q6EIAwE6cX//+X6cCFpSMEKVTdk501OpRNKiyelFC0b8Ps6gCwoggZF0KAIGhRBgyJoUAQNiqCxjciR9SLV//eZiAyvK3U8i/QVaQO2YyLSFVvlkdTKDjJCukh2ykR5ZEW+kHmlatl90RaBtDkK/w7CYhuRUEO0ee3l+J3m55Vm+17vtwjTnV1V3QA8qfbeUXCzRWDpiLLS+OyzvRW7IzW9R+okvclsqR09743bo0yUpc1+lSJvNsa002+Euk9GKzV7SmZDRIMiaFAEDYqgQRE0KIIGRdCgCBoUQeMEMERadX7YUz8AAAAASUVORK5CYII=";function Eet(t){return"items"in t}function X2(t){const e=[];return t.items.forEach(n=>{Eet(n)?e.push(Ke.jsx(X2,{title:M2(n.title),items:n.items},Math.random())):e.push(Ke.jsx(Zy,{title:n.title,prop:n.prop,value:n.value,type:n.type,min:n.min,max:n.max,step:n.step,disabled:n.disabled,options:n.options,onChange:(r,i)=>{n.onChange!==void 0&&n.onChange(r,i)}},Math.random()))}),Ke.jsx(CX,{label:t.title,open:t.expanded===!0,children:e})}function Cet(t){return!(t==="alphaHash"||t==="alphaToCoverage"||t==="attenuationDistance"||t==="blendAlpha"||t==="blendColor"||t==="blendDstAlpha"||t==="colorWrite"||t==="combine"||t==="defaultAttributeValues"||t==="depthFunc"||t==="forceSinglePass"||t==="glslVersion"||t==="linecap"||t==="linejoin"||t==="linewidth"||t==="normalMapType"||t==="precision"||t==="premultipliedAlpha"||t==="shadowSide"||t==="toneMapped"||t==="uniformsGroups"||t==="uniformsNeedUpdate"||t==="userData"||t==="vertexColors"||t==="version"||t==="wireframeLinecap"||t==="wireframeLinejoin"||t==="wireframeLinewidth"||t.slice(0,4)==="clip"||t.slice(0,7)==="polygon"||t.slice(0,7)==="stencil"||t.slice(0,2)==="is")}function Pet(t){switch(t){case"Alpha Map":return"alphaMap";case"Anisotropy Map":return"anisotropyMap";case"AO Map":return"aoMap";case"Bump Map":return"bumpMap";case"Clearcoat Map":return"clearcoatMap";case"Clearcoat Normal Map":return"clearcoatNormalMap";case"Clearcoat Roughness Map":return"clearcoatRoughnessMap";case"Displacement Map":return"displacementMap";case"Emissive Map":return"emissiveMap";case"Iridescence Map":return"iridescenceMap";case"Iridescence Thickness Map":return"iridescenceThicknessMap";case"Map":return"map";case"Matcap":return"matcap";case"Normal Map":return"normalMap";case"Roughness Map":return"roughnessMap";case"Sheen Color Map":return"sheenColorMap";case"Sheen Roughness Map":return"sheenRoughnessMap";case"Specular Color Map":return"specularColorMap";case"Specular Map Intensity":return"specularIntensityMap";case"Thickness Map":return"thicknessMap";case"Transmission Map":return"transmissionMap"}return t}function ii(t){switch(t){case"alphaMap":return"Alpha Map";case"anisotropyMap":return"Anisotropy Map";case"anisotropyRotation":return"Anisotropy Rotation";case"aoMap":return"AO Map";case"aoMapIntensity":return"AO Map Intensity";case"attenuationColor":return"Attenuation Color";case"blendAlpha":return"Blend Alpha";case"blendColor":return"Blend Color";case"blendDst":return"Blend Dst";case"blendDstAlpha":return"Blend Dst Alha";case"blendEquation":return"Blend Equation";case"blendEquationAlpha":return"Blend Equation Alpha";case"blending":return"Blending";case"blendSrc":return"Blend Src";case"blendSrcAlpha":return"Blend Src Alpha";case"bumpMap":return"Bump Map";case"bumpScale":return"Bump Scale";case"clearcoatMap":return"Clearcoat Map";case"clearcoatNormalMap":return"Clearcoat Normal Map";case"clearcoatNormalScale":return"Clearcoat Normal Scale";case"clearcoatRoughness":return"Clearcoat Roughness";case"clearcoatRoughnessMap":return"Clearcoat Roughness Map";case"color":return"Color";case"defines":return"Defines";case"depthTest":return"Depth Test";case"depthWrite":return"Depth Write";case"displacementBias":return"Displacement Bias";case"displacementMap":return"Displacement Map";case"displacementScale":return"Displacement Scale";case"dithering":return"Dithering";case"emissive":return"Emissive";case"emissiveMap":return"Emissive Map";case"emissiveIntensity":return"Emissive Intensity";case"envMap":return"Environment Map";case"envMapIntensity":return"Environment Map Intensity";case"extensions":return"Extensions";case"flatShading":return"Flat Shading";case"fragmentShader":return"Fragment Shader";case"fog":return"Fog";case"gradientMap":return"Gradient Map";case"ior":return"IOR";case"iridescenceIOR":return"Iridescence IOR";case"iridescenceMap":return"Iridescence Map";case"iridescenceThicknessMap":return"Iridescence Thickness Map";case"iridescenceThicknessRange":return"Iridescence Thickness Range";case"lights":return"Lights";case"lightMap":return"Light Map";case"lightMapIntensity":return"Light Map Intensity";case"map":return"Map";case"matcap":return"Matcap";case"metalness":return"Metalness";case"metalnessMap":return"Metalness Map";case"name":return"Name";case"normalMap":return"Normal Map";case"normalScale":return"Normal Scale";case"opacity":return"Opacity";case"reflectivity":return"Reflectivity";case"refractionRatio":return"Refraction Ratio";case"roughness":return"Roughness";case"roughnessMap":return"Roughness Map";case"sheenColor":return"Sheen Color";case"sheenColorMap":return"Sheen Color Map";case"sheenRoughness":return"Sheen Roughness";case"sheenRoughnessMap":return"Sheen Roughness Map";case"shininess":return"Shininess";case"side":return"Side";case"size":return"Size";case"sizeAttenuation":return"Size Attenuation";case"specular":return"Specular";case"specularColor":return"Specular Color";case"specularColorMap":return"Specular Color Map";case"specularIntensity":return"Specular Intensity";case"specularIntensityMap":return"Specular Map Intensity";case"thickness":return"Thickness";case"thicknessMap":return"Thickness Map";case"transmission":return"Transmission";case"transmissionMap":return"Transmission Map";case"transparent":return"Transparent";case"type":return"Type";case"uuid":return"UUID";case"uniforms":return"Uniforms";case"vertexShader":return"Vertex Shader";case"visible":return"Visible";case"wireframe":return"Wireframe"}return t}function p_e(t){return t.toLowerCase().search("intensity")>-1||t==="anisotropyRotation"||t==="blendAlpha"||t==="bumpScale"||t==="clearcoatRoughness"||t==="displacementBias"||t==="displacementScale"||t==="metalness"||t==="opacity"||t==="reflectivity"||t==="refractionRatio"||t==="roughness"||t==="sheenRoughness"||t==="thickness"}function Tet(){const t=document.createElement("input");return t.type="file",new Promise((e,n)=>{t.addEventListener("change",function(){if(t.files===null)n();else{const r=t.files[0],i=new FileReader;i.onload=function(o){e(o.target.result)},i.readAsDataURL(r)}}),t.click()})}const Met=[{title:"Front",value:Ac},{title:"Back",value:Ps},{title:"Double",value:Ca}],ket=[{title:"No Blending",value:xl},{title:"Normal",value:P2},{title:"Additive",value:TG},{title:"Subtractive",value:MG},{title:"Multiply",value:kG},{title:"Custom",value:U8e}],Aet=[{title:"Add",value:Mf},{title:"Subtract",value:z8e},{title:"Reverse Subtract",value:V8e},{title:"Min",value:AG},{title:"Max",value:IG}],Iet=[{title:"Zero",valye:g$},{title:"One",valye:v$},{title:"Src Color",valye:y$},{title:"One Minus Src Color",valye:b$},{title:"Src Alpha",valye:Lb},{title:"One Minus Src Alpha",valye:Nb},{title:"Dst Alpha",valye:_$},{title:"One Minus Dst Alpha",valye:w$},{title:"Dst Color",valye:x$},{title:"One Minus Dst Color",valye:S$},{title:"Src Alpha Saturate",valye:j8e},{title:"Constant Color",valye:E$},{title:"One Minus Constant Color",valye:C$},{title:"Constant Alpha",valye:P$},{title:"One Minus Constant Alpha",valye:T$}],Ret=[{title:"Zero",valye:g$},{title:"One",valye:v$},{title:"Src Color",valye:y$},{title:"One Minus Src Color",valye:b$},{title:"Src Alpha",valye:Lb},{title:"One Minus Src Alpha",valye:Nb},{title:"Dst Alpha",valye:_$},{title:"One Minus Dst Alpha",valye:w$},{title:"Dst Color",valye:x$},{title:"One Minus Dst Color",valye:S$},{title:"Constant Color",valye:E$},{title:"One Minus Constant Color",valye:C$},{title:"Constant Alpha",valye:P$},{title:"One Minus Constant Alpha",valye:T$}];function jy(t,e){t.needsUpdate=!0,t.type="option",t.options=e}function Det(t,e,n,r){return{type:"boolean",title:ii(t),prop:t,value:e,needsUpdate:!0,onChange:(i,o)=>{var d;r.updateObject(n.uuid,`material.${t}`,o),r.updateObject(n.uuid,"material.needsUpdate",!0);const u=(d=r.scene)==null?void 0:d.getObjectByProperty("uuid",n.uuid);u!==void 0&&Er(u,`material.${t}`,o)}}}function Oet(t,e,n,r){const i={type:"number",title:ii(t),prop:t,value:e,min:void 0,max:void 0,step:.01,needsUpdate:!0,onChange:(o,u)=>{var f;r.updateObject(n.uuid,`material.${t}`,u),r.updateObject(n.uuid,"material.needsUpdate",!0);const d=(f=r.scene)==null?void 0:f.getObjectByProperty("uuid",n.uuid);d!==void 0&&Er(d,`material.${t}`,u)}};switch(t){case"blending":jy(i,ket);break;case"blendDst":jy(i,Ret);break;case"blendEquation":jy(i,Aet);break;case"blendSrc":jy(i,Iet);break;case"side":jy(i,Met);break}return p_e(t)&&(i.value=Number(e),i.type="range",i.min=0,i.max=1,i.step=.01),i}function Let(t,e,n,r){const i={type:"string",title:ii(t),prop:t,value:e,needsUpdate:!0,onChange:(u,d)=>{var v;r.updateObject(n.uuid,`material.${t}`,d),r.updateObject(n.uuid,"material.needsUpdate",!0);const f=(v=r.scene)==null?void 0:v.getObjectByProperty("uuid",n.uuid);f!==void 0&&Er(f,`material.${t}`,d)}};return(t==="vertexShader"||t==="fragmentShader")&&(i.disabled=!1,i.latest=i.value,i.onChange=(u,d)=>{i.latest=d}),i}function _H(t){return t.x!==void 0&&t.y!==void 0&&t.z===void 0}function wH(t){return t.x!==void 0&&t.y!==void 0&&t.z!==void 0&&t.w===void 0}function xH(t){return t.x!==void 0&&t.y!==void 0&&t.z!==void 0&&t.w!==void 0}function Net(t,e,n,r){const i=[];if(e.isColor)return{title:ii(t),prop:t,type:"color",value:e,onChange:(o,u)=>{var v;const d=new vn(u);r.updateObject(n.uuid,`material.${t}`,d);const f=(v=r.scene)==null?void 0:v.getObjectByProperty("uuid",n.uuid);f!==void 0&&Er(f,`material.${t}`,d)}};if(Array.isArray(e)){for(const o in e)i.push({title:`${o}`,type:`${typeof e[o]}`,value:e[o],onChange:(u,d)=>{var v;r.updateObject(n.uuid,`material.${t}`,d);const f=(v=r.scene)==null?void 0:v.getObjectByProperty("uuid",n.uuid);f!==void 0&&Er(f,`material.${t}`,d)}});return{title:ii(t),items:i}}else{if(_H(e))return{title:ii(t),prop:t,type:"vector2",value:e,onChange:(o,u)=>{var f;r.updateObject(n.uuid,`material.${t}`,u);const d=(f=r.scene)==null?void 0:f.getObjectByProperty("uuid",n.uuid);d!==void 0&&Er(d,`material.${t}`,u)}};if(wH(e))return{title:ii(t),prop:t,type:"grid3",value:e,onChange:(o,u)=>{var f;r.updateObject(n.uuid,`material.${t}`,u);const d=(f=r.scene)==null?void 0:f.getObjectByProperty("uuid",n.uuid);d!==void 0&&Er(d,`material.${t}`,u)}};if(xH(e))return{title:ii(t),prop:t,type:"grid4",value:e,onChange:(o,u)=>{var f;r.updateObject(n.uuid,`material.${t}`,u);const d=(f=r.scene)==null?void 0:f.getObjectByProperty("uuid",n.uuid);d!==void 0&&Er(d,`material.${t}`,u)}};if(e.src!==void 0)return{title:ii(t),type:"image",value:e,onChange:(o,u)=>{var v;const d=Pet(t);r.createTexture(n.uuid,`material.${d}`,u);const f=(v=r.scene)==null?void 0:v.getObjectByProperty("uuid",n.uuid);f!==void 0&&db(u).then(x=>{Er(f,`material.${d}`,x),Er(f,"material.needsUpdate",!0)})}};switch(t){case"defines":for(const o in e)i.push({title:M2(`${o}`),type:"string",value:e[o].toString(),disabled:!0});if(i.length>0)return{title:ii(t),items:i};break;case"extensions":for(const o in e)i.push({title:M2(`${o}`),type:"boolean",value:e[o],disabled:!0});if(i.length>0)return{title:ii(t),items:i};break;case"uniforms":for(const o in e){const u=e[o].value,d=typeof u;if(u.isColor)i.push({title:ii(o),prop:o,type:"color",value:u,onChange:(f,v)=>{var M;const x=new vn(v);r.updateObject(n.uuid,`material.uniforms.${o}.value`,x);const S=(M=r.scene)==null?void 0:M.getObjectByProperty("uuid",n.uuid);S!==void 0&&Er(S,`material.uniforms.${o}.value`,x)}});else if(Array.isArray(u)){const f=[];for(const v in u)f.push({title:`${v}`,type:`${typeof u[v]}`,value:u[v],onChange:(x,S)=>{var D;r.updateObject(n.uuid,`material.uniforms.${o}.value.${v}`,S);const M=(D=r.scene)==null?void 0:D.getObjectByProperty("uuid",n.uuid);M!==void 0&&Er(M,`material.uniforms.${o}.value.${v}`,S)}});i.push({title:ii(o),items:f})}else if(_H(u))i.push({title:`${ii(o)}`,prop:o,type:"vector2",value:u,onChange:(f,v)=>{var S;r.updateObject(n.uuid,`material.uniforms.${o}.value`,v);const x=(S=r.scene)==null?void 0:S.getObjectByProperty("uuid",n.uuid);x!==void 0&&Er(x,`material.uniforms.${o}.value`,v)}});else if(wH(u))i.push({title:`${ii(o)}`,prop:o,type:"grid3",value:u,onChange:(f,v)=>{var S;r.updateObject(n.uuid,`material.uniforms.${o}.value`,v);const x=(S=r.scene)==null?void 0:S.getObjectByProperty("uuid",n.uuid);x!==void 0&&Er(x,`material.uniforms.${o}.value`,v)}});else if(xH(u))i.push({title:`${ii(o)}`,prop:o,type:"grid4",value:u,onChange:(f,v)=>{var S;r.updateObject(n.uuid,`material.uniforms.${o}.value`,v);const x=(S=r.scene)==null?void 0:S.getObjectByProperty("uuid",n.uuid);x!==void 0&&Er(x,`material.uniforms.${o}.value`,v)}});else if(d==="number"){const f={title:ii(o),prop:o,type:"number",value:u,step:.01,onChange:(v,x)=>{var M;r.updateObject(n.uuid,`material.uniforms.${o}.value`,x);const S=(M=r.scene)==null?void 0:M.getObjectByProperty("uuid",n.uuid);S!==void 0&&Er(S,`material.uniforms.${o}.value`,x)}};p_e(o)&&(f.type="range",f.min=0,f.max=1),i.push(f)}else if(d==="string")i.push({title:ii(o),prop:o,type:d,value:u,onChange:(f,v)=>{var S;r.updateObject(n.uuid,`material.uniforms.${o}.value`,v);const x=(S=r.scene)==null?void 0:S.getObjectByProperty("uuid",n.uuid);x!==void 0&&Er(x,`material.uniforms.${o}.value`,v)}});else if(u.src!==void 0)i.push({title:ii(o),type:"image",value:u.src,onChange:(f,v)=>{var M;const x=`material.uniforms.${o}.value`;r.createTexture(n.uuid,x,v);const S=(M=r.scene)==null?void 0:M.getObjectByProperty("uuid",n.uuid);S!==void 0&&db(v).then(D=>{Er(S,x,D),Er(S,"material.needsUpdate",!0)})}});else if(u.elements!==void 0)i.push({title:`${ii(o)}`,prop:o,type:u.elements.length>9?"grid4":"grid3",value:u,onChange:(f,v)=>{var S;r.updateObject(n.uuid,`material.uniforms.${o}.value`,v);const x=(S=r.scene)==null?void 0:S.getObjectByProperty("uuid",n.uuid);x!==void 0&&Er(x,`material.uniforms.${o}.value`,v)}});else{const f=[],v=u;for(const x in v){const S=x,M=v[x],D=typeof M,G=`material.uniforms.${o}.value.${S}`;M.isColor?f.push({title:ii(S),prop:S,type:"color",value:M,onChange:(B,L)=>{var H;const U=new vn(L);r.updateObject(n.uuid,G,U);const C=(H=r.scene)==null?void 0:H.getObjectByProperty("uuid",n.uuid);C!==void 0&&Er(C,G,U)}}):_H(M)?f.push({title:`${ii(S)}`,prop:S,type:"vector2",value:M,onChange:(B,L)=>{var C;r.updateObject(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&Er(U,G,L)}}):wH(M)?f.push({title:`${ii(S)}`,prop:S,type:"vector3",value:M,onChange:(B,L)=>{var C;r.updateObject(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&Er(U,G,L)}}):xH(M)?f.push({title:`${ii(S)}`,prop:S,type:"vector4",value:M,onChange:(B,L)=>{var C;r.updateObject(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&Er(U,G,L)}}):D==="number"?f.push({title:ii(S),prop:S,type:"number",value:M,step:.01,onChange:(B,L)=>{var C;r.updateObject(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&Er(U,G,L)}}):D==="string"?f.push({title:ii(S),prop:S,type:"string",value:M,onChange:(B,L)=>{var C;r.updateObject(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&Er(U,G,L)}}):M.src!==void 0?f.push({title:ii(S),type:"image",value:M.src,onChange:(B,L)=>{var C;r.createTexture(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&db(L).then(H=>{Er(U,G,H),Er(U,"material.needsUpdate",!0)})}}):M.elements!==void 0&&f.push({title:ii(S),prop:S,type:M.elements.length>9?"grid4":"grid3",value:M,step:.01,onChange:(B,L)=>{var C;r.updateObject(n.uuid,G,L);const U=(C=r.scene)==null?void 0:C.getObjectByProperty("uuid",n.uuid);U!==void 0&&Er(U,G,L)}})}f.length>0&&(f.sort((x,S)=>x.title<S.title?-1:x.title>S.title?1:0),i.push({title:M2(o),items:f}))}}if(i.sort((o,u)=>o.title<u.title?-1:o.title>u.title?1:0),i.length>0)return{title:ii(t),items:i};break;default:console.log(">>> other prop to add...",t);break}}}function uge(t,e,n){const r=[];for(const i in t){if(!Cet(i))continue;const o=typeof t[i],u=t[i];if(o==="boolean")r.push(Det(i,u,e,n));else if(o==="number")r.push(Oet(i,u,e,n));else if(o==="string")r.push(Let(i,u,e,n));else if(o==="object"){const d=Net(i,u,e,n);d!==void 0&&r.push(d)}else u!==void 0&&console.log("other:",i,o,u)}return r.sort((i,o)=>i.title<o.title?-1:i.title>o.title?1:0),r.push({title:"Update Material",type:"button",onChange:()=>{n.updateObject(e.uuid,"material.needsUpdate",!0)}}),r}function Fet(t,e){const n=t.material;if(Array.isArray(n)){const r=[],i=n.length;for(let o=0;o<i;o++)r.push(Ke.jsx(X2,{title:`Material ${o}`,items:uge(n[o],t,e)},`Material ${o}`));return Ke.jsx(Ke.Fragment,{children:r})}else return Ke.jsx(X2,{title:"Material",items:uge(n,t,e)})}function Bet(t){const[e,n]=Et.useState(t.defaultValue);return Et.useEffect(()=>{var M,D,G;let r=!1,i=-1,o=0,u=t.defaultValue;const d=B=>{var L;r=!0,o=Number((L=t.input.current)==null?void 0:L.value),i=B.clientX,document.addEventListener("mouseup",v,!1),document.addEventListener("mousemove",f,!1),document.addEventListener("contextmenu",v,!1)},f=B=>{if(!r)return;const L=t.step!==void 0?t.step:1,U=(B.clientX-i)*L;u=Number((o+U).toFixed(4)),t.min!==void 0&&(u=Math.max(u,t.min)),t.max!==void 0&&(u=Math.min(u,t.max)),t.onChange!==void 0&&t.onChange(u),n(u)},v=()=>{r=!1,document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",f),document.removeEventListener("contextmenu",v)},x=B=>{const L=Number(B.target.value);n(L)},S=B=>{const L=Number(B.target.value);t.onChange!==void 0&&t.onChange(L),n(L)};return(M=t.input.current)==null||M.addEventListener("input",x),(D=t.label.current)==null||D.addEventListener("mousedown",d,!1),t.sliderRef!==void 0&&((G=t.sliderRef.current)==null||G.addEventListener("input",S)),()=>{var B,L,U;(B=t.input.current)==null||B.removeEventListener("input",x),(L=t.label.current)==null||L.removeEventListener("mousedown",d),t.sliderRef!==void 0&&((U=t.sliderRef.current)==null||U.removeEventListener("input",S)),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",f),document.removeEventListener("contextmenu",v)}},[]),e}function pg(t){const e=Et.useRef(null),n=Et.useRef(null),r=Bet({label:t.labelRef,input:e,sliderRef:n,defaultValue:t.value,min:t.min,max:t.max,step:t.step,onChange:i=>{t.onChange!==void 0&&t.onChange(t.prop,i)}});return Ke.jsxs(Ke.Fragment,{children:[t.type==="number"&&Ke.jsx("input",{alt:t.alt,className:t.className,ref:e,type:"number",value:r,min:t.min,max:t.max,step:t.step,disabled:t.disabled,onChange:i=>{const o=Number(i.target.value);t.onChange!==void 0&&t.onChange(t.prop,o)}}),t.type==="range"&&Ke.jsxs(Ke.Fragment,{children:[Ke.jsx("input",{type:"text",value:r.toString(),disabled:t.disabled,ref:e,className:"min",onChange:i=>{const o=Number(i.target.value);t.onChange!==void 0&&t.onChange(t.prop,o)}}),Ke.jsx("input",{disabled:t.disabled,type:"range",value:r,min:t.min,max:t.max,step:t.step,ref:n,onChange:K$})]})]})}function Uet(t){const e=Et.useRef(null),n=Et.useRef(null),r=Et.useRef(null),i=Et.useRef(null),o=Et.useRef(null),u=Et.useRef(null),[d,f]=Et.useState(t.value),[v,x]=Et.useState({min:t.min,max:t.max}),[S,M]=Et.useState(!1);function D(){S||(window.addEventListener("mousemove",B),window.addEventListener("mouseup",G),window.addEventListener("mouseup",G),M(!0))}function G(){window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",G),M(!1)}function B(H){const X=o.current.getBoundingClientRect(),fe=f2(0,99,H.clientX-X.left)/99,q=f2(0,99,H.clientY-X.top)/99,pe=cb(Y3e(v.min,v.max,fe),3),xe=cb(Y3e(v.min,v.max,q),3);t.onChange({target:{value:{x:pe,y:xe}}}),f({x:pe,y:xe})}function L(H){let X=d.x,fe=d.y;H.target===e.current?X=Number(H.target.value):fe=Number(H.target.value),f({x:X,y:fe})}function U(){const H=Number(r.current.value);x({min:H,max:v.max}),(d.x<H||d.y<H)&&f({x:f2(H,v.max,d.x),y:f2(H,v.max,d.y)})}function C(){const H=Number(i.current.value);x({min:v.min,max:H}),(d.x>H||d.y>H)&&f({x:f2(v.min,H,d.x),y:f2(v.min,H,d.y)})}return Et.useEffect(()=>{const H=q3e(v.min,v.max,d.x),X=q3e(v.min,v.max,d.y);u.current.style.left=`${H*100}%`,u.current.style.top=`${X*100}%`},[v,d]),Ke.jsxs("div",{className:"vector2",children:[Ke.jsxs("div",{className:"fields",children:[Ke.jsxs("div",{children:[Ke.jsx("label",{children:"X:"}),Ke.jsx("input",{ref:e,type:"number",value:d.x,min:v.min,max:v.max,step:.01,onChange:L})]}),Ke.jsxs("div",{children:[Ke.jsx("label",{children:"Y:"}),Ke.jsx("input",{ref:n,type:"number",value:d.y,min:v.min,max:v.max,step:.01,onChange:L})]}),Ke.jsxs("div",{children:[Ke.jsx("label",{children:"Min:"}),Ke.jsx("input",{ref:r,type:"number",value:v.min,step:.01,onChange:U})]}),Ke.jsxs("div",{children:[Ke.jsx("label",{children:"Max:"}),Ke.jsx("input",{ref:i,type:"number",value:v.max,step:.01,onChange:C})]})]}),Ke.jsxs("div",{className:"input",ref:o,onMouseDown:D,onMouseUp:G,children:[Ke.jsx("div",{className:"x"}),Ke.jsx("div",{className:"y"}),Ke.jsx("div",{className:"pt",ref:u})]})]})}function zet(t){const e=t.value.x!==void 0,n=[];if(e){const r=Et.useMemo(()=>t.value,[]),i=(u,d)=>{r[u]=d,t.onChange({target:{value:r}})};["x","y","z"].forEach(u=>{const d=Et.useRef(null);n.push(Ke.jsxs("div",{children:[Ke.jsx("label",{ref:d,children:u.toUpperCase()}),Ke.jsx(pg,{value:r.x,type:"number",prop:u,step:.01,labelRef:d,onChange:i})]},u))})}else{const r=Et.useMemo(()=>t.value,[]),i=(o,u)=>{const d=Number(o);r.elements[d]=u,t.onChange({target:{value:r}})};for(let o=0;o<9;o++){const u=Et.useRef(null);n.push(Ke.jsxs("div",{children:[Ke.jsx("label",{ref:u,children:o+1}),Ke.jsx(pg,{value:r.elements[o],type:"number",prop:o.toString(),step:.01,labelRef:u,onChange:i})]},o.toString()))}}return Ke.jsx("div",{className:"grid3",children:n})}function Vet(t){const e=t.value.x!==void 0,n=[];if(e){const r=Et.useMemo(()=>t.value,[]),i=(u,d)=>{r[u]=d,t.onChange({target:{value:r}})};["x","y","z","w"].forEach(u=>{const d=Et.useRef(null);n.push(Ke.jsxs("div",{children:[Ke.jsx("label",{ref:d,children:u.toUpperCase()}),Ke.jsx(pg,{value:r.x,type:"number",prop:u,step:.01,labelRef:d,onChange:i})]},u))})}else{const r=Et.useMemo(()=>t.value,[]),i=(o,u)=>{const d=Number(o);r.elements[d]=u,t.onChange({target:{value:r}})};for(let o=0;o<16;o++){const u=Et.useRef(null);n.push(Ke.jsxs("div",{children:[Ke.jsx("label",{ref:u,children:o+1}),Ke.jsx(pg,{value:r.elements[o],type:"number",prop:o.toString(),step:.01,labelRef:u,onChange:i})]},o.toString()))}}return Ke.jsx("div",{className:"grid4",children:n})}function Zy(t){var x;let e=t.value;e!==void 0&&e.isColor!==void 0&&(e=bVe(t.value));const[n,r]=Et.useState(e),i=Et.useRef(null),o=Et.useRef(null),u=S=>{let M=S.target.value;t.type==="boolean"?M=S.target.checked:t.type==="option"&&(M=t.options[M].value),r(M),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,M)},d={};t.disabled&&(d.opacity=.8);const f=t.type==="string"&&(n.length>100||n.search(`
`)>-1),v=f||t.type==="image"||t.type==="vector2";return Ke.jsxs("div",{className:`field ${v?"block":""}`,style:d,children:[t.type!=="button"&&Ke.jsx("label",{ref:i,children:M2(t.title)},"fieldLabel"),t.type==="string"&&!f&&Ke.jsx("input",{type:"text",disabled:t.disabled,onChange:u,value:n}),t.type==="string"&&f&&Ke.jsx("textarea",{cols:50,rows:10,disabled:t.disabled!==void 0?t.disabled:!0,onChange:u,value:n}),t.type==="boolean"&&Ke.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:u,checked:n}),t.type==="number"&&Ke.jsx(pg,{value:n,type:t.type,prop:t.prop!==void 0?t.prop:t.title,min:t.min,max:t.max,step:t.step,disabled:t.disabled,labelRef:i,onChange:t.onChange}),t.type==="range"&&Ke.jsx(pg,{value:n,type:t.type,prop:t.prop!==void 0?t.prop:t.title,min:t.min,max:t.max,step:t.step,disabled:t.disabled,labelRef:i,onChange:t.onChange}),t.type==="color"&&Ke.jsxs(Ke.Fragment,{children:[Ke.jsx("input",{type:"text",value:n.toString(),onChange:u,disabled:t.disabled,className:"color"}),Ke.jsx("input",{type:"color",value:n,onChange:u,disabled:t.disabled})]}),t.type==="button"&&Ke.jsx("button",{disabled:t.disabled,onClick:()=>{t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,!0)},children:t.title}),t.type==="image"&&Ke.jsx("img",{ref:o,onClick:()=>{Tet().then(S=>{o.current.src=S,t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,S)})},src:n.length>0?n:xet}),t.type==="option"&&Ke.jsx(Ke.Fragment,{children:Ke.jsx("select",{onChange:u,disabled:t.disabled,defaultValue:t.value,children:(x=t.options)==null?void 0:x.map((S,M)=>Ke.jsx("option",{value:S.value,children:M2(S.title)},M))})}),t.type==="vector2"&&Ke.jsx(Uet,{value:n,min:0,max:1,onChange:u}),t.type==="grid3"&&Ke.jsx(zet,{value:n,onChange:u}),t.type==="grid4"&&Ke.jsx(Vet,{value:n,onChange:u})]})}function cge(t){switch(t){case"fov":return"FOV";case"zoom":return"Zoom";case"near":return"Near";case"far":return"Far";case"focus":return"Focus";case"aspect":return"Aspect";case"filmGauge":return"Film Gauge";case"filmOffset":return"Film Offset";case"left":return"Left";case"right":return"Right";case"top":return"Top";case"bottom":return"Bottom"}return t}function jet(t,e){const n=[];if(t.perspectiveCameraInfo!==void 0)for(const r in t.perspectiveCameraInfo)n.push({title:cge(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var d;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(d=e.scene)==null?void 0:d.getObjectByProperty("uuid",t.uuid);u!==void 0&&(Er(u,i,o),u.updateProjectionMatrix())}});else if(t.orthographicCameraInfo!==void 0)for(const r in t.orthographicCameraInfo)n.push({title:cge(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var d;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(d=e.scene)==null?void 0:d.getObjectByProperty("uuid",t.uuid);u!==void 0&&(Er(u,i,o),u.updateProjectionMatrix())}});return Ke.jsx(X2,{title:"Camera",items:n})}const Het=Math.PI/180,Get=180/Math.PI;function p4(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Wet(t){return t*Het}function SH(t){return t*Get}function $et(t,e){const n=new Bn;n.elements=t.matrix;const r=new Oe,i=new Ea,o=new Oe;t.uuid.length>0&&(r.setFromMatrixPosition(n),i.setFromRotationMatrix(n),o.setFromMatrixScale(n));const u=(f,v)=>{var S;e.updateObject(t.uuid,f,v);const x=(S=e.scene)==null?void 0:S.getObjectByProperty("uuid",t.uuid);x!==void 0&&Er(x,f,v)},d=(f,v)=>{u(f,Wet(v))};return Ke.jsx(X2,{title:"Transform",items:[{title:"Position X",prop:"position.x",type:"number",value:r.x,onChange:u},{title:"Position Y",prop:"position.y",type:"number",value:r.y,onChange:u},{title:"Position Z",prop:"position.z",type:"number",value:r.z,onChange:u},{title:"Rotation X",prop:"rotation.x",type:"number",value:cb(SH(i.x)),min:-360,max:360,step:.1,onChange:d},{title:"Rotation Y",prop:"rotation.y",type:"number",value:cb(SH(i.y)),min:-360,max:360,step:.1,onChange:d},{title:"Rotation Z",prop:"rotation.z",type:"number",value:cb(SH(i.z)),min:-360,max:360,step:.1,onChange:d},{title:"Scale X",prop:"scale.x",type:"number",value:o.x,step:.01,onChange:u},{title:"Scale Y",prop:"scale.y",type:"number",value:o.y,step:.01,onChange:u},{title:"Scale Z",prop:"scale.z",type:"number",value:o.z,step:.01,onChange:u}]})}function dge(t){switch(t){case"color":return"Color";case"intensity":return"Intensity";case"decay":return"Decay";case"distance":return"Distance";case"angle":return"Angle";case"penumbra":return"Penumbra";case"groundColor":return"Ground Color";case"width":return"Width";case"height":return"Height"}return t}function Ket(t,e){const n=[];if(t.lightInfo!==void 0)for(const r in t.lightInfo){const i=t.lightInfo[r];i!==void 0&&(i.isColor!==void 0?n.push({title:dge(r),prop:r,type:"color",value:i,onChange:(o,u)=>{var v;const d=new vn(u);e.updateObject(t.uuid,o,d);const f=(v=e.scene)==null?void 0:v.getObjectByProperty("uuid",t.uuid);f!==void 0&&Er(f,o,d)}}):n.push({title:dge(r),prop:r,type:typeof i,value:i,step:typeof i=="number"?.01:void 0,onChange:(o,u)=>{var f;e.updateObject(t.uuid,o,u);const d=(f=e.scene)==null?void 0:f.getObjectByProperty("uuid",t.uuid);d!==void 0&&Er(d,o,u)}}))}return Ke.jsx(X2,{title:"Light",items:n})}function Xet(t,e){var d;const n=[],r=[];let i=0;t.animations.forEach(f=>{i=Math.max(i,f.duration),f.duration>0&&r.push({title:f.name,items:[{title:"Duration",type:"number",value:f.duration,disabled:!0},{title:"Blend Mode",type:"option",disabled:!0,options:[{title:"Normal",value:2500},{title:"Additive",value:2501}]}]})}),n.push({title:"Animations",items:r});const o=(d=e.scene)==null?void 0:d.getObjectByProperty("uuid",t.uuid);let u=!1;if(o!==void 0){const f=o.mixer;if(u=f!==void 0,u){const v=[{title:"Time Scale",type:"range",value:f.timeScale,step:.01,min:-1,max:2,onChange:(x,S)=>{f.timeScale=S,e.updateObject(t.uuid,"mixer.timeScale",S)}}];v.push({title:"Stop All",type:"button",onChange:()=>{f.stopAllAction(),e.requestMethod(t.uuid,"stopAllAction",void 0,"mixer")}}),n.push({title:"Mixer",items:v})}}return Ke.jsx(X2,{title:"Animation",items:n})}const f_e={name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};let To={...f_e};function qet(t){const[e,n]=Et.useState(-1);Et.useEffect(()=>{function u(f){To={...f.value},n(Date.now())}function d(){To={...f_e},n(Date.now())}return Cr.addEventListener(Pr.SET_SCENE,d),Cr.addEventListener(Pr.SET_OBJECT,u),()=>{Cr.removeEventListener(Pr.SET_SCENE,d),Cr.removeEventListener(Pr.SET_OBJECT,u)}},[]);const r=To.type.toLowerCase(),i=To.animations.length>0||To.mixer!==void 0,o=r.search("mesh")>-1||r.search("line")>-1||r.search("points")>-1;return Ke.jsx(CX,{label:"Inspector",children:Ke.jsx("div",{id:"Inspector",className:t.class,children:To.uuid.length>0&&Ke.jsxs(Ke.Fragment,{children:[Ke.jsxs(Ke.Fragment,{children:[Ke.jsx(Zy,{type:"string",title:"Name",prop:"name",value:To.name,disabled:!0}),Ke.jsx(Zy,{type:"string",title:"Type",prop:"type",value:To.type,disabled:!0}),Ke.jsx(Zy,{type:"string",title:"UUID",prop:"uuid",value:To.uuid,disabled:!0}),Ke.jsx(Zy,{type:"boolean",title:"Visible",prop:"visible",value:To.visible,onChange:(u,d)=>{var v;t.three.updateObject(To.uuid,u,d);const f=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",To.uuid);f!==void 0&&Er(f,u,d)}})]}),Ke.jsxs(Ke.Fragment,{children:[$et(To,t.three),i?Xet(To,t.three):null,r.search("camera")>-1?jet(To,t.three):null,r.search("light")>-1?Ket(To,t.three):null,o?Fet(To,t.three):null]})]})},e)},"Inspector")}function Yet(t){const[e,n]=Et.useState(t.scene);Et.useEffect(()=>{const o=u=>{n(u.value)};return Cr.addEventListener(Pr.SET_SCENE,o),()=>{Cr.removeEventListener(Pr.SET_SCENE,o)}},[]);const r=e!==null,i="Hierarchy - "+(r?`${e==null?void 0:e.name}`:"No Scene");return Ke.jsxs("div",{id:"SidePanel",children:[Ke.jsx(CX,{label:i,open:!0,children:Ke.jsx(Ke.Fragment,{children:r&&Ke.jsx(wet,{child:e,three:t.three})})}),Ke.jsx(qet,{three:t.three})]},"SidePanel")}class Zet extends Ub{constructor(e,n){const r=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],i=new Ji;i.setAttribute("position",new Vr(r,3)),i.computeBoundingSphere();const o=new a1({fog:!1});super(i,o),this.light=e,this.color=n,this.type="RectAreaLightHelper";const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Ji;d.setAttribute("position",new Vr(u,3)),d.computeBoundingSphere(),this.add(new Ri(d,new Zf({side:Ps,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,n=Math.max(e.r,e.g,e.b);n>1&&e.multiplyScalar(1/n),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const hge={type:"change"},EH={type:"start"},pge={type:"end"},Lk=new bg,fge=new Ef,Qet=Math.cos(70*Zo.DEG2RAD);class Jet extends k0{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Oe,this.cursor=new Oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:H5.ROTATE,MIDDLE:H5.DOLLY,RIGHT:H5.PAN},this.touches={ONE:G5.ROTATE,TWO:G5.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ae){Ae.addEventListener("keydown",Dn),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Dn),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(hge),r.update(),o=i.NONE},this.update=function(){const Ae=new Oe,Xt=new Ws().setFromUnitVectors(e.up,new Oe(0,1,0)),Jt=Xt.clone().invert(),mn=new Oe,Te=new Ws,Wt=new Oe,Nt=2*Math.PI;return function(On=null){const cr=r.object.position;Ae.copy(cr).sub(r.target),Ae.applyQuaternion(Xt),d.setFromVector3(Ae),r.autoRotate&&o===i.NONE&&mt(ne(On)),r.enableDamping?(d.theta+=f.theta*r.dampingFactor,d.phi+=f.phi*r.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let ar=r.minAzimuthAngle,pr=r.maxAzimuthAngle;isFinite(ar)&&isFinite(pr)&&(ar<-Math.PI?ar+=Nt:ar>Math.PI&&(ar-=Nt),pr<-Math.PI?pr+=Nt:pr>Math.PI&&(pr-=Nt),ar<=pr?d.theta=Math.max(ar,Math.min(pr,d.theta)):d.theta=d.theta>(ar+pr)/2?Math.max(ar,d.theta):Math.min(pr,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(x,r.dampingFactor):r.target.add(x),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&q||r.object.isOrthographicCamera?d.radius=Ze(d.radius):d.radius=Ze(d.radius*v),Ae.setFromSpherical(d),Ae.applyQuaternion(Jt),cr.copy(r.target).add(Ae),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,x.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),x.set(0,0,0));let Mr=!1;if(r.zoomToCursor&&q){let Zn=null;if(r.object.isPerspectiveCamera){const oi=Ae.length();Zn=Ze(oi*v);const ns=oi-Zn;r.object.position.addScaledVector(X,ns),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const oi=new Oe(fe.x,fe.y,0);oi.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix(),Mr=!0;const ns=new Oe(fe.x,fe.y,0);ns.unproject(r.object),r.object.position.sub(ns).add(oi),r.object.updateMatrixWorld(),Zn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Zn!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Zn).add(r.object.position):(Lk.origin.copy(r.object.position),Lk.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Lk.direction))<Qet?e.lookAt(r.target):(fge.setFromNormalAndCoplanarPoint(r.object.up,r.target),Lk.intersectPlane(fge,r.target))))}else r.object.isOrthographicCamera&&(Mr=v!==1,Mr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix()));return v=1,q=!1,Mr||mn.distanceToSquared(r.object.position)>u||8*(1-Te.dot(r.object.quaternion))>u||Wt.distanceToSquared(r.target)>0?(r.dispatchEvent(hge),mn.copy(r.object.position),Te.copy(r.object.quaternion),Wt.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",vr),r.domElement.removeEventListener("pointerdown",ve),r.domElement.removeEventListener("pointercancel",Je),r.domElement.removeEventListener("wheel",Rt),r.domElement.removeEventListener("pointermove",he),r.domElement.removeEventListener("pointerup",Je),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",Dn),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const u=1e-6,d=new j3e,f=new j3e;let v=1;const x=new Oe,S=new ln,M=new ln,D=new ln,G=new ln,B=new ln,L=new ln,U=new ln,C=new ln,H=new ln,X=new Oe,fe=new ln;let q=!1;const pe=[],xe={};let J=!1;function ne(Ae){return Ae!==null?2*Math.PI/60*r.autoRotateSpeed*Ae:2*Math.PI/60/60*r.autoRotateSpeed}function Pe(Ae){const Xt=Math.abs(Ae*.01);return Math.pow(.95,r.zoomSpeed*Xt)}function mt(Ae){f.theta-=Ae}function _t(Ae){f.phi-=Ae}const de=function(){const Ae=new Oe;return function(Jt,mn){Ae.setFromMatrixColumn(mn,0),Ae.multiplyScalar(-Jt),x.add(Ae)}}(),je=function(){const Ae=new Oe;return function(Jt,mn){r.screenSpacePanning===!0?Ae.setFromMatrixColumn(mn,1):(Ae.setFromMatrixColumn(mn,0),Ae.crossVectors(r.object.up,Ae)),Ae.multiplyScalar(Jt),x.add(Ae)}}(),Me=function(){const Ae=new Oe;return function(Jt,mn){const Te=r.domElement;if(r.object.isPerspectiveCamera){const Wt=r.object.position;Ae.copy(Wt).sub(r.target);let Nt=Ae.length();Nt*=Math.tan(r.object.fov/2*Math.PI/180),de(2*Jt*Nt/Te.clientHeight,r.object.matrix),je(2*mn*Nt/Te.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(de(Jt*(r.object.right-r.object.left)/r.object.zoom/Te.clientWidth,r.object.matrix),je(mn*(r.object.top-r.object.bottom)/r.object.zoom/Te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function Ct(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function We(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function tt(Ae,Xt){if(!r.zoomToCursor)return;q=!0;const Jt=r.domElement.getBoundingClientRect(),mn=Ae-Jt.left,Te=Xt-Jt.top,Wt=Jt.width,Nt=Jt.height;fe.x=mn/Wt*2-1,fe.y=-(Te/Nt)*2+1,X.set(fe.x,fe.y,1).unproject(r.object).sub(r.object.position).normalize()}function Ze(Ae){return Math.max(r.minDistance,Math.min(r.maxDistance,Ae))}function dt(Ae){S.set(Ae.clientX,Ae.clientY)}function At(Ae){tt(Ae.clientX,Ae.clientX),U.set(Ae.clientX,Ae.clientY)}function pn(Ae){G.set(Ae.clientX,Ae.clientY)}function et(Ae){M.set(Ae.clientX,Ae.clientY),D.subVectors(M,S).multiplyScalar(r.rotateSpeed);const Xt=r.domElement;mt(2*Math.PI*D.x/Xt.clientHeight),_t(2*Math.PI*D.y/Xt.clientHeight),S.copy(M),r.update()}function wt(Ae){C.set(Ae.clientX,Ae.clientY),H.subVectors(C,U),H.y>0?Ct(Pe(H.y)):H.y<0&&We(Pe(H.y)),U.copy(C),r.update()}function Zt(Ae){B.set(Ae.clientX,Ae.clientY),L.subVectors(B,G).multiplyScalar(r.panSpeed),Me(L.x,L.y),G.copy(B),r.update()}function rn(Ae){tt(Ae.clientX,Ae.clientY),Ae.deltaY<0?We(Pe(Ae.deltaY)):Ae.deltaY>0&&Ct(Pe(Ae.deltaY)),r.update()}function un(Ae){let Xt=!1;switch(Ae.code){case r.keys.UP:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?_t(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(0,r.keyPanSpeed),Xt=!0;break;case r.keys.BOTTOM:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?_t(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(0,-r.keyPanSpeed),Xt=!0;break;case r.keys.LEFT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?mt(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(r.keyPanSpeed,0),Xt=!0;break;case r.keys.RIGHT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?mt(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(-r.keyPanSpeed,0),Xt=!0;break}Xt&&(Ae.preventDefault(),r.update())}function nt(Ae){if(pe.length===1)S.set(Ae.pageX,Ae.pageY);else{const Xt=on(Ae),Jt=.5*(Ae.pageX+Xt.x),mn=.5*(Ae.pageY+Xt.y);S.set(Jt,mn)}}function Tt(Ae){if(pe.length===1)G.set(Ae.pageX,Ae.pageY);else{const Xt=on(Ae),Jt=.5*(Ae.pageX+Xt.x),mn=.5*(Ae.pageY+Xt.y);G.set(Jt,mn)}}function Mt(Ae){const Xt=on(Ae),Jt=Ae.pageX-Xt.x,mn=Ae.pageY-Xt.y,Te=Math.sqrt(Jt*Jt+mn*mn);U.set(0,Te)}function Ve(Ae){r.enableZoom&&Mt(Ae),r.enablePan&&Tt(Ae)}function or(Ae){r.enableZoom&&Mt(Ae),r.enableRotate&&nt(Ae)}function $t(Ae){if(pe.length==1)M.set(Ae.pageX,Ae.pageY);else{const Jt=on(Ae),mn=.5*(Ae.pageX+Jt.x),Te=.5*(Ae.pageY+Jt.y);M.set(mn,Te)}D.subVectors(M,S).multiplyScalar(r.rotateSpeed);const Xt=r.domElement;mt(2*Math.PI*D.x/Xt.clientHeight),_t(2*Math.PI*D.y/Xt.clientHeight),S.copy(M)}function Ht(Ae){if(pe.length===1)B.set(Ae.pageX,Ae.pageY);else{const Xt=on(Ae),Jt=.5*(Ae.pageX+Xt.x),mn=.5*(Ae.pageY+Xt.y);B.set(Jt,mn)}L.subVectors(B,G).multiplyScalar(r.panSpeed),Me(L.x,L.y),G.copy(B)}function Kt(Ae){const Xt=on(Ae),Jt=Ae.pageX-Xt.x,mn=Ae.pageY-Xt.y,Te=Math.sqrt(Jt*Jt+mn*mn);C.set(0,Te),H.set(0,Math.pow(C.y/U.y,r.zoomSpeed)),Ct(H.y),U.copy(C);const Wt=(Ae.pageX+Xt.x)*.5,Nt=(Ae.pageY+Xt.y)*.5;tt(Wt,Nt)}function Kn(Ae){r.enableZoom&&Kt(Ae),r.enablePan&&Ht(Ae)}function cn(Ae){r.enableZoom&&Kt(Ae),r.enableRotate&&$t(Ae)}function ve(Ae){r.enabled!==!1&&(pe.length===0&&(r.domElement.setPointerCapture(Ae.pointerId),r.domElement.addEventListener("pointermove",he),r.domElement.addEventListener("pointerup",Je)),sr(Ae),Ae.pointerType==="touch"?Xn(Ae):Dt(Ae))}function he(Ae){r.enabled!==!1&&(Ae.pointerType==="touch"?Ut(Ae):Ft(Ae))}function Je(Ae){switch(Tn(Ae),pe.length){case 0:r.domElement.releasePointerCapture(Ae.pointerId),r.domElement.removeEventListener("pointermove",he),r.domElement.removeEventListener("pointerup",Je),r.dispatchEvent(pge),o=i.NONE;break;case 1:const Xt=pe[0],Jt=xe[Xt];Xn({pointerId:Xt,pageX:Jt.x,pageY:Jt.y});break}}function Dt(Ae){let Xt;switch(Ae.button){case 0:Xt=r.mouseButtons.LEFT;break;case 1:Xt=r.mouseButtons.MIDDLE;break;case 2:Xt=r.mouseButtons.RIGHT;break;default:Xt=-1}switch(Xt){case H5.DOLLY:if(r.enableZoom===!1)return;At(Ae),o=i.DOLLY;break;case H5.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enablePan===!1)return;pn(Ae),o=i.PAN}else{if(r.enableRotate===!1)return;dt(Ae),o=i.ROTATE}break;case H5.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enableRotate===!1)return;dt(Ae),o=i.ROTATE}else{if(r.enablePan===!1)return;pn(Ae),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(EH)}function Ft(Ae){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;et(Ae);break;case i.DOLLY:if(r.enableZoom===!1)return;wt(Ae);break;case i.PAN:if(r.enablePan===!1)return;Zt(Ae);break}}function Rt(Ae){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Ae.preventDefault(),r.dispatchEvent(EH),rn(bn(Ae)),r.dispatchEvent(pge))}function bn(Ae){const Xt=Ae.deltaMode,Jt={clientX:Ae.clientX,clientY:Ae.clientY,deltaY:Ae.deltaY};switch(Xt){case 1:Jt.deltaY*=16;break;case 2:Jt.deltaY*=100;break}return Ae.ctrlKey&&!J&&(Jt.deltaY*=10),Jt}function sn(Ae){Ae.key==="Control"&&(J=!0,r.domElement.getRootNode().addEventListener("keyup",dn,{passive:!0,capture:!0}))}function dn(Ae){Ae.key==="Control"&&(J=!1,r.domElement.getRootNode().removeEventListener("keyup",dn,{passive:!0,capture:!0}))}function Dn(Ae){r.enabled===!1||r.enablePan===!1||un(Ae)}function Xn(Ae){switch(kn(Ae),pe.length){case 1:switch(r.touches.ONE){case G5.ROTATE:if(r.enableRotate===!1)return;nt(Ae),o=i.TOUCH_ROTATE;break;case G5.PAN:if(r.enablePan===!1)return;Tt(Ae),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case G5.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ve(Ae),o=i.TOUCH_DOLLY_PAN;break;case G5.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;or(Ae),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(EH)}function Ut(Ae){switch(kn(Ae),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;$t(Ae),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;Ht(Ae),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Kn(Ae),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;cn(Ae),r.update();break;default:o=i.NONE}}function vr(Ae){r.enabled!==!1&&Ae.preventDefault()}function sr(Ae){pe.push(Ae.pointerId)}function Tn(Ae){delete xe[Ae.pointerId];for(let Xt=0;Xt<pe.length;Xt++)if(pe[Xt]==Ae.pointerId){pe.splice(Xt,1);return}}function kn(Ae){let Xt=xe[Ae.pointerId];Xt===void 0&&(Xt=new ln,xe[Ae.pointerId]=Xt),Xt.set(Ae.pageX,Ae.pageY)}function on(Ae){const Xt=Ae.pointerId===pe[0]?pe[1]:pe[0];return xe[Xt]}r.domElement.addEventListener("contextmenu",vr),r.domElement.addEventListener("pointerdown",ve),r.domElement.addEventListener("pointercancel",Je),r.domElement.addEventListener("wheel",Rt,{passive:!1}),r.domElement.getRootNode().addEventListener("keydown",sn,{passive:!0,capture:!0}),this.update()}}const oA=t=>{const[e,n]=Et.useState(t.options[t.index]),r=()=>{t.onToggle(!t.open)},i=o=>{o!==e&&(t.onSelect(o),n(o)),t.onToggle(!1)};return Ke.jsxs("div",{className:`dropdown ${t.up===!0?"up":""}`,children:[Ke.jsx("div",{className:"dropdown-toggle",onClick:r,children:e}),t.open&&Ke.jsx("ul",{className:"dropdown-menu",children:t.options.map(o=>Ke.jsx("li",{onClick:()=>i(o),children:o},o))})]})},c2=Et.forwardRef(function(e,n){const[r,i]=Et.useState(!1),o=e.options.indexOf(e.camera.name);return Ke.jsxs("div",{className:"CameraWindow",children:[Ke.jsx("div",{ref:n,className:"clickable",onClick:()=>{r&&i(!1)}}),Ke.jsx(oA,{index:o,open:r,options:e.options,onSelect:e.onSelect,onToggle:u=>{i(u)},up:!0})]})});class ett extends Ia{constructor(e){super({extensions:{derivatives:!0},glslVersion:OG,side:Ca,transparent:!0,uniforms:{uScale:{value:(e==null?void 0:e.scale)!==void 0?e==null?void 0:e.scale:.1},uDivisions:{value:(e==null?void 0:e.divisions)!==void 0?e==null?void 0:e.divisions:10},uColor:{value:(e==null?void 0:e.color)!==void 0?e==null?void 0:e.color:new vn(16777215)},uDistance:{value:(e==null?void 0:e.distance)!==void 0?e==null?void 0:e.distance:1e4},uSubgridOpacity:{value:(e==null?void 0:e.subgridOpacity)!==void 0?e==null?void 0:e.subgridOpacity:.15},uGridOpacity:{value:(e==null?void 0:e.gridOpacity)!==void 0?e==null?void 0:e.gridOpacity:.25}},vertexShader:`out vec3 worldPosition;
      uniform float uDistance;
      
      void main() {
        // Scale the plane by the drawing distance
        worldPosition = position.xzy * uDistance;
        worldPosition.xz += cameraPosition.xz;
      
        gl_Position = projectionMatrix * modelViewMatrix * vec4(worldPosition, 1.0);
      }`,fragmentShader:`out vec4 fragColor;
      in vec3 worldPosition;
      
      uniform float uDivisions;
      uniform float uScale;
      uniform vec3 uColor;
      uniform float uDistance;
      uniform float uSubgridOpacity;
      uniform float uGridOpacity;
      
      float getGrid(float gapSize) {
        vec2 worldPositionByDivision = worldPosition.xz / gapSize;
      
        // Inverted, 0 where line, >1 where there's no line
        // We use the worldPosition (which in this case we use similarly to UVs) differential to control the anti-aliasing
        // We need to do the -0.5)-0.5 trick because the result fades out from 0 to 1, and we want both
        // worldPositionByDivision == 0.3 and worldPositionByDivision == 0.7 to result in the same fade, i.e. 0.3,
        // otherwise only one side of the line will be anti-aliased
        vec2 grid = abs(fract(worldPositionByDivision-0.5)-0.5) / fwidth(worldPositionByDivision) / 2.0;
        float gridLine = min(grid.x, grid.y);
      
        // Uninvert and clamp
        return 1.0 - min(gridLine, 1.0);
      }
      
      void main() {
        float cameraDistanceToGridPlane = distance(cameraPosition.y, worldPosition.y);
        float cameraDistanceToFragmentOnGridPlane = distance(cameraPosition.xz, worldPosition.xz);
      
        // The size of the grid and subgrid are powers of each other and they are determined based on camera distance.
        // The current grid will become the next subgrid when it becomes too small, and its next power becomes the new grid.
        float subGridPower = pow(uDivisions, floor(log(cameraDistanceToGridPlane) / log(uDivisions)));
        float gridPower = subGridPower * uDivisions;
      
        // If we want to fade both the grid and its subgrid, we need to displays 3 different opacities, with the next grid being the third
        float nextGridPower = gridPower * uDivisions;
      
        // 1 where grid, 0 where no grid
        float subgrid = getGrid(subGridPower * uScale);
        float grid = getGrid(gridPower * uScale);
        float nextGrid = getGrid(nextGridPower * uScale);
      
        // Where we are between the introduction of the current grid power and when we switch to the next grid power
        float stepPercentage = (cameraDistanceToGridPlane - subGridPower)/(gridPower - subGridPower);
      
        // The last x percentage of the current step over which we want to fade
        float fadeRange = 0.3;
      
        // We calculate the fade percentage from the step percentage and the fade range
        float fadePercentage = max(stepPercentage - 1.0 + fadeRange, 0.0) / fadeRange;
      
        // Set base opacity based on how close we are to the drawing distance, with a cubic falloff
        float baseOpacity = subgrid * pow(1.0 - min(cameraDistanceToFragmentOnGridPlane / uDistance, 1.0), 3.0);
      
        // Shade the subgrid
        fragColor = vec4(uColor.rgb, (baseOpacity - fadePercentage) * uSubgridOpacity);
      
        // Somewhat arbitrary additional fade coefficient to counter anti-aliasing popping when switching between grid powers
        float fadeCoefficient = 0.5;
      
        // Shade the grid
        fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity - fadePercentage * (uGridOpacity - uSubgridOpacity) * fadeCoefficient, grid);
      
        // Shade the next grid
        fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity, nextGrid);
      
        if (fragColor.a <= 0.0) discard;
      }`,name:"InfiniteGrid",depthWrite:!1})}}class ttt extends Ri{constructor(){const n=new ett;super(new _g(2,2),n);yr(this,"gridMaterial");this.gridMaterial=n,this.frustumCulled=!1,this.name="InfiniteGridHelper",this.position.y=.1}update(){this.gridMaterial.needsUpdate=!0}}const ntt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#if defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
}`,rtt=`
#include <common>
#include <uv_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {
	#include <clipping_planes_fragment>
	gl_FragColor = vec4(vec3(vUv, 0.0), 1.0);
}`;class itt extends Ia{constructor(){super({defines:{USE_UV:""},vertexShader:ntt,fragmentShader:rtt})}}let Nk="Renderer",Xd,Fk=!1,mge=!1,Ni=null,Mo=null,mf=null,gf=null;function stt(t){const e=t.three.app.appID,n=localStorage.getItem(`${e}_mode`),r=localStorage.getItem(`${e}_tlCam`)!==null?localStorage.getItem(`${e}_tlCam`):"Debug",i=localStorage.getItem(`${e}_trCam`)!==null?localStorage.getItem(`${e}_trCam`):"Orthographic",o=localStorage.getItem(`${e}_blCam`)!==null?localStorage.getItem(`${e}_blCam`):"Front",u=localStorage.getItem(`${e}_brCam`)!==null?localStorage.getItem(`${e}_brCam`):"Top",d=Et.useMemo(()=>new Map,[]),f=Et.useMemo(()=>new Map,[]),v=Et.useMemo(()=>new Map,[]),x=Et.useMemo(()=>new Map,[]),S=Et.useMemo(()=>new HA,[]),M=Et.useMemo(()=>new x2,[]),D=Et.useMemo(()=>new ttt,[]),G=Et.useMemo(()=>new X3e(500),[]),B=Et.useMemo(()=>new X3e(100),[]),L=Et.useMemo(()=>new c6e,[]),U=Et.useMemo(()=>new Pze,[]),C=Et.useMemo(()=>new itt,[]),H=Et.useMemo(()=>new Zf({opacity:.33,transparent:!0,wireframe:!0}),[]);function X(nt,Tt){const Mt=new Bb(-100,100,100,-100,50,3e3);return Mt.name=nt,Mt.position.copy(Tt),Mt.lookAt(0,0,0),d.set(nt,Mt),Mt}const fe=["Renderer","Depth","Normals","UVs","Wireframe"],q=["Single","Side by Side","Stacked","Quad"],pe=Et.useRef(null),xe=Et.useRef(null),J=Et.useRef(null),ne=Et.useRef(null),Pe=Et.useRef(null),mt=Et.useRef(null),[_t,de]=Et.useState(n!==null?n:"Single"),[je,Me]=Et.useState(null),[Ct,We]=Et.useState(!1),[tt,Ze]=Et.useState(!1),[dt,At]=Et.useState(!1),[,pn]=Et.useState(Date.now());localStorage.setItem(`${e}_mode`,_t),localStorage.setItem(`${e}_tlCam`,r),localStorage.setItem(`${e}_trCam`,i),localStorage.setItem(`${e}_blCam`,o),localStorage.setItem(`${e}_brCam`,u);const et=(nt,Tt)=>{const Mt=f.get(nt.name);Mt!==void 0&&Mt.dispose(),f.delete(nt.name);const Ve=v.get(nt.name);Ve!==void 0&&(S.remove(Ve),Ve.dispose()),v.delete(nt.name);const or=new Jet(nt,Tt);switch(or.enableDamping=!0,or.dampingFactor=.05,nt.name){case"Top":case"Bottom":case"Left":case"Right":case"Front":case"Back":or.enableRotate=!1;break}if(f.set(nt.name,or),nt instanceof $s){const $t=new pVe(nt);v.set(nt.name,$t),S.add($t)}},wt=nt=>{const Tt=v.get(nt.name);Tt!==void 0&&(S.remove(Tt),Tt.dispose(),v.delete(nt.name));const Mt=f.get(nt.name);Mt!==void 0&&(Mt.dispose(),f.delete(nt.name))},Zt=()=>{f.forEach((nt,Tt)=>{nt.dispose();const Mt=v.get(Tt);Mt!==void 0&&(S.remove(Mt),Mt.dispose()),v.delete(Tt),f.delete(Tt)}),f.clear(),v.clear()},rn=()=>{switch(_t){case"Single":et(Ni,J.current);break;case"Side by Side":case"Stacked":et(Ni,J.current),et(Mo,ne.current);break;case"Quad":et(Ni,J.current),et(Mo,ne.current),et(mf,Pe.current),et(gf,mt.current);break}};Et.useEffect(()=>{const nt=new F$({canvas:pe.current,stencil:!1});nt.autoClear=!1,nt.shadowMap.enabled=!0,nt.setPixelRatio(devicePixelRatio),nt.setClearColor(0),t.three.renderer=nt,Me(nt)},[]),Et.useEffect(()=>{S.name="Debug Scene",S.uuid="",M.name="helpers",S.add(M),M.add(D),G.name="axisHelper",M.add(G),B.name="interactionHelper",M.add(B),B.visible=!1,X("Top",new Oe(0,1e3,0)),X("Bottom",new Oe(0,-1e3,0)),X("Left",new Oe(-1e3,0,0)),X("Right",new Oe(1e3,0,0)),X("Front",new Oe(0,0,1e3)),X("Back",new Oe(0,0,-1e3)),X("Orthographic",new Oe(1e3,1e3,1e3));const nt=new $s(60,1,50,3e3);nt.name="Debug",nt.position.set(500,500,500),nt.lookAt(0,0,0),d.set("Debug",nt),Ni=d.get(localStorage.getItem(`${e}_tlCam`)),Mo=d.get(localStorage.getItem(`${e}_trCam`)),mf=d.get(localStorage.getItem(`${e}_blCam`)),gf=d.get(localStorage.getItem(`${e}_brCam`))},[]),Et.useEffect(()=>{const nt=()=>{x.forEach($t=>{M.remove($t),$t.dispose()}),x.clear()},Tt=()=>{Xd.traverse($t=>{if($t.type.search("Light")>-1){let Ht;switch($t.type){case"DirectionalLight":Ht=new hVe($t),Ht.name=`${$t.name}Helper`,x.set($t.name,Ht),M.add(Ht);break;case"HemisphereLight":Ht=new dVe($t,250),Ht.name=`${$t.name}Helper`,x.set($t.name,Ht),M.add(Ht);break;case"RectAreaLight":Ht=new Zet($t),Ht.name=`${$t.name}Helper`,x.set($t.name,Ht),M.add(Ht);break;case"PointLight":Ht=new uVe($t),Ht.name=`${$t.name}Helper`,x.set($t.name,Ht),M.add(Ht);break;case"SpotLight":Ht=new lVe($t),Ht.name=`${$t.name}Helper`,x.set($t.name,Ht),M.add(Ht);break}}})},Mt=$t=>{nt(),WA(Xd),S.remove(Xd);const Ht=t.scenes.get($t.value.name);if(Ht!==void 0){const Kt=new Ht;t.onSceneSet!==void 0&&t.onSceneSet(Kt),Xd=Kt,t.three.scene=Xd,S.add(Xd),mge=!0,Tt()}},Ve=$t=>{var Kn;const Ht=$t.value,Kt=(Kn=t.three.scene)==null?void 0:Kn.getObjectByProperty("uuid",Ht.uuid);Kt!==void 0&&d.set(Ht.name,Kt),pn(Date.now())},or=$t=>{d.delete($t.value.name),pn(Date.now())};return Cr.addEventListener(Pr.SET_SCENE,Mt),Cr.addEventListener(Pr.ADD_CAMERA,Ve),Cr.addEventListener(Pr.REMOVE_CAMERA,or),()=>{Cr.removeEventListener(Pr.SET_SCENE,Mt),Cr.removeEventListener(Pr.ADD_CAMERA,Ve),Cr.removeEventListener(Pr.REMOVE_CAMERA,or)}},[]),Et.useEffect(()=>{if(je===null)return;let nt=window.innerWidth,Tt=window.innerHeight,Mt=Math.floor(nt/2),Ve=Math.floor(Tt/2),or=-1;const $t=()=>{nt=window.innerWidth-300,Tt=window.innerHeight,Mt=Math.floor(nt/2),Ve=Math.floor(Tt/2),je.setSize(nt,Tt);let ve=nt,he=Tt;switch(_t){case"Side by Side":ve=Mt,he=Tt;break;case"Stacked":ve=nt,he=Ve;break;case"Quad":ve=Mt,he=Ve;break}d.forEach(Je=>{var Dt;Je instanceof Bb?(Je.left=ve/-2,Je.right=ve/2,Je.top=he/2,Je.bottom=he/-2,Je.updateProjectionMatrix()):Je instanceof $s&&(Je.aspect=ve/he,Je.updateProjectionMatrix(),(Dt=v.get(Je.name))==null||Dt.update())})},Ht=()=>{je.setViewport(0,0,nt,Tt),je.setScissor(0,0,nt,Tt),je.render(S,Ni)},Kt=()=>{if(_t==="Side by Side")je.setViewport(0,0,Mt,Tt),je.setScissor(0,0,Mt,Tt),je.render(S,Ni),je.setViewport(Mt,0,Mt,Tt),je.setScissor(Mt,0,Mt,Tt),je.render(S,Mo);else{const ve=Tt-Ve;je.setViewport(0,ve,nt,Ve),je.setScissor(0,ve,nt,Ve),je.render(S,Ni),je.setViewport(0,0,nt,Ve),je.setScissor(0,0,nt,Ve),je.render(S,Mo)}},Kn=()=>{let ve=0,he=0;he=Tt-Ve,ve=0,je.setViewport(ve,he,Mt,Ve),je.setScissor(ve,he,Mt,Ve),je.render(S,Ni),ve=Mt,je.setViewport(ve,he,Mt,Ve),je.setScissor(ve,he,Mt,Ve),je.render(S,Mo),he=0,ve=0,je.setViewport(ve,he,Mt,Ve),je.setScissor(ve,he,Mt,Ve),je.render(S,mf),ve=Mt,je.setViewport(ve,he,Mt,Ve),je.setScissor(ve,he,Mt,Ve),je.render(S,gf)},cn=()=>{switch(f.forEach(ve=>{ve.update()}),t.onSceneUpdate!==void 0&&mge&&t.onSceneUpdate(Xd),je.clear(),_t){case"Single":Ht();break;case"Side by Side":case"Stacked":Kt();break;case"Quad":Kn();break}or=requestAnimationFrame(cn)};return rn(),window.addEventListener("resize",$t),$t(),cn(),()=>{window.removeEventListener("resize",$t),cancelAnimationFrame(or),or=-1}},[_t,je]),Et.useEffect(()=>{if(je!==null){const nt=new aVe,Tt=new ln,Mt=(Ht,Kt,Kn,cn)=>{switch(_t){case"Quad":Ht<Kn?Kt<cn?nt.setFromCamera(Tt,Ni):nt.setFromCamera(Tt,mf):Kt<cn?nt.setFromCamera(Tt,Mo):nt.setFromCamera(Tt,gf);break;case"Side by Side":Ht<Kn?nt.setFromCamera(Tt,Ni):nt.setFromCamera(Tt,Mo);break;case"Single":nt.setFromCamera(Tt,Ni);break;case"Stacked":Kt<cn?nt.setFromCamera(Tt,Ni):nt.setFromCamera(Tt,Mo);break}},Ve=Ht=>{if(!Fk)return;const Kt=new ln;je.getSize(Kt);const Kn=Math.min(Ht.clientX,Kt.x),cn=Math.min(Ht.clientY,Kt.y);Tt.x=p4(Kn,0,Kt.x,-1,1),Tt.y=p4(cn,0,Kt.y,1,-1);const ve=Kt.x/2,he=Kt.y/2,Je=()=>{Kn<ve?Tt.x=p4(Kn,0,ve,-1,1):Tt.x=p4(Kn,ve,Kt.x,-1,1)},Dt=()=>{cn<he?Tt.y=p4(cn,0,he,1,-1):Tt.y=p4(cn,he,Kt.y,1,-1)};switch(_t){case"Quad":Je(),Dt();break;case"Side by Side":Je();break;case"Stacked":Dt(),Dt();break}Mt(Kn,cn,ve,he);const Ft=nt.intersectObjects(Xd.children);Ft.length>0&&B.position.copy(Ft[0].point)},or=Ht=>{if(!Fk)return;const Kt=new ln;if(je.getSize(Kt),Ht.clientX>=Kt.x)return;Ve(Ht);const Kn=nt.intersectObjects(Xd.children);Kn.length>0&&t.three.getObject(Kn[0].object.uuid)},$t=xe.current;return $t.addEventListener("mousemove",Ve,!1),$t.addEventListener("click",or,!1),()=>{$t.removeEventListener("mousemove",Ve),$t.removeEventListener("click",or)}}},[_t,je]);const un=[];return d.forEach((nt,Tt)=>{un.push(Tt)}),Ke.jsxs("div",{className:"multiview",children:[Ke.jsx("canvas",{ref:pe}),je!==null&&Ke.jsxs(Ke.Fragment,{children:[Ke.jsxs("div",{className:`cameras ${_t==="Single"||_t==="Stacked"?"single":""}`,ref:xe,children:[_t==="Single"&&Ke.jsx(Ke.Fragment,{children:Ke.jsx(c2,{camera:Ni,options:un,ref:J,onSelect:nt=>{var Mt;(Mt=f.get(Ni.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(Ni),Ni=Tt,localStorage.setItem(`${e}_tlCam`,Tt.name),et(Tt,J.current))}})}),(_t==="Side by Side"||_t==="Stacked")&&Ke.jsxs(Ke.Fragment,{children:[Ke.jsx(c2,{camera:Ni,options:un,ref:J,onSelect:nt=>{var Mt;(Mt=f.get(Ni.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(Ni),Ni=Tt,localStorage.setItem(`${e}_tlCam`,Tt.name),et(Tt,J.current))}}),Ke.jsx(c2,{camera:Mo,options:un,ref:ne,onSelect:nt=>{var Mt;(Mt=f.get(Mo.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(Mo),Mo=Tt,localStorage.setItem(`${e}_trCam`,Tt.name),et(Tt,ne.current))}})]}),_t==="Quad"&&Ke.jsxs(Ke.Fragment,{children:[Ke.jsx(c2,{camera:Ni,options:un,ref:J,onSelect:nt=>{var Mt;(Mt=f.get(Ni.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(Ni),Ni=Tt,localStorage.setItem(`${e}_tlCam`,Tt.name),et(Tt,J.current))}}),Ke.jsx(c2,{camera:Mo,options:un,ref:ne,onSelect:nt=>{var Mt;(Mt=f.get(Mo.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(Mo),Mo=Tt,localStorage.setItem(`${e}_trCam`,Tt.name),et(Tt,ne.current))}}),Ke.jsx(c2,{camera:mf,options:un,ref:Pe,onSelect:nt=>{var Mt;(Mt=f.get(mf.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(mf),mf=Tt,localStorage.setItem(`${e}_blCam`,Tt.name),et(Tt,Pe.current))}}),Ke.jsx(c2,{camera:gf,options:un,ref:mt,onSelect:nt=>{var Mt;(Mt=f.get(gf.name))==null||Mt.dispose();const Tt=d.get(nt);Tt!==void 0&&(wt(gf),gf=Tt,localStorage.setItem(`${e}_brCam`,Tt.name),et(Tt,mt.current))}})]})]}),Ke.jsxs("div",{className:"settings",children:[Ke.jsx(oA,{index:q.indexOf(_t),options:q,onSelect:nt=>{nt!==_t&&(Zt(),de(nt))},open:Ct,onToggle:nt=>{We(nt),tt&&Ze(!1),dt&&At(!1)}}),Ke.jsx(oA,{index:fe.indexOf(Nk),options:fe,onSelect:nt=>{if(nt!==Nk)switch(Nk=nt,Nk){case"Depth":S.overrideMaterial=L;break;case"Normals":S.overrideMaterial=U;break;default:case"Renderer":S.overrideMaterial=null;break;case"Wireframe":S.overrideMaterial=H;break;case"UVs":S.overrideMaterial=C;break}},open:tt,onToggle:nt=>{Ct&&We(!1),Ze(nt),dt&&At(!1)}}),Ke.jsx(oA,{index:0,options:["Orbit Mode","Selection Mode"],onSelect:nt=>{Fk=nt==="Selection Mode",B.visible=Fk},open:dt,onToggle:nt=>{Ct&&We(!1),tt&&Ze(!1),At(nt)}})]})]})]})}/**
 * postprocessing v6.34.1 build Wed Dec 27 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var ott="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",_r={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},m_e="",ta="srgb",lR="srgb-linear",A2={NONE:0,DEPTH:1,CONVOLUTION:2},Yr={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},O_={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Bk={DEFAULT:0,ESKIL:1},g_e=Number(h_.replace(/\D+/g,"")),v_e=g_e>=152,att=new Map([[II,lR],[lh,ta]]),ltt=new Map([[lR,II],[ta,lh]]);function o_(t){return t===null?null:v_e?t.outputColorSpace:att.get(t.outputEncoding)}function I2(t,e){t!==null&&(v_e?t.colorSpace=e:t.encoding=ltt.get(e))}function uR(t){return g_e<154?t.replace("colorspace_fragment","encodings_fragment"):t}var utt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,ctt="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",dtt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],y_e=class extends Ia{constructor(t=new Dr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ii(null),texelSize:new Ii(new Dr),scale:new Ii(1),kernel:new Ii(0)},blending:xl,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:utt,vertexShader:ctt}),this.fragmentShader=uR(this.fragmentShader),this.setTexelSize(t.x,t.y),this.kernelSize=O_.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return dtt[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},htt=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,b_e=class extends Ia{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ii(null),opacity:new Ii(1)},blending:xl,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:htt,vertexShader:ott}),this.fragmentShader=uR(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},ptt=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,ftt="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",mtt=class extends Ia{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:h_.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ii(null),depthBuffer:new Ii(null),resolution:new Ii(new ln),texelSize:new Ii(new ln),cameraNear:new Ii(.3),cameraFar:new Ii(1e3),aspect:new Ii(1),time:new Ii(0)},blending:xl,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=p_){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=ptt.replace(Yr.FRAGMENT_HEAD,t.get(Yr.FRAGMENT_HEAD)||"").replace(Yr.FRAGMENT_MAIN_UV,t.get(Yr.FRAGMENT_MAIN_UV)||"").replace(Yr.FRAGMENT_MAIN_IMAGE,t.get(Yr.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=ftt.replace(Yr.VERTEX_HEAD,t.get(Yr.VERTEX_HEAD)||"").replace(Yr.VERTEX_MAIN_SUPPORT,t.get(Yr.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=uR(this.fragmentShader),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof $s?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Yr}},gtt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,vtt="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",ytt=class extends y_e{constructor({kernelSize:t=O_.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=gtt,this.vertexShader=vtt,this.kernelSize=t,this.fragmentShader=uR(this.fragmentShader),this.uniforms.aspect=new Ii(1),this.uniforms.rotation=new Ii(new ln),this.uniforms.maskParams=new Ii(new Dr),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},btt=new DI,vf=null;function _tt(){if(vf===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);vf=new Ji,vf.setAttribute!==void 0?(vf.setAttribute("position",new Ta(t,3)),vf.setAttribute("uv",new Ta(e,2))):(vf.addAttribute("position",new Ta(t,3)),vf.addAttribute("uv",new Ta(e,2)))}return vf}var d1=class __e{constructor(e="Pass",n=new HA,r=btt){this.name=e,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new Ri(_tt(),e),n.frustumCulled=!1,this.scene===null&&(this.scene=new HA),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=p_){}render(e,n,r,i,o){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,r){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof C0||n instanceof A0||n instanceof Qi||n instanceof __e)&&this[e].dispose()}}},wtt=class extends d1{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new b_e,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new C0(1,1,{minFilter:as,magFilter:as,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==x0?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":o_(t)===ta&&I2(this.renderTarget.texture,ta))}},xtt=class extends d1{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const o=t.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},gge=new vn,w_e=class extends d1{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const o=this.overrideClearColor,u=this.overrideClearAlpha,d=t.getClearAlpha(),f=o!==null,v=u>=0;f?(t.getClearColor(gge),t.setClearColor(o,v?u:d)):v&&t.setClearAlpha(u),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),f?t.setClearColor(gge,d):v&&t.setClearAlpha(d)}},Stt=class extends d1{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new w_e,this.overrideMaterialManager=n===null?null:new yge(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new yge(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const o=this.scene,u=this.camera,d=this.selection,f=u.layers.mask,v=o.background,x=t.shadowMap.autoUpdate,S=this.renderToScreen?null:e;d!==null&&u.layers.set(d.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(S),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,o,u):t.render(o,u),u.layers.mask=f,o.background=v,t.shadowMap.autoUpdate=x}};function vge(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const u of n.entries())u[1]!==null&&n.set(u[0],u[1].replace(o,i))}}function Ett(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const o=r!==void 0&&/mainImage/.test(r),u=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(u&&n.attributes&A2.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!o&&!u)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const d=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,f=n.shaderParts;let v=f.get(Yr.FRAGMENT_HEAD)||"",x=f.get(Yr.FRAGMENT_MAIN_UV)||"",S=f.get(Yr.FRAGMENT_MAIN_IMAGE)||"",M=f.get(Yr.VERTEX_HEAD)||"",D=f.get(Yr.VERTEX_MAIN_SUPPORT)||"";const G=new Set,B=new Set;if(u&&(x+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const C=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);D+=`	${t}MainSupport(`,D+=C?`vUv);
`:`);
`;for(const H of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const X of H[1].split(/\s*,\s*/))n.varyings.add(X),G.add(X),B.add(X);for(const H of i.matchAll(d))B.add(H[1])}for(const C of r.matchAll(d))B.add(C[1]);for(const C of e.defines.keys())B.add(C.replace(/\([\w\s,]*\)/g,""));for(const C of e.uniforms.keys())B.add(C);B.delete("while"),B.delete("for"),B.delete("if"),e.uniforms.forEach((C,H)=>n.uniforms.set(t+H.charAt(0).toUpperCase()+H.slice(1),C)),e.defines.forEach((C,H)=>n.defines.set(t+H.charAt(0).toUpperCase()+H.slice(1),C));const L=new Map([["fragment",r],["vertex",i]]);vge(t,B,n.defines),vge(t,B,L),r=L.get("fragment"),i=L.get("vertex");const U=e.blendMode;if(n.blendModes.set(U.blendFunction,U),o){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(S+=e.inputColorSpace===ta?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==m_e?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const C=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;S+=`${t}MainImage(color0, UV, `,n.attributes&A2.DEPTH&&C.test(r)&&(S+="depth, ",n.readDepth=!0),S+=`color1);
	`;const H=t+"BlendOpacity";n.uniforms.set(H,U.opacity),S+=`color0 = blend${U.blendFunction}(color0, color1, ${H});

	`,v+=`uniform float ${H};

`}if(v+=r+`
`,i!==null&&(M+=i+`
`),f.set(Yr.FRAGMENT_HEAD,v),f.set(Yr.FRAGMENT_MAIN_UV,x),f.set(Yr.FRAGMENT_MAIN_IMAGE,S),f.set(Yr.VERTEX_HEAD,M),f.set(Yr.VERTEX_MAIN_SUPPORT,D),e.extensions!==null)for(const C of e.extensions)n.extensions.add(C)}}var CH=class extends d1{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new mtt(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new Itt;let e=0;for(const u of this.effects)if(u.blendMode.blendFunction===_r.DST)t.attributes|=u.getAttributes()&A2.DEPTH;else{if(t.attributes&u.getAttributes()&A2.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${u.name})`);Ett("e"+e++,u,t)}let n=t.shaderParts.get(Yr.FRAGMENT_HEAD),r=t.shaderParts.get(Yr.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Yr.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const u of t.blendModes.values())n+=u.getShaderCode().replace(o,`blend${u.blendFunction}`)+`
`;t.attributes&A2.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===ta&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Yr.FRAGMENT_HEAD,n),t.shaderParts.set(Yr.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Yr.FRAGMENT_MAIN_UV,i);for(const[u,d]of t.shaderParts)d!==null&&t.shaderParts.set(u,d.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=p_){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const o of this.effects)o.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==x0&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},Ctt=class extends d1{constructor({kernelSize:t=O_.MEDIUM,resolutionScale:e=.5,width:n=oh.AUTO_SIZE,height:r=oh.AUTO_SIZE,resolutionX:i=n,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new C0(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const u=this.resolution=new oh(this,i,o,e);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight)),this._blurMaterial=new y_e,this._blurMaterial.kernelSize=t,this.copyMaterial=new b_e}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const o=this.scene,u=this.camera,d=this.renderTargetA,f=this.renderTargetB,v=this.blurMaterial,x=v.kernelSequence;let S=e;this.fullscreenMaterial=v;for(let M=0,D=x.length;M<D;++M){const G=M&1?f:d;v.kernel=x[M],v.inputBuffer=S.texture,t.setRenderTarget(G),t.render(o,u),S=G}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=S.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(o,u)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==x0?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):o_(t)===ta&&(I2(this.renderTargetA.texture,ta),I2(this.renderTargetB.texture,ta)))}static get AUTO_SIZE(){return oh.AUTO_SIZE}},Ptt=class extends d1{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new w_e(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const o=t.getContext(),u=t.state.buffers,d=this.scene,f=this.camera,v=this.clearPass,x=this.inverted?0:1,S=1-x;u.color.setMask(!1),u.depth.setMask(!1),u.color.setLocked(!0),u.depth.setLocked(!0),u.stencil.setTest(!0),u.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),u.stencil.setFunc(o.ALWAYS,x,4294967295),u.stencil.setClear(S),u.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?v.render(t,null):(v.render(t,e),v.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(d,f)):(t.setRenderTarget(e),t.render(d,f),t.setRenderTarget(n),t.render(d,f)),u.color.setLocked(!1),u.depth.setLocked(!1),u.stencil.setLocked(!1),u.stencil.setFunc(o.EQUAL,1,4294967295),u.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),u.stencil.setLocked(!0)}},Ttt=class extends Ctt{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=O_.MEDIUM,resolutionScale:o=.5,resolutionX:u=oh.AUTO_SIZE,resolutionY:d=oh.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:o,resolutionX:u,resolutionY:d}),this.blurMaterial=new ytt({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},PH=1/1e3,Mtt=1e3,ktt=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*PH}get fixedDelta(){return this._fixedDelta*PH}set fixedDelta(t){this._fixedDelta=t*Mtt}get elapsed(){return this._elapsed*PH}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Att=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new wtt,this.depthTexture=null,this.passes=[],this.timer=new ktt,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new ln),n=t.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===x0&&o_(t)===ta&&(I2(this.inputBuffer.texture,ta),I2(this.outputBuffer.texture,ta),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(t,n,r)}}replaceRenderer(t,e=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(t),e&&r!==null&&(r.removeChild(n.domElement),r.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new N$;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=B2,t.type=Hf):t.type=th,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,r){const i=this.renderer,o=i===null?new ln:i.getDrawingBufferSize(new ln),u={minFilter:as,magFilter:as,stencilBuffer:e,depthBuffer:t,type:n},d=new C0(o.width,o.height,u);return r>0&&(d.ignoreDepthForMultisampleCopy=!1,d.samples=r),n===x0&&o_(i)===ta&&I2(d.texture,ta),d.texture.name="EffectComposer.Buffer",d.texture.generateMipmaps=!1,d}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new ln),o=r.getContext().getContextAttributes().alpha,u=this.inputBuffer.texture.type;if(t.setRenderer(r),t.setSize(i.width,i.height),t.initialize(r,o,u),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const d=this.createDepthTexture();for(t of n)t.setDepthTexture(d)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const o=(d,f)=>d||f.needsDepthTexture;e.reduce(o,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,o=!1,u,d,f;t===void 0&&(this.timer.update(),t=this.timer.delta);for(const v of this.passes)v.enabled&&(v.render(e,r,i,t,o),v.needsSwap&&(o&&(n.renderToScreen=v.renderToScreen,u=e.getContext(),d=e.state.buffers.stencil,d.setFunc(u.NOTEQUAL,1,4294967295),n.render(e,r,i,t,o),d.setFunc(u.EQUAL,1,4294967295)),f=r,r=i,i=f),v instanceof Ptt?o=!0:v instanceof xtt&&(o=!1))}setSize(t,e,n){const r=this.renderer,i=r.getSize(new ln);(t===void 0||e===void 0)&&(t=i.width,e=i.height),(i.width!==t||i.height!==e)&&r.setSize(t,e,n);const o=r.getDrawingBufferSize(new ln);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const u of this.passes)u.setSize(o.width,o.height)}reset(){const t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Itt=class{constructor(){this.shaderParts=new Map([[Yr.FRAGMENT_HEAD,null],[Yr.FRAGMENT_MAIN_UV,null],[Yr.FRAGMENT_MAIN_IMAGE,null],[Yr.VERTEX_HEAD,null],[Yr.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=A2.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=lR}},TH=!1,yge=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case Ca:n=this.materialsFlatShadedDoubleSide;break;case Ps:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case Ca:n=this.materialsDoubleSide;break;case Ps:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Ia))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const o=e[i].value;o.isRenderTargetTexture&&(e[i].value=null,n.set(i,o))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Ac;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Ps,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Ca,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Ps,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Ca,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,TH){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return TH}static set workaroundEnabled(t){TH=t}},yf=-1,oh=class extends k0{constructor(t,e=yf,n=yf,r=1){super(),this.resizable=t,this.baseSize=new ln(1,1),this.preferredSize=new ln(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new ln,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==yf?n.width=e.width:e.height!==yf?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==yf?n.height=e.height:e.width!==yf?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(yf),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return yf}},Rtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Dtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Ott="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Ltt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Ntt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Ftt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Btt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Utt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",ztt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Vtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",jtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Htt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Gtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Wtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",$tt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Ktt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Xtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",qtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Ytt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Ztt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Qtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Jtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",ent="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",tnt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",nnt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",rnt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",int="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",snt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",ont="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",ant="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",lnt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",unt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",cnt=new Map([[_r.ADD,Rtt],[_r.ALPHA,Dtt],[_r.AVERAGE,Ott],[_r.COLOR,Ltt],[_r.COLOR_BURN,Ntt],[_r.COLOR_DODGE,Ftt],[_r.DARKEN,Btt],[_r.DIFFERENCE,Utt],[_r.DIVIDE,ztt],[_r.DST,null],[_r.EXCLUSION,Vtt],[_r.HARD_LIGHT,jtt],[_r.HARD_MIX,Htt],[_r.HUE,Gtt],[_r.INVERT,Wtt],[_r.INVERT_RGB,$tt],[_r.LIGHTEN,Ktt],[_r.LINEAR_BURN,Xtt],[_r.LINEAR_DODGE,qtt],[_r.LINEAR_LIGHT,Ytt],[_r.LUMINOSITY,Ztt],[_r.MULTIPLY,Qtt],[_r.NEGATION,Jtt],[_r.NORMAL,ent],[_r.OVERLAY,tnt],[_r.PIN_LIGHT,nnt],[_r.REFLECT,rnt],[_r.SATURATION,int],[_r.SCREEN,snt],[_r.SOFT_LIGHT,ont],[_r.SRC,ant],[_r.SUBTRACT,lnt],[_r.VIVID_LIGHT,unt]]),dnt=class extends k0{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Ii(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return cnt.get(this.blendFunction)}},cR=class extends k0{constructor(t,e,{attributes:n=A2.NONE,blendFunction:r=_r.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:u=null,vertexShader:d=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=d,this.defines=i,this.uniforms=o,this.extensions=u,this.blendMode=new dnt(r),this.blendMode.addEventListener("change",f=>this.setChanged()),this._inputColorSpace=lR,this._outputColorSpace=m_e}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=p_){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof C0||e instanceof A0||e instanceof Qi||e instanceof d1)&&this[t].dispose()}}},hnt=`#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))
#define ONE_OVER_TWELVE 0.08333333333333333
varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}`,pnt="varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",fnt=class extends cR{constructor({blendFunction:t=_r.SRC}={}){super("FXAAEffect",hnt,{vertexShader:pnt,blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}},mnt=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,gnt=class extends cR{constructor({blendFunction:t=_r.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",mnt,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},vnt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,ynt="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",bnt=class extends cR{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:o=O_.MEDIUM,resolutionScale:u=.5,resolutionX:d=oh.AUTO_SIZE,resolutionY:f=oh.AUTO_SIZE}={}){super("TiltShiftEffect",vnt,{vertexShader:ynt,blendFunction:t,uniforms:new Map([["rotation",new Ii(new ln)],["maskParams",new Ii(new ln)],["map",new Ii(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new C0(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new Ttt({kernelSize:o,resolutionScale:u,resolutionX:d,resolutionY:f,offset:e,rotation:n,focusArea:r,feather:i});const v=this.resolution=new oh(this,d,f,u);v.addEventListener("change",x=>this.setSize(v.baseWidth,v.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,o_(t)===ta&&I2(this.renderTarget.texture,ta))}},_nt=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,wnt=class extends cR{constructor({blendFunction:t,technique:e=Bk.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",_nt,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Ii(r)],["darkness",new Ii(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Bk.ESKIL}set eskil(t){this.technique=t?Bk.ESKIL:Bk.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const xnt=`varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,Snt=`struct Light {
  float intensity;
  vec3 position;
  vec3 color;
};

uniform float time;
uniform float opacity;
uniform vec2 resolution;
uniform vec3 diffuse;
uniform vec3 mouse;
uniform sampler2D map;
uniform Light light;
varying vec2 vUv;

#define MIN_ALPHA 2.0 / 255.0

void main() {
  if (opacity < MIN_ALPHA) discard;
  vec2 imageUV = vUv * 10.0;
  vec3 image = texture2D(map, imageUV).rgb;
  vec3 col = image * diffuse;
  col += (sin(time * 0.1) * 0.5 + 0.5) * 0.2;
  col += vec3(resolution, 0.0);
  col += mouse;
  gl_FragColor = vec4(col, opacity);
}`,Ent="data:image/png;base64,R0lGODlhCAAIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OTc3NywgMjAyMy8wNi8yNS0yMzo1NzoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjVENjQyODM4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjVENjQyODQ4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NUQ2NDI4MThBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NUQ2NDI4MjhBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAIAAgAAAIOjH8AprzRkHyspqSoNAUAOw==";class x_e extends Ia{constructor(){super({vertexShader:xnt,fragmentShader:Snt,name:"ExampleScene/SimpleShader",transparent:!0,uniforms:{diffuse:{value:new vn(16777215)},opacity:{value:1},time:{value:0},map:{value:null},resolution:{value:new ln},mouse:{value:new Oe},testM3:{value:new mr},testM4:{value:new Bn},light:{value:{position:new ln(5,10),intensity:1,color:new vn(16711935)}}}}),db(Ent).then(e=>{this.uniforms.map.value=e})}update(e){this.uniforms.opacity.value=this.opacity,this.uniforms.time.value+=e}}function Cnt(t){const e=new Map,n=new Map,r=t.clone();return S_e(t,r,function(i,o){e.set(o,i),n.set(i,o)}),r.traverse(function(i){if(!i.isSkinnedMesh)return;const o=i,u=e.get(i),d=u.skeleton.bones;o.skeleton=u.skeleton.clone(),o.bindMatrix.copy(u.bindMatrix),o.skeleton.bones=d.map(function(f){return n.get(f)}),o.bind(o.skeleton,o.bindMatrix)}),r}function S_e(t,e,n){n(t,e);for(let r=0;r<t.children.length;r++)S_e(t.children[r],e.children[r],n)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var bge=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(bge(""))}catch{bge=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var vl=Uint8Array,Df=Uint16Array,_W=Uint32Array,E_e=new vl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C_e=new vl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pnt=new vl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P_e=function(t,e){for(var n=new Df(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new _W(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},T_e=P_e(E_e,2),M_e=T_e[0],Tnt=T_e[1];M_e[28]=258,Tnt[258]=28;var Mnt=P_e(C_e,0),knt=Mnt[0],wW=new Df(32768);for(var Di=0;Di<32768;++Di){var bf=(Di&43690)>>>1|(Di&21845)<<1;bf=(bf&52428)>>>2|(bf&13107)<<2,bf=(bf&61680)>>>4|(bf&3855)<<4,wW[Di]=((bf&65280)>>>8|(bf&255)<<8)>>>1}var vb=function(t,e,n){for(var r=t.length,i=0,o=new Df(e);i<r;++i)++o[t[i]-1];var u=new Df(e);for(i=0;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;var d;if(n){d=new Df(1<<e);var f=15-e;for(i=0;i<r;++i)if(t[i])for(var v=i<<4|t[i],x=e-t[i],S=u[t[i]-1]++<<x,M=S|(1<<x)-1;S<=M;++S)d[wW[S]>>>f]=v}else for(d=new Df(r),i=0;i<r;++i)t[i]&&(d[i]=wW[u[t[i]-1]++]>>>15-t[i]);return d},L_=new vl(288);for(var Di=0;Di<144;++Di)L_[Di]=8;for(var Di=144;Di<256;++Di)L_[Di]=9;for(var Di=256;Di<280;++Di)L_[Di]=7;for(var Di=280;Di<288;++Di)L_[Di]=8;var k_e=new vl(32);for(var Di=0;Di<32;++Di)k_e[Di]=5;var Ant=vb(L_,9,1),Int=vb(k_e,5,1),MH=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},vu=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},kH=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Rnt=function(t){return(t/8|0)+(t&7&&1)},Dnt=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Df?Df:t instanceof _W?_W:vl)(n-e);return r.set(t.subarray(e,n)),r},Ont=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new vl(0);var i=!e||n,o=!n||n.i;n||(n={}),e||(e=new vl(r*3));var u=function(Zt){var rn=e.length;if(Zt>rn){var un=new vl(Math.max(rn*2,Zt));un.set(e),e=un}},d=n.f||0,f=n.p||0,v=n.b||0,x=n.l,S=n.d,M=n.m,D=n.n,G=r*8;do{if(!x){n.f=d=vu(t,f,1);var B=vu(t,f+1,3);if(f+=3,B)if(B==1)x=Ant,S=Int,M=9,D=5;else if(B==2){var H=vu(t,f,31)+257,X=vu(t,f+10,15)+4,fe=H+vu(t,f+5,31)+1;f+=14;for(var q=new vl(fe),pe=new vl(19),xe=0;xe<X;++xe)pe[Pnt[xe]]=vu(t,f+xe*3,7);f+=X*3;for(var J=MH(pe),ne=(1<<J)-1,Pe=vb(pe,J,1),xe=0;xe<fe;){var mt=Pe[vu(t,f,ne)];f+=mt&15;var L=mt>>>4;if(L<16)q[xe++]=L;else{var _t=0,de=0;for(L==16?(de=3+vu(t,f,3),f+=2,_t=q[xe-1]):L==17?(de=3+vu(t,f,7),f+=3):L==18&&(de=11+vu(t,f,127),f+=7);de--;)q[xe++]=_t}}var je=q.subarray(0,H),Me=q.subarray(H);M=MH(je),D=MH(Me),x=vb(je,M,1),S=vb(Me,D,1)}else throw"invalid block type";else{var L=Rnt(f)+4,U=t[L-4]|t[L-3]<<8,C=L+U;if(C>r){if(o)throw"unexpected EOF";break}i&&u(v+U),e.set(t.subarray(L,C),v),n.b=v+=U,n.p=f=C*8;continue}if(f>G){if(o)throw"unexpected EOF";break}}i&&u(v+131072);for(var Ct=(1<<M)-1,We=(1<<D)-1,tt=f;;tt=f){var _t=x[kH(t,f)&Ct],Ze=_t>>>4;if(f+=_t&15,f>G){if(o)throw"unexpected EOF";break}if(!_t)throw"invalid length/literal";if(Ze<256)e[v++]=Ze;else if(Ze==256){tt=f,x=null;break}else{var dt=Ze-254;if(Ze>264){var xe=Ze-257,At=E_e[xe];dt=vu(t,f,(1<<At)-1)+M_e[xe],f+=At}var pn=S[kH(t,f)&We],et=pn>>>4;if(!pn)throw"invalid distance";f+=pn&15;var Me=knt[et];if(et>3){var At=C_e[et];Me+=kH(t,f)&(1<<At)-1,f+=At}if(f>G){if(o)throw"unexpected EOF";break}i&&u(v+131072);for(var wt=v+dt;v<wt;v+=4)e[v]=e[v-Me],e[v+1]=e[v+1-Me],e[v+2]=e[v+2-Me],e[v+3]=e[v+3-Me];v=wt}}n.l=x,n.p=tt,n.b=v,x&&(d=1,n.m=M,n.d=S,n.n=D)}while(!d);return v==e.length?e:Dnt(e,0,v)},Lnt=new vl(0),Nnt=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Fnt(t,e){return Ont((Nnt(t),t.subarray(2,-4)),e)}var Bnt=typeof TextDecoder<"u"&&new TextDecoder,Unt=0;try{Bnt.decode(Lnt,{stream:!0}),Unt=1}catch{}function A_e(t,e,n){const r=n.length-t-1;if(e>=n[r])return r-1;if(e<=n[t])return t;let i=t,o=r,u=Math.floor((i+o)/2);for(;e<n[u]||e>=n[u+1];)e<n[u]?o=u:i=u,u=Math.floor((i+o)/2);return u}function znt(t,e,n,r){const i=[],o=[],u=[];i[0]=1;for(let d=1;d<=n;++d){o[d]=e-r[t+1-d],u[d]=r[t+d]-e;let f=0;for(let v=0;v<d;++v){const x=u[v+1],S=o[d-v],M=i[v]/(x+S);i[v]=f+x*M,f=S*M}i[d]=f}return i}function Vnt(t,e,n,r){const i=A_e(t,r,e),o=znt(i,r,t,e),u=new Dr(0,0,0,0);for(let d=0;d<=t;++d){const f=n[i-t+d],v=o[d],x=f.w*v;u.x+=f.x*x,u.y+=f.y*x,u.z+=f.z*x,u.w+=f.w*v}return u}function jnt(t,e,n,r,i){const o=[];for(let S=0;S<=n;++S)o[S]=0;const u=[];for(let S=0;S<=r;++S)u[S]=o.slice(0);const d=[];for(let S=0;S<=n;++S)d[S]=o.slice(0);d[0][0]=1;const f=o.slice(0),v=o.slice(0);for(let S=1;S<=n;++S){f[S]=e-i[t+1-S],v[S]=i[t+S]-e;let M=0;for(let D=0;D<S;++D){const G=v[D+1],B=f[S-D];d[S][D]=G+B;const L=d[D][S-1]/d[S][D];d[D][S]=M+G*L,M=B*L}d[S][S]=M}for(let S=0;S<=n;++S)u[0][S]=d[S][n];for(let S=0;S<=n;++S){let M=0,D=1;const G=[];for(let B=0;B<=n;++B)G[B]=o.slice(0);G[0][0]=1;for(let B=1;B<=r;++B){let L=0;const U=S-B,C=n-B;S>=B&&(G[D][0]=G[M][0]/d[C+1][U],L=G[D][0]*d[U][C]);const H=U>=-1?1:-U,X=S-1<=C?B-1:n-S;for(let q=H;q<=X;++q)G[D][q]=(G[M][q]-G[M][q-1])/d[C+1][U+q],L+=G[D][q]*d[U+q][C];S<=C&&(G[D][B]=-G[M][B-1]/d[C+1][S],L+=G[D][B]*d[S][C]),u[B][S]=L;const fe=M;M=D,D=fe}}let x=n;for(let S=1;S<=r;++S){for(let M=0;M<=n;++M)u[S][M]*=x;x*=n-S}return u}function Hnt(t,e,n,r,i){const o=i<t?i:t,u=[],d=A_e(t,r,e),f=jnt(d,r,t,o,e),v=[];for(let x=0;x<n.length;++x){const S=n[x].clone(),M=S.w;S.x*=M,S.y*=M,S.z*=M,v[x]=S}for(let x=0;x<=o;++x){const S=v[d-t].clone().multiplyScalar(f[x][0]);for(let M=1;M<=t;++M)S.add(v[d-t+M].clone().multiplyScalar(f[x][M]));u[x]=S}for(let x=o+1;x<=i+1;++x)u[x]=new Dr(0,0,0);return u}function Gnt(t,e){let n=1;for(let i=2;i<=t;++i)n*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=t-e;++i)r*=i;return n/r}function Wnt(t){const e=t.length,n=[],r=[];for(let o=0;o<e;++o){const u=t[o];n[o]=new Oe(u.x,u.y,u.z),r[o]=u.w}const i=[];for(let o=0;o<e;++o){const u=n[o].clone();for(let d=1;d<=o;++d)u.sub(i[o-d].clone().multiplyScalar(Gnt(o,d)*r[d]));i[o]=u.divideScalar(r[0])}return i}function $nt(t,e,n,r,i){const o=Hnt(t,e,n,r,i);return Wnt(o)}class Knt extends aze{constructor(e,n,r,i,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let u=0;u<r.length;++u){const d=r[u];this.controlPoints[u]=new Dr(d.x,d.y,d.z,d.w)}}getPoint(e,n=new Oe){const r=n,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=Vnt(this.degree,this.knots,this.controlPoints,i);return o.w!==1&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)}getTangent(e,n=new Oe){const r=n,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=$nt(this.degree,this.knots,this.controlPoints,i,1);return r.copy(o[1]).normalize(),r}}let br,xs,wa;class Xnt extends Qf{constructor(e){super(e)}load(e,n,r,i){const o=this,u=o.path===""?$ze.extractUrlBase(e):o.path,d=new Bze(this.manager);d.setPath(o.path),d.setResponseType("arraybuffer"),d.setRequestHeader(o.requestHeader),d.setWithCredentials(o.withCredentials),d.load(e,function(f){try{n(o.parse(f,u))}catch(v){i?i(v):console.error(v),o.manager.itemError(e)}},r,i)}parse(e,n){if(ert(e))br=new Jnt().parse(e);else{const i=O_e(e);if(!trt(i))throw new Error("THREE.FBXLoader: Unknown format.");if(wge(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+wge(i));br=new Qnt().parse(i)}const r=new x6e(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new qnt(r,this.manager).parse(br)}}class qnt{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){xs=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),r=this.parseMaterials(n),i=this.parseDeformers(),o=new Ynt().parse(i);return this.parseScene(i,o,r),wa}parseConnections(){const e=new Map;return"Connections"in br&&br.Connections.connections.forEach(function(r){const i=r[0],o=r[1],u=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const d={ID:o,relationship:u};e.get(i).parents.push(d),e.has(o)||e.set(o,{parents:[],children:[]});const f={ID:i,relationship:u};e.get(o).children.push(f)}),e}parseImages(){const e={},n={};if("Video"in br.Objects){const r=br.Objects.Video;for(const i in r){const o=r[i],u=parseInt(i);if(e[u]=o.RelativeFilename||o.Filename,"Content"in o){const d=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,f=typeof o.Content=="string"&&o.Content!=="";if(d||f){const v=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=v}}}}for(const r in e){const i=e[r];n[i]!==void 0?e[r]=n[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let o;switch(i){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const u=new Uint8Array(n);return window.URL.createObjectURL(new Blob([u],{type:o}))}}parseTextures(e){const n=new Map;if("Texture"in br.Objects){const r=br.Objects.Texture;for(const i in r){const o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n}parseTexture(e,n){const r=this.loadTexture(e,n);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,o=e.WrapModeV,u=i!==void 0?i.value:0,d=o!==void 0?o.value:0;if(r.wrapS=u===0?gh:Ss,r.wrapT=d===0?gh:Ss,"Scaling"in e){const f=e.Scaling.value;r.repeat.x=f[0],r.repeat.y=f[1]}if("Translation"in e){const f=e.Translation.value;r.offset.x=f[0],r.offset.y=f[1]}return r}loadTexture(e,n){let r;const i=this.textureLoader.path,o=xs.get(e.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(r=n[o[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let u;const d=e.FileName.slice(-3).toLowerCase();if(d==="tga"){const f=this.manager.getHandler(".tga");f===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),u=new Qi):(f.setPath(this.textureLoader.path),u=f.load(r))}else if(d==="dds"){const f=this.manager.getHandler(".dds");f===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),u=new Qi):(f.setPath(this.textureLoader.path),u=f.load(r))}else d==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),u=new Qi):u=this.textureLoader.load(r);return this.textureLoader.setPath(i),u}parseMaterials(e){const n=new Map;if("Material"in br.Objects){const r=br.Objects.Material;for(const i in r){const o=this.parseMaterial(r[i],e);o!==null&&n.set(parseInt(i),o)}}return n}parseMaterial(e,n){const r=e.id,i=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!xs.has(r))return null;const u=this.parseParameters(e,n,r);let d;switch(o.toLowerCase()){case"phong":d=new ub;break;case"lambert":d=new Tze;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),d=new ub;break}return d.setValues(u),d.name=i,d}parseParameters(e,n,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new vn().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new vn().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new vn().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new vn().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new vn().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new vn().fromArray(e.SpecularColor.value).convertSRGBToLinear());const o=this;return xs.get(r).children.forEach(function(u){const d=u.relationship;switch(d){case"Bump":i.bumpMap=o.getTexture(n,u.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(n,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(n,u.ID),i.map!==void 0&&(i.map.colorSpace=ls);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,u.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,u.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=ls);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(n,u.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,u.ID),i.envMap!==void 0&&(i.envMap.mapping=OA,i.envMap.colorSpace=ls);break;case"SpecularColor":i.specularMap=o.getTexture(n,u.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=ls);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(n,u.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",d);break}}),i}getTexture(e,n){return"LayeredTexture"in br.Objects&&n in br.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=xs.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in br.Objects){const r=br.Objects.Deformer;for(const i in r){const o=r[i],u=xs.get(parseInt(i));if(o.attrType==="Skin"){const d=this.parseSkeleton(u,r);d.ID=i,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),d.geometryID=u.parents[0].ID,e[i]=d}else if(o.attrType==="BlendShape"){const d={id:i};d.rawTargets=this.parseMorphTargets(u,r),d.id=i,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=d}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const r=[];return e.children.forEach(function(i){const o=n[i.ID];if(o.attrType!=="Cluster")return;const u={ID:i.ID,indices:[],weights:[],transformLink:new Bn().fromArray(o.TransformLink.a)};"Indexes"in o&&(u.indices=o.Indexes.a,u.weights=o.Weights.a),r.push(u)}),{rawBones:r,bones:[]}}parseMorphTargets(e,n){const r=[];for(let i=0;i<e.children.length;i++){const o=e.children[i],u=n[o.ID],d={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;d.geoID=xs.get(parseInt(o.ID)).children.filter(function(f){return f.relationship===void 0})[0].ID,r.push(d)}return r}parseScene(e,n,r){wa=new x2;const i=this.parseModels(e.skeletons,n,r),o=br.Objects.Model,u=this;i.forEach(function(f){const v=o[f.ID];u.setLookAtProperties(f,v),xs.get(f.ID).parents.forEach(function(S){const M=i.get(S.ID);M!==void 0&&M.add(f)}),f.parent===null&&wa.add(f)}),this.bindSkeleton(e.skeletons,n,i),this.addGlobalSceneSettings(),wa.traverse(function(f){if(f.userData.transformData){f.parent&&(f.userData.transformData.parentMatrix=f.parent.matrix,f.userData.transformData.parentMatrixWorld=f.parent.matrixWorld);const v=R_e(f.userData.transformData);f.applyMatrix4(v),f.updateWorldMatrix()}});const d=new Znt().parse();wa.children.length===1&&wa.children[0].isGroup&&(wa.children[0].animations=d,wa=wa.children[0]),wa.animations=d}parseModels(e,n,r){const i=new Map,o=br.Objects.Model;for(const u in o){const d=parseInt(u),f=o[u],v=xs.get(d);let x=this.buildSkeleton(v,e,d,f.attrName);if(!x){switch(f.attrType){case"Camera":x=this.createCamera(v);break;case"Light":x=this.createLight(v);break;case"Mesh":x=this.createMesh(v,n,r);break;case"NurbsCurve":x=this.createCurve(v,n);break;case"LimbNode":case"Root":x=new BG;break;case"Null":default:x=new x2;break}x.name=f.attrName?zr.sanitizeNodeName(f.attrName):"",x.userData.originalName=f.attrName,x.ID=d}this.getTransformData(x,f),i.set(d,x)}return i}buildSkeleton(e,n,r,i){let o=null;return e.parents.forEach(function(u){for(const d in n){const f=n[d];f.rawBones.forEach(function(v,x){if(v.ID===u.ID){const S=o;o=new BG,o.matrixWorld.copy(v.transformLink),o.name=i?zr.sanitizeNodeName(i):"",o.userData.originalName=i,o.ID=r,f.bones[x]=o,S!==null&&o.add(S)}})}}),o}createCamera(e){let n,r;if(e.children.forEach(function(i){const o=br.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new Or;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let o=1;r.NearPlane!==void 0&&(o=r.NearPlane.value/1e3);let u=1e3;r.FarPlane!==void 0&&(u=r.FarPlane.value/1e3);let d=window.innerWidth,f=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(d=r.AspectWidth.value,f=r.AspectHeight.value);const v=d/f;let x=45;r.FieldOfView!==void 0&&(x=r.FieldOfView.value);const S=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new $s(x,v,o,u),S!==null&&n.setFocalLength(S);break;case 1:n=new Bb(-d/2,d/2,f/2,-f/2,o,u);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new Or;break}}return n}createLight(e){let n,r;if(e.children.forEach(function(i){const o=br.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new Or;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let o=16777215;r.Color!==void 0&&(o=new vn().fromArray(r.Color.value).convertSRGBToLinear());let u=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(u=0);let d=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?d=0:d=r.FarAttenuationEnd.value);const f=1;switch(i){case 0:n=new U3e(o,u,d,f);break;case 1:n=new S6e(o,u);break;case 2:let v=Math.PI/3;r.InnerAngle!==void 0&&(v=Zo.degToRad(r.InnerAngle.value));let x=0;r.OuterAngle!==void 0&&(x=Zo.degToRad(r.OuterAngle.value),x=Math.max(x,1)),n=new G$(o,u,d,v,x,f);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new U3e(o,u);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,r){let i,o=null,u=null;const d=[];return e.children.forEach(function(f){n.has(f.ID)&&(o=n.get(f.ID)),r.has(f.ID)&&d.push(r.get(f.ID))}),d.length>1?u=d:d.length>0?u=d[0]:(u=new ub({name:Qf.DEFAULT_MATERIAL_NAME,color:13421772}),d.push(u)),"color"in o.attributes&&d.forEach(function(f){f.vertexColors=!0}),o.FBX_Deformer?(i=new d6e(o,u),i.normalizeSkinWeights()):i=new Ri(o,u),i}createCurve(e,n){const r=e.children.reduce(function(o,u){return n.has(u.ID)&&(o=n.get(u.ID)),o},null),i=new a1({name:Qf.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Ub(r,i)}getTransformData(e,n){const r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=D_e(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,n){"LookAtProperty"in n&&xs.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const o=br.Objects.Model[i.ID];if("Lcl_Translation"in o){const u=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(u),wa.add(e.target)):e.lookAt(new Oe().fromArray(u))}}})}bindSkeleton(e,n,r){const i=this.parsePoseNodes();for(const o in e){const u=e[o];xs.get(parseInt(u.ID)).parents.forEach(function(f){if(n.has(f.ID)){const v=f.ID;xs.get(v).parents.forEach(function(S){r.has(S.ID)&&r.get(S.ID).bind(new B$(u.bones),i[S.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in br.Objects){const n=br.Objects.Pose;for(const r in n)if(n[r].attrType==="BindPose"&&n[r].NbPoseNodes>0){const i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(o){e[o.Node]=new Bn().fromArray(o.Matrix.a)}):e[i.Node]=new Bn().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in br){if("AmbientColor"in br.GlobalSettings){const e=br.GlobalSettings.AmbientColor.value,n=e[0],r=e[1],i=e[2];if(n!==0||r!==0||i!==0){const o=new vn(n,r,i).convertSRGBToLinear();wa.add(new Gze(o,1))}}"UnitScaleFactor"in br.GlobalSettings&&(wa.userData.unitScaleFactor=br.GlobalSettings.UnitScaleFactor.value)}}}class Ynt{constructor(){this.negativeMaterialIndices=!1}parse(e){const n=new Map;if("Geometry"in br.Objects){const r=br.Objects.Geometry;for(const i in r){const o=xs.get(parseInt(i)),u=this.parseGeometry(o,r[i],e);n.set(parseInt(i),u)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(e,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,r){const i=r.skeletons,o=[],u=e.parents.map(function(S){return br.Objects.Model[S.ID]});if(u.length===0)return;const d=e.children.reduce(function(S,M){return i[M.ID]!==void 0&&(S=i[M.ID]),S},null);e.children.forEach(function(S){r.morphTargets[S.ID]!==void 0&&o.push(r.morphTargets[S.ID])});const f=u[0],v={};"RotationOrder"in f&&(v.eulerOrder=D_e(f.RotationOrder.value)),"InheritType"in f&&(v.inheritType=parseInt(f.InheritType.value)),"GeometricTranslation"in f&&(v.translation=f.GeometricTranslation.value),"GeometricRotation"in f&&(v.rotation=f.GeometricRotation.value),"GeometricScaling"in f&&(v.scale=f.GeometricScaling.value);const x=R_e(v);return this.genGeometry(n,d,o,x)}genGeometry(e,n,r,i){const o=new Ji;e.attrName&&(o.name=e.attrName);const u=this.parseGeoNode(e,n),d=this.genBuffers(u),f=new Vr(d.vertex,3);if(f.applyMatrix4(i),o.setAttribute("position",f),d.colors.length>0&&o.setAttribute("color",new Vr(d.colors,3)),n&&(o.setAttribute("skinIndex",new D$(d.weightsIndices,4)),o.setAttribute("skinWeight",new Vr(d.vertexWeights,4)),o.FBX_Deformer=n),d.normal.length>0){const v=new mr().getNormalMatrix(i),x=new Vr(d.normal,3);x.applyNormalMatrix(v),o.setAttribute("normal",x)}if(d.uvs.forEach(function(v,x){const S=x===0?"uv":`uv${x}`;o.setAttribute(S,new Vr(d.uvs[x],2))}),u.material&&u.material.mappingType!=="AllSame"){let v=d.materialIndex[0],x=0;if(d.materialIndex.forEach(function(S,M){S!==v&&(o.addGroup(x,M-x,v),v=S,x=M)}),o.groups.length>0){const S=o.groups[o.groups.length-1],M=S.start+S.count;M!==d.materialIndex.length&&o.addGroup(M,d.materialIndex.length-M,v)}o.groups.length===0&&o.addGroup(0,d.materialIndex.length,d.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o}parseGeoNode(e,n){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},n!==null&&(r.skeleton=n,n.rawBones.forEach(function(i,o){i.indices.forEach(function(u,d){r.weightTable[u]===void 0&&(r.weightTable[u]=[]),r.weightTable[u].push({id:o,weight:i.weights[d]})})})),r}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,o=!1,u=[],d=[],f=[],v=[],x=[],S=[];const M=this;return e.vertexIndices.forEach(function(D,G){let B,L=!1;D<0&&(D=D^-1,L=!0);let U=[],C=[];if(u.push(D*3,D*3+1,D*3+2),e.color){const H=Uk(G,r,D,e.color);f.push(H[0],H[1],H[2])}if(e.skeleton){if(e.weightTable[D]!==void 0&&e.weightTable[D].forEach(function(H){C.push(H.weight),U.push(H.id)}),C.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const H=[0,0,0,0],X=[0,0,0,0];C.forEach(function(fe,q){let pe=fe,xe=U[q];X.forEach(function(J,ne,Pe){if(pe>J){Pe[ne]=pe,pe=J;const mt=H[ne];H[ne]=xe,xe=mt}})}),U=H,C=X}for(;C.length<4;)C.push(0),U.push(0);for(let H=0;H<4;++H)x.push(C[H]),S.push(U[H])}if(e.normal){const H=Uk(G,r,D,e.normal);d.push(H[0],H[1],H[2])}e.material&&e.material.mappingType!=="AllSame"&&(B=Uk(G,r,D,e.material)[0],B<0&&(M.negativeMaterialIndices=!0,B=0)),e.uv&&e.uv.forEach(function(H,X){const fe=Uk(G,r,D,H);v[X]===void 0&&(v[X]=[]),v[X].push(fe[0]),v[X].push(fe[1])}),i++,L&&(M.genFace(n,e,u,B,d,f,v,x,S,i),r++,i=0,u=[],d=[],f=[],v=[],x=[],S=[])}),n}getNormalNewell(e){const n=new Oe(0,0,0);for(let r=0;r<e.length;r++){const i=e[r],o=e[(r+1)%e.length];n.x+=(i.y-o.y)*(i.z+o.z),n.y+=(i.z-o.z)*(i.x+o.x),n.z+=(i.x-o.x)*(i.y+o.y)}return n.normalize(),n}getNormalTangentAndBitangent(e){const n=this.getNormalNewell(e),i=(Math.abs(n.z)>.5?new Oe(0,1,0):new Oe(0,0,1)).cross(n).normalize(),o=n.clone().cross(i).normalize();return{normal:n,tangent:i,bitangent:o}}flattenVertex(e,n,r){return new ln(e.dot(n),e.dot(r))}genFace(e,n,r,i,o,u,d,f,v,x){let S;if(x>3){const M=[];for(let L=0;L<r.length;L+=3)M.push(new Oe(n.vertexPositions[r[L]],n.vertexPositions[r[L+1]],n.vertexPositions[r[L+2]]));const{tangent:D,bitangent:G}=this.getNormalTangentAndBitangent(M),B=[];for(const L of M)B.push(this.flattenVertex(L,D,G));S=V$.triangulateShape(B,[])}else S=[[0,1,2]];for(const[M,D,G]of S)e.vertex.push(n.vertexPositions[r[M*3]]),e.vertex.push(n.vertexPositions[r[M*3+1]]),e.vertex.push(n.vertexPositions[r[M*3+2]]),e.vertex.push(n.vertexPositions[r[D*3]]),e.vertex.push(n.vertexPositions[r[D*3+1]]),e.vertex.push(n.vertexPositions[r[D*3+2]]),e.vertex.push(n.vertexPositions[r[G*3]]),e.vertex.push(n.vertexPositions[r[G*3+1]]),e.vertex.push(n.vertexPositions[r[G*3+2]]),n.skeleton&&(e.vertexWeights.push(f[M*4]),e.vertexWeights.push(f[M*4+1]),e.vertexWeights.push(f[M*4+2]),e.vertexWeights.push(f[M*4+3]),e.vertexWeights.push(f[D*4]),e.vertexWeights.push(f[D*4+1]),e.vertexWeights.push(f[D*4+2]),e.vertexWeights.push(f[D*4+3]),e.vertexWeights.push(f[G*4]),e.vertexWeights.push(f[G*4+1]),e.vertexWeights.push(f[G*4+2]),e.vertexWeights.push(f[G*4+3]),e.weightsIndices.push(v[M*4]),e.weightsIndices.push(v[M*4+1]),e.weightsIndices.push(v[M*4+2]),e.weightsIndices.push(v[M*4+3]),e.weightsIndices.push(v[D*4]),e.weightsIndices.push(v[D*4+1]),e.weightsIndices.push(v[D*4+2]),e.weightsIndices.push(v[D*4+3]),e.weightsIndices.push(v[G*4]),e.weightsIndices.push(v[G*4+1]),e.weightsIndices.push(v[G*4+2]),e.weightsIndices.push(v[G*4+3])),n.color&&(e.colors.push(u[M*3]),e.colors.push(u[M*3+1]),e.colors.push(u[M*3+2]),e.colors.push(u[D*3]),e.colors.push(u[D*3+1]),e.colors.push(u[D*3+2]),e.colors.push(u[G*3]),e.colors.push(u[G*3+1]),e.colors.push(u[G*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),n.normal&&(e.normal.push(o[M*3]),e.normal.push(o[M*3+1]),e.normal.push(o[M*3+2]),e.normal.push(o[D*3]),e.normal.push(o[D*3+1]),e.normal.push(o[D*3+2]),e.normal.push(o[G*3]),e.normal.push(o[G*3+1]),e.normal.push(o[G*3+2])),n.uv&&n.uv.forEach(function(B,L){e.uvs[L]===void 0&&(e.uvs[L]=[]),e.uvs[L].push(d[L][M*2]),e.uvs[L].push(d[L][M*2+1]),e.uvs[L].push(d[L][D*2]),e.uvs[L].push(d[L][D*2+1]),e.uvs[L].push(d[L][G*2]),e.uvs[L].push(d[L][G*2+1])})}addMorphTargets(e,n,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;r.forEach(function(u){u.rawTargets.forEach(function(d){const f=br.Objects.Geometry[d.geoID];f!==void 0&&o.genMorphGeometry(e,n,f,i,d.name)})})}genMorphGeometry(e,n,r,i,o){const u=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],d=r.Vertices!==void 0?r.Vertices.a:[],f=r.Indexes!==void 0?r.Indexes.a:[],v=e.attributes.position.count*3,x=new Float32Array(v);for(let G=0;G<f.length;G++){const B=f[G]*3;x[B]=d[G*3],x[B+1]=d[G*3+1],x[B+2]=d[G*3+2]}const S={vertexIndices:u,vertexPositions:x},M=this.genBuffers(S),D=new Vr(M.vertex,3);D.name=o||r.attrName,D.applyMatrix4(i),e.morphAttributes.position.push(D)}parseNormals(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let o=[];return r==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:n,referenceType:r}}parseUVs(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let o=[];return r==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:n,referenceType:r}}parseVertexColors(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let o=[];r==="IndexToDirect"&&(o=e.ColorIndex.a);for(let u=0,d=new vn;u<i.length;u+=4)d.fromArray(i,u).convertSRGBToLinear().toArray(i,u);return{dataSize:4,buffer:i,indices:o,mappingType:n,referenceType:r}}parseMaterialIndices(e){const n=e.MappingInformationType,r=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,o=[];for(let u=0;u<i.length;++u)o.push(u);return{dataSize:1,buffer:i,indices:o,mappingType:n,referenceType:r}}parseNurbsGeometry(e){const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Ji;const r=n-1,i=e.KnotVector.a,o=[],u=e.Points.a;for(let S=0,M=u.length;S<M;S+=4)o.push(new Dr().fromArray(u,S));let d,f;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){d=r,f=i.length-1-d;for(let S=0;S<r;++S)o.push(o[S])}const x=new Knt(r,i,o,d,f).getPoints(o.length*12);return new Ji().setFromPoints(x)}}class Znt{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const r in n){const i=n[r],o=this.addClip(i);e.push(o)}return e}parseClips(){if(br.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=br.Objects.AnimationCurveNode,n=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(e){const n=br.Objects.AnimationCurve;for(const r in n){const i={id:n[r].id,times:n[r].KeyTime.a.map(nrt),values:n[r].KeyValueFloat.a},o=xs.get(i.id);if(o!==void 0){const u=o.parents[0].ID,d=o.parents[0].relationship;d.match(/X/)?e.get(u).curves.x=i:d.match(/Y/)?e.get(u).curves.y=i:d.match(/Z/)?e.get(u).curves.z=i:d.match(/DeformPercent/)&&e.has(u)&&(e.get(u).curves.morph=i)}}}parseAnimationLayers(e){const n=br.Objects.AnimationLayer,r=new Map;for(const i in n){const o=[],u=xs.get(parseInt(i));u!==void 0&&(u.children.forEach(function(f,v){if(e.has(f.ID)){const x=e.get(f.ID);if(x.curves.x!==void 0||x.curves.y!==void 0||x.curves.z!==void 0){if(o[v]===void 0){const S=xs.get(f.ID).parents.filter(function(M){return M.relationship!==void 0})[0].ID;if(S!==void 0){const M=br.Objects.Model[S.toString()];if(M===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",f);return}const D={modelName:M.attrName?zr.sanitizeNodeName(M.attrName):"",ID:M.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};wa.traverse(function(G){G.ID===M.id&&(D.transform=G.matrix,G.userData.transformData&&(D.eulerOrder=G.userData.transformData.eulerOrder))}),D.transform||(D.transform=new Bn),"PreRotation"in M&&(D.preRotation=M.PreRotation.value),"PostRotation"in M&&(D.postRotation=M.PostRotation.value),o[v]=D}}o[v]&&(o[v][x.attr]=x)}else if(x.curves.morph!==void 0){if(o[v]===void 0){const S=xs.get(f.ID).parents.filter(function(U){return U.relationship!==void 0})[0].ID,M=xs.get(S).parents[0].ID,D=xs.get(M).parents[0].ID,G=xs.get(D).parents[0].ID,B=br.Objects.Model[G],L={modelName:B.attrName?zr.sanitizeNodeName(B.attrName):"",morphName:br.Objects.Deformer[S].attrName};o[v]=L}o[v][x.attr]=x}}}),r.set(parseInt(i),o))}return r}parseAnimStacks(e){const n=br.Objects.AnimationStack,r={};for(const i in n){const o=xs.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=e.get(o[0].ID);r[i]={name:n[i].attrName,layer:u}}return r}addClip(e){let n=[];const r=this;return e.layer.forEach(function(i){n=n.concat(r.generateTracks(i))}),new jG(e.name,-1,n)}generateTracks(e){const n=[];let r=new Oe,i=new Oe;if(e.transform&&e.transform.decompose(r,new Ws,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,r,i){const o=this.getTimesForAllAxes(n),u=this.getKeyframeTrackValues(o,n,r);return new Gb(e+"."+i,o,u)}generateRotationTrack(e,n,r,i,o){let u,d;if(n.x!==void 0&&n.y!==void 0&&n.z!==void 0){const S=this.interpolateRotations(n.x,n.y,n.z,o);u=S[0],d=S[1]}r!==void 0&&(r=r.map(Zo.degToRad),r.push(o),r=new Ea().fromArray(r),r=new Ws().setFromEuler(r)),i!==void 0&&(i=i.map(Zo.degToRad),i.push(o),i=new Ea().fromArray(i),i=new Ws().setFromEuler(i).invert());const f=new Ws,v=new Ea,x=[];if(!d||!u)return new z2(e+".quaternion",[],[]);for(let S=0;S<d.length;S+=3)v.set(d[S],d[S+1],d[S+2],o),f.setFromEuler(v),r!==void 0&&f.premultiply(r),i!==void 0&&f.multiply(i),S>2&&new Ws().fromArray(x,(S-3)/3*4).dot(f)<0&&f.set(-f.x,-f.y,-f.z,-f.w),f.toArray(x,S/3*4);return new z2(e+".quaternion",u,x)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,r=n.values.map(function(o){return o/100}),i=wa.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Hb(e.modelName+".morphTargetInfluences["+i+"]",n.times,r)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(r,i){return r-i}),n.length>1){let r=1,i=n[0];for(let o=1;o<n.length;o++){const u=n[o];u!==i&&(n[r]=u,i=u,r++)}n=n.slice(0,r)}return n}getKeyframeTrackValues(e,n,r){const i=r,o=[];let u=-1,d=-1,f=-1;return e.forEach(function(v){if(n.x&&(u=n.x.times.indexOf(v)),n.y&&(d=n.y.times.indexOf(v)),n.z&&(f=n.z.times.indexOf(v)),u!==-1){const x=n.x.values[u];o.push(x),i[0]=x}else o.push(i[0]);if(d!==-1){const x=n.y.values[d];o.push(x),i[1]=x}else o.push(i[1]);if(f!==-1){const x=n.z.values[f];o.push(x),i[2]=x}else o.push(i[2])}),o}interpolateRotations(e,n,r,i){const o=[],u=[];o.push(e.times[0]),u.push(Zo.degToRad(e.values[0])),u.push(Zo.degToRad(n.values[0])),u.push(Zo.degToRad(r.values[0]));for(let d=1;d<e.values.length;d++){const f=[e.values[d-1],n.values[d-1],r.values[d-1]];if(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))continue;const v=f.map(Zo.degToRad),x=[e.values[d],n.values[d],r.values[d]];if(isNaN(x[0])||isNaN(x[1])||isNaN(x[2]))continue;const S=x.map(Zo.degToRad),M=[x[0]-f[0],x[1]-f[1],x[2]-f[2]],D=[Math.abs(M[0]),Math.abs(M[1]),Math.abs(M[2])];if(D[0]>=180||D[1]>=180||D[2]>=180){const B=Math.max(...D)/180,L=new Ea(...v,i),U=new Ea(...S,i),C=new Ws().setFromEuler(L),H=new Ws().setFromEuler(U);C.dot(H)&&H.set(-H.x,-H.y,-H.z,-H.w);const X=e.times[d-1],fe=e.times[d]-X,q=new Ws,pe=new Ea;for(let xe=0;xe<1;xe+=1/B)q.copy(C.clone().slerp(H.clone(),xe)),o.push(X+xe*fe),pe.setFromQuaternion(q,i),u.push(pe.x),u.push(pe.y),u.push(pe.z)}else o.push(e.times[d]),u.push(Zo.degToRad(e.values[d])),u.push(Zo.degToRad(n.values[d])),u.push(Zo.degToRad(r.values[d]))}return[o,u]}}class Qnt{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new I_e,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,o){const u=i.match(/^[\s\t]*;/),d=i.match(/^[\s\t]*$/);if(u||d)return;const f=i.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),v=i.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),x=i.match("^\\t{"+(n.currentIndent-1)+"}}");f?n.parseNodeBegin(i,f):v?n.parseNodeProperty(i,v,r[++o]):x?n.popStack():i.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,n){const r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(f){return f.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},u=this.parseNodeAttr(i),d=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,o):r in d?(r==="PoseNode"?d.PoseNode.push(o):d[r].id!==void 0&&(d[r]={},d[r][d[r].id]=d[r]),u.id!==""&&(d[r][u.id]=o)):typeof u.id=="number"?(d[r]={},d[r][u.id]=o):r!=="Properties70"&&(r==="PoseNode"?d[r]=[o]:d[r]=o),typeof u.id=="number"&&(o.id=u.id),u.name!==""&&(o.attrName=u.name),u.type!==""&&(o.attrType=u.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:n,name:r,type:i}}parseNodeProperty(e,n,r){let i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&o===","&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(e,i,o);return}if(i==="C"){const f=o.split(",").slice(1),v=parseInt(f[0]),x=parseInt(f[1]);let S=o.split(",").slice(3);S=S.map(function(M){return M.trim().replace(/^"/,"")}),i="connections",o=[v,x],irt(o,S),u[i]===void 0&&(u[i]=[])}i==="Node"&&(u.id=o),i in u&&Array.isArray(u[i])?u[i].push(o):i!=="a"?u[i]=o:u.a=o,this.setCurrentProp(u,i),i==="a"&&o.slice(-1)!==","&&(u.a=IH(o))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=IH(n.a))}parseNodeSpecialProperty(e,n,r){const i=r.split('",').map(function(x){return x.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],u=i[1],d=i[2],f=i[3];let v=i[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=IH(v);break}this.getPrevNode()[o]={type:u,type2:d,flag:f,value:v},this.setCurrentProp(this.getPrevNode(),o)}}class Jnt{parse(e){const n=new _ge(e);n.skip(23);const r=n.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new I_e;for(;!this.endOfContent(n);){const o=this.parseNode(n,r);o!==null&&i.add(o.name,o)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const r={},i=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const u=e.getUint8(),d=e.getString(u);if(i===0)return null;const f=[];for(let M=0;M<o;M++)f.push(this.parseProperty(e));const v=f.length>0?f[0]:"",x=f.length>1?f[1]:"",S=f.length>2?f[2]:"";for(r.singleProperty=o===1&&e.getOffset()===i;i>e.getOffset();){const M=this.parseNode(e,n);M!==null&&this.parseSubNode(d,r,M)}return r.propertyList=f,typeof v=="number"&&(r.id=v),x!==""&&(r.attrName=x),S!==""&&(r.attrType=S),d!==""&&(r.name=d),r}parseSubNode(e,n,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(n[r.name]=r,r.a=i):n[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(o,u){u!==0&&i.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(o){n[o]=r[o]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],o=r.propertyList[1];const u=r.propertyList[2],d=r.propertyList[3];let f;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?f=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:f=r.propertyList[4],n[i]={type:o,type2:u,flag:d,value:f}}else n[r.name]===void 0?typeof r.id=="number"?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:r.name==="PoseNode"?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):n[r.name][r.id]===void 0&&(n[r.name][r.id]=r)}parseProperty(e){const n=e.getString(1);let r;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),o=e.getUint32(),u=e.getUint32();if(o===0)switch(n){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const d=Fnt(new Uint8Array(e.getArrayBuffer(u))),f=new _ge(d.buffer);switch(n){case"b":case"c":return f.getBooleanArray(i);case"d":return f.getFloat64Array(i);case"f":return f.getFloat32Array(i);case"i":return f.getInt32Array(i);case"l":return f.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class _ge{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let r=0;r<e;r++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){const n=this.offset;let r=new Uint8Array(this.dv.buffer,n,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,n,i)),this._textDecoder.decode(r)}}class I_e{add(e,n){this[e]=n}}function ert(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===O_e(t,0,e.length)}function trt(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(i){const o=t[i-1];return t=t.slice(n+i),n++,o}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function wge(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function nrt(t){return t/46186158e3}const rrt=[];function Uk(t,e,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const o=i*r.dataSize,u=o+r.dataSize;return srt(rrt,r.buffer,o,u)}const AH=new Ea,f4=new Oe;function R_e(t){const e=new Bn,n=new Bn,r=new Bn,i=new Bn,o=new Bn,u=new Bn,d=new Bn,f=new Bn,v=new Bn,x=new Bn,S=new Bn,M=new Bn,D=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(f4.fromArray(t.translation)),t.preRotation){const ne=t.preRotation.map(Zo.degToRad);ne.push(t.eulerOrder||Ea.DEFAULT_ORDER),n.makeRotationFromEuler(AH.fromArray(ne))}if(t.rotation){const ne=t.rotation.map(Zo.degToRad);ne.push(t.eulerOrder||Ea.DEFAULT_ORDER),r.makeRotationFromEuler(AH.fromArray(ne))}if(t.postRotation){const ne=t.postRotation.map(Zo.degToRad);ne.push(t.eulerOrder||Ea.DEFAULT_ORDER),i.makeRotationFromEuler(AH.fromArray(ne)),i.invert()}t.scale&&o.scale(f4.fromArray(t.scale)),t.scalingOffset&&d.setPosition(f4.fromArray(t.scalingOffset)),t.scalingPivot&&u.setPosition(f4.fromArray(t.scalingPivot)),t.rotationOffset&&f.setPosition(f4.fromArray(t.rotationOffset)),t.rotationPivot&&v.setPosition(f4.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(S.copy(t.parentMatrix),x.copy(t.parentMatrixWorld));const G=n.clone().multiply(r).multiply(i),B=new Bn;B.extractRotation(x);const L=new Bn;L.copyPosition(x);const U=L.clone().invert().multiply(x),C=B.clone().invert().multiply(U),H=o,X=new Bn;if(D===0)X.copy(B).multiply(G).multiply(C).multiply(H);else if(D===1)X.copy(B).multiply(C).multiply(G).multiply(H);else{const Pe=new Bn().scale(new Oe().setFromMatrixScale(S)).clone().invert(),mt=C.clone().multiply(Pe);X.copy(B).multiply(G).multiply(mt).multiply(H)}const fe=v.clone().invert(),q=u.clone().invert();let pe=e.clone().multiply(f).multiply(v).multiply(n).multiply(r).multiply(i).multiply(fe).multiply(d).multiply(u).multiply(o).multiply(q);const xe=new Bn().copyPosition(pe),J=x.clone().multiply(xe);return M.copyPosition(J),pe=M.clone().multiply(X),pe.premultiply(x.invert()),pe}function D_e(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function IH(t){return t.split(",").map(function(n){return parseFloat(n)})}function O_e(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,n))}function irt(t,e){for(let n=0,r=t.length,i=e.length;n<i;n++,r++)t[r]=e[n]}function srt(t,e,n,r){for(let i=n,o=0;i<r;i++,o++)t[o]=e[i];return t}const L_e=new Map,N_e=new Map,F_e=new Map,PX=new Map;function ort(t,e){return new Promise((n,r)=>{new Uze().setPath("images/milkyWay/").load(e,i=>{L_e.set(t,i),n(i)},void 0,()=>{r()})})}function art(t,e){return new Promise((n,r)=>{new Xnt().setPath("./models/").loadAsync(e).then(i=>{i.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),F_e.set(t,i),n(i)}).catch(i=>{console.log("Couldn't load:",e),console.log(i),r()})})}function lrt(t,e){return new Promise((n,r)=>{new x6e().load(e,i=>{i.wrapS=gh,i.wrapT=gh,i.needsUpdate=!0,PX.set(t,i),n(i)},void 0,()=>{r()})})}function urt(t,e){return new Promise((n,r)=>{fetch(e).then(i=>{if(!i.ok)throw new Error(`Network response was not ok: ${i.status}`);return i.json()}).then(i=>{N_e.set(t,i),n(i)}).catch(()=>{console.log(`Couldn't load: ${e}`),r()})})}function crt(){return new Promise((t,e)=>{const n=[()=>ort("environment",["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]),()=>lrt("uv_grid","images/uv_grid_opengl.jpg"),()=>art("Flair","Flair.fbx"),()=>urt("animation","json/animation.json")];Promise.all(n.map(r=>r())).then(()=>{t_.dispatchEvent({type:n_.LOAD_COMPLETE}),t()}).catch(()=>{e()})})}class B_e extends Or{constructor(n){super();yr(this,"mixer");this.name=n,this.scale.setScalar(.5);const r=F_e.get(n),i=Cnt(r);this.add(i),this.mixer=new oVe(i),i.mixer=this.mixer,this.mixer.clipAction(i.animations[0]).play()}update(n){this.mixer.update(n)}}class U_e extends HA{constructor(n){super();yr(this,"camera");yr(this,"renderer");yr(this,"clock");this.renderer=n,this.clock=new Kze,this.clock.start();const r=new Or;r.name="cameras",this.add(r),this.camera=new $s(90,1,10,1e3),this.camera.name="Main",this.camera.position.set(0,100,125),this.camera.lookAt(0,50,0),r.add(this.camera)}dispose(){Ar.components.get("theatre").clearSheetObjects(this.name)}resize(n,r){this.camera.aspect=n/r,this.camera.updateProjectionMatrix()}update(){}draw(){this.renderer.render(this,this.camera)}}class z_e extends U_e{constructor(n){super(n);yr(this,"dance");yr(this,"customMat");yr(this,"post");this.name="Scene1";const r=L_e.get("environment");if(this.background=r,Ar.editor){const o=new Ri(new Gf,new Zf({envMap:r,side:Ps}));o.name="bg",o.scale.setScalar(1e3),this.add(o)}this.createLights(),this.createWorld(),Ar.editor||this.createPost(),this.createAnimation(),zI(this);const i=Ar.components.get("three");i.setScene(this),i.addCamera(this.camera)}createLights(){const n=new Or;n.name="lights",this.add(n);const r=new S6e(16777215,.25);r.name="sun",r.castShadow=!0,r.position.set(0,50,50);const i=256;r.shadow.camera.top=i,r.shadow.camera.bottom=-i,r.shadow.camera.left=-i,r.shadow.camera.right=i,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.camera.near=10,r.shadow.camera.far=1e3,r.shadow.bias=1e-4,n.add(r);const o=new zze(7320802,12872999,.5);o.name="hemi",n.add(o);const u=new G$(16777215,3);u.angle=5.8,u.decay=0,u.distance=1e3,u.penumbra=Math.PI,u.name="spotlight",u.castShadow=!0,u.position.set(-50,200,200),u.lookAt(0,50,0),n.add(u)}createWorld(){const n=new Or;n.name="world",this.add(n);const r=PX.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new ub({map:r}),o=new Ri(new U$(500,36),i);o.name="floor",o.receiveShadow=!0,o.rotateX(-Math.PI/2),n.add(o),this.dance=new B_e("Flair"),this.dance.position.set(0,0,0),n.add(this.dance),this.createTestMaterials(n)}createTestMaterials(n){const r=new Gf(20),i=[],o=new Ri(r,new Zf({name:"BasicMaterial",transparent:!0}));o.name="Basic",n.add(o),i.push(o);const u=new Ri(r,new v6e({transparent:!0}));u.name="Matcap",n.add(u),i.push(u);const d=new Ri(r,new ub({name:"PhongMaterial",transparent:!0}));d.name="Phong",n.add(d),i.push(d);const f=new Ri(r,new g6e({name:"PhysicalMaterial",transparent:!0}));f.name="Physical",n.add(f),i.push(f),this.customMat=new x_e;const v=new Ri(r,this.customMat);v.name="Shader",n.add(v),i.push(v);const x=50,S=i.length,M=(S-1)/2*x;for(let D=0;D<S;D++){const G=D*x-M;i[D].position.set(G,100,-150),i[D].castShadow=!0}}createPost(){this.post=new Att(this.renderer),this.post.addPass(new Stt(this,this.camera));const n=new fnt;n.minEdgeThreshold=.01,this.post.addPass(new CH(this.camera,n));const r=new bnt({focusArea:.6});this.post.addPass(new CH(this.camera,r));const i=new gnt({});i.blendMode.opacity.value=.33,i.blendMode.blendFunction=_r.MULTIPLY;const o=new wnt({});this.post.addPass(new CH(this.camera,i,o))}createAnimation(){const n=Ar.components.get("theatre");n.sheet(this.name),n.sheetObject(this.name,"Camera",{position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}},r=>{this.camera.position.set(r.position.x,r.position.y,r.position.z),this.camera.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.sheetObject(this.name,"Break Dancer",{position:{x:this.dance.position.x,y:this.dance.position.y,z:this.dance.position.z},rotation:{x:this.dance.rotation.x,y:this.dance.rotation.y,z:this.dance.rotation.z}},r=>{this.dance.position.set(r.position.x,r.position.y,r.position.z),this.dance.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.playSheet(this.name,{iterationCount:1/0})}update(){const n=this.clock.getDelta();this.customMat.update(n),this.dance.update(n)}draw(){Ar.editor,this.post.render()}resize(n,r){super.resize(n,r),Ar.editor||this.post.setSize(n,r)}}class drt{static init(){const e=[1,0,0,2e-5,1,0,0,503905e-9,1,0,0,.00201562,1,0,0,.00453516,1,0,0,.00806253,1,0,0,.0125978,1,0,0,.018141,1,0,0,.0246924,1,0,0,.0322525,1,0,0,.0408213,1,0,0,.0503999,1,0,0,.0609894,1,0,0,.0725906,1,0,0,.0852058,1,0,0,.0988363,1,0,0,.113484,1,0,0,.129153,1,0,0,.145839,1,0,0,.163548,1,0,0,.182266,1,0,0,.201942,1,0,0,.222314,1,0,0,.241906,1,0,0,.262314,1,0,0,.285754,1,0,0,.310159,1,0,0,.335426,1,0,0,.361341,1,0,0,.387445,1,0,0,.412784,1,0,0,.438197,1,0,0,.466966,1,0,0,.49559,1,0,0,.523448,1,0,0,.549938,1,0,0,.57979,1,0,0,.608746,1,0,0,.636185,1,0,0,.664748,1,0,0,.69313,1,0,0,.71966,1,0,0,.747662,1,0,0,.774023,1,0,0,.799775,1,0,0,.825274,1,0,0,.849156,1,0,0,.873248,1,0,0,.89532,1,0,0,.917565,1,0,0,.937863,1,0,0,.958139,1,0,0,.976563,1,0,0,.994658,1,0,0,1.0112,1,0,0,1.02712,1,0,0,1.04189,1,0,0,1.05568,1,0,0,1.06877,1,0,0,1.08058,1,0,0,1.09194,1,0,0,1.10191,1,0,0,1.11161,1,0,0,1.1199,1,0,0,1.12813,.999547,-448815e-12,.0224417,199902e-10,.999495,-113079e-10,.0224406,503651e-9,.999496,-452317e-10,.0224406,.00201461,.999496,-101772e-9,.0224406,.00453287,.999495,-180928e-9,.0224406,.00805845,.999497,-282702e-9,.0224406,.0125914,.999496,-407096e-9,.0224406,.0181319,.999498,-554114e-9,.0224406,.02468,.999499,-723768e-9,.0224406,.0322363,.999495,-916058e-9,.0224405,.0408009,.999499,-.00113101,.0224408,.050375,.999494,-.00136863,.0224405,.0609586,.999489,-.00162896,.0224401,.0725537,.999489,-.00191201,.0224414,.0851619,.999498,-.00221787,.0224413,.0987867,.999492,-.00254642,.0224409,.113426,.999507,-.00289779,.0224417,.129088,.999494,-.0032716,.0224386,.145767,.999546,-.0036673,.0224424,.163472,.999543,-.00408166,.0224387,.182182,.999499,-.00450056,.0224338,.201843,.999503,-.00483661,.0224203,.222198,.999546,-.00452928,.022315,.241714,.999508,-.00587403,.0224329,.262184,.999509,-.00638806,.0224271,.285609,.999501,-.00691028,.0224166,.309998,.999539,-.00741979,.0223989,.335262,.999454,-.00786282,.0223675,.361154,.999529,-.00811928,.0222828,.387224,.999503,-.00799941,.0221063,.41252,.999561,-.00952753,.0223057,.438006,.999557,-.0099134,.0222065,.466735,.999541,-.0100935,.0220402,.495332,.999562,-.00996821,.0218067,.523197,.999556,-.0105031,.0217096,.550223,.999561,-.0114191,.0217215,.579498,.999588,-.0111818,.0213357,.608416,.999633,-.0107725,.0208689,.635965,.999527,-.0121671,.0210149,.664476,.999508,-.0116005,.020431,.692786,.999568,-.0115604,.0199791,.719709,.999671,-.0121117,.0197415,.74737,.999688,-.0110769,.0188846,.773692,.99962,-.0122368,.0188452,.799534,.999823,-.0110325,.0178001,.825046,.999599,-.0114923,.0174221,.849075,.999619,-.0105923,.0164345,.872999,.999613,-.0105988,.0158227,.895371,.99964,-.00979861,.0148131,.917364,.99977,-.00967238,.0140721,.938002,.999726,-.00869175,.0129543,.957917,.99973,-.00866872,.0122329,.976557,.999773,-.00731956,.0108958,.994459,.999811,-.00756027,.0102715,1.01118,.999862,-.00583732,.00878781,1.02701,.999835,-.00631438,.00827529,1.04186,.999871,-.00450785,.00674583,1.05569,.999867,-.00486079,.00621041,1.06861,.999939,-.00322072,.00478301,1.08064,.999918,-.00318199,.00406395,1.09181,1.00003,-.00193348,.00280682,1.10207,.999928,-.00153729,.00198741,1.11152,.999933,-623666e-9,917714e-9,1.12009,1,-102387e-11,907581e-12,1.12813,.997866,-896716e-12,.0448334,199584e-10,.997987,-225945e-10,.0448389,502891e-9,.997987,-903781e-10,.0448388,.00201156,.997985,-203351e-9,.0448388,.00452602,.997986,-361514e-9,.0448388,.00804629,.997987,-56487e-8,.0448389,.0125724,.997988,-813423e-9,.0448389,.0181045,.997984,-.00110718,.0448387,.0246427,.997985,-.00144616,.0448388,.0321875,.997987,-.00183038,.044839,.0407392,.997983,-.00225987,.0448387,.0502986,.997991,-.00273467,.0448389,.0608667,.997984,-.00325481,.0448384,.0724444,.998002,-.00382043,.044839,.0850348,.997997,-.00443145,.0448396,.0986372,.998007,-.00508796,.0448397,.113255,.998008,-.00578985,.04484,.128891,.998003,-.00653683,.0448384,.145548,.997983,-.00732713,.0448358,.163221,.997985,-.00815454,.0448358,.181899,.998005,-.00898985,.0448286,.201533,.998026,-.00964404,.0447934,.221821,.998055,-.00922677,.044611,.241282,.99804,-.0117361,.0448245,.261791,.998048,-.0127628,.0448159,.285181,.998088,-.0138055,.0447996,.30954,.998058,-.0148206,.0447669,.334751,.998099,-.0156998,.044697,.36061,.998116,-.0161976,.0445122,.386603,.998195,-.015945,.0441711,.411844,.998168,-.0183947,.0444255,.43773,.998184,-.0197913,.0443809,.466009,.998251,-.0201426,.0440689,.494574,.998305,-.0198847,.0435632,.522405,.998273,-.0210577,.043414,.549967,.998254,-.0227901,.0433943,.578655,.998349,-.0223108,.0426529,.60758,.99843,-.0223088,.042,.635524,.998373,-.0241141,.0418987,.663621,.998425,-.0231446,.0408118,.691906,.998504,-.0233684,.0400565,.719339,.998443,-.0241652,.0394634,.74643,.99848,-.0228715,.0380002,.773086,.998569,-.023519,.0372322,.798988,.998619,-.0223108,.0356468,.824249,.998594,-.0223105,.034523,.848808,.998622,-.0213426,.0328887,.87227,.998669,-.0207912,.0314374,.895157,.998705,-.0198416,.0296925,.916769,.998786,-.0189168,.0279634,.937773,.998888,-.0178811,.0261597,.957431,.99906,-.0166845,.0242159,.976495,.999038,-.0155464,.0222638,.994169,.999237,-.0141349,.0201967,1.01112,.999378,-.0129324,.0181744,1.02692,.999433,-.0113192,.0159898,1.04174,.999439,-.0101244,.0140385,1.05559,.999614,-.00837456,.0117826,1.06852,.999722,-.00721769,.00983745,1.08069,.999817,-.00554067,.00769002,1.09176,.99983,-.00426961,.005782,1.10211,.999964,-.00273904,.00374503,1.11152,1.00001,-.00136739,.00187176,1.12031,.999946,393227e-10,-28919e-9,1.12804,.995847,-13435e-10,.0671785,19916e-9,.995464,-338387e-10,.0671527,501622e-9,.99547,-135355e-9,.0671531,.00200649,.995471,-30455e-8,.0671532,.00451461,.99547,-541423e-9,.0671531,.008026,.995471,-84598e-8,.0671531,.0125407,.99547,-.00121823,.0671531,.0180589,.99547,-.00165817,.0671531,.0245806,.995463,-.00216583,.0671526,.0321062,.995468,-.00274127,.0671527,.0406366,.995474,-.00338447,.0671534,.0501717,.995473,-.00409554,.0671533,.0607131,.995478,-.00487451,.0671531,.0722618,.995476,-.00572148,.0671532,.0848191,.995477,-.00663658,.0671539,.0983882,.995498,-.00761986,.0671541,.112972,.995509,-.00867094,.0671542,.128568,.995509,-.00978951,.0671531,.145183,.995503,-.0109725,.0671491,.162808,.995501,-.012211,.0671465,.181441,.99553,-.0134565,.0671371,.201015,.99555,-.014391,.0670831,.221206,.99558,-.014351,.0668883,.240813,.995577,-.0173997,.0671055,.261257,.995602,-.0191111,.0671178,.284467,.995623,-.0206705,.0670946,.308765,.995658,-.022184,.0670472,.333905,.995705,-.0234832,.0669417,.359677,.995719,-.0241933,.0666714,.385554,.995786,-.0243539,.066266,.410951,.995887,-.0271866,.0664367,.437163,.995944,-.0296012,.0664931,.464842,.996004,-.0301045,.0660105,.49332,.996128,-.0298311,.0652694,.521131,.996253,-.0316426,.0650739,.549167,.996244,-.0339043,.0649433,.57737,.996309,-.033329,.0638926,.606073,.996417,-.0338935,.0630849,.634527,.996372,-.0353104,.0625083,.66256,.996542,-.0348942,.0611986,.690516,.996568,-.0351614,.060069,.718317,.996711,-.0354317,.0588522,.74528,.996671,-.0349513,.0571902,.772061,.996865,-.0345622,.0555321,.798089,.996802,-.0342566,.0537816,.823178,.996992,-.0330862,.0516095,.847949,.996944,-.0324666,.0495537,.871431,.997146,-.0309544,.0470302,.894357,.997189,-.0299372,.0446043,.916142,.997471,-.0281389,.0418812,.937193,.997515,-.0268702,.0391823,.957,.997812,-.0247166,.0361338,.975936,.998027,-.0233525,.0333945,.99391,.998233,-.0209839,.0301917,1.01075,.998481,-.0194309,.027271,1.02669,.998859,-.0169728,.0240162,1.04173,.99894,-.0152322,.0210517,1.05551,.999132,-.0127497,.0178632,1.06856,.999369,-.0108282,.014787,1.08054,.999549,-.00845886,.0116185,1.09185,.999805,-.0063937,.00867209,1.10207,.99985,-.00414582,.00566823,1.1117,.999912,-.00207443,.00277562,1.12022,1.00001,870226e-10,-53766e-9,1.12832,.991943,-178672e-11,.0893382,198384e-10,.991952,-450183e-10,.089339,499849e-9,.991956,-180074e-9,.0893394,.0019994,.991955,-405167e-9,.0893393,.00449867,.991953,-720298e-9,.0893391,.00799764,.991955,-.00112548,.0893393,.0124964,.991957,-.0016207,.0893395,.0179951,.991958,-.00220601,.0893396,.0244939,.991947,-.00288137,.0893385,.0319929,.991962,-.00364693,.0893399,.0404933,.991965,-.00450264,.0893399,.049995,.99198,-.00544862,.0893411,.0604995,.99197,-.00648491,.0893397,.0720074,.991976,-.00761164,.089341,.0845207,.99198,-.00882891,.0893405,.0980413,.991982,-.0101367,.0893396,.112571,.992008,-.011535,.0893415,.128115,.992026,-.0130228,.0893414,.144672,.992064,-.0145966,.0893418,.162241,.992041,-.0162421,.0893359,.180801,.992086,-.0178888,.0893214,.200302,.992157,-.0190368,.0892401,.220332,.992181,-.0195584,.0890525,.240144,.992175,-.0227257,.0892153,.260728,.99221,-.0254195,.089304,.283473,.99222,-.0274883,.0892703,.307673,.992317,-.0294905,.0892027,.332729,.992374,-.0311861,.0890577,.358387,.992505,-.0320656,.0886994,.384102,.992568,-.0329715,.0883198,.409767,.992675,-.036006,.0883602,.436145,.992746,-.0392897,.0884591,.463217,.992873,-.0399337,.0878287,.491557,.992934,-.040231,.0870108,.519516,.993091,-.0422013,.0865857,.547741,.993259,-.0443503,.0861937,.575792,.993455,-.0446368,.0851187,.604233,.993497,-.0454299,.0840576,.632925,.993694,-.0463296,.0829671,.660985,.993718,-.0470619,.0817185,.688714,.993973,-.0468838,.0800294,.716743,.994207,-.046705,.0781286,.74377,.994168,-.0469698,.0763337,.77042,.9945,-.0456816,.0738184,.796659,.994356,-.0455518,.0715545,.821868,.994747,-.0439488,.0686085,.846572,.994937,-.0430056,.065869,.870435,.995142,-.0413414,.0626446,.893272,.995451,-.0396521,.05929,.915376,.995445,-.0378453,.0558503,.936196,.995967,-.0355219,.0520949,.956376,.996094,-.0335146,.048377,.975327,.996622,-.030682,.0442575,.993471,.996938,-.0285504,.0404693,1.01052,.997383,-.0253399,.0360903,1.02637,.997714,-.0231651,.0322176,1.04139,.998249,-.0198138,.0278433,1.05542,.998596,-.0174337,.0238759,1.06846,.998946,-.0141349,.0195944,1.08056,.99928,-.0115603,.0156279,1.09181,.999507,-.00839065,.0114607,1.10213,.999697,-.005666,.00763325,1.11169,.999869,-.00269902,.00364946,1.12042,1.00001,623836e-10,-319288e-10,1.12832,.987221,-222675e-11,.111332,197456e-10,.98739,-561116e-10,.111351,497563e-9,.987448,-224453e-9,.111357,.00199031,.987441,-505019e-9,.111357,.0044782,.987442,-897816e-9,.111357,.00796129,.987442,-.00140284,.111357,.0124396,.987444,-.00202012,.111357,.0179132,.987442,-.00274964,.111357,.0243824,.987446,-.00359147,.111357,.0318474,.987435,-.00454562,.111356,.0403086,.987461,-.00561225,.111358,.0497678,.987458,-.00679125,.111358,.0602239,.987443,-.0080828,.111356,.0716792,.987476,-.0094872,.111358,.0841364,.98749,-.0110044,.111361,.097597,.987508,-.0126344,.111362,.112062,.987494,-.0143767,.111357,.127533,.987526,-.0162307,.111359,.144015,.987558,-.0181912,.111361,.161502,.987602,-.0202393,.111355,.179979,.987692,-.022273,.111346,.199386,.987702,-.0235306,.111215,.219183,.987789,-.0247628,.111061,.239202,.987776,-.0280668,.111171,.259957,.987856,-.0316751,.111327,.282198,.987912,-.0342468,.111282,.306294,.988,-.0367205,.111198,.331219,.988055,-.0387766,.110994,.356708,.988241,-.0397722,.110547,.382234,.988399,-.0416076,.110198,.408227,.988539,-.0448192,.110137,.434662,.988661,-.0483793,.110143,.461442,.988967,-.0495895,.109453,.489318,.989073,-.0506797,.108628,.517516,.989274,-.0526953,.108003,.545844,.989528,-.054578,.107255,.573823,.989709,-.0561503,.106294,.601944,.989991,-.056866,.104896,.630855,.990392,-.0572914,.103336,.658925,.990374,-.0586224,.10189,.686661,.990747,-.0584764,.099783,.714548,.991041,-.0582662,.0974309,.74186,.991236,-.0584118,.0951678,.768422,.991585,-.0573055,.0921581,.794817,.991984,-.0564241,.0891167,.820336,.9921,-.0553608,.085805,.84493,.992749,-.0533816,.0820354,.868961,.99288,-.0518661,.0782181,.891931,.993511,-.0492492,.0738935,.914186,.993617,-.0471956,.0696402,.93532,.99411,-.044216,.0649659,.95543,.994595,-.0416654,.0603177,.974685,.994976,-.0384314,.0553493,.992807,.995579,-.0353491,.0503942,1.00996,.996069,-.0319787,.0452123,1.02606,.996718,-.028472,.0400112,1.04114,.997173,-.0250789,.0349456,1.05517,.997818,-.0213326,.029653,1.0683,.998318,-.0178509,.024549,1.0805,.998853,-.0141118,.0194197,1.09177,.999218,-.0105914,.0143869,1.1022,.999594,-.00693474,.00943517,1.11175,.99975,-.00340478,.00464051,1.12056,1.00001,109172e-9,-112821e-9,1.12853,.983383,-266524e-11,.133358,196534e-10,.981942,-671009e-10,.133162,494804e-9,.981946,-268405e-9,.133163,.00197923,.981944,-603912e-9,.133163,.00445326,.981941,-.00107362,.133162,.00791693,.981946,-.00167755,.133163,.0123703,.981944,-.00241569,.133162,.0178135,.981945,-.00328807,.133163,.0242466,.981945,-.00429472,.133162,.03167,.981955,-.00543573,.133164,.0400846,.981951,-.00671105,.133163,.0494901,.981968,-.00812092,.133165,.0598886,.981979,-.00966541,.133166,.0712811,.981996,-.0113446,.133168,.083669,.982014,-.0131585,.133169,.0970533,.982011,-.0151073,.133167,.111438,.982062,-.0171906,.133172,.126826,.9821,-.0194067,.133175,.143215,.982149,-.0217502,.133176,.160609,.982163,-.0241945,.133173,.178981,.982247,-.0265907,.133148,.198249,.982291,-.027916,.132974,.217795,.982396,-.0299663,.132868,.238042,.982456,-.0334544,.132934,.258901,.982499,-.0378636,.133137,.280639,.982617,-.0409274,.133085,.304604,.98274,-.0438523,.132985,.329376,.982944,-.0462288,.132728,.354697,.98308,-.0475995,.132228,.380102,.983391,-.0501901,.131924,.406256,.983514,-.0535899,.131737,.432735,.98373,-.0571858,.131567,.459359,.984056,-.0592353,.130932,.486637,.984234,-.0610488,.130092,.51509,.984748,-.0630758,.12923,.543461,.985073,-.0647398,.128174,.571376,.985195,-.0671941,.127133,.599414,.985734,-.0681345,.125576,.628134,.986241,-.0686089,.123639,.656399,.986356,-.0698511,.121834,.684258,.986894,-.0700931,.119454,.711818,.987382,-.0698321,.116718,.739511,.988109,-.0693975,.113699,.766267,.988363,-.0689584,.110454,.792456,.989112,-.0672353,.106602,.81813,.989241,-.0662034,.10267,.842889,.990333,-.0638938,.0981381,.867204,.990591,-.0618534,.0935388,.89038,.991106,-.0593117,.088553,.912576,.991919,-.0562676,.0832187,.934118,.992111,-.0534085,.0778302,.954254,.992997,-.0495459,.0720453,.973722,.993317,-.0463707,.0663458,.991949,.994133,-.0421245,.0601883,1.00936,.994705,-.0384977,.0542501,1.02559,.995495,-.0340956,.0479862,1.04083,.996206,-.030105,.041887,1.05497,.996971,-.0256095,.0355355,1.06824,.997796,-.0213932,.0293655,1.08056,.998272,-.0169612,.0232926,1.09182,.998857,-.0126756,.0172786,1.10219,.99939,-.00832486,.0113156,1.11192,.999752,-.00410826,.00557892,1.12075,1,150957e-9,-119101e-9,1.12885,.975169,-309397e-11,.154669,195073e-10,.975439,-779608e-10,.154712,491534e-9,.975464,-311847e-9,.154716,.00196617,.975464,-701656e-9,.154716,.00442387,.975462,-.0012474,.154715,.0078647,.975461,-.00194906,.154715,.0122886,.975464,-.00280667,.154715,.0176959,.975468,-.00382025,.154716,.0240867,.975471,-.00498985,.154716,.0314612,.975472,-.00631541,.154717,.0398199,.975486,-.00779719,.154718,.0491639,.975489,-.00943505,.154718,.0594932,.975509,-.0112295,.154721,.0708113,.97554,-.0131802,.154724,.0831176,.975557,-.0152876,.154726,.096415,.975585,-.0175512,.154728,.110705,.975605,-.0199713,.154729,.125992,.975645,-.0225447,.154729,.142272,.975711,-.0252649,.154735,.159549,.975788,-.0280986,.154736,.177805,.975872,-.0308232,.154704,.196911,.975968,-.0324841,.154525,.216324,.976063,-.0351281,.154432,.236628,.976157,-.0388618,.15446,.257539,.976204,-.0437704,.154665,.278975,.976358,-.047514,.154652,.302606,.976571,-.0508638,.154535,.327204,.976725,-.0534995,.154221,.352276,.977013,-.0555547,.153737,.377696,.977294,-.0586728,.153403,.403855,.977602,-.0622715,.15312,.430333,.977932,-.0658166,.152755,.456855,.978241,-.0689877,.152233,.483668,.978602,-.0712805,.15132,.512097,.979234,-.0732775,.150235,.540455,.97977,-.075163,.148978,.568486,.979995,-.0778026,.147755,.596524,.98078,-.0791854,.146019,.624825,.981628,-.0799666,.143906,.653403,.982067,-.0808532,.141561,.681445,.98271,-.0816024,.139025,.708918,.983734,-.0812511,.135764,.736594,.98431,-.0806201,.132152,.763576,.985071,-.0801605,.12846,.789797,.98618,-.0784208,.124084,.815804,.986886,-.0766643,.1193,.840869,.987485,-.0747744,.114236,.864952,.988431,-.0716701,.108654,.888431,.988886,-.0691609,.102994,.910963,.990024,-.0654048,.0967278,.932629,.990401,-.0619765,.090384,.95313,.991093,-.0579296,.0837885,.972587,.992018,-.0536576,.0770171,.991184,.992536,-.0493719,.0701486,1.00863,.993421,-.0444813,.062953,1.02494,.993928,-.040008,.0560455,1.04017,.994994,-.0347982,.04856,1.05463,.995866,-.0301017,.0416152,1.06807,.996916,-.0248225,.0342597,1.08039,.997766,-.0199229,.0271668,1.09177,.998479,-.0147422,.0201387,1.10235,.99921,-.00980173,.0131944,1.11206,.999652,-.0047426,.00640712,1.12104,.999998,891673e-10,-10379e-8,1.12906,.967868,-351885e-11,.175947,193569e-10,.968001,-886733e-10,.175972,487782e-9,.96801,-354697e-9,.175973,.00195115,.968012,-798063e-9,.175974,.00439006,.968011,-.00141879,.175973,.00780461,.968011,-.00221686,.175973,.0121948,.968016,-.00319231,.175974,.0175607,.968019,-.00434515,.175974,.0239027,.968018,-.00567538,.175974,.0312208,.968033,-.00718308,.175977,.0395158,.968049,-.00886836,.175979,.0487885,.968047,-.0107312,.175978,.0590394,.968072,-.0127719,.175981,.0702705,.968108,-.0149905,.175986,.0824836,.968112,-.0173866,.175985,.0956783,.968173,-.0199611,.175993,.109862,.96827,-.0227128,.176008,.125033,.968292,-.025639,.17601,.141193,.968339,-.0287299,.176007,.158336,.968389,-.0319399,.176001,.176441,.968501,-.034941,.175962,.195359,.968646,-.0370812,.175793,.214686,.968789,-.0402329,.175708,.234973,.96886,-.0442601,.1757,.255871,.969013,-.049398,.175876,.277238,.969242,-.0539932,.17594,.300326,.969419,-.0577299,.175781,.324702,.969763,-.0605643,.175432,.349527,.970093,-.0634488,.174992,.374976,.970361,-.0670589,.174611,.401097,.970825,-.0708246,.174226,.427496,.971214,-.0742871,.173684,.453858,.971622,-.0782608,.173186,.480637,.972175,-.0813151,.172288,.508655,.972944,-.0832678,.170979,.536973,.973595,-.0855964,.169573,.565138,.974345,-.0882163,.168152,.593222,.975233,-.0901671,.166314,.621201,.976239,-.0912111,.163931,.649919,.977289,-.0916959,.161106,.678011,.978076,-.0927061,.158272,.705717,.979533,-.0925562,.15475,.733228,.980335,-.0918159,.150638,.760454,.981808,-.0908508,.146201,.786918,.983061,-.0896172,.141386,.812953,.984148,-.0871588,.135837,.838281,.985047,-.0850624,.130135,.862594,.986219,-.0818541,.123882,.88633,.987043,-.0784523,.117126,.908952,.988107,-.0749601,.110341,.930744,.988955,-.0703548,.102885,.951728,.989426,-.0662798,.0954167,.971166,.990421,-.0610834,.0876331,.989984,.991032,-.0562936,.0797785,1.00765,.992041,-.0508154,.0718166,1.02434,.992794,-.0454045,.0637125,1.03976,.993691,-.0398194,.0555338,1.05418,.994778,-.0341482,.0473388,1.06772,.995915,-.028428,.0391016,1.08028,.997109,-.022642,.0309953,1.09185,.998095,-.0168738,.0230288,1.10247,.998985,-.0111274,.0150722,1.11229,.999581,-.00543881,.00740605,1.12131,1.00003,162239e-9,-105549e-9,1.12946,.959505,-393734e-11,.196876,191893e-10,.959599,-992157e-10,.196895,483544e-9,.959641,-396868e-9,.196903,.0019342,.959599,-892948e-9,.196895,.00435193,.959603,-.00158747,.196896,.0077368,.959604,-.00248042,.196896,.0120888,.959605,-.00357184,.196896,.0174082,.959605,-.00486169,.196896,.0236949,.959613,-.00635008,.196897,.0309497,.959619,-.00803696,.196898,.0391725,.959636,-.00992255,.196901,.0483649,.959634,-.0120067,.1969,.0585266,.959675,-.0142898,.196906,.0696609,.959712,-.0167717,.196911,.0817678,.959752,-.0194524,.196918,.0948494,.959807,-.0223321,.196925,.10891,.959828,-.0254091,.196924,.123947,.959906,-.0286815,.196934,.139968,.960005,-.0321371,.196944,.156968,.960071,-.0357114,.196936,.17491,.960237,-.0389064,.196882,.193597,.960367,-.041623,.196731,.21285,.960562,-.0452655,.196654,.233075,.960735,-.0496207,.196643,.253941,.960913,-.0549379,.196774,.275278,.961121,-.0603414,.196893,.297733,.96139,-.0644244,.196717,.321877,.961818,-.067556,.196314,.346476,.962175,-.0712709,.195917,.371907,.96255,-.0752848,.1955,.397916,.963164,-.0792073,.195026,.424229,.963782,-.0828225,.194424,.450637,.964306,-.0873119,.193831,.477288,.964923,-.0911051,.192973,.504716,.966048,-.093251,.19151,.533053,.967024,-.0958983,.190013,.561366,.968038,-.09835,.188253,.589464,.969152,-.100754,.186257,.617433,.970557,-.102239,.183775,.645801,.972104,-.102767,.180645,.674278,.973203,-.103492,.177242,.702004,.975123,-.103793,.17345,.729529,.97641,-.102839,.168886,.756712,.978313,-.101687,.163892,.783801,.980036,-.100314,.158439,.809671,.981339,-.097836,.152211,.835402,.982794,-.0950006,.145679,.860081,.984123,-.0920994,.138949,.883757,.984918,-.0878641,.131283,.90685,.985999,-.083939,.123464,.928786,.987151,-.0791234,.115324,.94983,.987827,-.0739332,.106854,.96962,.988806,-.0688088,.0982691,.98861,.989588,-.0628962,.0893456,1.00667,.990438,-.0573146,.0805392,1.02344,.991506,-.0509433,.0713725,1.03933,.992492,-.0448724,.0623732,1.05378,.993663,-.0383497,.0530838,1.06747,.994956,-.0319593,.0439512,1.08007,.99634,-.025401,.0347803,1.09182,.99761,-.0189687,.0257954,1.1025,.99863,-.0124441,.0169893,1.11247,.99947,-.00614003,.00829498,1.12151,1.00008,216624e-9,-146107e-9,1.12993,.950129,-434955e-11,.217413,190081e-10,.950264,-10957e-8,.217444,47884e-8,.9503,-438299e-9,.217451,.00191543,.950246,-986124e-9,.21744,.00430951,.950246,-.00175311,.21744,.00766137,.950245,-.00273923,.21744,.011971,.950253,-.00394453,.217441,.0172385,.950258,-.00536897,.217442,.0234641,.950267,-.00701262,.217444,.030648,.950277,-.00887551,.217446,.038791,.950284,-.0109576,.217446,.0478931,.950312,-.0132591,.217451,.0579568,.950334,-.01578,.217454,.0689821,.950378,-.0185204,.217462,.0809714,.950417,-.0214803,.217467,.0939265,.950488,-.0246594,.217479,.10785,.950534,-.0280565,.217483,.122743,.950633,-.0316685,.217498,.138611,.950698,-.0354787,.217499,.155442,.950844,-.0394003,.217507,.173208,.950999,-.0426812,.217419,.191605,.951221,-.0461302,.217317,.21084,.951412,-.0502131,.217238,.230945,.951623,-.0549183,.21722,.251745,.951867,-.0604493,.217306,.273001,.952069,-.0665189,.217466,.294874,.952459,-.0709179,.217266,.318732,.952996,-.0746112,.216891,.34318,.953425,-.0789252,.216503,.36849,.953885,-.0833293,.216042,.394373,.954617,-.087371,.215469,.420505,.955429,-.0914054,.214802,.446907,.956068,-.0961671,.214146,.473522,.957094,-.10048,.213286,.50052,.958372,-.103248,.211796,.528715,.959654,-.106033,.21016,.557065,.961305,-.108384,.208149,.585286,.962785,-.111122,.206024,.613334,.964848,-.112981,.203442,.641334,.966498,-.113717,.19996,.669955,.968678,-.114121,.196105,.698094,.970489,-.114524,.191906,.725643,.972903,-.113792,.186963,.752856,.974701,-.112406,.181343,.780013,.976718,-.110685,.175185,.806268,.978905,-.108468,.168535,.832073,.980267,-.105061,.161106,.857149,.981967,-.101675,.153387,.881145,.983063,-.0974492,.145199,.904255,.984432,-.0925815,.136527,.926686,.985734,-.0877983,.127584,.947901,.986228,-.081884,.118125,.968111,.98719,-.0761208,.108594,.98719,.988228,-.0698196,.0989996,1.00559,.989046,-.0632739,.0890074,1.02246,.990242,-.056522,.0790832,1.03841,.991252,-.0495272,.0689182,1.05347,.992542,-.0425373,.0588592,1.06724,.994096,-.0353198,.0486833,1.08009,.995593,-.028235,.0385977,1.09177,.99711,-.0209511,.0286457,1.10274,.998263,-.0139289,.0188497,1.11262,.999254,-.0067359,.009208,1.12191,.999967,141846e-9,-657764e-10,1.13024,.935608,-474692e-11,.236466,187817e-10,.93996,-11971e-8,.237568,473646e-9,.939959,-478845e-9,.237567,.0018946,.939954,-.0010774,.237566,.00426284,.939956,-.00191538,.237566,.00757842,.939954,-.00299277,.237566,.0118413,.93996,-.00430961,.237567,.0170518,.939969,-.00586589,.237569,.02321,.939982,-.00766166,.237572,.0303164,.939987,-.00969686,.237572,.0383711,.939997,-.0119715,.237574,.0473751,.940031,-.0144858,.237581,.0573298,.940073,-.0172399,.237589,.0682366,.94012,-.0202335,.237598,.080097,.940162,-.0234663,.237604,.0929116,.940237,-.0269387,.237615,.106686,.940328,-.0306489,.237632,.121421,.940419,-.0345917,.237645,.137115,.940522,-.0387481,.237654,.153766,.940702,-.0429906,.237661,.17133,.940871,-.0465089,.237561,.189502,.941103,-.050531,.23748,.208616,.941369,-.0550657,.237423,.228595,.941641,-.0601337,.237399,.249287,.941903,-.0658804,.237443,.270467,.942224,-.0722674,.237597,.292024,.942633,-.0771788,.237419,.315272,.943172,-.0815623,.237068,.339579,.943691,-.0863973,.236682,.364717,.944382,-.0911536,.236213,.390435,.945392,-.0952967,.235562,.416425,.946185,-.0998948,.234832,.442772,.947212,-.104796,.234114,.469347,.948778,-.10928,.233222,.496162,.950149,-.113081,.231845,.523978,.951989,-.115893,.230005,.552295,.953921,-.11846,.227862,.580569,.955624,-.12115,.225439,.608698,.958234,-.123373,.222635,.636696,.960593,-.124519,.219093,.665208,.963201,-.124736,.214749,.693557,.965642,-.125012,.210059,.721334,.968765,-.124661,.204935,.748613,.971753,-.122996,.198661,.776224,.973751,-.120998,.191823,.802461,.976709,-.118583,.184359,.828399,.977956,-.115102,.176437,.853693,.979672,-.111077,.167681,.877962,.981816,-.10688,.158872,.901564,.98238,-.101469,.149398,.924057,.983964,-.0960013,.139436,.945751,.984933,-.0899626,.12943,.966272,.985694,-.0832973,.11894,.985741,.986822,-.0767082,.108349,1.00407,.987725,-.0693614,.0976026,1.02154,.98877,-.06211,.086652,1.03757,.990129,-.0544143,.0756182,1.05296,.991337,-.046744,.0645753,1.06683,.992978,-.0387931,.0534683,1.0798,.994676,-.030973,.0424137,1.09181,.99645,-.0230311,.0314035,1.10286,.997967,-.0152065,.0206869,1.11291,.99922,-.00744837,.010155,1.12237,1.00002,240209e-9,-752767e-10,1.13089,.922948,-515351e-11,.255626,186069e-10,.928785,-129623e-9,.257244,468009e-9,.928761,-51849e-8,.257237,.00187202,.928751,-.0011666,.257235,.00421204,.928751,-.00207395,.257234,.0074881,.928754,-.00324055,.257235,.0117002,.92876,-.00466639,.257236,.0168486,.928763,-.00635149,.257237,.0229334,.928774,-.00829584,.257239,.029955,.928791,-.0104995,.257243,.0379139,.928804,-.0129623,.257245,.0468108,.928847,-.0156846,.257255,.0566473,.92889,-.0186661,.257263,.0674246,.928924,-.0219067,.257268,.0791433,.928989,-.0254066,.257282,.0918076,.92909,-.0291651,.257301,.105419,.92918,-.0331801,.257316,.119978,.92929,-.0374469,.257332,.135491,.929453,-.041939,.257357,.151948,.929586,-.0464612,.257347,.169275,.929858,-.0503426,.257269,.187257,.930125,-.0548409,.257199,.206204,.930403,-.0598063,.257149,.22601,.930726,-.0652437,.257122,.246561,.931098,-.0712376,.257153,.267618,.931396,-.0777506,.257237,.288993,.931947,-.0832374,.257124,.311527,.932579,-.0883955,.25683,.335697,.933194,-.0937037,.256444,.360634,.934013,-.0987292,.255939,.386126,.935307,-.103215,.255282,.412018,.936374,-.108234,.254538,.438292,.93776,-.113234,.253728,.464805,.939599,-.118013,.25275,.491464,.941036,-.122661,.251404,.518751,.94337,-.125477,.249435,.547133,.945318,-.128374,.247113,.575456,.947995,-.130996,.244441,.60372,.950818,-.133438,.241352,.63174,.954378,-.135004,.237849,.659971,.957151,-.135313,.233188,.688478,.960743,-.13521,.228001,.716767,.964352,-.135007,.222249,.744349,.967273,-.133523,.21542,.771786,.969767,-.131155,.208039,.798639,.973195,-.128492,.200076,.824774,.975557,-.125094,.191451,.850222,.977692,-.120578,.18184,.874761,.98026,-.115882,.172102,.898497,.981394,-.110372,.161859,.921636,.982386,-.10415,.15108,.943467,.983783,-.0978128,.140407,.964045,.98422,-.0906171,.129058,.98398,.985447,-.0832921,.117614,1.00276,.986682,-.0754412,.10585,1.02047,.987326,-.0673885,.0940943,1.03678,.988707,-.0592565,.0822093,1.05218,.990185,-.050717,.070192,1.06652,.991866,-.0423486,.0582081,1.07965,.993897,-.0336118,.0460985,1.09188,.995841,-.0252178,.0342737,1.10307,.997605,-.0164893,.0224829,1.11324,.999037,-.00817112,.0110647,1.12262,1.00003,291686e-9,-168673e-9,1.13139,.915304,-552675e-11,.275999,183285e-10,.91668,-139285e-9,.276414,461914e-9,.916664,-55713e-8,.276409,.00184763,.916653,-.00125354,.276406,.00415715,.916651,-.00222851,.276405,.00739053,.916655,-.00348205,.276406,.0115478,.916653,-.00501414,.276405,.0166291,.916667,-.00682478,.276409,.0226346,.91668,-.00891398,.276412,.0295648,.91669,-.0112817,.276413,.0374199,.916727,-.013928,.276422,.0462016,.916759,-.0168528,.276429,.0559101,.916793,-.0200558,.276436,.0665466,.916849,-.0235373,.276448,.0781139,.916964,-.0272973,.276474,.0906156,.917047,-.0313344,.276491,.104051,.917152,-.0356465,.276511,.118424,.917286,-.0402271,.276533,.133736,.917469,-.0450408,.276564,.149978,.917686,-.0497872,.276563,.167057,.917953,-.0540937,.276493,.184846,.918228,-.0590709,.276437,.203614,.918572,-.0644277,.276398,.223212,.918918,-.0702326,.276362,.243584,.919356,-.076484,.276383,.264465,.919842,-.0830808,.276434,.285701,.920451,-.0892972,.276407,.307559,.921113,-.095016,.276128,.331501,.921881,-.100771,.275754,.356207,.923027,-.106029,.275254,.381477,.924364,-.111029,.274595,.40722,.925818,-.116345,.273841,.433385,.92746,-.121424,.272913,.459848,.929167,-.12657,.271837,.486493,.931426,-.131581,.270575,.513432,.934001,-.135038,.268512,.541502,.936296,-.138039,.266135,.569658,.939985,-.140687,.263271,.598375,.943516,-.143247,.260058,.626563,.94782,-.145135,.256138,.654711,.951023,-.145733,.251154,.683285,.955338,-.145554,.245562,.711831,.959629,-.145008,.239265,.739573,.963123,-.144003,.232064,.767027,.966742,-.141289,.224036,.794359,.969991,-.138247,.215305,.820361,.973403,-.134786,.206051,.846548,.975317,-.129966,.195914,.871541,.977647,-.12471,.185184,.895313,.980137,-.119086,.174161,.918398,.981031,-.112297,.162792,.940679,.982037,-.105372,.150952,.961991,.983164,-.097821,.138921,.981913,.983757,-.0897245,.126611,1.00109,.985036,-.0815974,.114228,1.01902,.986289,-.0727725,.101389,1.03604,.987329,-.0639323,.0886476,1.05149,.989193,-.0548109,.0756837,1.06619,.990716,-.045687,.0627581,1.07948,.992769,-.0364315,.0498337,1.09172,.99524,-.0271761,.0370305,1.1033,.997154,-.0179609,.0243959,1.11353,.998845,-.00878063,.0119567,1.12319,1.00002,259038e-9,-108146e-9,1.13177,.903945,-591681e-11,.295126,181226e-10,.903668,-148672e-9,.295037,455367e-9,.903677,-594683e-9,.29504,.00182145,.903673,-.00133805,.295039,.00409831,.903666,-.00237872,.295036,.00728584,.903668,-.00371676,.295037,.0113842,.903679,-.00535212,.29504,.0163936,.903684,-.00728479,.295041,.0223141,.903698,-.00951473,.295044,.0291462,.903718,-.0120419,.295049,.0368904,.903754,-.0148664,.295058,.0455477,.903801,-.017988,.29507,.0551194,.903851,-.0214064,.295082,.0656058,.903921,-.0251219,.295097,.0770109,.904002,-.0291337,.295116,.0893354,.904111,-.033441,.29514,.102583,.904246,-.0380415,.295169,.116755,.904408,-.0429258,.295202,.131853,.904637,-.0480468,.295245,.147869,.904821,-.0529208,.295214,.164658,.905163,-.0577748,.295185,.182274,.905469,-.0631763,.295143,.200828,.905851,-.068917,.295112,.2202,.906322,-.0750861,.295104,.240372,.906761,-.0815855,.295086,.261082,.90735,-.0882138,.295095,.282123,.908087,-.095082,.295139,.303563,.908826,-.101488,.29492,.327028,.909832,-.107577,.294577,.351464,.911393,-.113033,.294115,.376497,.912804,-.118629,.293446,.402115,.914081,-.124232,.292581,.428111,.91637,-.129399,.29166,.454442,.91814,-.134892,.290422,.481024,.921179,-.140069,.289194,.507924,.924544,-.144431,.287421,.535557,.927995,-.147498,.284867,.563984,.931556,-.150197,.281722,.5923,.935777,-.152711,.278207,.620832,.940869,-.154836,.274148,.649069,.945994,-.155912,.269057,.677746,.949634,-.155641,.262799,.706293,.955032,-.154809,.256097,.734278,.95917,-.153678,.248618,.761751,.962931,-.151253,.239794,.789032,.966045,-.147625,.230281,.815422,.96971,-.143964,.220382,.841787,.972747,-.139464,.209846,.867446,.975545,-.133459,.198189,.892004,.978381,-.127424,.186362,.915458,.979935,-.120506,.173964,.937948,.980948,-.11282,.161429,.959732,.982234,-.104941,.148557,.980118,.982767,-.0962905,.135508,.999463,.983544,-.0873625,.122338,1.01756,.984965,-.0783447,.108669,1.03492,.986233,-.0684798,.0949911,1.05087,.987796,-.0590867,.0811386,1.0656,.989885,-.0489145,.0673099,1.0794,.991821,-.0391,.0535665,1.09174,.99448,-.029087,.0397529,1.10341,.996769,-.019114,.0261463,1.11383,.998641,-.00947007,.0128731,1.1237,.999978,446316e-9,-169093e-9,1.13253,.888362,-627064e-11,.312578,178215e-10,.889988,-157791e-9,.313148,448451e-9,.889825,-631076e-9,.313092,.00179356,.88984,-.00141994,.313097,.00403554,.889828,-.0025243,.313092,.00717429,.889831,-.00394421,.313093,.0112099,.889831,-.00567962,.313093,.0161425,.889844,-.00773051,.313096,.0219724,.889858,-.0100968,.3131,.0286999,.889882,-.0127786,.313106,.0363256,.889918,-.0157757,.313116,.0448509,.889967,-.0190878,.313129,.0542758,.89003,-.022715,.313145,.0646032,.890108,-.0266566,.313165,.0758339,.890218,-.0309131,.313193,.0879729,.890351,-.0354819,.313226,.101019,.89051,-.0403613,.313263,.114979,.890672,-.0455385,.313294,.129848,.890882,-.0509444,.313333,.145616,.891189,-.0559657,.313324,.162122,.891457,-.0613123,.313281,.179524,.891856,-.0671488,.313281,.197855,.892312,-.0732732,.313268,.216991,.892819,-.0797865,.313263,.236924,.893369,-.0865269,.313247,.257433,.894045,-.0931592,.313205,.278215,.894884,-.100532,.313276,.299467,.895832,-.107716,.313205,.322276,.897043,-.114099,.312873,.34642,.898515,-.119941,.312331,.371187,.900191,-.126044,.311731,.396656,.90188,-.131808,.310859,.422488,.904359,-.137289,.309857,.448744,.906923,-.142991,.308714,.475239,.910634,-.148253,.307465,.501983,.914502,-.153332,.305774,.529254,.919046,-.156646,.303156,.557709,.923194,-.159612,.299928,.586267,.928858,-.162027,.296245,.614925,.934464,-.164203,.291832,.643187,.939824,-.165602,.286565,.671601,.944582,-.165383,.280073,.700213,.949257,-.164439,.272891,.728432,.954389,-.162953,.264771,.756082,.958595,-.161007,.255927,.78369,.962138,-.157243,.245769,.810769,.966979,-.152872,.235127,.836999,.969566,-.148209,.22347,.862684,.972372,-.142211,.211147,.887847,.975916,-.135458,.198606,.911843,.978026,-.128398,.185498,.934795,.979686,-.120313,.17171,.956787,.980748,-.11166,.158159,.978046,.981622,-.103035,.144399,.997693,.982356,-.0930328,.13001,1.01642,.983308,-.0834627,.115778,1.03366,.985037,-.0732249,.101327,1.05014,.986493,-.0628145,.086554,1.06507,.988484,-.0526556,.0720413,1.07907,.991051,-.0415744,.0571151,1.09189,.993523,-.0314275,.0426643,1.10369,.99628,-.0203603,.0279325,1.11423,.998344,-.0102446,.0138182,1.12421,.999997,42612e-8,-193628e-9,1.1333,.871555,-660007e-11,.329176,174749e-10,.875255,-166579e-9,.330571,441051e-9,.875644,-666394e-9,.330718,.00176441,.875159,-.00149903,.330536,.00396899,.87516,-.00266493,.330536,.007056,.875158,-.00416393,.330535,.0110251,.87516,-.00599598,.330535,.0158764,.875163,-.00816108,.330536,.0216101,.875174,-.0106591,.330538,.0282266,.875199,-.0134899,.330545,.0357266,.875257,-.0166538,.330563,.0441117,.875304,-.0201501,.330575,.0533821,.875373,-.0239785,.330595,.0635395,.875464,-.0281389,.330619,.0745872,.875565,-.0326301,.330645,.0865255,.875691,-.0374516,.330676,.0993599,.875897,-.0425993,.330733,.113093,.876091,-.0480576,.330776,.127722,.876353,-.0537216,.330826,.143227,.876649,-.0589807,.330809,.159462,.877034,-.0647865,.330819,.176642,.877443,-.0709789,.330817,.194702,.877956,-.0774782,.330832,.213577,.878499,-.0843175,.330822,.233246,.879144,-.0912714,.330804,.253512,.879982,-.0980824,.330766,.274137,.88097,-.105823,.330864,.295209,.882051,-.113671,.330896,.317226,.883397,-.120303,.330545,.341068,.884987,-.12667,.330068,.365613,.886789,-.133118,.329418,.390807,.889311,-.139024,.328683,.416494,.891995,-.144971,.327729,.442618,.895106,-.150747,.326521,.469131,.899527,-.156283,.325229,.495921,.90504,-.161707,.32378,.523162,.909875,-.165661,.32122,.55092,.91561,-.168755,.317942,.579928,.921225,-.171193,.313983,.608539,.927308,-.17319,.309636,.636854,.933077,-.174819,.304262,.66523,.938766,-.175002,.297563,.693609,.943667,-.173946,.289613,.722157,.949033,-.172221,.281227,.750021,.953765,-.169869,.271545,.777466,.95804,-.166578,.261034,.804853,.962302,-.161761,.249434,.831569,.966544,-.156636,.237484,.857779,.969372,-.150784,.224395,.883051,.972486,-.143672,.210786,.907864,.975853,-.135772,.196556,.931223,.977975,-.127942,.182307,.954061,.979122,-.118347,.167607,.97531,.980719,-.109112,.152739,.995666,.981223,-.0991789,.137932,1.01475,.98216,-.0883553,.122692,1.03253,.983379,-.0780825,.107493,1.04917,.985434,-.0665646,.0917791,1.06464,.987332,-.0557714,.0764949,1.07896,.990004,-.0442805,.060721,1.09199,.992975,-.0331676,.0452284,1.10393,.995811,-.0219547,.0297934,1.11476,.9982,-.0107613,.0146415,1.12484,1.00002,248678e-9,-14555e-8,1.13413,.859519,-693595e-11,.347264,171673e-10,.859843,-17503e-8,.347394,433219e-9,.859656,-700076e-9,.347319,.00173277,.859671,-.00157517,.347325,.00389875,.859669,-.00280028,.347324,.00693112,.85967,-.0043754,.347324,.01083,.859665,-.00630049,.347321,.0155954,.859685,-.0085755,.347328,.0212278,.859694,-.0112003,.347329,.0277273,.859718,-.0141747,.347336,.0350946,.85976,-.0174988,.347348,.0433314,.85982,-.0211722,.347366,.0524384,.859892,-.0251941,.347387,.0624168,.860006,-.0295649,.347422,.0732708,.860122,-.0342825,.347453,.0849999,.860282,-.0393462,.347499,.0976102,.860482,-.0447513,.347554,.111104,.860719,-.0504775,.347614,.125479,.860998,-.0563577,.347666,.140703,.861322,-.0619473,.347662,.156681,.861724,-.0681277,.347684,.173597,.862198,-.0746567,.347709,.191371,.862733,-.0815234,.347727,.209976,.863371,-.0886643,.347744,.229351,.86414,-.0957908,.347734,.24934,.865138,-.102912,.34772,.269797,.866182,-.110924,.3478,.290654,.867436,-.119223,.347911,.312074,.869087,-.126197,.347649,.335438,.870859,-.133145,.347222,.359732,.872997,-.139869,.346645,.38467,.875939,-.146089,.345935,.41019,.879012,-.152334,.345012,.436218,.883353,-.15821,.343924,.462641,.888362,-.164097,.342636,.489449,.895026,-.169528,.341351,.516629,.900753,-.174408,.339115,.544109,.906814,-.17751,.335809,.572857,.912855,-.180101,.331597,.601554,.919438,-.182116,.32698,.630198,.925962,-.183494,.321449,.658404,.931734,-.184159,.314595,.686625,.93762,-.18304,.306462,.71531,.943858,-.181323,.297514,.744272,.948662,-.178683,.287447,.771462,.953299,-.175379,.276166,.798593,.957346,-.170395,.263758,.8256,.962565,-.165042,.251019,.852575,.966075,-.158655,.237011,.878316,.969048,-.151707,.222518,.90329,.972423,-.143271,.207848,.927745,.975833,-.134824,.192463,.950859,.977629,-.125444,.1768,.972947,.978995,-.114949,.161033,.993263,.980533,-.104936,.145523,1.01337,.980745,-.0935577,.129799,1.03128,.981814,-.0822956,.113486,1.04825,.983943,-.0710082,.0972925,1.06405,.986141,-.0587931,.0808138,1.0785,.988878,-.0472755,.0644915,1.09204,.992132,-.0349128,.0478128,1.10413,.9953,-.0232407,.031621,1.11527,.998117,-.0112713,.0154935,1.12551,1.00003,339743e-9,-195763e-9,1.13504,.845441,-729126e-11,.364305,169208e-10,.843588,-183164e-9,.363506,425067e-9,.843412,-73253e-8,.36343,.00169999,.843401,-.00164818,.363426,.00382495,.843399,-.00293008,.363425,.00679993,.843401,-.00457822,.363425,.010625,.843394,-.00659249,.363421,.0153002,.843398,-.00897282,.363421,.0208258,.843415,-.0117191,.363426,.0272024,.843438,-.0148312,.363432,.0344305,.843483,-.018309,.363447,.0425116,.84356,-.0221521,.363472,.0514471,.843646,-.0263597,.363499,.061238,.843743,-.0309315,.363527,.0718873,.84388,-.0358658,.363569,.0833969,.844079,-.0411624,.363631,.0957742,.844279,-.0468128,.363688,.109015,.844549,-.0527923,.363761,.123124,.844858,-.0588204,.363817,.138044,.84522,-.0647573,.36383,.153755,.845669,-.0713181,.363879,.170394,.846155,-.0781697,.363908,.187861,.846789,-.0853913,.363969,.206176,.847502,-.0928086,.363999,.225244,.8484,-.10005,.363997,.244926,.849461,-.107615,.364008,.265188,.850562,-.115814,.364055,.28587,.851962,-.124334,.364179,.306926,.854326,-.131995,.364233,.329605,.856295,-.139338,.363856,.35359,.858857,-.146346,.363347,.37831,.862428,-.152994,.362807,.403722,.866203,-.159463,.361963,.429537,.871629,-.165623,.36112,.456,.877365,-.171649,.359917,.482773,.883744,-.177151,.35848,.509705,.890693,-.182381,.356523,.537215,.897278,-.186076,.3533,.565493,.903958,-.188602,.349095,.594293,.910908,-.190755,.344215,.623165,.918117,-.192063,.338606,.651573,.924644,-.192758,.331544,.679869,.931054,-.192238,.323163,.708668,.937303,-.190035,.313529,.737201,.943387,-.187162,.303152,.764977,.948494,-.183876,.29146,.792683,.952546,-.178901,.277917,.819228,.958077,-.173173,.264753,.846559,.962462,-.16645,.25002,.872962,.966569,-.159452,.234873,.898729,.969108,-.15074,.218752,.923126,.973072,-.141523,.202673,.947278,.975452,-.132075,.186326,.969938,.977784,-.121257,.169396,.991325,.97899,-.110182,.153044,1.01123,.979777,-.0989634,.136485,1.0299,.980865,-.0865894,.119343,1.04727,.982432,-.0746115,.102452,1.06341,.984935,-.0621822,.0852423,1.07834,.987776,-.0495694,.0678546,1.092,.99103,-.0372386,.0506917,1.1043,.99474,-.0244353,.0333316,1.11576,.997768,-.0121448,.0164348,1.12617,1.00003,31774e-8,-169504e-9,1.13598,.825551,-756799e-11,.378425,165099e-10,.82664,-190922e-9,.378923,416504e-9,.826323,-763495e-9,.378779,.0016656,.826359,-.00171789,.378795,.00374768,.82636,-.00305402,.378795,.00666259,.826368,-.00477185,.378798,.0104104,.826364,-.00687131,.378795,.0149912,.826368,-.00935232,.378795,.0204054,.826376,-.0122146,.378797,.0266532,.826399,-.0154581,.378803,.0337355,.82646,-.0190825,.378824,.0416537,.826525,-.0230873,.378846,.0504091,.826614,-.0274719,.378876,.0600032,.82674,-.0322355,.378917,.0704393,.826888,-.0373766,.378964,.0817195,.827078,-.0428936,.379024,.0938492,.827318,-.0487778,.379099,.106828,.82764,-.0549935,.379199,.120659,.827926,-.0611058,.379227,.13526,.828325,-.0675054,.379275,.150713,.828801,-.0743455,.379332,.167034,.8294,-.0815523,.379415,.184209,.830094,-.0890779,.379495,.202203,.8309,-.096736,.379555,.220945,.831943,-.104135,.379577,.240306,.833037,-.112106,.379604,.260317,.834278,-.120554,.379668,.2808,.836192,-.129128,.3799,.301654,.838671,-.137541,.380109,.323502,.840939,-.14523,.379809,.347176,.844575,-.15248,.379593,.371706,.848379,-.159607,.37909,.39688,.853616,-.166267,.378617,.422702,.858921,-.172698,.377746,.448919,.865324,-.178823,.376749,.475661,.872207,-.184542,.375363,.502599,.880018,-.189836,.373657,.529914,.88694,-.194294,.370673,.557683,.894779,-.197022,.36662,.586848,.902242,-.199108,.36138,.615831,.909914,-.200398,.355434,.644478,.917088,-.20094,.348173,.672905,.923888,-.200671,.339482,.701327,.930495,-.198773,.32956,.730101,.937247,-.195394,.318363,.758383,.943108,-.191956,.306323,.786539,.948296,-.187227,.292576,.813637,.953472,-.181165,.278234,.840793,.958485,-.174119,.263054,.867712,.962714,-.166564,.246756,.893635,.966185,-.158181,.229945,.919028,.970146,-.148275,.212633,.943413,.973491,-.138157,.195229,.966627,.975741,-.127574,.178048,.988817,.977238,-.11554,.160312,1.00924,.978411,-.10364,.142857,1.02845,.979811,-.0913122,.125317,1.04648,.98116,-.0782558,.107627,1.06284,.983543,-.0655957,.0895862,1.07798,.986789,-.0520411,.0713756,1.092,.990292,-.0389727,.053228,1.10484,.994187,-.025808,.0351945,1.11642,.997499,-.0126071,.0173198,1.12703,.999999,275604e-9,-148602e-9,1.13674,.81075,-78735e-10,.394456,161829e-10,.808692,-198293e-9,.393453,407564e-9,.80846,-792877e-9,.39334,.00162965,.808595,-.00178416,.393407,.00366711,.808597,-.00317182,.393408,.00651934,.808598,-.00495589,.393408,.0101866,.808591,-.00713627,.393403,.0146689,.808592,-.00971285,.393402,.0199667,.80861,-.0126855,.393407,.0260803,.808633,-.0160538,.393413,.0330107,.80868,-.0198175,.393429,.0407589,.808748,-.0239758,.393453,.0493264,.808854,-.0285286,.39349,.0587161,.808992,-.0334748,.39354,.0689304,.809141,-.0388116,.393588,.0799707,.809352,-.0445375,.39366,.0918432,.809608,-.0506427,.393742,.104549,.809915,-.0570708,.393834,.118085,.810253,-.0633526,.393885,.132377,.810687,-.0700966,.393953,.147537,.811233,-.0772274,.394047,.163543,.811865,-.0847629,.394148,.180394,.812648,-.0925663,.394265,.198051,.813583,-.100416,.394363,.216443,.814683,-.108119,.394402,.235502,.815948,-.11644,.394489,.255242,.817278,-.125036,.394542,.275441,.819605,-.133655,.39486,.296094,.822256,-.142682,.395248,.317309,.825349,-.150756,.395241,.340516,.829605,-.158392,.395285,.364819,.83391,-.165801,.394922,.389736,.839808,-.172677,.394691,.415409,.845708,-.179448,.394006,.441546,.853025,-.185746,.393279,.46832,.859666,-.191684,.391655,.495302,.86789,-.197146,.390068,.52262,.875845,-.201904,.38727,.550336,.882634,-.205023,.382688,.578825,.891076,-.207098,.377543,.608103,.900589,-.208474,.371752,.63723,.90791,-.209068,.364016,.665769,.915971,-.208655,.355593,.694428,.923455,-.20729,.345439,.723224,.931514,-.203821,.334099,.751925,.937885,-.19986,.321069,.780249,.943136,-.194993,.306571,.8077,.948818,-.189132,.291556,.83497,.954433,-.181617,.275745,.86188,.959078,-.173595,.258695,.888562,.962705,-.164855,.240825,.914008,.966753,-.155129,.22268,.939145,.970704,-.144241,.204542,.963393,.973367,-.133188,.185927,.985983,.975984,-.121146,.167743,1.00704,.976994,-.108366,.149218,1.02715,.978485,-.0956746,.13131,1.0455,.980074,-.0820733,.112513,1.06221,.98225,-.0684061,.0938323,1.07782,.98553,-.0549503,.0749508,1.09199,.989529,-.0407857,.055848,1.10508,.993536,-.0271978,.0368581,1.11684,.997247,-.0132716,.0181845,1.12789,1,431817e-9,-198809e-9,1.13792,.785886,-812608e-11,.405036,157669e-10,.790388,-205278e-9,.407355,398297e-9,.790145,-820824e-9,.407231,.00159263,.790135,-.00184681,.407226,.00358336,.790119,-.00328316,.407218,.00637039,.790126,-.00512988,.40722,.0099539,.79013,-.00738684,.407221,.0143339,.790135,-.0100538,.407221,.0195107,.790134,-.0131306,.407217,.0254848,.79016,-.0166169,.407224,.0322572,.790197,-.020512,.407236,.0398284,.790273,-.0248157,.407263,.0482014,.790381,-.029527,.407304,.0573777,.790521,-.0346446,.407355,.0673602,.790704,-.0401665,.40742,.0781522,.790925,-.0460896,.407499,.0897582,.791195,-.0524017,.407589,.10218,.791522,-.0590121,.407691,.11541,.791878,-.0654876,.407748,.12939,.792361,-.0725207,.407849,.144237,.792942,-.0799844,.407963,.159924,.79362,-.0877896,.408087,.176425,.794529,-.0958451,.408259,.193733,.795521,-.103827,.408362,.211756,.796778,-.111937,.408482,.230524,.798027,-.120521,.408547,.249967,.799813,-.129242,.408721,.269926,.802387,-.138048,.409148,.290338,.805279,-.147301,.409641,.311193,.809251,-.155895,.410154,.333611,.813733,-.163942,.410297,.357615,.819081,-.171666,.410373,.382339,.825427,-.178905,.410348,.407828,.83172,-.185812,.409486,.434034,.83877,-.192318,.408776,.460493,.845817,-.198249,.407176,.487346,.854664,-.204034,.405719,.514832,.863495,-.208908,.403282,.542401,.871883,-.212765,.399293,.570683,.88065,-.214911,.393803,.599947,.89004,-.216214,.387536,.62932,.898476,-.216745,.379846,.658319,.906738,-.216387,.370625,.687138,.914844,-.215053,.360139,.71601,.923877,-.212007,.348849,.745124,.931925,-.207481,.335639,.773366,.938054,-.202418,.320798,.801636,.943895,-.196507,.304772,.829055,.949468,-.189009,.288033,.856097,.955152,-.180539,.270532,.88301,.959403,-.171437,.251639,.909296,.963309,-.161661,.232563,.934868,.967399,-.150425,.213231,.959662,.972009,-.138659,.194247,.98302,.97433,-.126595,.174718,1.00517,.975823,-.113205,.155518,1.02566,.976371,-.0996096,.136709,1.04418,.978705,-.0860754,.117571,1.06146,.981477,-.0714438,.0980046,1.07777,.984263,-.0572304,.0782181,1.09214,.988423,-.0428875,.0584052,1.10553,.993,-.0282442,.038522,1.11758,.99704,-.0140183,.0190148,1.12864,.999913,369494e-9,-145203e-9,1.13901,.777662,-84153e-10,.423844,154403e-10,.770458,-211714e-9,.419915,38845e-8,.770716,-846888e-9,.420055,.00155386,.770982,-.00190567,.420202,.00349653,.770981,-.00338782,.420201,.00621606,.77098,-.00529338,.4202,.00971274,.770983,-.00762223,.4202,.0139867,.770985,-.0103741,.420198,.0190381,.770996,-.0135489,.4202,.0248677,.771029,-.0171461,.420212,.0314764,.771052,-.0211647,.420215,.0388648,.771131,-.0256048,.420245,.047036,.771235,-.0304647,.420284,.0559911,.771383,-.0357436,.420341,.0657346,.771591,-.0414392,.420423,.0762694,.771819,-.0475462,.420506,.0875984,.772123,-.0540506,.420617,.099727,.772464,-.060797,.42072,.112637,.772855,-.0675393,.420799,.126313,.773317,-.0748323,.420893,.140824,.773981,-.0825681,.421058,.15617,.774746,-.0906307,.421226,.172322,.77566,-.0988982,.421397,.189253,.776837,-.106994,.421569,.206912,.778097,-.115528,.421704,.225359,.779588,-.124317,.421849,.24447,.781574,-.133139,.422097,.264156,.784451,-.142179,.422615,.284318,.787682,-.15165,.423269,.304902,.792433,-.160771,.424396,.3265,.797359,-.169166,.424772,.35014,.803986,-.177149,.425475,.374768,.809504,-.184745,.424996,.399928,.815885,-.19173,.424247,.425796,.823513,-.198525,.423515,.452287,.832549,-.204709,.422787,.479321,.841653,-.210447,.421187,.506718,.850401,-.215501,.418519,.53432,.859854,-.219752,.414715,.56242,.869364,-.222305,.409462,.591558,.878837,-.223744,.402926,.621074,.888636,-.224065,.395043,.650538,.898132,-.223742,.38564,.679538,.907181,-.222308,.375378,.708674,.915621,-.219837,.363212,.737714,.9239,-.215233,.349313,.767014,.931644,-.209592,.334162,.795133,.938887,-.203644,.317943,.823228,.945282,-.196349,.300581,.850822,.950758,-.18742,.282195,.877594,.956146,-.177879,.262481,.904564,.960355,-.167643,.242487,.930741,.965256,-.156671,.222668,.955868,.968029,-.144123,.201907,.979869,.97251,-.131305,.18202,1.00291,.974925,-.118335,.161909,1.02392,.975402,-.103714,.142129,1.0433,.976987,-.089415,.122447,1.06089,.979677,-.0748858,.102248,1.07713,.983184,-.0596086,.0814851,1.09218,.987466,-.0447671,.0609484,1.10585,.992348,-.0295217,.0401835,1.11829,.996674,-.0143917,.0198163,1.12966,1.00003,321364e-9,-149983e-9,1.1402,.757901,-869074e-11,.436176,151011e-10,.751195,-217848e-9,.432317,378533e-9,.751178,-871373e-9,.432307,.0015141,.751195,-.00196061,.432317,.0034068,.751198,-.00348552,.432318,.00605659,.751195,-.00544599,.432315,.00946353,.751207,-.00784203,.43232,.013628,.751213,-.0106732,.43232,.0185499,.751221,-.0139393,.432319,.0242302,.751244,-.0176398,.432325,.0306694,.7513,-.0217743,.432348,.0378698,.751358,-.0263412,.432367,.0458321,.751458,-.0313396,.432404,.0545587,.751608,-.0367682,.432464,.0640543,.7518,-.0426246,.43254,.0743222,.752065,-.0489031,.432645,.0853668,.752376,-.0555828,.432762,.0971911,.752715,-.0623861,.432859,.109768,.753137,-.069415,.432958,.123126,.753676,-.0770039,.433099,.137308,.754345,-.084971,.433272,.15229,.755235,-.0932681,.433504,.168075,.756186,-.10171,.433693,.184625,.757363,-.110019,.433857,.201897,.75884,-.11887,.434102,.220014,.760467,-.127881,.434306,.238778,.762969,-.136766,.434751,.258172,.765823,-.14612,.43529,.278062,.769676,-.15566,.436236,.298437,.774909,-.165177,.437754,.319532,.77994,-.17402,.438343,.342505,.785757,-.182201,.438609,.366693,.792487,-.190104,.438762,.391668,.80038,-.197438,.438795,.417494,.808494,-.204365,.438226,.443933,.817695,-.210714,.437283,.470929,.828111,-.216651,.436087,.498569,.837901,-.221804,.433717,.526165,.847813,-.226318,.430133,.554155,.858314,-.229297,.425213,.582822,.868891,-.230999,.418576,.612847,.878941,-.231155,.410405,.642445,.888809,-.230935,.400544,.672024,.898089,-.229343,.389613,.701366,.908081,-.226886,.377197,.730763,.916819,-.222676,.363397,.759642,.924968,-.216835,.347437,.788775,.932906,-.210245,.32995,.817135,.940025,-.202992,.312262,.844912,.946101,-.19436,.293313,.872164,.952835,-.184125,.273638,.899443,.957347,-.173657,.252385,.926389,.961434,-.162204,.231038,.951947,.965522,-.14979,.209834,.976751,.969412,-.136307,.188821,1.00022,.973902,-.122527,.168013,1.02229,.974045,-.108213,.147634,1.04199,.975775,-.0927397,.12705,1.06019,.978383,-.0778212,.106309,1.07711,.98211,-.0621216,.0849279,1.09245,.986517,-.0463847,.0633519,1.10651,.991696,-.0309353,.0419698,1.11903,.996349,-.0150914,.0206272,1.13073,1.00003,442449e-9,-231396e-9,1.14146,.727498,-885074e-11,.441528,145832e-10,.730897,-223525e-9,.443589,368298e-9,.730796,-893996e-9,.443528,.00147303,.730805,-.00201149,.443533,.00331433,.730814,-.00357596,.443538,.00589222,.730815,-.00558734,.443538,.00920678,.730822,-.00804544,.44354,.0132582,.730836,-.0109501,.443545,.0180468,.730848,-.0143008,.443546,.0235732,.730871,-.0180969,.443552,.0298382,.730915,-.022338,.443567,.0368438,.730982,-.0270225,.443591,.044591,.731076,-.0321491,.443627,.0530831,.731245,-.0377166,.443699,.0623243,.73144,-.0437216,.443777,.0723181,.7317,-.0501576,.443881,.0830691,.732034,-.0569942,.444014,.0945809,.732388,-.0638756,.444113,.106825,.732853,-.071203,.444247,.119859,.733473,-.0790076,.444442,.13369,.734195,-.0871937,.444645,.148304,.735069,-.095696,.444877,.163702,.736169,-.10426,.445133,.179861,.73747,-.112853,.44537,.196778,.738991,-.12199,.445651,.214496,.740865,-.131153,.445958,.232913,.743637,-.140245,.446548,.251977,.746797,-.149722,.447246,.271551,.751517,-.159341,.448656,.291774,.756156,-.169106,.449866,.312455,.761519,-.178436,.450919,.334552,.768295,-.186904,.451776,.358491,.776613,-.195117,.452832,.383446,.783966,-.202695,.45249,.408945,.793542,-.20985,.452587,.435364,.803192,-.216403,.451852,.462336,.813892,-.22251,.450708,.48987,.824968,-.227676,.4486,.517697,.835859,-.232443,.445156,.545975,.846825,-.235775,.440351,.574483,.858085,-.237897,.433641,.604246,.868825,-.238074,.425354,.634101,.879638,-.237661,.415383,.664201,.889966,-.236186,.404136,.693918,.899479,-.233599,.390917,.723481,.908769,-.229737,.376352,.75258,.917966,-.223836,.360372,.781764,.926304,-.217067,.342551,.811139,.934626,-.209309,.324238,.839585,.941841,-.20071,.304484,.867044,.94789,-.190602,.283607,.894579,.954196,-.179253,.262205,.921743,.958383,-.167646,.239847,.948026,.963119,-.155073,.218078,.973296,.966941,-.141426,.195899,.998135,.970836,-.126849,.174121,1.02021,.973301,-.112296,.153052,1.04085,.97448,-.0964965,.131733,1.05946,.977045,-.080489,.10997,1.07693,.980751,-.064844,.0881657,1.09254,.985475,-.0481938,.0657987,1.10697,.991089,-.0319185,.0435215,1.12004,.996122,-.0158088,.0214779,1.13173,1.00001,372455e-9,-200295e-9,1.14291,.708622,-907597e-11,.45304,141962e-10,.711162,-228911e-9,.454662,358052e-9,.709812,-914446e-9,.453797,.00143034,.709865,-.00205819,.453834,.00321935,.709864,-.00365894,.453833,.00572331,.709855,-.00571692,.453826,.00894278,.709862,-.00823201,.453828,.012878,.709875,-.011204,.453832,.0175295,.709896,-.0146323,.453839,.0228978,.709925,-.0185163,.453847,.0289839,.709974,-.0228551,.453866,.0357894,.710045,-.0276473,.453892,.0433161,.710133,-.032891,.453924,.0515665,.710292,-.0385851,.453992,.0605458,.710485,-.0447254,.45407,.0702574,.710769,-.0513051,.454192,.0807077,.711106,-.0582733,.454329,.091896,.711516,-.0652866,.45446,.103814,.712071,-.0728426,.454653,.116508,.712676,-.0808307,.45484,.129968,.713476,-.0892216,.455096,.144206,.714377,-.0979047,.455346,.159212,.715579,-.106531,.455647,.174973,.716977,-.115492,.455961,.191504,.71862,-.124821,.456315,.208835,.72084,-.134079,.4568,.226869,.723786,-.143427,.457521,.245582,.727464,-.153061,.458475,.264957,.732771,-.162768,.460239,.284948,.736515,-.172627,.460899,.30522,.743519,-.182487,.463225,.326717,.750041,-.191295,.464027,.350113,.758589,-.199746,.465227,.374782,.767703,-.207584,.465877,.400226,.777484,-.214973,.465996,.426442,.788792,-.221796,.466019,.453688,.800194,-.228038,.465083,.481246,.811234,-.233346,.462506,.509086,.822859,-.238073,.459257,.537338,.835082,-.241764,.454863,.566108,.846332,-.244241,.448163,.595126,.858355,-.244736,.439709,.625574,.87034,-.244278,.429837,.65617,.881027,-.24255,.418002,.686029,.891007,-.239912,.404325,.716039,.900874,-.236133,.389222,.745518,.911072,-.230672,.373269,.775026,.920359,-.22356,.355083,.804521,.928604,-.215591,.335533,.834045,.937175,-.206503,.315278,.861612,.942825,-.196684,.293653,.889131,.949805,-.185116,.271503,.916853,.955535,-.172703,.248821,.943541,.959843,-.159978,.225591,.970132,.964393,-.146375,.202719,.994709,.968008,-.131269,.179928,1.0186,.971013,-.11569,.158007,1.03928,.973334,-.1003,.13624,1.05887,.975775,-.0833352,.1138,1.07652,.979579,-.0668981,.0913141,1.09297,.984323,-.0500902,.0683051,1.10734,.990351,-.0332377,.0451771,1.12084,.995823,-.0161491,.0221705,1.13296,1.0001,234083e-9,-108712e-9,1.14441,.683895,-924677e-11,.46015,137429e-10,.68833,-233383e-9,.463134,346865e-9,.688368,-933547e-9,.463159,.00138748,.688367,-.00210049,.463159,.00312187,.688369,-.00373415,.463159,.00555004,.688377,-.00583449,.463163,.00867216,.688386,-.00840128,.463166,.0124884,.688398,-.0114343,.463169,.0169993,.688418,-.0149329,.463175,.0222054,.688453,-.0188964,.463188,.028108,.688515,-.0233239,.463214,.0347085,.68857,-.0282136,.463231,.0420091,.688679,-.033564,.463276,.0500132,.688854,-.0393733,.463356,.0587255,.689038,-.0456354,.46343,.0681476,.689321,-.0523433,.463553,.0782897,.689662,-.059412,.463693,.0891501,.690188,-.0665736,.4639,.100735,.690755,-.0743106,.464107,.113074,.691405,-.0824722,.464329,.126161,.692198,-.0910484,.464585,.140007,.693196,-.0998778,.464893,.154612,.69454,-.108651,.465285,.169984,.695921,-.117855,.465596,.186106,.697749,-.12734,.466056,.203034,.700375,-.136714,.466771,.220703,.703395,-.146386,.467579,.239062,.707904,-.156096,.469067,.258188,.711673,-.165904,.469851,.277759,.717489,-.175812,.471815,.297935,.724051,-.185931,.47389,.318916,.731965,-.195238,.47587,.341591,.741151,-.204021,.477523,.366062,.751416,-.212113,.478881,.391396,.761848,-.21979,.479226,.417599,.771886,-.2267,.478495,.444401,.783998,-.232991,.477622,.472084,.796523,-.238645,.475833,.500193,.808851,-.243396,.472568,.52865,.821191,-.247226,.467857,.557362,.834261,-.250102,.461871,.586768,.846762,-.251056,.453543,.617085,.859867,-.250604,.443494,.647659,.871948,-.248783,.431711,.678119,.882967,-.245855,.417911,.708399,.892826,-.242168,.401993,.738256,.90332,-.237062,.385371,.767999,.913633,-.22997,.366837,.798191,.922774,-.221687,.346372,.827756,.931371,-.212345,.325682,.856425,.938929,-.20206,.303665,.884299,.944821,-.190981,.280786,.912023,.951792,-.178065,.2573,.939669,.957712,-.164634,.233448,.96655,.961912,-.150863,.209504,.992366,.966382,-.13577,.18597,1.01633,.969588,-.119593,.162905,1.03843,.971777,-.103203,.14053,1.05841,.97433,-.0865888,.117909,1.07632,.978686,-.0690829,.0944101,1.09326,.983281,-.0516568,.0705671,1.10796,.989562,-.034558,.0468592,1.12182,.995465,-.0167808,.0229846,1.1342,.999991,373016e-9,-235606e-9,1.1459,.662251,-939016e-11,.468575,132714e-10,.666634,-237624e-9,.471675,335842e-9,.666411,-950385e-9,.471516,.00134321,.666399,-.00213833,.471509,.00302221,.666386,-.0038014,.471499,.00537283,.666405,-.00593958,.471511,.00839533,.666406,-.00855253,.471508,.0120898,.666428,-.0116401,.471519,.0164569,.666444,-.0152015,.471522,.0214971,.66649,-.0192362,.471543,.027212,.666537,-.0237428,.471558,.033603,.666617,-.0287198,.471591,.0406728,.666718,-.0341647,.471631,.0484238,.666889,-.0400759,.47171,.0568621,.667104,-.0464479,.471805,.0659915,.667374,-.0532677,.471923,.0758178,.667772,-.0603805,.472098,.0863425,.668371,-.0677392,.472363,.0975917,.668971,-.0756028,.472596,.109567,.669696,-.0839293,.472869,.122272,.670481,-.0926683,.473126,.135718,.6715,-.1016,.473442,.149914,.672911,-.110566,.47389,.164882,.674512,-.119984,.474354,.180602,.67651,-.129574,.474922,.19711,.679292,-.139106,.475764,.214371,.682798,-.148993,.476886,.232405,.686955,-.158737,.478179,.251153,.691406,-.168754,.479432,.270436,.697438,-.178703,.481481,.290374,.704761,-.188955,.484143,.311044,.713599,-.198814,.487007,.333003,.723194,-.207869,.488962,.357144,.732601,-.216189,.489815,.382169,.744193,-.22398,.490888,.408227,.754907,-.231156,.490355,.434928,.767403,-.23747,.489548,.462599,.78107,-.243503,.488274,.490908,.793893,-.248114,.484843,.519421,.807296,-.25222,.4803,.548561,.820529,-.255265,.474097,.577772,.833716,-.256741,.466041,.607782,.848403,-.25637,.456547,.638807,.860755,-.254804,.443946,.670058,.874012,-.251834,.430852,.700749,.885619,-.247867,.414903,.731446,.896069,-.242634,.397276,.761191,.906266,-.236093,.378535,.791053,.916759,-.227543,.358038,.821298,.92523,-.21783,.335705,.850747,.93436,-.207534,.313797,.879258,.941631,-.195983,.289671,.907734,.947564,-.183567,.265319,.935206,.953681,-.169345,.240815,.962739,.960008,-.154909,.216119,.989227,.964145,-.140161,.192096,1.01465,.968171,-.123411,.167855,1.03737,.969859,-.106525,.144817,1.05767,.972666,-.0891023,.12149,1.0761,.977055,-.0718094,.0975306,1.09336,.982527,-.0534213,.0730217,1.10878,.989001,-.0355579,.0483366,1.12285,.99512,-.0176383,.023938,1.13548,1.00007,368831e-9,-211581e-9,1.14744,.651047,-960845e-11,.484101,12922e-9,.644145,-241347e-9,.478968,324578e-9,.64396,-965142e-9,.478831,.00129798,.64396,-.00217154,.47883,.00292046,.643968,-.00386049,.478835,.00519202,.643974,-.00603186,.478838,.0081128,.643977,-.0086854,.478836,.011683,.643982,-.0118207,.478834,.0159031,.644024,-.0154374,.478856,.0207743,.644059,-.0195343,.478868,.0262975,.644122,-.0241103,.478896,.0324747,.644207,-.0291638,.478933,.039309,.64432,-.0346919,.478981,.0468029,.644481,-.0406919,.479053,.0549614,.644722,-.047159,.479169,.0637909,.645013,-.0540748,.479302,.0732974,.645503,-.0612001,.479541,.0834898,.646117,-.0687303,.479829,.0943873,.646707,-.0767846,.480061,.105991,.647431,-.0852465,.480343,.11831,.64831,-.0940719,.48066,.131348,.649486,-.103056,.481083,.14514,.650864,-.112261,.481528,.159676,.652604,-.121852,.482102,.174979,.654825,-.131505,.482813,.191079,.657876,-.141189,.483876,.207927,.661339,-.151239,.48499,.225586,.665463,-.161091,.486279,.243947,.670542,-.171235,.487968,.262957,.677361,-.181347,.49053,.282781,.685672,-.191679,.493862,.303311,.694551,-.201781,.49699,.324607,.703753,-.211164,.498884,.347916,.713703,-.219675,.500086,.372628,.725911,-.227836,.501554,.398694,.73862,-.23533,.502193,.425529,.752118,-.241786,.501811,.453209,.76579,-.247865,.500185,.481381,.779568,-.252696,.497159,.51011,.793991,-.256802,.492765,.539322,.808182,-.259942,.486827,.569078,.821698,-.261703,.478386,.598818,.836009,-.262006,.468772,.629762,.849824,-.260333,.456352,.661366,.863888,-.257398,.442533,.69295,.876585,-.253264,.426573,.723608,.888665,-.248026,.408964,.754378,.899537,-.241487,.389677,.784761,.9094,-.233463,.368516,.814688,.920166,-.223397,.346624,.845009,.928899,-.21255,.322717,.874431,.937156,-.200869,.298698,.902922,.943861,-.188387,.273491,.931356,.949557,-.174341,.247866,.958854,.955862,-.158994,.222496,.986098,.961721,-.143664,.197522,1.01229,.965976,-.127412,.17302,1.03571,.968652,-.109798,.148954,1.05699,.971084,-.0916787,.125044,1.07587,.975584,-.0739634,.100577,1.09372,.98122,-.055322,.0753666,1.10948,.988253,-.0366825,.0498899,1.12394,.99482,-.0180389,.024611,1.13694,1.00001,229839e-9,-188283e-9,1.14919,.613867,-964198e-11,.479449,123452e-10,.621485,-244534e-9,.485399,313091e-9,.621429,-978202e-9,.485353,.00125245,.62112,-.00220004,.485114,.00281687,.621119,-.0039111,.485112,.00500783,.621122,-.00611091,.485112,.00782498,.621133,-.00879922,.485117,.0112687,.621152,-.0119756,.485125,.0153394,.621183,-.0156396,.485139,.0200382,.621227,-.0197898,.485158,.0253663,.621298,-.0244253,.485192,.0313261,.621388,-.0295441,.485233,.0379204,.621507,-.0351432,.485286,.0451523,.621693,-.0412198,.485378,.0530277,.621933,-.0477673,.485495,.0615522,.622232,-.0547574,.485635,.0707316,.622809,-.0619417,.485943,.0805883,.623407,-.069625,.486232,.0911267,.62406,-.077796,.486516,.102354,.624835,-.0863731,.486838,.114279,.625758,-.095251,.487188,.126902,.627043,-.104299,.487695,.140285,.628438,-.113724,.488163,.154397,.630325,-.123417,.488858,.169267,.632801,-.133137,.489754,.184941,.635784,-.143052,.490815,.20136,.639406,-.153132,.492048,.218643,.643872,-.163143,.49363,.236615,.6499,-.17333,.496009,.255449,.657201,-.183622,.498994,.275006,.666221,-.194019,.502888,.295354,.674419,-.204192,.505459,.316244,.683729,-.21406,.507771,.33849,.695584,-.222854,.510245,.363166,.708583,-.231315,.512293,.389071,.721233,-.238911,.512747,.415737,.735134,-.245657,.512482,.443331,.750179,-.251879,.511526,.471891,.765073,-.256911,.508935,.500892,.779794,-.261144,.504341,.530294,.794801,-.264316,.498515,.560144,.810339,-.266276,.491015,.590213,.824818,-.266981,.481126,.620865,.839375,-.265778,.468685,.652687,.853043,-.262748,.453925,.684759,.867335,-.258474,.437912,.716209,.88037,-.253187,.419648,.747508,.891711,-.246476,.39982,.77797,.902896,-.238735,.37879,.808586,.913601,-.22885,.355891,.838843,.923019,-.217656,.331773,.869014,.933432,-.205539,.307356,.898512,.939691,-.192595,.281321,.9269,.946938,-.178945,.255441,.955297,.952372,-.163587,.229013,.983231,.95909,-.147214,.203179,1.00971,.963675,-.13064,.17792,1.03438,.968247,-.113121,.152898,1.05625,.97001,-.0945824,.128712,1.07598,.974458,-.0755648,.103349,1.094,.980168,-.0571998,.0776731,1.1104,.987295,-.0377994,.0514445,1.12491,.994432,-.0186417,.025429,1.13851,.999975,542714e-9,-282356e-9,1.15108,.592656,-980249e-11,.486018,119532e-10,.598467,-247275e-9,.490781,301531e-9,.597934,-988317e-9,.490343,.00120517,.597903,-.00222366,.490319,.0027116,.597913,-.00395315,.490327,.00482077,.597919,-.00617653,.490329,.00753264,.597936,-.00889375,.490339,.0108478,.597956,-.0121043,.490347,.0147668,.597992,-.0158073,.490365,.0192905,.598032,-.0200017,.490382,.0244204,.598109,-.0246865,.49042,.0301593,.598215,-.0298594,.490474,.03651,.59833,-.0355167,.490524,.0434757,.598525,-.0416559,.490624,.0510629,.598778,-.0482692,.490753,.0592781,.599135,-.0553114,.49094,.0681304,.599802,-.062542,.491328,.0776467,.600361,-.0703638,.491598,.0878184,.60101,-.0786256,.491882,.0986573,.601811,-.0872962,.492232,.11018,.602861,-.0962284,.492684,.1224,.604167,-.10538,.493213,.135354,.605693,-.114896,.493799,.149034,.607682,-.124654,.494576,.163469,.610672,-.13456,.4959,.178747,.613313,-.144581,.496713,.194723,.617603,-.154703,.498499,.211617,.622174,-.16489,.500188,.229183,.628855,-.175164,.503072,.247786,.636963,-.185565,.506798,.267116,.644866,-.195911,.509719,.28702,.653741,-.206104,.512776,.307763,.664942,-.216447,.516812,.329631,.67633,-.22552,.519181,.353515,.690012,-.234316,.521681,.379226,.704243,-.242032,.523129,.405901,.719396,-.249172,.523768,.433585,.734471,-.255543,.522541,.462085,.750539,-.260697,.520217,.491233,.766365,-.26501,.516293,.521094,.781677,-.268409,.509708,.551014,.797132,-.270399,.501944,.581463,.812655,-.271247,.492025,.612402,.828592,-.270708,.480424,.643798,.844044,-.268085,.465955,.67682,.857305,-.263459,.448425,.708496,.87114,-.258151,.430243,.74046,.884936,-.251171,.410578,.771583,.895772,-.243305,.38862,.802234,.906961,-.234037,.365214,.833179,.917775,-.222714,.34116,.86353,.927883,-.210175,.31572,.893557,.936617,-.196925,.289159,.922976,.943384,-.182788,.261996,.951606,.949713,-.167965,.235324,.979958,.955818,-.151109,.208408,1.00765,.961344,-.133834,.182591,1.03329,.965469,-.115987,.156958,1.0557,.968693,-.09746,.132239,1.07583,.973165,-.0778514,.106195,1.09451,.979387,-.0585067,.0797669,1.11137,.98671,-.0390409,.0530263,1.12643,.994093,-.019408,.0263163,1.14016,1.00002,540029e-9,-194487e-9,1.15299,.574483,-989066e-11,.494533,114896e-10,.574478,-249127e-9,.494528,289403e-9,.574607,-996811e-9,.494637,.00115797,.574396,-.00224241,.494458,.00260498,.574377,-.00398632,.49444,.00463102,.574386,-.00622836,.494445,.00723623,.574401,-.0089683,.494453,.010421,.574419,-.0122056,.49446,.0141859,.574459,-.0159396,.494481,.0185322,.574525,-.0201692,.49452,.0234617,.574587,-.0248924,.494547,.0289762,.574697,-.0301074,.494604,.0350797,.574853,-.0358114,.494688,.0417767,.575027,-.041999,.494772,.0490718,.575294,-.0486618,.494915,.0569728,.575733,-.0557148,.495173,.0654955,.576356,-.0630489,.495537,.0746612,.576944,-.0709285,.495836,.0844615,.57765,-.0792723,.496177,.0949142,.578491,-.0880167,.496563,.10603,.579639,-.0969462,.497096,.117841,.580989,-.10622,.497684,.130367,.582587,-.115861,.498337,.143609,.584951,-.125605,.499414,.157625,.587602,-.135608,.500518,.172413,.59076,-.145742,.501767,.187999,.594992,-.155934,.503542,.20445,.600656,-.166303,.506135,.221764,.607816,-.176681,.509542,.24002,.61522,-.187071,.51263,.258992,.623702,-.197465,.516021,.278773,.634192,-.207816,.520422,.299377,.644936,-.218183,.524073,.320802,.657888,-.2278,.528049,.34384,.670666,-.236747,.52986,.36916,.685626,-.24484,.531892,.395867,.701304,-.252071,.532727,.423488,.717727,-.258714,.532146,.452201,.733914,-.264211,.529883,.481579,.750529,-.26859,.5259,.511558,.76747,-.272046,.51999,.542042,.785189,-.274225,.513083,.572799,.800954,-.275189,.502936,.603816,.816962,-.274946,.490921,.635461,.83336,-.272695,.47684,.6676,.848143,-.268223,.459405,.70051,.861818,-.262768,.440319,.732902,.876828,-.255872,.420123,.765084,.889312,-.247703,.398379,.796391,.900412,-.238381,.374496,.827333,.912251,-.227783,.349874,.858385,.921792,-.214832,.323181,.888652,.931273,-.200949,.296624,.917763,.940295,-.186537,.269211,.947878,.946812,-.171538,.241447,.977016,.953588,-.155254,.213829,1.00501,.958841,-.137156,.186807,1.03179,.963746,-.118699,.160706,1.05502,.966468,-.0998358,.135504,1.07568,.971178,-.0805186,.109131,1.09479,.97831,-.0599348,.0818293,1.1123,.985886,-.0399661,.0545872,1.12771,.994021,-.0198682,.0269405,1.14186,1.00009,271022e-9,-12989e-8,1.15514,.538716,-990918e-11,.486732,109675e-10,.550656,-250642e-9,.497518,277412e-9,.55057,-.00100265,.497441,.00110974,.550903,-.00225672,.497733,.00249779,.550568,-.00401046,.497438,.00443906,.550574,-.00626613,.49744,.00693637,.550591,-.0090226,.497449,.00998921,.550623,-.0122795,.497469,.0135984,.550667,-.0160361,.497495,.0177654,.550724,-.0202908,.497526,.0224915,.550792,-.0250421,.497557,.0277795,.550918,-.0302878,.49763,.0336334,.551058,-.0360241,.497701,.0400573,.551276,-.0422473,.497824,.0470585,.551551,-.0489441,.497977,.0546433,.552074,-.0559596,.498312,.0628367,.552681,-.0633978,.498679,.071646,.553324,-.0713176,.499031,.0810746,.554011,-.0797268,.499365,.091129,.55488,-.0885238,.499779,.101837,.556171,-.0974417,.500444,.113239,.557498,-.106841,.501025,.125316,.559299,-.116533,.501864,.138128,.561647,-.126298,.502967,.151695,.564347,-.136388,.504129,.16604,.567863,-.146576,.505713,.181207,.572569,-.156832,.507953,.197259,.578919,-.167323,.511186,.214258,.585387,-.177712,.514042,.232038,.593134,-.188184,.517484,.250733,.603295,-.198717,.522345,.270454,.613854,-.209177,.526751,.290807,.626092,-.219644,.531595,.312202,.637868,-.229494,.534721,.334435,.652458,-.238718,.538304,.359184,.666985,-.247061,.539875,.385637,.683301,-.254652,.541042,.41328,.69998,-.261376,.540735,.441903,.717824,-.267085,.539139,.471609,.734617,-.271465,.534958,.501446,.753663,-.27528,.53032,.532571,.770512,-.277617,.522134,.563641,.787356,-.278525,.51206,.595067,.806252,-.278512,.50119,.627226,.822061,-.277023,.486791,.659402,.838959,-.273175,.470467,.692874,.85379,-.267238,.450688,.725702,.868268,-.260327,.429741,.75832,.881994,-.251946,.407223,.790189,.893885,-.242432,.383214,.821625,.905118,-.231904,.357297,.853011,.916045,-.219545,.330733,.883773,.927614,-.205378,.303916,.914435,.936005,-.190388,.275941,.944502,.944533,-.1749,.247493,.974439,.950758,-.158588,.218996,1.00286,.957078,-.141027,.191559,1.0304,.962448,-.121507,.164457,1.05466,.964993,-.102068,.138636,1.0761,.970017,-.0822598,.111861,1.09541,.97661,-.062033,.0843438,1.11317,.985073,-.0409832,.0558496,1.12911,.993515,-.020146,.0275331,1.1438,1.00006,27329e-8,-107883e-9,1.15736,.525324,-999341e-11,.498153,105385e-10,.526513,-251605e-9,.499277,265329e-9,.526517,-.00100641,.499282,.0010613,.526588,-.00226466,.499337,.00238823,.526539,-.0040255,.499302,.00424535,.526547,-.00628954,.499306,.00663364,.526561,-.00905628,.499313,.00955337,.526593,-.0123253,.499334,.0130054,.526642,-.0160957,.499365,.0169911,.5267,-.0203661,.499396,.0215122,.526792,-.0251347,.499451,.0265718,.526904,-.0303985,.499511,.0321732,.527079,-.0361554,.499617,.0383231,.527285,-.0423982,.499731,.045026,.527602,-.0491121,.499924,.0522936,.528166,-.0561127,.500306,.0601528,.52879,-.0635988,.5007,.0686059,.529421,-.071581,.501048,.0776518,.530144,-.0799854,.501421,.0873148,.531062,-.0888032,.501884,.0976084,.532374,-.0977643,.50259,.108588,.533828,-.107197,.50329,.120234,.53581,-.116887,.504312,.132602,.538063,-.126755,.505365,.145721,.5409,-.136819,.506668,.159617,.544882,-.147117,.508731,.174369,.550238,-.157446,.511601,.190028,.556038,-.167988,.514431,.206587,.563031,-.178364,.517808,.224046,.571543,-.189007,.521937,.242503,.582255,-.199546,.527415,.261977,.59272,-.210084,.531682,.282162,.605648,-.220448,.537123,.303426,.61785,-.230593,.540664,.325323,.632223,-.240238,.544467,.348993,.648819,-.24887,.547594,.375462,.665825,-.256657,.54912,.403024,.683389,-.263711,.549294,.431773,.701495,-.269666,.547649,.461494,.719197,-.274169,.543786,.491623,.737906,-.278124,.538644,.522994,.756652,-.280632,.531057,.554775,.775279,-.281741,.521972,.586441,.792688,-.281652,.509613,.618596,.811894,-.280345,.496497,.651462,.827938,-.277128,.47968,.684023,.844837,-.271646,.460688,.718024,.859239,-.264397,.438872,.751207,.874088,-.256144,.41577,.784232,.887693,-.246311,.391369,.816191,.899402,-.235497,.365872,.847828,.910973,-.223631,.338618,.87934,.92204,-.209874,.310803,.910325,.930987,-.194265,.281802,.940695,.94,-.178125,.252836,.970958,.948018,-.161479,.224239,1.00078,.955141,-.144038,.195857,1.0288,.960513,-.124915,.168487,1.05371,.963964,-.104284,.141495,1.07596,.968713,-.0838732,.114437,1.09628,.975524,-.0635579,.0863105,1.11448,.98431,-.042291,.0574774,1.13069,.992916,-.0209131,.0284343,1.14568,.999926,743097e-9,-379265e-9,1.15955,.501042,-998428e-11,.498726,100306e-10,.502992,-252112e-9,.500665,253283e-9,.502417,-.00100791,.500092,.00101259,.502965,-.00226919,.500621,.00227978,.502318,-.00403109,.499994,.00405011,.502333,-.00629832,.500005,.00632868,.502362,-.00906907,.500027,.00911446,.502369,-.0123423,.500023,.0124078,.50243,-.0161178,.500066,.016211,.502493,-.0203937,.500103,.0205256,.502592,-.0251684,.500166,.0253548,.502707,-.0304389,.50023,.0307029,.502881,-.0362015,.500335,.0365753,.503124,-.0424507,.500488,.0429798,.503443,-.0491582,.500686,.0499268,.504083,-.0561476,.501155,.0574541,.504668,-.0636846,.501524,.0655408,.505319,-.0716834,.501904,.0742072,.50609,-.0800925,.502321,.0834699,.507122,-.0888425,.502896,.0933603,.508414,-.097855,.503603,.10391,.509955,-.107304,.504416,.115113,.512061,-.116921,.505565,.127054,.514419,-.12689,.506732,.139709,.517529,-.136934,.508338,.153173,.522085,-.147327,.510987,.167528,.526986,-.157612,.513527,.182708,.533122,-.168213,.516717,.198881,.540807,-.178688,.520832,.215986,.550687,-.189511,.52632,.234335,.560567,-.199998,.531009,.253375,.571698,-.210652,.535839,.273499,.584364,-.220917,.541091,.294355,.599066,-.23137,.546875,.316525,.614148,-.241206,.551306,.339671,.631157,-.250379,.555187,.36531,.647919,-.258397,.556595,.392767,.666112,-.265528,.556949,.421397,.686158,-.271827,.556617,.451433,.704838,-.27674,.552975,.482131,.723957,-.280733,.547814,.513458,.74262,-.283359,.53997,.545446,.762009,-.284541,.530422,.57775,.781314,-.284507,.518546,.610434,.799116,-.283309,.504178,.643178,.817604,-.280378,.48843,.676248,.83459,-.275619,.469457,.709698,.850974,-.26856,.447698,.744245,.866747,-.260094,.424791,.777695,.881412,-.249929,.399913,.810392,.8936,-.239137,.37308,.842872,.905943,-.226818,.345705,.874677,.916408,-.213699,.31706,.906257,.927215,-.198428,.288444,.936881,.935625,-.181643,.258329,.96795,.944076,-.164386,.228488,.998216,.951229,-.146339,.199763,1.02689,.958793,-.127709,.172153,1.0535,.963219,-.107244,.144989,1.07646,.967562,-.0857764,.11685,1.09675,.974866,-.0645377,.0880571,1.11576,.983353,-.0431732,.0587352,1.13227,.992503,-.0218356,.0294181,1.1478,1.00003,605203e-9,-231013e-9,1.16207,.482935,-101177e-10,.504695,968142e-11,.477554,-251521e-9,.499071,240676e-9,.477904,-.00100683,.499436,96342e-8,.478368,-.00226636,.499899,.0021687,.477977,-.00402719,.499513,.00385384,.477993,-.00629226,.499525,.0060221,.478011,-.00906011,.499536,.00867289,.478051,-.0123305,.499566,.0118074,.478089,-.016102,.499587,.0154269,.478171,-.0203736,.499645,.0195341,.478254,-.025143,.499692,.0241318,.47839,-.0304071,.499779,.0292247,.478588,-.0361631,.499911,.0348196,.478812,-.0424023,.500046,.0409231,.479208,-.0490724,.500326,.047552,.479841,-.0560722,.500805,.0547377,.480392,-.0636125,.501152,.0624607,.481068,-.0716134,.501561,.0707473,.481898,-.0800062,.502054,.0796118,.483022,-.0886568,.502728,.0890974,.484332,-.0977553,.503479,.0992099,.486126,-.107173,.504546,.10999,.488066,-.11677,.50557,.121476,.490521,-.126725,.506849,.133672,.494232,-.136793,.50911,.146731,.498302,-.147116,.511345,.160577,.503565,-.157446,.514344,.175335,.510902,-.168121,.518824,.191207,.519263,-.178799,.523666,.208058,.528204,-.189407,.528296,.225875,.538854,-.200145,.533724,.244782,.551278,-.210701,.539833,.264753,.565222,-.221303,.546131,.285745,.579403,-.231688,.551496,.307592,.595469,-.241718,.556809,.330582,.610929,-.250992,.559641,.354995,.629433,-.259602,.562379,.382471,.648504,-.267038,.563676,.411126,.66756,-.273388,.562092,.440924,.689143,-.278788,.560807,.472118,.709056,-.282783,.555701,.503774,.729855,-.285836,.548698,.536364,.748954,-.287078,.538544,.56895,.768373,-.287133,.526711,.601991,.78827,-.285839,.512511,.635403,.807465,-.283238,.496323,.668797,.825194,-.27906,.477638,.702584,.842203,-.272286,.456253,.736393,.857749,-.263854,.432412,.77096,.874799,-.253943,.407806,.80489,.887497,-.24237,.38033,.83771,.89966,-.230278,.352446,.870376,.911753,-.21646,.323268,.902256,.923011,-.202071,.294314,.933306,.932375,-.185519,.264104,.965177,.940537,-.167604,.234035,.996303,.948904,-.149068,.20412,1.0261,.955263,-.129539,.175431,1.05304,.960303,-.109932,.148116,1.07617,.965512,-.0880572,.119693,1.09742,.973466,-.0660548,.0901619,1.11721,.98284,-.0439228,.0599875,1.13436,.992216,-.0219588,.0298975,1.15006,.999946,119402e-9,-208547e-10,1.16471,.447827,-100414e-10,.491543,914833e-11,.454778,-251257e-9,.499172,22891e-8,.453519,-.00100342,.497787,914184e-9,.45357,-.00225776,.497847,.00205701,.453578,-.00401371,.497855,.00365705,.45357,-.00627107,.497841,.00571453,.453598,-.00902968,.497864,.00823019,.453627,-.0122888,.497882,.0112049,.453684,-.0160475,.497923,.0146405,.453764,-.0203044,.49798,.0185394,.453866,-.0250576,.498049,.0229054,.453996,-.0303028,.49813,.0277424,.454196,-.0360379,.498267,.0330587,.454457,-.0422521,.498445,.0388613,.454926,-.0488393,.498812,.0451767,.455525,-.0558653,.499272,.0520153,.456074,-.0633772,.499625,.0593754,.456752,-.0713606,.500049,.0672751,.457648,-.07971,.500615,.0757447,.458849,-.0883032,.501399,.0848231,.46029,-.0974095,.502293,.0945135,.462,-.106729,.503301,.104848,.464121,-.116354,.504533,.115884,.466889,-.126214,.506172,.127652,.470744,-.136324,.508667,.14024,.47488,-.146595,.510995,.153673,.480845,-.157027,.514832,.168053,.488262,-.167658,.519506,.183508,.496547,-.178343,.524347,.199948,.506254,-.188916,.52983,.217503,.517961,-.199975,.536357,.236272,.531484,-.210624,.543641,.256096,.545496,-.221227,.550048,.277085,.559497,-.231568,.555076,.298615,.575752,-.241698,.560541,.321547,.591999,-.251172,.564156,.345602,.610654,-.260178,.567607,.371851,.630484,-.268094,.56923,.40076,.651807,-.274661,.569779,.430801,.67239,-.280331,.566791,.461939,.693024,-.284501,.562007,.493854,.715473,-.287852,.555791,.526992,.736323,-.28929,.546345,.560102,.755771,-.289405,.534,.593543,.775424,-.2881,.519114,.627256,.795447,-.285562,.502543,.661464,.815319,-.281416,.484773,.695206,.831769,-.275523,.463445,.729044,.849464,-.267516,.440269,.764069,.866775,-.257584,.415049,.799089,.881252,-.245817,.388049,.831948,.894209,-.233127,.35889,.865526,.906922,-.219579,.329915,.89818,.919686,-.204491,.300441,.930013,.929044,-.188962,.269445,.962061,.938393,-.171079,.238402,.994214,.94661,-.15199,.208204,1.02533,.953095,-.131953,.178653,1.0529,.958644,-.111233,.150684,1.0771,.963925,-.0903098,.122359,1.09855,.971995,-.0680505,.0923342,1.11874,.981658,-.0448512,.0614195,1.13635,.991649,-.0221931,.0303582,1.15238,.999985,393403e-9,-111086e-9,1.16772,.396806,-971563e-11,.457671,842355e-11,.429186,-249421e-9,.495017,21625e-8,.429324,-998052e-9,.495173,865322e-9,.429175,-.00224487,.494999,.00194637,.429129,-.00399041,.494952,.00346004,.429153,-.00623476,.494974,.00540684,.429168,-.0089773,.494983,.00778714,.429207,-.0122175,.495012,.0106022,.429257,-.0159542,.495047,.0138535,.429338,-.0201864,.495106,.0175443,.429431,-.0249104,.495165,.0216774,.429587,-.0301252,.495279,.0262594,.429796,-.0358249,.495432,.0312968,.430065,-.0419972,.495621,.0367985,.430588,-.0485144,.496061,.042798,.43113,-.0555028,.496472,.0492914,.431743,-.0629852,.496904,.0562907,.432448,-.0709256,.497369,.0638056,.433414,-.0791942,.498032,.071885,.434638,-.0877346,.498854,.0805517,.43611,-.0968056,.499812,.0898047,.437859,-.106002,.500891,.0997142,.440017,-.115648,.502198,.110289,.443236,-.125427,.504389,.121644,.44697,-.135492,.506809,.133769,.451689,-.145746,.509858,.146787,.45811,-.156219,.514247,.160793,.465305,-.166834,.518816,.175791,.474085,-.177546,.524331,.191906,.484808,-.188262,.53104,.209199,.49732,-.199346,.538511,.227825,.509693,-.209951,.544554,.247269,.524367,-.220533,.551616,.267978,.539228,-.231082,.557368,.289672,.55644,-.241342,.563782,.31268,.574204,-.250964,.568851,.33651,.593388,-.260306,.57312,.362219,.613358,-.268667,.574916,.390322,.634512,-.275591,.575053,.420478,.65563,-.281328,.572404,.451614,.678265,-.285948,.568893,.484112,.70011,-.289408,.561878,.517348,.723005,-.291328,.55359,.551355,.743744,-.291418,.541099,.585109,.763949,-.290252,.526489,.619487,.784186,-.287648,.509496,.65404,.804304,-.283782,.491484,.688649,.823629,-.278067,.470517,.723133,.84094,-.270588,.44705,.757163,.857852,-.261188,.421252,.792816,.874934,-.249313,.394191,.827248,.888709,-.236492,.365359,.861074,.902589,-.222185,.336016,.894417,.914201,-.207314,.30527,.926825,.925978,-.191146,.274532,.9595,.93512,-.174135,.243393,.991583,.943656,-.155231,.212414,1.02356,.951719,-.134403,.182005,1.05239,.957164,-.113023,.153043,1.07754,.962656,-.0914493,.124186,1.09984,.970695,-.0694179,.0941654,1.12,.980749,-.0466199,.0629671,1.13849,.991205,-.0227032,.0311146,1.15494,.999884,632388e-9,-254483e-9,1.1706,.379821,-957289e-11,.460637,789337e-11,.405188,-247483e-9,.491396,204064e-9,.404796,-989434e-9,.490914,815853e-9,.40483,-.00222607,.490949,.00183559,.40473,-.00395723,.49084,.00326332,.404731,-.00618287,.490836,.00509945,.404768,-.00890258,.490871,.00734463,.404791,-.0121156,.490883,.00999992,.404857,-.0158214,.490938,.0130676,.404943,-.0200178,.491004,.0165503,.405059,-.0247027,.491093,.0204521,.405213,-.0298729,.491205,.0247788,.405399,-.0355226,.491333,.0295373,.405731,-.0416352,.491604,.034741,.406303,-.0480807,.492116,.0404255,.406814,-.0550458,.492506,.0465732,.407404,-.0624652,.492926,.0532058,.408149,-.0702958,.493442,.0603442,.409128,-.0784623,.494136,.0680297,.410408,-.087007,.495054,.0762786,.411813,-.0959639,.495962,.0851046,.413735,-.105075,.497257,.0945878,.416137,-.114646,.498882,.104725,.41934,-.124394,.501132,.11563,.423326,-.134328,.503883,.127325,.428419,-.14458,.50747,.139911,.43484,-.154979,.511964,.153481,.442641,-.165628,.517328,.168114,.452511,-.176365,.524258,.183995,.463473,-.187298,.531248,.200953,.475564,-.198244,.538367,.219176,.488664,-.208938,.545175,.238514,.504073,-.219599,.553227,.259129,.520832,-.230378,.560653,.280997,.538455,-.240703,.567523,.303821,.55709,-.250548,.573287,.327948,.576646,-.259964,.577795,.353362,.596705,-.268721,.580077,.380336,.618053,-.276054,.58018,.4101,.640303,-.282176,.578747,.44161,.662365,-.286931,.574294,.474106,.684542,-.290521,.567035,.507549,.707984,-.292672,.558687,.541853,.730913,-.293189,.547606,.576581,.752948,-.292199,.533471,.61172,.773452,-.289508,.516395,.646339,.794715,-.285716,.497873,.682131,.814251,-.280051,.476845,.716396,.833057,-.272873,.453449,.751503,.84959,-.263982,.427857,.786085,.867022,-.252745,.400335,.821355,.882277,-.239655,.371304,.85646,.895375,-.225386,.340397,.890828,.909347,-.209587,.310005,.923532,.921885,-.193433,.2796,.956419,.932127,-.176135,.247276,.989445,.941869,-.157872,.216186,1.02221,.949735,-.137577,.185602,1.05195,.956617,-.115285,.155767,1.07822,.961974,-.0928418,.126103,1.10149,.96972,-.0700592,.0956758,1.12207,.98012,-.0474671,.0643269,1.1408,.990825,-.0238113,.0320863,1.1577,.999876,381574e-9,-812203e-10,1.17403,.367636,-961342e-11,.469176,753287e-11,.380377,-244772e-9,.485434,191797e-9,.380416,-978857e-9,.485475,767015e-9,.380376,-.00220165,.485435,.00172522,.380419,-.00391408,.485487,.00306734,.380438,-.00611549,.485505,.00479332,.380462,-.00880558,.485525,.00690391,.380496,-.0119837,.485551,.00940039,.38056,-.0156487,.485605,.0122848,.38064,-.0197988,.485666,.0155601,.380767,-.0244324,.48577,.0192313,.380909,-.0295444,.485871,.0233032,.381142,-.0351321,.48606,.0277861,.381472,-.0411535,.486336,.0326939,.382015,-.0475408,.486833,.0380565,.382523,-.0544395,.487231,.0438615,.383129,-.061784,.487683,.0501332,.383952,-.0695085,.488313,.0568996,.38498,-.0775819,.489077,.0641952,.386331,-.0860443,.490113,.0720324,.387788,-.0948406,.491099,.0804379,.389808,-.103899,.492566,.0894899,.39252,-.113313,.494601,.0992098,.395493,-.123007,.496619,.109641,.399826,-.132859,.499912,.120919,.405341,-.143077,.504061,.133107,.411932,-.153465,.508905,.146263,.420591,-.164108,.515482,.160544,.43101,-.174893,.523191,.176123,.441881,-.185839,.53026,.192757,.453919,-.196633,.537295,.210535,.468715,-.207611,.546156,.229886,.485182,-.218517,.555173,.250543,.501926,-.229249,.562728,.27221,.51785,-.239481,.567494,.294892,.536947,-.249395,.573889,.318987,.557115,-.259,.578831,.344348,.577966,-.268075,.582055,.371223,.599489,-.276115,.583307,.399834,.62479,-.282523,.583902,.431415,.647504,-.287663,.57953,.464301,.670601,-.291538,.573103,.498123,.693539,-.293842,.563731,.532662,.717385,-.294681,.553169,.567925,.741533,-.293717,.539908,.603502,.762142,-.291156,.521902,.639074,.783014,-.28719,.502815,.674439,.805158,-.281773,.482598,.710497,.823646,-.274682,.458949,.7456,.841879,-.266184,.433129,.781085,.859515,-.255682,.406064,.816,.875335,-.242849,.376509,.851074,.890147,-.228329,.345502,.886473,.903144,-.212491,.31428,.920751,.916618,-.195695,.282994,.954606,.927953,-.178267,.251091,.988402,.937414,-.159549,.219107,1.02141,.946823,-.140022,.18896,1.05167,.954651,-.118154,.158667,1.07819,.959955,-.0946636,.128808,1.1025,.96858,-.0711792,.0973787,1.12391,.97938,-.0475046,.0650965,1.14322,.990498,-.024059,.0326267,1.16077,.999844,-512408e-10,112444e-9,1.17727,.316912,-934977e-11,.425996,695559e-11,.356423,-241372e-9,.479108,179562e-9,.356272,-965292e-9,.478897,71811e-8,.356262,-.00217182,.478894,.00161574,.356265,-.00386092,.478895,.00287261,.356278,-.0060324,.478905,.00448907,.356293,-.00868565,.478914,.00646572,.356346,-.0118207,.478965,.00880438,.356395,-.0154355,.479001,.0115066,.356484,-.019529,.479075,.0145762,.356609,-.0240991,.47918,.018018,.356766,-.0291413,.479305,.0218379,.357009,-.0346498,.479512,.0260454,.357424,-.0405462,.479909,.0306657,.357899,-.0468825,.480337,.0357054,.358424,-.0536887,.480771,.0411728,.359041,-.0609416,.481242,.0470841,.359903,-.0685239,.481943,.0534831,.360932,-.0764883,.482741,.0603795,.362196,-.0848364,.483688,.0678028,.363847,-.0935002,.484947,.0758086,.365972,-.102471,.486588,.0844173,.368741,-.111751,.488787,.0937199,.372146,-.121334,.491405,.103732,.377114,-.131147,.495604,.114608,.38226,-.141213,.499436,.126345,.389609,-.151632,.505334,.139116,.397925,-.162073,.51168,.152995,.407824,-.172819,.518876,.168071,.420014,-.183929,.527639,.184495,.434266,-.195032,.537588,.20232,.447352,-.205792,.544379,.221189,.463726,-.216704,.553422,.241616,.481406,-.227531,.562074,.263298,.498707,-.238017,.568227,.286116,.518039,-.247936,.574473,.3101,.538277,-.257437,.579191,.335401,.561166,-.266829,.584807,.362246,.583189,-.275329,.586476,.390609,.606024,-.28234,.585578,.420998,.632419,-.287924,.584496,.454357,.656128,-.291972,.577766,.488233,.679953,-.29456,.56875,.523248,.704654,-.295816,.558388,.559168,.729016,-.295157,.544826,.595326,.752062,-.292779,.528273,.631864,.773138,-.288681,.508482,.667793,.794869,-.283358,.487341,.704035,.815101,-.27608,.46354,.739925,.834212,-.26767,.438672,.775539,.852368,-.257397,.411239,.810895,.870207,-.245689,.3829,.846472,.884063,-.231452,.351496,.881788,.898284,-.215561,.31895,.917438,.912964,-.198208,.287367,.952422,.924666,-.180426,.254487,.987551,.934429,-.161525,.222226,1.02142,.943485,-.141197,.191143,1.05218,.9521,-.120085,.161112,1.07937,.957876,-.0975881,.130982,1.10403,.966943,-.0726842,.0990553,1.12616,.978313,-.0483705,.0662818,1.14619,.990048,-.0239072,.0329243,1.16413,.999984,461885e-9,-772859e-10,1.18099,.321287,-935049e-11,.455413,659662e-11,.332595,-237513e-9,.471437,167562e-9,.332729,-949964e-9,.471618,670192e-9,.332305,-.00213618,.471028,.00150712,.332326,-.00379765,.471055,.00267959,.332344,-.00593353,.471072,.00418751,.332356,-.00854349,.471077,.00603172,.332403,-.0116268,.471121,.00821362,.332461,-.0151824,.47117,.0107357,.332552,-.0192088,.471251,.0136014,.332657,-.0237024,.47133,.0168152,.332835,-.0286615,.471487,.0203853,.333083,-.0340765,.471708,.0243212,.333547,-.0398563,.47219,.0286518,.333989,-.0460916,.472587,.0333763,.334532,-.0527897,.473054,.0385084,.335167,-.0599284,.473568,.0440638,.33608,-.0673514,.474362,.0500962,.337146,-.0752237,.475231,.0566022,.338462,-.083418,.476282,.0636272,.34014,-.0919382,.477615,.0712153,.342341,-.100741,.479404,.079417,.345088,-.109905,.481618,.0882631,.349049,-.119369,.485081,.0978851,.353939,-.129033,.489317,.108336,.359893,-.139038,.494309,.119698,.366945,-.149411,.499983,.132024,.375814,-.159843,.507185,.145558,.387112,-.170664,.516392,.160433,.40023,-.181897,.526519,.176648,.412555,-.192785,.53423,.193922,.427023,-.203663,.542741,.212662,.443685,-.214695,.552066,.232944,.461499,-.225561,.560762,.254495,.480975,-.236257,.569421,.277531,.501,-.24639,.576101,.301724,.521691,-.256101,.581493,.327112,.543478,-.265289,.585221,.353917,.566094,-.273938,.587614,.381941,.589578,-.281679,.587991,.41172,.614583,-.287655,.585928,.444148,.641813,-.292228,.582092,.478617,.666189,-.295172,.57398,.51397,.690475,-.29648,.561676,.550118,.715543,-.296203,.548758,.586933,.740405,-.293999,.532792,.62384,.762183,-.28998,.512735,.660723,.786069,-.28478,.492402,.69807,.806812,-.277568,.469058,.734422,.826987,-.268951,.443017,.770946,.844588,-.259049,.415501,.80699,.863725,-.2471,.387328,.842107,.879137,-.234157,.356108,.878078,.894634,-.218719,.324315,.914058,.909162,-.201293,.291813,.949922,.92072,-.18267,.258474,.985337,.93158,-.163212,.225593,1.0205,.941238,-.142771,.193986,1.05273,.949293,-.120956,.163392,1.08075,.956226,-.0985743,.132934,1.10559,.96546,-.075118,.101255,1.12823,.977403,-.0497921,.0675441,1.149,.989648,-.0241574,.0334681,1.16765,1.00001,5762e-7,-184807e-9,1.18519,.303474,-916603e-11,.4542,61243e-10,.308894,-232869e-9,.462306,155592e-9,.309426,-931661e-9,.463093,622499e-9,.308643,-.0020949,.461933,.00139979,.308651,-.0037242,.461941,.00248874,.308662,-.00581873,.46195,.00388933,.308687,-.00837818,.461974,.00560247,.308728,-.0114016,.462011,.00762948,.308789,-.0148884,.462067,.00997326,.308882,-.0188369,.462151,.0126375,.309007,-.0232436,.462263,.0156271,.30918,-.0281054,.462417,.0189498,.309442,-.0334065,.462667,.0226167,.309901,-.0390589,.463162,.0266614,.310331,-.0452042,.463555,.0310715,.310858,-.0517735,.464019,.0358698,.311576,-.0587359,.464669,.0410848,.312436,-.0660383,.465406,.0467453,.313526,-.0737266,.466339,.0528718,.314903,-.0817574,.467504,.0595039,.316814,-.090167,.469226,.0666888,.318965,-.0987555,.470981,.0744658,.322077,-.107792,.473814,.082912,.325947,-.117098,.477241,.0920846,.331008,-.126602,.48184,.102137,.337893,-.136619,.488334,.113135,.345106,-.146838,.494415,.12511,.355111,-.157357,.503275,.138356,.365095,-.167955,.510966,.152686,.378344,-.179157,.521508,.16856,.391599,-.190143,.530455,.18561,.407786,-.20123,.541275,.204308,.425294,-.212456,.551784,.224623,.444021,-.223568,.561493,.246172,.463418,-.234154,.569886,.268979,.484077,-.244546,.577116,.293411,.505513,-.254301,.582914,.318936,.527672,-.263564,.587208,.345856,.550565,-.272332,.589277,.374054,.573656,-.280011,.588426,.403276,.59827,-.286924,.587504,.43474,.624731,-.291994,.583401,.468767,.652396,-.295159,.576997,.504411,.67732,-.296954,.565863,.54114,.703147,-.296877,.552316,.57816,.728715,-.295147,.536773,.616124,.752448,-.291275,.51771,.653885,.775169,-.285905,.496087,.691537,.799307,-.279064,.474232,.729251,.819482,-.270294,.447676,.766267,.837659,-.260032,.419656,.802616,.856903,-.248497,.391328,.838583,.873325,-.235252,.360285,.874711,.889788,-.221126,.329215,.91077,.904486,-.204304,.296392,.94653,.917711,-.185562,.262159,.983828,.928969,-.165635,.229142,1.01955,.939707,-.14442,.19673,1.05317,.948167,-.122147,.165095,1.0823,.955222,-.099098,.13451,1.10791,.964401,-.0755332,.102476,1.1312,.976605,-.0513817,.0689667,1.15218,.989085,-.0258499,.034506,1.17129,.999908,617773e-9,-271268e-9,1.18961,.285803,-905752e-11,.452348,572272e-11,.284689,-22732e-8,.450581,143626e-9,.285263,-910214e-9,.451482,575099e-9,.285302,-.00204784,.451553,.00129395,.285318,-.00364057,.451574,.0023006,.28533,-.00568813,.451585,.00359547,.285361,-.00819001,.451618,.00517934,.285397,-.0111458,.45165,.007054,.285447,-.0145536,.451688,.00922167,.285527,-.0184127,.451758,.0116869,.285688,-.0227207,.451929,.0144555,.28584,-.0274712,.452055,.0175341,.286136,-.0326278,.452369,.0209406,.286574,-.0381792,.452853,.0246965,.287012,-.0441879,.453272,.0287996,.287542,-.0506096,.453752,.033268,.288299,-.0573634,.454488,.0381504,.289186,-.0645458,.455294,.0434447,.290302,-.0720405,.456301,.0491973,.291776,-.0799046,.457648,.0554453,.29372,-.088117,.459483,.0622311,.296052,-.0965328,.461571,.0695992,.299563,-.105409,.465085,.077658,.30335,-.114553,.468506,.0864176,.309167,-.123917,.474423,.0961078,.31529,-.13381,.47995,.106643,.324163,-.144021,.488592,.118322,.333272,-.154382,.496461,.131133,.344224,-.165015,.50562,.145208,.357733,-.176168,.516719,.16073,.373046,-.187468,.528513,.177807,.38788,-.198488,.537713,.196072,.405133,-.209545,.547999,.21605,.423845,-.220724,.55759,.237484,.443777,-.231518,.566246,.26039,.464824,-.242035,.574326,.284835,.486635,-.251898,.58037,.310518,.51012,-.261304,.58568,.337678,.535301,-.270384,.590197,.366242,.559193,-.27841,.590569,.395873,.583544,-.285325,.588161,.426857,.608834,-.291113,.584249,.459477,.635753,-.294882,.57763,.494734,.664367,-.297088,.569479,.532023,.689688,-.297364,.555064,.569629,.715732,-.295949,.539522,.608124,.741307,-.292259,.521613,.646231,.764949,-.287063,.49969,.684938,.788599,-.28012,.476747,.723548,.81048,-.27153,.45116,.761135,.831372,-.261289,.424101,.798916,.850092,-.249559,.39443,.835952,.867777,-.236348,.363849,.871606,.884632,-.221569,.332477,.907843,.90047,-.20618,.300667,.944187,.914524,-.188771,.266552,.981371,.926892,-.168362,.232349,1.01841,.937951,-.146761,.199359,1.05308,.947236,-.123813,.1675,1.0839,.954367,-.099984,.136166,1.11047,.963907,-.0759278,.103808,1.13414,.976218,-.0511367,.0697061,1.15575,.988772,-.0267415,.0352529,1.17531,.999888,-520778e-9,289926e-9,1.19389,.263546,-883274e-11,.441896,526783e-11,.262352,-221849e-9,.439889,132311e-9,.262325,-886683e-9,.439848,528824e-9,.26228,-.00199476,.439765,.00118975,.262372,-.00354671,.439922,.00211568,.26239,-.00554141,.439941,.00330652,.262412,-.00797888,.439961,.00476346,.262453,-.0108584,.440002,.00648818,.262528,-.0141788,.440085,.0084835,.262615,-.017938,.440166,.0107533,.262744,-.0221346,.440291,.0133044,.262939,-.026762,.440493,.0161445,.263277,-.0317573,.440889,.0192974,.26368,-.0371832,.441338,.0227699,.264106,-.0430371,.441753,.0265698,.264624,-.0493035,.442227,.0307178,.265378,-.0558669,.442985,.0352616,.266253,-.0628718,.443795,.0401968,.267478,-.0701569,.445008,.04559,.269062,-.077845,.446599,.0514539,.270926,-.0857941,.448349,.0578382,.273693,-.0940773,.451221,.0648363,.276746,-.102704,.454097,.0724389,.281693,-.111735,.459517,.0808744,.287335,-.121004,.46531,.0901551,.29448,-.130734,.472605,.100371,.30257,-.140777,.480251,.111644,.312465,-.15111,.489444,.124111,.324856,-.16189,.500919,.137979,.33774,-.172946,.511317,.153163,.35255,-.184152,.522684,.169817,.367786,-.19522,.53248,.187886,.385474,-.20632,.543326,.207634,.404976,-.217744,.554109,.229165,.425203,-.228691,.563395,.252068,.446704,-.239299,.571565,.276471,.468951,-.249348,.577935,.302323,.493487,-.258933,.584309,.329882,.517861,-.268009,.58773,.358525,.543309,-.276238,.589612,.388585,.569704,-.28356,.589294,.419787,.594871,-.289497,.585137,.452114,.622555,-.294452,.580356,.486466,.651167,-.296918,.57185,.523079,.677332,-.297647,.558428,.5611,.703718,-.296321,.542232,.599592,.730262,-.293339,.524541,.639138,.754304,-.288036,.502691,.677978,.778051,-.281018,.479212,.716537,.801557,-.272414,.454071,.75586,.822559,-.262419,.425952,.794477,.843051,-.250702,.397313,.832664,.86232,-.237264,.366534,.869876,.879044,-.222716,.334816,.906973,.896362,-.206827,.303143,.943558,.910342,-.189659,.269699,.979759,.924119,-.171108,.236411,1.01718,.935374,-.149579,.202224,1.05289,.944295,-.126295,.16989,1.08496,.952227,-.101511,.138089,1.11256,.962041,-.0766392,.105053,1.1375,.97528,-.0511967,.070329,1.15983,.988476,-.025463,.0351268,1.17987,.999962,286808e-10,145564e-10,1.19901,.227089,-841413e-11,.404216,472707e-11,.239725,-215083e-9,.426708,120833e-9,.239904,-860718e-9,.427028,483555e-9,.239911,-.00193661,.427039,.00108806,.239914,-.00344276,.42704,.00193457,.239933,-.00537907,.427064,.00302363,.239944,-.00774482,.427065,.00435604,.239993,-.01054,.427122,.00593398,.240052,-.0137626,.427179,.00775987,.240148,-.0174115,.427279,.00983854,.240278,-.021484,.42741,.0121763,.240472,-.0259729,.427618,.0147827,.240839,-.0308131,.428086,.0176837,.241201,-.0360893,.428482,.0208775,.241626,-.0417723,.428907,.0243821,.242207,-.0478337,.42952,.0282228,.24298,-.0542199,.430332,.0324333,.243881,-.0610015,.431222,.0370252,.245123,-.0680874,.432512,.0420535,.24667,-.0755482,.434088,.0475414,.248779,-.0832873,.436323,.0535542,.251665,-.0913546,.439509,.0601716,.255305,-.0998489,.443478,.0674282,.260049,-.108576,.448713,.0754673,.266192,-.117754,.455524,.084339,.273158,-.127294,.4627,.0941683,.282131,-.137311,.472068,.10515,.293332,-.147736,.483565,.117402,.304667,-.158357,.493702,.130824,.317785,-.169274,.504708,.145724,.333245,-.180595,.517107,.16215,.349843,-.191892,.528849,.180149,.367944,-.203168,.540301,.199746,.387579,-.214443,.551514,.221047,.408247,-.225624,.560906,.243981,.43014,-.236422,.56959,.268513,.452669,-.24654,.576098,.294409,.476196,-.256157,.580925,.322002,.501157,-.265289,.584839,.351052,.527632,-.273671,.587614,.3812,.555754,-.281254,.589119,.412994,.581682,-.287448,.585204,.445498,.608196,-.292614,.579006,.479505,.635661,-.296068,.571297,.514643,.664999,-.297395,.560855,.552213,.691039,-.296645,.544525,.591365,.7179,-.293785,.526535,.630883,.744059,-.289089,.50545,.670932,.76863,-.282239,.482514,.710904,.793273,-.273688,.457246,.750259,.814731,-.26328,.428872,.78948,.835603,-.251526,.399384,.828597,.85489,-.238339,.368811,.866892,.872828,-.223607,.336617,.90563,.889462,-.207538,.303997,.943538,.904929,-.190297,.270812,.980591,.919101,-.172034,.237453,1.01935,.930536,-.152058,.204431,1.05498,.941223,-.129515,.172495,1.08717,.94982,-.104263,.140175,1.11551,.960592,-.0781944,.106465,1.14098,.974629,-.051688,.0711592,1.16418,.98811,-.0253929,.0354432,1.18465,1.00004,804378e-9,-330876e-9,1.20462,.214668,-821282e-11,.406619,433582e-11,.218053,-208144e-9,.413025,109887e-9,.217987,-832212e-9,.412901,439362e-9,.217971,-.00187246,.412876,988623e-9,.217968,-.00332855,.41286,.00175772,.217985,-.00520055,.412882,.00274729,.218014,-.00748814,.412916,.00395842,.218054,-.0101901,.412957,.00539274,.218106,-.0133057,.413005,.00705348,.218217,-.0168342,.413139,.00894581,.218338,-.0207707,.413258,.0110754,.21855,-.0251001,.413509,.0134551,.218913,-.0297861,.413992,.0161081,.219265,-.0348956,.414383,.0190307,.219696,-.0403909,.414839,.0222458,.220329,-.0462003,.415567,.025792,.220989,-.0524208,.41621,.0296637,.222027,-.058948,.417385,.0339323,.223301,-.0658208,.418779,.0386055,.224988,-.0730347,.420665,.0437355,.227211,-.0805274,.423198,.0493844,.230131,-.088395,.426566,.0556135,.233908,-.0966208,.43091,.0624829,.239092,-.105223,.437148,.0701636,.245315,-.11424,.444302,.0786949,.253166,-.12368,.453262,.0882382,.262374,-.133569,.463211,.0988682,.273145,-.143836,.474271,.110727,.285512,-.154577,.4863,.123945,.299512,-.165501,.498817,.138581,.314287,-.176698,.510341,.154676,.331083,-.188066,.522583,.172459,.349615,-.199597,.534879,.191979,.369318,-.210843,.546083,.21309,.390377,-.222068,.5562,.235998,.412411,-.233059,.564704,.260518,.435715,-.24357,.572314,.286795,.461196,-.253356,.579395,.314559,.485587,-.262362,.581985,.343581,.511908,-.270895,.584347,.374367,.539798,-.278452,.58505,.406015,.567974,-.284877,.583344,.439168,.594303,-.290124,.577348,.473005,.622951,-.294183,.570751,.508534,.652404,-.296389,.561541,.544764,.679291,-.296605,.546426,.582927,.706437,-.294095,.528599,.622681,.734485,-.28978,.508676,.663567,.758841,-.283363,.484768,.704092,.78537,-.275015,.460434,.745101,.807315,-.264689,.432166,.784712,.8271,-.252597,.401807,.824241,.849191,-.239154,.371458,.863803,.867046,-.224451,.338873,.903063,.8852,-.208342,.306175,.942763,.901771,-.190684,.272759,.981559,.915958,-.172105,.239306,1.02048,.928046,-.152214,.206071,1.05765,.939961,-.130247,.17367,1.08999,.948711,-.10672,.142201,1.11829,.959305,-.0808688,.108454,1.14467,.973009,-.0539145,.0728109,1.16839,.987631,-.0262947,.0360625,1.19004,.999978,.00132758,-559424e-9,1.21058,.193925,-793421e-11,.391974,392537e-11,.196746,-200315e-9,.397675,991033e-10,.19667,-801099e-9,.397521,396342e-9,.196633,-.00180246,.397445,891829e-9,.196654,-.00320443,.397482,.00158582,.196659,-.00500647,.39748,.00247867,.196683,-.0072086,.397506,.00357167,.196728,-.00981001,.397562,.00486675,.196792,-.0128096,.397633,.00636707,.19689,-.0162055,.397746,.00807752,.197017,-.0199943,.397884,.0100052,.19729,-.024139,.39827,.0121691,.197583,-.0286671,.398639,.0145755,.197927,-.0335858,.399034,.0172355,.198383,-.0388806,.399554,.0201718,.199002,-.0444736,.400289,.0234194,.199739,-.0504583,.401111,.026984,.200784,-.056729,.402349,.0309217,.202075,-.0633643,.403841,.0352496,.203898,-.0703247,.406076,.0400313,.206199,-.0775565,.408841,.0453282,.209252,-.085184,.41259,.0511794,.213638,-.0931994,.418288,.0577459,.21881,-.101617,.424681,.0650508,.225642,-.11052,.433429,.0732759,.233717,-.119772,.442897,.0824683,.242823,-.129505,.452888,.0927484,.254772,-.139906,.466407,.104417,.266603,-.150402,.477413,.117211,.28073,-.161395,.490519,.131598,.295399,-.172465,.50201,.147407,.312705,-.183982,.515311,.165031,.331335,-.195532,.52786,.184336,.351037,-.206971,.5392,.205361,.372175,-.218117,.54941,.228043,.394548,-.229327,.558642,.25267,.419598,-.240052,.567861,.279071,.443922,-.249937,.573332,.306882,.471495,-.259407,.58013,.33661,.496769,-.267749,.580564,.367328,.524951,-.275524,.581696,.399753,.55318,-.282148,.579885,.433134,.581577,-.287533,.575471,.467534,.609231,-.291612,.567445,.502943,.637478,-.293911,.557657,.53871,.667795,-.295096,.546535,.576568,.694272,-.294073,.529561,.614929,.722937,-.290386,.510561,.655909,.749682,-.284481,.487846,.697663,.774754,-.276188,.462487,.738515,.799301,-.266215,.43481,.779802,.820762,-.254116,.404879,.820045,.843231,-.240393,.374559,.860294,.861857,-.225503,.341582,.900965,.880815,-.209382,.308778,.941727,.89766,-.19155,.275232,.980916,.912926,-.172346,.240938,1.02162,.926391,-.151799,.207223,1.0597,.938429,-.129968,.17484,1.09291,.947834,-.10651,.142984,1.12248,.958432,-.0824098,.109902,1.149,.972402,-.0565242,.0744454,1.1733,.987191,-.028427,.0373794,1.19538,.999975,385685e-10,-4203e-8,1.21676,.178114,-766075e-11,.385418,354027e-11,.176074,-191966e-9,.381002,887135e-10,.17601,-767549e-9,.380861,354715e-9,.17598,-.00172696,.380798,798168e-9,.175994,-.00307012,.380824,.00141928,.176017,-.00479684,.380858,.00221859,.176019,-.00690648,.380839,.00319714,.176072,-.00939888,.380913,.0043572,.176131,-.0122726,.380979,.005702,.176239,-.0155264,.38112,.00723689,.176371,-.0191551,.381272,.00896907,.176638,-.023117,.381669,.0109194,.176912,-.0274633,.382015,.0130903,.177279,-.032173,.382476,.0154949,.17774,-.0372219,.383041,.0181669,.178344,-.0426132,.38378,.0211209,.179153,-.0483309,.384773,.0243899,.180197,-.0543447,.386076,.0280062,.181581,-.0607122,.387809,.032004,.18344,-.0673855,.390205,.036453,.186139,-.0743989,.393944,.0414162,.189432,-.0817731,.39832,.0469394,.193795,-.0895464,.404188,.0531442,.199641,-.0978264,.4121,.0601374,.206679,-.106499,.421425,.0680078,.214865,-.115654,.431504,.076919,.224406,-.125268,.442526,.0868835,.235876,-.135475,.455465,.0981875,.248335,-.146023,.4681,.110759,.262868,-.157016,.482069,.124885,.278962,-.168245,.496182,.140645,.295082,-.17958,.507401,.157838,.313738,-.191227,.520252,.17695,.333573,-.202718,.531708,.197817,.356433,-.214424,.544509,.220785,.378853,-.225492,.55373,.245306,.402717,-.236236,.561348,.271593,.428375,-.246568,.568538,.299776,.454724,-.255941,.573462,.329433,.482291,-.264511,.576356,.360598,.509706,-.272129,.576446,.393204,.538805,-.278979,.575298,.427227,.568919,-.284528,.572154,.462157,.596804,-.288801,.564691,.497997,.625987,-.291334,.555134,.534467,.656414,-.292722,.545051,.571736,.683916,-.292185,.528813,.610158,.711809,-.290043,.51106,.649061,.739547,-.285246,.490103,.690081,.766914,-.277647,.465523,.732554,.791375,-.267603,.437718,.773982,.814772,-.256109,.40882,.81609,.836691,-.242281,.377823,.856849,.856984,-.227155,.34496,.898363,.876332,-.210395,.311335,.939471,.894988,-.192612,.277703,.980799,.911113,-.173236,.243019,1.02215,.924092,-.152258,.209037,1.06139,.936828,-.129575,.175909,1.09635,.946869,-.10594,.143852,1.12707,.958284,-.081318,.110289,1.15419,.972325,-.0556133,.0747232,1.17909,.986878,-.0297899,.0383149,1.20163,.999936,-.00197169,912402e-9,1.22338,.151174,-720365e-11,.351531,309789e-11,.155594,-18279e-8,.361806,78608e-9,.156099,-731569e-9,.362982,314615e-9,.156053,-.00164578,.362869,707845e-9,.156093,-.0029261,.362961,.00125884,.156099,-.00457155,.362959,.00196783,.15612,-.00658224,.362982,.00283622,.156168,-.00895774,.363048,.00386625,.156221,-.0116962,.363101,.00506109,.156324,-.0147973,.363241,.00642675,.156476,-.0182503,.363448,.00797175,.156731,-.0220266,.36384,.00971484,.156994,-.026176,.364179,.0116575,.157341,-.0306701,.36462,.0138207,.157867,-.0354591,.365364,.0162356,.15846,-.0406141,.366111,.0189092,.159308,-.0460519,.367248,.021885,.160426,-.0518096,.368767,.0252004,.161877,-.0578906,.370745,.0288825,.163995,-.0642812,.373831,.0330139,.16655,-.0710067,.377366,.0376283,.170237,-.0781522,.382799,.0428493,.175096,-.0857172,.389915,.0487324,.181069,-.0938025,.398487,.0554214,.188487,-.102363,.408799,.0630189,.197029,-.111343,.419991,.071634,.206684,-.120812,.431455,.0812797,.218698,-.131033,.445746,.0923651,.230726,-.141373,.457471,.104545,.245516,-.152387,.472388,.118449,.261551,-.163628,.486671,.133923,.277437,-.174814,.49762,.150849,.296662,-.186713,.51162,.169924,.31795,-.198513,.525435,.190848,.339422,-.210119,.536267,.213504,.362143,-.221354,.545982,.237947,.387198,-.23224,.555364,.264427,.412349,-.24257,.561489,.292519,.439274,-.252284,.566903,.322561,.466779,-.261023,.569614,.353952,.496011,-.26899,.571589,.387278,.524964,-.275498,.570325,.421356,.556518,-.281449,.568792,.457314,.584363,-.285526,.560268,.493199,.614214,-.28844,.55205,.530276,.645684,-.289777,.541906,.56855,.673446,-.289722,.526464,.606927,.701924,-.287792,.509872,.645945,.73037,-.284315,.490649,.685564,.757405,-.278804,.467964,.726511,.784025,-.269543,.441468,.768601,.808255,-.258117,.41216,.811321,.830739,-.244728,.380606,.853496,.851914,-.229428,.348111,.895374,.872586,-.212508,.314732,.937674,.891581,-.194025,.280338,.979869,.907641,-.174711,.245203,1.02253,.922233,-.153509,.21077,1.06371,.935878,-.130418,.177399,1.09972,.946338,-.105558,.144507,1.13124,.957265,-.080059,.110508,1.15973,.971668,-.0539766,.0742311,1.18515,.9866,-.0277101,.0375224,1.20858,1.00021,-515531e-9,135226e-9,1.23135,.137468,-686011e-11,.345041,273315e-11,.13703,-173378e-9,.343936,690761e-10,.136986,-693048e-9,.34383,276126e-9,.136964,-.00155931,.343761,621337e-9,.137003,-.00277211,.343863,.00110494,.137012,-.00433103,.343868,.00172744,.137043,-.00623606,.343916,.00249022,.13709,-.0084868,.343986,.00339559,.137145,-.0110814,.344045,.00444687,.137242,-.0140187,.344177,.00565007,.137431,-.0172713,.344491,.00701868,.137644,-.0208605,.344805,.00856042,.13791,-.024792,.345172,.0102863,.138295,-.0290461,.345734,.0122185,.138764,-.0335957,.346371,.0143771,.139415,-.038467,.347298,.0167894,.140272,-.0436176,.348527,.0194895,.141457,-.0491016,.350276,.0225043,.14303,-.0548764,.352646,.0258962,.145289,-.0610096,.356206,.0297168,.148502,-.0674777,.361488,.0340562,.152188,-.074345,.367103,.0389534,.157359,-.0817442,.375247,.0445541,.16379,-.0896334,.385064,.0509535,.171376,-.098005,.396082,.0582611,.179901,-.106817,.407418,.06654,.189892,-.116239,.420031,.075994,.201838,-.12627,.434321,.0867239,.214311,-.136701,.447631,.0987517,.228902,-.147616,.462046,.112353,.245107,-.158871,.476942,.127605,.262292,-.170261,.490285,.144469,.281215,-.182017,.503783,.163282,.301058,-.193729,.515505,.183873,.322752,-.205512,.52682,.206466,.347547,-.217214,.539473,.231194,.370969,-.227966,.546625,.257288,.397533,-.238555,.55472,.285789,.42398,-.248278,.559468,.315746,.452928,-.257422,.564095,.347724,.482121,-.265306,.565426,.380922,.510438,-.272043,.563205,.415639,.541188,-.277614,.561087,.451702,.571667,-.281927,.554922,.48845,.602432,-.285015,.546838,.526442,.634126,-.286512,.537415,.564896,.662816,-.286388,.522906,.604037,.692411,-.284734,.507003,.643795,.720946,-.281297,.488398,.68298,.748293,-.276262,.466353,.723466,.776931,-.269978,.443573,.764565,.801065,-.260305,.415279,.805838,.825843,-.247426,.384773,.849985,.84807,-.232437,.352555,.893174,.869122,-.215806,.318642,.936564,.888963,-.197307,.28381,.980253,.905547,-.177203,.247888,1.02463,.918554,-.155542,.212904,1.06714,.931395,-.131948,.1787,1.10451,.941749,-.106723,.145902,1.13694,.954551,-.0804939,.111193,1.1666,.970279,-.0534239,.0744697,1.19249,.986117,-.0257452,.0368788,1.21665,.999938,.00190634,-.0010291,1.23981,.118493,-647439e-11,.32272,23772e-10,.118765,-163023e-9,.323456,598573e-10,.118772,-65212e-8,.323477,239447e-9,.118843,-.00146741,.323657,538881e-9,.118804,-.00260846,.323553,95826e-8,.118826,-.00407576,.323595,.00149845,.118846,-.00586826,.323617,.00216047,.118886,-.00798578,.32367,.00294679,.118947,-.0104273,.323753,.00386124,.119055,-.0131909,.323922,.00490999,.119241,-.0162444,.324251,.00610804,.11944,-.0196339,.324544,.00745805,.119739,-.0233378,.325026,.00897805,.12011,-.0273179,.325586,.0106895,.120571,-.0316143,.326231,.0126073,.12124,-.0361939,.327264,.0147654,.122162,-.0410511,.328733,.0172001,.123378,-.0462233,.330659,.0199375,.125183,-.0517109,.333754,.0230498,.127832,-.0575652,.338507,.026597,.130909,-.0637441,.343666,.0306345,.135221,-.0704302,.351063,.035273,.14082,-.0776364,.360604,.0406137,.146781,-.0852293,.369638,.0466788,.155121,-.0935351,.3827,.0537628,.16398,-.102234,.39522,.0617985,.173926,-.111465,.40793,.07097,.185137,-.121296,.42105,.0813426,.19826,-.13169,.435735,.0931596,.212938,-.142614,.450932,.106547,.229046,-.153884,.465726,.121575,.246246,-.165382,.479461,.138286,.264637,-.176806,.492106,.15666,.284959,-.188793,.504774,.17728,.308157,-.200763,.518805,.19988,.330951,-.21239,.528231,.224293,.3549,-.223521,.536376,.250541,.381502,-.234169,.544846,.278902,.409529,-.244077,.551717,.309227,.437523,-.253363,.55517,.341426,.467624,-.261659,.557772,.37518,.497268,-.268498,.556442,.41007,.528294,-.274018,.553915,.446445,.559053,-.278169,.549153,.483779,.589329,-.281229,.539878,.522249,.622503,-.282902,.53162,.561754,.652382,-.282815,.518119,.601544,.681847,-.281247,.502187,.641574,.712285,-.277986,.484824,.682633,.740094,-.273017,.463483,.723426,.768478,-.266692,.441299,.763747,.794556,-.258358,.415238,.805565,.819408,-.248807,.386912,.847254,.843411,-.236214,.356165,.891091,.862397,-.219794,.320562,.936174,.883113,-.201768,.285322,.982562,.90023,-.181672,.249713,1.02862,.915192,-.159279,.214546,1.07163,.928458,-.134725,.180285,1.10995,.94069,-.10913,.147119,1.14354,.953409,-.0821315,.112492,1.17372,.969537,-.0542677,.0752014,1.20043,.985612,-.0259096,.0370361,1.22528,.999835,.00298198,-.00151801,1.24959,.10097,-602574e-11,.300277,202619e-11,.101577,-152164e-9,.302077,511662e-10,.101572,-608889e-9,.302066,204751e-9,.101566,-.00136997,.302047,460753e-9,.101592,-.00243557,.302114,819497e-9,.101608,-.0038053,.30214,.00128154,.101627,-.00547906,.30216,.0018483,.101669,-.00745647,.302224,.00252223,.101732,-.00973615,.302318,.00330716,.101844,-.0123097,.302513,.00421061,.102025,-.0151681,.30285,.00524481,.102224,-.0183334,.303166,.0064154,.102515,-.0217819,.303654,.00774063,.102886,-.0255067,.304243,.0092398,.103395,-.029514,.305089,.0109339,.104109,-.0337912,.306301,.0128561,.105074,-.0383565,.30798,.0150338,.10654,-.0432132,.310726,.0175228,.108478,-.0484244,.314351,.0203648,.111015,-.0539339,.319032,.0236325,.114682,-.0598885,.32605,.0274188,.11911,-.0663375,.334109,.0317905,.124736,-.0733011,.344013,.0368502,.131479,-.0807744,.355358,.0427104,.139283,-.0888204,.367614,.0494788,.148054,-.0973394,.380072,.0572367,.159037,-.10665,.395678,.0662704,.169794,-.116221,.40795,.0763192,.18314,-.126632,.423546,.087956,.197515,-.137383,.438213,.101042,.213514,-.148641,.453248,.115827,.23065,-.160117,.46688,.132283,.249148,-.171807,.479962,.150644,.270219,-.183695,.494618,.171073,.292338,-.195574,.506937,.193378,.314999,-.207205,.516463,.217585,.340991,-.218955,.528123,.24428,.367982,-.229917,.537025,.272784,.39432,-.239737,.541627,.302742,.423364,-.249048,.546466,.335112,.453751,-.257329,.549466,.369032,.48416,-.264623,.549503,.404577,.515262,-.270411,.547008,.441337,.547036,-.274581,.542249,.479162,.576614,-.277266,.533015,.517904,.611143,-.279144,.525512,.558508,.640989,-.279001,.51154,.598995,.671182,-.277324,.495641,.639935,.700848,-.273908,.477526,.681017,.729862,-.269063,.457955,.722764,.758273,-.262282,.434846,.764349,.784121,-.254281,.409203,.806206,.809798,-.24505,.382694,.848617,.834953,-.233861,.354034,.892445,.856817,-.221308,.321764,.936263,.877609,-.205996,.288118,.982401,.897489,-.186702,.253277,1.02975,.913792,-.164618,.217963,1.07488,.92785,-.140023,.183221,1.11487,.940378,-.11328,.149385,1.14947,.95273,-.0853958,.114152,1.1807,.969059,-.0568698,.0769845,1.20912,.985574,-.0276502,.0381186,1.23498,.999943,.00239052,-.00126861,1.25987,.0852715,-560067e-11,.279021,171162e-11,.0854143,-140871e-9,.279483,430516e-10,.0854191,-563385e-9,.2795,172184e-9,.0854188,-.00126753,.279493,387464e-9,.0854229,-.00225337,.279501,68918e-8,.0854443,-.00352086,.279549,.00107803,.0854697,-.00506962,.279591,.00155536,.0855093,-.00689873,.279652,.00212354,.0855724,-.00900821,.279752,.00278703,.0856991,-.0113799,.280011,.0035551,.085855,-.0140314,.280297,.00443449,.0860682,-.016963,.280682,.00543636,.086344,-.0201438,.281159,.0065788,.0867426,-.0235999,.281886,.00787977,.087239,-.0273069,.282745,.0093606,.0879815,-.031269,.284139,.011056,.0891258,-.035531,.28647,.0130065,.0906909,-.0400947,.289708,.0152495,.0927624,-.0449638,.293904,.0178454,.0958376,-.0502427,.300471,.0208915,.0995827,-.0559514,.30806,.0244247,.104526,-.0622152,.317874,.0285721,.110532,-.0690046,.329332,.0334227,.117385,-.0763068,.341217,.0390466,.12522,-.084184,.353968,.0455786,.134037,-.0925248,.366797,.0530773,.144014,-.101487,.380209,.0617424,.156013,-.111273,.395956,.071777,.168872,-.121431,.41053,.0830905,.183089,-.132105,.425073,.0959341,.198763,-.143286,.439833,.110448,.216159,-.154841,.454507,.126769,.234859,-.166588,.468368,.14495,.255879,-.178626,.482846,.165233,.27677,-.190218,.493489,.187217,.301184,-.202227,.506549,.211659,.325852,-.213764,.5158,.237922,.352824,-.22487,.525442,.26632,.380882,-.235246,.532487,.296691,.410137,-.244847,.537703,.329179,.439787,-.253122,.540361,.363135,.472291,-.260517,.542734,.399222,.501856,-.266519,.538826,.436352,.534816,-.270905,.535152,.474505,.565069,-.273826,.525979,.513988,.597154,-.275333,.516394,.554852,.630473,-.275314,.506206,.596592,.660574,-.273323,.489769,.638117,.692015,-.270008,.472578,.680457,.720647,-.265001,.452134,.723008,.750528,-.258311,.430344,.765954,.777568,-.250046,.405624,.809012,.80387,-.240114,.378339,.852425,.828439,-.228737,.349877,.895346,.851472,-.216632,.318968,.940695,.873906,-.202782,.287489,.987235,.89467,-.187059,.254394,1.03348,.912281,-.168818,.221294,1.07812,.927358,-.146494,.18675,1.11928,.940385,-.120009,.152322,1.15609,.952672,-.0917183,.117514,1.18875,.968496,-.0620321,.0797405,1.21821,.985236,-.0314945,.0402383,1.24523,.99998,-575153e-9,110644e-9,1.27133,.0702429,-512222e-11,.255273,140947e-11,.0702981,-128826e-9,.255469,354488e-10,.0703691,-515562e-9,.255727,141874e-9,.0703805,-.00116,.255754,31929e-8,.0703961,-.00206224,.255813,567999e-9,.0704102,-.00322223,.255839,88871e-8,.0704298,-.00463928,.255863,.00128272,.0704759,-.00631375,.255953,.00175283,.0705434,-.00824317,.256079,.00230342,.0706693,-.010412,.25636,.0029443,.0708189,-.0128439,.256647,.00368031,.0710364,-.0155177,.257084,.00452614,.0713223,-.0184374,.257637,.00549706,.0717182,-.0216002,.258416,.00661246,.072321,-.0249966,.259699,.00790147,.0731446,-.0286566,.261475,.0093884,.0743352,-.0325888,.264132,.0111186,.0760676,-.036843,.26815,.013145,.078454,-.0414292,.273636,.0155251,.0818618,-.0464634,.281653,.0183525,.0857382,-.0519478,.289992,.0216642,.0908131,-.0579836,.30066,.0255956,.0967512,-.0645124,.312204,.0301954,.103717,-.0716505,.325001,.0356017,.111596,-.0793232,.338129,.041896,.120933,-.087645,.352853,.0492447,.130787,-.096492,.366192,.0576749,.142311,-.105973,.380864,.0673969,.155344,-.116182,.396575,.0785899,.169535,-.126815,.411443,.0912377,.185173,-.138015,.426256,.105607,.201755,-.149325,.439607,.121551,.221334,-.161207,.455467,.139608,.241461,-.173162,.469096,.159591,.26294,-.18504,.481014,.18156,.286776,-.196881,.493291,.205781,.311596,-.208311,.503556,.231819,.338667,-.219671,.513268,.260274,.366021,-.230451,.519414,.290862,.395875,-.240131,.526766,.323196,.425564,-.248566,.52905,.357071,.457094,-.256195,.530796,.393262,.488286,-.262331,.528703,.430797,.522291,-.267141,.52727,.470231,.554172,-.270411,.519848,.510477,.586427,-.271986,.510307,.551594,.619638,-.27192,.499158,.593849,.650656,-.269817,.483852,.636314,.68284,-.266267,.467515,.679679,.714356,-.26113,.44931,.723884,.742717,-.254067,.425789,.767245,.770894,-.245652,.401144,.811819,.797358,-.235554,.374224,.856315,.823377,-.223896,.346167,.901077,.847456,-.210865,.316056,.946502,.870697,-.196574,.284503,.993711,.891068,-.180814,.251628,1.04134,.909267,-.163314,.219065,1.08609,.925653,-.143304,.186446,1.12702,.940017,-.121322,.153416,1.16371,.952398,-.0973872,.120334,1.19712,.967568,-.0698785,.08352,1.22791,.984772,-.0390031,.0439209,1.25672,1.00026,-.0070087,.00315668,1.28428,.0556653,-459654e-11,.227325,112556e-11,.0565238,-116382e-9,.230826,284985e-10,.0565717,-465666e-9,.231026,114036e-9,.0565859,-.00104773,.231079,256656e-9,.0565761,-.00186255,.231025,45663e-8,.0565913,-.00291002,.231058,714664e-9,.0566108,-.00418998,.231085,.00103224,.0566532,-.00570206,.231169,.00141202,.0567473,-.00743666,.231417,.00186018,.0568567,-.00940298,.231661,.00238264,.0569859,-.0115991,.231895,.00298699,.0572221,-.0140096,.232456,.00368957,.057519,-.0166508,.233096,.00450303,.0579534,-.01951,.234094,.00544945,.0585922,-.0225991,.235629,.00655564,.0595647,-.0259416,.238106,.00785724,.0609109,-.0295661,.241557,.00939127,.0628751,-.0335126,.246652,.0112198,.0656908,-.0378604,.254091,.0134168,.0691347,-.0426543,.262666,.0160374,.0732165,-.0478967,.272029,.0191514,.0782863,-.0536716,.283007,.0228597,.0843973,-.0600683,.295732,.0272829,.0913598,-.0670095,.308779,.032484,.0994407,-.0745516,.322886,.0385886,.108189,-.082712,.336408,.0457133,.118574,-.0914927,.351692,.0539832,.129989,-.100854,.366502,.0635162,.142722,-.110837,.381675,.0744386,.156654,-.121353,.3963,.0868483,.172151,-.132414,.411477,.100963,.188712,-.143809,.42508,.116795,.208093,-.155765,.441328,.134715,.227936,-.167608,.454328,.154396,.249495,-.179579,.467235,.176179,.27362,-.191488,.480248,.200193,.296371,-.202618,.487886,.225775,.324234,-.214133,.499632,.25441,.353049,-.225212,.509532,.285077,.381785,-.234875,.514265,.317047,.414038,-.244205,.521282,.351874,.445251,-.252145,.522931,.388279,.476819,-.258433,.520947,.425825,.509209,-.263411,.517669,.465104,.542759,-.266732,.512841,.505741,.574822,-.268263,.503317,.547611,.609324,-.268489,.493035,.590953,.641772,-.266941,.478816,.63488,.674049,-.263297,.462863,.679072,.705071,-.257618,.442931,.723487,.734709,-.250625,.421299,.768708,.763704,-.24179,.397085,.814375,.791818,-.231115,.370577,.859907,.817439,-.21922,.34232,.906715,.843202,-.205658,.312627,.953943,.866639,-.190563,.280933,1.00185,.888129,-.173978,.248393,1.05105,.907239,-.155485,.216007,1.09704,.923893,-.134782,.183233,1.13857,.938882,-.11249,.150376,1.17539,.952464,-.0890706,.117177,1.20924,.968529,-.0646523,.0813095,1.24055,.984763,-.038606,.0439378,1.27018,1.00053,-.01238,.00598668,1.29873,.0437928,-409594e-11,.204012,879224e-12,.0440166,-103395e-9,.205049,221946e-10,.0440529,-413633e-9,.205225,887981e-10,.0440493,-930594e-9,.2052,199858e-9,.0439884,-.00165352,.204901,355495e-9,.0440716,-.0025849,.205255,556983e-9,.0440968,-.00372222,.205311,805326e-9,.0441359,-.00506478,.205391,.00110333,.0442231,-.00660384,.205638,.00145768,.0443254,-.00835246,.205877,.00187275,.0444832,-.0102992,.20627,.00235938,.0447001,-.0124449,.206796,.0029299,.0450168,-.0147935,.207593,.0036005,.0454816,-.017336,.208819,.00439246,.0462446,-.0201156,.211036,.00533864,.0473694,-.0231568,.214388,.00646984,.0490191,-.0264941,.219357,.00783856,.0512776,-.030184,.226061,.00950182,.0541279,-.0342661,.234094,.0115156,.0578989,-.0388539,.244297,.0139687,.0620835,-.0438735,.254457,.0169015,.0673497,-.04951,.266706,.0204554,.0731759,-.0556263,.278753,.0246606,.0803937,-.0624585,.29309,.0297126,.0879287,-.0697556,.305856,.0355868,.0970669,-.0778795,.321059,.0425768,.106508,-.0863541,.333873,.05056,.11776,-.0955935,.349008,.0598972,.130081,-.105438,.363776,.0706314,.144454,-.115899,.380112,.0828822,.1596,-.126827,.394843,.0967611,.176097,-.138161,.409033,.112381,.194726,-.149904,.424257,.129952,.213944,-.161675,.436945,.149333,.235516,-.173659,.450176,.170892,.260564,-.185963,.466305,.194984,.285183,-.197582,.477328,.220805,.311095,-.208697,.486566,.248694,.338924,-.219519,.494811,.279015,.369757,-.229766,.504065,.311725,.3996,-.238879,.507909,.345844,.430484,-.246802,.509805,.381749,.46413,-.253924,.511436,.420251,.497077,-.259319,.508787,.459957,.530434,-.263297,.50394,.501356,.565725,-.265619,.49804,.544252,.599254,-.265842,.487346,.587856,.631251,-.263978,.472975,.631969,.663972,-.26043,.457135,.677471,.697724,-.255358,.439844,.723744,.727725,-.248308,.417872,.770653,.756417,-.239181,.39273,.817357,.785419,-.22814,.367839,.864221,.81266,-.215681,.339449,.912701,.839391,-.201623,.309279,.962419,.86366,-.185624,.278029,1.0122,.885028,-.16797,.245294,1.06186,.904639,-.148336,.212689,1.10934,.922048,-.12637,.179616,1.15063,.936952,-.102928,.146749,1.18885,.951895,-.0785268,.112733,1.22352,.967198,-.0530153,.0760056,1.25681,.984405,-.02649,.0383183,1.28762,1.00021,70019e-8,-20039e-8,1.31656,.0325964,-355447e-11,.176706,655682e-12,.0329333,-899174e-10,.178527,165869e-10,.0329181,-359637e-9,.178453,663498e-10,.0329085,-808991e-9,.178383,149332e-9,.0329181,-.00143826,.178394,265873e-9,.0329425,-.00224678,.178517,416597e-9,.0329511,-.00323575,.17849,603299e-9,.033011,-.00439875,.178695,829422e-9,.0330733,-.00574059,.178843,.00109908,.0331857,-.00725896,.179176,.00141933,.0333445,-.00895289,.179618,.0017999,.0335674,-.0108219,.180238,.00225316,.033939,-.0128687,.181417,.00279765,.0345239,-.015114,.183395,.0034564,.0354458,-.017596,.186616,.00425864,.0368313,-.0203524,.191547,.00524936,.0386115,-.0234105,.197508,.00647033,.0410303,-.0268509,.205395,.00798121,.0442245,-.0307481,.215365,.0098557,.0478659,-.0350863,.225595,.0121417,.0522416,-.0399506,.236946,.0149385,.0574513,-.045357,.249442,.0183189,.0631208,-.0512863,.261222,.0223644,.0701124,-.0579273,.275418,.0272418,.0777331,-.0650652,.288989,.0329458,.0862709,-.0728813,.302546,.0396819,.096103,-.081363,.317164,.04757,.106976,-.0904463,.331733,.0567012,.119175,-.100105,.34661,.067202,.132919,-.110375,.362249,.0792588,.147727,-.121115,.376978,.0928672,.163618,-.132299,.390681,.108228,.182234,-.143887,.406571,.125502,.201809,-.155827,.42042,.144836,.225041,-.168357,.438411,.166706,.247621,-.18004,.450368,.189909,.27097,-.191536,.460083,.215251,.296658,-.203024,.469765,.243164,.325892,-.214056,.481837,.273388,.35406,-.224104,.487474,.305344,.384372,-.233489,.492773,.339741,.41749,-.241874,.498451,.376287,.45013,-.248834,.499632,.414195,.481285,-.254658,.495233,.454077,.519183,-.259367,.496401,.496352,.551544,-.261818,.487686,.538798,.587349,-.262964,.479453,.583626,.621679,-.262128,.467709,.629451,.654991,-.258998,.452123,.67566,.686873,-.254119,.433495,.723248,.719801,-.246946,.413657,.771156,.750355,-.237709,.390366,.81989,.780033,-.226549,.364947,.868601,.809254,-.214186,.337256,.920034,.836576,-.199639,.307395,.971706,.861774,-.183169,.275431,1.02479,.885707,-.165111,.243431,1.07837,.904742,-.144363,.210921,1.12783,.915604,-.121305,.17647,1.17254,.930959,-.0962119,.143106,1.21012,.948404,-.069969,.108112,1.24474,.967012,-.0427586,.0708478,1.27718,.984183,-.0147043,.032335,1.3083,.999577,.0142165,-.00726867,1.3382,.0229227,-299799e-11,.148623,462391e-12,.0232194,-758796e-10,.15054,117033e-10,.0232315,-303636e-9,.15063,468397e-10,.0232354,-683189e-9,.150624,105472e-9,.0232092,-.0012136,.150445,187744e-9,.0232523,-.00189765,.150679,294847e-9,.0232828,-.00273247,.150789,428013e-9,.0233371,-.00371287,.150995,591134e-9,.0234015,-.00484794,.15118,787642e-9,.023514,-.00612877,.151562,.00102547,.023679,-.00756125,.152116,.00131351,.0239559,-.00914651,.153162,.00166594,.0244334,-.010904,.155133,.00210182,.025139,-.0128615,.158035,.00264406,.0262598,-.0150628,.162751,.00332923,.0277875,-.0175532,.168944,.00419773,.0298472,-.0203981,.176835,.00530034,.0325444,-.023655,.186686,.00669777,.0355581,-.0272982,.196248,.00842661,.0392841,-.0314457,.207352,.0105854,.0436815,-.0361157,.219279,.0132458,.0485272,-.0412932,.230728,.0164736,.0541574,-.0470337,.242994,.0203715,.0609479,-.0535002,.257042,.0250953,.0685228,-.0605409,.27102,.0306856,.0768042,-.0680553,.28406,.037193,.0864844,-.0765011,.299186,.0449795,.0969415,-.0852674,.3132,.0538316,.108478,-.0947333,.327138,.0641149,.121705,-.10481,.342345,.0759185,.136743,-.115474,.358472,.0894116,.152986,-.126536,.374067,.104562,.170397,-.138061,.388267,.121632,.191392,-.150203,.406467,.140996,.211566,-.161751,.418641,.161696,.233567,-.173407,.430418,.184557,.257769,-.185397,.44277,.210092,.28531,-.197048,.457191,.237827,.311726,-.20784,.464712,.267253,.340537,-.218345,.472539,.299332,.372921,-.228306,.482331,.333988,.402924,-.236665,.484378,.369722,.434475,-.244097,.484717,.407836,.469736,-.250547,.487093,.448465,.505045,-.25511,.485575,.490263,.540262,-.258444,.481225,.534495,.576347,-.259903,.473481,.579451,.608656,-.259572,.4603,.625604,.646679,-.257908,.450341,.674511,.679902,-.253663,.431561,.723269,.714159,-.247419,.412684,.773263,.745345,-.239122,.389388,.824182,.778248,-.228837,.365361,.876634,.807208,-.216197,.337667,.92945,.835019,-.201772,.307197,.985261,.860261,-.185291,.274205,1.04299,.877601,-.165809,.240178,1.09816,.898211,-.143897,.207571,1.14694,.915789,-.119513,.174904,1.19008,.931831,-.0932919,.141423,1.2297,.949244,-.0656528,.105603,1.26553,.967527,-.0370262,.0679551,1.29986,.984139,-.00730117,.0283133,1.33252,.999713,.0234648,-.0121785,1.36397,.0152135,-245447e-11,.122795,304092e-12,.0151652,-615778e-10,.122399,76292e-10,.0151181,-245948e-9,.122023,304802e-10,.0151203,-553394e-9,.12203,686634e-10,.015125,-983841e-9,.122037,122463e-9,.0151427,-.00153774,.12214,192706e-9,.0151708,-.0022103,.122237,281219e-9,.0152115,-.00300741,.12238,390804e-9,.0152877,-.00392494,.1227,526317e-9,.015412,-.00496597,.123244,69443e-8,.0156201,-.00613314,.124228,90547e-8,.0159658,-.00744113,.125945,.0011732,.0165674,-.00892546,.129098,.00151888,.017487,-.010627,.133865,.00197007,.018839,-.0126043,.140682,.0025637,.020554,-.0148814,.148534,.00333637,.0226727,-.0175123,.157381,.00433738,.0251879,-.0205266,.166685,.00561664,.0283635,-.0240319,.177796,.00725563,.0318694,-.0279432,.188251,.00928811,.0361044,-.0324313,.200038,.011835,.0406656,-.0373527,.210685,.0149146,.0463846,-.0430132,.224182,.0187254,.0525696,-.0491013,.23634,.0232283,.0598083,-.0559175,.250013,.0286521,.0679437,-.0633657,.263981,.0350634,.0771181,-.0714602,.278072,.0425882,.0881273,-.0803502,.29511,.0514487,.0996628,-.0896903,.309976,.0615766,.112702,-.099644,.325611,.0732139,.126488,-.109829,.339321,.0862324,.142625,-.120859,.35574,.101275,.15953,-.131956,.369845,.117892,.176991,-.143145,.38146,.136205,.199715,-.155292,.40052,.157252,.220787,-.167066,.412055,.179966,.243697,-.178396,.423133,.204418,.272106,-.190433,.439524,.232141,.297637,-.201265,.447041,.261109,.325273,-.211834,.454488,.292627,.357219,-.221889,.465004,.326669,.387362,-.230729,.468527,.362426,.423131,-.23924,.475836,.401533,.45543,-.246067,.475017,.441902,.493393,-.251557,.478017,.484239,.526253,-.255571,.4709,.528586,.560554,-.257752,.463167,.574346,.599306,-.258076,.456452,.621655,.634541,-.256471,.443725,.670492,.668907,-.253283,.428719,.721943,.705619,-.247562,.411348,.772477,.739034,-.240626,.388939,.8264,.771408,-.231493,.36425,.881702,.803312,-.220125,.337321,.9385,.828457,-.206645,.305364,.997437,.854819,-.190664,.273715,1.05693,.878666,-.171429,.242218,1.11251,.898404,-.149235,.209556,1.16398,.917416,-.12435,.176863,1.21014,.933133,-.0972703,.142775,1.25178,.95066,-.0683607,.106735,1.29028,.968589,-.0378724,.0681609,1.32703,.984776,-.00605712,.0273966,1.36158,.99994,.0263276,-.0138124,1.3943,.00867437,-186005e-11,.0928979,173682e-12,.00864003,-466389e-10,.0925237,435505e-11,.00864593,-186594e-9,.0925806,174322e-10,.00864095,-419639e-9,.0924903,392862e-10,.00863851,-746272e-9,.0924589,702598e-10,.00868531,-.00116456,.0929,111188e-9,.00869667,-.00167711,.0928529,163867e-9,.00874332,-.00228051,.0930914,23104e-8,.00882709,-.00297864,.0935679,31741e-8,.00898874,-.00377557,.0946165,430186e-9,.00929346,-.00469247,.0967406,580383e-9,.00978271,-.00575491,.100084,783529e-9,.0105746,-.00701514,.105447,.00106304,.0116949,-.00851797,.112494,.00144685,.0130419,-.0102757,.119876,.00196439,.0148375,-.012381,.129034,.00266433,.0168725,-.01482,.137812,.00358364,.0193689,-.0176563,.147696,.00478132,.0222691,-.0209211,.157795,.00631721,.0256891,-.0246655,.168431,.00826346,.0294686,-.0288597,.178587,.0106714,.0340412,-.0336441,.190251,.0136629,.0393918,-.039033,.202999,.0173272,.0453947,-.0450087,.215655,.0217448,.0521936,-.0515461,.228686,.0269941,.0600279,-.058817,.242838,.033272,.0692398,-.0667228,.258145,.0406457,.0793832,-.0752401,.273565,.0492239,.0902297,-.0841851,.287735,.0590105,.102014,-.0936479,.301161,.0702021,.116054,-.103967,.317438,.0832001,.13191,-.114622,.334166,.0977951,.148239,-.125452,.348192,.113985,.165809,-.136453,.361094,.131928,.184616,-.147648,.373534,.151811,.207491,-.159607,.39101,.174476,.230106,-.171119,.402504,.198798,.257036,-.182906,.418032,.225796,.281172,-.193605,.425468,.254027,.312034,-.204771,.440379,.285713,.340402,-.214988,.445406,.319196,.370231,-.224711,.44968,.35537,.407105,-.233516,.460747,.393838,.439037,-.240801,.460624,.433747,.47781,-.24762,.465957,.477234,.510655,-.251823,.460054,.52044,.550584,-.255552,.459172,.567853,.585872,-.257036,.450311,.615943,.620466,-.257535,.437763,.667693,.660496,-.255248,.426639,.718988,.695578,-.251141,.409185,.772503,.732176,-.244718,.39015,.827023,.760782,-.236782,.362594,.885651,.79422,-.225923,.33711,.943756,.824521,-.213855,.308272,1.00874,.854964,-.197723,.278529,1.06764,.878065,-.179209,.246208,1.12836,.899834,-.157569,.21329,1.18318,.918815,-.133206,.181038,1.23161,.934934,-.106545,.146993,1.27644,.952115,-.0780574,.111175,1.31842,.96906,-.0478279,.0728553,1.35839,.985178,-.0160014,.032579,1.39697,1.00039,.0173126,-.0095256,1.43312,.00384146,-124311e-11,.0613583,778271e-13,.00390023,-314043e-10,.0622919,196626e-11,.00389971,-125622e-9,.0622632,787379e-11,.00389491,-282352e-9,.0620659,1778e-8,.00391618,-502512e-9,.0624687,320918e-10,.00392662,-784458e-9,.0625113,515573e-10,.00396053,-.00112907,.0628175,778668e-10,.00401911,-.00153821,.0633286,113811e-9,.00414994,-.0020208,.0646443,16445e-8,.00441223,-.00260007,.0673886,237734e-9,.00484427,-.0033097,.0716528,345929e-9,.00549109,-.00418966,.0774998,505987e-9,.00636293,-.00527331,.0844758,739208e-9,.00746566,-.00660428,.0921325,.00107347,.00876625,-.00818826,.0997067,.00153691,.0103125,-.0100811,.107433,.00217153,.0123309,-.0123643,.117088,.00303427,.0146274,-.0150007,.126438,.00416018,.0172295,-.0180531,.135672,.00561513,.0204248,-.0215962,.146244,.007478,.0241597,-.0256234,.157481,.00981046,.0284693,-.0302209,.169125,.0127148,.033445,-.0353333,.181659,.0162453,.0391251,-.0410845,.1944,.0205417,.0454721,-.0473451,.207082,.0256333,.0530983,-.0542858,.221656,.0317036,.0615356,-.0618384,.236036,.0388319,.0703363,-.0697631,.248398,.046974,.0810391,-.0784757,.263611,.0565246,.0920144,-.0873488,.275857,.0671724,.105584,-.0973652,.292555,.0798105,.119506,-.107271,.306333,.0935945,.134434,-.117608,.318888,.109106,.153399,-.128938,.337552,.127074,.171258,-.139944,.349955,.14643,.191059,-.151288,.361545,.168,.215069,-.163018,.378421,.192082,.237838,-.174226,.38879,.217838,.266965,-.186063,.405857,.246931,.292827,-.196909,.414146,.277505,.324352,-.207473,.426955,.310711,.354427,-.217713,.433429,.346794,.389854,-.227183,.443966,.385237,.420749,-.235131,.44471,.424955,.459597,-.242786,.451729,.468446,.495316,-.248767,.45072,.513422,.534903,-.253351,.450924,.560618,.572369,-.256277,.445266,.609677,.612383,-.2576,.438798,.660995,.644037,-.256931,.421693,.713807,.686749,-.254036,.4109,.767616,.719814,-.249785,.390151,.82533,.754719,-.244283,.367847,.888311,.792022,-.235076,.345013,.948177,.822404,-.225061,.316193,1.01661,.853084,-.211113,.287013,1.08075,.879871,-.19449,.255424,1.14501,.901655,-.174023,.222879,1.20203,.919957,-.1509,.18989,1.25698,.938412,-.124923,.15606,1.30588,.953471,-.0968139,.120512,1.3529,.970451,-.066734,.0828515,1.3986,.985522,-.034734,.0424458,1.44148,1.00099,-.00102222,678929e-9,1.48398,965494e-9,-627338e-12,.0306409,197672e-13,99168e-8,-158573e-10,.0314638,499803e-12,991068e-9,-634012e-10,.031363,200682e-11,974567e-9,-14144e-8,.03036,457312e-11,998079e-9,-252812e-9,.031496,860131e-11,.00102243,-396506e-9,.0319955,148288e-10,.00107877,-577593e-9,.0331376,249141e-10,.00121622,-816816e-9,.0359396,423011e-10,.0014455,-.00113761,.0399652,724613e-10,.00178791,-.00156959,.0450556,123929e-9,.00225668,-.00214064,.0508025,208531e-9,.00285627,-.00287655,.0568443,341969e-9,.0035991,-.00380271,.0630892,544158e-9,.00455524,-.00496264,.0702204,842423e-9,.00569143,-.0063793,.0773426,.00126704,.00716928,-.00813531,.0860839,.00186642,.00885307,-.0101946,.0944079,.00267014,.0109316,-.0126386,.103951,.00374033,.0133704,-.0154876,.113786,.0051304,.0161525,-.0187317,.123477,.00688858,.0194267,-.0224652,.133986,.00910557,.0230967,-.0265976,.143979,.0118074,.0273627,-.0312848,.154645,.0151266,.0323898,-.0365949,.166765,.0191791,.0379225,-.0422914,.177932,.0239236,.0447501,-.0487469,.19167,.0296568,.0519391,-.0556398,.203224,.0362924,.0599464,-.0631646,.215652,.0440585,.0702427,-.0714308,.232089,.0531619,.0806902,-.0800605,.245258,.0634564,.0923194,-.0892815,.258609,.0752481,.106938,-.09931,.276654,.0888914,.121238,-.109575,.289847,.104055,.138817,-.120461,.307566,.121266,.15595,-.131209,.320117,.139944,.178418,-.143049,.339677,.161591,.197875,-.154074,.349886,.184303,.224368,-.166307,.369352,.210669,.252213,-.178051,.386242,.238895,.277321,-.189335,.395294,.269182,.310332,-.200683,.412148,.302508,.338809,-.210856,.418266,.337264,.372678,-.220655,.428723,.374881,.405632,-.230053,.433887,.415656,.442293,-.237993,.439911,.457982,.477256,-.244897,.440175,.502831,.515592,-.250657,.441079,.550277,.550969,-.255459,.435219,.601102,.592883,-.257696,.432882,.651785,.629092,-.259894,.421054,.708961,.672033,-.258592,.41177,.763806,.709147,-.256525,.395267,.824249,.745367,-.254677,.375013,.8951,.784715,-.247892,.353906,.959317,.818107,-.240162,.327801,1.03153,.847895,-.229741,.298821,1.10601,.879603,-.213084,.269115,1.164,.902605,-.195242,.236606,1.22854,.922788,-.174505,.203442,1.29017,.944831,-.150169,.169594,1.34157,.959656,-.124099,.135909,1.3956,.972399,-.0960626,.0990563,1.45128,.986549,-.0657097,.0602348,1.50312,1.00013,-.0333558,.0186694,1.55364,619747e-11,-1e-7,.00778326,796756e-16,237499e-13,-999999e-13,282592e-10,114596e-15,100292e-11,-166369e-11,250354e-9,677492e-14,350752e-11,-637769e-11,357289e-9,631655e-13,826445e-11,-174689e-10,516179e-9,31851e-11,242481e-10,-450868e-10,.0010223,130577e-11,455631e-10,-89044e-9,.00144302,374587e-11,971222e-10,-178311e-9,.00241912,102584e-10,171403e-9,-313976e-9,.00354938,236481e-10,292747e-9,-520026e-9,.00513765,496014e-10,789827e-9,-.00118187,.0238621,139056e-9,.00114093,-.00171827,.0286691,244093e-9,.00176119,-.00249667,.0368565,420623e-9,.0022233,-.00333742,.0400469,65673e-8,.00343382,-.00481976,.0535751,.00109323,.00427602,-.00600755,.057099,.00155268,.00461435,-.00737637,.0551084,.00215031,.00695698,-.00971401,.0715767,.00316529,.00867619,-.0120943,.0793314,.00436995,.0106694,-.0148202,.0869391,.0058959,.0140351,-.0183501,.101572,.00798757,.0168939,-.022006,.11018,.0104233,.020197,-.0261568,.119041,.0134167,.0254702,-.0312778,.135404,.0173009,.0298384,-.0362469,.1437,.0215428,.035159,-.042237,.15512,.0268882,.0427685,-.0488711,.17128,.033235,.0494848,-.0557997,.181813,.0404443,.0592394,-.0635578,.198745,.0490043,.0681463,-.071838,.210497,.0588239,.0804753,-.0809297,.228864,.0702835,.0942205,-.0906488,.247008,.0834012,.106777,-.100216,.258812,.0975952,.124471,-.110827,.278617,.114162,.138389,-.121193,.287049,.131983,.159543,-.13253,.307151,.152541,.176432,-.143611,.31564,.174673,.201723,-.15548,.33538,.199842,.229721,-.167166,.355256,.227097,.250206,-.178238,.360047,.256014,.282118,-.189905,.378761,.28855,.312821,-.201033,.39181,.323348,.341482,-.211584,.397716,.360564,.377368,-.221314,.410141,.400004,.418229,-.230474,.423485,.442371,.444881,-.239443,.418874,.488796,.488899,-.245987,.427545,.535012,.520317,-.253948,.422147,.589678,.568566,-.256616,.42719,.637683,.599607,-.26376,.415114,.703363,.64222,-.268687,.408715,.771363,.685698,-.2694,.399722,.83574,.732327,-.266642,.388651,.897764,.769873,-.267712,.369198,.983312,.806733,-.263479,.346802,1.06222,.843466,-.254575,.321368,1.13477,.873008,-.242749,.29211,1.20712,.908438,-.22725,.262143,1.27465,.936321,-.207621,.228876,1.33203,.950353,-.187932,.19484,1.40439,.96442,-.165154,.163178,1.4732,.979856,-.139302,.127531,1.53574,.982561,-.11134,.0903457,1.59982,.996389,-.0808124,.0489007,1.6577],n=[1,0,0,0,1,791421e-36,0,0,1,104392e-29,0,0,1,349405e-26,0,0,1,109923e-23,0,0,1,947414e-22,0,0,1,359627e-20,0,0,1,772053e-19,0,0,1,108799e-17,0,0,1,110655e-16,0,0,1,865818e-16,0,0,.999998,545037e-15,0,0,.999994,285095e-14,0,0,.999989,126931e-13,0,0,.999973,489938e-13,0,0,.999947,166347e-12,0,0,.999894,502694e-12,0,0,.999798,136532e-11,0,0,.999617,335898e-11,0,0,.999234,752126e-11,0,0,.998258,152586e-10,0,0,.99504,266207e-10,0,0,.980816,236802e-10,0,0,.967553,207684e-11,0,0,.966877,403733e-11,0,0,.965752,741174e-11,0,0,.96382,127746e-10,0,0,.960306,202792e-10,0,0,.953619,280232e-10,0,0,.941103,278816e-10,0,0,.926619,160221e-10,0,0,.920983,235164e-10,0,0,.912293,311924e-10,0,.0158731,.899277,348118e-10,0,.0476191,.880884,26041e-9,0,.0793651,.870399,338726e-10,0,.111111,.856138,392906e-10,0,.142857,.837436,372874e-10,0,.174603,.820973,392558e-10,0,.206349,.803583,434658e-10,0,.238095,.782168,40256e-9,0,.269841,.764107,448159e-10,0,.301587,.743092,457627e-10,0,.333333,.721626,455314e-10,0,.365079,.700375,477335e-10,0,.396825,.677334,461072e-10,0,.428571,.655702,484393e-10,0,.460317,.632059,464583e-10,0,.492064,.610125,483923e-10,0,.52381,.58653,464342e-10,0,.555556,.564508,477033e-10,0,.587302,.541405,459263e-10,0,.619048,.519556,46412e-9,0,.650794,.497292,448913e-10,0,.68254,.475898,445789e-10,0,.714286,.454722,433496e-10,0,.746032,.434042,423054e-10,0,.777778,.414126,413737e-10,0,.809524,.394387,397265e-10,0,.84127,.375841,390709e-10,0,.873016,.357219,369938e-10,0,.904762,.340084,365618e-10,0,.936508,.322714,342533e-10,0,.968254,.306974,339596e-10,0,1,1,101524e-23,0,0,1,10292e-22,0,0,1,130908e-23,0,0,1,473331e-23,0,0,1,625319e-22,0,0,1,107932e-20,0,0,1,163779e-19,0,0,1,203198e-18,0,0,1,204717e-17,0,0,.999999,168995e-16,0,0,.999998,115855e-15,0,0,.999996,66947e-14,0,0,.999991,330863e-14,0,0,.999983,141737e-13,0,0,.999968,532626e-13,0,0,.99994,177431e-12,0,0,.999891,528835e-12,0,0,.999797,142169e-11,0,0,.999617,347057e-11,0,0,.999227,77231e-10,0,0,.998239,155753e-10,0,0,.994937,268495e-10,0,0,.980225,213742e-10,0,0,.967549,21631e-10,0,0,.966865,417989e-11,0,0,.965739,763341e-11,0,0,.963794,130892e-10,0,0,.960244,206456e-10,0,0,.953495,282016e-10,0,148105e-9,.940876,271581e-10,0,.002454,.926569,164159e-10,0,.00867491,.920905,239521e-10,0,.01956,.912169,315127e-10,0,.035433,.899095,346626e-10,0,.056294,.882209,290223e-10,0,.0818191,.870272,342992e-10,0,.111259,.855977,394164e-10,0,.142857,.837431,372343e-10,0,.174603,.820826,396691e-10,0,.206349,.803408,435395e-10,0,.238095,.782838,419579e-10,0,.269841,.763941,450953e-10,0,.301587,.742904,455847e-10,0,.333333,.721463,458833e-10,0,.365079,.700197,477159e-10,0,.396825,.677501,470641e-10,0,.428571,.655527,484732e-10,0,.460317,.6324,476834e-10,0,.492064,.609964,484213e-10,0,.52381,.586839,475541e-10,0,.555556,.564353,476951e-10,0,.587302,.541589,467611e-10,0,.619048,.519413,463493e-10,0,.650794,.497337,453994e-10,0,.68254,.475797,445308e-10,0,.714286,.454659,435787e-10,0,.746032,.434065,424839e-10,0,.777778,.414018,41436e-9,0,.809524,.39455,401902e-10,0,.84127,.375742,390813e-10,0,.873016,.357501,377116e-10,0,.904762,.339996,36535e-9,0,.936508,.323069,351265e-10,0,.968254,.306897,339112e-10,0,1,1,10396e-19,0,0,1,104326e-20,0,0,1,110153e-20,0,0,1,144668e-20,0,0,1,34528e-19,0,0,1,175958e-19,0,0,1,12627e-17,0,0,1,936074e-18,0,0,1,645742e-17,0,0,.999998,401228e-16,0,0,.999997,222338e-15,0,0,.999995,10967e-13,0,0,.999991,482132e-14,0,0,.999981,189434e-13,0,0,.999967,667716e-13,0,0,.999938,212066e-12,0,0,.999886,60977e-11,0,0,.999792,159504e-11,0,0,.999608,381191e-11,0,0,.999209,833727e-11,0,0,.998179,165288e-10,0,0,.994605,274387e-10,0,0,.979468,167316e-10,0,0,.967529,242877e-11,0,0,.966836,461696e-11,0,0,.96569,830977e-11,0,0,.963706,140427e-10,0,244659e-11,.960063,217353e-10,0,760774e-9,.953113,286606e-10,0,.00367261,.940192,247691e-10,0,.00940263,.927731,195814e-10,0,.018333,.920669,252531e-10,0,.0306825,.911799,324277e-10,0,.0465556,.89857,340982e-10,0,.0659521,.883283,319622e-10,0,.0887677,.86989,35548e-9,0,.114784,.855483,397143e-10,0,.143618,.837987,391665e-10,0,.174606,.820546,411306e-10,0,.206349,.802878,436753e-10,0,.238095,.783402,444e-7,0,.269841,.763439,458726e-10,0,.301587,.742925,467097e-10,0,.333333,.721633,478887e-10,0,.365079,.69985,481251e-10,0,.396825,.67783,491811e-10,0,.428571,.655126,488199e-10,0,.460318,.632697,496025e-10,0,.492064,.609613,48829e-9,0,.52381,.587098,492754e-10,0,.555556,.564119,482625e-10,0,.587302,.541813,482807e-10,0,.619048,.519342,471552e-10,0,.650794,.497514,466765e-10,0,.68254,.475879,455582e-10,0,.714286,.454789,446007e-10,0,.746032,.434217,435382e-10,0,.777778,.414086,421753e-10,0,.809524,.394744,412093e-10,0,.84127,.375782,396634e-10,0,.873016,.357707,386419e-10,0,.904762,.340038,370345e-10,0,.936508,.323284,359725e-10,0,.968254,.306954,3436e-8,0,1,1,599567e-19,0,0,1,600497e-19,0,0,1,614839e-19,0,0,1,686641e-19,0,0,1,972658e-19,0,0,1,221271e-18,0,0,1,833195e-18,0,0,1,403601e-17,0,0,.999999,206001e-16,0,0,.999998,101739e-15,0,0,.999997,470132e-15,0,0,.999993,200436e-14,0,0,.999988,783682e-14,0,0,.999979,280338e-13,0,0,.999962,917033e-13,0,0,.999933,274514e-12,0,0,.999881,753201e-12,0,0,.999783,189826e-11,0,0,.999594,440279e-11,0,0,.999178,93898e-10,0,0,.998073,181265e-10,0,0,.993993,280487e-10,0,0,.979982,149422e-10,0,0,.968145,378481e-11,0,0,.966786,53771e-10,0,0,.965611,947508e-11,0,388934e-10,.963557,156616e-10,0,9693e-7,.959752,235144e-10,0,.00370329,.952461,291568e-10,0,.00868428,.940193,240102e-10,0,.0161889,.929042,231235e-10,0,.0263948,.920266,273968e-10,0,.0394088,.911178,337915e-10,0,.0552818,.897873,333629e-10,0,.0740138,.884053,351405e-10,0,.0955539,.869455,378034e-10,0,.119795,.854655,399378e-10,0,.14656,.838347,419108e-10,0,.175573,.820693,440831e-10,0,.206388,.802277,445599e-10,0,.238095,.783634,472691e-10,0,.269841,.763159,476984e-10,0,.301587,.742914,491487e-10,0,.333333,.721662,502312e-10,0,.365079,.699668,502817e-10,0,.396825,.677839,51406e-9,0,.428571,.655091,511095e-10,0,.460317,.632665,516067e-10,0,.492064,.609734,512255e-10,0,.52381,.587043,510263e-10,0,.555556,.564298,50565e-9,0,.587302,.541769,497951e-10,0,.619048,.519529,492698e-10,0,.650794,.497574,482066e-10,0,.68254,.476028,473689e-10,0,.714286,.454961,461941e-10,0,.746032,.434341,450618e-10,0,.777778,.414364,438355e-10,0,.809524,.394832,424196e-10,0,.84127,.376109,412563e-10,0,.873016,.35779,396226e-10,0,.904762,.340379,384886e-10,0,.936508,.323385,368214e-10,0,.968254,.307295,356636e-10,0,1,1,106465e-17,0,0,1,106555e-17,0,0,1,107966e-17,0,0,1,114601e-17,0,0,1,137123e-17,0,0,1,21243e-16,0,0,.999999,489653e-17,0,0,.999999,160283e-16,0,0,.999998,62269e-15,0,0,.999997,251859e-15,0,0,.999996,996192e-15,0,0,.999992,374531e-14,0,0,.999986,132022e-13,0,0,.999975,433315e-13,0,0,.999959,131956e-12,0,0,.999927,372249e-12,0,0,.999871,972461e-12,0,0,.999771,235343e-11,0,0,.999572,52768e-10,0,0,.999133,109237e-10,0,0,.997912,203675e-10,0,0,.993008,279396e-10,0,0,.980645,139604e-10,0,0,.970057,646596e-11,0,0,.966717,65089e-10,0,474145e-10,.965497,111863e-10,0,89544e-8,.96334,179857e-10,0,.0032647,.959294,259045e-10,0,.0075144,.951519,292327e-10,0,.0138734,.940517,249769e-10,0,.0224952,.93014,26803e-9,0,.0334828,.91972,303656e-10,0,.0468973,.910294,353323e-10,0,.0627703,.897701,351002e-10,0,.0811019,.884522,388104e-10,0,.10186,.869489,412932e-10,0,.124985,.853983,415781e-10,0,.150372,.838425,454066e-10,0,.177868,.820656,471624e-10,0,.207245,.801875,475243e-10,0,.238143,.783521,505621e-10,0,.269841,.763131,50721e-9,0,.301587,.74261,523293e-10,0,.333333,.72148,528699e-10,0,.365079,.699696,538677e-10,0,.396825,.677592,539255e-10,0,.428571,.65525,546367e-10,0,.460317,.632452,541348e-10,0,.492064,.609903,544976e-10,0,.52381,.586928,536201e-10,0,.555556,.564464,535185e-10,0,.587302,.541801,524949e-10,0,.619048,.519681,51812e-9,0,.650794,.497685,507687e-10,0,.68254,.47622,496243e-10,0,.714286,.455135,485714e-10,0,.746032,.4346,471847e-10,0,.777778,.414564,459294e-10,0,.809524,.395165,444705e-10,0,.84127,.376333,430772e-10,0,.873016,.358197,416229e-10,0,.904762,.34064,401019e-10,0,.936508,.323816,386623e-10,0,.968254,.307581,370933e-10,0,1,1,991541e-17,0,0,1,992077e-17,0,0,1,100041e-16,0,0,1,10385e-15,0,0,1,115777e-16,0,0,1,150215e-16,0,0,.999999,254738e-16,0,0,.999999,598822e-16,0,0,.999998,179597e-15,0,0,.999997,602367e-15,0,0,.999994,206835e-14,0,0,.99999,694952e-14,0,0,.999984,223363e-13,0,0,.999972,678578e-13,0,0,.999952,193571e-12,0,0,.999919,516594e-12,0,0,.99986,128739e-11,0,0,.999753,299298e-11,0,0,.999546,648258e-11,0,0,.999074,129985e-10,0,0,.997671,232176e-10,0,0,.991504,256701e-10,0,0,.981148,131141e-10,0,0,.971965,869048e-11,0,280182e-10,.966624,808301e-11,0,695475e-9,.965344,135235e-10,0,.00265522,.963048,210592e-10,0,.00622975,.958673,287473e-10,0,.0116234,.950262,281379e-10,0,.018976,.940836,271089e-10,0,.0283844,.930996,30926e-9,0,.0399151,.919848,348359e-10,0,.0536063,.909136,366092e-10,0,.0694793,.897554,384162e-10,0,.0875342,.884691,430971e-10,0,.107749,.869414,447803e-10,0,.130087,.853462,452858e-10,0,.154481,.838187,495769e-10,0,.180833,.820381,502709e-10,0,.209005,.801844,522713e-10,0,.238791,.783061,541505e-10,0,.269869,.763205,553712e-10,0,.301587,.742362,564909e-10,0,.333333,.721393,572646e-10,0,.365079,.699676,581012e-10,0,.396825,.677395,58096e-9,0,.428571,.655208,585766e-10,0,.460317,.632451,583602e-10,0,.492064,.609839,580234e-10,0,.52381,.587093,577161e-10,0,.555556,.564467,568447e-10,0,.587302,.542043,563166e-10,0,.619048,.519826,55156e-9,0,.650794,.497952,541682e-10,0,.68254,.476477,528971e-10,0,.714286,.455412,514952e-10,0,.746032,.434926,502222e-10,0,.777778,.4149,485779e-10,0,.809524,.395552,472242e-10,0,.84127,.376712,454891e-10,0,.873016,.358622,440924e-10,0,.904762,.341048,422984e-10,0,.936508,.324262,408582e-10,0,.968254,.308013,390839e-10,0,1,1,613913e-16,0,0,1,614145e-16,0,0,1,617708e-16,0,0,1,633717e-16,0,0,1,681648e-16,0,0,1,808291e-16,0,0,1,114608e-15,0,0,.999998,210507e-15,0,0,.999997,499595e-15,0,0,.999995,139897e-14,0,0,.999994,419818e-14,0,0,.999988,127042e-13,0,0,.999979,375153e-13,0,0,.999965,106206e-12,0,0,.999945,285381e-12,0,0,.999908,723611e-12,0,0,.999846,17255e-10,0,0,.999733,386104e-11,0,0,.999511,808493e-11,0,0,.998993,156884e-10,0,0,.997326,265538e-10,0,0,.989706,206466e-10,0,0,.981713,130756e-10,0,70005e-10,.973636,106473e-10,0,464797e-9,.966509,10194e-9,0,.00201743,.965149,165881e-10,0,.00497549,.962669,249147e-10,0,.00953262,.95786,317449e-10,0,.0158211,.949334,281045e-10,0,.0239343,.941041,303263e-10,0,.0339372,.931575,356754e-10,0,.0458738,.920102,397075e-10,0,.059772,.908002,384886e-10,0,.075645,.897269,43027e-9,0,.0934929,.884559,479925e-10,0,.113302,.869161,48246e-9,0,.135045,.853342,509505e-10,0,.158678,.837633,542846e-10,0,.184136,.820252,554139e-10,0,.211325,.801872,581412e-10,0,.240113,.782418,585535e-10,0,.270306,.7631,610923e-10,0,.301594,.742183,613678e-10,0,.333333,.721098,627275e-10,0,.365079,.699512,629413e-10,0,.396825,.677372,636351e-10,0,.428571,.655059,633555e-10,0,.460317,.632567,636513e-10,0,.492064,.609784,628965e-10,0,.52381,.587237,625546e-10,0,.555556,.564525,615825e-10,0,.587302,.542181,605048e-10,0,.619048,.520017,596329e-10,0,.650794,.498204,581516e-10,0,.68254,.476742,569186e-10,0,.714286,.455803,553833e-10,0,.746032,.435251,537807e-10,0,.777778,.415374,522025e-10,0,.809524,.395921,503421e-10,0,.84127,.377253,488211e-10,0,.873016,.359021,468234e-10,0,.904762,.341637,453269e-10,0,.936508,.3247,433014e-10,0,.968254,.308625,418007e-10,0,1,1,286798e-15,0,0,1,286877e-15,0,0,1,288094e-15,0,0,1,293506e-15,0,0,1,309262e-15,0,0,.999999,348593e-15,0,0,.999999,444582e-15,0,0,.999998,688591e-15,0,0,.999996,134391e-14,0,0,.999993,317438e-14,0,0,.999989,835609e-14,0,0,.999983,228677e-13,0,0,.999974,623361e-13,0,0,.999959,165225e-12,0,0,.999936,419983e-12,0,0,.999896,101546e-11,0,0,.99983,232376e-11,0,0,.999709,50156e-10,0,0,.999469,10167e-9,0,0,.998886,190775e-10,0,0,.996819,300511e-10,0,0,.988837,185092e-10,0,168222e-12,.982178,134622e-10,0,259622e-9,.975017,125961e-10,0,.00142595,.967101,13507e-9,0,.00382273,.964905,205003e-10,0,.00764164,.96218,29546e-9,0,.0130121,.956821,343738e-10,0,.0200253,.948829,305063e-10,0,.0287452,.941092,346487e-10,0,.039218,.931883,412061e-10,0,.0514748,.920211,444651e-10,0,.0655351,.907307,431252e-10,0,.0814082,.89684,490382e-10,0,.0990939,.884119,53334e-9,0,.118583,.869148,54114e-9,0,.139856,.853377,578536e-10,0,.162882,.836753,592285e-10,0,.187615,.820063,622787e-10,0,.213991,.801694,645492e-10,0,.241918,.782116,65353e-9,0,.271267,.762673,674344e-10,0,.301847,.742133,682788e-10,0,.333333,.720779,691959e-10,0,.365079,.699386,696817e-10,0,.396826,.67732,699583e-10,0,.428572,.654888,698447e-10,0,.460318,.632499,694063e-10,0,.492064,.609825,691612e-10,0,.52381,.587287,681576e-10,0,.555556,.564743,674138e-10,0,.587302,.542409,661617e-10,0,.619048,.520282,647785e-10,0,.650794,.498506,633836e-10,0,.68254,.477102,615905e-10,0,.714286,.456167,601013e-10,0,.746032,.435728,581457e-10,0,.777778,.415809,564215e-10,0,.809524,.396517,544997e-10,0,.84127,.377737,525061e-10,0,.873016,.359698,506831e-10,0,.904762,.342164,48568e-9,0,.936508,.325417,467826e-10,0,.968254,.309186,446736e-10,0,1,1,109018e-14,0,0,1,10904e-13,0,0,1,109393e-14,0,0,1,11095e-13,0,0,1,1154e-12,0,0,1,126089e-14,0,0,.999999,15059e-13,0,0,.999997,207899e-14,0,0,.999994,348164e-14,0,0,.999993,705728e-14,0,0,.999987,163692e-13,0,0,.999981,406033e-13,0,0,.999969,10245e-11,0,0,.999953,255023e-12,0,0,.999925,61511e-11,0,0,.999881,142218e-11,0,0,.99981,313086e-11,0,0,.99968,653119e-11,0,0,.999418,12832e-9,0,0,.998748,232497e-10,0,0,.996066,329522e-10,0,0,.988379,179613e-10,0,108799e-9,.982567,143715e-10,0,921302e-9,.976097,148096e-10,0,.00280738,.968475,178905e-10,0,.00596622,.964606,253921e-10,0,.0105284,.961564,348623e-10,0,.0165848,.955517,357612e-10,0,.0242,.948381,343493e-10,0,.03342,.941095,405849e-10,0,.0442777,.931923,475394e-10,0,.0567958,.91996,484328e-10,0,.0709879,.907419,502146e-10,0,.086861,.89618,561654e-10,0,.104415,.88337,587612e-10,0,.123643,.869046,618057e-10,0,.144531,.853278,657392e-10,0,.167057,.836091,66303e-9,0,.191188,.819644,704445e-10,0,.216878,.801246,714071e-10,0,.244062,.782031,740093e-10,0,.272649,.762066,74685e-9,0,.302509,.741964,766647e-10,0,.333442,.720554,766328e-10,0,.365079,.699098,777857e-10,0,.396826,.677189,774633e-10,0,.428572,.65484,776235e-10,0,.460318,.632496,770316e-10,0,.492064,.609908,762669e-10,0,.52381,.587312,753972e-10,0,.555556,.564938,739994e-10,0,.587302,.542577,728382e-10,0,.619048,.52062,71112e-9,0,.650794,.498819,694004e-10,0,.68254,.477555,675575e-10,0,.714286,.456568,653449e-10,0,.746032,.436278,636068e-10,0,.777778,.41637,613466e-10,0,.809524,.397144,594177e-10,0,.84127,.378412,570987e-10,0,.873016,.360376,550419e-10,0,.904762,.342906,527422e-10,0,.936508,.326136,506544e-10,0,.968254,.30997,484307e-10,0,1,1,354014e-14,0,0,1,354073e-14,0,0,1,354972e-14,0,0,1,358929e-14,0,0,1,370093e-14,0,0,.999999,396194e-14,0,0,.999998,453352e-14,0,0,.999997,578828e-14,0,0,.999994,863812e-14,0,0,.999991,153622e-13,0,0,.999985,316356e-13,0,0,.999977,712781e-13,0,0,.999964,166725e-12,0,0,.999945,390501e-12,0,0,.999912,895622e-12,0,0,.999866,198428e-11,0,0,.999786,421038e-11,0,0,.999647,850239e-11,0,0,.999356,162059e-10,0,0,.998563,282652e-10,0,0,.994928,336309e-10,0,244244e-10,.987999,178458e-10,0,523891e-9,.982893,159162e-10,0,.00194729,.977044,178056e-10,0,.00451099,.969972,230624e-10,0,.00835132,.964237,313922e-10,0,.013561,.960791,406145e-10,0,.0202056,.954292,372796e-10,0,.0283321,.948052,403199e-10,0,.0379739,.940938,479537e-10,0,.0491551,.931689,545292e-10,0,.0618918,.91987,54038e-9,0,.0761941,.907665,589909e-10,0,.0920672,.895281,642651e-10,0,.109511,.882621,659707e-10,0,.12852,.86873,709973e-10,0,.149085,.853008,742221e-10,0,.171189,.835944,761754e-10,0,.194809,.818949,797052e-10,0,.21991,.800951,812434e-10,0,.246447,.781847,838075e-10,0,.274352,.761649,84501e-9,0,.303535,.74152,860258e-10,0,.333857,.720495,866233e-10,0,.365104,.698742,868326e-10,0,.396826,.677096,87133e-9,0,.428572,.654782,863497e-10,0,.460318,.632335,860206e-10,0,.492064,.610031,849337e-10,0,.52381,.587457,838279e-10,0,.555556,.56513,82309e-9,0,.587302,.542877,803542e-10,0,.619048,.5209,786928e-10,0,.650794,.499291,765171e-10,0,.68254,.477971,744753e-10,0,.714286,.457221,72209e-9,0,.746032,.436803,697448e-10,0,.777778,.417083,675333e-10,0,.809524,.397749,648058e-10,0,.84127,.379177,625759e-10,0,.873016,.361061,598584e-10,0,.904762,.343713,575797e-10,0,.936508,.326894,549999e-10,0,.968254,.310816,527482e-10,0,1,1,10153e-12,0,0,1,101544e-13,0,0,1,101751e-13,0,0,1,102662e-13,0,0,1,10521e-12,0,0,.999999,111049e-13,0,0,.999999,123408e-13,0,0,.999996,14924e-12,0,0,.999992,204471e-13,0,0,.999989,326539e-13,0,0,.99998,603559e-13,0,0,.999971,123936e-12,0,0,.999955,269058e-12,0,0,.999933,593604e-12,0,0,.999901,129633e-11,0,0,.999847,275621e-11,0,0,.999761,564494e-11,0,0,.999607,110485e-10,0,0,.999282,204388e-10,0,0,.99831,341084e-10,0,22038e-11,.993288,294949e-10,0,242388e-9,.987855,192736e-10,0,.0012503,.983167,182383e-10,0,.0032745,.977908,218633e-10,0,.00646321,.971194,290662e-10,0,.0109133,.963867,386401e-10,0,.0166927,.95982,462827e-10,0,.0238494,.953497,420705e-10,0,.0324178,.947621,477743e-10,0,.0424225,.940611,568258e-10,0,.0538808,.931174,618061e-10,0,.0668047,.919919,627098e-10,0,.0812014,.907856,694714e-10,0,.0970745,.894509,735008e-10,0,.114424,.881954,763369e-10,0,.133246,.868309,821896e-10,0,.153534,.852511,83769e-9,0,.175275,.835821,881615e-10,0,.198453,.817981,896368e-10,0,.223042,.800504,930906e-10,0,.249009,.78141,945056e-10,0,.276304,.761427,963605e-10,0,.304862,.74094,968088e-10,0,.334584,.720233,981481e-10,0,.365322,.698592,979122e-10,0,.396826,.676763,981057e-10,0,.428571,.654808,973956e-10,0,.460318,.632326,962619e-10,0,.492064,.610049,952996e-10,0,.52381,.58763,933334e-10,0,.555556,.565261,917573e-10,0,.587302,.543244,896636e-10,0,.619048,.521273,873304e-10,0,.650794,.499818,852648e-10,0,.68254,.478536,823961e-10,0,.714286,.457826,79939e-9,0,.746032,.437549,77126e-9,0,.777778,.41776,743043e-10,0,.809524,.39863,716426e-10,0,.84127,.379954,686456e-10,0,.873016,.362025,660514e-10,0,.904762,.344581,630755e-10,0,.936508,.327909,605439e-10,0,.968254,.311736,576345e-10,0,1,1,263344e-13,0,0,1,263373e-13,0,0,1,263815e-13,0,0,1,265753e-13,0,0,1,271132e-13,0,0,.999999,283279e-13,0,0,.999997,30833e-12,0,0,.999995,358711e-13,0,0,.999992,461266e-13,0,0,.999985,67574e-12,0,0,.999977,11358e-11,0,0,.999966,213657e-12,0,0,.999948,431151e-12,0,0,.999923,896656e-12,0,0,.999884,186603e-11,0,0,.999826,381115e-11,0,0,.999732,754184e-11,0,0,.999561,143192e-10,0,0,.999191,257061e-10,0,0,.997955,405724e-10,0,744132e-10,.992228,276537e-10,0,716477e-9,.987638,208885e-10,0,.0022524,.983395,215226e-10,0,.00484816,.978614,270795e-10,0,.00860962,.972389,365282e-10,0,.0136083,.964392,474747e-10,0,.0198941,.95861,509141e-10,0,.0275023,.952806,48963e-9,0,.0364584,.94712,571119e-10,0,.04678,.940104,671704e-10,0,.0584799,.930398,687586e-10,0,.0715665,.919866,738161e-10,0,.086045,.907853,813235e-10,0,.101918,.894078,834582e-10,0,.119186,.881177,892093e-10,0,.137845,.867575,944548e-10,0,.157891,.852107,969607e-10,0,.179316,.835502,101456e-9,0,.202106,.81756,103256e-9,0,.226243,.79984,106954e-9,0,.251704,.780998,108066e-9,0,.278451,.761132,110111e-9,0,.306436,.740429,110459e-9,0,.335586,.719836,111219e-9,0,.365796,.698467,11145e-8,0,.3969,.676446,110393e-9,0,.428571,.654635,110035e-9,0,.460318,.632411,108548e-9,0,.492064,.609986,106963e-9,0,.52381,.587872,105238e-9,0,.555556,.565528,102665e-9,0,.587302,.543563,100543e-9,0,.619048,.52176,976182e-10,0,.650794,.500188,947099e-10,0,.68254,.479204,919929e-10,0,.714286,.458413,886139e-10,0,.746032,.438314,857839e-10,0,.777778,.418573,82411e-9,0,.809524,.39947,792211e-10,0,.84127,.380892,759546e-10,0,.873016,.362953,727571e-10,0,.904762,.345601,695738e-10,0,.936508,.328895,664907e-10,0,.968254,.312808,634277e-10,0,1,1,628647e-13,0,0,1,628705e-13,0,0,1,629587e-13,0,0,1,633441e-13,0,0,.999999,644087e-13,0,0,.999998,667856e-13,0,0,.999997,715889e-13,0,0,.999995,809577e-13,0,0,.999989,992764e-13,0,0,.999983,135834e-12,0,0,.999974,210482e-12,0,0,.999959,365215e-12,0,0,.999939,686693e-12,0,0,.999911,13472e-10,0,0,.999868,26731e-10,0,0,.999804,524756e-11,0,0,.9997,100403e-10,0,0,.99951,185019e-10,0,0,.999078,322036e-10,0,620676e-11,.997428,470002e-10,0,341552e-9,.99162,287123e-10,0,.00143727,.987479,234706e-10,0,.00349201,.983582,260083e-10,0,.0066242,.979186,337927e-10,0,.0109113,.97325,454689e-10,0,.0164064,.965221,573759e-10,0,.0231463,.957262,544114e-10,0,.0311571,.952211,587006e-10,0,.0404572,.946631,692256e-10,0,.0510592,.939391,787819e-10,0,.0629723,.929795,792368e-10,0,.0762025,.91965,875075e-10,0,.090753,.907737,950903e-10,0,.106626,.893899,972963e-10,0,.123822,.880239,10459e-8,0,.142337,.866562,107689e-9,0,.16217,.85164,113081e-9,0,.183314,.835021,116636e-9,0,.20576,.817311,120074e-9,0,.229496,.798845,121921e-9,0,.254502,.780479,12475e-8,0,.280753,.760694,125255e-9,0,.308212,.740142,126719e-9,0,.336825,.719248,12636e-8,0,.366517,.698209,126712e-9,0,.397167,.676398,125769e-9,0,.428578,.654378,124432e-9,0,.460318,.632484,123272e-9,0,.492064,.610113,12085e-8,0,.52381,.587931,118411e-9,0,.555556,.565872,11569e-8,0,.587302,.543814,112521e-9,0,.619048,.522265,109737e-9,0,.650794,.500835,106228e-9,0,.68254,.479818,102591e-9,0,.714286,.459258,991288e-10,0,.746032,.439061,952325e-10,0,.777778,.419552,91895e-9,0,.809524,.400399,879051e-10,0,.84127,.381976,844775e-10,0,.873016,.364009,806316e-10,0,.904762,.346761,771848e-10,0,.936508,.330049,735429e-10,0,.968254,.314018,702103e-10,0,1,1,139968e-12,0,0,1,139979e-12,0,0,1,140145e-12,0,0,1,14087e-11,0,0,.999999,142865e-12,0,0,.999998,147279e-12,0,0,.999997,156057e-12,0,0,.999992,17276e-11,0,0,.999989,204352e-12,0,0,.99998,26494e-11,0,0,.999969,383435e-12,0,0,.999953,618641e-12,0,0,.999929,108755e-11,0,0,.999898,201497e-11,0,0,.999849,381346e-11,0,0,.999778,719815e-11,0,0,.999661,133215e-10,0,0,.999451,238313e-10,0,0,.998936,401343e-10,0,113724e-9,.99662,517346e-10,0,820171e-9,.991094,304323e-10,0,.00238143,.987487,281757e-10,0,.00493527,.983731,320048e-10,0,.00856859,.979647,423905e-10,0,.0133393,.973837,562935e-10,0,.0192863,.96584,677442e-10,0,.0264369,.956309,623073e-10,0,.03481,.951523,704131e-10,0,.0444184,.946003,836594e-10,0,.0552713,.938454,911736e-10,0,.0673749,.929279,938264e-10,0,.0807329,.919239,103754e-9,0,.0953479,.907293,109928e-9,0,.111221,.893936,115257e-9,0,.128352,.879674,122265e-9,0,.14674,.865668,125733e-9,0,.166382,.850998,132305e-9,0,.187276,.834498,134844e-9,0,.209413,.816903,139276e-9,0,.232786,.798235,140984e-9,0,.257382,.779724,14378e-8,0,.283181,.760251,144623e-9,0,.310156,.739808,145228e-9,0,.338269,.718762,14539e-8,0,.367461,.697815,144432e-9,0,.397646,.67631,143893e-9,0,.428685,.654278,141846e-9,0,.460318,.632347,13935e-8,0,.492064,.610296,137138e-9,0,.52381,.588039,133806e-9,0,.555556,.566218,130755e-9,0,.587302,.544346,127128e-9,0,.619048,.522701,123002e-9,0,.650794,.501542,119443e-9,0,.68254,.480508,115055e-9,0,.714286,.460092,111032e-9,0,.746032,.440021,106635e-9,0,.777778,.420446,102162e-9,0,.809524,.401512,98184e-9,0,.84127,.38299,936497e-10,0,.873016,.365232,89813e-9,0,.904762,.347865,853073e-10,0,.936508,.331342,817068e-10,0,.968254,.315202,773818e-10,0,1,1,29368e-11,0,0,1,2937e-10,0,0,1,293998e-12,0,0,1,295298e-12,0,0,.999999,298865e-12,0,0,.999998,3067e-10,0,0,.999995,322082e-12,0,0,.999992,350767e-12,0,0,.999986,403538e-12,0,0,.999976,501372e-12,0,0,.999964,68562e-11,0,0,.999945,10374e-10,0,0,.999919,171269e-11,0,0,.999882,300175e-11,0,0,.999829,542144e-11,0,0,.999749,984182e-11,0,0,.99962,176213e-10,0,0,.999382,305995e-10,0,138418e-10,.998751,496686e-10,0,389844e-9,.995344,510733e-10,0,.00150343,.990768,345829e-10,0,.00352451,.987464,342841e-10,0,.00655379,.983846,399072e-10,0,.0106554,.980007,533219e-10,0,.0158723,.974494,696992e-10,0,.0222333,.96622,776754e-10,0,.029758,.956273,747718e-10,0,.0384596,.950952,864611e-10,0,.0483473,.945215,100464e-9,0,.0594266,.937287,103729e-9,0,.0717019,.928649,111665e-9,0,.0851752,.918791,12353e-8,0,.0998479,.906685,127115e-9,0,.115721,.893706,13628e-8,0,.132794,.879248,142427e-9,0,.151067,.864685,148091e-9,0,.170538,.850032,153517e-9,0,.191204,.833853,157322e-9,0,.213063,.816353,161086e-9,0,.236107,.797834,164111e-9,0,.260329,.778831,165446e-9,0,.285714,.759756,167492e-9,0,.312243,.739419,166928e-9,0,.339887,.718491,167e-6,0,.368604,.697392,165674e-9,0,.398329,.676102,163815e-9,0,.428961,.654243,162003e-9,0,.460331,.632176,158831e-9,0,.492064,.610407,155463e-9,0,.52381,.588394,152062e-9,0,.555556,.56645,147665e-9,0,.587302,.5449,14375e-8,0,.619048,.523276,138905e-9,0,.650794,.502179,134189e-9,0,.68254,.481359,129392e-9,0,.714286,.46092,124556e-9,0,.746032,.441084,11957e-8,0,.777778,.421517,114652e-9,0,.809524,.402721,109688e-9,0,.84127,.384222,104667e-9,0,.873016,.366534,999633e-10,0,.904762,.349205,950177e-10,0,.936508,.332702,907301e-10,0,.968254,.316599,859769e-10,0,1,1,585473e-12,0,0,1,585507e-12,0,0,1,58602e-11,0,0,.999999,588259e-12,0,0,.999999,594381e-12,0,0,.999998,607754e-12,0,0,.999995,633729e-12,0,0,.99999,68137e-11,0,0,.999984,767003e-12,0,0,.999973,921212e-12,0,0,.999959,120218e-11,0,0,.999936,172024e-11,0,0,.999907,268088e-11,0,0,.999866,445512e-11,0,0,.999806,768481e-11,0,0,.999716,1342e-8,0,0,.999576,232473e-10,0,0,.9993,391694e-10,0,129917e-9,.998498,608429e-10,0,845035e-9,.994132,489743e-10,0,.00237616,.99031,384644e-10,0,.00484456,.987409,421768e-10,0,.00832472,.983981,504854e-10,0,.0128643,.980268,671028e-10,0,.0184947,.974875,852749e-10,0,.025237,.966063,85531e-9,0,.0331046,.956779,900588e-10,0,.0421067,.950259,10577e-8,0,.0522487,.944239,119458e-9,0,.0635343,.936341,122164e-9,0,.0759654,.928047,134929e-9,0,.0895434,.918065,145544e-9,0,.104269,.906267,150531e-9,0,.120142,.893419,161652e-9,0,.137163,.878758,16593e-8,0,.15533,.863699,174014e-9,0,.174645,.848876,177877e-9,0,.195106,.833032,184049e-9,0,.21671,.815557,186088e-9,0,.239454,.797323,19054e-8,0,.263332,.778124,191765e-9,0,.288336,.758929,192535e-9,0,.314451,.738979,192688e-9,0,.341658,.718213,191522e-9,0,.369924,.696947,190491e-9,0,.399202,.675807,187913e-9,0,.429416,.654147,184451e-9,0,.460447,.63229,181442e-9,0,.492064,.610499,177139e-9,0,.523809,.588747,172596e-9,0,.555555,.566783,167457e-9,0,.587301,.545359,162518e-9,0,.619048,.523984,156818e-9,0,.650794,.502917,151884e-9,0,.68254,.482294,145514e-9,0,.714286,.461945,140199e-9,0,.746032,.442133,134101e-9,0,.777778,.422705,128374e-9,0,.809524,.403916,122996e-9,0,.84127,.38554,116808e-9,0,.873016,.367909,111973e-9,0,.904762,.350651,105938e-9,0,.936508,.334208,101355e-9,0,.968254,.318123,957629e-10,0,1,1,111633e-11,0,0,1,111639e-11,0,0,1,111725e-11,0,0,1,112096e-11,0,0,.999999,11311e-10,0,0,.999997,115315e-11,0,0,.999995,11956e-10,0,0,.999989,127239e-11,0,0,.999981,140772e-11,0,0,.999969,164541e-11,0,0,.999952,206607e-11,0,0,.999928,281783e-11,0,0,.999895,416835e-11,0,0,.999848,658728e-11,0,0,.999781,108648e-10,0,0,.999682,182579e-10,0,0,.999523,306003e-10,0,159122e-10,.999205,499862e-10,0,391184e-9,.998131,73306e-9,0,.00147534,.993334,513229e-10,0,.0034227,.99016,467783e-10,0,.00632232,.987321,523413e-10,0,.0102295,.984099,64267e-9,0,.0151794,.980432,843042e-10,0,.0211947,.974976,102819e-9,0,.0282899,.966429,996234e-10,0,.0364739,.957633,111074e-9,0,.0457522,.949422,128644e-9,0,.0561278,.943045,140076e-9,0,.0676023,.935448,146349e-9,0,.0801762,.927225,161854e-9,0,.0938499,.917033,169135e-9,0,.108623,.905762,179987e-9,0,.124496,.892879,189832e-9,0,.141469,.878435,195881e-9,0,.159541,.863114,20466e-8,0,.178713,.84776,209473e-9,0,.198985,.832084,214861e-9,0,.220355,.814915,217695e-9,0,.242823,.796711,220313e-9,0,.266385,.777603,22313e-8,0,.291036,.757991,222471e-9,0,.316767,.738371,222869e-9,0,.343563,.717872,221243e-9,0,.371402,.696619,218089e-9,0,.400248,.675379,21562e-8,0,.430047,.65411,21169e-8,0,.460709,.63241,206947e-9,0,.492079,.61046,201709e-9,0,.52381,.58903,196753e-9,0,.555556,.567267,189637e-9,0,.587302,.545886,184735e-9,0,.619048,.524714,177257e-9,0,.650794,.503789,171424e-9,0,.68254,.483204,164688e-9,0,.714286,.462976,157172e-9,0,.746032,.443294,151341e-9,0,.777778,.423988,143737e-9,0,.809524,.405325,138098e-9,0,.84127,.386981,130698e-9,0,.873016,.369436,125276e-9,0,.904762,.35219,118349e-9,0,.936508,.335804,11312e-8,0,.968254,.319749,106687e-9,0,1,1,204685e-11,0,0,1,204694e-11,0,0,1,204831e-11,0,0,.999999,205428e-11,0,0,.999999,207056e-11,0,0,.999997,210581e-11,0,0,.999993,21732e-10,0,0,.999987,229365e-11,0,0,.999979,250243e-11,0,0,.999965,286127e-11,0,0,.999947,348028e-11,0,0,.999918,455588e-11,0,0,.999881,643303e-11,0,0,.999828,970064e-11,0,0,.999753,153233e-10,0,0,.999642,24793e-9,0,0,.999464,402032e-10,0,122947e-9,.999089,635852e-10,0,807414e-9,.997567,857026e-10,0,.00227206,.992903,594912e-10,0,.00462812,.990011,578515e-10,0,.00794162,.987192,65399e-9,0,.0122534,.98418,819675e-10,0,.0175888,.980491,105514e-9,0,.0239635,.974779,121532e-9,0,.031387,.96675,119144e-9,0,.0398644,.958248,136125e-9,0,.0493982,.948884,155408e-9,0,.0599896,.941673,162281e-9,0,.0716382,.934521,176754e-9,0,.0843437,.926205,192873e-9,0,.0981056,.916089,200038e-9,0,.112923,.904963,213624e-9,0,.128796,.892089,221834e-9,0,.145725,.878028,232619e-9,0,.163709,.86249,238632e-9,0,.182749,.846587,247002e-9,0,.202847,.830988,250702e-9,0,.224001,.814165,255562e-9,0,.246214,.796135,257505e-9,0,.269482,.777052,258625e-9,0,.293805,.757201,258398e-9,0,.319176,.737655,256714e-9,0,.345587,.717477,255187e-9,0,.373021,.696433,251792e-9,0,.401454,.675084,247223e-9,0,.430844,.653907,242213e-9,0,.461125,.632561,237397e-9,0,.492187,.610658,229313e-9,0,.52381,.589322,224402e-9,0,.555556,.567857,216116e-9,0,.587302,.54652,209124e-9,0,.619048,.525433,201601e-9,0,.650794,.504679,192957e-9,0,.68254,.484203,186052e-9,0,.714286,.464203,177672e-9,0,.746032,.444549,170005e-9,0,.777778,.425346,162401e-9,0,.809524,.406706,1544e-7,0,.84127,.388576,147437e-9,0,.873016,.37094,139493e-9,0,.904762,.353996,133219e-9,0,.936508,.337391,125573e-9,0,.968254,.321648,119867e-9,0,1,1,362511e-11,0,0,1,362525e-11,0,0,1,362739e-11,0,0,.999999,363673e-11,0,0,.999998,366214e-11,0,0,.999996,371698e-11,0,0,.999992,382116e-11,0,0,.999986,400554e-11,0,0,.999976,432058e-11,0,0,.999961,485194e-11,0,0,.999938,574808e-11,0,0,.999908,726643e-11,0,0,.999865,984707e-11,0,0,.999807,142217e-10,0,0,.999723,215581e-10,0,0,.999602,336114e-10,0,119113e-10,.999398,527353e-10,0,355813e-9,.998946,805809e-10,0,.00137768,.996647,942908e-10,0,.00322469,.992298,668733e-10,0,.00597897,.989802,716564e-10,0,.00968903,.987019,821355e-10,0,.0143845,.984219,104555e-9,0,.0200831,.980425,131245e-9,0,.0267948,.974241,139613e-9,0,.034525,.967006,145931e-9,0,.0432757,.95893,167153e-9,0,.0530471,.949157,188146e-9,0,.0638386,.94062,194625e-9,0,.0756487,.933509,213721e-9,0,.0884762,.925088,229616e-9,0,.10232,.915178,239638e-9,0,.117178,.904093,254814e-9,0,.133051,.891337,263685e-9,0,.149939,.877326,274789e-9,0,.167841,.861794,280534e-9,0,.18676,.845758,289534e-9,0,.206696,.829792,294446e-9,0,.22765,.813037,296877e-9,0,.249625,.795285,300217e-9,0,.27262,.776323,299826e-9,0,.296636,.756673,299787e-9,0,.321671,.736856,297867e-9,0,.347718,.716883,294052e-9,0,.374768,.696089,289462e-9,0,.402804,.67505,285212e-9,0,.431796,.653509,27653e-8,0,.461695,.63258,271759e-9,0,.49242,.61104,262811e-9,0,.523822,.589567,255151e-9,0,.555556,.568322,246434e-9,0,.587302,.547235,237061e-9,0,.619048,.52616,228343e-9,0,.650794,.505716,219236e-9,0,.68254,.485274,209595e-9,0,.714286,.465411,201011e-9,0,.746032,.445854,19109e-8,0,.777778,.426911,182897e-9,0,.809524,.408222,173569e-9,0,.84127,.390307,165496e-9,0,.873016,.372624,156799e-9,0,.904762,.355804,14917e-8,0,.936508,.33924,140907e-9,0,.968254,.323534,134062e-9,0,1,1,622487e-11,0,0,1,62251e-10,0,0,1,622837e-11,0,0,.999999,624259e-11,0,0,.999998,628127e-11,0,0,.999996,636451e-11,0,0,.999991,65218e-10,0,0,.999984,679782e-11,0,0,.999973,726361e-11,0,0,.999955,803644e-11,0,0,.999931,931397e-11,0,0,.999896,114299e-10,0,0,.999847,149402e-10,0,0,.999784,207461e-10,0,0,.999692,302493e-10,0,0,.999554,454957e-10,0,997275e-10,.999326,690762e-10,0,724813e-9,.998757,101605e-9,0,.0020972,.995367,958745e-10,0,.00432324,.99209,832808e-10,0,.00746347,.989517,887601e-10,0,.0115534,.987008,10564e-8,0,.0166134,.98421,133179e-9,0,.0226552,.98021,161746e-9,0,.0296838,.973676,161821e-9,0,.0377016,.967052,178635e-9,0,.0467079,.959385,206765e-9,0,.0567013,.949461,22476e-8,0,.0676796,.939578,23574e-8,0,.0796403,.932416,25893e-8,0,.0925812,.923759,271228e-9,0,.106501,.914223,289165e-9,0,.121397,.902942,301156e-9,0,.13727,.890419,313852e-9,0,.15412,.876639,324408e-9,0,.171946,.861316,33249e-8,0,.190751,.84496,338497e-9,0,.210537,.828427,345861e-9,0,.231305,.811871,347863e-9,0,.253057,.794397,350225e-9,0,.275797,.775726,349915e-9,0,.299525,.75617,347297e-9,0,.324242,.736091,344232e-9,0,.349947,.716213,340835e-9,0,.376633,.695736,332369e-9,0,.404289,.674961,327943e-9,0,.432895,.653518,318533e-9,0,.462415,.632574,310391e-9,0,.492788,.61134,300755e-9,0,.523909,.590017,290506e-9,0,.555556,.568752,280446e-9,0,.587302,.548061,269902e-9,0,.619048,.52711,258815e-9,0,.650794,.506682,248481e-9,0,.68254,.486524,237141e-9,0,.714286,.466812,226872e-9,0,.746032,.44732,216037e-9,0,.777778,.428473,205629e-9,0,.809524,.409921,195691e-9,0,.84127,.392028,185457e-9,0,.873016,.374606,176436e-9,0,.904762,.357601,166508e-9,0,.936508,.341348,158385e-9,0,.968254,.32542,149203e-9,0,1,1,103967e-10,0,0,1,10397e-9,0,0,1,104019e-10,0,0,.999999,104231e-10,0,0,.999998,104806e-10,0,0,.999995,106042e-10,0,0,.999991,108366e-10,0,0,.999982,112415e-10,0,0,.999968,119174e-10,0,0,.99995,130227e-10,0,0,.999922,148176e-10,0,0,.999884,177303e-10,0,0,.99983,224564e-10,0,0,.999758,300966e-10,0,0,.999654,423193e-10,0,549083e-11,.999503,614848e-10,0,296087e-9,.999237,903576e-10,0,.00123144,.998491,1271e-7,0,.00295954,.994594,107754e-9,0,.00555829,.99178,103025e-9,0,.00907209,.989265,11154e-8,0,.0135257,.986998,136296e-9,0,.0189327,.984137,169154e-9,0,.0252993,.979798,196671e-9,0,.0326272,.97337,196678e-9,0,.0409157,.967239,223121e-9,0,.0501623,.959543,253809e-9,0,.0603638,.949466,265972e-9,0,.0715171,.939074,288372e-9,0,.0836187,.931118,310983e-9,0,.0966657,.922525,325561e-9,0,.110656,.912983,345725e-9,0,.125588,.901617,3556e-7,0,.141461,.889487,374012e-9,0,.158275,.875787,383445e-9,0,.176031,.860654,393972e-9,0,.19473,.844417,400311e-9,0,.214374,.82741,405004e-9,0,.234967,.810545,407378e-9,0,.256512,.793312,407351e-9,0,.279011,.774847,406563e-9,0,.302468,.755621,404903e-9,0,.326887,.735511,397486e-9,0,.352266,.715435,39357e-8,0,.378605,.695403,384739e-9,0,.405897,.674681,376108e-9,0,.43413,.65359,365997e-9,0,.463277,.632471,354957e-9,0,.493295,.61151,343593e-9,0,.524106,.59064,331841e-9,0,.555561,.569386,318891e-9,0,.587302,.548785,3072e-7,0,.619048,.528146,29361e-8,0,.650794,.507872,281709e-9,0,.68254,.487805,268627e-9,0,.714286,.468196,255887e-9,0,.746032,.448922,243997e-9,0,.777778,.430093,231662e-9,0,.809524,.411845,220339e-9,0,.84127,.393808,208694e-9,0,.873016,.376615,198045e-9,0,.904762,.359655,187375e-9,0,.936508,.343452,177371e-9,0,.968254,.32765,167525e-9,0,1,1,169351e-10,0,0,1,169356e-10,0,0,1,169427e-10,0,0,.999999,169736e-10,0,0,.999998,170575e-10,0,0,.999995,172372e-10,0,0,.99999,175739e-10,0,0,.999979,181568e-10,0,0,.999966,191206e-10,0,0,.999944,20677e-9,0,0,.999912,231644e-10,0,0,.999869,271268e-10,0,0,.999811,334272e-10,0,0,.99973,433979e-10,0,0,.999617,590083e-10,0,680315e-10,.999445,829497e-10,0,612796e-9,.999138,118019e-9,0,.00187408,.998095,156712e-9,0,.00395791,.993919,125054e-9,0,.00692144,.991333,126091e-9,0,.0107962,.989226,144912e-9,0,.0155986,.986954,175737e-9,0,.0213364,.983982,213883e-9,0,.0280114,.979128,234526e-9,0,.0356226,.973327,243725e-9,0,.0441668,.967416,2773e-7,0,.0536399,.959729,308799e-9,0,.0640376,.949758,322447e-9,0,.0753554,.939173,350021e-9,0,.0875893,.9296,370089e-9,0,.100736,.921181,391365e-9,0,.114793,.91164,413636e-9,0,.129759,.900435,427068e-9,0,.145632,.888183,441046e-9,0,.162412,.874772,454968e-9,0,.180101,.859566,461882e-9,0,.1987,.843579,471556e-9,0,.218213,.826453,474335e-9,0,.238641,.809164,477078e-9,0,.259989,.792179,47755e-8,0,.282262,.773866,472573e-9,0,.305464,.754944,469765e-9,0,.329599,.735133,462371e-9,0,.35467,.714858,453674e-9,0,.380678,.694829,443888e-9,0,.407622,.674453,432052e-9,0,.435493,.653685,420315e-9,0,.464275,.632666,406829e-9,0,.493938,.611676,392234e-9,0,.524422,.591193,379208e-9,0,.555624,.570145,36319e-8,0,.587302,.549566,349111e-9,0,.619048,.529278,334166e-9,0,.650794,.509026,318456e-9,0,.68254,.489186,30449e-8,0,.714286,.469662,289051e-9,0,.746032,.450691,275494e-9,0,.777778,.431841,261437e-9,0,.809524,.413752,247846e-9,0,.84127,.395951,235085e-9,0,.873016,.378633,222245e-9,0,.904762,.36194,210533e-9,0,.936508,.345599,198494e-9,0,.968254,.329999,188133e-9,0,1,1,269663e-10,0,0,1,26967e-9,0,0,1,269772e-10,0,0,.999999,270214e-10,0,0,.999998,271415e-10,0,0,.999994,27398e-9,0,0,.999988,278771e-10,0,0,.999977,287019e-10,0,0,.999961,300544e-10,0,0,.999937,322138e-10,0,0,.999904,356163e-10,0,0,.999854,409465e-10,0,0,.99979,492651e-10,0,0,.999699,621722e-10,0,88288e-11,.999572,819715e-10,0,223369e-9,.999381,111689e-9,0,.00105414,.999016,153862e-9,0,.0026493,.997437,187667e-9,0,.00508608,.993545,155672e-9,0,.00840554,.991135,161455e-9,0,.012629,.989157,188241e-9,0,.0177661,.986874,226229e-9,0,.0238198,.983714,268668e-9,0,.0307887,.978301,277109e-9,0,.0386688,.973227,303446e-9,0,.0474554,.967317,341851e-9,0,.0571428,.959477,370885e-9,0,.0677256,.950012,392753e-9,0,.0791988,.939484,42781e-8,0,.0915576,.928135,443866e-9,0,.104798,.919819,472959e-9,0,.118918,.910049,491551e-9,0,.133915,.899181,512616e-9,0,.149788,.886881,523563e-9,0,.166537,.87359,540183e-9,0,.184164,.858613,547386e-9,0,.202669,.842809,554809e-9,0,.222056,.825727,558316e-9,0,.242329,.808086,557824e-9,0,.263492,.790728,556346e-9,0,.285551,.772987,552672e-9,0,.30851,.7541,543738e-9,0,.332376,.734669,536107e-9,0,.357153,.714411,523342e-9,0,.382845,.694196,512238e-9,0,.409454,.674252,497465e-9,0,.436977,.65357,481096e-9,0,.465404,.632999,467054e-9,0,.494713,.611994,448771e-9,0,.524864,.591604,431889e-9,0,.555779,.571134,415238e-9,0,.587302,.550528,396369e-9,0,.619048,.530292,379477e-9,0,.650794,.510364,361488e-9,0,.68254,.490749,343787e-9,0,.714286,.471266,327822e-9,0,.746032,.452462,310626e-9,0,.777778,.433907,295352e-9,0,.809524,.415659,279179e-9,0,.84127,.398138,264685e-9,0,.873016,.380833,249905e-9,0,.904762,.364247,236282e-9,0,.936508,.348041,222905e-9,0,.968254,.332389,210522e-9,0,1,1,420604e-10,0,0,1,420614e-10,0,0,1,420757e-10,0,0,.999999,42138e-9,0,0,.999997,423067e-10,0,0,.999993,426668e-10,0,0,.999986,433372e-10,0,0,.999974,444857e-10,0,0,.999956,463554e-10,0,0,.99993,493105e-10,0,0,.999892,539077e-10,0,0,.999838,610005e-10,0,0,.999767,718822e-10,0,0,.999666,884581e-10,0,365471e-10,.999525,113398e-9,0,485623e-9,.999311,150043e-9,0,.00162096,.998865,200063e-9,0,.00355319,.996278,211014e-9,0,.00633818,.992956,189672e-9,0,.0100043,.991017,210262e-9,0,.0145648,.989055,244292e-9,0,.0200237,.986741,290481e-9,0,.0263798,.983288,334303e-9,0,.033629,.977784,340307e-9,0,.0417652,.973037,377864e-9,0,.0507821,.967181,4239e-7,0,.060673,.958971,443854e-9,0,.0714314,.950093,483039e-9,0,.0830518,.939552,517934e-9,0,.0955288,.927678,539449e-9,0,.108859,.918278,568604e-9,0,.123038,.908449,588505e-9,0,.138065,.897713,612473e-9,0,.153938,.885533,625575e-9,0,.170657,.872131,63854e-8,0,.188224,.857517,647034e-9,0,.20664,.841796,65209e-8,0,.225909,.824726,6544e-7,0,.246035,.807297,655744e-9,0,.267022,.789058,646716e-9,0,.288878,.77189,643898e-9,0,.311607,.753082,629973e-9,0,.335216,.7341,621564e-9,0,.359713,.714094,605171e-9,0,.385103,.693839,588752e-9,0,.41139,.673891,573294e-9,0,.438576,.653565,552682e-9,0,.466656,.633326,533446e-9,0,.495617,.612582,514635e-9,0,.525431,.59205,49303e-8,0,.556041,.571918,471842e-9,0,.587338,.551572,451713e-9,0,.619048,.531553,430049e-9,0,.650794,.51175,410445e-9,0,.68254,.49238,390098e-9,0,.714286,.473143,370033e-9,0,.746032,.45423,351205e-9,0,.777778,.435963,332049e-9,0,.809524,.41787,315021e-9,0,.84127,.400387,297315e-9,0,.873016,.383332,281385e-9,0,.904762,.366665,265397e-9,0,.936508,.350633,250601e-9,0,.968254,.334964,23589e-8,0,1,1,643736e-10,0,0,1,64375e-9,0,0,1,643947e-10,0,0,.999999,64481e-9,0,0,.999997,647143e-10,0,0,.999994,652119e-10,0,0,.999985,661359e-10,0,0,.999972,677116e-10,0,0,.999952,702599e-10,0,0,.999922,742517e-10,0,0,.99988,803906e-10,0,0,.99982,897315e-10,0,0,.999741,103838e-9,0,0,.999629,12496e-8,0,149024e-9,.999474,156161e-9,0,861027e-9,.999229,201034e-9,0,.00231198,.998662,259069e-9,0,.00458147,.995299,245439e-9,0,.00770895,.992732,24498e-8,0,.0117126,.990847,273211e-9,0,.0165989,.988911,316492e-9,0,.0223674,.98654,37161e-8,0,.0290135,.982636,410352e-9,0,.0365309,.977346,421756e-9,0,.0449117,.972909,475578e-9,0,.0541481,.966821,522482e-9,0,.0642326,.958686,545008e-9,0,.075158,.949754,589286e-9,0,.0869181,.939184,619995e-9,0,.0995074,.927505,654266e-9,0,.112922,.916606,682362e-9,0,.127157,.906707,704286e-9,0,.142212,.895937,725909e-9,0,.158085,.883913,743939e-9,0,.174776,.870642,755157e-9,0,.192287,.856241,764387e-9,0,.210619,.84069,771032e-9,0,.229775,.823728,765906e-9,0,.249761,.806481,767604e-9,0,.270582,.787924,754385e-9,0,.292243,.770588,749668e-9,0,.314753,.751991,731613e-9,0,.338118,.733407,717655e-9,0,.362347,.713688,700604e-9,0,.387447,.693595,678765e-9,0,.413424,.673426,657042e-9,0,.440284,.65359,635892e-9,0,.468027,.633576,611569e-9,0,.496645,.613144,586011e-9,0,.526122,.592711,563111e-9,0,.556417,.572722,537699e-9,0,.587451,.552762,512556e-9,0,.619048,.532985,489757e-9,0,.650794,.513219,464139e-9,0,.68254,.493992,442193e-9,0,.714286,.47509,418629e-9,0,.746032,.456287,397045e-9,0,.777778,.438152,375504e-9,0,.809524,.420294,35492e-8,0,.84127,.402749,335327e-9,0,.873016,.385879,316422e-9,0,.904762,.369352,298333e-9,0,.936508,.353301,281417e-9,0,.968254,.337781,265203e-9,0,1,1,968267e-10,0,0,1,968284e-10,0,0,1,968556e-10,0,0,.999999,969733e-10,0,0,.999997,972913e-10,0,0,.999993,979688e-10,0,0,.999984,992239e-10,0,0,.999969,101356e-9,0,0,.999946,104784e-9,0,0,.999913,110111e-9,0,0,.999868,118217e-9,0,0,.999801,130396e-9,0,0,.999712,148523e-9,0,124907e-10,.999589,175233e-9,0,355405e-9,.999416,213999e-9,0,.0013528,.999136,268529e-9,0,.00312557,.998367,333088e-9,0,.00573045,.994701,304757e-9,0,.00919397,.992497,318031e-9,0,.0135261,.990608,353863e-9,0,.0187278,.988715,409044e-9,0,.0247947,.986241,472967e-9,0,.0317196,.981696,495104e-9,0,.039494,.977097,532873e-9,0,.0481087,.972583,594447e-9,0,.0575549,.966142,636867e-9,0,.0678242,.95823,669899e-9,0,.0789089,.949677,719499e-9,0,.0908023,.939226,750584e-9,0,.103499,.927501,793183e-9,0,.116993,.915199,81995e-8,0,.131282,.90498,847654e-9,0,.146364,.894243,868929e-9,0,.162237,.882154,884278e-9,0,.178902,.869161,898108e-9,0,.196358,.854751,901254e-9,0,.21461,.839368,90679e-8,0,.23366,.822874,901541e-9,0,.253512,.805514,897297e-9,0,.274174,.78716,881856e-9,0,.29565,.769061,870032e-9,0,.31795,.751,851719e-9,0,.341081,.732614,830671e-9,0,.365053,.713171,806569e-9,0,.389874,.693472,78338e-8,0,.415553,.673528,756404e-9,0,.442098,.653397,726872e-9,0,.469512,.633781,700494e-9,0,.497794,.613877,67105e-8,0,.526935,.593506,640361e-9,0,.556908,.573667,613502e-9,0,.587657,.553932,583177e-9,0,.61906,.534345,554375e-9,0,.650794,.515042,527811e-9,0,.68254,.495674,499367e-9,0,.714286,.477132,47429e-8,0,.746032,.458609,447726e-9,0,.777778,.440354,424205e-9,0,.809524,.422765,399549e-9,0,.84127,.405472,378315e-9,0,.873016,.388482,355327e-9,0,.904762,.372191,336122e-9,0,.936508,.356099,315247e-9,0,.968254,.340737,29794e-8,0,1,1,143327e-9,0,0,1,14333e-8,0,0,1,143366e-9,0,0,.999999,143524e-9,0,0,.999996,143952e-9,0,0,.999991,144862e-9,0,0,.999981,146544e-9,0,0,.999966,149391e-9,0,0,.999941,153946e-9,0,0,.999905,160971e-9,0,0,.999852,171562e-9,0,0,.99978,18729e-8,0,0,.999681,210386e-9,0,826239e-10,.999546,243906e-9,0,664807e-9,.999352,291739e-9,0,.00196192,.999027,357419e-9,0,.00405941,.997886,422349e-9,0,.00699664,.99419,385008e-9,0,.0107896,.99214,409775e-9,0,.0154415,.990274,456418e-9,0,.0209488,.988455,527008e-9,0,.0273037,.985804,597685e-9,0,.0344969,.98103,613124e-9,0,.0425183,.976674,668321e-9,0,.0513575,.972021,736985e-9,0,.0610046,.965274,773789e-9,0,.0714508,.958046,830852e-9,0,.0826877,.949333,875766e-9,0,.0947085,.939135,917088e-9,0,.107507,.927119,952244e-9,0,.121078,.91469,990626e-9,0,.135419,.903006,.00101304,0,.150526,.892368,.00103834,0,.166399,.880231,.00105002,0,.183038,.867432,.00106331,0,.200443,.853208,.00106783,0,.218618,.837956,.00106458,0,.237566,.821772,.00105945,0,.257291,.804328,.00104685,0,.2778,.786465,.00103178,0,.2991,.768004,.00101077,0,.321199,.74972,985504e-9,0,.344106,.731682,962893e-9,0,.36783,.712813,932146e-9,0,.392383,.693139,89871e-8,0,.417774,.673566,869678e-9,0,.444013,.653483,835525e-9,0,.471107,.633891,799853e-9,0,.49906,.614433,766838e-9,0,.527869,.594586,732227e-9,0,.557517,.574769,696442e-9,0,.587966,.555149,663935e-9,0,.61913,.535898,629826e-9,0,.650794,.516753,596486e-9,0,.68254,.497816,567078e-9,0,.714286,.479034,534399e-9,0,.746032,.460975,507013e-9,0,.777778,.442935,477421e-9,0,.809524,.425263,451101e-9,0,.84127,.408248,424964e-9,0,.873016,.391339,39993e-8,0,.904762,.37513,377619e-9,0,.936508,.359172,354418e-9,0,.968254,.343876,334823e-9,0,1,1,209042e-9,0,0,1,209045e-9,0,0,1,209093e-9,0,0,.999999,209304e-9,0,0,.999996,209871e-9,0,0,.999991,211078e-9,0,0,.999979,213304e-9,0,0,.999963,217061e-9,0,0,.999933,223042e-9,0,0,.999894,232206e-9,0,0,.999837,245901e-9,0,0,.999756,266023e-9,0,102927e-11,.999648,295204e-9,0,233468e-9,.999499,336958e-9,0,.00108237,.999283,395563e-9,0,.00268832,.998896,473785e-9,0,.00511138,.997006,520008e-9,0,.00837705,.993819,497261e-9,0,.0124928,.991632,523722e-9,0,.0174561,.989875,587258e-9,0,.0232596,.988109,676329e-9,0,.0298932,.985155,747701e-9,0,.0373453,.980479,768803e-9,0,.0456045,.976271,841054e-9,0,.0546593,.971347,911469e-9,0,.0644994,.964528,953057e-9,0,.0751152,.957632,.00102221,0,.0864981,.948681,.00106122,0,.0986407,.938716,.00111857,0,.111537,.926629,.00114762,0,.125182,.914025,.00118995,0,.139571,.901026,.00121228,0,.154703,.890358,.00123946,0,.170576,.878283,.0012527,0,.18719,.865459,.00125536,0,.204547,.851407,.00126134,0,.222648,.836276,.00124759,0,.241498,.820436,.00124443,0,.261101,.803253,.00122071,0,.281465,.785562,.00120107,0,.302595,.76718,.00117762,0,.324501,.748551,.00114289,0,.347192,.730564,.00110872,0,.370679,.712253,.00107636,0,.394973,.692867,.00103646,0,.420085,.673695,996793e-9,0,.446027,.653912,95675e-8,0,.47281,.634129,916739e-9,0,.500441,.615004,874401e-9,0,.528921,.595587,833411e-9,0,.558244,.575965,794556e-9,0,.588384,.5566,75196e-8,0,.619281,.537428,716381e-9,0,.650795,.518623,676558e-9,0,.68254,.499964,64074e-8,0,.714286,.481356,605984e-9,0,.746032,.463279,570256e-9,0,.777778,.445673,540138e-9,0,.809524,.428032,507299e-9,0,.84127,.411112,479553e-9,0,.873016,.394444,450737e-9,0,.904762,.378247,424269e-9,0,.936508,.362415,399111e-9,0,.968254,.347103,375274e-9,0,1,1,300729e-9,0,0,1,300733e-9,0,0,1,300797e-9,0,0,.999998,301072e-9,0,0,.999996,301817e-9,0,0,.999989,303398e-9,0,0,.999977,306309e-9,0,0,.999958,311209e-9,0,0,.999927,318975e-9,0,0,.999884,330804e-9,0,0,.99982,34834e-8,0,0,.999733,373854e-9,0,326995e-10,.999613,410424e-9,0,477174e-9,.999447,462047e-9,0,.00161099,.999204,533322e-9,0,.00353153,.998725,624964e-9,0,.00627965,.995871,631786e-9,0,.0098693,.993194,632017e-9,0,.0143011,.991541,68923e-8,0,.019568,.989773,766892e-9,0,.0256593,.987647,863668e-9,0,.0325625,.984193,922089e-9,0,.0402647,.980016,970749e-9,0,.0487532,.975859,.00106027,0,.058016,.970514,.00112239,0,.0680419,.963625,.00117212,0,.0788208,.956959,.00125211,0,.0903439,.947956,.00129411,0,.102604,.93809,.00135879,0,.115594,.92659,.00139309,0,.129309,.913829,.00143253,0,.143745,.90005,.00145809,0,.158901,.888129,.0014748,0,.174774,.87607,.00148756,0,.191365,.863461,.00148714,0,.208674,.849594,.00148892,0,.226705,.834531,.00146496,0,.245461,.81903,.0014579,0,.264947,.802122,.00143039,0,.28517,.78445,.00139717,0,.306137,.766434,.00136312,0,.327857,.747816,.00132597,0,.350341,.729519,.00128323,0,.373598,.711454,.00123803,0,.397642,.692699,.00119097,0,.422485,.673723,.00114565,0,.448139,.654386,.00109552,0,.474619,.634673,.00104553,0,.501933,.615554,99985e-8,0,.530089,.596462,948207e-9,0,.559087,.577385,902299e-9,0,.588913,.558257,856448e-9,0,.619525,.5392,810395e-9,0,.650826,.520543,768558e-9,0,.68254,.502206,7239e-7,0,.714286,.48402,685794e-9,0,.746032,.465779,64471e-8,0,.777778,.448455,609583e-9,0,.809524,.431091,57227e-8,0,.84127,.414147,54042e-8,0,.873016,.39765,506545e-9,0,.904762,.381576,477635e-9,0,.936508,.365881,448446e-9,0,.968254,.350582,421424e-9,0,1,1,427144e-9,0,0,1,427151e-9,0,0,1,427232e-9,0,0,.999998,42759e-8,0,0,.999995,428555e-9,0,0,.999988,430603e-9,0,0,.999976,434368e-9,0,0,.999952,440688e-9,0,0,.999919,450667e-9,0,0,.999871,46578e-8,0,0,.999801,488024e-9,0,0,.999704,520092e-9,0,129791e-9,.999572,565553e-9,0,821056e-9,.999389,628906e-9,0,.00225241,.999114,714911e-9,0,.00449109,.998488,819218e-9,0,.00756249,.995234,80415e-8,0,.0114716,.993021,830181e-9,0,.0162131,.991407,902645e-9,0,.021776,.989625,996934e-9,0,.0281471,.987064,.00109707,0,.0353118,.983265,.00114353,0,.0432562,.979535,.0012272,0,.0519665,.975224,.00132642,0,.0614298,.969574,.00138092,0,.0716348,.963021,.00145896,0,.0825709,.956046,.00152834,0,.094229,.947136,.00158217,0,.106602,.937313,.0016347,0,.119682,.926073,.00168383,0,.133465,.913121,.00171627,0,.147947,.899165,.00174229,0,.163125,.885891,.00176137,0,.178998,.873783,.00176406,0,.195566,.861331,.00176156,0,.21283,.847569,.00175346,0,.230793,.832785,.00172753,0,.249459,.817442,.00170204,0,.268832,.800613,.00166576,0,.28892,.783597,.00162909,0,.30973,.76571,.0015826,0,.331271,.747021,.00153106,0,.353554,.728593,.00148036,0,.37659,.710661,.00142808,0,.400391,.692426,.00136906,0,.424973,.673623,.00131066,0,.450347,.65494,.00125569,0,.476531,.635448,.00119517,0,.503535,.616221,.00113828,0,.531372,.597531,.0010816,0,.560047,.578795,.00102673,0,.589554,.559892,970985e-9,0,.619869,.541307,919773e-9,0,.650923,.522608,868479e-9,0,.68254,.504484,82137e-8,0,.714286,.486603,772916e-9,0,.746032,.468802,730353e-9,0,.777778,.451172,684955e-9,0,.809524,.434348,647565e-9,0,.84127,.417445,605863e-9,0,.873016,.401077,571885e-9,0,.904762,.385039,536034e-9,0,.936508,.369483,504227e-9,0,.968254,.354272,473165e-9,0,1,1,599525e-9,0,0,1,599533e-9,0,0,1,599639e-9,0,0,.999998,600097e-9,0,0,.999994,601336e-9,0,0,.999987,603958e-9,0,0,.999972,608775e-9,0,0,.999949,616842e-9,0,0,.999912,629534e-9,0,0,.999857,648658e-9,0,0,.999781,676615e-9,0,538873e-11,.999674,716574e-9,0,308602e-9,.999528,772641e-9,0,.00127003,.999326,849806e-9,0,.00300783,.999009,952682e-9,0,.00556637,.998112,.00106394,0,.00895889,.994496,.00102228,0,.0131827,.992806,.00108586,0,.0182277,.991211,.0011759,0,.0240795,.989415,.00128955,0,.030723,.986499,.00139038,0,.0381418,.982679,.00144539,0,.046321,.978839,.00153954,0,.0552459,.974295,.00164417,0,.0649034,.968784,.00171517,0,.0752814,.962324,.00180282,0,.0863693,.954956,.00186387,0,.0981578,.94624,.00193817,0,.110639,.936517,.00198156,0,.123806,.925186,.00203042,0,.137655,.91252,.0020664,0,.15218,.898441,.00207822,0,.16738,.884394,.0020992,0,.183253,.871273,.00208748,0,.199799,.859057,.00208686,0,.21702,.845243,.00205519,0,.234918,.830723,.00202868,0,.253496,.815801,.00199501,0,.272761,.79914,.00194193,0,.292719,.782372,.00188824,0,.313377,.76482,.00183695,0,.334745,.746586,.00177418,0,.356833,.7281,.00170628,0,.379654,.709842,.00164063,0,.403221,.692019,.00157355,0,.427548,.67364,.00150262,0,.452651,.655277,.00143473,0,.478545,.636438,.00136371,0,.505246,.617364,.00129911,0,.532768,.598603,.00123014,0,.561122,.580195,.00116587,0,.590309,.561786,.00110398,0,.620318,.543377,.00104148,0,.651102,.525093,983984e-9,0,.682545,.506791,92667e-8,0,.714286,.489291,874326e-9,0,.746032,.471811,821734e-9,0,.777778,.454435,774698e-9,0,.809524,.437493,727302e-9,0,.84127,.420977,684039e-9,0,.873016,.404729,64373e-8,0,.904762,.388756,60285e-8,0,.936508,.373344,56765e-8,0,.968254,.358191,531929e-9,0,1,1,832169e-9,0,0,1,832178e-9,0,0,1,83231e-8,0,0,.999998,832893e-9,0,0,.999995,834465e-9,0,0,.999985,837791e-9,0,0,.999969,843893e-9,0,0,.999944,854086e-9,0,0,.999903,870071e-9,0,0,.999843,894042e-9,0,0,.999759,928865e-9,0,531805e-10,.999643,978242e-9,0,579365e-9,.99948,.00104684,0,.00182774,.999255,.00114012,0,.00387804,.998885,.00126188,0,.00675709,.997405,.00135888,0,.010468,.99424,.00133626,0,.0150018,.992458,.00140905,0,.0203443,.990929,.00152305,0,.0264786,.989116,.00165882,0,.0333875,.985624,.00174128,0,.0410536,.982003,.00182108,0,.0494609,.978336,.00194498,0,.0585941,.973184,.00202708,0,.0684396,.9678,.00212166,0,.0789851,.961348,.00221366,0,.0902199,.953841,.00228219,0,.102134,.94534,.00235662,0,.114721,.935552,.00240572,0,.127972,.924064,.00244405,0,.141884,.911827,.00247557,0,.156451,.897731,.00248374,0,.171672,.883409,.00249863,0,.187545,.868625,.00246688,0,.20407,.856529,.00246523,0,.221249,.842999,.00242368,0,.239083,.828505,.00237354,0,.257578,.813825,.00232588,0,.276738,.797813,.00226731,0,.296569,.781097,.00219704,0,.31708,.764038,.00212394,0,.338281,.746067,.00204786,0,.360181,.727687,.00196728,0,.382794,.709571,.00188779,0,.406133,.691503,.00180532,0,.430213,.673673,.00171849,0,.45505,.655732,.00164147,0,.480662,.637399,.00155858,0,.507065,.618616,.00147641,0,.534278,.60005,.00140125,0,.562313,.581713,.00132441,0,.59118,.563546,.00125014,0,.620875,.545605,.00118249,0,.651373,.527559,.0011116,0,.682593,.509764,.00104979,0,.714286,.49193,985977e-9,0,.746032,.475011,928592e-9,0,.777778,.457878,873466e-9,0,.809524,.440979,819585e-9,0,.84127,.424613,772365e-9,0,.873016,.408549,722195e-9,0,.904762,.392771,680014e-9,0,.936508,.377317,636797e-9,0,.968254,.362352,598318e-9,0,1,1,.00114313,0,0,1,.00114314,0,0,.999999,.00114331,0,0,.999998,.00114404,0,0,.999994,.00114601,0,0,.999984,.00115019,0,0,.999967,.00115784,0,0,.999937,.0011706,0,0,.999894,.00119054,0,0,.999828,.00122031,0,0,.999735,.00126331,0,169263e-9,.999606,.00132382,0,949167e-9,.999426,.0014071,0,.00249668,.999173,.00151895,0,.00486392,.99873,.00166102,0,.00806323,.996243,.0017023,0,.0120895,.993779,.00172782,0,.0169288,.9919,.0018108,0,.0225633,.990524,.00196028,0,.028974,.98868,.00212014,0,.036142,.984663,.00217598,0,.044049,.981457,.00230563,0,.0526781,.977608,.00243966,0,.0620137,.972215,.00251336,0,.0720418,.966798,.0026285,0,.0827499,.960241,.00271409,0,.0941271,.952489,.00278381,0,.106164,.944127,.00285399,0,.118852,.934282,.00290994,0,.132185,.923271,.00294558,0,.146157,.910803,.00296269,0,.160766,.896705,.00296803,0,.176007,.88238,.00296637,0,.19188,.867116,.00293163,0,.208385,.853636,.00289418,0,.225523,.840469,.00284663,0,.243296,.82639,.00278594,0,.261709,.811759,.00271618,0,.280767,.796113,.00263187,0,.300476,.779518,.00254589,0,.320845,.763142,.00246003,0,.341883,.745464,.00236529,0,.363601,.727491,.00226536,0,.386011,.709414,.00216375,0,.409128,.691396,.00207127,0,.432967,.67368,.00197106,0,.457545,.656049,.00187022,0,.482881,.638188,.00177605,0,.508992,.620177,.00168482,0,.535899,.601506,.00158909,0,.563619,.58362,.00150583,0,.592165,.565496,.00141791,0,.621544,.54789,.00133693,0,.651743,.530323,.00126038,0,.682709,.512795,.00118556,0,.714286,.495199,.00111527,0,.746032,.478101,.0010489,0,.777778,.461511,984264e-9,0,.809524,.444879,92591e-8,0,.84127,.428424,866582e-9,0,.873016,.412495,814463e-9,0,.904762,.396975,764498e-9,0,.936508,.381614,715967e-9,0,.968254,.366732,672483e-9,0,1,1,.00155501,0,0,1,.00155503,0,0,1,.00155524,0,0,.999998,.00155615,0,0,.999994,.0015586,0,0,.999983,.00156379,0,0,.999963,.0015733,0,0,.999932,.00158911,0,0,.999882,.00161376,0,0,.99981,.00165041,0,100875e-10,.999708,.00170304,0,367658e-9,.999565,.00177658,0,.0014234,.999368,.00187688,0,.00327939,.999081,.00200989,0,.00596629,.99852,.00217177,0,.0094852,.99549,.0021745,0,.013824,.993252,.00222357,0,.0189642,.991727,.00235022,0,.0248856,.989951,.00250561,0,.0315669,.988029,.00268829,0,.0389882,.984029,.0027496,0,.0471302,.980683,.00289793,0,.0559754,.976554,.00303315,0,.0655081,.97139,.00313257,0,.0757138,.965544,.00323656,0,.08658,.95912,.00333432,0,.0980954,.951183,.0034039,0,.110251,.942974,.00347515,0,.123038,.932642,.00350381,0,.13645,.922158,.00354519,0,.150482,.909404,.00353851,0,.165129,.896071,.0035435,0,.18039,.881206,.00349936,0,.196263,.866077,.00347256,0,.212748,.85093,.003415,0,.229847,.837703,.00333367,0,.247561,.823878,.003249,0,.265895,.809449,.00316347,0,.284854,.794379,.00306351,0,.304445,.778138,.0029499,0,.324675,.761997,.00284099,0,.345555,.744938,.00272104,0,.367095,.727212,.00260715,0,.389309,.709549,.00248855,0,.41221,.691704,.00236783,0,.435814,.673689,.00225178,0,.460138,.656453,.00213765,0,.485203,.639128,.00202178,0,.511028,.621512,.00191443,0,.537634,.603598,.00180977,0,.565041,.58559,.00170456,0,.593268,.567852,.00160927,0,.622327,.5503,.00151395,0,.652217,.533033,.00142499,0,.682907,.515942,.00133955,0,.714296,.498814,.0012602,0,.746032,.481595,.00118188,0,.777778,.465117,.00111171,0,.809524,.448865,.00104091,0,.84127,.432711,976618e-9,0,.873016,.416822,91859e-8,0,.904762,.401272,857704e-9,0,.936508,.386226,807172e-9,0,.968254,.371321,75464e-8,0,1,1,.00209596,0,0,1,.00209598,0,0,1,.00209624,0,0,.999997,.00209736,0,0,.999991,.00210039,0,0,.999979,.00210678,0,0,.999959,.00211847,0,0,.999925,.0021379,0,0,.99987,.00216809,0,0,.999791,.00221281,0,681487e-10,.999677,.00227669,0,658161e-9,.999521,.00236533,0,.00200635,.999301,.00248514,0,.0041779,.998977,.00264185,0,.00718648,.998191,.00281695,0,.0110239,.994801,.00278518,0,.015672,.993091,.00288774,0,.0211091,.991571,.00303931,0,.0273123,.9897,.00321643,0,.034259,.987023,.00337332,0,.0419282,.983289,.00346146,0,.0502998,.979892,.00363704,0,.0593562,.975111,.00373601,0,.069081,.970351,.0038842,0,.0794598,.964131,.00397053,0,.0904798,.957747,.00408078,0,.10213,.949536,.00413533,0,.1144,.941372,.00420305,0,.127284,.931049,.00422815,0,.140772,.920647,.00425048,0,.154862,.908033,.0042281,0,.169548,.895028,.00422026,0,.184828,.879968,.00415042,0,.200701,.864875,.00408821,0,.217167,.84918,.00400909,0,.234227,.834934,.00391178,0,.251884,.821397,.00380066,0,.270141,.807135,.00367974,0,.289004,.792363,.00355172,0,.308479,.776661,.003411,0,.328575,.760705,.00328123,0,.349301,.744408,.00314003,0,.370668,.726994,.0029906,0,.392689,.709598,.00285034,0,.415379,.692112,.00271179,0,.438754,.674435,.00257185,0,.46283,.65676,.00243425,0,.48763,.639982,.00230351,0,.513173,.622983,.0021777,0,.539482,.605471,.00204991,0,.566579,.58796,.00193759,0,.594488,.570463,.00181976,0,.623226,.553058,.00171497,0,.6528,.535894,.00161109,0,.683198,.519089,.00151394,0,.714354,.502454,.00142122,0,.746032,.485681,.00133488,0,.777778,.468935,.00124975,0,.809524,.452951,.00117309,0,.84127,.437139,.00110155,0,.873016,.421446,.00103124,0,.904762,.405951,966387e-9,0,.936508,.391003,908119e-9,0,.968254,.376198,848057e-9,0,1,1,.00280076,0,0,1,.00280078,0,0,.999999,.00280109,0,0,.999997,.00280246,0,0,.999992,.00280616,0,0,.999979,.00281396,0,0,.999956,.00282822,0,0,.999916,.00285186,0,0,.999857,.0028885,0,0,.999768,.00294259,0,196026e-9,.999645,.00301946,0,.00104842,.99947,.00312541,0,.00270199,.999229,.00326733,0,.00519449,.998852,.00344992,0,.00852602,.997558,.00361052,0,.0126804,.994417,.0035898,0,.017635,.992824,.00372393,0,.023365,.991344,.00390695,0,.0298456,.989337,.00410392,0,.0370529,.985811,.00420987,0,.0449651,.982772,.00437488,0,.0535615,.979001,.00455069,0,.0628243,.974102,.00464462,0,.0727368,.969197,.00480577,0,.0832844,.962759,.00487818,0,.0944545,.956207,.00498176,0,.106236,.947909,.00503392,0,.118619,.939596,.00507474,0,.131595,.929642,.00509798,0,.145159,.918807,.00508476,0,.159305,.906921,.00505634,0,.174028,.893312,.00498845,0,.189327,.878933,.0049133,0,.2052,.863986,.0048259,0,.221647,.847936,.00470848,0,.23867,.832253,.00456889,0,.25627,.818619,.00442726,0,.274453,.804788,.00427677,0,.293222,.790241,.00411906,0,.312585,.775162,.00394833,0,.33255,.759463,.00377366,0,.353126,.743598,.00361026,0,.374324,.72697,.00343627,0,.396158,.709646,.00326422,0,.418641,.69277,.00309717,0,.44179,.675371,.0029356,0,.465624,.657863,.00277712,0,.490163,.640772,.00261738,0,.515429,.624441,.0024737,0,.541445,.607497,.00233125,0,.568236,.590438,.00218994,0,.595828,.573224,.0020664,0,.624242,.556168,.00193526,0,.653496,.539232,.00182463,0,.683588,.522352,.00170735,0,.714482,.506172,.00160555,0,.746032,.489842,.00150451,0,.777778,.473463,.00140938,0,.809524,.457266,.00132568,0,.84127,.441609,.0012376,0,.873016,.426348,.00116265,0,.904762,.411002,.00108935,0,.936508,.396045,.00101946,0,.968254,.381448,955665e-9,0,1,1,.0037121,0,0,1,.00371213,0,0,1,.00371251,0,0,.999997,.00371417,0,0,.99999,.00371863,0,0,.999977,.00372807,0,0,.99995,.00374529,0,0,.999908,.0037738,0,0,.999843,.00381789,0,123596e-10,.999745,.00388273,0,407442e-9,.999608,.00397443,0,.0015447,.999415,.00409998,0,.00351385,.999143,.00426662,0,.0063316,.9987,.00447625,0,.00998679,.996363,.00455323,0,.0144569,.994021,.00461052,0,.0197151,.992372,.00476359,0,.0257344,.991007,.00499101,0,.0324882,.988767,.0051972,0,.0399517,.984872,.00528407,0,.0481022,.982004,.00548926,0,.0569191,.977714,.00564385,0,.0663839,.973076,.0057693,0,.0764801,.967565,.0058924,0,.0871928,.961384,.00599629,0,.0985095,.954435,.00605998,0,.110419,.946303,.0061133,0,.122912,.937662,.00612028,0,.13598,.927867,.00612209,0,.149617,.916475,.00604813,0,.163817,.90541,.00603088,0,.178577,.891591,.00592218,0,.193894,.877573,.00578854,0,.209767,.862511,.00566648,0,.226196,.846861,.00551481,0,.243182,.83068,.00533754,0,.260728,.815725,.00515487,0,.278837,.802321,.0049655,0,.297515,.787826,.00475421,0,.316768,.773454,.00456002,0,.336605,.758224,.00434727,0,.357034,.74265,.00414444,0,.378067,.726729,.00393738,0,.399717,.710155,.00373575,0,.421998,.693312,.00353736,0,.444928,.67653,.00334368,0,.468523,.659444,.00315981,0,.492806,.642051,.00297809,0,.517798,.625758,.00280592,0,.543525,.609615,.00264254,0,.570012,.592919,.00248459,0,.597288,.576298,.00233327,0,.625379,.559489,.00219519,0,.654307,.542891,.00205441,0,.684084,.526255,.00193385,0,.714693,.509853,.00180745,0,.746044,.494131,.00169817,0,.777778,.478114,.0015913,0,.809524,.462274,.00148981,0,.84127,.446412,.00139537,0,.873016,.431274,.00130984,0,.904762,.41635,.00122403,0,.936508,.401476,.00114809,0,.968254,.386993,.00107563,0,1,1,.00488216,0,0,1,.0048822,0,0,1,.00488265,0,0,.999997,.00488463,0,0,.999988,.00488999,0,0,.999974,.00490129,0,0,.999946,.00492191,0,0,.999897,.00495598,0,0,.999825,.00500855,0,744791e-10,.999718,.00508559,0,712744e-9,.999565,.005194,0,.00215249,.999352,.00534147,0,.00444576,.999046,.00553523,0,.00759218,.998492,.00577016,0,.0115714,.995564,.00578487,0,.0163557,.993339,.00586414,0,.021915,.991834,.00606002,0,.0282201,.990496,.00633312,0,.0352433,.987826,.00651941,0,.042959,.98383,.00660842,0,.0513439,.98109,.00685523,0,.0603772,.976131,.00695778,0,.0700402,.971922,.00714236,0,.0803163,.965901,.00721437,0,.0911908,.959606,.00732017,0,.102651,.952504,.00735788,0,.114686,.944365,.00738493,0,.127286,.935652,.00737969,0,.140443,.925813,.00733612,0,.154151,.914397,.00723094,0,.168405,.903257,.00714002,0,.183201,.890015,.00700149,0,.198536,.876014,.00682813,0,.214409,.861436,.00665567,0,.23082,.845752,.00644526,0,.24777,.829169,.00621635,0,.265263,.813435,.00597789,0,.283301,.799701,.00575694,0,.301889,.785726,.00549866,0,.321035,.77152,.0052503,0,.340746,.75683,.00499619,0,.361032,.741951,.0047543,0,.381904,.726367,.0045084,0,.403374,.710537,.00426784,0,.425457,.693965,.00403487,0,.448169,.677724,.0038075,0,.47153,.66117,.00359431,0,.495561,.644274,.00338354,0,.520284,.627449,.00318163,0,.545725,.611645,.00299672,0,.571911,.595614,.00281016,0,.598873,.579426,.00264252,0,.62664,.563016,.00247509,0,.655239,.546728,.00232647,0,.684692,.530539,.00217803,0,.714999,.514164,.00204216,0,.746106,.498344,.00191403,0,.777778,.482957,.00179203,0,.809524,.467336,.00167695,0,.84127,.451994,.00157567,0,.873016,.436514,.00147113,0,.904762,.42178,.00138034,0,.936508,.407271,.00129219,0,.968254,.392822,.0012098,0,1,1,.00637427,0,0,1,.00637431,0,0,.999999,.00637485,0,0,.999996,.00637721,0,0,.999987,.00638357,0,0,.999971,.006397,0,0,.999939,.00642142,0,0,.999888,.00646177,0,0,.999807,.00652387,0,207916e-9,.999689,.00661454,0,.00112051,.99952,.00674155,0,.00287719,.999283,.00691313,0,.00550145,.998936,.00713598,0,.00897928,.998165,.00738501,0,.0132829,.994847,.00734388,0,.01838,.993182,.00749991,0,.0242381,.991665,.0077246,0,.030826,.989708,.00797579,0,.0381152,.986663,.00813011,0,.0460794,.983288,.00830365,0,.0546951,.980104,.00853496,0,.0639411,.974855,.00861045,0,.0737988,.97045,.00879133,0,.0842516,.964509,.00886377,0,.0952848,.957594,.00890346,0,.106886,.950546,.00893289,0,.119044,.942225,.00890074,0,.131749,.933365,.00886826,0,.144994,.923202,.0087316,0,.158772,.912605,.00863082,0,.173078,.901099,.00847403,0,.187908,.888177,.00825838,0,.203261,.873955,.00801834,0,.219134,.860091,.00779026,0,.235527,.84434,.00752478,0,.252443,.828517,.00724074,0,.269883,.81239,.00693769,0,.287851,.79721,.00664817,0,.306352,.783489,.00634763,0,.325393,.769514,.00604221,0,.344981,.755419,.00573568,0,.365126,.741083,.00544359,0,.385839,.726059,.00515515,0,.407132,.710809,.00487139,0,.42902,.695052,.00459846,0,.45152,.678886,.00433412,0,.474651,.663042,.00407981,0,.498433,.646634,.00384264,0,.52289,.630117,.00360897,0,.548048,.613804,.00338863,0,.573936,.598338,.00318486,0,.600584,.582687,.00298377,0,.628027,.566809,.00280082,0,.656295,.550817,.00262255,0,.685417,.534937,.00245835,0,.715406,.519151,.00230574,0,.74624,.503118,.0021549,0,.777778,.487723,.00202008,0,.809524,.472725,.00189355,0,.84127,.457599,.00177108,0,.873016,.442558,.00165843,0,.904762,.427624,.00155494,0,.936508,.413171,.00145273,0,.968254,.399122,.00136454,0,1,1,.00826496,0,0,1,.00826499,0,0,1,.00826564,0,0,.999996,.00826842,0,0,.999987,.00827589,0,0,.999967,.00829167,0,0,.999933,.00832037,0,0,.999876,.00836768,0,109338e-10,.999786,.00844031,0,427145e-9,.999655,.00854603,0,.0016384,.999468,.00869337,0,.00372392,.999203,.008891,0,.00668513,.998803,.00914387,0,.0104968,.99748,.00935838,0,.015125,.994446,.00933309,0,.0205338,.99292,.00953084,0,.0266884,.991414,.0097893,0,.0335565,.989049,.0100228,0,.0411086,.98582,.0101664,0,.0493181,.982441,.0103582,0,.0581613,.978595,.0105292,0,.0676169,.973495,.0106274,0,.0776661,.968405,.0107261,0,.0882926,.962717,.0108234,0,.0994817,.955478,.0108102,0,.111221,.948275,.0107914,0,.123499,.940006,.0107161,0,.136308,.930831,.0106309,0,.149639,.920648,.0104083,0,.163485,.910205,.0102312,0,.177843,.898445,.0100051,0,.192707,.885986,.00971928,0,.208077,.872204,.00940747,0,.22395,.858436,.0091085,0,.240326,.843454,.00876595,0,.257208,.827437,.00839794,0,.274596,.811488,.00803692,0,.292496,.796039,.00767352,0,.310911,.781083,.0073097,0,.329849,.767642,.00694032,0,.349316,.753901,.00657476,0,.369323,.740131,.00622699,0,.38988,.725845,.0058838,0,.410999,.710991,.00555586,0,.432696,.696002,.00523089,0,.454987,.680461,.00492494,0,.47789,.664875,.00463464,0,.501426,.649273,.00435422,0,.52562,.63302,.0040875,0,.550498,.61705,.00384075,0,.576089,.601154,.00359557,0,.602427,.586008,.00337636,0,.629544,.570699,.00316019,0,.657479,.555166,.00296033,0,.686264,.539645,.00277552,0,.715924,.524159,.00259499,0,.746459,.508682,.00243257,0,.777789,.493163,.00227851,0,.809524,.478004,.00213083,0,.84127,.46347,.00199502,0,.873016,.448778,.00186967,0,.904762,.434105,.00174732,0,.936508,.419576,.00163861,0,.968254,.405541,.00153341,0,1,1,.0106462,0,0,1,.0106462,0,0,.999999,.010647,0,0,.999995,.0106502,0,0,.999985,.0106589,0,0,.999964,.0106773,0,0,.999925,.0107106,0,0,.999861,.0107655,0,712986e-10,.999763,.0108497,0,743959e-9,.999616,.0109716,0,.00227361,.999408,.0111408,0,.0046983,.999112,.0113659,0,.00800158,.998637,.0116475,0,.0121493,.996223,.0117231,0,.0171023,.994006,.0118064,0,.0228218,.992444,.0120254,0,.0292711,.991028,.0123314,0,.036417,.98803,.0124954,0,.0442295,.984816,.0126538,0,.0526815,.981399,.0128537,0,.0617492,.977085,.0129694,0,.0714114,.972154,.013091,0,.0816495,.966617,.0131166,0,.0924472,.960628,.0131583,0,.10379,.953295,.0131094,0,.115665,.94575,.0129966,0,.128062,.937654,.0128796,0,.140972,.927716,.0126477,0,.154387,.917932,.0123889,0,.168301,.907719,.012131,0,.182709,.89584,.0118013,0,.197608,.883526,.0114145,0,.212994,.870301,.0110075,0,.228867,.856272,.0106019,0,.245227,.842251,.0101938,0,.262074,.826466,.00973254,0,.279412,.810859,.0092846,0,.297244,.795051,.00883304,0,.315575,.780053,.00840272,0,.334412,.76575,.00796438,0,.35376,.752298,.00752526,0,.373631,.739153,.00711486,0,.394034,.725514,.00670361,0,.414983,.711473,.00632656,0,.436491,.696936,.00595206,0,.458575,.682126,.00559191,0,.481253,.667027,.00525362,0,.504547,.651875,.00493805,0,.528481,.636463,.00462848,0,.553081,.620641,.00433936,0,.578377,.604931,.00407,0,.604404,.589549,.00380864,0,.631197,.574712,.00357049,0,.658795,.559775,.00334466,0,.687238,.544514,.00312505,0,.716559,.529555,.00293199,0,.746776,.514402,.00274204,0,.777849,.499302,.00256647,0,.809524,.484114,.00239901,0,.84127,.469308,.00225148,0,.873016,.455133,.00210178,0,.904762,.440939,.0019727,0,.936508,.426627,.00184382,0,.968254,.412509,.00172548,0,1,1,.013628,0,0,1,.0136281,0,0,.999999,.0136289,0,0,.999995,.0136327,0,0,.999983,.0136427,0,0,.99996,.0136638,0,0,.999917,.0137022,0,0,.999846,.0137652,0,204597e-9,.999736,.0138615,0,.00116837,.999573,.0140007,0,.00303325,.99934,.0141927,0,.00580613,.999004,.0144457,0,.00945626,.998407,.0147489,0,.0139421,.995464,.014731,0,.0192202,.993328,.0148283,0,.0252495,.991799,.0150797,0,.0319921,.990397,.0154316,0,.0394138,.986835,.0155005,0,.0474843,.983938,.0157308,0,.0561763,.980154,.0158753,0,.0654661,.975659,.0159581,0,.0753326,.970171,.0159832,0,.0857571,.964803,.0160084,0,.0967236,.958366,.0159484,0,.108218,.950613,.0158001,0,.120227,.942874,.0155845,0,.132741,.935005,.0154292,0,.145751,.924991,.0150742,0,.159249,.914814,.0146757,0,.17323,.904743,.0143097,0,.187687,.893216,.0138695,0,.202619,.880769,.0133706,0,.218021,.868136,.0128606,0,.233894,.85469,.0123403,0,.250238,.840593,.0118091,0,.267052,.825808,.011253,0,.284341,.81009,.0107099,0,.302106,.79504,.0101636,0,.320354,.779757,.00964041,0,.33909,.764697,.00911896,0,.358322,.750913,.00859533,0,.378059,.738175,.00811592,0,.398311,.725242,.00764504,0,.41909,.711864,.00718885,0,.440412,.698009,.00675843,0,.462292,.683841,.00634984,0,.484748,.669391,.00595502,0,.507802,.654731,.00558671,0,.531477,.639805,.00523578,0,.555802,.624789,.00490834,0,.580805,.609325,.00459448,0,.606522,.593975,.00430342,0,.63299,.578983,.00403019,0,.66025,.564442,.0037707,0,.688346,.549835,.0035316,0,.717319,.535039,.00330255,0,.7472,.520403,.00308932,0,.777982,.505687,.00289335,0,.809524,.490939,.00270818,0,.84127,.476233,.0025343,0,.873016,.461624,.00237097,0,.904762,.447833,.00222065,0,.936508,.433992,.00207561,0,.968254,.420147,.00194955,0,1,1,.0173415,0,0,1,.0173416,0,0,.999999,.0173426,0,0,.999995,.0173468,0,0,.999983,.0173582,0,0,.999954,.0173822,0,0,.999908,.0174258,0,669501e-11,.999828,.0174973,0,427399e-9,.999705,.0176063,0,.00171019,.999524,.0177631,0,.0039248,.999263,.0179781,0,.00705382,.998878,.018258,0,.0110552,.998012,.0185551,0,.0158812,.994614,.0184264,0,.0214852,.993132,.0186385,0,.0278239,.991563,.0189067,0,.0348585,.989298,.0191577,0,.0425544,.986036,.0192522,0,.050881,.982558,.0194063,0,.059811,.978531,.019486,0,.0693209,.974198,.0195847,0,.0793895,.968148,.0194749,0,.0899984,.962565,.0194277,0,.101132,.956041,.0192991,0,.112775,.947749,.0189893,0,.124917,.94018,.018704,0,.137547,.93165,.0183458,0,.150655,.921798,.0178775,0,.164236,.911573,.0173618,0,.178281,.901569,.0168482,0,.192788,.890341,.016265,0,.207752,.877835,.0156199,0,.223171,.865472,.0149516,0,.239044,.852905,.0143274,0,.255371,.838906,.0136643,0,.272153,.824888,.0129903,0,.289393,.809977,.0123218,0,.307093,.794697,.0116572,0,.325259,.780028,.0110307,0,.343896,.765124,.0104236,0,.363012,.750411,.0098219,0,.382617,.737264,.00924397,0,.402719,.724799,.00868719,0,.423332,.712253,.00816476,0,.444469,.699267,.00767262,0,.466146,.685618,.00719746,0,.488383,.671736,.00673916,0,.511199,.657777,.00631937,0,.534618,.643497,.00592411,0,.558668,.62889,.00553928,0,.58338,.614299,.0051934,0,.608787,.599197,.00485985,0,.634929,.584175,.00454357,0,.661849,.569541,.00425787,0,.689594,.555193,.00397905,0,.718211,.540947,.00372364,0,.747742,.526593,.00348599,0,.778205,.512335,.00326103,0,.80953,.498017,.00305137,0,.84127,.483609,.00285485,0,.873016,.469368,.00267472,0,.904762,.455037,.00249945,0,.936508,.441493,.00234792,0,.968254,.428147,.00219936,0,1,1,.0219422,0,0,1,.0219423,0,0,.999998,.0219434,0,0,.999993,.0219481,0,0,.999981,.021961,0,0,.999949,.0219879,0,0,.999896,.0220367,0,593194e-10,.999808,.0221167,0,75364e-8,.99967,.0222383,0,.00237884,.999466,.0224125,0,.00495612,.999174,.0226495,0,.00844887,.998725,.0229525,0,.0128058,.996979,.0231123,0,.0179742,.994317,.0230742,0,.0239047,.992781,.0232895,0,.0305526,.991191,.0235734,0,.0378786,.987787,.0236152,0,.0458475,.985092,.0237994,0,.0544287,.981121,.0238553,0,.0635952,.976924,.0238706,0,.0733233,.97218,.0238704,0,.0835922,.965956,.0236598,0,.0943839,.959998,.0234735,0,.105682,.953245,.0232277,0,.117474,.944445,.0226973,0,.129747,.937087,.0223527,0,.142491,.928341,.0218144,0,.155697,.9184,.0211516,0,.169358,.907959,.0204553,0,.183469,.89808,.0197673,0,.198024,.887047,.0189915,0,.21302,.875221,.0182082,0,.228455,.86269,.0173584,0,.244329,.850735,.0165718,0,.260639,.837545,.0157524,0,.277389,.823639,.0149482,0,.29458,.809699,.0141431,0,.312216,.794797,.0133527,0,.3303,.780578,.0126193,0,.34884,.766019,.0118914,0,.367842,.751447,.0111839,0,.387315,.737275,.010514,0,.40727,.724545,.00987277,0,.427717,.712644,.00926569,0,.448671,.700432,.00869029,0,.470149,.687664,.00814691,0,.492167,.674288,.00763012,0,.514746,.660966,.00714437,0,.537911,.647264,.00668457,0,.561688,.633431,.00626581,0,.586108,.619133,.00585593,0,.611206,.604935,.00548188,0,.637022,.590236,.00513288,0,.663599,.575473,.0047906,0,.690989,.561228,.00448895,0,.719242,.547054,.00420233,0,.748411,.533175,.00392869,0,.778531,.519163,.00367445,0,.809583,.505328,.00344097,0,.84127,.491446,.00322003,0,.873016,.477356,.00301283,0,.904762,.46356,.00282592,0,.936508,.449623,.00264956,0,.968254,.436068,.00246956,0,1,1,.0276135,0,0,1,.0276136,0,0,.999998,.0276148,0,0,.999993,.0276201,0,0,.999976,.0276342,0,0,.999945,.027664,0,0,.999884,.0277179,0,18679e-8,.999784,.027806,0,.00119607,.99963,.0279394,0,.00318407,.999401,.0281295,0,.00613601,.999066,.0283858,0,.00999963,.998524,.0287027,0,.0147164,.995702,.0286256,0,.0202295,.993593,.0286733,0,.0264876,.992067,.0288989,0,.0334452,.990548,.0292135,0,.0410621,.986775,.0291296,0,.0493032,.984054,.0293099,0,.0581381,.979481,.0291881,0,.0675397,.975297,.0291598,0,.0774848,.96981,.028954,0,.0879528,.963524,.028628,0,.0989258,.957398,.0283135,0,.110388,.950088,.0278469,0,.122327,.941538,.0271798,0,.134729,.933332,.0265388,0,.147587,.924392,.0257776,0,.160889,.914581,.024916,0,.174631,.904347,.0240242,0,.188806,.894324,.0231229,0,.203409,.883724,.022153,0,.218437,.872207,.0211355,0,.233888,.859927,.0201048,0,.249761,.848373,.0191263,0,.266056,.836023,.0181306,0,.282774,.82289,.0171718,0,.299917,.809324,.0162196,0,.317488,.795361,.0152622,0,.335493,.781253,.01439,0,.353936,.767338,.013533,0,.372825,.753156,.0127244,0,.392168,.739122,.0119454,0,.411976,.725358,.0112054,0,.432259,.712949,.010487,0,.453032,.701621,.00984032,0,.47431,.689703,.00921495,0,.496111,.677216,.00862492,0,.518456,.664217,.00806882,0,.541367,.65137,.00755922,0,.564872,.638,.00705705,0,.589001,.62453,.00661266,0,.613789,.610601,.00618432,0,.639277,.59676,.00578033,0,.66551,.582433,.00540927,0,.692539,.568026,.00506104,0,.720422,.55414,.0047353,0,.749216,.540178,.00442889,0,.778974,.526513,.00414363,0,.809711,.512954,.00388237,0,.84127,.499403,.00362875,0,.873016,.486026,.00340827,0,.904762,.472345,.00318598,0,.936508,.458828,.00297635,0,.968254,.445379,.00279447,0,1,1,.0345716,0,0,1,.0345717,0,0,.999999,.034573,0,0,.999991,.0345787,0,0,.999974,.0345941,0,0,.999937,.0346263,0,188589e-11,.999869,.0346847,0,409238e-9,.999757,.0347798,0,.0017674,.999582,.0349233,0,.00413658,.999322,.0351265,0,.00747408,.998939,.0353967,0,.0117157,.998219,.0357018,0,.0167966,.994974,.0354726,0,.0226572,.993201,.0355621,0,.0292445,.991573,.0357641,0,.0365123,.989301,.0359252,0,.0444203,.985712,.0358017,0,.0529334,.982411,.0358353,0,.0620214,.977827,.035617,0,.0716574,.973278,.0354398,0,.0818186,.967397,.0350483,0,.0924846,.960696,.0344795,0,.103638,.954349,.0339861,0,.115263,.946066,.0331323,0,.127348,.938012,.032359,0,.13988,.929413,.0314413,0,.152849,.920355,.0304103,0,.166248,.910586,.0292785,0,.18007,.900609,.0281391,0,.194308,.890093,.0269103,0,.208958,.880013,.0257269,0,.224018,.869001,.0244671,0,.239485,.85751,.0232252,0,.255359,.84582,.0220117,0,.271638,.834383,.0208274,0,.288324,.822158,.0196628,0,.305419,.809056,.0185306,0,.322927,.795832,.0174174,0,.340851,.782547,.0163758,0,.359199,.7689,.015391,0,.377975,.755526,.0144488,0,.397189,.741681,.0135372,0,.416851,.728178,.0126957,0,.436971,.714642,.0118812,0,.457564,.702756,.0111165,0,.478644,.69175,.0104145,0,.500229,.680159,.00974439,0,.522339,.668073,.00911926,0,.544997,.655405,.00851393,0,.56823,.642921,.00797637,0,.592068,.629993,.00745119,0,.616546,.616828,.00696972,0,.641705,.603305,.00652425,0,.66759,.589833,.00610188,0,.694255,.575945,.00570834,0,.72176,.561745,.00533384,0,.750168,.548277,.00500001,0,.779545,.534467,.00467582,0,.809933,.521032,.00438092,0,.841272,.507877,.00410348,0,.873016,.494654,.00383618,0,.904762,.481592,.00358699,0,.936508,.468509,.00337281,0,.968254,.455293,.00316196,0,1,1,.0430698,0,0,1,.0430699,0,0,.999998,.0430713,0,0,.999991,.0430773,0,0,.99997,.0430936,0,0,.999928,.0431277,0,406396e-10,.999852,.0431893,0,744376e-9,.999724,.0432895,0,.0024806,.999527,.0434397,0,.00524779,.99923,.0436507,0,.00898164,.998783,.0439255,0,.0136083,.997507,.0441104,0,.0190582,.994418,.0438225,0,.0252694,.992864,.0439396,0,.0321879,.991127,.0440962,0,.039767,.987331,.0438408,0,.0479667,.984819,.0438991,0,.056752,.980384,.0435906,0,.0660929,.975846,.0432543,0,.075963,.970748,.0428293,0,.0863398,.964303,.042153,0,.0972035,.95772,.0414111,0,.108537,.950747,.0405893,0,.120325,.942533,.0394887,0,.132554,.934045,.0383544,0,.145215,.924942,.037057,0,.158296,.915811,.0356993,0,.17179,.90612,.0342401,0,.185691,.896434,.0328078,0,.199993,.886021,.031288,0,.214691,.876081,.0297776,0,.229782,.865608,.0282334,0,.245265,.854924,.026749,0,.261138,.843607,.02526,0,.277401,.832456,.0238214,0,.294056,.821342,.0224682,0,.311104,.809303,.0211297,0,.328548,.796468,.0198387,0,.346394,.784046,.0186227,0,.364645,.771262,.0174561,0,.38331,.758118,.0163806,0,.402396,.745075,.0153287,0,.421912,.731926,.0143647,0,.44187,.71863,.0134363,0,.462283,.705414,.0125603,0,.483165,.693792,.0117508,0,.504535,.683108,.0110016,0,.52641,.67183,.0102757,0,.548816,.66015,.00962044,0,.571776,.647907,.00898031,0,.595323,.635734,.00840811,0,.619489,.623208,.00786211,0,.644317,.610438,.00734953,0,.669852,.597345,.00687688,0,.696148,.584138,.00643469,0,.723267,.5707,.00602236,0,.75128,.556966,.0056324,0,.780258,.543607,.00528277,0,.810268,.530213,.00493999,0,.841311,.516912,.00462265,0,.873016,.503916,.0043307,0,.904762,.491146,.00406858,0,.936508,.478439,.00381436,0,.968254,.465834,.00358003,0,1,1,.0534039,0,0,1,.053404,0,0,.999998,.0534055,0,0,.999989,.0534116,0,0,.999968,.0534283,0,0,.999918,.0534633,0,155895e-9,.99983,.0535262,0,.00120914,.999685,.0536281,0,.00334944,.999461,.0537799,0,.00653077,.999119,.0539902,0,.0106718,.998582,.0542524,0,.0156907,.995919,.0540318,0,.0215147,.993735,.0538914,0,.0280801,.992126,.0539557,0,.0353323,.990266,.0540401,0,.0432247,.986317,.0536064,0,.0517172,.983213,.0534425,0,.0607754,.978303,.0528622,0,.0703698,.973665,.0523363,0,.0804742,.968091,.0516165,0,.0910667,.961026,.0505434,0,.102128,.954333,.049523,0,.113641,.946372,.0481698,0,.125591,.938254,.0467674,0,.137965,.929516,.0452341,0,.150754,.920106,.0435083,0,.163947,.910899,.0417399,0,.177537,.901532,.0399389,0,.191516,.891919,.0380901,0,.205881,.882006,.0362341,0,.220626,.871965,.0343444,0,.235749,.862145,.0324832,0,.251248,.852058,.0306681,0,.267121,.84161,.0289097,0,.283368,.830806,.0272079,0,.299992,.820476,.0256089,0,.316992,.809514,.0240394,0,.334374,.797865,.0225379,0,.35214,.785621,.0211235,0,.370296,.773765,.0197908,0,.388849,.761629,.0185235,0,.407807,.748891,.0173358,0,.427178,.736437,.0162305,0,.446974,.723707,.0151778,0,.467207,.710606,.0141791,0,.487892,.698019,.0132592,0,.509046,.686203,.0123887,0,.530687,.675692,.0115976,0,.552839,.664826,.0108325,0,.575527,.65349,.0101348,0,.59878,.641774,.00947756,0,.622634,.629794,.00886058,0,.647128,.617647,.00828526,0,.672308,.60534,.00775312,0,.698231,.592718,.00726033,0,.724958,.579746,.00679731,0,.752563,.566763,.00636111,0,.781127,.553515,.00595228,0,.810733,.540118,.00556876,0,.841426,.527325,.00523051,0,.873016,.514265,.00490712,0,.904762,.501406,.00460297,0,.936508,.488922,.00431247,0,.968254,.476541,.0040472,0,1,1,.0659184,0,0,1,.0659185,0,0,.999998,.06592,0,0,.999988,.0659259,0,0,.999963,.0659423,0,0,.999907,.0659764,0,374198e-9,.999806,.0660376,0,.00182071,.999639,.0661361,0,.0043894,.999378,.0662814,0,.00800055,.998985,.0664779,0,.0125594,.998285,.0666914,0,.0179786,.995071,.0661989,0,.0241822,.993172,.0660454,0,.031106,.991438,.0660105,0,.0386952,.988428,.0656875,0,.0469032,.985218,.0652913,0,.0556905,.981128,.0647107,0,.065023,.976015,.0638491,0,.0748717,.97097,.062993,0,.0852112,.964582,.0617927,0,.0960199,.957383,.0603626,0,.107279,.949969,.0588128,0,.118971,.941843,.0570274,0,.131084,.933624,.0551885,0,.143604,.924543,.053122,0,.156521,.914919,.0508897,0,.169825,.905773,.0486418,0,.18351,.896434,.0463364,0,.197569,.887195,.0440623,0,.211997,.877706,.0417799,0,.226789,.867719,.03945,0,.241944,.858587,.037243,0,.257458,.849317,.0350956,0,.273331,.839585,.0329852,0,.289563,.829856,.0310028,0,.306154,.819589,.0290953,0,.323108,.809714,.0272738,0,.340426,.79934,.0255631,0,.358113,.788224,.0239175,0,.376175,.776619,.0223831,0,.394616,.76521,.0209298,0,.413445,.753716,.0195786,0,.432671,.741564,.0183001,0,.452305,.729413,.0171259,0,.472358,.717146,.0159933,0,.492845,.70436,.0149495,0,.513783,.69219,.0139681,0,.535189,.680289,.0130577,0,.557087,.669611,.0122198,0,.5795,.659113,.0114174,0,.602459,.648148,.0106729,0,.625997,.636905,.00998997,0,.650154,.625154,.00934313,0,.674976,.613481,.00874839,0,.700518,.60154,.00818265,0,.726845,.58943,.00766889,0,.754032,.576828,.00717153,0,.782167,.564194,.00672696,0,.811344,.551501,.00630863,0,.841644,.538635,.00592177,0,.873016,.525724,.00554888,0,.904762,.513209,.00520225,0,.936508,.500457,.00488231,0,.968254,.48799,.00457153,0,1,1,.0810131,0,0,1,.0810133,0,0,.999997,.0810145,0,0,.999985,.08102,0,0,.999956,.0810347,0,195026e-10,.999893,.0810656,0,719316e-9,.999777,.0811205,0,.00259774,.999583,.081208,0,.00561807,.999281,.0813343,0,.00967472,.998813,.0814969,0,.0146627,.997597,.0815217,0,.0204902,.994379,.0808502,0,.0270802,.992744,.0806792,0,.0343674,.990745,.0804589,0,.0422974,.986646,.0796107,0,.0508242,.983611,.0790913,0,.0599087,.978869,.0780746,0,.0695175,.973475,.0768218,0,.0796223,.967845,.0754926,0,.0901983,.960778,.0737063,0,.101224,.953333,.0718052,0,.112682,.945274,.0695946,0,.124555,.936955,.0672492,0,.136831,.928319,.0647732,0,.149496,.919075,.0620947,0,.162542,.909114,.0591816,0,.175958,.900137,.0563917,0,.189739,.891069,.0535392,0,.203877,.882262,.0507642,0,.218368,.873232,.0479793,0,.233208,.864042,.045226,0,.248393,.855002,.0425413,0,.263923,.846569,.0400126,0,.279796,.837714,.0375269,0,.296012,.828918,.0352027,0,.312573,.819783,.0330011,0,.329479,.810129,.0308908,0,.346734,.800866,.0289112,0,.364342,.79093,.0270255,0,.382307,.780593,.0252758,0,.400637,.769511,.0236178,0,.419337,.758558,.0220652,0,.438418,.747632,.0206289,0,.457889,.736146,.0192873,0,.477761,.724093,.0180333,0,.49805,.71234,.0168264,0,.51877,.700201,.015746,0,.53994,.687949,.0147027,0,.561581,.676163,.0137512,0,.583718,.665001,.0128655,0,.60638,.65472,.0120366,0,.629599,.644213,.0112604,0,.653415,.633382,.0105413,0,.677874,.62212,.00986498,0,.70303,.610631,.00923308,0,.728948,.599078,.00864206,0,.755706,.587519,.00811784,0,.783396,.575505,.00761237,0,.812121,.563148,.00713949,0,.841989,.550828,.00668379,0,.873035,.538458,.00627715,0,.904762,.525905,.00588336,0,.936508,.513517,.00552687,0,.968254,.501395,.00519681,0,1,1,.0991506,0,0,1,.0991504,0,0,.999996,.0991515,0,0,.999984,.0991558,0,0,.999947,.0991672,0,114389e-9,.999874,.0991912,0,.00121503,.999739,.0992331,0,.00356108,.999514,.0992983,0,.00705578,.999159,.0993877,0,.011574,.998586,.0994837,0,.017003,.995731,.0988425,0,.0232484,.993384,.098276,0,.0302318,.991615,.0979269,0,.0378884,.989029,.0973432,0,.0461641,.985373,.0963539,0,.0550136,.981278,.0952306,0,.0643988,.975777,.0936233,0,.0742868,.970526,.0920219,0,.0846501,.963755,.0898912,0,.0954644,.956676,.0876064,0,.106709,.948099,.0847751,0,.118367,.939718,.0818638,0,.130423,.931305,.078857,0,.142862,.922342,.0756127,0,.155674,.912842,.0721473,0,.168849,.903304,.0686195,0,.182378,.89411,.0650589,0,.196255,.885512,.0616022,0,.210473,.877193,.0582434,0,.225027,.86877,.0548979,0,.239915,.860267,.0516095,0,.255132,.851915,.048468,0,.270678,.843912,.0454447,0,.286551,.83604,.0425612,0,.302751,.828245,.0398752,0,.31928,.820159,.0373198,0,.336138,.81167,.034916,0,.35333,.802659,.0326402,0,.370858,.793921,.0304901,0,.388728,.784713,.0284857,0,.406944,.774946,.0266186,0,.425515,.76448,.0248593,0,.444449,.753793,.0232114,0,.463756,.743506,.0217039,0,.483447,.732555,.0202841,0,.503535,.720965,.0189648,0,.524036,.709422,.0177189,0,.544968,.697756,.0165626,0,.56635,.685565,.015483,0,.588208,.673987,.0144892,0,.610569,.66244,.0135607,0,.633466,.651675,.0126956,0,.656936,.641598,.0118788,0,.681025,.63121,.0111261,0,.705788,.620514,.010437,0,.731289,.609366,.00978747,0,.757606,.598137,.00917257,0,.784834,.586966,.00859778,0,.813085,.575549,.00806803,0,.842485,.563797,.00757294,0,.87313,.551758,.00710592,0,.904762,.539894,.0066841,0,.936508,.527901,.00627901,0,.968254,.515819,.00590506,0,1,1,.120864,0,0,1,.120864,0,0,.999996,.120864,0,0,.99998,.120867,0,0,.99994,.120872,0,323781e-9,.999852,.120884,0,.00188693,.999693,.120903,0,.00473489,.999426,.120929,0,.00872704,.999002,.120955,0,.0137237,.998235,.120918,0,.0196068,.994608,.119764,0,.0262803,.992997,.119265,0,.0336657,.990968,.11863,0,.0416987,.987002,.117261,0,.0503261,.983524,.116009,0,.0595035,.97875,.114252,0,.0691935,.972652,.11193,0,.0793645,.966613,.109555,0,.0899894,.959275,.106612,0,.101045,.951272,.103375,0,.112512,.942323,.0996594,0,.124372,.933679,.0958841,0,.136611,.924822,.0919265,0,.149216,.915742,.0878061,0,.162176,.906348,.0834894,0,.175482,.896883,.079085,0,.189125,.88774,.0746745,0,.203098,.87986,.0705773,0,.217396,.871998,.0665005,0,.232015,.864325,.0625413,0,.24695,.856685,.0586781,0,.2622,.84925,.0550063,0,.277761,.841719,.0514727,0,.293634,.834755,.0481398,0,.309819,.827853,.0450172,0,.326315,.820888,.0420969,0,.343126,.813616,.0393702,0,.360254,.805767,.0367771,0,.377701,.797338,.0343274,0,.395474,.789122,.0320529,0,.413577,.780601,.0299485,0,.432018,.771424,.0279812,0,.450804,.761502,.0261054,0,.469944,.751166,.0243942,0,.489451,.741276,.0228087,0,.509337,.730898,.0213265,0,.529617,.719878,.0199307,0,.550307,.708379,.0186574,0,.571428,.697165,.0174446,0,.593003,.685554,.0163144,0,.615059,.673631,.015276,0,.637628,.662385,.0143003,0,.660746,.651059,.0134112,0,.68446,.640451,.0125794,0,.70882,.630536,.011793,0,.733893,.620316,.0110547,0,.759756,.609722,.0103668,0,.786505,.598804,.00973009,0,.814259,.587871,.00912812,0,.843157,.577121,.00858916,0,.87334,.566019,.00807333,0,.904762,.554664,.00759687,0,.936508,.543101,.00714759,0,.968254,.531558,.00673418,0,1,1,.146767,0,0,1,.146767,0,0,.999997,.146767,0,0,.999977,.146765,0,320658e-11,.999929,.146762,0,682576e-9,.999823,.146753,0,.00276402,.999633,.146735,0,.00614771,.999314,.146699,0,.0106613,.998796,.14662,0,.0161546,.997124,.146107,0,.0225063,.994062,.144857,0,.0296198,.992154,.144011,0,.037417,.989186,.142712,0,.0458348,.985279,.140926,0,.0548211,.980826,.13885,0,.0643326,.975056,.136168,0,.074333,.969005,.133217,0,.0847917,.961554,.12959,0,.0956828,.954206,.125886,0,.106984,.945046,.121335,0,.118675,.935678,.116492,0,.130741,.926748,.111635,0,.143166,.917764,.106625,0,.155939,.908358,.101325,0,.169049,.899219,.0960249,0,.182487,.890089,.0906527,0,.196245,.881488,.0853905,0,.210317,.874031,.0804177,0,.224697,.866932,.0756005,0,.23938,.859976,.0709019,0,.254364,.853375,.0664391,0,.269646,.846971,.0622012,0,.285223,.840483,.058129,0,.301096,.833969,.0542762,0,.317265,.82806,.0507042,0,.333729,.822128,.047368,0,.350491,.815989,.044272,0,.367554,.809336,.0413444,0,.38492,.802177,.038601,0,.402594,.79441,.0360227,0,.420582,.786573,.0336383,0,.438891,.778619,.0314321,0,.457527,.77,.029362,0,.476499,.760698,.0274102,0,.49582,.750932,.0256146,0,.5155,.740993,.023974,0,.535555,.731159,.0224182,0,.556,.720836,.0209889,0,.576855,.709913,.0196411,0,.598143,.698415,.0183824,0,.619888,.68745,.0172222,0,.642123,.676154,.0161509,0,.664883,.664383,.0151397,0,.688211,.6533,.0141873,0,.71216,.642072,.0133105,0,.736792,.631412,.0124932,0,.762186,.621622,.0117408,0,.788439,.611681,.0110358,0,.815672,.60142,.0103775,0,.844034,.59083,.00975623,0,.873699,.580254,.00918084,0,.904765,.569841,.00864721,0,.936508,.559224,.00815731,0,.968254,.548315,.00767924,0,1,1,.177563,0,0,1,.177563,0,0,.999994,.177562,0,0,.999972,.177555,0,664171e-10,.999914,.177536,0,.0012276,.999787,.177496,0,.00388025,.999556,.17742,0,.00783463,.999165,.177285,0,.0128953,.9985,.177037,0,.0189053,.995388,.175634,0,.025742,.993102,.174375,0,.033309,.990992,.173121,0,.0415298,.986932,.170896,0,.0503425,.982786,.16847,0,.0596964,.977592,.165455,0,.0695498,.971075,.161676,0,.0798676,.963967,.157458,0,.0906201,.956397,.152836,0,.101783,.947489,.147467,0,.113333,.937564,.14145,0,.125254,.928182,.135383,0,.137529,.919027,.129212,0,.150144,.909618,.12276,0,.163088,.900492,.116273,0,.176351,.891671,.1098,0,.189924,.883146,.103362,0,.203799,.875151,.0970799,0,.21797,.868338,.0911732,0,.232433,.862033,.0854966,0,.247182,.856107,.0800691,0,.262216,.850644,.0749618,0,.27753,.845261,.070079,0,.293124,.839885,.0654321,0,.308997,.834609,.0610975,0,.325149,.829083,.0569741,0,.341581,.82404,.0531736,0,.358294,.818968,.049665,0,.37529,.813496,.0463856,0,.392573,.807533,.0433217,0,.410148,.80099,.0404402,0,.428019,.793891,.0377578,0,.446192,.786281,.0352616,0,.464676,.778773,.0329577,0,.483478,.770737,.030808,0,.502608,.762094,.0287964,0,.522079,.752898,.0269254,0,.541905,.743306,.0251926,0,.5621,.733416,.023595,0,.582684,.723742,.0221155,0,.603677,.713542,.0207435,0,.625106,.702755,.019434,0,.646998,.691484,.0182046,0,.66939,.680531,.0170771,0,.692324,.66953,.0160339,0,.715849,.658126,.0150677,0,.740028,.646933,.0141551,0,.764937,.636107,.0133179,0,.790673,.625271,.0125284,0,.817358,.615225,.0117937,0,.84515,.605678,.0111181,0,.874244,.59583,.0104759,0,.904828,.585704,.00986672,0,.936508,.575413,.00929712,0,.968254,.565373,.00876713,0,1,1,.214058,0,0,.999999,.214058,0,0,.999994,.214055,0,0,.999966,.214039,0,259642e-9,.999893,.213998,0,.00200075,.999737,.21391,0,.00527775,.999449,.213745,0,.00983959,.99896,.213458,0,.0154755,.9979,.212855,0,.0220249,.994278,.210779,0,.0293654,.992254,.20926,0,.0374021,.98881,.206908,0,.0460604,.984715,.204009,0,.0552802,.979738,.200471,0,.0650127,.972884,.195813,0,.0752175,.965996,.190856,0,.0858612,.957974,.185077,0,.0969155,.949155,.17868,0,.108356,.939288,.171513,0,.120163,.928996,.163838,0,.132319,.919563,.156246,0,.144808,.910004,.148359,0,.157618,.900791,.140417,0,.170737,.892135,.132569,0,.184155,.883803,.124741,0,.197866,.876034,.117091,0,.211861,.869219,.109835,0,.226134,.863062,.102859,0,.240682,.857795,.0962928,0,.255499,.853009,.0900725,0,.270583,.848603,.0842101,0,.285931,.844335,.0786527,0,.301542,.840208,.0734397,0,.317415,.836035,.0685334,0,.33355,.83172,.0639275,0,.349948,.827135,.0595909,0,.36661,.822797,.0556204,0,.383539,.818387,.0519394,0,.400738,.813565,.0485317,0,.41821,.808142,.0453138,0,.435961,.802212,.0423354,0,.453997,.79573,.0395553,0,.472324,.788741,.036988,0,.490951,.781093,.0345688,0,.509887,.773597,.0323297,0,.529144,.765622,.0302719,0,.548735,.757083,.0283477,0,.568674,.747992,.0265562,0,.588979,.738591,.0248844,0,.609671,.728719,.0233342,0,.630773,.719146,.0219081,0,.652314,.709165,.0205711,0,.674328,.69875,.0193248,0,.696854,.687884,.0181582,0,.719942,.676818,.0170746,0,.743651,.666247,.0160718,0,.768057,.655284,.0151262,0,.793253,.64401,.0142561,0,.819363,.633353,.0134327,0,.846547,.622674,.012653,0,.875017,.612265,.0119354,0,.905021,.602455,.0112533,0,.936508,.593147,.0106234,0,.968254,.583592,.0100213,0,1,1,.25717,0,0,1,.25717,0,0,.999992,.257164,0,0,.999958,.257135,0,641715e-9,.999864,.25706,0,.00305314,.999666,.256897,0,.00700975,.999302,.256596,0,.0122194,.998663,.25607,0,.0184622,.995607,.254123,0,.0255773,.993094,.252081,0,.0334439,.9907,.249867,0,.0419696,.98594,.246118,0,.0510823,.981214,.242049,0,.0607242,.974966,.236869,0,.0708486,.967589,.230724,0,.081417,.95915,.223635,0,.0923974,.950257,.21596,0,.103763,.940165,.207296,0,.115491,.929396,.197901,0,.127562,.919288,.188437,0,.13996,.909428,.178762,0,.15267,.900105,.169072,0,.165679,.891418,.159478,0,.178979,.883347,.15002,0,.192558,.875992,.140813,0,.20641,.869466,.13196,0,.220529,.863699,.123501,0,.234907,.858553,.115436,0,.249542,.854379,.107901,0,.264428,.850894,.10088,0,.279564,.847632,.0942296,0,.294947,.844571,.0879861,0,.310575,.84163,.0821534,0,.326448,.838542,.0766409,0,.342566,.835412,.0715322,0,.358929,.831899,.0666883,0,.37554,.828177,.0622175,0,.392399,.82416,.0580452,0,.409511,.820393,.054267,0,.426878,.816068,.0507172,0,.444506,.811201,.0474041,0,.4624,.805785,.0443174,0,.480566,.799878,.0414562,0,.499013,.793469,.0388147,0,.517749,.786473,.0363453,0,.536785,.778874,.0340225,0,.556134,.771277,.0318599,0,.575809,.763426,.0298859,0,.595827,.755044,.0280357,0,.616207,.746161,.0262979,0,.636973,.737124,.0247295,0,.65815,.72761,.0232514,0,.679772,.717822,.0218755,0,.701876,.708279,.0205942,0,.724509,.698333,.0193947,0,.74773,.68802,.0182717,0,.771609,.677321,.0172044,0,.79624,.666504,.0162122,0,.821743,.656184,.0152924,0,.84828,.64556,.0144326,0,.876069,.634636,.0136157,0,.905404,.624124,.0128612,0,.936508,.613914,.0121435,0,.968254,.603589,.0114887,0,1,1,.307946,0,0,.999999,.307945,0,0,.999988,.307934,0,204479e-10,.999944,.307886,0,.00127833,.999824,.307756,0,.00445047,.999565,.30748,0,.00914673,.999085,.306966,0,.0150498,.998103,.306004,0,.0219367,.994249,.303028,0,.0296485,.991807,.300435,0,.038068,.987773,.296554,0,.0471062,.982673,.2916,0,.0566942,.976623,.285641,0,.0667768,.968757,.27815,0,.0773099,.959849,.269529,0,.088257,.950663,.260248,0,.0995879,.940129,.249704,0,.111277,.92895,.238291,0,.123304,.917996,.226501,0,.13565,.907813,.214669,0,.148299,.898305,.202835,0,.161237,.889626,.191158,0,.174455,.88175,.179695,0,.187941,.874715,.168548,0,.201687,.868746,.15792,0,.215687,.863703,.147807,0,.229933,.859315,.138149,0,.24442,.855538,.128993,0,.259145,.852428,.120414,0,.274103,.850168,.112498,0,.289293,.848132,.105054,0,.304711,.846291,.0981087,0,.320357,.844431,.0915942,0,.33623,.842493,.0855056,0,.35233,.840368,.0798204,0,.368658,.83798,.0745097,0,.385214,.83523,.0695424,0,.402002,.832091,.0649092,0,.419023,.828667,.0606291,0,.436282,.824805,.0566523,0,.453782,.820988,.0530229,0,.471529,.816635,.0496364,0,.489528,.811725,.0464658,0,.507788,.806316,.0435082,0,.526317,.800469,.0407873,0,.545124,.794107,.038255,0,.564221,.787218,.0358825,0,.583621,.779872,.0336785,0,.603341,.772097,.0316379,0,.623397,.764484,.0297379,0,.643812,.756428,.0279581,0,.664611,.748022,.0263153,0,.685824,.739268,.0247799,0,.707488,.73024,.0233385,0,.729646,.720893,.0220035,0,.752354,.71119,.0207555,0,.77568,.701791,.0195843,0,.799715,.692184,.0184891,0,.824574,.682258,.0174541,0,.850417,.67206,.0164873,0,.877466,.661717,.0155959,0,.90604,.651462,.0147519,0,.936528,.641467,.0139727,0,.968254,.631229,.0132363,0,1,1,.367573,0,0,.999999,.367571,0,0,.999984,.367553,0,183382e-9,.999925,.367473,0,.00225254,.999759,.367259,0,.00628165,.99941,.366801,0,.0117858,.998739,.365946,0,.0184359,.995529,.363191,0,.0260114,.992875,.360171,0,.0343581,.989135,.355981,0,.0433637,.984166,.350401,0,.0529438,.977871,.343348,0,.0630334,.96951,.334341,0,.0735805,.959964,.323862,0,.0845437,.950162,.312521,0,.095889,.938882,.299577,0,.107588,.926992,.285573,0,.119617,.915589,.271212,0,.131957,.904791,.256611,0,.144591,.895177,.242224,0,.157503,.886403,.227952,0,.170682,.878957,.214192,0,.184117,.872418,.200795,0,.197799,.867029,.188015,0,.21172,.862835,.175975,0,.225873,.859411,.164526,0,.240253,.856655,.153693,0,.254854,.854519,.14352,0,.269673,.852828,.13397,0,.284707,.851412,.124984,0,.299953,.850609,.116748,0,.315408,.849855,.10905,0,.331073,.849017,.101839,0,.346946,.848079,.0951359,0,.363028,.846911,.0888774,0,.379318,.845445,.0830375,0,.395818,.84362,.0775844,0,.41253,.841411,.0725054,0,.429457,.838768,.0677691,0,.446602,.835801,.0634016,0,.463968,.832341,.0593095,0,.481561,.828424,.0555121,0,.499386,.824312,.052024,0,.51745,.819918,.0487865,0,.535761,.815072,.0457801,0,.554328,.809863,.0430184,0,.573162,.804164,.0404245,0,.592275,.798034,.0380146,0,.611681,.791436,.0357436,0,.631398,.784498,.0336475,0,.651445,.777125,.0316666,0,.671845,.769365,.0298122,0,.692628,.761579,.0281001,0,.713827,.753746,.0265049,0,.735484,.745573,.0250067,0,.75765,.737083,.0236026,0,.78039,.728545,.0223302,0,.803789,.719691,.0211243,0,.82796,.710569,.0199983,0,.853056,.701216,.0189569,0,.879298,.692094,.0179702,0,.907014,.682909,.0170418,0,.936691,.673509,.0161732,0,.968254,.663863,.0153406,0,1,1,.437395,0,0,.999998,.437394,0,0,.99998,.437363,0,616704e-9,.999891,.437232,0,.00367925,.999656,.436877,0,.00867446,.999148,.436121,0,.0150679,.997959,.434564,0,.022531,.993464,.430134,0,.0308507,.990606,.426077,0,.0398805,.985027,.419397,0,.0495148,.978491,.41118,0,.0596749,.969643,.40048,0,.0703001,.959189,.38769,0,.0813427,.948223,.373575,0,.0927641,.935955,.357622,0,.104533,.923237,.34043,0,.116624,.911074,.322735,0,.129015,.899724,.30479,0,.141687,.890189,.287392,0,.154626,.881796,.270248,0,.167818,.874781,.253659,0,.181252,.869166,.237786,0,.194918,.864725,.222618,0,.208807,.861565,.208356,0,.222913,.859284,.194867,0,.237229,.857677,.18212,0,.25175,.856714,.17018,0,.266473,.856155,.158969,0,.281392,.8558,.148413,0,.296505,.855672,.138578,0,.311811,.855538,.129345,0,.327306,.855689,.120861,0,.342991,.855767,.112969,0,.358864,.855618,.105593,0,.374925,.85525,.0987451,0,.391176,.854583,.0923727,0,.407616,.853534,.0864143,0,.424249,.852061,.0808338,0,.441076,.850253,.0756771,0,.4581,.848004,.0708612,0,.475324,.845333,.0663784,0,.492754,.842376,.0622631,0,.510394,.838956,.0584112,0,.528251,.835121,.0548328,0,.546331,.830842,.0514838,0,.564644,.826212,.048355,0,.583198,.821522,.0454714,0,.602005,.816551,.0428263,0,.621078,.811211,.0403612,0,.640434,.805479,.038039,0,.660089,.799409,.0358739,0,.680066,.79306,.0338727,0,.70039,.786395,.0319985,0,.721094,.779416,.030241,0,.742215,.77214,.0285951,0,.7638,.764636,.0270747,0,.785912,.756836,.0256354,0,.808628,.749315,.0243027,0,.832055,.741561,.0230497,0,.856338,.733589,.0218801,0,.88169,.725479,.020784,0,.908441,.717255,.0197702,0,.937125,.708829,.0188168,0,.968254,.700191,.0179113,0,1,1,.518937,0,0,.999998,.518933,0,0,.999967,.518883,0,.00147741,.999832,.51866,0,.00573221,.999466,.518057,0,.011826,.998644,.516752,0,.0192116,.994458,.512347,0,.027573,.991223,.507675,0,.0367099,.985515,.500188,0,.046487,.978308,.490408,0,.0568071,.968359,.477357,0,.0675984,.95682,.461752,0,.0788059,.943929,.443796,0,.090386,.930224,.423893,0,.102304,.916514,.402682,0,.114532,.903653,.380914,0,.127047,.892315,.359212,0,.139828,.882942,.338102,0,.152861,.875438,.31773,0,.16613,.869642,.298186,0,.179624,.865304,.279491,0,.193332,.862382,.261804,0,.207247,.860666,.245146,0,.22136,.859788,.229406,0,.235666,.859608,.214605,0,.250158,.859912,.200691,0,.264832,.86053,.187623,0,.279684,.861368,.17539,0,.294711,.862237,.163901,0,.309911,.863127,.153175,0,.32528,.863923,.143147,0,.340819,.864567,.133781,0,.356524,.865013,.125042,0,.372397,.86539,.116952,0,.388438,.865591,.109476,0,.404645,.865517,.102542,0,.421022,.865084,.0960688,0,.437569,.864309,.0900499,0,.454287,.863151,.0844328,0,.471181,.861649,.0792218,0,.488253,.859742,.0743482,0,.505507,.857446,.0697963,0,.522947,.854757,.0655364,0,.54058,.851783,.061608,0,.558412,.848516,.0579701,0,.576449,.844897,.0545742,0,.594701,.840956,.0514167,0,.613178,.836676,.0484598,0,.631892,.832075,.0456934,0,.650856,.827191,.0431178,0,.670088,.822295,.0407718,0,.689606,.817294,.0386032,0,.709434,.812013,.0365675,0,.7296,.806465,.0346547,0,.750138,.800691,.0328717,0,.771093,.794709,.031211,0,.792519,.788493,.0296504,0,.814488,.782049,.0281782,0,.837097,.775403,.0267965,0,.860481,.76857,.0255002,0,.884842,.761536,.0242759,0,.910494,.754303,.0231142,0,.937985,.74692,.0220305,0,.968254,.739745,.0210192,0,1,1,.613914,0,0,.999996,.613907,0,963597e-10,.999942,.613814,0,.00301247,.999704,.613407,0,.00870385,.999046,.612302,0,.0160714,.995516,.608266,0,.0245899,.991726,.602863,0,.0339681,.985157,.593956,0,.0440254,.97642,.581748,0,.0546409,.964404,.565183,0,.0657284,.950601,.545273,0,.0772246,.935158,.522129,0,.0890812,.919364,.496782,0,.10126,.904754,.470571,0,.113731,.89176,.444037,0,.126469,.881492,.418322,0,.139454,.873656,.393522,0,.15267,.868053,.369795,0,.166101,.864336,.347171,0,.179736,.862259,.325737,0,.193565,.861556,.305532,0,.207578,.861776,.286416,0,.221769,.862661,.268355,0,.23613,.864015,.251334,0,.250656,.865711,.235352,0,.265343,.867519,.220302,0,.280187,.869351,.206161,0,.295183,.871144,.192908,0,.31033,.872839,.180505,0,.325624,.874307,.168848,0,.341065,.875667,.158021,0,.35665,.876758,.147877,0,.37238,.87764,.138441,0,.388253,.878237,.129627,0,.404269,.878563,.121415,0,.42043,.878572,.113741,0,.436735,.87842,.106652,0,.453187,.878057,.100097,0,.469786,.877413,.0940128,0,.486536,.87646,.0883462,0,.503439,.875233,.0830924,0,.520498,.8737,.0781975,0,.537717,.871873,.07364,0,.555102,.86978,.0694103,0,.572657,.867405,.0654696,0,.59039,.864751,.0617914,0,.608307,.861818,.0583491,0,.626419,.858645,.0551443,0,.644733,.855307,.0521894,0,.663264,.851736,.0494334,0,.682025,.847927,.0468504,0,.701032,.843888,.0444261,0,.720308,.839629,.0421497,0,.739875,.835158,.0400082,0,.759764,.830509,.0380076,0,.780014,.825714,.0361488,0,.800673,.820729,.0343956,0,.821803,.815751,.0327781,0,.843492,.810752,.031275,0,.86586,.805587,.0298542,0,.889087,.800317,.0285397,0,.913466,.79489,.0272948,0,.93952,.789314,.0261139,0,.96835,.783593,.0249938,0,1,1,.724258,0,0,.999992,.724243,0,726889e-9,.99987,.724044,0,.00569574,.999336,.72317,0,.0131702,.996271,.719432,0,.0220738,.991159,.712576,0,.0319405,.982465,.700927,0,.0425202,.97049,.684297,0,.0536599,.953973,.661244,0,.065258,.935546,.633804,0,.0772427,.916596,.603071,0,.0895616,.899353,.57105,0,.102175,.885216,.539206,0,.11505,.875076,.508714,0,.128164,.868334,.479571,0,.141495,.864414,.451796,0,.155026,.862678,.425328,0,.168745,.862835,.400352,0,.182639,.864067,.376532,0,.196699,.866086,.35391,0,.210915,.868557,.332424,0,.225282,.871271,.312053,0,.239792,.874058,.292764,0,.25444,.8768,.27453,0,.269223,.87939,.257297,0,.284135,.8819,.24114,0,.299174,.884187,.225934,0,.314337,.886262,.211669,0,.329622,.888119,.198311,0,.345026,.889709,.185783,0,.360549,.891054,.174063,0,.376189,.892196,.163143,0,.391946,.893101,.152952,0,.407819,.893803,.143475,0,.423808,.894277,.134647,0,.439914,.894532,.126434,0,.456137,.894576,.1188,0,.472479,.894393,.111694,0,.48894,.893976,.105069,0,.505523,.893346,.0989077,0,.52223,.892502,.0931724,0,.539064,.891441,.0878276,0,.556028,.890276,.082903,0,.573125,.888972,.0783505,0,.590361,.887469,.0741083,0,.607741,.885785,.0701633,0,.62527,.883914,.0664835,0,.642957,.881872,.0630567,0,.660809,.879651,.0598527,0,.678836,.877267,.0568615,0,.69705,.874717,.05406,0,.715465,.872012,.0514378,0,.734098,.869157,.0489805,0,.752968,.866155,.0466727,0,.772101,.863014,.0445056,0,.791529,.859748,.0424733,0,.81129,.856416,.0405957,0,.831438,.852958,.0388273,0,.852044,.849382,.0371619,0,.87321,.845694,.0355959,0,.89509,.841893,.0341155,0,.917932,.837981,.0327141,0,.942204,.833963,.0313856,0,.968981,.829847,.0301275,0,1,1,.85214,0,0,.999969,.852095,0,.00279627,.999483,.851408,0,.0107635,.994545,.84579,0,.0206454,.986188,.835231,0,.0315756,.969847,.814687,0,.0432021,.945951,.783735,0,.0553396,.91917,.746074,0,.0678766,.895488,.706938,0,.0807395,.878232,.669534,0,.0938767,.868252,.635168,0,.10725,.863873,.603069,0,.120832,.863369,.572514,0,.134598,.86545,.543169,0,.148533,.868803,.514578,0,.16262,.872794,.486762,0,.176849,.87702,.459811,0,.19121,.881054,.433654,0,.205694,.884974,.408574,0,.220294,.888587,.384525,0,.235005,.891877,.36156,0,.24982,.894793,.339661,0,.264737,.89743,.318913,0,.279751,.899796,.299302,0,.294859,.901943,.280843,0,.310058,.903858,.263481,0,.325346,.905574,.247197,0,.340721,.907069,.231915,0,.356181,.908379,.217614,0,.371725,.90952,.20425,0,.387353,.910483,.191758,0,.403063,.91128,.180092,0,.418854,.911936,.169222,0,.434727,.912454,.159098,0,.450682,.912835,.149668,0,.466718,.913078,.140884,0,.482837,.913192,.132709,0,.499038,.913175,.125095,0,.515324,.91304,.118012,0,.531695,.912781,.111417,0,.548153,.91241,.105281,0,.5647,.911924,.0995691,0,.581338,.911331,.0942531,0,.59807,.910637,.0893076,0,.6149,.90984,.0846998,0,.63183,.908941,.0804044,0,.648865,.907944,.0763984,0,.666011,.906857,.0726638,0,.683273,.90568,.0691783,0,.700659,.904416,.0659222,0,.718176,.903067,.0628782,0,.735834,.901637,.0600307,0,.753646,.900128,.0573647,0,.771625,.898544,.0548668,0,.78979,.89689,.052527,0,.808162,.895165,.0503306,0,.826771,.893371,.0482668,0,.845654,.891572,.0463605,0,.864863,.889763,.0445998,0,.884472,.887894,.0429451,0,.904592,.885967,.0413884,0,.925407,.883984,.0399225,0,.947271,.881945,.0385405,0,.97105,.879854,.0372362,0,1,.999804,.995833,0,0,.938155,.933611,0,.0158731,.864755,.854311,0,.0317461,.888594,.865264,0,.0476191,.905575,.863922,0,.0634921,.915125,.850558,0,.0793651,.920665,.829254,0,.0952381,.924073,.802578,0,.111111,.926304,.772211,0,.126984,.927829,.739366,0,.142857,.928924,.705033,0,.15873,.92973,.670019,0,.174603,.930339,.634993,0,.190476,.930811,.600485,0,.206349,.931191,.566897,0,.222222,.93149,.534485,0,.238095,.931737,.503429,0,.253968,.931939,.473811,0,.269841,.932108,.445668,0,.285714,.93225,.418993,0,.301587,.932371,.393762,0,.31746,.932474,.369939,0,.333333,.932562,.347479,0,.349206,.932638,.326336,0,.365079,.932703,.306462,0,.380952,.93276,.287805,0,.396825,.932809,.270313,0,.412698,.932851,.253933,0,.428571,.932887,.23861,0,.444444,.932917,.224289,0,.460317,.932943,.210917,0,.47619,.932965,.19844,0,.492063,.932982,.186807,0,.507937,.932995,.175966,0,.52381,.933005,.165869,0,.539683,.933011,.156468,0,.555556,.933013,.147719,0,.571429,.933013,.139579,0,.587302,.93301,.132007,0,.603175,.933004,.124965,0,.619048,.932994,.118416,0,.634921,.932982,.112326,0,.650794,.932968,.106663,0,.666667,.93295,.101397,0,.68254,.932931,.0964993,0,.698413,.932908,.0919438,0,.714286,.932883,.0877057,0,.730159,.932856,.0837623,0,.746032,.932827,.0800921,0,.761905,.932796,.0766754,0,.777778,.932762,.0734936,0,.793651,.932727,.0705296,0,.809524,.932689,.0677676,0,.825397,.93265,.0651929,0,.84127,.932609,.0627917,0,.857143,.932565,.0605515,0,.873016,.932521,.0584606,0,.888889,.932474,.0565082,0,.904762,.932427,.0546841,0,.920635,.932377,.0529793,0,.936508,.932326,.0513851,0,.952381,.932274,.0498936,0,.968254,.93222,.0484975,0,.984127,.932164,.0471899,0,1],r=new Float32Array(e),i=new Float32Array(n);en.LTC_FLOAT_1=new Xy(r,64,64,ea,ml,k4,Ss,Ss,as,Es,1),en.LTC_FLOAT_2=new Xy(i,64,64,ea,ml,k4,Ss,Ss,as,Es,1),en.LTC_FLOAT_1.needsUpdate=!0,en.LTC_FLOAT_2.needsUpdate=!0;const o=new Uint16Array(e.length);e.forEach(function(d,f){o[f]=H9e.toHalfFloat(d)});const u=new Uint16Array(n.length);n.forEach(function(d,f){u[f]=H9e.toHalfFloat(d)}),en.LTC_HALF_1=new Xy(o,64,64,ea,F2,k4,Ss,Ss,as,Es,1),en.LTC_HALF_2=new Xy(u,64,64,ea,F2,k4,Ss,Ss,as,Es,1),en.LTC_HALF_1.needsUpdate=!0,en.LTC_HALF_2.needsUpdate=!0}}class V_e extends U_e{constructor(n){super(n);yr(this,"dance");this.name="Scene2",this.camera.position.set(0,0,125),this.camera.lookAt(0,0,0),this.createLights(),this.createWorld(),this.createAnimation(),zI(this);const r=Ar.components.get("three");r.setScene(this),r.addCamera(this.camera)}createLights(){drt.init();const n=new Or;n.name="lights",this.add(n);const r=new G$(16777215,3);r.angle=5.8,r.decay=0,r.distance=1e3,r.penumbra=Math.PI,r.name="spotlight",r.position.set(-250,200,200),r.lookAt(0,50,0),n.add(r);const i=new Wze(16711680,1,300,100);i.name="rectLight",i.position.set(250,100,100),i.lookAt(0,50,0),n.add(i)}createWorld(){const n=new Or;n.name="world",this.add(n);const r=PX.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new g6e({map:r}),o=new Ri(new Gf(250,36),i);o.name="floor",o.receiveShadow=!0,o.position.y=-75,o.scale.y=.1,n.add(o);const u=new oze(new Gf(50),new h6e({size:2}));u.name="points",u.position.x=-100,n.add(u);const d=new NI(new Gf(50),new a1);d.name="lines",d.position.x=100,n.add(d);const f=new Ri(new _g(100,100),new x_e);f.name="testShader",f.position.z=-100,n.add(f),this.dance=new B_e("Flair"),this.dance.name="flair",this.dance.traverse(v=>{if(v instanceof d6e){const x=v;x.material=new v6e}}),n.add(this.dance)}createAnimation(){const n=Ar.components.get("theatre");n.sheet(this.name),n.sheetObject(this.name,"Camera",{position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}},r=>{this.camera.position.set(r.position.x,r.position.y,r.position.z),this.camera.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.sheetObject(this.name,"Dancer",{position:{x:this.dance.position.x,y:this.dance.position.y,z:this.dance.position.z},rotation:{x:this.dance.rotation.x,y:this.dance.rotation.y,z:this.dance.rotation.z}},r=>{this.dance.position.set(r.position.x,r.position.y,r.position.z),this.dance.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.playSheet(this.name,{iterationCount:1/0})}update(){const n=this.clock.getDelta();this.dance.update(n)}}const TX=new Map;TX.set("Scene1",z_e);TX.set("Scene2",V_e);function hrt(){const[t,e]=Et.useState(!1);Et.useEffect(()=>{const r=()=>{t_.removeEventListener(n_.LOAD_COMPLETE,r),e(!0)};t_.addEventListener(n_.LOAD_COMPLETE,r)},[]);const n=Ar.components.get("three");return Ke.jsx(Ke.Fragment,{children:t&&Ar.editor&&Ke.jsx(Xqe,{header:[Ke.jsx(d_e,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:r=>{Ar.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:r}})}},"Scenes")],children:Ke.jsxs(Ke.Fragment,{children:[Ke.jsx(stt,{three:n,scenes:TX,onSceneUpdate:r=>{r.update()}}),Ke.jsx(Yet,{three:n})]})})})}var cI={exports:{}};cI.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,v=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,M=(y,T,z)=>T in y?r(y,T,{enumerable:!0,configurable:!0,writable:!0,value:z}):y[T]=z,D=(y,T)=>{for(var z in T||(T={}))x.call(T,z)&&M(y,z,T[z]);if(f)for(var z of f(T))S.call(T,z)&&M(y,z,T[z]);return y},G=(y,T)=>i(y,u(T)),B=(y,T)=>function(){return T||(0,y[d(y)[0]])((T={exports:{}}).exports,T),T.exports},L=(y,T)=>{for(var z in T)r(y,z,{get:T[z],enumerable:!0})},U=(y,T,z,Y)=>{if(T&&typeof T=="object"||typeof T=="function")for(let se of d(T))!x.call(y,se)&&se!==z&&r(y,se,{get:()=>T[se],enumerable:!(Y=o(T,se))||Y.enumerable});return y},C=(y,T,z)=>(z=y!=null?n(v(y)):{},U(T||!y||!y.__esModule?r(z,"default",{value:y,enumerable:!0}):z,y)),H=y=>U(r({},"__esModule",{value:!0}),y),X=(y,T,z)=>(M(y,typeof T!="symbol"?T+"":T,z),z),fe=B({"../node_modules/timing-function/lib/UnitBezier.js"(y,T){T.exports=function(){function z(Y,se,me,De){this.set(Y,se,me,De)}return z.prototype.set=function(Y,se,me,De){this._cx=3*Y,this._bx=3*(me-Y)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*se,this._by=3*(De-se)-this._cy,this._ay=1-this._cy-this._by},z.epsilon=1e-6,z.prototype._sampleCurveX=function(Y){return((this._ax*Y+this._bx)*Y+this._cx)*Y},z.prototype._sampleCurveY=function(Y){return((this._ay*Y+this._by)*Y+this._cy)*Y},z.prototype._sampleCurveDerivativeX=function(Y){return(3*this._ax*Y+2*this._bx)*Y+this._cx},z.prototype._solveCurveX=function(Y,se){var me,De,Ye,rt,xt,ae;for(Ye=void 0,rt=void 0,xt=void 0,ae=void 0,me=void 0,De=void 0,xt=Y,De=0;De<8;){if(ae=this._sampleCurveX(xt)-Y,Math.abs(ae)<se)return xt;if(me=this._sampleCurveDerivativeX(xt),Math.abs(me)<se)break;xt=xt-ae/me,De++}if(Ye=0,rt=1,xt=Y,xt<Ye)return Ye;if(xt>rt)return rt;for(;Ye<rt;){if(ae=this._sampleCurveX(xt),Math.abs(ae-Y)<se)return xt;Y>ae?Ye=xt:rt=xt,xt=(rt-Ye)*.5+Ye}return xt},z.prototype.solve=function(Y,se){return this._sampleCurveY(this._solveCurveX(Y,se))},z.prototype.solveSimple=function(Y){return this._sampleCurveY(this._solveCurveX(Y,1e-6))},z}()}}),q=B({"../node_modules/levenshtein-edit-distance/index.js"(y,T){var z,Y;z=[],Y=[];function se(me,De,Ye){var rt,xt,ae,ze,tn,In,xn,lr;if(me===De)return 0;if(rt=me.length,xt=De.length,rt===0)return xt;if(xt===0)return rt;for(Ye&&(me=me.toLowerCase(),De=De.toLowerCase()),xn=0;xn<rt;)Y[xn]=me.charCodeAt(xn),z[xn]=++xn;for(lr=0;lr<xt;)for(ae=De.charCodeAt(lr),ze=tn=lr++,xn=-1;++xn<rt;)In=ae===Y[xn]?tn:tn+1,tn=z[xn],z[xn]=ze=tn>ze?In>ze?ze+1:In:In>tn?tn+1:In;return ze}T.exports=se}}),pe=B({"../node_modules/propose/propose.js"(y,T){var z=q();function Y(){var se,me,De,Ye,rt,xt=0,ae=arguments[0],ze=arguments[1],tn=ze.length,In=arguments[2];In&&(Ye=In.threshold,rt=In.ignoreCase),Ye===void 0&&(Ye=0);for(var xn=0;xn<tn;++xn)rt?me=z(ae,ze[xn],!0):me=z(ae,ze[xn]),me>ae.length?se=1-me/ze[xn].length:se=1-me/ae.length,se>xt&&(xt=se,De=ze[xn]);return xt>=Ye?De:null}T.exports=Y}}),xe=B({"../node_modules/fast-deep-equal/index.js"(y,T){T.exports=function z(Y,se){if(Y===se)return!0;if(Y&&se&&typeof Y=="object"&&typeof se=="object"){if(Y.constructor!==se.constructor)return!1;var me,De,Ye;if(Array.isArray(Y)){if(me=Y.length,me!=se.length)return!1;for(De=me;De--!==0;)if(!z(Y[De],se[De]))return!1;return!0}if(Y.constructor===RegExp)return Y.source===se.source&&Y.flags===se.flags;if(Y.valueOf!==Object.prototype.valueOf)return Y.valueOf()===se.valueOf();if(Y.toString!==Object.prototype.toString)return Y.toString()===se.toString();if(Ye=Object.keys(Y),me=Ye.length,me!==Object.keys(se).length)return!1;for(De=me;De--!==0;)if(!Object.prototype.hasOwnProperty.call(se,Ye[De]))return!1;for(De=me;De--!==0;){var rt=Ye[De];if(!z(Y[rt],se[rt]))return!1}return!0}return Y!==Y&&se!==se}}}),J={};L(J,{createRafDriver:()=>r3,getProject:()=>e6,notify:()=>Yh,onChange:()=>_3,types:()=>O8,val:()=>t6}),t.exports=H(J);var ne={};L(ne,{createRafDriver:()=>r3,getProject:()=>e6,notify:()=>Yh,onChange:()=>_3,types:()=>O8,val:()=>t6});var Pe=zt,mt=class{constructor(){X(this,"atom",new Pe.Atom({projects:{}}))}add(y,T){this.atom.setByPointer(z=>z.projects[y],T)}get(y){return this.atom.get().projects[y]}has(y){return!!this.get(y)}},_t=new mt,de=_t,je=new WeakMap;function Me(y){return je.get(y)}function Ct(y,T){je.set(y,T)}var We=[],tt=Array.isArray,Ze=tt,dt=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,At=dt,pn=typeof self=="object"&&self&&self.Object===Object&&self,et=At||pn||Function("return this")(),wt=et,Zt=wt.Symbol,rn=Zt,un=Object.prototype,nt=un.hasOwnProperty,Tt=un.toString,Mt=rn?rn.toStringTag:void 0;function Ve(y){var T=nt.call(y,Mt),z=y[Mt];try{y[Mt]=void 0;var Y=!0}catch{}var se=Tt.call(y);return Y&&(T?y[Mt]=z:delete y[Mt]),se}var or=Ve,$t=Object.prototype,Ht=$t.toString;function Kt(y){return Ht.call(y)}var Kn=Kt,cn="[object Null]",ve="[object Undefined]",he=rn?rn.toStringTag:void 0;function Je(y){return y==null?y===void 0?ve:cn:he&&he in Object(y)?or(y):Kn(y)}var Dt=Je;function Ft(y){return y!=null&&typeof y=="object"}var Rt=Ft,bn="[object Symbol]";function sn(y){return typeof y=="symbol"||Rt(y)&&Dt(y)==bn}var dn=sn,Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xn=/^\w*$/;function Ut(y,T){if(Ze(y))return!1;var z=typeof y;return z=="number"||z=="symbol"||z=="boolean"||y==null||dn(y)?!0:Xn.test(y)||!Dn.test(y)||T!=null&&y in Object(T)}var vr=Ut;function sr(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}var Tn=sr,kn="[object AsyncFunction]",on="[object Function]",Un="[object GeneratorFunction]",Ae="[object Proxy]";function Xt(y){if(!Tn(y))return!1;var T=Dt(y);return T==on||T==Un||T==kn||T==Ae}var Jt=Xt,mn=wt["__core-js_shared__"],Te=mn,Wt=function(){var y=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}();function Nt(y){return!!Wt&&Wt in y}var gn=Nt,On=Function.prototype,cr=On.toString;function ar(y){if(y!=null){try{return cr.call(y)}catch{}try{return y+""}catch{}}return""}var pr=ar,Mr=/[\\^$.*+?()[\]{}|]/g,Zn=/^\[object .+?Constructor\]$/,oi=Function.prototype,ns=Object.prototype,Mu=oi.toString,Nc=ns.hasOwnProperty,Tl=RegExp("^"+Mu.call(Nc).replace(Mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sh(y){if(!Tn(y)||gn(y))return!1;var T=Jt(y)?Tl:Zn;return T.test(pr(y))}var ia=Sh;function ku(y,T){return y==null?void 0:y[T]}var Fc=ku;function h1(y,T){var z=Fc(y,T);return ia(z)?z:void 0}var r0=h1,Eh=r0(Object,"create"),be=Eh;function Qe(){this.__data__=be?be(null):{},this.size=0}var yt=Qe;function gt(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}var ht=gt,hn="__lodash_hash_undefined__",Cn=Object.prototype,Nn=Cn.hasOwnProperty;function jn(y){var T=this.__data__;if(be){var z=T[y];return z===hn?void 0:z}return Nn.call(T,y)?T[y]:void 0}var rr=jn,qn=Object.prototype,Fn=qn.hasOwnProperty;function xr(y){var T=this.__data__;return be?T[y]!==void 0:Fn.call(T,y)}var Bs=xr,pi="__lodash_hash_undefined__";function Do(y,T){var z=this.__data__;return this.size+=this.has(y)?0:1,z[y]=be&&T===void 0?pi:T,this}var Gr=Do;function $n(y){var T=-1,z=y==null?0:y.length;for(this.clear();++T<z;){var Y=y[T];this.set(Y[0],Y[1])}}$n.prototype.clear=yt,$n.prototype.delete=ht,$n.prototype.get=rr,$n.prototype.has=Bs,$n.prototype.set=Gr;var Au=$n;function Wr(){this.__data__=[],this.size=0}var Oo=Wr;function Ml(y,T){return y===T||y!==y&&T!==T}var co=Ml;function D0(y,T){for(var z=y.length;z--;)if(co(y[z][0],T))return z;return-1}var wi=D0,Na=Array.prototype,Iu=Na.splice;function Us(y){var T=this.__data__,z=wi(T,y);if(z<0)return!1;var Y=T.length-1;return z==Y?T.pop():Iu.call(T,z,1),--this.size,!0}var Ru=Us;function Bc(y){var T=this.__data__,z=wi(T,y);return z<0?void 0:T[z][1]}var Fa=Bc;function p1(y){return wi(this.__data__,y)>-1}var Ch=p1;function f1(y,T){var z=this.__data__,Y=wi(z,y);return Y<0?(++this.size,z.push([y,T])):z[Y][1]=T,this}var Dg=f1;function O0(y){var T=-1,z=y==null?0:y.length;for(this.clear();++T<z;){var Y=y[T];this.set(Y[0],Y[1])}}O0.prototype.clear=Oo,O0.prototype.delete=Ru,O0.prototype.get=Fa,O0.prototype.has=Ch,O0.prototype.set=Dg;var Uc=O0,Og=r0(wt,"Map"),zc=Og;function s9(){this.size=0,this.__data__={hash:new Au,map:new(zc||Uc),string:new Au}}var o9=s9;function L0(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}var a9=L0;function Lg(y,T){var z=y.__data__;return a9(T)?z[typeof T=="string"?"string":"hash"]:z.map}var Vc=Lg;function m1(y){var T=Vc(this,y).delete(y);return this.size-=T?1:0,T}var g1=m1;function v1(y){return Vc(this,y).get(y)}var l9=v1;function u9(y){return Vc(this,y).has(y)}var c9=u9;function d9(y,T){var z=Vc(this,y),Y=z.size;return z.set(y,T),this.size+=z.size==Y?0:1,this}var Ng=d9;function Du(y){var T=-1,z=y==null?0:y.length;for(this.clear();++T<z;){var Y=y[T];this.set(Y[0],Y[1])}}Du.prototype.clear=o9,Du.prototype.delete=g1,Du.prototype.get=l9,Du.prototype.has=c9,Du.prototype.set=Ng;var jc=Du,Fg="Expected a function";function y1(y,T){if(typeof y!="function"||T!=null&&typeof T!="function")throw new TypeError(Fg);var z=function(){var Y=arguments,se=T?T.apply(this,Y):Y[0],me=z.cache;if(me.has(se))return me.get(se);var De=y.apply(this,Y);return z.cache=me.set(se,De)||me,De};return z.cache=new(y1.Cache||jc),z}y1.Cache=jc;var N0=y1,kl=500;function h9(y){var T=N0(y,function(Y){return z.size===kl&&z.clear(),Y}),z=T.cache;return T}var Ph=h9,Bg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ug=/\\(\\)?/g,p9=Ph(function(y){var T=[];return y.charCodeAt(0)===46&&T.push(""),y.replace(Bg,function(z,Y,se,me){T.push(se?me.replace(Ug,"$1"):Y||z)}),T}),zg=p9;function Vg(y,T){for(var z=-1,Y=y==null?0:y.length,se=Array(Y);++z<Y;)se[z]=T(y[z],z,y);return se}var f9=Vg,m9=1/0,g9=rn?rn.prototype:void 0,b1=g9?g9.toString:void 0;function v9(y){if(typeof y=="string")return y;if(Ze(y))return f9(y,v9)+"";if(dn(y))return b1?b1.call(y):"";var T=y+"";return T=="0"&&1/y==-m9?"-0":T}var y9=v9;function b9(y){return y==null?"":y9(y)}var _1=b9;function Th(y,T){return Ze(y)?y:vr(y,T)?[y]:zg(_1(y))}var Ou=Th,_9=1/0;function jg(y){if(typeof y=="string"||dn(y))return y;var T=y+"";return T=="0"&&1/y==-_9?"-0":T}var Ba=jg;function Hc(y,T){T=Ou(T,y);for(var z=0,Y=T.length;y!=null&&z<Y;)y=y[Ba(T[z++])];return z&&z==Y?y:void 0}var Gc=Hc;function Al(y,T,z){var Y=y==null?void 0:Gc(y,T);return Y===void 0?z:Y}var F0=Al;function w1(y,T){return T.length===0?y:F0(y,T)}var Il=class{constructor(){X(this,"_values",{})}get(y,T){if(this.has(y))return this._values[y];{const z=T();return this._values[y]=z,z}}has(y){return this._values.hasOwnProperty(y)}},hs=zt,Wc=function(){try{var y=r0(Object,"defineProperty");return y({},"",{}),y}catch{}}(),Mh=Wc;function Hg(y,T,z){T=="__proto__"&&Mh?Mh(y,T,{configurable:!0,enumerable:!0,value:z,writable:!0}):y[T]=z}var Rl=Hg,B0=Object.prototype,x1=B0.hasOwnProperty;function Gg(y,T,z){var Y=y[T];(!(x1.call(y,T)&&co(Y,z))||z===void 0&&!(T in y))&&Rl(y,T,z)}var kh=Gg,Wg=9007199254740991,w9=/^(?:0|[1-9]\d*)$/;function x9(y,T){var z=typeof y;return T=T??Wg,!!T&&(z=="number"||z!="symbol"&&w9.test(y))&&y>-1&&y%1==0&&y<T}var S1=x9;function $g(y,T,z,Y){if(!Tn(y))return y;T=Ou(T,y);for(var se=-1,me=T.length,De=me-1,Ye=y;Ye!=null&&++se<me;){var rt=Ba(T[se]),xt=z;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return y;if(se!=De){var ae=Ye[rt];xt=Y?Y(ae,rt,Ye):void 0,xt===void 0&&(xt=Tn(ae)?ae:S1(T[se+1])?[]:{})}kh(Ye,rt,xt),Ye=Ye[rt]}return y}var Ah=$g;function E1(y,T,z){return y==null?y:Ah(y,T,z)}var Ih=E1,ps=new WeakMap;function Kg(y){return C1(y)}function C1(y){if(ps.has(y))return ps.get(y);const T=y.type==="compound"?T1(y):y.type==="enum"?P1(y):y.default;return ps.set(y,T),T}function P1(y){const T={$case:y.defaultCase};for(const[z,Y]of Object.entries(y.cases))T[z]=C1(Y);return T}function T1(y){const T={};for(const[z,Y]of Object.entries(y.props))T[z]=C1(Y);return T}var fs=zt,Rh=C(fe());function Xg(y,T,z){return(0,fs.prism)(()=>{const Y=(0,fs.val)(T);return fs.prism.memo("driver",()=>Y?Y.type==="BasicKeyframedTrack"?Dh(y,Y,z):(y.logger.error("Track type not yet supported."),(0,fs.prism)(()=>{})):(0,fs.prism)(()=>{}),[Y]).getValue()})}function Dh(y,T,z){return(0,fs.prism)(()=>{let Y=fs.prism.ref("state",{started:!1}),se=Y.current;const me=z.getValue();return(!se.started||me<se.validFrom||se.validTo<=me)&&(Y.current=se=qg(y,z,T)),se.der.getValue()})}var Oh=(0,fs.prism)(()=>{});function qg(y,T,z){const Y=T.getValue();if(z.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Oh};let se=0;for(;;){const me=z.keyframes[se];if(!me)return xi.error;const De=se===z.keyframes.length-1;if(Y<me.position)return se===0?xi.beforeFirstKeyframe(me):xi.error;if(me.position===Y)return De?xi.lastKeyframe(me):xi.between(me,z.keyframes[se+1],T);if(se===z.keyframes.length-1)return xi.lastKeyframe(me);{const Ye=se+1;if(z.keyframes[Ye].position<=Y){se=Ye;continue}else return xi.between(me,z.keyframes[se+1],T)}}}var xi={beforeFirstKeyframe(y){return{started:!0,validFrom:-1/0,validTo:y.position,der:(0,fs.prism)(()=>({left:y.value,progression:0}))}},lastKeyframe(y){return{started:!0,validFrom:y.position,validTo:1/0,der:(0,fs.prism)(()=>({left:y.value,progression:0}))}},between(y,T,z){if(!y.connectedRight)return{started:!0,validFrom:y.position,validTo:T.position,der:(0,fs.prism)(()=>({left:y.value,progression:0}))};const Y=me=>(me-y.position)/(T.position-y.position);if(!y.type||y.type==="bezier"){const me=new Rh.default(y.handles[2],y.handles[3],T.handles[0],T.handles[1]),De=(0,fs.prism)(()=>{const Ye=Y(z.getValue()),rt=me.solveSimple(Ye);return{left:y.value,right:T.value,progression:rt}});return{started:!0,validFrom:y.position,validTo:T.position,der:De}}const se=(0,fs.prism)(()=>{const me=Y(z.getValue()),De=Math.floor(me);return{left:y.value,right:T.value,progression:De}});return{started:!0,validFrom:y.position,validTo:T.position,der:se}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Oh}};function U0(y,T,z){const se=z.get(y);if(se&&se.override===T)return se.merged;const me=D({},y);for(const De of Object.keys(T)){const Ye=T[De],rt=y[De];me[De]=typeof Ye=="object"&&typeof rt=="object"?U0(rt,Ye,z):Ye===void 0?rt:Ye}return z.set(y,{override:T,merged:me}),me}function $c(y,T){let z=y;for(const Y of T)z=z[Y];return z}var Lu=zt,M1=(y,T)=>{const z=Lu.prism.memo(y,()=>new Lu.Atom(T),[]);return z.set(T),z},$r=zt,k1=zt,Yg=/\s/;function Lh(y){for(var T=y.length;T--&&Yg.test(y.charAt(T)););return T}var A1=Lh,S9=/^\s+/;function Zg(y){return y&&y.slice(0,A1(y)+1).replace(S9,"")}var Nu=Zg,Nh=0/0,Qg=/^[-+]0x[0-9a-f]+$/i,E9=/^0b[01]+$/i,Kc=/^0o[0-7]+$/i,I1=parseInt;function Jg(y){if(typeof y=="number")return y;if(dn(y))return Nh;if(Tn(y)){var T=typeof y.valueOf=="function"?y.valueOf():y;y=Tn(T)?T+"":T}if(typeof y!="string")return y===0?y:+y;y=Nu(y);var z=E9.test(y);return z||Kc.test(y)?I1(y.slice(2),z?2:8):Qg.test(y)?Nh:+y}var te=Jg,_e=1/0,Ue=17976931348623157e292;function bt(y){if(!y)return y===0?y:0;if(y=te(y),y===_e||y===-_e){var T=y<0?-1:1;return T*Ue}return y===y?y:0}var Hn=bt;function Ir(y){var T=Hn(y),z=T%1;return T===T?z?T-z:T:0}var Ms=Ir;function sa(y){return y}var C9=sa,Fu=r0(wt,"WeakMap"),Bu=Fu,N_=Object.create,dR=function(){function y(){}return function(T){if(!Tn(T))return{};if(N_)return N_(T);y.prototype=T;var z=new y;return y.prototype=void 0,z}}(),F_=dR;function ev(y,T){var z=-1,Y=y.length;for(T||(T=Array(Y));++z<Y;)T[z]=y[z];return T}var hR=ev;function tv(y,T){for(var z=-1,Y=y==null?0:y.length;++z<Y&&T(y[z],z,y)!==!1;);return y}var B_=tv;function U_(y,T,z,Y){var se=!z;z||(z={});for(var me=-1,De=T.length;++me<De;){var Ye=T[me],rt=Y?Y(z[Ye],y[Ye],Ye,z,y):void 0;rt===void 0&&(rt=y[Ye]),se?Rl(z,Ye,rt):kh(z,Ye,rt)}return z}var R1=U_,P9=9007199254740991;function nv(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=P9}var rv=nv;function z_(y){return y!=null&&rv(y.length)&&!Jt(y)}var V_=z_,iv=Object.prototype;function sv(y){var T=y&&y.constructor,z=typeof T=="function"&&T.prototype||iv;return y===z}var T9=sv;function ov(y,T){for(var z=-1,Y=Array(y);++z<y;)Y[z]=T(z);return Y}var j_=ov,H_="[object Arguments]";function M9(y){return Rt(y)&&Dt(y)==H_}var av=M9,G_=Object.prototype,W_=G_.hasOwnProperty,$_=G_.propertyIsEnumerable,K_=av(function(){return arguments}())?av:function(y){return Rt(y)&&W_.call(y,"callee")&&!$_.call(y,"callee")},lv=K_;function X_(){return!1}var q_=X_,uv=e&&!e.nodeType&&e,cv=uv&&!0&&t&&!t.nodeType&&t,Y_=cv&&cv.exports===uv,dv=Y_?wt.Buffer:void 0,Z_=dv?dv.isBuffer:void 0,Q_=Z_||q_,D1=Q_,J_="[object Arguments]",ew="[object Array]",tw="[object Boolean]",nw="[object Date]",rw="[object Error]",iw="[object Function]",sw="[object Map]",ow="[object Number]",aw="[object Object]",lw="[object RegExp]",uw="[object Set]",ai="[object String]",cw="[object WeakMap]",pR="[object ArrayBuffer]",fR="[object DataView]",k9="[object Float32Array]",hv="[object Float64Array]",pv="[object Int8Array]",Fh="[object Int16Array]",dw="[object Int32Array]",A9="[object Uint8Array]",hw="[object Uint8ClampedArray]",fv="[object Uint16Array]",mR="[object Uint32Array]",ei={};ei[k9]=ei[hv]=ei[pv]=ei[Fh]=ei[dw]=ei[A9]=ei[hw]=ei[fv]=ei[mR]=!0,ei[J_]=ei[ew]=ei[pR]=ei[tw]=ei[fR]=ei[nw]=ei[rw]=ei[iw]=ei[sw]=ei[ow]=ei[aw]=ei[lw]=ei[uw]=ei[ai]=ei[cw]=!1;function pw(y){return Rt(y)&&rv(y.length)&&!!ei[Dt(y)]}var mv=pw;function fw(y){return function(T){return y(T)}}var gv=fw,vv=e&&!e.nodeType&&e,Bh=vv&&!0&&t&&!t.nodeType&&t,mw=Bh&&Bh.exports===vv,yv=mw&&At.process,gR=function(){try{var y=Bh&&Bh.require&&Bh.require("util").types;return y||yv&&yv.binding&&yv.binding("util")}catch{}}(),Uu=gR,bv=Uu&&Uu.isTypedArray,gw=bv?gv(bv):mv,_v=gw,vR=Object.prototype,yR=vR.hasOwnProperty;function vw(y,T){var z=Ze(y),Y=!z&&lv(y),se=!z&&!Y&&D1(y),me=!z&&!Y&&!se&&_v(y),De=z||Y||se||me,Ye=De?j_(y.length,String):[],rt=Ye.length;for(var xt in y)(T||yR.call(y,xt))&&!(De&&(xt=="length"||se&&(xt=="offset"||xt=="parent")||me&&(xt=="buffer"||xt=="byteLength"||xt=="byteOffset")||S1(xt,rt)))&&Ye.push(xt);return Ye}var wv=vw;function yw(y,T){return function(z){return y(T(z))}}var bw=yw,bR=bw(Object.keys,Object),I9=bR,xv=Object.prototype,_R=xv.hasOwnProperty;function _w(y){if(!T9(y))return I9(y);var T=[];for(var z in Object(y))_R.call(y,z)&&z!="constructor"&&T.push(z);return T}var ww=_w;function R9(y){return V_(y)?wv(y):ww(y)}var Xc=R9;function xw(y){var T=[];if(y!=null)for(var z in Object(y))T.push(z);return T}var Uh=xw,D9=Object.prototype,wR=D9.hasOwnProperty;function Sw(y){if(!Tn(y))return Uh(y);var T=T9(y),z=[];for(var Y in y)Y=="constructor"&&(T||!wR.call(y,Y))||z.push(Y);return z}var xR=Sw;function SR(y){return V_(y)?wv(y,!0):xR(y)}var O9=SR;function ER(y,T){for(var z=-1,Y=T.length,se=y.length;++z<Y;)y[se+z]=T[z];return y}var Ew=ER,Cw=bw(Object.getPrototypeOf,Object),L9=Cw,Pw="[object Object]",Tw=Function.prototype,CR=Object.prototype,Mw=Tw.toString,kw=CR.hasOwnProperty,Aw=Mw.call(Object);function Iw(y){if(!Rt(y)||Dt(y)!=Pw)return!1;var T=L9(y);if(T===null)return!0;var z=kw.call(T,"constructor")&&T.constructor;return typeof z=="function"&&z instanceof z&&Mw.call(z)==Aw}var PR=Iw;function TR(y,T,z){var Y=-1,se=y.length;T<0&&(T=-T>se?0:se+T),z=z>se?se:z,z<0&&(z+=se),se=T>z?0:z-T>>>0,T>>>=0;for(var me=Array(se);++Y<se;)me[Y]=y[Y+T];return me}var Sv=TR;function Rw(y,T,z){var Y=y.length;return z=z===void 0?Y:z,!T&&z>=Y?y:Sv(y,T,z)}var MR=Rw,zh="\\ud800-\\udfff",Ev="\\u0300-\\u036f",kR="\\ufe20-\\ufe2f",AR="\\u20d0-\\u20ff",Dw=Ev+kR+AR,IR="\\ufe0e\\ufe0f",RR="\\u200d",O1=RegExp("["+RR+zh+Dw+IR+"]");function N9(y){return O1.test(y)}var Cv=N9;function Ow(y){return y.split("")}var Lw=Ow,Pv="\\ud800-\\udfff",DR="\\u0300-\\u036f",OR="\\ufe20-\\ufe2f",Nw="\\u20d0-\\u20ff",LR=DR+OR+Nw,NR="\\ufe0e\\ufe0f",Fw="["+Pv+"]",Tv="["+LR+"]",Mv="\\ud83c[\\udffb-\\udfff]",Bw="(?:"+Tv+"|"+Mv+")",Uw="[^"+Pv+"]",qc="(?:\\ud83c[\\udde6-\\uddff]){2}",Vh="[\\ud800-\\udbff][\\udc00-\\udfff]",F9="\\u200d",kv=Bw+"?",Yc="["+NR+"]?",Av="(?:"+F9+"(?:"+[Uw,qc,Vh].join("|")+")"+Yc+kv+")*",FR=Yc+kv+Av,zw="(?:"+[Uw+Tv+"?",Tv,qc,Vh,Fw].join("|")+")",BR=RegExp(Mv+"(?="+Mv+")|"+zw+FR,"g");function UR(y){return y.match(BR)||[]}var Vw=UR;function zR(y){return Cv(y)?Vw(y):Lw(y)}var VR=zR;function L1(y,T,z){return y===y&&(z!==void 0&&(y=y<=z?y:z),T!==void 0&&(y=y>=T?y:T)),y}var B9=L1;function jR(y,T,z){return z===void 0&&(z=T,T=void 0),z!==void 0&&(z=te(z),z=z===z?z:0),T!==void 0&&(T=te(T),T=T===T?T:0),B9(te(y),T,z)}var Iv=jR;function HR(){this.__data__=new Uc,this.size=0}var GR=HR;function jw(y){var T=this.__data__,z=T.delete(y);return this.size=T.size,z}var WR=jw;function $R(y){return this.__data__.get(y)}var Hw=$R;function KR(y){return this.__data__.has(y)}var XR=KR,Gw=200;function qR(y,T){var z=this.__data__;if(z instanceof Uc){var Y=z.__data__;if(!zc||Y.length<Gw-1)return Y.push([y,T]),this.size=++z.size,this;z=this.__data__=new jc(Y)}return z.set(y,T),this.size=z.size,this}var jh=qR;function z0(y){var T=this.__data__=new Uc(y);this.size=T.size}z0.prototype.clear=GR,z0.prototype.delete=WR,z0.prototype.get=Hw,z0.prototype.has=XR,z0.prototype.set=jh;var Zc=z0;function Rv(y,T){return y&&R1(T,Xc(T),y)}var Ww=Rv;function Dv(y,T){return y&&R1(T,O9(T),y)}var $w=Dv,Kw=e&&!e.nodeType&&e,Ov=Kw&&!0&&t&&!t.nodeType&&t,Xw=Ov&&Ov.exports===Kw,qw=Xw?wt.Buffer:void 0,Lv=qw?qw.allocUnsafe:void 0;function Yw(y,T){if(T)return y.slice();var z=y.length,Y=Lv?Lv(z):new y.constructor(z);return y.copy(Y),Y}var Zw=Yw;function Qw(y,T){for(var z=-1,Y=y==null?0:y.length,se=0,me=[];++z<Y;){var De=y[z];T(De,z,y)&&(me[se++]=De)}return me}var YR=Qw;function ZR(){return[]}var N1=ZR,Jw=Object.prototype,QR=Jw.propertyIsEnumerable,F1=Object.getOwnPropertySymbols,Nv=F1?function(y){return y==null?[]:(y=Object(y),YR(F1(y),function(T){return QR.call(y,T)}))}:N1,Fv=Nv;function ex(y,T){return R1(y,Fv(y),T)}var Hh=ex,B1=Object.getOwnPropertySymbols,JR=B1?function(y){for(var T=[];y;)Ew(T,Fv(y)),y=L9(y);return T}:N1,U1=JR;function Bv(y,T){return R1(y,U1(y),T)}var eD=Bv;function Qc(y,T,z){var Y=T(y);return Ze(y)?Y:Ew(Y,z(y))}var Gh=Qc;function tD(y){return Gh(y,Xc,Fv)}var z1=tD;function tx(y){return Gh(y,O9,U1)}var nD=tx,Uv=r0(wt,"DataView"),U9=Uv,rD=r0(wt,"Promise"),z9=rD,nx=r0(wt,"Set"),zv=nx,Vv="[object Map]",rx="[object Object]",ix="[object Promise]",sx="[object Set]",jv="[object WeakMap]",Hv="[object DataView]",ox=pr(U9),Gv=pr(zc),ax=pr(z9),lx=pr(zv),V9=pr(Bu),zu=Dt;(U9&&zu(new U9(new ArrayBuffer(1)))!=Hv||zc&&zu(new zc)!=Vv||z9&&zu(z9.resolve())!=ix||zv&&zu(new zv)!=sx||Bu&&zu(new Bu)!=jv)&&(zu=function(y){var T=Dt(y),z=T==rx?y.constructor:void 0,Y=z?pr(z):"";if(Y)switch(Y){case ox:return Hv;case Gv:return Vv;case ax:return ix;case lx:return sx;case V9:return jv}return T});var V1=zu,ux=Object.prototype,cx=ux.hasOwnProperty;function dx(y){var T=y.length,z=new y.constructor(T);return T&&typeof y[0]=="string"&&cx.call(y,"index")&&(z.index=y.index,z.input=y.input),z}var iD=dx,sD=wt.Uint8Array,j1=sD;function oD(y){var T=new y.constructor(y.byteLength);return new j1(T).set(new j1(y)),T}var Wv=oD;function Si(y,T){var z=T?Wv(y.buffer):y.buffer;return new y.constructor(z,y.byteOffset,y.byteLength)}var j9=Si,aD=/\w*$/;function hx(y){var T=new y.constructor(y.source,aD.exec(y));return T.lastIndex=y.lastIndex,T}var lD=hx,px=rn?rn.prototype:void 0,$v=px?px.valueOf:void 0;function uD(y){return $v?Object($v.call(y)):{}}var cD=uD;function fx(y,T){var z=T?Wv(y.buffer):y.buffer;return new y.constructor(z,y.byteOffset,y.length)}var dD=fx,hD="[object Boolean]",mx="[object Date]",pD="[object Map]",fD="[object Number]",gx="[object RegExp]",vx="[object Set]",mD="[object String]",Wh="[object Symbol]",H1="[object ArrayBuffer]",yx="[object DataView]",gD="[object Float32Array]",bx="[object Float64Array]",vD="[object Int8Array]",yD="[object Int16Array]",_x="[object Int32Array]",bD="[object Uint8Array]",wx="[object Uint8ClampedArray]",xx="[object Uint16Array]",Kv="[object Uint32Array]";function Sx(y,T,z){var Y=y.constructor;switch(T){case H1:return Wv(y);case hD:case mx:return new Y(+y);case yx:return j9(y,z);case gD:case bx:case vD:case yD:case _x:case bD:case wx:case xx:case Kv:return dD(y,z);case pD:return new Y;case fD:case mD:return new Y(y);case gx:return lD(y);case vx:return new Y;case Wh:return cD(y)}}var Ex=Sx;function _D(y){return typeof y.constructor=="function"&&!T9(y)?F_(L9(y)):{}}var wD=_D,Cx="[object Map]";function xD(y){return Rt(y)&&V1(y)==Cx}var SD=xD,H9=Uu&&Uu.isMap,ED=H9?gv(H9):SD,Px=ED,G9="[object Set]";function CD(y){return Rt(y)&&V1(y)==G9}var Tx=CD,G1=Uu&&Uu.isSet,PD=G1?gv(G1):Tx,Mx=PD,Jc=1,kx=2,Xv=4,qv="[object Arguments]",Yv="[object Array]",Zv="[object Boolean]",Qv="[object Date]",Jv="[object Error]",e8="[object Function]",Ax="[object GeneratorFunction]",Ix="[object Map]",Rx="[object Number]",t8="[object Object]",Vu="[object RegExp]",n8="[object Set]",TD="[object String]",Dx="[object Symbol]",r8="[object WeakMap]",MD="[object ArrayBuffer]",kD="[object DataView]",Ox="[object Float32Array]",Lx="[object Float64Array]",AD="[object Int8Array]",ID="[object Int16Array]",Nx="[object Int32Array]",RD="[object Uint8Array]",W9="[object Uint8ClampedArray]",i8="[object Uint16Array]",Fx="[object Uint32Array]",li={};li[qv]=li[Yv]=li[MD]=li[kD]=li[Zv]=li[Qv]=li[Ox]=li[Lx]=li[AD]=li[ID]=li[Nx]=li[Ix]=li[Rx]=li[t8]=li[Vu]=li[n8]=li[TD]=li[Dx]=li[RD]=li[W9]=li[i8]=li[Fx]=!0,li[Jv]=li[e8]=li[r8]=!1;function W1(y,T,z,Y,se,me){var De,Ye=T&Jc,rt=T&kx,xt=T&Xv;if(z&&(De=se?z(y,Y,se,me):z(y)),De!==void 0)return De;if(!Tn(y))return y;var ae=Ze(y);if(ae){if(De=iD(y),!Ye)return hR(y,De)}else{var ze=V1(y),tn=ze==e8||ze==Ax;if(D1(y))return Zw(y,Ye);if(ze==t8||ze==qv||tn&&!se){if(De=rt||tn?{}:wD(y),!Ye)return rt?eD(y,$w(De,y)):Hh(y,Ww(De,y))}else{if(!li[ze])return se?y:{};De=Ex(y,ze,Ye)}}me||(me=new Zc);var In=me.get(y);if(In)return In;me.set(y,De),Mx(y)?y.forEach(function(ur){De.add(W1(ur,T,z,ur,y,me))}):Px(y)&&y.forEach(function(ur,er){De.set(er,W1(ur,T,z,er,y,me))});var xn=xt?rt?nD:z1:rt?O9:Xc,lr=ae?void 0:xn(y);return B_(lr||y,function(ur,er){lr&&(er=ur,ur=y[er]),kh(De,er,W1(ur,T,z,er,y,me))}),De}var DD=W1,OD=1,s8=4;function Bx(y){return DD(y,OD|s8)}var LD=Bx,Ux="__lodash_hash_undefined__";function zx(y){return this.__data__.set(y,Ux),this}var o8=zx;function Vx(y){return this.__data__.has(y)}var ND=Vx;function $1(y){var T=-1,z=y==null?0:y.length;for(this.__data__=new jc;++T<z;)this.add(y[T])}$1.prototype.add=$1.prototype.push=o8,$1.prototype.has=ND;var FD=$1;function BD(y,T){for(var z=-1,Y=y==null?0:y.length;++z<Y;)if(T(y[z],z,y))return!0;return!1}var $9=BD;function a8(y,T){return y.has(T)}var UD=a8,jx=1,Hx=2;function Gx(y,T,z,Y,se,me){var De=z&jx,Ye=y.length,rt=T.length;if(Ye!=rt&&!(De&&rt>Ye))return!1;var xt=me.get(y),ae=me.get(T);if(xt&&ae)return xt==T&&ae==y;var ze=-1,tn=!0,In=z&Hx?new FD:void 0;for(me.set(y,T),me.set(T,y);++ze<Ye;){var xn=y[ze],lr=T[ze];if(Y)var ur=De?Y(lr,xn,ze,T,y,me):Y(xn,lr,ze,y,T,me);if(ur!==void 0){if(ur)continue;tn=!1;break}if(In){if(!$9(T,function(er,Lr){if(!UD(In,Lr)&&(xn===er||se(xn,er,z,Y,me)))return In.push(Lr)})){tn=!1;break}}else if(!(xn===lr||se(xn,lr,z,Y,me))){tn=!1;break}}return me.delete(y),me.delete(T),tn}var l8=Gx;function Wx(y){var T=-1,z=Array(y.size);return y.forEach(function(Y,se){z[++T]=[se,Y]}),z}var $x=Wx;function Kx(y){var T=-1,z=Array(y.size);return y.forEach(function(Y){z[++T]=Y}),z}var Xx=Kx,qx=1,Yx=2,Zx="[object Boolean]",Qx="[object Date]",Jx="[object Error]",u8="[object Map]",K9="[object Number]",eS="[object RegExp]",zD="[object Set]",VD="[object String]",tS="[object Symbol]",nS="[object ArrayBuffer]",rS="[object DataView]",c8=rn?rn.prototype:void 0,d8=c8?c8.valueOf:void 0;function jD(y,T,z,Y,se,me,De){switch(z){case rS:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case nS:return!(y.byteLength!=T.byteLength||!me(new j1(y),new j1(T)));case Zx:case Qx:case K9:return co(+y,+T);case Jx:return y.name==T.name&&y.message==T.message;case eS:case VD:return y==T+"";case u8:var Ye=$x;case zD:var rt=Y&qx;if(Ye||(Ye=Xx),y.size!=T.size&&!rt)return!1;var xt=De.get(y);if(xt)return xt==T;Y|=Yx,De.set(y,T);var ae=l8(Ye(y),Ye(T),Y,se,me,De);return De.delete(y),ae;case tS:if(d8)return d8.call(y)==d8.call(T)}return!1}var iS=jD,h8=1,p8=Object.prototype,K1=p8.hasOwnProperty;function sS(y,T,z,Y,se,me){var De=z&h8,Ye=z1(y),rt=Ye.length,xt=z1(T),ae=xt.length;if(rt!=ae&&!De)return!1;for(var ze=rt;ze--;){var tn=Ye[ze];if(!(De?tn in T:K1.call(T,tn)))return!1}var In=me.get(y),xn=me.get(T);if(In&&xn)return In==T&&xn==y;var lr=!0;me.set(y,T),me.set(T,y);for(var ur=De;++ze<rt;){tn=Ye[ze];var er=y[tn],Lr=T[tn];if(Y)var Zs=De?Y(Lr,er,tn,T,y,me):Y(er,Lr,tn,y,T,me);if(!(Zs===void 0?er===Lr||se(er,Lr,z,Y,me):Zs)){lr=!1;break}ur||(ur=tn=="constructor")}if(lr&&!ur){var Qs=y.constructor,Js=T.constructor;Qs!=Js&&"constructor"in y&&"constructor"in T&&!(typeof Qs=="function"&&Qs instanceof Qs&&typeof Js=="function"&&Js instanceof Js)&&(lr=!1)}return me.delete(y),me.delete(T),lr}var f8=sS,oS=1,aS="[object Arguments]",m8="[object Array]",$h="[object Object]",lS=Object.prototype,uS=lS.hasOwnProperty;function cS(y,T,z,Y,se,me){var De=Ze(y),Ye=Ze(T),rt=De?m8:V1(y),xt=Ye?m8:V1(T);rt=rt==aS?$h:rt,xt=xt==aS?$h:xt;var ae=rt==$h,ze=xt==$h,tn=rt==xt;if(tn&&D1(y)){if(!D1(T))return!1;De=!0,ae=!1}if(tn&&!ae)return me||(me=new Zc),De||_v(y)?l8(y,T,z,Y,se,me):iS(y,T,rt,z,Y,se,me);if(!(z&oS)){var In=ae&&uS.call(y,"__wrapped__"),xn=ze&&uS.call(T,"__wrapped__");if(In||xn){var lr=In?y.value():y,ur=xn?T.value():T;return me||(me=new Zc),se(lr,ur,z,Y,me)}}return tn?(me||(me=new Zc),f8(y,T,z,Y,se,me)):!1}var dS=cS;function g8(y,T,z,Y,se){return y===T?!0:y==null||T==null||!Rt(y)&&!Rt(T)?y!==y&&T!==T:dS(y,T,z,Y,g8,se)}var hS=g8,HD=1,v8=2;function pS(y,T,z,Y){var se=z.length,me=se,De=!Y;if(y==null)return!me;for(y=Object(y);se--;){var Ye=z[se];if(De&&Ye[2]?Ye[1]!==y[Ye[0]]:!(Ye[0]in y))return!1}for(;++se<me;){Ye=z[se];var rt=Ye[0],xt=y[rt],ae=Ye[1];if(De&&Ye[2]){if(xt===void 0&&!(rt in y))return!1}else{var ze=new Zc;if(Y)var tn=Y(xt,ae,rt,y,T,ze);if(!(tn===void 0?hS(ae,xt,HD|v8,Y,ze):tn))return!1}}return!0}var GD=pS;function fS(y){return y===y&&!Tn(y)}var mS=fS;function WD(y){for(var T=Xc(y),z=T.length;z--;){var Y=T[z],se=y[Y];T[z]=[Y,se,mS(se)]}return T}var y8=WD;function gS(y,T){return function(z){return z==null?!1:z[y]===T&&(T!==void 0||y in Object(z))}}var vS=gS;function yS(y){var T=y8(y);return T.length==1&&T[0][2]?vS(T[0][0],T[0][1]):function(z){return z===y||GD(z,y,T)}}var $D=yS;function KD(y,T){return y!=null&&T in Object(y)}var bS=KD;function XD(y,T,z){T=Ou(T,y);for(var Y=-1,se=T.length,me=!1;++Y<se;){var De=Ba(T[Y]);if(!(me=y!=null&&z(y,De)))break;y=y[De]}return me||++Y!=se?me:(se=y==null?0:y.length,!!se&&rv(se)&&S1(De,se)&&(Ze(y)||lv(y)))}var qD=XD;function _S(y,T){return y!=null&&qD(y,T,bS)}var YD=_S,ZD=1,wS=2;function QD(y,T){return vr(y)&&mS(T)?vS(Ba(y),T):function(z){var Y=F0(z,y);return Y===void 0&&Y===T?YD(z,y):hS(T,Y,ZD|wS)}}var JD=QD;function xS(y){return function(T){return T==null?void 0:T[y]}}var b8=xS;function SS(y){return function(T){return Gc(T,y)}}var eO=SS;function tO(y){return vr(y)?b8(Ba(y)):eO(y)}var ES=tO;function nO(y){return typeof y=="function"?y:y==null?C9:typeof y=="object"?Ze(y)?JD(y[0],y[1]):$D(y):ES(y)}var rO=nO;function CS(y){return function(T,z,Y){for(var se=-1,me=Object(T),De=Y(T),Ye=De.length;Ye--;){var rt=De[y?Ye:++se];if(z(me[rt],rt,me)===!1)break}return T}}var iO=CS,sO=iO(),PS=sO;function oO(y,T){return y&&PS(y,T,Xc)}var aO=oO,Kh=function(){return wt.Date.now()},ed=Kh,lO="Expected a function",TS=Math.max,uO=Math.min;function cO(y,T,z){var Y,se,me,De,Ye,rt,xt=0,ae=!1,ze=!1,tn=!0;if(typeof y!="function")throw new TypeError(lO);T=te(T)||0,Tn(z)&&(ae=!!z.leading,ze="maxWait"in z,me=ze?TS(te(z.maxWait)||0,T):me,tn="trailing"in z?!!z.trailing:tn);function In(ti){var eo=Y,la=se;return Y=se=void 0,xt=ti,De=y.apply(la,eo),De}function xn(ti){return xt=ti,Ye=setTimeout(er,T),ae?In(ti):De}function lr(ti){var eo=ti-rt,la=ti-xt,H0=T-eo;return ze?uO(H0,me-la):H0}function ur(ti){var eo=ti-rt,la=ti-xt;return rt===void 0||eo>=T||eo<0||ze&&la>=me}function er(){var ti=ed();if(ur(ti))return Lr(ti);Ye=setTimeout(er,lr(ti))}function Lr(ti){return Ye=void 0,tn&&Y?In(ti):(Y=se=void 0,De)}function Zs(){Ye!==void 0&&clearTimeout(Ye),xt=0,Y=rt=se=Ye=void 0}function Qs(){return Ye===void 0?De:Lr(ed())}function Js(){var ti=ed(),eo=ur(ti);if(Y=arguments,se=this,rt=ti,eo){if(Ye===void 0)return xn(rt);if(ze)return clearTimeout(Ye),Ye=setTimeout(er,T),In(rt)}return Ye===void 0&&(Ye=setTimeout(er,T)),De}return Js.cancel=Zs,Js.flush=Qs,Js}var MS=cO;function dO(y){var T=y==null?0:y.length;return T?y[T-1]:void 0}var kS=dO;function AS(y,T){return T.length<2?y:Gc(y,Sv(T,0,-1))}var hO=AS;function pO(y){return typeof y=="number"&&y==Ms(y)}var _8=pO;function IS(y,T){var z={};return T=rO(T),aO(y,function(Y,se,me){Rl(z,se,T(Y,se,me))}),z}var fO=IS;function RS(y,T){return T=Ou(T,y),y=hO(y,T),y==null||delete y[Ba(kS(T))]}var mO=RS,DS=9007199254740991,w8=Math.floor;function OS(y,T){var z="";if(!y||T<1||T>DS)return z;do T%2&&(z+=y),T=w8(T/2),T&&(y+=y);while(T);return z}var LS=OS,NS=b8("length"),gO=NS,FS="\\ud800-\\udfff",BS="\\u0300-\\u036f",vO="\\ufe20-\\ufe2f",US="\\u20d0-\\u20ff",X9=BS+vO+US,yO="\\ufe0e\\ufe0f",bO="["+FS+"]",q9="["+X9+"]",Y9="\\ud83c[\\udffb-\\udfff]",zS="(?:"+q9+"|"+Y9+")",Z9="[^"+FS+"]",x8="(?:\\ud83c[\\udde6-\\uddff]){2}",VS="[\\ud800-\\udbff][\\udc00-\\udfff]",jS="\\u200d",HS=zS+"?",GS="["+yO+"]?",td="(?:"+jS+"(?:"+[Z9,x8,VS].join("|")+")"+GS+HS+")*",Q9=GS+HS+td,_O="(?:"+[Z9+q9+"?",q9,x8,VS,bO].join("|")+")",S8=RegExp(Y9+"(?="+Y9+")|"+_O+Q9,"g");function E8(y){for(var T=S8.lastIndex=0;S8.test(y);)++T;return T}var wO=E8;function xO(y){return Cv(y)?wO(y):gO(y)}var C8=xO,WS=Math.ceil;function $S(y,T){T=T===void 0?" ":y9(T);var z=T.length;if(z<2)return z?LS(T,y):T;var Y=LS(T,WS(y/C8(T)));return Cv(T)?MR(VR(Y),0,y).join(""):Y.slice(0,y)}var SO=$S;function EO(y,T,z){y=_1(y),T=Ms(T);var Y=T?C8(y):0;return T&&Y<T?SO(T-Y,z)+y:y}var Xh=EO;function CO(y,T){return y==null?!0:mO(y,T)}var KS=CO,XS=5*1e3,qS=class{constructor(y){X(this,"_cache",new Il),X(this,"_keepHotUntapDebounce"),Ct(this,y)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Me(this).propsP}get sheet(){return Me(this).sheet.publicApi}get project(){return Me(this).sheet.project.publicApi}get address(){return D({},Me(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const y=Me(this);return(0,k1.prism)(()=>(0,k1.val)(y.getValues().getValue()))})}onValuesChange(y,T){return _3(this._valuesPrism(),y,T)}get value(){const y=this._valuesPrism();{if(!y.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const T=y.keepHot();this._keepHotUntapDebounce=MS(()=>{T(),this._keepHotUntapDebounce=void 0},XS)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return y.getValue()}set initialValue(y){Me(this).setInitialValue(y)}};function YS(y){const T=new WeakMap;return z=>(T.has(z)||T.set(z,y(z)),T.get(z))}function J9(y){return y.type==="compound"||y.type==="enum"}function P8(y,T){if(!y)return;const[z,...Y]=T;if(z===void 0)return y;if(!J9(y))return;const se=y.type==="enum"?y.cases[z]:y.props[z];return P8(se,Y)}function T8(y){return!J9(y)}var PO=class{constructor(y,T,z){this.sheet=y,this.template=T,this.nativeObject=z,X(this,"$$isPointerToPrismProvider",!0),X(this,"address"),X(this,"publicApi"),X(this,"_initialValue",new $r.Atom({})),X(this,"_cache",new Il),X(this,"_logger"),X(this,"_internalUtilCtx"),this._logger=y._logger.named("SheetObject",T.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=G(D({},T.address),{sheetInstanceId:y.address.sheetInstanceId}),this.publicApi=new qS(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,$r.prism)(()=>{const y=(0,$r.val)(this.template.getDefaultValues()),T=(0,$r.val)(this._initialValue.pointer),z=$r.prism.memo("withInitialCache",()=>new WeakMap,[]),Y=U0(y,T,z),se=(0,$r.val)(this.template.getStaticValues()),me=$r.prism.memo("withStatics",()=>new WeakMap,[]);let Ye=U0(Y,se,me),rt;{const ae=$r.prism.memo("seq",()=>this.getSequencedValues(),[]),ze=$r.prism.memo("withSeqsCache",()=>new WeakMap,[]);rt=(0,$r.val)((0,$r.val)(ae)),Ye=U0(Ye,rt,ze)}return M1("finalAtom",Ye).pointer}))}getValueByPointer(y){const T=(0,$r.val)(this.getValues()),{path:z}=(0,$r.getPointerParts)(y);return(0,$r.val)($c(T,z))}pointerToPrism(y){const{path:T}=(0,$r.getPointerParts)(y);return(0,$r.prism)(()=>{const z=(0,$r.val)(this.getValues());return(0,$r.val)($c(z,T))})}getSequencedValues(){return(0,$r.prism)(()=>{const y=$r.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),T=(0,$r.val)(y),z=new $r.Atom({}),Y=(0,$r.val)(this.template.configPointer);return $r.prism.effect("processTracks",()=>{const se=[];for(const{trackId:me,pathToProp:De}of T){const Ye=this._trackIdToPrism(me),rt=P8(Y,De),xt=rt.deserializeAndSanitize,ae=rt.interpolate,ze=()=>{const In=Ye.getValue();if(!In)return z.setByPointer(Lr=>$c(Lr,De),void 0);const xn=xt(In.left),lr=xn===void 0?rt.default:xn;if(In.right===void 0)return z.setByPointer(Lr=>$c(Lr,De),lr);const ur=xt(In.right),er=ur===void 0?rt.default:ur;return z.setByPointer(Lr=>$c(Lr,De),ae(lr,er,In.progression))},tn=Ye.onStale(ze);ze(),se.push(tn)}return()=>{for(const me of se)me()}},[Y,...T]),z.pointer})}_trackIdToPrism(y){const T=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[y],z=this.sheet.getSequence().positionPrism;return Xg(this._internalUtilCtx,T,z)}get propsP(){return this._cache.get("propsP",()=>(0,$r.pointer)({root:this,path:[]}))}validateValue(y,T){}setInitialValue(y){this.validateValue(this.propsP,y),this._initialValue.set(y)}};function ui(y){return function(z,Y){return y(z,Y())}}var Lo={_hmm:oa(524),_todo:oa(522),_error:oa(521),errorDev:oa(529),errorPublic:oa(545),_kapow:oa(268),_warn:oa(265),warnDev:oa(273),warnPublic:oa(289),_debug:oa(137),debugDev:oa(145),_trace:oa(73),traceDev:oa(81)};function oa(y){return Object.freeze({audience:ju(y,8)?"internal":ju(y,16)?"dev":"public",category:ju(y,4)?"troubleshooting":ju(y,2)?"todo":"general",level:ju(y,512)?512:ju(y,256)?256:ju(y,128)?128:64})}function ju(y,T){return(y&T)===T}function Kr(y,T){return((T&32)===32?!0:(T&16)===16?y.dev:(T&8)===8?y.internal:!1)&&y.min<=T}var Dl={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(y,T,z){return this.create({names:[...y.names,{name:T,key:z}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(y){if(y.length<5)return y;const T=y.replace(this.collapseOnRE,"");return this.cssMemo.has(T)||this.cssMemo.set(T,this.css(y)),T},css(y){var T,z,Y,se;const me=this.cssMemo.get(y);if(me)return me;let De="color:".concat((z=(T=this.color)==null?void 0:T.call(this,y))!=null?z:"hsl(".concat((y.charCodeAt(0)+y.charCodeAt(y.length-1))%360,", 100%, 60%)"));return(Y=this.bold)!=null&&Y.test(y)&&(De+=";font-weight:600"),(se=this.italic)!=null&&se.test(y)&&(De+=";font-style:italic"),this.cssMemo.set(y,De),De}}};function ZS(y=console,T={}){const z=G(D({},Dl),{includes:D({},Dl.includes)}),Y={styled:TO.bind(z,y),noStyle:MO.bind(z,y)},se=QS.bind(z);function me(){return z.loggingConsoleStyle&&z.loggerConsoleStyle?Y.styled:Y.noStyle}return z.create=me(),{configureLogger(De){var Ye;De==="console"?(z.loggerConsoleStyle=Dl.loggerConsoleStyle,z.create=me()):De.type==="console"?(z.loggerConsoleStyle=(Ye=De.style)!=null?Ye:Dl.loggerConsoleStyle,z.create=me()):De.type==="keyed"?(z.creatExt=rt=>De.keyed(rt.names),z.create=se):De.type==="named"&&(z.creatExt=nd.bind(null,De.named),z.create=se)},configureLogging(De){var Ye,rt,xt,ae,ze;z.includes.dev=(Ye=De.dev)!=null?Ye:Dl.includes.dev,z.includes.internal=(rt=De.internal)!=null?rt:Dl.includes.internal,z.includes.min=(xt=De.min)!=null?xt:Dl.includes.min,z.include=(ae=De.include)!=null?ae:Dl.include,z.loggingConsoleStyle=(ze=De.consoleStyle)!=null?ze:Dl.loggingConsoleStyle,z.create=me()},getLogger(){return z.create({names:[]})}}}function nd(y,T){const z=[];for(let{name:Y,key:se}of T.names)z.push(se==null?Y:"".concat(Y," (").concat(se,")"));return y(z)}function QS(y){const T=D(D({},this.includes),this.include(y)),z=this.filtered,Y=this.named.bind(this,y),se=this.creatExt(y),me=Kr(T,524),De=Kr(T,522),Ye=Kr(T,521),rt=Kr(T,529),xt=Kr(T,545),ae=Kr(T,265),ze=Kr(T,268),tn=Kr(T,273),In=Kr(T,289),xn=Kr(T,137),lr=Kr(T,145),ur=Kr(T,73),er=Kr(T,81),Lr=me?se.error.bind(se,Lo._hmm):z.bind(y,524),Zs=De?se.error.bind(se,Lo._todo):z.bind(y,522),Qs=Ye?se.error.bind(se,Lo._error):z.bind(y,521),Js=rt?se.error.bind(se,Lo.errorDev):z.bind(y,529),ti=xt?se.error.bind(se,Lo.errorPublic):z.bind(y,545),eo=ze?se.warn.bind(se,Lo._kapow):z.bind(y,268),la=ae?se.warn.bind(se,Lo._warn):z.bind(y,265),H0=tn?se.warn.bind(se,Lo.warnDev):z.bind(y,273),G0=In?se.warn.bind(se,Lo.warnPublic):z.bind(y,273),ud=xn?se.debug.bind(se,Lo._debug):z.bind(y,137),Vl=lr?se.debug.bind(se,Lo.debugDev):z.bind(y,145),cd=ur?se.trace.bind(se,Lo._trace):z.bind(y,73),dd=er?se.trace.bind(se,Lo.traceDev):z.bind(y,81),rs={_hmm:Lr,_todo:Zs,_error:Qs,errorDev:Js,errorPublic:ti,_kapow:eo,_warn:la,warnDev:H0,warnPublic:G0,_debug:ud,debugDev:Vl,_trace:cd,traceDev:dd,lazy:{_hmm:me?ui(Lr):Lr,_todo:De?ui(Zs):Zs,_error:Ye?ui(Qs):Qs,errorDev:rt?ui(Js):Js,errorPublic:xt?ui(ti):ti,_kapow:ze?ui(eo):eo,_warn:ae?ui(la):la,warnDev:tn?ui(H0):H0,warnPublic:In?ui(G0):G0,_debug:xn?ui(ud):ud,debugDev:lr?ui(Vl):Vl,_trace:ur?ui(cd):cd,traceDev:er?ui(dd):dd},named:Y,utilFor:{internal(){return{debug:rs._debug,error:rs._error,warn:rs._warn,trace:rs._trace,named(ua,ci){return rs.named(ua,ci).utilFor.internal()}}},dev(){return{debug:rs.debugDev,error:rs.errorDev,warn:rs.warnDev,trace:rs.traceDev,named(ua,ci){return rs.named(ua,ci).utilFor.dev()}}},public(){return{error:rs.errorPublic,warn:rs.warnPublic,debug(ua,ci){rs._warn('(public "debug" filtered out) '.concat(ua),ci)},trace(ua,ci){rs._warn('(public "trace" filtered out) '.concat(ua),ci)},named(ua,ci){return rs.named(ua,ci).utilFor.public()}}}}};return rs}function TO(y,T){const z=D(D({},this.includes),this.include(T)),Y=[];let se="";for(let rt=0;rt<T.names.length;rt++){const{name:xt,key:ae}=T.names[rt];if(se+=" %c".concat(xt),Y.push(this.style.css(xt)),ae!=null){const ze="%c#".concat(ae);se+=ze,Y.push(this.style.css(ze))}}const me=this.filtered,De=this.named.bind(this,T),Ye=[se,...Y];return eE(me,T,z,y,Ye,JS(Ye),De)}function JS(y){const T=y.slice(0);for(let z=1;z<T.length;z++)T[z]+=";background-color:#e0005a;padding:2px;color:white";return T}function MO(y,T){const z=D(D({},this.includes),this.include(T));let Y="";for(let Ye=0;Ye<T.names.length;Ye++){const{name:rt,key:xt}=T.names[Ye];Y+=" ".concat(rt),xt!=null&&(Y+="#".concat(xt))}const se=this.filtered,me=this.named.bind(this,T),De=[Y];return eE(se,T,z,y,De,De,me)}function eE(y,T,z,Y,se,me,De){const Ye=Kr(z,524),rt=Kr(z,522),xt=Kr(z,521),ae=Kr(z,529),ze=Kr(z,545),tn=Kr(z,265),In=Kr(z,268),xn=Kr(z,273),lr=Kr(z,289),ur=Kr(z,137),er=Kr(z,145),Lr=Kr(z,73),Zs=Kr(z,81),Qs=Ye?Y.error.bind(Y,...se):y.bind(T,524),Js=rt?Y.error.bind(Y,...se):y.bind(T,522),ti=xt?Y.error.bind(Y,...se):y.bind(T,521),eo=ae?Y.error.bind(Y,...se):y.bind(T,529),la=ze?Y.error.bind(Y,...se):y.bind(T,545),H0=In?Y.warn.bind(Y,...me):y.bind(T,268),G0=tn?Y.warn.bind(Y,...se):y.bind(T,265),ud=xn?Y.warn.bind(Y,...se):y.bind(T,273),Vl=lr?Y.warn.bind(Y,...se):y.bind(T,273),cd=ur?Y.info.bind(Y,...se):y.bind(T,137),dd=er?Y.info.bind(Y,...se):y.bind(T,145),rs=Lr?Y.debug.bind(Y,...se):y.bind(T,73),ua=Zs?Y.debug.bind(Y,...se):y.bind(T,81),ci={_hmm:Qs,_todo:Js,_error:ti,errorDev:eo,errorPublic:la,_kapow:H0,_warn:G0,warnDev:ud,warnPublic:Vl,_debug:cd,debugDev:dd,_trace:rs,traceDev:ua,lazy:{_hmm:Ye?ui(Qs):Qs,_todo:rt?ui(Js):Js,_error:xt?ui(ti):ti,errorDev:ae?ui(eo):eo,errorPublic:ze?ui(la):la,_kapow:In?ui(H0):H0,_warn:tn?ui(G0):G0,warnDev:xn?ui(ud):ud,warnPublic:lr?ui(Vl):Vl,_debug:ur?ui(cd):cd,debugDev:er?ui(dd):dd,_trace:Lr?ui(rs):rs,traceDev:Zs?ui(ua):ua},named:De,utilFor:{internal(){return{debug:ci._debug,error:ci._error,warn:ci._warn,trace:ci._trace,named(W0,o0){return ci.named(W0,o0).utilFor.internal()}}},dev(){return{debug:ci.debugDev,error:ci.errorDev,warn:ci.warnDev,trace:ci.traceDev,named(W0,o0){return ci.named(W0,o0).utilFor.dev()}}},public(){return{error:ci.errorPublic,warn:ci.warnPublic,debug(W0,o0){ci._warn('(public "debug" filtered out) '.concat(W0),o0)},trace(W0,o0){ci._warn('(public "trace" filtered out) '.concat(W0),o0)},named(W0,o0){return ci.named(W0,o0).utilFor.public()}}}}};return ci}var M8=ZS(console,{_debug:function(){},_error:function(){}});M8.configureLogging({dev:!0,min:64});var e3=M8.getLogger().named("Theatre.js (default logger)").utilFor.dev(),tE=new WeakMap;function nE(y){const T=tE.get(y);if(T)return T;const z=new Map;return tE.set(y,z),rE([],y,z),z}function rE(y,T,z){for(const[Y,se]of Object.entries(T.props))if(!J9(se)){const me=[...y,Y];z.set(JSON.stringify(me),z.size),iE(me,se,z)}for(const[Y,se]of Object.entries(T.props))if(J9(se)){const me=[...y,Y];z.set(JSON.stringify(me),z.size),iE(me,se,z)}}function iE(y,T,z){if(T.type==="compound")rE(y,T,z);else{if(T.type==="enum")throw new Error("Enums aren't supported yet");z.set(JSON.stringify(y),z.size)}}function k8(y){return typeof y=="object"&&y!==null&&Object.keys(y).length===0}var kO=class{constructor(y,T,z,Y,se){this.sheetTemplate=y,X(this,"address"),X(this,"type","Theatre_SheetObjectTemplate"),X(this,"_config"),X(this,"_temp_actions_atom"),X(this,"_cache",new Il),X(this,"project"),X(this,"pointerToSheetState"),X(this,"pointerToStaticOverrides"),this.address=G(D({},y.address),{objectKey:T}),this._config=new hs.Atom(Y),this._temp_actions_atom=new hs.Atom(se),this.project=y.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(y,T,z){return this._config.set(z),new PO(y,this,T)}reconfigure(y){this._config.set(y)}_temp_setActions(y){this._temp_actions_atom.set(y)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,hs.prism)(()=>{const y=(0,hs.val)(this.configPointer);return Kg(y)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,hs.prism)(()=>{var y;const T=(y=(0,hs.val)(this.pointerToStaticOverrides))!=null?y:{};return(0,hs.val)(this.configPointer).deserializeAndSanitize(T)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,hs.prism)(()=>{const y=this.project.pointers.historic.sheetsById[this.address.sheetId],T=(0,hs.val)(y.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!T)return We;const z=[];if(!T)return We;const Y=(0,hs.val)(this.configPointer),se=Object.entries(T);for(const[De,Ye]of se){const rt=AO(De);if(!rt)continue;const xt=P8(Y,rt);xt&&T8(xt)&&z.push({pathToProp:rt,trackId:Ye})}const me=nE(Y);return z.sort((De,Ye)=>{const rt=De.pathToProp,xt=Ye.pathToProp,ae=me.get(JSON.stringify(rt)),ze=me.get(JSON.stringify(xt));return ae>ze?1:-1}),z.length===0?We:z}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,hs.prism)(()=>{const y=(0,hs.val)(this.getArrayOfValidSequenceTracks());let T={};for(const{pathToProp:z,trackId:Y}of y)Ih(T,z,Y);return T}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,hs.prism)(()=>{const y=(0,hs.val)(this.getStaticValues()),T=(0,hs.val)(this.getArrayOfValidSequenceTracks()),z=LD(y);for(const{pathToProp:Y}of T){KS(z,Y);let se=Y.slice(0,-1);for(;se.length>0;){const me=w1(z,se);if(!k8(me))break;KS(z,se),se=se.slice(0,-1)}}if(!k8(z))return z}))}getDefaultsAtPointer(y){const{path:T}=(0,hs.getPointerParts)(y),z=this.getDefaultValues().getValue();return w1(z,T)}};function AO(y){try{return JSON.parse(y)}catch{e3.warn("property ".concat(JSON.stringify(y)," cannot be parsed. Skipping."));return}}var A8=zt,IO=YS(y=>JSON.stringify(y));C(pe());var RO=class extends Error{},qh=class extends RO{},sE=zt,DO=zt,oE=zt,ms=zt;function Ol(){let y,T;const z=new Promise((se,me)=>{y=De=>{se(De),Y.status="resolved"},T=De=>{me(De),Y.status="rejected"}}),Y={resolve:y,reject:T,promise:z,status:"pending"};return Y}var OO=()=>{},t3=OO,aE=zt,LO=class{constructor(){X(this,"_stopPlayCallback",t3),X(this,"_state",new aE.Atom({position:0,playing:!1})),X(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=t3}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.setByPointer(T=>T.position,y)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(y){this._state.setByPointer(T=>T.playing,y)}play(y,T,z,Y,se){this.playing&&this.pause(),this.playing=!0;const me=T[1]-T[0];{const tn=this.getCurrentPosition();tn<T[0]||tn>T[1]?Y==="normal"||Y==="alternate"?this._updatePositionInState(T[0]):(Y==="reverse"||Y==="alternateReverse")&&this._updatePositionInState(T[1]):Y==="normal"||Y==="alternate"?tn===T[1]&&this._updatePositionInState(T[0]):tn===T[0]&&this._updatePositionInState(T[1])}const De=Ol(),Ye=se.time,rt=me*y;let xt=this.getCurrentPosition()-T[0];(Y==="reverse"||Y==="alternateReverse")&&(xt=T[1]-this.getCurrentPosition());const ae=tn=>{const xn=Math.max(tn-Ye,0)/1e3,lr=Math.min(xn*z+xt,rt);if(lr!==rt){const ur=Math.floor(lr/me);let er=lr/me%1*me;if(Y!=="normal")if(Y==="reverse")er=me-er;else{const Lr=ur%2===0;Y==="alternate"?Lr||(er=me-er):Lr&&(er=me-er)}this._updatePositionInState(er+T[0]),ze()}else{if(Y==="normal")this._updatePositionInState(T[1]);else if(Y==="reverse")this._updatePositionInState(T[0]);else{const ur=(y-1)%2===0;Y==="alternate"?ur?this._updatePositionInState(T[1]):this._updatePositionInState(T[0]):ur?this._updatePositionInState(T[0]):this._updatePositionInState(T[1])}this.playing=!1,De.resolve(!0)}};this._stopPlayCallback=()=>{se.offThisOrNextTick(ae),se.offNextTick(ae),this.playing&&De.resolve(!1)};const ze=()=>se.onNextTick(ae);return se.onThisOrNextTick(ae),De.promise}playDynamicRange(y,T){this.playing&&this.pause(),this.playing=!0;const z=Ol(),Y=y.keepHot();z.promise.then(Y,Y);let se=T.time;const me=Ye=>{const rt=Math.max(Ye-se,0);se=Ye;const xt=rt/1e3,ae=this.getCurrentPosition(),ze=y.getValue();if(ae<ze[0]||ae>ze[1])this.gotoPosition(ze[0]);else{let tn=ae+xt;tn>ze[1]&&(tn=ze[0]+(tn-ze[1])),this.gotoPosition(tn)}De()};this._stopPlayCallback=()=>{T.offThisOrNextTick(me),T.offNextTick(me),z.resolve(!1)};const De=()=>T.onNextTick(me);return T.onThisOrNextTick(me),z.promise}},lE=zt,uE="__TheatreJS_StudioBundle",I8="__TheatreJS_CoreBundle",cE="__TheatreJS_Notifications",X1=y=>(...T)=>{var z;switch(y){case"success":{e3.debug(T.slice(0,2).join(`
`));break}case"info":{e3.debug(T.slice(0,2).join(`
`));break}case"warning":{e3.warn(T.slice(0,2).join(`
`));break}}return typeof window<"u"?(z=window[cE])==null?void 0:z.notify[y](...T):void 0},Yh={warning:X1("warning"),success:X1("success"),info:X1("info"),error:X1("error")};typeof window<"u"&&(window.addEventListener("error",y=>{Yh.error("An error occurred","<pre>".concat(y.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",y=>{Yh.error("An error occurred","<pre>".concat(y.reason,`</pre>

See **console** for details.`))}));var NO=class{constructor(y,T,z){this._decodedBuffer=y,this._audioContext=T,this._nodeDestination=z,X(this,"_mainGain"),X(this,"_state",new lE.Atom({position:0,playing:!1})),X(this,"statePointer"),X(this,"_stopPlayCallback",t3),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(y,T){const z=Ol();this._playing&&this.pause(),this._playing=!0;let Y;const se=()=>{Y==null||Y(),Y=this._loopInRange(y.getValue(),T).stop},me=y.onStale(se);return se(),this._stopPlayCallback=()=>{Y==null||Y(),me(),z.resolve(!1)},z.promise}_loopInRange(y,T){let Y=this.getCurrentPosition();const se=y[1]-y[0];Y<y[0]||Y>y[1]?this._updatePositionInState(y[0]):Y===y[1]&&this._updatePositionInState(y[0]),Y=this.getCurrentPosition();const me=this._audioContext.createBufferSource();me.buffer=this._decodedBuffer,me.connect(this._mainGain),me.playbackRate.value=1,me.loop=!0,me.loopStart=y[0],me.loopEnd=y[1];const De=T.time;let Ye=Y-y[0];me.start(0,Y);const rt=ze=>{let lr=(Math.max(ze-De,0)/1e3*1+Ye)/se%1*se;this._updatePositionInState(lr+y[0]),xt()},xt=()=>T.onNextTick(rt);return T.onThisOrNextTick(rt),{stop:()=>{me.stop(),me.disconnect(),T.offThisOrNextTick(rt),T.offNextTick(rt)}}}get _playing(){return this._state.get().playing}set _playing(y){this._state.setByPointer(T=>T.playing,y)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=t3}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.reduce(T=>G(D({},T),{position:y}))}getCurrentPosition(){return this._state.get().position}play(y,T,z,Y,se){this._playing&&this.pause(),this._playing=!0;let me=this.getCurrentPosition();const De=T[1]-T[0];if(Y!=="normal")throw new qh('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(Y,"' given."));me<T[0]||me>T[1]?this._updatePositionInState(T[0]):me===T[1]&&this._updatePositionInState(T[0]),me=this.getCurrentPosition();const Ye=Ol(),rt=this._audioContext.createBufferSource();rt.buffer=this._decodedBuffer,rt.connect(this._mainGain),rt.playbackRate.value=z,y>1e3&&(Yh.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(y,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),y=1e3),y>1&&(rt.loop=!0,rt.loopStart=T[0],rt.loopEnd=T[1]);const xt=se.time;let ae=me-T[0];const ze=De*y;rt.start(0,me,ze-ae);const tn=lr=>{const er=Math.max(lr-xt,0)/1e3,Lr=Math.min(er*z+ae,ze);if(Lr!==ze){let Zs=Lr/De%1*De;this._updatePositionInState(Zs+T[0]),xn()}else this._updatePositionInState(T[1]),this._playing=!1,In(),Ye.resolve(!0)},In=()=>{rt.stop(),rt.disconnect()};this._stopPlayCallback=()=>{In(),se.offThisOrNextTick(tn),se.offNextTick(tn),this._playing&&Ye.resolve(!1)};const xn=()=>se.onNextTick(tn);return se.onThisOrNextTick(tn),Ye.promise}},Zh=zt,n3=0;function r3(y){var T;const z=De=>{Y.tick(De)},Y=new Zh.Ticker({onActive(){var De;(De=y==null?void 0:y.start)==null||De.call(y)},onDormant(){var De;(De=y==null?void 0:y.stop)==null||De.call(y)}}),se={tick:z,id:n3++,name:(T=y==null?void 0:y.name)!=null?T:"CustomRafDriver-".concat(n3),type:"Theatre_RafDriver_PublicAPI"},me={type:"Theatre_RafDriver_PrivateAPI",publicApi:se,ticker:Y,start:y==null?void 0:y.start,stop:y==null?void 0:y.stop};return Ct(se,me),se}function dE(){let y=null;const Y=r3({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const se=me=>{Y.tick(me),y=window.requestAnimationFrame(se)};y=window.requestAnimationFrame(se)}else Y.tick(0),setTimeout(()=>Y.tick(1),0)},stop:()=>{typeof window<"u"&&y!==null&&window.cancelAnimationFrame(y)}});return Y}var i3;function R8(){return i3||hE(dE()),i3}function D8(){return R8().ticker}function hE(y){if(i3)throw new Error("`setCoreRafDriver()` is already called.");i3=Me(y)}var FO=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(y){Ct(this,y)}play(y){const T=Me(this);if(T._project.isReady()){const z=y!=null&&y.rafDriver?Me(y.rafDriver).ticker:D8();return T.play(y??{},z)}else{const z=Ol();return z.resolve(!0),z.promise}}pause(){Me(this).pause()}get position(){return Me(this).position}set position(y){Me(this).position=y}__experimental_getKeyframes(y){return Me(this).getKeyframesOfSimpleProp(y)}async attachAudio(y){const{audioContext:T,destinationNode:z,decodedBuffer:Y,gainNode:se}=await BO(y),me=new NO(Y,T,se);return Me(this).replacePlaybackController(me),{audioContext:T,destinationNode:z,decodedBuffer:Y,gainNode:se}}get pointer(){return Me(this).pointer}};async function BO(y){function T(){if(y.audioContext)return Promise.resolve(y.audioContext);const xt=new AudioContext;return xt.state==="running"||typeof window>"u"?Promise.resolve(xt):new Promise(ae=>{const ze=()=>{xt.resume().catch(xn=>{console.error(xn)})},tn=["mousedown","keydown","touchstart"],In={capture:!0,passive:!1};tn.forEach(xn=>{window.addEventListener(xn,ze,In)}),xt.addEventListener("statechange",()=>{xt.state==="running"&&(tn.forEach(xn=>{window.removeEventListener(xn,ze,In)}),ae(xt))})})}async function z(){if(y.source instanceof AudioBuffer)return y.source;const xt=Ol();if(typeof y.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let ae;try{ae=await fetch(y.source)}catch(xn){throw console.error(xn),new Error("Could not fetch '".concat(y.source,"'. Network error logged above."))}let ze;try{ze=await ae.arrayBuffer()}catch(xn){throw console.error(xn),new Error("Could not read '".concat(y.source,"' as an arrayBuffer."))}(await Y).decodeAudioData(ze,xt.resolve,xt.reject);let In;try{In=await xt.promise}catch(xn){throw console.error(xn),new Error("Could not decode ".concat(y.source," as an audio file."))}return In}const Y=T(),se=z(),[me,De]=await Promise.all([Y,se]),Ye=y.destinationNode||me.destination,rt=me.createGain();return rt.connect(Ye),{audioContext:me,decodedBuffer:De,gainNode:rt,destinationNode:Ye}}var pE=fE("Theatre_SheetObject");function fE(y){return T=>typeof T=="object"&&!!T&&T.type===y}var UO=class{constructor(y,T,z,Y,se){this._project=y,this._sheet=T,this._lengthD=z,this._subUnitsPerUnitD=Y,X(this,"address"),X(this,"publicApi"),X(this,"_playbackControllerBox"),X(this,"_prismOfStatePointer"),X(this,"_positionD"),X(this,"_positionFormatterD"),X(this,"_playableRangeD"),X(this,"pointer",(0,oE.pointer)({root:this,path:[]})),X(this,"$$isPointerToPrismProvider",!0),X(this,"_logger"),X(this,"closestGridPosition",me=>{const Ye=1/this.subUnitsPerUnit;return parseFloat((Math.round(me/Ye)*Ye).toFixed(3))}),this._logger=y._logger.named("Sheet",T.address.sheetId).named("Instance",T.address.sheetInstanceId),this.address=G(D({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new FO(this),this._playbackControllerBox=new DO.Atom(se??new LO),this._prismOfStatePointer=(0,ms.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,ms.prism)(()=>{const me=this._prismOfStatePointer.getValue();return(0,ms.val)(me.position)}),this._positionFormatterD=(0,ms.prism)(()=>{const me=(0,ms.val)(this._subUnitsPerUnitD);return new zO(me)})}pointerToPrism(y){const{path:T}=(0,sE.getPointerParts)(y);if(T.length===0)return(0,ms.prism)(()=>({length:(0,ms.val)(this.pointer.length),playing:(0,ms.val)(this.pointer.playing),position:(0,ms.val)(this.pointer.position)}));if(T.length>1)return(0,ms.prism)(()=>{});const[z]=T;return z==="length"?this._lengthD:z==="position"?this._positionD:z==="playing"?(0,ms.prism)(()=>(0,ms.val)(this._prismOfStatePointer.getValue().playing)):(0,ms.prism)(()=>{})}getKeyframesOfSimpleProp(y){const{path:T,root:z}=(0,sE.getPointerParts)(y);if(!pE(z))throw new qh("Argument prop must be a pointer to a SheetObject property");const Y=(0,ms.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[z.address.objectKey]);if(!Y)return[];const{trackData:se,trackIdByPropPath:me}=Y,De=IO(T),Ye=me[De];if(!Ye)return[];const rt=se[Ye];return rt?rt.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(y){let T=y;this.pause(),T>this.length&&(T=this.length);const z=this.length;this._playbackControllerBox.get().gotoPosition(T>z?z:T)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ms.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ms.prism)(()=>[0,(0,ms.val)(this._lengthD)])}playDynamicRange(y,T){return this._playbackControllerBox.get().playDynamicRange(y,T)}async play(y,T){const z=this.length,Y=y&&y.range?y.range:[0,z],se=y&&typeof y.iterationCount=="number"?y.iterationCount:1,me=y&&typeof y.rate<"u"?y.rate:1,De=y&&y.direction?y.direction:"normal";return await this._play(se,[Y[0],Y[1]],me,De,T)}_play(y,T,z,Y,se){return this._playbackControllerBox.get().play(y,T,z,Y,se)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(y){this.pause();const T=this._playbackControllerBox.get();this._playbackControllerBox.set(y);const z=T.getCurrentPosition();T.destroy(),y.gotoPosition(z)}},zO=class{constructor(y){this._fps=y}formatSubUnitForGrid(y){const T=y%1,z=1/this._fps;return Math.round(T/z)+"f"}formatFullUnitForGrid(y){let T=y,z="";if(T>=fi){const se=Math.floor(T/fi);z+=se+"h",T=T%fi}if(T>=rd){const se=Math.floor(T/rd);z+=se+"m",T=T%rd}if(T>=No){const se=Math.floor(T/No);z+=se+"s",T=T%No}const Y=1/this._fps;if(T>=Y){const se=Math.floor(T/Y);z+=se+"f",T=T%Y}return z.length===0?"0s":z}formatForPlayhead(y){let T=y,z="";if(T>=fi){const se=Math.floor(T/fi);z+=Xh(se.toString(),2,"0")+"h",T=T%fi}if(T>=rd){const se=Math.floor(T/rd);z+=Xh(se.toString(),2,"0")+"m",T=T%rd}else z.length>0&&(z+="00m");if(T>=No){const se=Math.floor(T/No);z+=Xh(se.toString(),2,"0")+"s",T=T%No}else z+="00s";const Y=1/this._fps;if(T>=Y){const se=Math.round(T/Y);z+=Xh(se.toString(),2,"0")+"f",T=T%Y}else T/Y>.98?(z+=Xh(1 .toString(),2,"0")+"f",T=T%Y):z+="00f";return z.length===0?"00s00f":z}formatBasic(y){return y.toFixed(2)+"s"}},No=1,rd=No*60,fi=rd*60,O8={};L(O8,{boolean:()=>U8,compound:()=>Nl,file:()=>ir,image:()=>i0,number:()=>q1,rgba:()=>Pn,string:()=>wE,stringLiteral:()=>SE});function mE(y,T){return y.length<=T?y:y.substr(0,T-3)+"..."}var Fe=y=>typeof y=="string"?'string("'.concat(mE(y,10),'")'):typeof y=="number"?"number(".concat(mE(String(y),10),")"):y===null?"null":y===void 0?"undefined":typeof y=="boolean"?String(y):Array.isArray(y)?"array":typeof y=="object"?"object":"unknown",gE=Fe;function VO(y,{removeAlphaIfOpaque:T=!1}={}){const z=(y.a*255|256).toString(16).slice(1),Y=(y.r*255|256).toString(16).slice(1)+(y.g*255|256).toString(16).slice(1)+(y.b*255|256).toString(16).slice(1)+(T&&z==="ff"?"":z);return"#".concat(Y)}function L8(y){return G(D({},y),{toString(){return VO(this,{removeAlphaIfOpaque:!0})}})}function Ll(y){return Object.fromEntries(Object.entries(y).map(([T,z])=>[T,Iv(z,0,1)]))}function jO(y){function T(z){return z>=.0031308?1.055*z**(1/2.4)-.055:12.92*z}return Ll({r:T(y.r),g:T(y.g),b:T(y.b),a:y.a})}function Qn(y){function T(z){return z>=.04045?((z+.055)/(1+.055))**2.4:z/12.92}return{r:T(y.r),g:T(y.g),b:T(y.b),a:y.a}}function vE(y){let T=.4122214708*y.r+.5363325363*y.g+.0514459929*y.b,z=.2119034982*y.r+.6806995451*y.g+.1073969566*y.b,Y=.0883024619*y.r+.2817188376*y.g+.6299787005*y.b,se=Math.cbrt(T),me=Math.cbrt(z),De=Math.cbrt(Y);return{L:.2104542553*se+.793617785*me-.0040720468*De,a:1.9779984951*se-2.428592205*me+.4505937099*De,b:.0259040371*se+.7827717662*me-.808675766*De,alpha:y.a}}function s3(y){let T=y.L+.3963377774*y.a+.2158037573*y.b,z=y.L-.1055613458*y.a-.0638541728*y.b,Y=y.L-.0894841775*y.a-1.291485548*y.b,se=T*T*T,me=z*z*z,De=Y*Y*Y;return{r:4.0767416621*se-3.3077115913*me+.2309699292*De,g:-1.2684380046*se+2.6097574011*me-.3413193965*De,b:-.0041960863*se-.7034186147*me+1.707614701*De,a:y.alpha}}var Ua=Symbol("TheatrePropType_Basic");function N8(y){return typeof y=="object"&&!!y&&y[Ua]==="TheatrePropType"}function Hu(y){if(typeof y=="number")return q1(y);if(typeof y=="boolean")return U8(y);if(typeof y=="string")return wE(y);if(typeof y=="object"&&y){if(N8(y))return y;if(PR(y))return Nl(y);throw new qh("This value is not a valid prop type: ".concat(gE(y)))}else throw new qh("This value is not a valid prop type: ".concat(gE(y)))}function yE(y){const T={};for(const z of Object.keys(y)){const Y=y[z];N8(Y)?T[z]=Y:T[z]=Hu(Y)}return T}var Nl=(y,T={})=>{const z=yE(y),Y=new WeakMap;return{type:"compound",props:z,valueType:null,[Ua]:"TheatrePropType",label:T.label,default:fO(z,me=>me.default),deserializeAndSanitize:me=>{if(typeof me!="object"||!me)return;if(Y.has(me))return Y.get(me);const De={};let Ye=!1;for(const[rt,xt]of Object.entries(z))if(Object.prototype.hasOwnProperty.call(me,rt)){const ae=xt.deserializeAndSanitize(me[rt]);ae!=null&&(Ye=!0,De[rt]=ae)}if(Y.set(me,De),Ye)return De}}},ir=(y,T={})=>{const z=(Y,se,me)=>{var De;return{type:"file",id:((De=T.interpolate)!=null?De:Jh)(Y.id,se.id,me)}};return{type:"file",default:{type:"file",id:y},valueType:null,[Ua]:"TheatrePropType",label:T.label,interpolate:z,deserializeAndSanitize:F8}},F8=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="file"&&(T=!1),!!T)return y},i0=(y,T={})=>{const z=(Y,se,me)=>{var De;return{type:"image",id:((De=T.interpolate)!=null?De:Jh)(Y.id,se.id,me)}};return{type:"image",default:{type:"image",id:y},valueType:null,[Ua]:"TheatrePropType",label:T.label,interpolate:z,deserializeAndSanitize:Qh}},Qh=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="image"&&(T=!1),!!T)return y},q1=(y,T={})=>{var z;return G(D({type:"number",valueType:0,default:y,[Ua]:"TheatrePropType"},T||{}),{label:T.label,nudgeFn:(z=T.nudgeFn)!=null?z:$O,nudgeMultiplier:typeof T.nudgeMultiplier=="number"?T.nudgeMultiplier:void 0,interpolate:B8,deserializeAndSanitize:bE(T.range)})},bE=y=>y?T=>{if(typeof T=="number"&&isFinite(T))return Iv(T,y[0],y[1])}:_E,_E=y=>typeof y=="number"&&isFinite(y)?y:void 0,B8=(y,T,z)=>y+z*(T-y),Pn=(y={r:0,g:0,b:0,a:1},T={})=>{const z={};for(const Y of["r","g","b","a"])z[Y]=Math.min(Math.max(y[Y],0),1);return{type:"rgba",valueType:null,default:L8(z),[Ua]:"TheatrePropType",label:T.label,interpolate:GO,deserializeAndSanitize:HO}},HO=y=>{if(!y)return;let T=!0;for(const Y of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(y,Y)||typeof y[Y]!="number")&&(T=!1);if(!T)return;const z={};for(const Y of["r","g","b","a"])z[Y]=Math.min(Math.max(y[Y],0),1);return L8(z)},GO=(y,T,z)=>{const Y=vE(Qn(y)),se=vE(Qn(T)),me={L:(1-z)*Y.L+z*se.L,a:(1-z)*Y.a+z*se.a,b:(1-z)*Y.b+z*se.b,alpha:(1-z)*Y.alpha+z*se.alpha},De=jO(s3(me));return L8(De)},U8=(y,T={})=>{var z;return{type:"boolean",default:y,valueType:null,[Ua]:"TheatrePropType",label:T.label,interpolate:(z=T.interpolate)!=null?z:Jh,deserializeAndSanitize:WO}},WO=y=>typeof y=="boolean"?y:void 0;function Jh(y){return y}var wE=(y,T={})=>{var z;return{type:"string",default:y,valueType:null,[Ua]:"TheatrePropType",label:T.label,interpolate:(z=T.interpolate)!=null?z:Jh,deserializeAndSanitize:xE}};function xE(y){return typeof y=="string"?y:void 0}function SE(y,T,z={}){var Y,se;return{type:"stringLiteral",default:y,valuesAndLabels:D({},T),[Ua]:"TheatrePropType",valueType:null,as:(Y=z.as)!=null?Y:"menu",label:z.label,interpolate:(se=z.interpolate)!=null?se:Jh,deserializeAndSanitize(me){if(typeof me=="string"&&Object.prototype.hasOwnProperty.call(T,me))return me}}}var $O=({config:y,deltaX:T,deltaFraction:z,magnitude:Y})=>{var se;const{range:me}=y;return!y.nudgeMultiplier&&me&&!me.includes(1/0)&&!me.includes(-1/0)?z*(me[1]-me[0])*Y:T*Y*((se=y.nudgeMultiplier)!=null?se:1)},KO=y=>y.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function o3(y,T){return KO(y)}C(xe());var XO=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(y){Ct(this,y)}object(y,T,z){const Y=Me(this),se=o3(y),me=Y.getObject(se),De=null,Ye=z==null?void 0:z.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(me)return Ye&&me.template._temp_setActions(Ye),me.publicApi;{const rt=Nl(T);return Y.createObject(se,De,rt,Ye).publicApi}}get sequence(){return Me(this).getSequence().publicApi}get project(){return Me(this).project.publicApi}get address(){return D({},Me(this).address)}detachObject(y){const T=Me(this),z=o3(y);if(!T.getObject(z)){Yh.warning(`Couldn't delete object "`.concat(z,'"'),'There is no object with key "'.concat(z,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(z,'")` with the correct key.')),console.warn('Object key "'.concat(z,'" does not exist.'));return}T.deleteObject(z)}},ep=zt,EE=class{constructor(y,T){this.template=y,this.instanceId=T,X(this,"_objects",new ep.Atom({})),X(this,"_sequence"),X(this,"address"),X(this,"publicApi"),X(this,"project"),X(this,"objectsP",this._objects.pointer),X(this,"type","Theatre_Sheet"),X(this,"_logger"),this._logger=y.project._logger.named("Sheet",T),this._logger._trace("creating sheet"),this.project=y.project,this.address=G(D({},y.address),{sheetInstanceId:this.instanceId}),this.publicApi=new XO(this)}createObject(y,T,z,Y={}){const me=this.template.getObjectTemplate(y,T,z,Y).createInstance(this,T,z);return this._objects.setByPointer(De=>De[y],me),me}getObject(y){return this._objects.get()[y]}deleteObject(y){this._objects.reduce(T=>{const z=D({},T);return delete z[y],z})}getSequence(){if(!this._sequence){const y=(0,ep.prism)(()=>{const z=(0,ep.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return z8(z)}),T=(0,ep.prism)(()=>{const z=(0,ep.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return qO(z)});this._sequence=new UO(this.template.project,this,y,T)}return this._sequence}},z8=y=>typeof y=="number"&&isFinite(y)&&y>0?y:10,qO=y=>typeof y=="number"&&_8(y)&&y>=1&&y<=1e3?y:30,YO=class{constructor(y,T){this.project=y,X(this,"type","Theatre_SheetTemplate"),X(this,"address"),X(this,"_instances",new A8.Atom({})),X(this,"instancesP",this._instances.pointer),X(this,"_objectTemplates",new A8.Atom({})),X(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=G(D({},y.address),{sheetId:T})}getInstance(y){let T=this._instances.get()[y];return T||(T=new EE(this,y),this._instances.setByPointer(z=>z[y],T)),T}getObjectTemplate(y,T,z,Y){let se=this._objectTemplates.get()[y];return se||(se=new kO(this,y,T,z,Y),this._objectTemplates.setByPointer(me=>me[y],se)),se}},V8=zt,CE=zt,s0=y=>new Promise(T=>setTimeout(T,y)),Y1=s0;function aa(y){for(var T=arguments.length,z=Array(T>1?T-1:0),Y=1;Y<T;Y++)z[Y-1]=arguments[Y];throw Error("[Immer] minified error nr: "+y+(z.length?" "+z.map(function(se){return"'"+se+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fl(y){return!!y&&!!y[fo]}function ho(y){return!!y&&(function(T){if(!T||typeof T!="object")return!1;var z=Object.getPrototypeOf(T);if(z===null)return!0;var Y=Object.hasOwnProperty.call(z,"constructor")&&z.constructor;return Y===Object||typeof Y=="function"&&Function.toString.call(Y)===IE}(y)||Array.isArray(y)||!!y[m3]||!!y.constructor[m3]||Bl(y)||po(y))}function j8(y){return Fl(y)||aa(23,y),y[fo].t}function tp(y,T,z){z===void 0&&(z=!1),id(y)===0?(z?Object.keys:g3)(y).forEach(function(Y){z&&typeof Y=="symbol"||T(Y,y[Y],y)}):y.forEach(function(Y,se){return T(se,Y,y)})}function id(y){var T=y[fo];return T?T.i>3?T.i-4:T.i:Array.isArray(y)?1:Bl(y)?2:po(y)?3:0}function Z1(y,T){return id(y)===2?y.has(T):Object.prototype.hasOwnProperty.call(y,T)}function PE(y,T){return id(y)===2?y.get(T):y[T]}function H8(y,T,z){var Y=id(y);Y===2?y.set(T,z):Y===3?(y.delete(T),y.add(z)):y[T]=z}function TE(y,T){return y===T?y!==0||1/y==1/T:y!=y&&T!=T}function Bl(y){return kE&&y instanceof Map}function po(y){return AE&&y instanceof Set}function Ul(y){return y.o||y.t}function np(y){if(Array.isArray(y))return Array.prototype.slice.call(y);var T=X8(y);delete T[fo];for(var z=g3(T),Y=0;Y<z.length;Y++){var se=z[Y],me=T[se];me.writable===!1&&(me.writable=!0,me.configurable=!0),(me.get||me.set)&&(T[se]={configurable:!0,writable:!0,enumerable:me.enumerable,value:y[se]})}return Object.create(Object.getPrototypeOf(y),T)}function G8(y,T){return T===void 0&&(T=!1),a3(y)||Fl(y)||!ho(y)||(id(y)>1&&(y.set=y.add=y.clear=y.delete=ME),Object.freeze(y),T&&tp(y,function(z,Y){return G8(Y,!0)},!0)),y}function ME(){aa(2)}function a3(y){return y==null||typeof y!="object"||Object.isFrozen(y)}function V0(y){var T=RE[y];return T||aa(18,y),T}function l3(){return sp}function Ei(y,T){T&&(V0("Patches"),y.u=[],y.s=[],y.v=T)}function Q1(y){u3(y),y.p.forEach(d3),y.p=null}function u3(y){y===sp&&(sp=y.l)}function c3(y){return sp={p:[],l:sp,h:y,m:!0,_:0}}function d3(y){var T=y[fo];T.i===0||T.i===1?T.j():T.O=!0}function sd(y,T){T._=T.p.length;var z=T.p[0],Y=y!==void 0&&y!==z;return T.h.g||V0("ES5").S(T,y,Y),Y?(z[fo].P&&(Q1(T),aa(4)),ho(y)&&(y=za(T,y),T.l||od(T,y)),T.u&&V0("Patches").M(z[fo],y,T.u,T.s)):y=za(T,z,[]),Q1(T),T.u&&T.v(T.u,T.s),y!==J1?y:void 0}function za(y,T,z){if(a3(T))return T;var Y=T[fo];if(!Y)return tp(T,function(me,De){return j0(y,Y,T,me,De,z)},!0),T;if(Y.A!==y)return T;if(!Y.P)return od(y,Y.t,!0),Y.t;if(!Y.I){Y.I=!0,Y.A._--;var se=Y.i===4||Y.i===5?Y.o=np(Y.k):Y.o;tp(Y.i===3?new Set(se):se,function(me,De){return j0(y,Y,se,me,De,z)}),od(y,se,!1),z&&y.u&&V0("Patches").R(Y,z,y.u,y.s)}return Y.o}function j0(y,T,z,Y,se,me){if(Fl(se)){var De=za(y,se,me&&T&&T.i!==3&&!Z1(T.D,Y)?me.concat(Y):void 0);if(H8(z,Y,De),!Fl(De))return;y.m=!1}if(ho(se)&&!a3(se)){if(!y.h.F&&y._<1)return;za(y,se),T&&T.A.l||od(y,se)}}function od(y,T,z){z===void 0&&(z=!1),y.h.F&&y.m&&G8(T,z)}function h3(y,T){var z=y[fo];return(z?Ul(z):y)[T]}function W8(y,T){if(T in y)for(var z=Object.getPrototypeOf(y);z;){var Y=Object.getOwnPropertyDescriptor(z,T);if(Y)return Y;z=Object.getPrototypeOf(z)}}function p3(y){y.P||(y.P=!0,y.l&&p3(y.l))}function ad(y){y.o||(y.o=np(y.t))}function ld(y,T,z){var Y=Bl(T)?V0("MapSet").N(T,z):po(T)?V0("MapSet").T(T,z):y.g?function(se,me){var De=Array.isArray(se),Ye={i:De?1:0,A:me?me.A:l3(),P:!1,I:!1,D:{},l:me,t:se,k:null,o:null,j:null,C:!1},rt=Ye,xt=zl;De&&(rt=[Ye],xt=em);var ae=Proxy.revocable(rt,xt),ze=ae.revoke,tn=ae.proxy;return Ye.k=tn,Ye.j=ze,tn}(T,z):V0("ES5").J(T,z);return(z?z.A:l3()).p.push(Y),Y}function rp(y){return Fl(y)||aa(22,y),function T(z){if(!ho(z))return z;var Y,se=z[fo],me=id(z);if(se){if(!se.P&&(se.i<4||!V0("ES5").K(se)))return se.t;se.I=!0,Y=ip(z,me),se.I=!1}else Y=ip(z,me);return tp(Y,function(De,Ye){se&&PE(se.t,De)===Ye||H8(Y,De,T(Ye))}),me===3?new Set(Y):Y}(y)}function ip(y,T){switch(T){case 2:return new Map(y);case 3:return Array.from(y)}return np(y)}var $8,sp,f3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",kE=typeof Map<"u",AE=typeof Set<"u",K8=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",J1=f3?Symbol.for("immer-nothing"):(($8={})["immer-nothing"]=!0,$8),m3=f3?Symbol.for("immer-draftable"):"__$immer_draftable",fo=f3?Symbol.for("immer-state"):"__$immer_state",IE=""+Object.prototype.constructor,g3=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,X8=Object.getOwnPropertyDescriptors||function(y){var T={};return g3(y).forEach(function(z){T[z]=Object.getOwnPropertyDescriptor(y,z)}),T},RE={},zl={get:function(y,T){if(T===fo)return y;var z=Ul(y);if(!Z1(z,T))return function(se,me,De){var Ye,rt=W8(me,De);return rt?"value"in rt?rt.value:(Ye=rt.get)===null||Ye===void 0?void 0:Ye.call(se.k):void 0}(y,z,T);var Y=z[T];return y.I||!ho(Y)?Y:Y===h3(y.t,T)?(ad(y),y.o[T]=ld(y.A.h,Y,y)):Y},has:function(y,T){return T in Ul(y)},ownKeys:function(y){return Reflect.ownKeys(Ul(y))},set:function(y,T,z){var Y=W8(Ul(y),T);if(Y!=null&&Y.set)return Y.set.call(y.k,z),!0;if(!y.P){var se=h3(Ul(y),T),me=se==null?void 0:se[fo];if(me&&me.t===z)return y.o[T]=z,y.D[T]=!1,!0;if(TE(z,se)&&(z!==void 0||Z1(y.t,T)))return!0;ad(y),p3(y)}return y.o[T]===z&&typeof z!="number"&&(z!==void 0||T in y.o)||(y.o[T]=z,y.D[T]=!0,!0)},deleteProperty:function(y,T){return h3(y.t,T)!==void 0||T in y.t?(y.D[T]=!1,ad(y),p3(y)):delete y.D[T],y.o&&delete y.o[T],!0},getOwnPropertyDescriptor:function(y,T){var z=Ul(y),Y=Reflect.getOwnPropertyDescriptor(z,T);return Y&&{writable:!0,configurable:y.i!==1||T!=="length",enumerable:Y.enumerable,value:z[T]}},defineProperty:function(){aa(11)},getPrototypeOf:function(y){return Object.getPrototypeOf(y.t)},setPrototypeOf:function(){aa(12)}},em={};tp(zl,function(y,T){em[y]=function(){return arguments[0]=arguments[0][0],T.apply(this,arguments)}}),em.deleteProperty=function(y,T){return zl.deleteProperty.call(this,y[0],T)},em.set=function(y,T,z){return zl.set.call(this,y[0],T,z,y[0])};var q8=function(){function y(z){var Y=this;this.g=K8,this.F=!0,this.produce=function(se,me,De){if(typeof se=="function"&&typeof me!="function"){var Ye=me;me=se;var rt=Y;return function(In){var xn=this;In===void 0&&(In=Ye);for(var lr=arguments.length,ur=Array(lr>1?lr-1:0),er=1;er<lr;er++)ur[er-1]=arguments[er];return rt.produce(In,function(Lr){var Zs;return(Zs=me).call.apply(Zs,[xn,Lr].concat(ur))})}}var xt;if(typeof me!="function"&&aa(6),De!==void 0&&typeof De!="function"&&aa(7),ho(se)){var ae=c3(Y),ze=ld(Y,se,void 0),tn=!0;try{xt=me(ze),tn=!1}finally{tn?Q1(ae):u3(ae)}return typeof Promise<"u"&&xt instanceof Promise?xt.then(function(In){return Ei(ae,De),sd(In,ae)},function(In){throw Q1(ae),In}):(Ei(ae,De),sd(xt,ae))}if(!se||typeof se!="object")return(xt=me(se))===J1?void 0:(xt===void 0&&(xt=se),Y.F&&G8(xt,!0),xt);aa(21,se)},this.produceWithPatches=function(se,me){return typeof se=="function"?function(rt){for(var xt=arguments.length,ae=Array(xt>1?xt-1:0),ze=1;ze<xt;ze++)ae[ze-1]=arguments[ze];return Y.produceWithPatches(rt,function(tn){return se.apply(void 0,[tn].concat(ae))})}:[Y.produce(se,me,function(rt,xt){De=rt,Ye=xt}),De,Ye];var De,Ye},typeof(z==null?void 0:z.useProxies)=="boolean"&&this.setUseProxies(z.useProxies),typeof(z==null?void 0:z.autoFreeze)=="boolean"&&this.setAutoFreeze(z.autoFreeze)}var T=y.prototype;return T.createDraft=function(z){ho(z)||aa(8),Fl(z)&&(z=rp(z));var Y=c3(this),se=ld(this,z,void 0);return se[fo].C=!0,u3(Y),se},T.finishDraft=function(z,Y){var se=z&&z[fo],me=se.A;return Ei(me,Y),sd(void 0,me)},T.setAutoFreeze=function(z){this.F=z},T.setUseProxies=function(z){z&&!K8&&aa(20),this.g=z},T.applyPatches=function(z,Y){var se;for(se=Y.length-1;se>=0;se--){var me=Y[se];if(me.path.length===0&&me.op==="replace"){z=me.value;break}}var De=V0("Patches").$;return Fl(z)?De(z,Y):this.produce(z,function(Ye){return De(Ye,Y.slice(se+1))})},y}(),gs=new q8;gs.produce,gs.produceWithPatches.bind(gs),gs.setAutoFreeze.bind(gs),gs.setUseProxies.bind(gs),gs.applyPatches.bind(gs),gs.createDraft.bind(gs),gs.finishDraft.bind(gs);var Y8={currentProjectStateDefinitionVersion:"0.4.0"},v3=Y8;async function DE(y,T,z){await Y1(0),y.transaction(({drafts:Y})=>{var se;const me=T.address.projectId;Y.ephemeral.coreByProject[me]={lastExportedObject:null,loadingState:{type:"loading"}},Y.ahistoric.coreByProject[me]={ahistoricStuff:""};function De(){Y.ephemeral.coreByProject[me].loadingState={type:"loaded"},Y.historic.coreByProject[me]={sheetsById:{},definitionVersion:v3.currentProjectStateDefinitionVersion,revisionHistory:[]}}function Ye(ze){Y.ephemeral.coreByProject[me].loadingState={type:"loaded"},Y.historic.coreByProject[me]=ze}function rt(){Y.ephemeral.coreByProject[me].loadingState={type:"loaded"}}function xt(ze){Y.ephemeral.coreByProject[me].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:ze}}const ae=(se=j8(Y.historic))==null?void 0:se.coreByProject[T.address.projectId];ae?z&&ae.revisionHistory.indexOf(z.revisionHistory[0])==-1?xt(z):rt():z?Ye(z):De()})}function Z8(){}function Q8(y){var T,z;const Y=(T=y==null?void 0:y.logging)!=null&&T.internal?(z=y.logging.min)!=null?z:256:1/0,se=Y<=128,me=Y<=512,De=ZS(void 0,{_debug:se?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Z8,_error:me?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Z8});if(y){const{logger:Ye,logging:rt}=y;Ye&&De.configureLogger(Ye),rt?De.configureLogging(rt):De.configureLogging({dev:!1})}return De.getLogger().named("Theatre")}var y3=class{constructor(y,T={},z){this.config=T,this.publicApi=z,X(this,"pointers"),X(this,"_pointerProxies"),X(this,"address"),X(this,"_studioReadyDeferred"),X(this,"_assetStorageReadyDeferred"),X(this,"_readyPromise"),X(this,"_sheetTemplates",new CE.Atom({})),X(this,"sheetTemplatesP",this._sheetTemplates.pointer),X(this,"_studio"),X(this,"assetStorage"),X(this,"type","Theatre_Project"),X(this,"_logger");var Y;this._logger=Q8({logging:{dev:!0}}).named("Project",y),this._logger.traceDev("creating project"),this.address={projectId:y};const se=new CE.Atom({ahistoric:{ahistoricStuff:""},historic:(Y=T.state)!=null?Y:{sheetsById:{},definitionVersion:v3.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Ol(),this.assetStorage={getAssetUrl:me=>{var De;return"".concat((De=T.assets)==null?void 0:De.baseUrl,"/").concat(me)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new V8.PointerProxy(se.pointer.historic),ahistoric:new V8.PointerProxy(se.pointer.ahistoric),ephemeral:new V8.PointerProxy(se.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},de.add(y,this),this._studioReadyDeferred=Ol(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),T.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(y,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(y){if(this._studio){if(this._studio!==y)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=y,y.initialized.then(async()=>{var T;await DE(y,this,this.config.state),this._pointerProxies.historic.setPointer(y.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(y.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(y.atomP.ephemeral.coreByProject[this.address.projectId]),await y.createAssetStorage(this,(T=this.config.assets)==null?void 0:T.baseUrl).then(z=>{this.assetStorage=z,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(T=>{throw console.error(T),T})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(y,T="default"){let z=this._sheetTemplates.get()[y];return z||(z=new YO(this,y),this._sheetTemplates.reduce(Y=>G(D({},Y),{[y]:z}))),z.getInstance(T)}},b3=class{get type(){return"Theatre_Project_PublicAPI"}constructor(y,T={}){Ct(this,new y3(y,T,this))}get ready(){return Me(this).ready}get isReady(){return Me(this).isReady()}get address(){return D({},Me(this).address)}getAssetUrl(y){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return y.id?Me(this).assetStorage.getAssetUrl(y.id):void 0}sheet(y,T="default"){const z=o3(y);return Me(this).getOrCreateSheet(z,T).publicApi}};C(xe());var J8=zt,op=zt;function e6(y,T={}){const z=de.get(y);if(z)return z.publicApi;const se=Q8().named("Project",y);return T.state?(LE(y,T.state),se._debug("deep validated config.state on disk")):se._debug("no config.state"),new b3(y,T)}var OE=(y,T)=>{if(Array.isArray(T)||T==null||T.definitionVersion!==v3.currentProjectStateDefinitionVersion)throw new qh("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(y),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},LE=(y,T)=>{OE(y,T)};function _3(y,T,z){const Y=z?Me(z).ticker:D8();if((0,J8.isPointer)(y))return(0,op.pointerToPrism)(y).onChange(Y,T,!0);if((0,op.isPrism)(y))return y.onChange(Y,T,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function t6(y){if((0,J8.isPointer)(y))return(0,op.pointerToPrism)(y).getValue();throw new Error("Called val(p) where p is not a pointer.")}var n6=class{constructor(){X(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(y,T){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=y;const z={projectsP:de.atom.pointer.projects,privateAPI:Me,coreExports:ne,getCoreRafDriver:R8};T(z)}};r6();function r6(){if(typeof window>"u")return;const y=window[I8];if(typeof y<"u")throw typeof y=="object"&&y&&typeof y.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(I8," seems to be already set by a module other than @theatre/core."));const T=new n6;window[I8]=T;const z=window[uE];z&&z!==null&&z.type==="Theatre_StudioBundle"&&z.registerCoreBundle(T)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(cI,cI.exports);var dI=cI.exports;class prt{constructor(e,n,r){this.name=e,this.fg=n,this.bg=r,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,n,r,i,o=0){let u=1/0,d=0;this.context&&(u=Math.min(u,e),d=Math.max(r,e),i=Math.max(i,n),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(o)+" "+this.name+" ("+u.toFixed(o)+"-"+parseFloat(d.toFixed(o))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-n/i)*this.GRAPH_HEIGHT))}}const j_e=class aA{constructor({logsPerSecond:e=20,samplesLog:n=100,samplesGraph:r=10,precision:i=2,minimal:o=!1,horizontal:u=!0,mode:d=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=d,this.horizontal=u,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",o&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=o,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new aA.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new aA.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=n,this.samplesGraph=r,this.precision=i,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",f=>{f.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=d,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}patchThreeRenderer(e){const n=e.render,r=this;e.render=function(i,o){r.begin(),n.call(this,i,o),r.end()},this.threeRendererPatched=!0}resizePanel(e,n){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=n*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=n*e.HEIGHT/e.PR+"px"))}addPanel(e,n){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,n)),e}showPanel(e){for(let n=0;n<this.dom.children.length;n++){const r=this.dom.children[n];r.style.display=n===e?"block":"none"}this.mode=e}init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const n=e;this.patchThreeRenderer(n),this.gl=n.getContext()}if(!this.gl&&e instanceof WebGL2RenderingContext)this.gl=e;else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new aA.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,n)=>{if(this.gl){const r=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),i=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(r&&!i){const u=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=u,this.gl.deleteQuery(e.query),this.gpuQueries.splice(n,1)}}}))}update(){this.processGpuQueries(),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=e),e>=this.prevTime+1e3){const n=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(n,n,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,n){n.logs.push(e),n.logs.length>this.samplesLog&&n.logs.shift(),n.graph.push(e),n.graph.length>this.samplesGraph&&n.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,n,r){if(window.performance&&n&&this.isRunningCPUProfiling){window.performance.mark(n);const i=performance.measure(r,e,n);this.totalCpuDuration+=i.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,n){if(n.logs.length>0){let r=0,i=.01;for(let d=0;d<n.logs.length;d++)r+=n.logs[d],n.logs[d]>i&&(i=n.logs[d]);let o=0,u=.01;for(let d=0;d<n.graph.length;d++)o+=n.graph[d],n.graph[d]>u&&(u=n.graph[d]);e&&e.update(r/Math.min(n.logs.length,this.samplesLog),o/Math.min(n.graph.length,this.samplesGraph),i,u,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};j_e.Panel=prt;let frt=j_e;function mrt(t){function e(){return t.three.scene===void 0?(console.log("No scene:",t.three),!1):!0}const n=d=>{var v;if(!e())return;const f=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",d.value);f!==void 0&&t.three.setObject(f)},r=(d,f,v)=>{var S;if(!e())return;const x=(S=t.three.scene)==null?void 0:S.getObjectByProperty("uuid",d);x!==void 0&&Er(x,f,v)},i=d=>{if(!e())return;const f=d.value,{key:v,value:x,uuid:S}=f;r(S,v,x)},o=d=>{if(!e())return;const f=d.value;db(f.value).then(v=>{r(f.uuid,f.key,v),r(f.uuid,"material.needsUpdate",!0)})},u=d=>{var D;if(!e())return;const{key:f,uuid:v,value:x,subitem:S}=d.value,M=(D=t.three.scene)==null?void 0:D.getObjectByProperty("uuid",v);if(M!==void 0)try{S!==void 0?CVe(M,S)[f](x):M[f](x)}catch(G){console.log("Error requesting method:"),console.log(G),console.log(f),console.log(x)}};return Et.useEffect(()=>(Cr.addEventListener(Pr.GET_OBJECT,n),Cr.addEventListener(Pr.UPDATE_OBJECT,i),Cr.addEventListener(Pr.CREATE_TEXTURE,o),Cr.addEventListener(Pr.REQUEST_METHOD,u),()=>{Cr.removeEventListener(Pr.GET_OBJECT,n),Cr.removeEventListener(Pr.UPDATE_OBJECT,i),Cr.removeEventListener(Pr.CREATE_TEXTURE,o),Cr.removeEventListener(Pr.REQUEST_METHOD,u)}),[]),null}let hl,Hs,Hy="";Ar.editor=document.location.hash.search("editor")>-1;function grt(){const t=Et.useRef(null),e=Et.useRef(null),n=Ar.components.get("theatre"),r=Ar.components.get("three");Ar.components.get("debug"),Et.useEffect(()=>{if(n===void 0)return;const d=t.current;d.style.visibility=Ar.editor?"hidden":"inherit",n.sheet("App");const f=n==null?void 0:n.sheetObject("App","Box",{x:dI.types.number(100,{range:[0,window.innerWidth]}),y:dI.types.number(100,{range:[0,window.innerHeight]})},v=>{d.style.left=`${v.x}px`,d.style.top=`${v.y}px`});return()=>{f!==void 0&&(n==null||n.unsubscribe(f)),Ar.dispose()}},[]),Ar.editor||Et.useEffect(()=>(hl=new F$({canvas:e.current,stencil:!1}),hl.autoClear=!1,hl.shadowMap.enabled=!0,hl.setPixelRatio(devicePixelRatio),hl.setClearColor(0),Ar.components.get("three").renderer=hl,()=>{hl.dispose()}),[]),Et.useEffect(()=>{let d;Ar.editor||(d=new frt,d.init(hl),document.body.appendChild(d.dom));let f=-1;const v=()=>{const S=window.innerWidth,M=window.innerHeight;Hs==null||Hs.resize(S,M),hl.setSize(S,M)},x=()=>{var S;(S=lg.rafDriver)==null||S.tick(performance.now()),Hs==null||Hs.update(),d.begin(),hl.clear(),Hs==null||Hs.draw(),d.end(),d.update(),f=requestAnimationFrame(x)};return Ar.editor||(window.addEventListener("resize",v),v(),x()),()=>{Hs!==void 0&&(r.removeCamera(Hs.camera),WA(Hs)),window.removeEventListener("resize",v),cancelAnimationFrame(f),f=-1}},[]);const i=()=>{Hs!==void 0&&(Hs.camera!==void 0&&r.removeCamera(Hs.camera),WA(Hs)),Hy==="scene1"?Hs=new z_e(hl):Hs=new V_e(hl),Hs.resize(window.innerWidth,window.innerHeight)},o=()=>{Hy!=="scene1"&&(Hy="scene1",i())},u=()=>{Hy!=="scene2"&&(Hy="scene2",i())};return Et.useEffect(()=>{const d=t.current;d.style.visibility=Ar.editor?"hidden":"inherit";const f=x=>{console.log("Custom:",x.value)},v=x=>{const S=x.value.value;S==="scene1"?o():S==="scene2"&&u()};return Cr.addEventListener(Pr.CUSTOM,f),Cr.addEventListener(Pr.SELECT_DROPDOWN,v),()=>{Cr.removeEventListener(Pr.CUSTOM,f),Cr.removeEventListener(Pr.SELECT_DROPDOWN,v)}},[]),Ke.jsxs(Ke.Fragment,{children:[Ar.isApp&&Ke.jsx("canvas",{ref:e}),Ke.jsx("div",{id:"box",ref:t,children:Ke.jsx("button",{onClick:()=>{n.playSheet("Scene1")},children:"Click"})}),Ke.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px"},children:[Ke.jsx("button",{onClick:o,children:"Scene 1"}),Ke.jsx("button",{onClick:u,children:"Scene 2"})]}),Ke.jsx(mrt,{three:r})]})}function vrt(){const[t,e]=Et.useState(!1);return Et.useEffect(()=>{const n=()=>{t_.removeEventListener(n_.LOAD_COMPLETE,n);const r=Ar.components.get("theatre"),i=N_e.get("animation");r.project=dI.getProject("RemoteApp",{state:i}),r.project.ready.then(()=>{e(!0)})};t_.addEventListener(n_.LOAD_COMPLETE,n),crt()},[e]),Ke.jsxs(Ke.Fragment,{children:[!t&&Ke.jsx("p",{children:"Loading..."}),t&&Ke.jsx(grt,{})]})}lg.rafDriver=dI.createRafDriver();F8e.initialize({__experimental_rafDriver:lg.rafDriver});RH.createRoot(document.getElementById("root")).render(Ke.jsx(Ke.Fragment,{children:Ke.jsxs(Ke.Fragment,{children:[Ke.jsx(hrt,{}),Ke.jsx(vrt,{})]})}));
